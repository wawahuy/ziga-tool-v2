var cc = cc || {};
cc._tmp = cc._tmp || {};
cc._LogInfos = {};
var _p = window,
  _p = Object.prototype,
  _p = null;
cc._drawingUtil = null;
cc._renderContext = null;
cc._supportRender = !1;
cc._canvas = null;
cc.container = null;
cc._gameDiv = null;
window.ENABLE_IMAEG_POOL = !0;
cc.each = function (a, b, d) {
  if (a)
    if (a instanceof Array)
      for (var e = 0, f = a.length; e < f && !1 !== b.call(d, a[e], e); e++);
    else for (e in a) if (!1 === b.call(d, a[e], e)) break;
};
cc.extend = function (a) {
  var b = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];
  cc.each(b, function (b) {
    for (var e in b) b.hasOwnProperty(e) && (a[e] = b[e]);
  });
  return a;
};
cc.inherits = function (a, b) {
  function d() {}
  d.prototype = b.prototype;
  a.superClass_ = b.prototype;
  a.prototype = new d();
  a.prototype.constructor = a;
};
cc.isFunction = function (a) {
  return "function" === typeof a;
};
cc.isNumber = function (a) {
  return (
    "number" === typeof a ||
    "[object Number]" === Object.prototype.toString.call(a)
  );
};
cc.isString = function (a) {
  return (
    "string" === typeof a ||
    "[object String]" === Object.prototype.toString.call(a)
  );
};
cc.isArray = function (a) {
  return (
    Array.isArray(a) ||
    ("object" === typeof a &&
      "[object Array]" === Object.prototype.toString.call(a))
  );
};
cc.isUndefined = function (a) {
  return "undefined" === typeof a;
};
cc.isObject = function (a) {
  return (
    "object" === typeof a &&
    "[object Object]" === Object.prototype.toString.call(a)
  );
};
cc.isCrossOrigin = function (a) {
  if (!a) return cc.log("invalid URL"), !1;
  var b = a.indexOf("://");
  if (-1 === b) return !1;
  b = a.indexOf("/", b + 3);
  return (-1 === b ? a : a.substring(0, b)) !== location.origin;
};
cc.AsyncPool = function (a, b, d, e, f) {
  var g = this;
  g._finished = !1;
  g._srcObj = a;
  g._limit = b;
  g._pool = [];
  g._iterator = d;
  g._iteratorTarget = f;
  g._onEnd = e;
  g._onEndTarget = f;
  g._results = a instanceof Array ? [] : {};
  g._errors = a instanceof Array ? [] : {};
  cc.each(a, function (a, b) {
    g._pool.push({ index: b, value: a });
  });
  g.size = g._pool.length;
  g.finishedSize = 0;
  g._workingSize = 0;
  g._limit = g._limit || g.size;
  g.onIterator = function (a, b) {
    g._iterator = a;
    g._iteratorTarget = b;
  };
  g.onEnd = function (a, b) {
    g._onEnd = a;
    g._onEndTarget = b;
  };
  g._handleItem = function () {
    var a = this;
    if (!(0 === a._pool.length || a._workingSize >= a._limit)) {
      var b = a._pool.shift(),
        d = b.value,
        e = b.index;
      a._workingSize++;
      a._iterator.call(
        a._iteratorTarget,
        d,
        e,
        function (b, d) {
          if (!a._finished)
            if (
              (b ? (a._errors[this.index] = b) : (a._results[this.index] = d),
              a.finishedSize++,
              a._workingSize--,
              a.finishedSize === a.size)
            )
              a.onEnd(0 === a._errors.length ? null : a._errors, a._results);
            else a._handleItem();
        }.bind(b),
        a
      );
    }
  };
  g.flow = function () {
    if (0 === this._pool.length)
      this._onEnd && this._onEnd.call(this._onEndTarget, null, []);
    else for (var a = 0; a < this._limit; a++) this._handleItem();
  };
  g.onEnd = function (a, b) {
    g._finished = !0;
    if (g._onEnd) {
      var d = g._onEnd,
        e = g._onEndTarget;
      g._onEnd = null;
      g._onEndTarget = null;
      d.call(e, a, b);
    }
  };
};
cc.async = {
  series: function (a, b, d) {
    a = new cc.AsyncPool(
      a,
      1,
      function (a, b, g) {
        a.call(d, g);
      },
      b,
      d
    );
    a.flow();
    return a;
  },
  parallel: function (a, b, d) {
    a = new cc.AsyncPool(
      a,
      0,
      function (a, b, g) {
        a.call(d, g);
      },
      b,
      d
    );
    a.flow();
    return a;
  },
  waterfall: function (a, b, d) {
    var e = [],
      f = [null],
      g = new cc.AsyncPool(
        a,
        1,
        function (b, g, m) {
          e.push(function (b) {
            e = Array.prototype.slice.call(arguments, 1);
            a.length - 1 === g && (f = f.concat(e));
            m.apply(null, arguments);
          });
          b.apply(d, e);
        },
        function (a) {
          if (b) {
            if (a) return b.call(d, a);
            b.apply(d, f);
          }
        }
      );
    g.flow();
    return g;
  },
  map: function (a, b, d, e) {
    var f = b;
    "object" === typeof b &&
      ((d = b.cb), (e = b.iteratorTarget), (f = b.iterator));
    a = new cc.AsyncPool(a, 0, f, d, e);
    a.flow();
    return a;
  },
  mapLimit: function (a, b, d, e, f) {
    a = new cc.AsyncPool(a, b, d, e, f);
    a.flow();
    return a;
  },
};
cc.path = {
  normalizeRE: /[^\.\/]+\/\.\.\//,
  join: function () {
    for (var a = arguments.length, b = "", d = 0; d < a; d++)
      b = (b + ("" === b ? "" : "/") + arguments[d]).replace(/(\/|\\\\)$/, "");
    return b;
  },
  extname: function (a) {
    return (a = /(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a)) ? a[1] : null;
  },
  mainFileName: function (a) {
    if (a) {
      var b = a.lastIndexOf(".");
      if (-1 !== b) return a.substring(0, b);
    }
    return a;
  },
  basename: function (a, b) {
    var d = a.indexOf("?");
    0 < d && (a = a.substring(0, d));
    d = /(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(a.replace(/(\/|\\\\)$/, ""));
    if (!d) return null;
    d = d[2];
    return b &&
      a.substring(a.length - b.length).toLowerCase() === b.toLowerCase()
      ? d.substring(0, d.length - b.length)
      : d;
  },
  dirname: function (a) {
    return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/, "$2");
  },
  changeExtname: function (a, b) {
    b = b || "";
    var d = a.indexOf("?"),
      e = "";
    0 < d && ((e = a.substring(d)), (a = a.substring(0, d)));
    d = a.lastIndexOf(".");
    return 0 > d ? a + b + e : a.substring(0, d) + b + e;
  },
  changeBasename: function (a, b, d) {
    if (0 === b.indexOf(".")) return this.changeExtname(a, b);
    var e = a.indexOf("?"),
      f = "";
    d = d ? this.extname(a) : "";
    0 < e && ((f = a.substring(e)), (a = a.substring(0, e)));
    e = a.lastIndexOf("/");
    return a.substring(0, 0 >= e ? 0 : e + 1) + b + d + f;
  },
  _normalize: function (a) {
    var b = (a = String(a));
    do (b = a), (a = a.replace(this.normalizeRE, ""));
    while (b.length !== a.length);
    return a;
  },
};
base64ArrayBuffer = function (a) {
  var b = "";
  a = new Uint8Array(a);
  for (
    var d = a.byteLength, e = d % 3, d = d - e, f, g, h, k, m = 0;
    m < d;
    m += 3
  )
    (k = (a[m] << 16) | (a[m + 1] << 8) | a[m + 2]),
      (f = (k & 16515072) >> 18),
      (g = (k & 258048) >> 12),
      (h = (k & 4032) >> 6),
      (k &= 63),
      (b +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k]);
  1 == e
    ? ((k = a[d]),
      (b +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[
          (k & 252) >> 2
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[
          (k & 3) << 4
        ] +
        "\x3d\x3d"))
    : 2 == e &&
      ((k = (a[d] << 8) | a[d + 1]),
      (b +=
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[
          (k & 64512) >> 10
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[
          (k & 1008) >> 4
        ] +
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[
          (k & 15) << 2
        ] +
        "\x3d"));
  return b;
};
var imagePool = {
  _pool: Array(10),
  _MAX: 10,
  _smallImg: "data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA\x3d",
  count: 0,
  get: function () {
    if (0 < this.count) {
      this.count--;
      var a = this._pool[this.count];
      this._pool[this.count] = null;
      return a;
    }
    return new Image();
  },
  put: function (a) {
    var b = this._pool;
    a instanceof HTMLImageElement &&
      this.count < this._MAX &&
      ((a.src = this._smallImg), (b[this.count] = a), this.count++);
  },
};
cc.loader = (function () {
  var a = {},
    b = {},
    d = {},
    e = {},
    f = {},
    g = /^(?:https?|ftp):\/\/\S*$/i;
  return {
    resPath: "",
    audioPath: "",
    cache: {},
    getXMLHttpRequest: function () {
      var a = window.XMLHttpRequest
        ? new window.XMLHttpRequest()
        : new ActiveXObject("MSXML2.XMLHTTP");
      a.timeout = 1e4;
      void 0 === a.ontimeout && (a._timeoutId = -1);
      return a;
    },
    _getArgs4Js: function (a) {
      var b = a[0],
        d = a[1],
        e = a[2],
        f = ["", null, null];
      if (1 === a.length) f[1] = b instanceof Array ? b : [b];
      else if (2 === a.length)
        "function" === typeof d
          ? ((f[1] = b instanceof Array ? b : [b]), (f[2] = d))
          : ((f[0] = b || ""), (f[1] = d instanceof Array ? d : [d]));
      else if (3 === a.length)
        (f[0] = b || ""), (f[1] = d instanceof Array ? d : [d]), (f[2] = e);
      else throw Error("arguments error to load js!");
      return f;
    },
    isLoading: function (a) {
      return void 0 !== f[a];
    },
    loadJs: function (b, d, e) {
      var f = this,
        g = f._getArgs4Js(arguments),
        r = g[0],
        s = g[1],
        g = g[2];
      -1 < navigator.userAgent.indexOf("Trident/5")
        ? f._loadJs4Dependency(r, s, 0, g)
        : cc.async.map(
            s,
            function (b, d, e) {
              b = cc.path.join(r, b);
              if (a[b]) return e(null);
              f._createScript(b, !1, e);
            },
            g
          );
    },
    loadJsWithImg: function (a, b, d) {
      var e = this._loadJsImg(),
        f = this._getArgs4Js(arguments);
      this.loadJs(f[0], f[1], function (a) {
        if (a) throw Error(a);
        e.parentNode.removeChild(e);
        if (f[2]) f[2]();
      });
    },
    _createScript: function (b, d, e) {
      var f = document,
        g = document.createElement("script");
      g.async = d;
      a[b] = !0;
      cc.game.config.noCache && "string" === typeof b
        ? this._noCacheRex.test(b)
          ? (g.src = b + "\x26v\x3d" + bk.fileVer)
          : (g.src = b + "?v\x3d" + bk.fileVer)
        : (g.src = b);
      g.addEventListener(
        "load",
        function () {
          g.parentNode.removeChild(g);
          this.removeEventListener("load", arguments.callee, !1);
          e();
        },
        !1
      );
      g.addEventListener(
        "error",
        function () {
          g.parentNode.removeChild(g);
          e("Load " + b + " failed!");
        },
        !1
      );
      f.body.appendChild(g);
    },
    _loadJs4Dependency: function (a, b, d, e) {
      if (d >= b.length) e && e();
      else {
        var f = this;
        f._createScript(cc.path.join(a, b[d]), !1, function (g) {
          if (g) return e(g);
          f._loadJs4Dependency(a, b, d + 1, e);
        });
      }
    },
    _loadJsImg: function () {
      var a = document,
        b = a.getElementById("cocos2d_loadJsImg");
      if (!b) {
        b = document.createElement("img");
        cc._loadingImage && (b.src = cc._loadingImage);
        a = a.getElementById(cc.game.config.id);
        a.style.backgroundColor = "transparent";
        a.parentNode.appendChild(b);
        var d = getComputedStyle ? getComputedStyle(a) : a.currentStyle;
        d || (d = { width: a.width, height: a.height });
        b.style.left =
          a.offsetLeft + (parseFloat(d.width) - b.width) / 2 + "px";
        b.style.top =
          a.offsetTop + (parseFloat(d.height) - b.height) / 2 + "px";
        b.style.position = "absolute";
      }
      return b;
    },
    loadTxt: function (a, b) {
      if (cc._isNodeJs)
        require("fs").readFile(a, function (a, d) {
          a ? b(a) : b(null, d.toString());
        });
      else {
        var d = this.getXMLHttpRequest(),
          e = "load " + a + " failed!";
        d.open("GET", a, !0);
        if (
          /msie/i.test(navigator.userAgent) &&
          !/opera/i.test(navigator.userAgent)
        )
          d.setRequestHeader("Accept-Charset", "utf-8"),
            (d.onreadystatechange = function () {
              4 === d.readyState &&
                (200 === d.status || 0 === d.status
                  ? b(null, d.responseText)
                  : b({ status: d.status, errorMessage: e }, null));
            });
        else {
          d.overrideMimeType &&
            d.overrideMimeType("text/plain; charset\x3dutf-8");
          var f = function () {
              d.removeEventListener("load", f);
              d.removeEventListener("error", g);
              0 <= d._timeoutId
                ? clearTimeout(d._timeoutId)
                : d.removeEventListener("timeout", s);
              4 === d.readyState &&
                (200 === d.status || 0 === d.status
                  ? b(null, d.responseText)
                  : b({ status: d.status, errorMessage: e }, null));
            },
            g = function () {
              d.removeEventListener("load", f);
              d.removeEventListener("error", g);
              0 <= d._timeoutId
                ? clearTimeout(d._timeoutId)
                : d.removeEventListener("timeout", s);
              b({ status: d.status, errorMessage: e }, null);
            },
            s = function () {
              d.removeEventListener("load", f);
              d.removeEventListener("error", g);
              0 <= d._timeoutId
                ? clearTimeout(d._timeoutId)
                : d.removeEventListener("timeout", s);
              b(
                { status: d.status, errorMessage: "Request timeout: " + e },
                null
              );
            };
          d.addEventListener("load", f);
          d.addEventListener("error", g);
          void 0 === d.ontimeout
            ? (d._timeoutId = setTimeout(function () {
                s();
              }, d.timeout))
            : d.addEventListener("timeout", s);
        }
        d.send(null);
      }
    },
    loadCsb: function (a, b) {
      var d = cc.loader.getXMLHttpRequest(),
        e = "load " + a + " failed!";
      d.open("GET", a, !0);
      d.responseType = "arraybuffer";
      var f = function () {
          d.removeEventListener("load", f);
          d.removeEventListener("error", g);
          0 <= d._timeoutId
            ? clearTimeout(d._timeoutId)
            : d.removeEventListener("timeout", s);
          var a = d.response;
          a && (window.msg = a);
          4 === d.readyState &&
            (200 === d.status || 0 === d.status
              ? b(null, d.response)
              : b({ status: d.status, errorMessage: e }, null));
        },
        g = function () {
          d.removeEventListener("load", f);
          d.removeEventListener("error", g);
          0 <= d._timeoutId
            ? clearTimeout(d._timeoutId)
            : d.removeEventListener("timeout", s);
          b({ status: d.status, errorMessage: e }, null);
        },
        s = function () {
          d.removeEventListener("load", f);
          d.removeEventListener("error", g);
          0 <= d._timeoutId
            ? clearTimeout(d._timeoutId)
            : d.removeEventListener("timeout", s);
          b({ status: d.status, errorMessage: "Request timeout: " + e }, null);
        };
      d.addEventListener("load", f);
      d.addEventListener("error", g);
      void 0 === d.ontimeout
        ? (d._timeoutId = setTimeout(function () {
            s();
          }, d.timeout))
        : d.addEventListener("timeout", s);
      d.send(null);
    },
    loadJson: function (a, b) {
      this.loadTxt(a, function (d, e) {
        if (d) b(d);
        else {
          try {
            var f = JSON.parse(e);
          } catch (g) {
            throw Error("parse json [" + a + "] failed : " + g);
          }
          b(null, f);
        }
      });
    },
    _checkIsImageURL: function (a) {
      return null != /(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(a);
    },
    loadImg: function (a, b, d, e) {
      var g = { isCrossOrigin: !0 };
      void 0 !== d
        ? (g.isCrossOrigin =
            void 0 === b.isCrossOrigin ? g.isCrossOrigin : b.isCrossOrigin)
        : void 0 !== b && (d = b);
      if ((b = this.getRes(a))) return d && d(null, b), null;
      if ((b = f[a])) return b.callbacks.push(d), b.img;
      e = e || imagePool.get();
      e.crossOrigin =
        g.isCrossOrigin && "file://" !== location.origin ? "Anonymous" : null;
      var r = function () {
          this.removeEventListener("load", r, !1);
          this.removeEventListener("error", u, !1);
          var b = f[a];
          if (b) {
            for (var d = b.callbacks, g = 0; g < d.length; ++g) {
              var k = d[g];
              k && k(null, e);
            }
            b.img = null;
            delete f[a];
          }
          window.ENABLE_IMAEG_POOL &&
            cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
            imagePool.put(e);
        },
        s = this,
        u = function () {
          this.removeEventListener("load", r, !1);
          this.removeEventListener("error", u, !1);
          if (
            "https:" !== window.location.protocol &&
            e.crossOrigin &&
            "anonymous" === e.crossOrigin.toLowerCase()
          )
            (g.isCrossOrigin = !1), s.release(a), cc.loader.loadImg(a, g, d, e);
          else {
            var b = f[a];
            if (b) {
              for (var k = b.callbacks, w = 0; w < k.length; ++w) {
                var x = k[w];
                x && x("load image failed " + a);
              }
              b.img = null;
              delete f[a];
            }
            cc._renderType === cc.game.RENDER_TYPE_WEBGL && imagePool.put(e);
          }
        };
      f[a] = { img: e, callbacks: d ? [d] : [] };
      e.addEventListener("load", r);
      e.addEventListener("error", u);
      e.src = a;
      return e;
    },
    _loadResIterator: function (a, d, e) {
      var f = this,
        p = null,
        r = a.type;
      r
        ? ((r = "." + r.toLowerCase()), (p = a.src ? a.src : a.name + r))
        : ((p = a), (r = cc.path.extname(p)));
      if ((d = f.getRes(p))) return e(null, d);
      d = null;
      r && (d = b[r.toLowerCase()]);
      if (!d) return cc.error("loader for [" + r + "] not exists!"), e();
      r = p;
      g.test(p) ||
        ((r = d.getBasePath ? d.getBasePath() : f.resPath),
        (r = f.getUrl(r, p)));
      cc.game.config.noCache &&
        "string" === typeof r &&
        (r = f._noCacheRex.test(r)
          ? r + ("\x26v\x3d" + bk.fileVer)
          : r + ("?v\x3d" + bk.fileVer));
      d.load(r, p, a, function (a, b) {
        a
          ? (cc.log(a),
            (f.cache[p] = null),
            delete f.cache[p],
            e({ status: 520, errorMessage: a }, null))
          : ((f.cache[p] = b), e(null, b));
      });
    },
    _noCacheRex: /\?/,
    getUrl: function (a, e) {
      var f = cc.path;
      if (void 0 !== a && void 0 === e) {
        e = a;
        var g = f.extname(e),
          g = g ? g.toLowerCase() : "";
        a = (g = b[g])
          ? g.getBasePath
            ? g.getBasePath()
            : this.resPath
          : this.resPath;
      }
      e = cc.path.join(a || "", e);
      if (e.match(/[\/(\\\\)]lang[\/(\\\\)]/i)) {
        if (d[e]) return d[e];
        f = f.extname(e) || "";
        e = d[e] =
          e.substring(0, e.length - f.length) + "_" + cc.sys.language + f;
      }
      return e;
    },
    load: function (a, b, d) {
      var e = this,
        f = arguments.length;
      if (0 === f) throw Error("arguments error!");
      3 === f
        ? "function" === typeof b &&
          (b =
            "function" === typeof d
              ? { trigger: b, cb: d }
              : { cb: b, cbTarget: d })
        : 2 === f
        ? "function" === typeof b && (b = { cb: b })
        : 1 === f && (b = {});
      a instanceof Array || (a = [a]);
      f = new cc.AsyncPool(
        a,
        cc.CONCURRENCY_HTTP_REQUEST_COUNT,
        function (a, d, f, g) {
          e._loadResIterator(a, d, function (a) {
            var d = Array.prototype.slice.call(arguments, 1);
            b.trigger &&
              b.trigger.call(b.triggerTarget, d[0], g.size, g.finishedSize);
            f(a, d[0]);
          });
        },
        b.cb,
        b.cbTarget
      );
      f.flow();
      return f;
    },
    _handleAliases: function (a, b) {
      var d = [],
        f;
      for (f in a) {
        var g = a[f];
        e[f] = g;
        d.push(g);
      }
      this.load(d, b);
    },
    loadAliases: function (a, b) {
      var d = this,
        e = d.getRes(a);
      e
        ? d._handleAliases(e.filenames, b)
        : d.load(a, function (a, e) {
            d._handleAliases(e[0].filenames, b);
          });
    },
    register: function (a, d) {
      if (a && d) {
        if ("string" === typeof a) return (b[a.trim().toLowerCase()] = d);
        for (var e = 0, f = a.length; e < f; e++)
          b["." + a[e].trim().toLowerCase()] = d;
      }
    },
    getRes: function (a) {
      return this.cache[a] || this.cache[e[a]];
    },
    _getAliase: function (a) {
      return e[a];
    },
    release: function (a) {
      var b = this.cache,
        d = f[a];
      d && ((d.img = null), delete f[a]);
      delete b[a];
      delete b[e[a]];
      delete e[a];
    },
    releaseAll: function () {
      var a = this.cache,
        b;
      for (b in a) delete a[b];
      for (b in e) delete e[b];
    },
  };
})();
cc.formatStr = function () {
  var a = arguments,
    b = a.length;
  if (1 > b) return "";
  var d = a[0],
    e = !0;
  "object" === typeof d && (e = !1);
  for (var f = 1; f < b; ++f) {
    var g = a[f];
    if (e)
      for (;;) {
        var h = null;
        if ("number" === typeof g && (h = d.match(/(%d)|(%s)/))) {
          d = d.replace(/(%d)|(%s)/, g);
          break;
        }
        d = (h = d.match(/%s/)) ? d.replace(/%s/, g) : d + ("    " + g);
        break;
      }
    else d += "    " + g;
  }
  return d;
};
(function () {
  function a(a) {
    var b = cc.game.CONFIG_KEY,
      d = parseInt(a[b.renderMode]) || 0;
    if (isNaN(d) || 2 < d || 0 > d) a[b.renderMode] = 0;
    cc._renderType = cc.game.RENDER_TYPE_CANVAS;
    cc._supportRender = !1;
    0 === d
      ? cc.sys.capabilities.opengl
        ? ((cc._renderType = cc.game.RENDER_TYPE_WEBGL),
          (cc._supportRender = !0))
        : cc.sys.capabilities.canvas &&
          ((cc._renderType = cc.game.RENDER_TYPE_CANVAS),
          (cc._supportRender = !0))
      : 1 === d && cc.sys.capabilities.canvas
      ? ((cc._renderType = cc.game.RENDER_TYPE_CANVAS),
        (cc._supportRender = !0))
      : 2 === d &&
        cc.sys.capabilities.opengl &&
        ((cc._renderType = cc.game.RENDER_TYPE_WEBGL),
        (cc._supportRender = !0));
  }
  function b(a, d, e) {
    if (k[d]) return null;
    e = e || "";
    var f = [],
      g = a[d];
    if (!g) throw Error("can not find module [" + d + "]");
    d = cc.path;
    for (var h = 0, m = g.length; h < m; h++) {
      var n = g[h];
      if (!k[n]) {
        var y = d.extname(n);
        y
          ? ".js" === y.toLowerCase() && f.push(d.join(e, n))
          : (y = b(a, n, e)) && (f = f.concat(y));
        k[n] = 1;
      }
    }
    return f;
  }
  function d(a) {
    cc._initDebugSetting &&
      cc._initDebugSetting(a[cc.game.CONFIG_KEY.debugMode]);
    cc._engineLoaded = !0;
    n && n();
  }
  function e(a) {
    var e = a[cc.game.CONFIG_KEY.engineDir],
      f = cc.loader;
    if (cc.Class) d(a);
    else {
      var g = cc.path.join(e, "moduleConfig.json");
      f.loadJson(g, function (f, g) {
        if (f) throw Error(f);
        var h = a.modules || [],
          k = g.module,
          m = [];
        cc.sys.capabilities.opengl && 0 > h.indexOf("base4webgl")
          ? h.splice(0, 0, "base4webgl")
          : 0 > h.indexOf("core") && h.splice(0, 0, "core");
        for (var n = 0, s = h.length; n < s; n++) {
          var u = b(k, h[n], e);
          u && (m = m.concat(u));
        }
        cc.loader.loadJsWithImg(m, function (b) {
          if (b) throw b;
          d(a);
        });
      });
    }
  }
  function f() {
    this.removeEventListener("load", f, !1);
    e(cc.game.config);
  }
  var g = document.createElement("canvas"),
    h = document.createElement("canvas");
  cc.create3DContext = function (a, b) {
    for (
      var d = ["webgl", "experimental-webgl", "webkit-3d", "moz-webgl"],
        e = null,
        f = 0;
      f < d.length;
      ++f
    ) {
      try {
        e = a.getContext(d[f], b);
      } catch (g) {}
      if (e) break;
    }
    return e;
  };
  (function () {
    cc.sys = {};
    var a = cc.sys;
    a.LANGUAGE_ENGLISH = "en";
    a.LANGUAGE_CHINESE = "zh";
    a.LANGUAGE_FRENCH = "fr";
    a.LANGUAGE_ITALIAN = "it";
    a.LANGUAGE_GERMAN = "de";
    a.LANGUAGE_SPANISH = "es";
    a.LANGUAGE_DUTCH = "du";
    a.LANGUAGE_RUSSIAN = "ru";
    a.LANGUAGE_KOREAN = "ko";
    a.LANGUAGE_JAPANESE = "ja";
    a.LANGUAGE_HUNGARIAN = "hu";
    a.LANGUAGE_PORTUGUESE = "pt";
    a.LANGUAGE_ARABIC = "ar";
    a.LANGUAGE_NORWEGIAN = "no";
    a.LANGUAGE_POLISH = "pl";
    a.LANGUAGE_UNKNOWN = "unkonwn";
    a.OS_IOS = "iOS";
    a.OS_ANDROID = "Android";
    a.OS_WINDOWS = "Windows";
    a.OS_MARMALADE = "Marmalade";
    a.OS_LINUX = "Linux";
    a.OS_BADA = "Bada";
    a.OS_BLACKBERRY = "Blackberry";
    a.OS_OSX = "OS X";
    a.OS_WP8 = "WP8";
    a.OS_WINRT = "WINRT";
    a.OS_UNKNOWN = "Unknown";
    a.UNKNOWN = -1;
    a.WIN32 = 0;
    a.LINUX = 1;
    a.MACOS = 2;
    a.ANDROID = 3;
    a.IPHONE = 4;
    a.IPAD = 5;
    a.BLACKBERRY = 6;
    a.NACL = 7;
    a.EMSCRIPTEN = 8;
    a.TIZEN = 9;
    a.WINRT = 10;
    a.WP8 = 11;
    a.MOBILE_BROWSER = 100;
    a.DESKTOP_BROWSER = 101;
    a.BROWSER_TYPE_WECHAT = "wechat";
    a.BROWSER_TYPE_ANDROID = "androidbrowser";
    a.BROWSER_TYPE_IE = "ie";
    a.BROWSER_TYPE_QQ_APP = "qq";
    a.BROWSER_TYPE_QQ = "qqbrowser";
    a.BROWSER_TYPE_MOBILE_QQ = "mqqbrowser";
    a.BROWSER_TYPE_UC = "ucbrowser";
    a.BROWSER_TYPE_360 = "360browser";
    a.BROWSER_TYPE_BAIDU_APP = "baiduboxapp";
    a.BROWSER_TYPE_BAIDU = "baidubrowser";
    a.BROWSER_TYPE_MAXTHON = "maxthon";
    a.BROWSER_TYPE_OPERA = "opera";
    a.BROWSER_TYPE_OUPENG = "oupeng";
    a.BROWSER_TYPE_MIUI = "miuibrowser";
    a.BROWSER_TYPE_FIREFOX = "firefox";
    a.BROWSER_TYPE_SAFARI = "safari";
    a.BROWSER_TYPE_CHROME = "chrome";
    a.BROWSER_TYPE_LIEBAO = "liebao";
    a.BROWSER_TYPE_QZONE = "qzone";
    a.BROWSER_TYPE_SOUGOU = "sogou";
    a.BROWSER_TYPE_UNKNOWN = "unknown";
    a.isNative = !1;
    var b = window,
      d = b.navigator,
      e = document,
      f = e.documentElement,
      k = d.userAgent.toLowerCase();
    a.isMobile = /mobile|android|iphone|ipad/.test(k);
    a.platform = a.isMobile ? a.MOBILE_BROWSER : a.DESKTOP_BROWSER;
    var m = d.language,
      m = (m = m ? m : d.browserLanguage)
        ? m.split("-")[0]
        : a.LANGUAGE_ENGLISH;
    a.language = m;
    var n = !1,
      m = !1,
      y = "",
      B = 0,
      A =
        /android (\d+(?:\.\d+)+)/i.exec(k) ||
        /android (\d+(?:\.\d+)+)/i.exec(d.platform);
    A && ((n = !0), (y = A[1] || ""), (B = parseInt(y) || 0));
    (A = /(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(k))
      ? ((m = !0), (y = A[2] || ""), (B = parseInt(y) || 0))
      : /(iPhone|iPad|iPod)/.exec(d.platform) && ((m = !0), (y = ""), (B = 0));
    A = a.OS_UNKNOWN;
    -1 !== d.appVersion.indexOf("Win")
      ? (A = a.OS_WINDOWS)
      : m
      ? (A = a.OS_IOS)
      : -1 !== d.appVersion.indexOf("Mac")
      ? (A = a.OS_OSX)
      : -1 !== d.appVersion.indexOf("X11") &&
        -1 === d.appVersion.indexOf("Linux")
      ? (A = a.OS_UNIX)
      : n
      ? (A = a.OS_ANDROID)
      : -1 !== d.appVersion.indexOf("Linux") && (A = a.OS_LINUX);
    a.os = A;
    a.osVersion = y;
    a.osMainVersion = B;
    a.browserType = a.BROWSER_TYPE_UNKNOWN;
    (function () {
      var b = /qqbrowser|qq|chrome|safari|firefox|opr|oupeng|opera/i,
        d = /micromessenger|mqqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(
          k
        );
      d || (d = b.exec(k));
      b = d ? d[0] : a.BROWSER_TYPE_UNKNOWN;
      "micromessenger" === b
        ? (b = a.BROWSER_TYPE_WECHAT)
        : "safari" === b && n
        ? (b = a.BROWSER_TYPE_ANDROID)
        : "trident" === b
        ? (b = a.BROWSER_TYPE_IE)
        : "360 aphone" === b
        ? (b = a.BROWSER_TYPE_360)
        : "mxbrowser" === b
        ? (b = a.BROWSER_TYPE_MAXTHON)
        : "opr" === b && (b = a.BROWSER_TYPE_OPERA);
      a.browserType = b;
    })();
    a.browserVersion = "";
    (function () {
      var b = /(msie |rv:|firefox|chrome|ucbrowser|qq|oupeng|opera|opr|safari|miui)(mobile)?(browser)?\/?([\d.]+)/i,
        d = k.match(
          /(mqqbrowser|micromessenger|sogou|qzone|liebao|maxthon|mxbrowser|baidu)(mobile)?(browser)?\/?([\d.]+)/i
        );
      d || (d = k.match(b));
      a.browserVersion = d ? d[4] : "";
    })();
    m = window.devicePixelRatio || 1;
    a.windowPixelResolution = {
      width: m * (window.innerWidth || document.documentElement.clientWidth),
      height: m * (window.innerHeight || document.documentElement.clientHeight),
    };
    a._checkWebGLRenderMode = function () {
      if (cc._renderType !== cc.game.RENDER_TYPE_WEBGL)
        throw Error("This feature supports WebGL render mode only.");
    };
    a._supportCanvasNewBlendModes = (function () {
      var a = g;
      a.width = 1;
      a.height = 1;
      a = a.getContext("2d");
      a.fillStyle = "#000";
      a.fillRect(0, 0, 1, 1);
      a.globalCompositeOperation = "multiply";
      var b = h;
      b.width = 1;
      b.height = 1;
      var d = b.getContext("2d");
      d.fillStyle = "#fff";
      d.fillRect(0, 0, 1, 1);
      a.drawImage(b, 0, 0, 1, 1);
      return 0 === a.getImageData(0, 0, 1, 1).data[0];
    })();
    cc.sys.isMobile &&
      ((m = document.createElement("style")),
      (m.type = "text/css"),
      document.body.appendChild(m),
      (m.textContent =
        "body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}"));
    try {
      var z = (a.localStorage = b.localStorage);
      z.setItem("storage", "");
      z.removeItem("storage");
      z = null;
    } catch (C) {
      (z = function () {
        cc.warn(
          "Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option"
        );
      }),
        (a.localStorage = { getItem: z, setItem: z, removeItem: z, clear: z });
    }
    z = !!g.getContext("2d");
    m = !1;
    if (b.WebGLRenderingContext) {
      y = document.createElement("CANVAS");
      try {
        if (
          (cc.create3DContext(y) && (m = !0),
          m &&
            a.os === a.OS_IOS &&
            9 === a.osMainVersion &&
            (window.indexedDB || (m = !1)),
          m && a.os === a.OS_ANDROID)
        ) {
          var D = parseFloat(a.browserVersion);
          switch (a.browserType) {
            case a.BROWSER_TYPE_MOBILE_QQ:
            case a.BROWSER_TYPE_BAIDU:
            case a.BROWSER_TYPE_BAIDU_APP:
              m = 6.2 <= D ? !0 : !1;
              break;
            case a.BROWSER_TYPE_CHROME:
              m = 30 <= D ? !0 : !1;
              break;
            case a.BROWSER_TYPE_ANDROID:
              a.osMainVersion && 5 <= a.osMainVersion && (m = !0);
              break;
            case a.BROWSER_TYPE_UNKNOWN:
            case a.BROWSER_TYPE_360:
            case a.BROWSER_TYPE_MIUI:
            case a.BROWSER_TYPE_UC:
              m = !1;
          }
        }
      } catch (E) {}
      y = null;
    }
    D = a.capabilities = { canvas: z, opengl: m };
    if (
      void 0 !== f.ontouchstart ||
      void 0 !== e.ontouchstart ||
      d.msPointerEnabled
    )
      D.touches = !0;
    void 0 !== f.onmouseup && (D.mouse = !0);
    void 0 !== f.onkeyup && (D.keyboard = !0);
    if (b.DeviceMotionEvent || b.DeviceOrientationEvent) D.accelerometer = !0;
    a.garbageCollect = function () {};
    a.dumpRoot = function () {};
    a.restartVM = function () {};
    a.cleanScript = function (a) {};
    a.isObjectValid = function (a) {
      return a ? !0 : !1;
    };
    a.dump = function () {
      var a;
      a = "" + ("isMobile : " + this.isMobile + "\r\n");
      a += "language : " + this.language + "\r\n";
      a += "browserType : " + this.browserType + "\r\n";
      a += "browserVersion : " + this.browserVersion + "\r\n";
      a += "capabilities : " + JSON.stringify(this.capabilities) + "\r\n";
      a += "os : " + this.os + "\r\n";
      a += "osVersion : " + this.osVersion + "\r\n";
      a += "platform : " + this.platform + "\r\n";
      a +=
        "Using " +
        (cc._renderType === cc.game.RENDER_TYPE_WEBGL ? "WEBGL" : "CANVAS") +
        " renderer.\r\n";
      cc.log(a);
    };
    a.openURL = function (a) {
      window.open(a);
    };
    a.now = function () {
      return Date.now ? Date.now() : +new Date();
    };
  })();
  h = g = null;
  cc.log = cc.warn = cc.error = cc.assert = function () {};
  var k = {},
    m = !1,
    n = null;
  cc._engineLoaded = !1;
  cc.initEngine = function (b, d) {
    if (m) {
      var g = n;
      n = function () {
        g && g();
        d && d();
      };
    } else
      (n = d),
        !cc.game.config && b
          ? (cc.game.config = b)
          : cc.game.config || cc.game._loadConfig(),
        (b = cc.game.config),
        a(b),
        document.body ? e(b) : cc._addEventListener(window, "load", f, !1),
        (m = !0);
  };
})();
cc.game = {
  DEBUG_MODE_NONE: 0,
  DEBUG_MODE_INFO: 1,
  DEBUG_MODE_WARN: 2,
  DEBUG_MODE_ERROR: 3,
  DEBUG_MODE_INFO_FOR_WEB_PAGE: 4,
  DEBUG_MODE_WARN_FOR_WEB_PAGE: 5,
  DEBUG_MODE_ERROR_FOR_WEB_PAGE: 6,
  EVENT_HIDE: "game_on_hide",
  EVENT_SHOW: "game_on_show",
  EVENT_RESIZE: "game_on_resize",
  EVENT_RENDERER_INITED: "renderer_inited",
  RENDER_TYPE_CANVAS: 0,
  RENDER_TYPE_WEBGL: 1,
  RENDER_TYPE_OPENGL: 2,
  _eventHide: null,
  _eventShow: null,
  CONFIG_KEY: {
    width: "width",
    height: "height",
    engineDir: "engineDir",
    modules: "modules",
    debugMode: "debugMode",
    exposeClassName: "exposeClassName",
    showFPS: "showFPS",
    frameRate: "frameRate",
    id: "id",
    renderMode: "renderMode",
    jsList: "jsList",
  },
  _paused: !0,
  _configLoaded: !1,
  _prepareCalled: !1,
  _prepared: !1,
  _rendererInitialized: !1,
  _renderContext: null,
  _intervalId: null,
  _lastTime: null,
  _frameTime: null,
  frame: null,
  container: null,
  canvas: null,
  config: null,
  onStart: null,
  onStop: null,
  setFrameRate: function (a) {
    this.config[this.CONFIG_KEY.frameRate] = a;
    this._intervalId && window.cancelAnimationFrame(this._intervalId);
    this._intervalId = 0;
    this._paused = !0;
    this._setAnimFrame();
    this._runMainLoop();
  },
  step: function () {
    cc.director.mainLoop();
  },
  pause: function () {
    this._paused ||
      ((this._paused = !0),
      cc.audioEngine && cc.audioEngine._pausePlaying(),
      this._intervalId && window.cancelAnimationFrame(this._intervalId),
      (this._intervalId = 0));
  },
  resume: function () {
    this._paused &&
      ((this._paused = !1),
      cc.audioEngine && cc.audioEngine._resumePlaying(),
      this._runMainLoop());
  },
  isPaused: function () {
    return this._paused;
  },
  restart: function () {
    cc.director.popToSceneStackLevel(0);
    cc.audioEngine && cc.audioEngine.end();
    cc.game.onStart();
  },
  end: function () {
    close();
  },
  prepare: function (a) {
    var b = this,
      d = b.config,
      e = b.CONFIG_KEY;
    this._configLoaded
      ? this._prepared
        ? a && a()
        : this._prepareCalled ||
          (cc._engineLoaded
            ? ((this._prepareCalled = !0),
              this._initRenderer(d[e.width], d[e.height]),
              (cc.view = cc.EGLView._getInstance()),
              (cc.director = cc.Director._getInstance()),
              cc.director.setOpenGLView && cc.director.setOpenGLView(cc.view),
              (cc.winSize = cc.director.getWinSize()),
              this._initEvents(),
              this._setAnimFrame(),
              this._runMainLoop(),
              (d = d[e.jsList])
                ? cc.loader.loadJsWithImg(d, function (d) {
                    if (d) throw Error(d);
                    b._prepared = !0;
                    a && a();
                  })
                : a && a())
            : cc.initEngine(this.config, function () {
                b.prepare(a);
              }))
      : this._loadConfig(function () {
          b.prepare(a);
        });
  },
  run: function (a, b) {
    "function" === typeof a
      ? (cc.game.onStart = a)
      : (a &&
          ("string" === typeof a
            ? (cc.game.config || this._loadConfig(),
              (cc.game.config[cc.game.CONFIG_KEY.id] = a))
            : (cc.game.config = a)),
        "function" === typeof b && (cc.game.onStart = b));
    this.prepare(cc.game.onStart && cc.game.onStart.bind(cc.game));
  },
  _setAnimFrame: function () {
    this._lastTime = new Date();
    var a = cc.game.config[cc.game.CONFIG_KEY.frameRate];
    this._frameTime = 1e3 / a;
    60 !== a && 30 !== a
      ? ((window.requestAnimFrame = this._stTime),
        (window.cancelAnimationFrame = this._ctTime))
      : ((window.requestAnimFrame =
          window.requestAnimationFrame ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame ||
          window.oRequestAnimationFrame ||
          window.msRequestAnimationFrame ||
          this._stTime),
        (window.cancelAnimationFrame =
          window.cancelAnimationFrame ||
          window.cancelRequestAnimationFrame ||
          window.msCancelRequestAnimationFrame ||
          window.mozCancelRequestAnimationFrame ||
          window.oCancelRequestAnimationFrame ||
          window.webkitCancelRequestAnimationFrame ||
          window.msCancelAnimationFrame ||
          window.mozCancelAnimationFrame ||
          window.webkitCancelAnimationFrame ||
          window.oCancelAnimationFrame ||
          this._ctTime));
  },
  _stTime: function (a) {
    var b = new Date().getTime(),
      d = Math.max(0, cc.game._frameTime - (b - cc.game._lastTime)),
      e = window.setTimeout(function () {
        a();
      }, d);
    cc.game._lastTime = b + d;
    return e;
  },
  _ctTime: function (a) {
    window.clearTimeout(a);
  },
  _runMainLoop: function () {
    var a = this,
      b,
      d = a.config,
      e = a.CONFIG_KEY,
      f = cc.director,
      g = !0,
      h = d[e.frameRate];
    f.setDisplayStats(d[e.showFPS]);
    b = function () {
      a._paused ||
        ((30 === h && (g = !g)) || f.mainLoop(),
        (a._intervalId = window.requestAnimFrame(b)));
    };
    a._intervalId = window.requestAnimFrame(b);
    a._paused = !1;
  },
  _loadConfig: function (a) {
    var b = this.config || document.ccConfig;
    if (b) this._initConfig(b), a && a();
    else {
      for (
        var d = document.getElementsByTagName("script"), e = 0;
        e < d.length && ((b = d[e].getAttribute("cocos")), "" !== b && !b);
        e++
      );
      var f = this,
        b = function (b, d) {
          var e = JSON.parse(d);
          f._initConfig(e);
          a && a();
        },
        g = new Date();
      if (e < d.length) {
        if ((d = d[e].src))
          (d = /(.*)\//.exec(d)[0]),
            (cc.loader.resPath = d),
            (d = cc.path.join(d, "project.json?t\x3d" + g.getTime()));
        cc.loader.loadTxt(d, b);
      } else cc.loader.loadTxt("project.json?t\x3d" + g.getTime(), b);
    }
  },
  _initConfig: function (a) {
    var b = this.CONFIG_KEY,
      d = a[b.modules];
    a[b.showFPS] = "undefined" === typeof a[b.showFPS] ? !0 : a[b.showFPS];
    a[b.engineDir] = a[b.engineDir] || "frameworks/cocos2d-html5";
    null == a[b.debugMode] && (a[b.debugMode] = 0);
    a[b.exposeClassName] = !!a[b.exposeClassName];
    a[b.frameRate] = a[b.frameRate] || 60;
    null == a[b.renderMode] && (a[b.renderMode] = 0);
    null == a[b.registerSystemEvent] && (a[b.registerSystemEvent] = !0);
    d && 0 > d.indexOf("core") && d.splice(0, 0, "core");
    d && (a[b.modules] = d);
    this.config = a;
    this._configLoaded = !0;
  },
  _initRenderer: function (a, b) {
    if (!this._rendererInitialized) {
      if (!cc._supportRender)
        throw Error(
          "The renderer doesn't support the renderMode " +
            this.config[this.CONFIG_KEY.renderMode]
        );
      var d = this.config[cc.game.CONFIG_KEY.id],
        e = window,
        d = cc.$(d) || cc.$("#" + d),
        f,
        g;
      "CANVAS" === d.tagName
        ? ((a = a || d.width),
          (b = b || d.height),
          (this.canvas = cc._canvas = f = d),
          (this.container = cc.container = g = document.createElement("DIV")),
          f.parentNode && f.parentNode.insertBefore(g, f))
        : ("DIV" !== d.tagName &&
            cc.log("Warning: target element is not a DIV or CANVAS"),
          (a = a || d.clientWidth),
          (b = b || d.clientHeight),
          (this.canvas = cc._canvas = f = cc.$(
            document.createElement("CANVAS")
          )),
          (this.container = cc.container = g = document.createElement("DIV")),
          d.appendChild(g));
      g.setAttribute("id", "Cocos2dGameContainer");
      g.appendChild(f);
      this.frame =
        g.parentNode === document.body
          ? document.documentElement
          : g.parentNode;
      f.addClass("gameCanvas");
      f.setAttribute("width", a || 480);
      f.setAttribute("height", b || 320);
      f.setAttribute("tabindex", 99);
      cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
        (this._renderContext = cc._renderContext = cc.webglContext = cc.create3DContext(
          f,
          { stencil: !0, alpha: !1 }
        ));
      this._renderContext
        ? ((cc.renderer = cc.rendererWebGL),
          (e.gl = this._renderContext),
          cc.renderer.init(),
          (cc._drawingUtil = new cc.DrawingPrimitiveWebGL(this._renderContext)),
          cc.textureCache._initializingRenderer(),
          (cc.glExt = {}),
          (cc.glExt.instanced_arrays = e.gl.getExtension(
            "ANGLE_instanced_arrays"
          )),
          (cc.glExt.element_uint = e.gl.getExtension("OES_element_index_uint")))
        : ((cc._renderType = cc.game.RENDER_TYPE_CANVAS),
          (cc.renderer = cc.rendererCanvas),
          (this._renderContext = cc._renderContext = new cc.CanvasContextWrapper(
            f.getContext("2d")
          )),
          (cc._drawingUtil = cc.DrawingPrimitiveCanvas
            ? new cc.DrawingPrimitiveCanvas(this._renderContext)
            : null));
      cc._gameDiv = g;
      cc.game.canvas.oncontextmenu = function () {
        if (!cc._isContextMenuEnable) return !1;
      };
      this.dispatchEvent(this.EVENT_RENDERER_INITED, !0);
      this._rendererInitialized = !0;
    }
  },
  _initEvents: function () {
    var a = window,
      b;
    this._eventHide = this._eventHide || new cc.EventCustom(this.EVENT_HIDE);
    this._eventHide.setUserData(this);
    this._eventShow = this._eventShow || new cc.EventCustom(this.EVENT_SHOW);
    this._eventShow.setUserData(this);
    this.config[this.CONFIG_KEY.registerSystemEvent] &&
      cc.inputManager.registerSystemEvent(this.canvas);
    cc.isUndefined(document.hidden)
      ? cc.isUndefined(document.mozHidden)
        ? cc.isUndefined(document.msHidden)
          ? cc.isUndefined(document.webkitHidden) || (b = "webkitHidden")
          : (b = "msHidden")
        : (b = "mozHidden")
      : (b = "hidden");
    var d = [
        "visibilitychange",
        "mozvisibilitychange",
        "msvisibilitychange",
        "webkitvisibilitychange",
        "qbrowserVisibilityChange",
      ],
      e = function () {
        cc.eventManager &&
          cc.game._eventHide &&
          cc.eventManager.dispatchEvent(cc.game._eventHide);
      },
      f = function () {
        cc.eventManager &&
          cc.game._eventShow &&
          cc.eventManager.dispatchEvent(cc.game._eventShow);
      };
    if (b)
      for (var g = 0; g < d.length; g++)
        document.addEventListener(
          d[g],
          function (a) {
            var d = document[b];
            (d = d || a.hidden) ? e() : f();
          },
          !1
        );
    else a.addEventListener("blur", e, !1), a.addEventListener("focus", f, !1);
    -1 < navigator.userAgent.indexOf("MicroMessenger") &&
      (a.onfocus = function () {
        f();
      });
    "onpageshow" in window &&
      "onpagehide" in window &&
      (a.addEventListener("pagehide", e, !1),
      a.addEventListener("pageshow", f, !1));
    cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function () {
      cc.game.pause();
    });
    cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
      cc.game.resume();
    });
  },
};
Function.prototype.bind =
  Function.prototype.bind ||
  function (a) {
    if (!cc.isFunction(this))
      throw new TypeError(
        "Function.prototype.bind - what is trying to be bound is not callable"
      );
    var b = Array.prototype.slice.call(arguments, 1),
      d = this,
      e = function () {},
      f = function () {
        return d.apply(
          this instanceof e && a ? this : a,
          b.concat(Array.prototype.slice.call(arguments))
        );
      };
    e.prototype = this.prototype;
    f.prototype = new e();
    return f;
  };
cc.EventHelper = function () {};
cc.EventHelper.prototype = {
  constructor: cc.EventHelper,
  apply: function (a) {
    a.addEventListener = cc.EventHelper.prototype.addEventListener;
    a.hasEventListener = cc.EventHelper.prototype.hasEventListener;
    a.removeEventListener = cc.EventHelper.prototype.removeEventListener;
    a.dispatchEvent = cc.EventHelper.prototype.dispatchEvent;
  },
  addEventListener: function (a, b, d) {
    if ("load" === a && this._textureLoaded)
      setTimeout(function () {
        b.call(d);
      }, 0);
    else {
      void 0 === this._listeners && (this._listeners = {});
      var e = this._listeners;
      void 0 === e[a] && (e[a] = []);
      this.hasEventListener(a, b, d) ||
        e[a].push({ callback: b, eventTarget: d });
    }
  },
  hasEventListener: function (a, b, d) {
    if (void 0 === this._listeners) return !1;
    var e = this._listeners;
    if (void 0 !== e[a]) {
      a = 0;
      for (var f = e.length; a < f; a++) {
        var g = e[a];
        if (g.callback === b && g.eventTarget === d) return !0;
      }
    }
    return !1;
  },
  removeEventListener: function (a, b, d) {
    if (void 0 !== this._listeners && ((a = this._listeners[a]), void 0 !== a))
      for (var e = 0; e < a.length; ) {
        var f = a[e];
        f.eventTarget === d && f.callback === b ? a.splice(e, 1) : e++;
      }
  },
  removeEventTarget: function (a, b, d) {
    if (void 0 !== this._listeners && ((a = this._listeners[a]), void 0 !== a))
      for (b = 0; b < a.length; ) a[b].eventTarget === d ? a.splice(b, 1) : b++;
  },
  dispatchEvent: function (a, b) {
    if (void 0 !== this._listeners) {
      null == b && (b = !0);
      var d = this._listeners[a];
      if (void 0 !== d) {
        for (var e = [], f = d.length, g = 0; g < f; g++) e[g] = d[g];
        for (g = 0; g < f; g++) e[g].callback.call(e[g].eventTarget, this);
        b && (d.length = 0);
      }
    }
  },
};
cc.EventHelper.prototype.apply(cc.game);
cc._LogInfos = {
  ActionManager_addAction:
    "cc.ActionManager.addAction(): action must be non-null",
  ActionManager_removeAction: "cocos2d: removeAction: Target not found",
  ActionManager_removeActionByTag:
    "cc.ActionManager.removeActionByTag(): an invalid tag",
  ActionManager_removeActionByTag_2:
    "cc.ActionManager.removeActionByTag(): target must be non-null",
  ActionManager_getActionByTag:
    "cc.ActionManager.getActionByTag(): an invalid tag",
  ActionManager_getActionByTag_2:
    "cocos2d : getActionByTag(tag \x3d %s): Action not found",
  configuration_dumpInfo:
    "cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",
  configuration_loadConfigFile:
    "Expected 'data' dict, but not found. Config file: %s",
  configuration_loadConfigFile_2: "Please load the resource first : %s",
  Director_resume: "cocos2d: Director: Error in gettimeofday",
  Director_setProjection: "cocos2d: Director: unrecognized projection",
  Director_popToSceneStackLevel: "cocos2d: Director: unrecognized projection",
  Director_popToSceneStackLevel_2: "cocos2d: Director: Error in gettimeofday",
  Director_popScene: "running scene should not null",
  Director_pushScene: "the scene should not null",
  arrayVerifyType: "element type is wrong!",
  Scheduler_scheduleCallbackForTarget:
    "CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",
  Scheduler_scheduleCallbackForTarget_2:
    "cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",
  Scheduler_scheduleCallbackForTarget_3:
    "cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",
  Scheduler_pauseTarget: "cc.Scheduler.pauseTarget():target should be non-null",
  Scheduler_resumeTarget:
    "cc.Scheduler.resumeTarget():target should be non-null",
  Scheduler_isTargetPaused:
    "cc.Scheduler.isTargetPaused():target should be non-null",
  Node_getZOrder: "getZOrder is deprecated. Please use getLocalZOrder instead.",
  Node_setZOrder: "setZOrder is deprecated. Please use setLocalZOrder instead.",
  Node_getRotation: "RotationX !\x3d RotationY. Don't know which one to return",
  Node_getScale: "ScaleX !\x3d ScaleY. Don't know which one to return",
  Node_addChild: "An Node can't be added as a child of itself.",
  Node_addChild_2: "child already added. It can't be added again",
  Node_addChild_3: "child must be non-null",
  Node_removeFromParentAndCleanup:
    "removeFromParentAndCleanup is deprecated. Use removeFromParent instead",
  Node_boundingBox: "boundingBox is deprecated. Use getBoundingBox instead",
  Node_removeChildByTag: "argument tag is an invalid tag",
  Node_removeChildByTag_2:
    "cocos2d: removeChildByTag(tag \x3d %s): child not found!",
  Node_removeAllChildrenWithCleanup:
    "removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",
  Node_stopActionByTag: "cc.Node.stopActionBy(): argument tag an invalid tag",
  Node_getActionByTag:
    "cc.Node.getActionByTag(): argument tag is an invalid tag",
  Node_resumeSchedulerAndActions:
    "resumeSchedulerAndActions is deprecated, please use resume instead.",
  Node_pauseSchedulerAndActions:
    "pauseSchedulerAndActions is deprecated, please use pause instead.",
  Node__arrayMakeObjectsPerformSelector: "Unknown callback function",
  Node_reorderChild: "cc.Node.reorderChild(): child must be non-null",
  Node_reorderChild_2:
    "cc.Node.reorderChild(): this child is not in children list",
  Node_runAction: "cc.Node.runAction(): action must be non-null",
  Node_schedule: "callback function must be non-null",
  Node_schedule_2: "interval must be positive",
  Node_initWithTexture:
    "cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",
  AtlasNode_updateAtlasValues:
    "cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",
  AtlasNode_initWithTileFile: "",
  AtlasNode__initWithTexture:
    "cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",
  _EventListenerKeyboard_checkAvailable:
    "cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",
  _EventListenerTouchOneByOne_checkAvailable:
    "cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",
  _EventListenerTouchAllAtOnce_checkAvailable:
    "cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",
  _EventListenerAcceleration_checkAvailable:
    "cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",
  EventListener_create: "Invalid parameter.",
  __getListenerID: "Don't call this method if the event is for touch.",
  eventManager__forceAddEventListener: "Invalid scene graph priority!",
  eventManager_addListener:
    "0 priority is forbidden for fixed priority since it's used for scene graph based priority.",
  eventManager_removeListeners: "Invalid listener type!",
  eventManager_setPriority:
    "Can't set fixed priority with scene graph based listener.",
  eventManager_addListener_2: "Invalid parameters.",
  eventManager_addListener_3:
    "listener must be a cc.EventListener object when adding a fixed priority listener",
  eventManager_addListener_4:
    "The listener has been registered, please don't register it again.",
  LayerMultiplex_initWithLayers:
    "parameters should not be ending with null in Javascript",
  LayerMultiplex_switchTo: "Invalid index in MultiplexLayer switchTo message",
  LayerMultiplex_switchToAndReleaseMe:
    "Invalid index in MultiplexLayer switchTo message",
  LayerMultiplex_addLayer: "cc.Layer.addLayer(): layer should be non-null",
  EGLView_setDesignResolutionSize: "Resolution not valid",
  EGLView_setDesignResolutionSize_2: "should set resolutionPolicy",
  inputManager_handleTouchesBegin:
    "The touches is more than MAX_TOUCHES, nUnusedIndex \x3d %s",
  swap: "cc.swap is being modified from original macro, please check usage",
  checkGLErrorDebug: "WebGL error %s",
  animationCache__addAnimationsWithDictionary:
    "cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",
  animationCache__addAnimationsWithDictionary_2:
    "cc.AnimationCache. Invalid animation format",
  animationCache_addAnimations:
    "cc.AnimationCache.addAnimations(): File could not be found",
  animationCache__parseVersion1:
    "cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
  animationCache__parseVersion1_2:
    "cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",
  animationCache__parseVersion1_3:
    "cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",
  animationCache__parseVersion1_4:
    "cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",
  animationCache__parseVersion2:
    "cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
  animationCache__parseVersion2_2:
    "cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",
  animationCache_addAnimations_2:
    "cc.AnimationCache.addAnimations(): Invalid texture file name",
  Sprite_ignoreAnchorPointForPosition:
    "cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",
  Sprite_setDisplayFrameWithAnimationName:
    "cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",
  Sprite_setDisplayFrameWithAnimationName_2:
    "cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",
  Sprite_setDisplayFrame:
    "setDisplayFrame is deprecated, please use setSpriteFrame instead.",
  Sprite__updateBlendFunc:
    "cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",
  Sprite_initWithSpriteFrame:
    "cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",
  Sprite_initWithSpriteFrameName:
    "cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",
  Sprite_initWithSpriteFrameName1: " is null, please check.",
  Sprite_initWithFile: "cc.Sprite.initWithFile(): filename should be non-null",
  Sprite_setDisplayFrameWithAnimationName_3:
    "cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",
  Sprite_addChild:
    "cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",
  Sprite_addChild_2:
    "cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",
  Sprite_addChild_3: "cc.Sprite.addChild(): child should be non-null",
  Sprite_setTexture:
    "cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",
  Sprite_updateQuadFromSprite:
    "cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
  Sprite_insertQuadFromSprite:
    "cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
  Sprite_addChild_4:
    "cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",
  Sprite_addChild_5:
    "cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",
  Sprite_initWithTexture: "Sprite.initWithTexture(): Argument must be non-nil ",
  Sprite_setSpriteFrame: "Invalid spriteFrameName",
  Sprite_setTexture_2:
    "Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",
  Sprite_updateQuadFromSprite_2:
    "cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",
  Sprite_insertQuadFromSprite_2:
    "cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",
  SpriteBatchNode_addSpriteWithoutQuad:
    "cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",
  SpriteBatchNode_increaseAtlasCapacity:
    "cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",
  SpriteBatchNode_increaseAtlasCapacity_2:
    "cocos2d: WARNING: Not enough memory to resize the atlas",
  SpriteBatchNode_reorderChild:
    "cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",
  SpriteBatchNode_removeChild:
    "cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",
  SpriteBatchNode_addSpriteWithoutQuad_2:
    "cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",
  SpriteBatchNode_reorderChild_2:
    "cc.SpriteBatchNode.addChild(): child should be non-null",
  spriteFrameCache__getFrameConfig:
    "cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",
  spriteFrameCache_addSpriteFrames:
    "cocos2d: WARNING: an alias with name %s already exists",
  spriteFrameCache__checkConflict:
    "cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",
  spriteFrameCache_getSpriteFrame:
    "cocos2d: cc.SpriteFrameCahce: Frame %s not found",
  spriteFrameCache__getFrameConfig_2: "Please load the resource first : %s",
  spriteFrameCache_addSpriteFrames_2:
    "cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",
  spriteFrameCache_addSpriteFrames_3: "Argument must be non-nil",
  CCSpriteBatchNode_updateQuadFromSprite:
    "cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
  CCSpriteBatchNode_insertQuadFromSprite:
    "cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
  CCSpriteBatchNode_addChild:
    "cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",
  CCSpriteBatchNode_initWithTexture:
    "Sprite.initWithTexture(): Argument must be non-nil ",
  CCSpriteBatchNode_addChild_2:
    "cc.Sprite.addChild(): child should be non-null",
  CCSpriteBatchNode_setSpriteFrame: "Invalid spriteFrameName",
  CCSpriteBatchNode_setTexture:
    "Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",
  CCSpriteBatchNode_updateQuadFromSprite_2:
    "cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",
  CCSpriteBatchNode_insertQuadFromSprite_2:
    "cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",
  CCSpriteBatchNode_addChild_3:
    "cc.SpriteBatchNode.addChild(): child should be non-null",
  TextureAtlas_initWithFile: "cocos2d: Could not open file: %s",
  TextureAtlas_insertQuad: "cc.TextureAtlas.insertQuad(): invalid totalQuads",
  TextureAtlas_initWithTexture:
    "cc.TextureAtlas.initWithTexture():texture should be non-null",
  TextureAtlas_updateQuad:
    "cc.TextureAtlas.updateQuad(): quad should be non-null",
  TextureAtlas_updateQuad_2: "cc.TextureAtlas.updateQuad(): Invalid index",
  TextureAtlas_insertQuad_2: "cc.TextureAtlas.insertQuad(): Invalid index",
  TextureAtlas_insertQuads:
    "cc.TextureAtlas.insertQuad(): Invalid index + amount",
  TextureAtlas_insertQuadFromIndex:
    "cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",
  TextureAtlas_insertQuadFromIndex_2:
    "cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",
  TextureAtlas_removeQuadAtIndex:
    "cc.TextureAtlas.removeQuadAtIndex(): Invalid index",
  TextureAtlas_removeQuadsAtIndex:
    "cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",
  TextureAtlas_moveQuadsFromIndex:
    "cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",
  TextureAtlas_moveQuadsFromIndex_2:
    "cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",
  TextureAtlas_moveQuadsFromIndex_3:
    "cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",
  textureCache_addPVRTCImage:
    "TextureCache:addPVRTCImage does not support on HTML5",
  textureCache_addETCImage:
    "TextureCache:addPVRTCImage does not support on HTML5",
  textureCache_textureForKey:
    "textureForKey is deprecated. Please use getTextureForKey instead.",
  textureCache_addPVRImage: "addPVRImage does not support on HTML5",
  textureCache_addUIImage: "cocos2d: Couldn't add UIImage in TextureCache",
  textureCache_dumpCachedTextureInfo: "cocos2d: '%s' id\x3d%s %s x %s",
  textureCache_dumpCachedTextureInfo_2:
    "cocos2d: '%s' id\x3d HTMLCanvasElement %s x %s",
  textureCache_dumpCachedTextureInfo_3:
    "cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",
  textureCache_addUIImage_2:
    "cc.Texture.addUIImage(): image should be non-null",
  Texture2D_initWithETCFile: "initWithETCFile does not support on HTML5",
  Texture2D_initWithPVRFile: "initWithPVRFile does not support on HTML5",
  Texture2D_initWithPVRTCData: "initWithPVRTCData does not support on HTML5",
  Texture2D_addImage: "cc.Texture.addImage(): path should be non-null",
  Texture2D_initWithImage:
    "cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",
  Texture2D_initWithImage_2:
    "cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",
  Texture2D_initWithString: "initWithString isn't supported on cocos2d-html5",
  Texture2D_initWithETCFile_2: "initWithETCFile does not support on HTML5",
  Texture2D_initWithPVRFile_2: "initWithPVRFile does not support on HTML5",
  Texture2D_initWithPVRTCData_2: "initWithPVRTCData does not support on HTML5",
  Texture2D_bitsPerPixelForFormat:
    "bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",
  Texture2D__initPremultipliedATextureWithImage:
    "cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",
  Texture2D_addImage_2: "cc.Texture.addImage(): path should be non-null",
  Texture2D_initWithData: "NSInternalInconsistencyException",
  MissingFile: "Missing file: %s",
  radiansToDegress:
    "cc.radiansToDegress() should be called cc.radiansToDegrees()",
  RectWidth: "Rect width exceeds maximum margin: %s",
  RectHeight: "Rect height exceeds maximum margin: %s",
  EventManager__updateListeners:
    "If program goes here, there should be event in dispatch.",
  EventManager__updateListeners_2: "_inDispatch should be 1 here.",
};
cc._logToWebPage = function (a) {
  if (cc._canvas) {
    var b = cc._logList,
      d = document;
    if (!b) {
      var e = d.createElement("Div"),
        b = e.style;
      e.setAttribute("id", "logInfoDiv");
      cc._canvas.parentNode.appendChild(e);
      e.setAttribute("width", "200");
      e.setAttribute("height", cc._canvas.height);
      b.zIndex = "99999";
      b.position = "absolute";
      b.top = "0";
      b.left = "0";
      b = cc._logList = d.createElement("textarea");
      d = b.style;
      b.setAttribute("rows", "20");
      b.setAttribute("cols", "30");
      b.setAttribute("disabled", !0);
      e.appendChild(b);
      d.backgroundColor = "transparent";
      d.borderBottom = "1px solid #cccccc";
      d.borderRightWidth = "0px";
      d.borderLeftWidth = "0px";
      d.borderTopWidth = "0px";
      d.borderTopStyle = "none";
      d.borderRightStyle = "none";
      d.borderLeftStyle = "none";
      d.padding = "0px";
      d.margin = 0;
    }
    b.value = b.value + a + "\r\n";
    b.scrollTop = b.scrollHeight;
  }
};
cc._formatString = function (a) {
  if (cc.isObject(a))
    try {
      return JSON.stringify(a);
    } catch (b) {
      return "";
    }
  else return a;
};
cc._initDebugSetting = function (a) {
  var b = cc.game;
  if (a !== b.DEBUG_MODE_NONE) {
    var d;
    a > b.DEBUG_MODE_ERROR
      ? ((d = cc._logToWebPage.bind(cc)),
        (cc.error = function () {
          d("ERROR :  " + cc.formatStr.apply(cc, arguments));
        }),
        (cc.assert = function (a, b) {
          if (!a && b) {
            for (var g = 2; g < arguments.length; g++)
              b = b.replace(/(%s)|(%d)/, cc._formatString(arguments[g]));
            d("Assert: " + b);
          }
        }),
        a !== b.DEBUG_MODE_ERROR_FOR_WEB_PAGE &&
          (cc.warn = function () {
            d("WARN :  " + cc.formatStr.apply(cc, arguments));
          }),
        a === b.DEBUG_MODE_INFO_FOR_WEB_PAGE &&
          (cc.log = function () {
            d(cc.formatStr.apply(cc, arguments));
          }))
      : console &&
        console.log.apply &&
        ((cc.error = Function.prototype.bind.call(console.error, console)),
        (cc.assert = console.assert
          ? Function.prototype.bind.call(console.assert, console)
          : function (a, b) {
              if (!a && b) {
                for (var d = 2; d < arguments.length; d++)
                  b = b.replace(/(%s)|(%d)/, cc._formatString(arguments[d]));
                throw Error(b);
              }
            }),
        a !== b.DEBUG_MODE_ERROR &&
          (cc.warn = Function.prototype.bind.call(console.warn, console)),
        a === b.DEBUG_MODE_INFO &&
          (cc.log = Function.prototype.bind.call(console.log, console)));
  }
};
cc.loader.loadBinary = function (a, b) {
  var d = this,
    e = this.getXMLHttpRequest(),
    f = "load " + a + " failed!";
  e.open("GET", a, !0);
  e.responseType = "arraybuffer";
  cc.loader.loadBinary._IEFilter
    ? (e.setRequestHeader("Accept-Charset", "x-user-defined"),
      (e.onreadystatechange = function () {
        if (4 === e.readyState && 200 === e.status) {
          var a = cc._convertResponseBodyToText(e.responseBody);
          b(null, d._str2Uint8Array(a));
        } else b(f);
      }))
    : (e.overrideMimeType &&
        e.overrideMimeType("text/plain; charset\x3dx-user-defined"),
      (e.onload = function () {
        4 === e.readyState && 200 === e.status
          ? b(null, new Uint8Array(e.response))
          : b(f);
      }));
  e.send(null);
};
cc.loader.loadBinary._IEFilter =
  /msie/i.test(navigator.userAgent) &&
  !/opera/i.test(navigator.userAgent) &&
  window.IEBinaryToArray_ByteStr &&
  window.IEBinaryToArray_ByteStr_Last;
cc.loader._str2Uint8Array = function (a) {
  if (!a) return null;
  for (var b = new Uint8Array(a.length), d = 0; d < a.length; d++)
    b[d] = a.charCodeAt(d) & 255;
  return b;
};
cc.loader.loadBinarySync = function (a) {
  var b = this.getXMLHttpRequest();
  b.timeout = 0;
  var d = "load " + a + " failed!";
  b.open("GET", a, !1);
  a = null;
  if (cc.loader.loadBinary._IEFilter) {
    b.setRequestHeader("Accept-Charset", "x-user-defined");
    b.send(null);
    if (200 !== b.status) return cc.log(d), null;
    (b = cc._convertResponseBodyToText(b.responseBody)) &&
      (a = this._str2Uint8Array(b));
  } else {
    b.overrideMimeType &&
      b.overrideMimeType("text/plain; charset\x3dx-user-defined");
    b.send(null);
    if (200 !== b.status) return cc.log(d), null;
    a = this._str2Uint8Array(b.responseText);
  }
  return a;
};
window.Uint8Array = window.Uint8Array || window.Array;
if (cc.loader.loadBinary._IEFilter) {
  var IEBinaryToArray_ByteStr_Script =
      '\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr \x3d CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex \x3d LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last \x3d Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last \x3d ""\r\n   End If\r\nEnd Function\r\n',
    myVBScript = document.createElement("script");
  myVBScript.type = "text/vbscript";
  myVBScript.textContent = IEBinaryToArray_ByteStr_Script;
  document.body.appendChild(myVBScript);
  cc._convertResponseBodyToText = function (a) {
    for (var b = {}, d = 0; 256 > d; d++)
      for (var e = 0; 256 > e; e++)
        b[String.fromCharCode(d + 256 * e)] =
          String.fromCharCode(d) + String.fromCharCode(e);
    d = IEBinaryToArray_ByteStr(a);
    a = IEBinaryToArray_ByteStr_Last(a);
    return (
      d.replace(/[\s\S]/g, function (a) {
        return b[a];
      }) + a
    );
  };
}
cc = cc || {};
cc._loadingImage =
  "data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAANACwAAAAAEAAQAAAEO5DJSau9OOvNex0IMnDIsiCkiW6g6BmKYlBFkhSUEgQKlQCARG6nEBwOgl+QApMdCIRD7YZ5RjlGpCUCACH5BAUAAA0ALAAAAgAOAA4AAAQ6kLGB0JA4M7QW0hrngRllkYyhKAYqKUGguAws0ypLS8JxCLQDgXAIDg+FRKIA6v0SAECCBpXSkstMBAAh+QQFAAANACwAAAAACgAQAAAEOJDJORAac6K1kDSKYmydpASBUl0mqmRfaGTCcQgwcxDEke+9XO2WkxQSiUIuAQAkls0n7JgsWq8RACH5BAUAAA0ALAAAAAAOAA4AAAQ6kMlplDIzTxWC0oxwHALnDQgySAdBHNWFLAvCukc215JIZihVIZEogDIJACBxnCSXTcmwGK1ar1hrBAAh+QQFAAANACwAAAAAEAAKAAAEN5DJKc4RM+tDyNFTkSQF5xmKYmQJACTVpQSBwrpJNteZSGYoFWjIGCAQA2IGsVgglBOmEyoxIiMAIfkEBQAADQAsAgAAAA4ADgAABDmQSVZSKjPPBEDSGucJxyGA1XUQxAFma/tOpDlnhqIYN6MEAUXvF+zldrMBAjHoIRYLhBMqvSmZkggAIfkEBQAADQAsBgAAAAoAEAAABDeQyUmrnSWlYhMASfeFVbZdjHAcgnUQxOHCcqWylKEohqUEAYVkgEAMfkEJYrFA6HhKJsJCNFoiACH5BAUAAA0ALAIAAgAOAA4AAAQ3kMlJq704611SKloCAEk4lln3DQgyUMJxCBKyLAh1EMRR3wiDQmHY9SQslyIQUMRmlmVTIyRaIgA7";
cc._fpsImage =
  "data:image/png;base64,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\x3d";
cc._loaderImage =
  "data:image/jpeg;base64,/9j/4QlQaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzEzOCA3OS4xNTk4MjQsIDIwMTYvMDkvMTQtMDE6MDk6MDEgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQlAAAAAAAQ1B2M2Y8AsgTpgAmY7PhCfv/bAIQABAMDAwMDBAMDBAYEAwQGBwUEBAUHCAYGBwYGCAoICQkJCQgKCgwMDAwMCgwMDQ0MDBERERERFBQUFBQUFBQUFAEEBQUIBwgPCgoPFA4ODhQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU/90ABAB4/+4ADkFkb2JlAGTAAAAAAf/AABEIAnEDwAMAEQABEQECEQH/xADRAAACAgMBAQEAAAAAAAAAAAADBAIFAAEGBwgJAQEBAQEBAQEBAQAAAAAAAAABAAIDBAUGBwgQAAIBAwIEBAIGBQULCAgCCwECAwAEERIhBTFBUQYTImEy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";
cc = cc || {};
cc.defineGetterSetter = function (a, b, d, e, f, g) {
  if (a.__defineGetter__)
    d && a.__defineGetter__(b, d), e && a.__defineSetter__(b, e);
  else if (Object.defineProperty) {
    var h = { enumerable: !1, configurable: !0 };
    d && (h.get = d);
    e && (h.set = e);
    Object.defineProperty(a, b, h);
  } else throw Error("browser does not support getters");
  if (!f && !g)
    for (
      var h = null != d,
        k = void 0 != e,
        m = Object.getOwnPropertyNames(a),
        n = 0;
      n < m.length;
      n++
    ) {
      var p = m[n];
      if (
        (a.__lookupGetter__
          ? !a.__lookupGetter__(p)
          : !Object.getOwnPropertyDescriptor(a, p)) &&
        "function" === typeof a[p]
      ) {
        var r = a[p];
        if (h && r === d && ((f = p), !k || g)) break;
        if (k && r === e && ((g = p), !h || f)) break;
      }
    }
  a = a.constructor;
  f && (a.__getters__ || (a.__getters__ = {}), (a.__getters__[f] = b));
  g && (a.__setters__ || (a.__setters__ = {}), (a.__setters__[g] = b));
};
cc.clone = function (a) {
  var b = a.constructor ? new a.constructor() : {},
    d;
  for (d in a) {
    var e = a[d];
    b[d] =
      "object" !== typeof e ||
      !e ||
      e instanceof cc.Node ||
      e instanceof HTMLElement
        ? e
        : cc.clone(e);
  }
  return b;
};
cc.inject = function (a, b) {
  for (var d in a) b[d] = a[d];
};
var ClassManager = function () {
    var a = 0 | (998 * Math.random()),
      b = 0 | (998 * Math.random());
    this.getNewID = function () {
      return a++;
    };
    this.getNewInstanceId = function () {
      return b++;
    };
  },
  classManager = new ClassManager();
(function () {
  var a = /\b_super\b/;
  cc.Class = function () {};
  cc.Class.extend = function (b) {
    var d = this.prototype,
      e = Object.create(d),
      f = { writable: !0, enumerable: !1, configurable: !0 },
      g;
    cc.game.config && cc.game.config[cc.game.CONFIG_KEY.exposeClassName]
      ? ((g =
          "(function " +
          (b._className || "Class") +
          " (arg0, arg1, arg2, arg3, arg4, arg5) {\n"),
        (g +=
          "    this.__instanceId \x3d classManager.getNewInstanceId();\n    if (this.ctor) {\n"),
        (g += "        switch (arguments.length) {\n"),
        (g += "        case 0: this.ctor(); break;\n"),
        (g += "        case 1: this.ctor(arg0); break;\n"),
        (g += "        case 3: this.ctor(arg0, arg1, arg2); break;\n"),
        (g += "        case 4: this.ctor(arg0, arg1, arg2, arg3); break;\n"),
        (g +=
          "        case 5: this.ctor(arg0, arg1, arg2, arg3, arg4); break;\n"),
        (g += "        default: this.ctor.apply(this, arguments);\n"),
        (g += "        }\n"),
        (g += "    }\n"),
        (g += "})"),
        (g = eval(g)))
      : (g = function (a, b, d, e, f) {
          this.__instanceId = classManager.getNewInstanceId();
          if (this.ctor)
            switch (arguments.length) {
              case 0:
                this.ctor();
                break;
              case 1:
                this.ctor(a);
                break;
              case 2:
                this.ctor(a, b);
                break;
              case 3:
                this.ctor(a, b, d);
                break;
              case 4:
                this.ctor(a, b, d, e);
                break;
              case 5:
                this.ctor(a, b, d, e, f);
                break;
              default:
                this.ctor.apply(this, arguments);
            }
        });
    f.value = classManager.getNewID();
    Object.defineProperty(e, "__pid", f);
    g.prototype = e;
    f.value = g;
    Object.defineProperty(e, "constructor", f);
    this.__getters__ && (g.__getters__ = cc.clone(this.__getters__));
    this.__setters__ && (g.__setters__ = cc.clone(this.__setters__));
    for (var h = 0, k = arguments.length; h < k; ++h) {
      var m = arguments[h],
        n;
      for (n in m) {
        var p = "function" === typeof m[n],
          r = "function" === typeof d[n],
          s = a.test(m[n]);
        p && r && s
          ? ((f.value = (function (a, b) {
              return function () {
                var e = this._super;
                this._super = d[a];
                var f = b.apply(this, arguments);
                this._super = e;
                return f;
              };
            })(n, m[n])),
            Object.defineProperty(e, n, f))
          : p
          ? ((f.value = m[n]), Object.defineProperty(e, n, f))
          : (e[n] = m[n]);
        if (p) {
          var u, v;
          if (this.__getters__ && this.__getters__[n]) {
            var p = this.__getters__[n],
              t;
            for (t in this.__setters__)
              if (this.__setters__[t] === p) {
                v = t;
                break;
              }
            cc.defineGetterSetter(e, p, m[n], m[v] ? m[v] : e[v], n, v);
          }
          if (this.__setters__ && this.__setters__[n]) {
            p = this.__setters__[n];
            for (t in this.__getters__)
              if (this.__getters__[t] === p) {
                u = t;
                break;
              }
            cc.defineGetterSetter(e, p, m[u] ? m[u] : e[u], m[n], u, n);
          }
        }
      }
    }
    g.extend = cc.Class.extend;
    g.implement = function (a) {
      for (var b in a) e[b] = a[b];
    };
    return g;
  };
})();
cc = cc || {};
cc._tmp = cc._tmp || {};
cc.associateWithNative = function (a, b) {};
cc.KEY = {
  none: 0,
  back: 6,
  menu: 18,
  backspace: 8,
  tab: 9,
  enter: 13,
  shift: 16,
  ctrl: 17,
  alt: 18,
  pause: 19,
  capslock: 20,
  escape: 27,
  space: 32,
  pageup: 33,
  pagedown: 34,
  end: 35,
  home: 36,
  left: 37,
  up: 38,
  right: 39,
  down: 40,
  select: 41,
  insert: 45,
  Delete: 46,
  0: 48,
  1: 49,
  2: 50,
  3: 51,
  4: 52,
  5: 53,
  6: 54,
  7: 55,
  8: 56,
  9: 57,
  a: 65,
  b: 66,
  c: 67,
  d: 68,
  e: 69,
  f: 70,
  g: 71,
  h: 72,
  i: 73,
  j: 74,
  k: 75,
  l: 76,
  m: 77,
  n: 78,
  o: 79,
  p: 80,
  q: 81,
  r: 82,
  s: 83,
  t: 84,
  u: 85,
  v: 86,
  w: 87,
  x: 88,
  y: 89,
  z: 90,
  num0: 96,
  num1: 97,
  num2: 98,
  num3: 99,
  num4: 100,
  num5: 101,
  num6: 102,
  num7: 103,
  num8: 104,
  num9: 105,
  "*": 106,
  "+": 107,
  "-": 109,
  numdel: 110,
  "/": 111,
  f1: 112,
  f2: 113,
  f3: 114,
  f4: 115,
  f5: 116,
  f6: 117,
  f7: 118,
  f8: 119,
  f9: 120,
  f10: 121,
  f11: 122,
  f12: 123,
  numlock: 144,
  scrolllock: 145,
  ";": 186,
  semicolon: 186,
  equal: 187,
  "\x3d": 187,
  ",": 188,
  comma: 188,
  dash: 189,
  ".": 190,
  period: 190,
  forwardslash: 191,
  grave: 192,
  "[": 219,
  openbracket: 219,
  backslash: 220,
  "]": 221,
  closebracket: 221,
  quote: 222,
  dpadLeft: 1e3,
  dpadRight: 1001,
  dpadUp: 1003,
  dpadDown: 1004,
  dpadCenter: 1005,
};
cc.FMT_JPG = 0;
cc.FMT_PNG = 1;
cc.FMT_TIFF = 2;
cc.FMT_RAWDATA = 3;
cc.FMT_WEBP = 4;
cc.FMT_UNKNOWN = 5;
cc.getImageFormatByData = function (a) {
  return 8 < a.length &&
    137 === a[0] &&
    80 === a[1] &&
    78 === a[2] &&
    71 === a[3] &&
    13 === a[4] &&
    10 === a[5] &&
    26 === a[6] &&
    10 === a[7]
    ? cc.FMT_PNG
    : 2 < a.length &&
      ((73 === a[0] && 73 === a[1]) ||
        (77 === a[0] && 77 === a[1]) ||
        (255 === a[0] && 216 === a[1]))
    ? cc.FMT_TIFF
    : cc.FMT_UNKNOWN;
};
cc.Point = function (a, b) {
  this.x = a || 0;
  this.y = b || 0;
};
cc.p = function (a, b) {
  return void 0 === a
    ? { x: 0, y: 0 }
    : void 0 === b
    ? { x: a.x, y: a.y }
    : { x: a, y: b };
};
cc.pointEqualToPoint = function (a, b) {
  return a && b && a.x === b.x && a.y === b.y;
};
cc.Size = function (a, b) {
  this.width = a || 0;
  this.height = b || 0;
};
cc.size = function (a, b) {
  return void 0 === a
    ? { width: 0, height: 0 }
    : void 0 === b
    ? { width: a.width, height: a.height }
    : { width: a, height: b };
};
cc.sizeEqualToSize = function (a, b) {
  return a && b && a.width === b.width && a.height === b.height;
};
cc.Rect = function (a, b, d, e) {
  this.x = a || 0;
  this.y = b || 0;
  this.width = d || 0;
  this.height = e || 0;
};
cc.rect = function (a, b, d, e) {
  return void 0 === a
    ? { x: 0, y: 0, width: 0, height: 0 }
    : void 0 === b
    ? { x: a.x, y: a.y, width: a.width, height: a.height }
    : { x: a, y: b, width: d, height: e };
};
cc.rectEqualToRect = function (a, b) {
  return (
    a &&
    b &&
    a.x === b.x &&
    a.y === b.y &&
    a.width === b.width &&
    a.height === b.height
  );
};
cc._rectEqualToZero = function (a) {
  return a && 0 === a.x && 0 === a.y && 0 === a.width && 0 === a.height;
};
cc.rectContainsRect = function (a, b) {
  return a && b
    ? !(
        a.x >= b.x ||
        a.y >= b.y ||
        a.x + a.width <= b.x + b.width ||
        a.y + a.height <= b.y + b.height
      )
    : !1;
};
cc.rectGetMaxX = function (a) {
  return a.x + a.width;
};
cc.rectGetMidX = function (a) {
  return a.x + a.width / 2;
};
cc.rectGetMinX = function (a) {
  return a.x;
};
cc.rectGetMaxY = function (a) {
  return a.y + a.height;
};
cc.rectGetMidY = function (a) {
  return a.y + a.height / 2;
};
cc.rectGetMinY = function (a) {
  return a.y;
};
cc.rectContainsPoint = function (a, b) {
  return (
    b.x >= cc.rectGetMinX(a) &&
    b.x <= cc.rectGetMaxX(a) &&
    b.y >= cc.rectGetMinY(a) &&
    b.y <= cc.rectGetMaxY(a)
  );
};
cc.rectIntersectsRect = function (a, b) {
  var d = a.y + a.height,
    e = b.x + b.width,
    f = b.y + b.height;
  return !(a.x + a.width < b.x || e < a.x || d < b.y || f < a.y);
};
cc.rectOverlapsRect = function (a, b) {
  return !(
    a.x + a.width < b.x ||
    b.x + b.width < a.x ||
    a.y + a.height < b.y ||
    b.y + b.height < a.y
  );
};
cc.rectUnion = function (a, b) {
  var d = cc.rect(0, 0, 0, 0);
  d.x = Math.min(a.x, b.x);
  d.y = Math.min(a.y, b.y);
  d.width = Math.max(a.x + a.width, b.x + b.width) - d.x;
  d.height = Math.max(a.y + a.height, b.y + b.height) - d.y;
  return d;
};
cc.rectIntersection = function (a, b) {
  var d = cc.rect(
    Math.max(cc.rectGetMinX(a), cc.rectGetMinX(b)),
    Math.max(cc.rectGetMinY(a), cc.rectGetMinY(b)),
    0,
    0
  );
  d.width = Math.min(cc.rectGetMaxX(a), cc.rectGetMaxX(b)) - cc.rectGetMinX(d);
  d.height = Math.min(cc.rectGetMaxY(a), cc.rectGetMaxY(b)) - cc.rectGetMinY(d);
  return d;
};
cc.SAXParser = cc.Class.extend({
  _parser: null,
  _isSupportDOMParser: null,
  ctor: function () {
    window.DOMParser
      ? ((this._isSupportDOMParser = !0), (this._parser = new DOMParser()))
      : (this._isSupportDOMParser = !1);
  },
  parse: function (a) {
    return this._parseXML(a);
  },
  _parseXML: function (a) {
    var b;
    this._isSupportDOMParser
      ? (b = this._parser.parseFromString(a, "text/xml"))
      : ((b = new ActiveXObject("Microsoft.XMLDOM")),
        (b.async = "false"),
        b.loadXML(a));
    return b;
  },
});
cc.PlistParser = cc.SAXParser.extend({
  parse: function (a) {
    a = this._parseXML(a).documentElement;
    if ("plist" !== a.tagName) return cc.warn("Not a plist file!"), {};
    for (
      var b = null, d = 0, e = a.childNodes.length;
      d < e && ((b = a.childNodes[d]), 1 !== b.nodeType);
      d++
    );
    return this._parseNode(b);
  },
  _parseNode: function (a) {
    var b = null,
      d = a.tagName;
    if ("dict" === d) b = this._parseDict(a);
    else if ("array" === d) b = this._parseArray(a);
    else if ("string" === d)
      if (1 === a.childNodes.length) b = a.firstChild.nodeValue;
      else
        for (b = "", d = 0; d < a.childNodes.length; d++)
          b += a.childNodes[d].nodeValue;
    else
      "false" === d
        ? (b = !1)
        : "true" === d
        ? (b = !0)
        : "real" === d
        ? (b = parseFloat(a.firstChild.nodeValue))
        : "integer" === d && (b = parseInt(a.firstChild.nodeValue, 10));
    return b;
  },
  _parseArray: function (a) {
    for (var b = [], d = 0, e = a.childNodes.length; d < e; d++) {
      var f = a.childNodes[d];
      1 === f.nodeType && b.push(this._parseNode(f));
    }
    return b;
  },
  _parseDict: function (a) {
    for (var b = {}, d = null, e = 0, f = a.childNodes.length; e < f; e++) {
      var g = a.childNodes[e];
      1 === g.nodeType &&
        ("key" === g.tagName
          ? (d = g.firstChild.nodeValue)
          : (b[d] = this._parseNode(g)));
    }
    return b;
  },
});
cc.saxParser = new cc.SAXParser();
cc.plistParser = new cc.PlistParser();
cc._txtLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadTxt(a, e);
  },
};
cc.loader.register(["txt", "xml", "vsh", "fsh", "atlas"], cc._txtLoader);
cc._jsonLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadJson(a, e);
  },
};
cc.loader.register(["json", "ExportJson"], cc._jsonLoader);
cc._jsLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadJs(a, e);
  },
};
cc.loader.register(["js"], cc._jsLoader);
cc._imgLoader = {
  load: function (a, b, d, e) {
    d = cc.loader.isLoading(a)
      ? function (a, d) {
          if (a) return e(a);
          var h =
            cc.textureCache.getTextureForKey(b) ||
            cc.textureCache.handleLoadedTexture(b, d);
          e(null, h);
        }
      : function (a, d) {
          if (a) return e(a);
          var h = cc.textureCache.handleLoadedTexture(b, d);
          e(null, h);
        };
    cc.loader.loadImg(a, d);
  },
};
cc.loader.register(
  "png jpg bmp jpeg gif ico tiff webp".split(" "),
  cc._imgLoader
);
cc._serverImgLoader = {
  load: function (a, b, d, e) {
    cc._imgLoader.load(d.src, b, d, e);
  },
};
cc.loader.register(["serverImg"], cc._serverImgLoader);
cc._plistLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadTxt(a, function (a, b) {
      if (a) return e(a);
      e(null, cc.plistParser.parse(b));
    });
  },
};
cc.loader.register(["plist"], cc._plistLoader);
cc._fontLoader = {
  TYPE: {
    ".eot": "embedded-opentype",
    ".ttf": "truetype",
    ".ttc": "truetype",
    ".woff": "woff",
    ".svg": "svg",
  },
  _loadFont: function (a, b, d) {
    var e = document,
      f = cc.path,
      g = this.TYPE,
      h = document.createElement("style");
    h.type = "text/css";
    e.body.appendChild(h);
    var k = "",
      k = isNaN(a - 0)
        ? k + ("@font-face { font-family:" + a + "; src:")
        : k + ("@font-face { font-family:'" + a + "'; src:");
    if (b instanceof Array)
      for (var m = 0, n = b.length; m < n; m++)
        (d = f.extname(b[m]).toLowerCase()),
          (k += "url('" + b[m] + "') format('" + g[d] + "')"),
          (k += m === n - 1 ? ";" : ",");
    else
      (d = d.toLowerCase()), (k += "url('" + b + "') format('" + g[d] + "');");
    h.textContent += k + "}";
    b = document.createElement("div");
    d = b.style;
    d.fontFamily = a;
    b.innerHTML = ".";
    d.position = "absolute";
    d.left = "-100px";
    d.top = "-100px";
    e.body.appendChild(b);
  },
  load: function (a, b, d, e) {
    b = d.type;
    a = d.name;
    b = d.srcs;
    cc.isString(d)
      ? ((b = cc.path.extname(d)),
        (a = cc.path.basename(d, b)),
        this._loadFont(a, d, b))
      : this._loadFont(a, b);
    document.fonts
      ? document.fonts.load("1em " + a).then(
          function () {
            e(null, !0);
          },
          function (a) {
            e(a);
          }
        )
      : e(null, !0);
  },
};
cc.loader.register("font eot ttf woff svg ttc".split(" "), cc._fontLoader);
cc._binaryLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadBinary(a, e);
  },
};
cc._csbLoader = {
  load: function (a, b, d, e) {
    cc.loader.loadCsb(a, e);
  },
};
cc.loader.register(["csb"], cc._csbLoader);
window.CocosEngine = cc.ENGINE_VERSION = "Cocos2d-JS v3.16";
cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL = 0;
cc.DIRECTOR_STATS_POSITION = cc.p(0, 0);
cc.DIRECTOR_FPS_INTERVAL = 0.5;
cc.COCOSNODE_RENDER_SUBPIXEL = 1;
cc.SPRITEBATCHNODE_RENDER_SUBPIXEL = 1;
cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA = 1;
cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP = 0;
cc.TEXTURE_ATLAS_USE_VAO = 0;
cc.TEXTURE_NPOT_SUPPORT = 0;
cc.RETINA_DISPLAY_FILENAME_SUFFIX = "-hd";
cc.USE_LA88_LABELS = 1;
cc.SPRITE_DEBUG_DRAW = 0;
cc.SPRITEBATCHNODE_DEBUG_DRAW = 0;
cc.LABELBMFONT_DEBUG_DRAW = 0;
cc.LABELATLAS_DEBUG_DRAW = 0;
cc.DRAWNODE_TOTAL_VERTICES = 2e4;
cc.DEFAULT_ENGINE = cc.ENGINE_VERSION + "-canvas";
cc.ENABLE_STACKABLE_ACTIONS = 1;
cc.ENABLE_GL_STATE_CACHE = 1;
cc.$ = function (a) {
  var b = this === cc ? document : this;
  if ((a = a instanceof HTMLElement ? a : b.querySelector(a)))
    (a.find = a.find || cc.$),
      (a.hasClass =
        a.hasClass ||
        function (a) {
          return this.className.match(RegExp("(\\s|^)" + a + "(\\s|$)"));
        }),
      (a.addClass =
        a.addClass ||
        function (a) {
          this.hasClass(a) ||
            (this.className && (this.className += " "), (this.className += a));
          return this;
        }),
      (a.removeClass =
        a.removeClass ||
        function (a) {
          this.hasClass(a) && (this.className = this.className.replace(a, ""));
          return this;
        }),
      (a.remove =
        a.remove ||
        function () {
          this.parentNode && this.parentNode.removeChild(this);
          return this;
        }),
      (a.appendTo =
        a.appendTo ||
        function (a) {
          a.appendChild(this);
          return this;
        }),
      (a.prependTo =
        a.prependTo ||
        function (a) {
          a.childNodes[0]
            ? a.insertBefore(this, a.childNodes[0])
            : a.appendChild(this);
          return this;
        }),
      (a.transforms =
        a.transforms ||
        function () {
          this.style[cc.$.trans] =
            cc.$.translate(this.position) +
            cc.$.rotate(this.rotation) +
            cc.$.scale(this.scale) +
            cc.$.skew(this.skew);
          return this;
        }),
      (a.position = a.position || { x: 0, y: 0 }),
      (a.rotation = a.rotation || 0),
      (a.scale = a.scale || { x: 1, y: 1 }),
      (a.skew = a.skew || { x: 0, y: 0 }),
      (a.translates = function (a, b) {
        this.position.x = a;
        this.position.y = b;
        this.transforms();
        return this;
      }),
      (a.rotate = function (a) {
        this.rotation = a;
        this.transforms();
        return this;
      }),
      (a.resize = function (a, b) {
        this.scale.x = a;
        this.scale.y = b;
        this.transforms();
        return this;
      }),
      (a.setSkew = function (a, b) {
        this.skew.x = a;
        this.skew.y = b;
        this.transforms();
        return this;
      });
  return a;
};
switch (cc.sys.browserType) {
  case cc.sys.BROWSER_TYPE_FIREFOX:
    cc.$.pfx = "Moz";
    cc.$.hd = !0;
    break;
  case cc.sys.BROWSER_TYPE_CHROME:
  case cc.sys.BROWSER_TYPE_SAFARI:
    cc.$.pfx = "webkit";
    cc.$.hd = !0;
    break;
  case cc.sys.BROWSER_TYPE_OPERA:
    cc.$.pfx = "O";
    cc.$.hd = !1;
    break;
  case cc.sys.BROWSER_TYPE_IE:
    cc.$.pfx = "ms";
    cc.$.hd = !1;
    break;
  default:
    (cc.$.pfx = "webkit"), (cc.$.hd = !0);
}
cc.$.trans = cc.$.pfx + "Transform";
cc.$.translate = cc.$.hd
  ? function (a) {
      return "translate3d(" + a.x + "px, " + a.y + "px, 0) ";
    }
  : function (a) {
      return "translate(" + a.x + "px, " + a.y + "px) ";
    };
cc.$.rotate = cc.$.hd
  ? function (a) {
      return "rotateZ(" + a + "deg) ";
    }
  : function (a) {
      return "rotate(" + a + "deg) ";
    };
cc.$.scale = function (a) {
  return "scale(" + a.x + ", " + a.y + ") ";
};
cc.$.skew = function (a) {
  return "skewX(" + -a.x + "deg) skewY(" + a.y + "deg)";
};
cc.$new = function (a) {
  return cc.$(document.createElement(a));
};
cc.$.findpos = function (a) {
  var b = 0,
    d = 0;
  do (b += a.offsetLeft), (d += a.offsetTop);
  while ((a = a.offsetParent));
  return { x: b, y: d };
};
cc.INVALID_INDEX = -1;
cc.PI = Math.PI;
cc.FLT_MAX = parseFloat("3.402823466e+38F");
cc.FLT_MIN = parseFloat("1.175494351e-38F");
cc.RAD = cc.PI / 180;
cc.DEG = 180 / cc.PI;
cc.UINT_MAX = 4294967295;
cc.swap = function (a, b, d) {
  if (!cc.isObject(d) || cc.isUndefined(d.x) || cc.isUndefined(d.y))
    cc.log(cc._LogInfos.swap);
  else {
    var e = d[a];
    d[a] = d[b];
    d[b] = e;
  }
};
cc.lerp = function (a, b, d) {
  return a + (b - a) * d;
};
cc.rand = function () {
  return 16777215 * Math.random();
};
cc.randomMinus1To1 = function () {
  return 2 * (Math.random() - 0.5);
};
cc.random0To1 = Math.random;
cc.degreesToRadians = function (a) {
  return a * cc.RAD;
};
cc.radiansToDegrees = function (a) {
  return a * cc.DEG;
};
cc.radiansToDegress = function (a) {
  cc.log(cc._LogInfos.radiansToDegress);
  return a * cc.DEG;
};
cc.REPEAT_FOREVER = Number.MAX_VALUE - 1;
cc.nodeDrawSetup = function (a) {
  a._shaderProgram &&
    (a._glProgramState.apply(),
    a._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4());
};
cc.enableDefaultGLStates = function () {};
cc.disableDefaultGLStates = function () {};
cc.incrementGLDraws = function (a) {
  cc.g_NumberOfDraws += a;
};
cc.FLT_EPSILON = 1.192092896e-7;
cc.contentScaleFactor = function () {
  return cc.director._contentScaleFactor;
};
cc.pointPointsToPixels = function (a) {
  var b = cc.contentScaleFactor();
  return cc.p(a.x * b, a.y * b);
};
cc.pointPixelsToPoints = function (a) {
  var b = cc.contentScaleFactor();
  return cc.p(a.x / b, a.y / b);
};
cc._pointPixelsToPointsOut = function (a, b) {
  var d = cc.contentScaleFactor();
  b.x = a.x / d;
  b.y = a.y / d;
};
cc.sizePointsToPixels = function (a) {
  var b = cc.contentScaleFactor();
  return cc.size(a.width * b, a.height * b);
};
cc.sizePixelsToPoints = function (a) {
  var b = cc.contentScaleFactor();
  return cc.size(a.width / b, a.height / b);
};
cc._sizePixelsToPointsOut = function (a, b) {
  var d = cc.contentScaleFactor();
  b.width = a.width / d;
  b.height = a.height / d;
};
cc.rectPixelsToPoints = function (a) {
  var b = cc.contentScaleFactor();
  return cc.rect(a.x / b, a.y / b, a.width / b, a.height / b);
};
cc.rectPointsToPixels = function (a) {
  var b = cc.contentScaleFactor();
  return cc.rect(a.x * b, a.y * b, a.width * b, a.height * b);
};
cc.ONE = 1;
cc.ZERO = 0;
cc.SRC_ALPHA = 770;
cc.SRC_ALPHA_SATURATE = 776;
cc.SRC_COLOR = 768;
cc.DST_ALPHA = 772;
cc.DST_COLOR = 774;
cc.ONE_MINUS_SRC_ALPHA = 771;
cc.ONE_MINUS_SRC_COLOR = 769;
cc.ONE_MINUS_DST_ALPHA = 773;
cc.ONE_MINUS_DST_COLOR = 775;
cc.ONE_MINUS_CONSTANT_ALPHA = 32772;
cc.ONE_MINUS_CONSTANT_COLOR = 32770;
cc.LINEAR = 9729;
cc.REPEAT = 10497;
cc.CLAMP_TO_EDGE = 33071;
cc.MIRRORED_REPEAT = 33648;
cc.BLEND_SRC = cc.SRC_ALPHA;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
    cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA &&
    (cc.BLEND_SRC = cc.ONE);
});
cc.BLEND_DST = cc.ONE_MINUS_SRC_ALPHA;
cc.checkGLErrorDebug = function () {
  if (cc.renderMode === cc.game.RENDER_TYPE_WEBGL) {
    var a = cc._renderContext.getError();
    a && cc.log(cc._LogInfos.checkGLErrorDebug, a);
  }
};
cc.ORIENTATION_PORTRAIT = 1;
cc.ORIENTATION_LANDSCAPE = 2;
cc.ORIENTATION_AUTO = 3;
cc.CONCURRENCY_HTTP_REQUEST_COUNT = cc.sys.isMobile ? 20 : 0;
cc.BATCH_VERTEX_COUNT = 2e3;
cc.VERTEX_ATTRIB_FLAG_NONE = 0;
cc.VERTEX_ATTRIB_FLAG_POSITION = 1;
cc.VERTEX_ATTRIB_FLAG_COLOR = 2;
cc.VERTEX_ATTRIB_FLAG_TEX_COORDS = 4;
cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX =
  cc.VERTEX_ATTRIB_FLAG_POSITION |
  cc.VERTEX_ATTRIB_FLAG_COLOR |
  cc.VERTEX_ATTRIB_FLAG_TEX_COORDS;
cc.GL_ALL = 0;
cc.VERTEX_ATTRIB_POSITION = 0;
cc.VERTEX_ATTRIB_COLOR = 1;
cc.VERTEX_ATTRIB_TEX_COORDS = 2;
cc.VERTEX_ATTRIB_MAX = 7;
cc.UNIFORM_PMATRIX = 0;
cc.UNIFORM_MVMATRIX = 1;
cc.UNIFORM_MVPMATRIX = 2;
cc.UNIFORM_TIME = 3;
cc.UNIFORM_SINTIME = 4;
cc.UNIFORM_COSTIME = 5;
cc.UNIFORM_RANDOM01 = 6;
cc.UNIFORM_SAMPLER = 7;
cc.UNIFORM_MAX = 8;
cc.SHADER_POSITION_TEXTURECOLOR = "ShaderPositionTextureColor";
cc.SHADER_SPRITE_POSITION_TEXTURECOLOR = "ShaderSpritePositionTextureColor";
cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY =
  "ShaderSpritePositionTextureColorGray";
cc.SHADER_POSITION_TEXTURECOLORALPHATEST =
  "ShaderPositionTextureColorAlphaTest";
cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST =
  "ShaderSpritePositionTextureColorAlphaTest";
cc.SHADER_POSITION_COLOR = "ShaderPositionColor";
cc.SHADER_SPRITE_POSITION_COLOR = "ShaderSpritePositionColor";
cc.SHADER_POSITION_TEXTURE = "ShaderPositionTexture";
cc.SHADER_POSITION_TEXTURE_UCOLOR = "ShaderPositionTextureUColor";
cc.SHADER_POSITION_TEXTUREA8COLOR = "ShaderPositionTextureA8Color";
cc.SHADER_POSITION_UCOLOR = "ShaderPositionUColor";
cc.SHADER_POSITION_LENGTHTEXTURECOLOR = "ShaderPositionLengthTextureColor";
cc.UNIFORM_PMATRIX_S = "CC_PMatrix";
cc.UNIFORM_MVMATRIX_S = "CC_MVMatrix";
cc.UNIFORM_MVPMATRIX_S = "CC_MVPMatrix";
cc.UNIFORM_TIME_S = "CC_Time";
cc.UNIFORM_SINTIME_S = "CC_SinTime";
cc.UNIFORM_COSTIME_S = "CC_CosTime";
cc.UNIFORM_RANDOM01_S = "CC_Random01";
cc.UNIFORM_SAMPLER_S = "CC_Texture0";
cc.UNIFORM_ALPHA_TEST_VALUE_S = "CC_alpha_value";
cc.ATTRIBUTE_NAME_COLOR = "a_color";
cc.ATTRIBUTE_NAME_POSITION = "a_position";
cc.ATTRIBUTE_NAME_TEX_COORD = "a_texCoord";
cc.ATTRIBUTE_NAME_MVMAT = "a_mvMatrix";
cc.ITEM_SIZE = 32;
cc.CURRENT_ITEM = 3233828865;
cc.ZOOM_ACTION_TAG = 3233828866;
cc.NORMAL_TAG = 8801;
cc.SELECTED_TAG = 8802;
cc.DISABLE_TAG = 8803;
cc.arrayVerifyType = function (a, b) {
  if (a && 0 < a.length)
    for (var d = 0; d < a.length; d++)
      if (!(a[d] instanceof b)) return cc.log("element type is wrong!"), !1;
  return !0;
};
cc.arrayRemoveObject = function (a, b) {
  for (var d = 0, e = a.length; d < e; d++)
    if (a[d] === b) {
      a.splice(d, 1);
      break;
    }
};
cc.arrayRemoveArray = function (a, b) {
  for (var d = 0, e = b.length; d < e; d++) cc.arrayRemoveObject(a, b[d]);
};
cc.arrayAppendObjectsToIndex = function (a, b, d) {
  a.splice.apply(a, [d, 0].concat(b));
  return a;
};
cc.copyArray = function (a) {
  var b,
    d = a.length,
    e = Array(d);
  for (b = 0; b < d; b += 1) e[b] = a[b];
  return e;
};
cc.Color = function (a, b, d, e) {
  this._val =
    (((a || 0) << 24) >>> 0) +
    ((b || 0) << 16) +
    ((d || 0) << 8) +
    ("number" === typeof e ? e : 255);
};
_p = cc.Color.prototype;
_p._getR = function () {
  return (this._val & 4278190080) >>> 24;
};
_p._setR = function (a) {
  this._val = (this._val & 16777215) | ((a << 24) >>> 0);
};
_p._getG = function () {
  return (this._val & 16711680) >> 16;
};
_p._setG = function (a) {
  this._val = (this._val & 4278255615) | (a << 16);
};
_p._getB = function () {
  return (this._val & 65280) >> 8;
};
_p._setB = function (a) {
  this._val = (this._val & 4294902015) | (a << 8);
};
_p._getA = function () {
  return this._val & 255;
};
_p._setA = function (a) {
  this._val = (this._val & 4294967040) | a;
};
cc.defineGetterSetter(_p, "r", _p._getR, _p._setR);
cc.defineGetterSetter(_p, "g", _p._getG, _p._setG);
cc.defineGetterSetter(_p, "b", _p._getB, _p._setB);
cc.defineGetterSetter(_p, "a", _p._getA, _p._setA);
cc.color = function (a, b, d, e) {
  return void 0 === a
    ? new cc.Color(0, 0, 0, 255)
    : "object" === typeof a
    ? new cc.Color(a.r, a.g, a.b, null == a.a ? 255 : a.a)
    : "string" === typeof a
    ? cc.hexToColor(a)
    : new cc.Color(a, b, d, null == e ? 255 : e);
};
cc.colorEqual = function (a, b) {
  return a.r === b.r && a.g === b.g && a.b === b.b;
};
cc.Acceleration = function (a, b, d, e) {
  this.x = a || 0;
  this.y = b || 0;
  this.z = d || 0;
  this.timestamp = e || 0;
};
cc.Vertex2F = function (a, b, d, e) {
  this._arrayBuffer = d || new ArrayBuffer(cc.Vertex2F.BYTES_PER_ELEMENT);
  this._offset = e || 0;
  this._view = new Float32Array(this._arrayBuffer, this._offset, 2);
  this._view[0] = a || 0;
  this._view[1] = b || 0;
};
cc.Vertex2F.BYTES_PER_ELEMENT = 8;
_p = cc.Vertex2F.prototype;
_p._getX = function () {
  return this._view[0];
};
_p._setX = function (a) {
  this._view[0] = a;
};
_p._getY = function () {
  return this._view[1];
};
_p._setY = function (a) {
  this._view[1] = a;
};
cc.defineGetterSetter(_p, "x", _p._getX, _p._setX);
cc.defineGetterSetter(_p, "y", _p._getY, _p._setY);
cc.Vertex3F = function (a, b, d, e, f) {
  this._arrayBuffer = e || new ArrayBuffer(cc.Vertex3F.BYTES_PER_ELEMENT);
  this._offset = f || 0;
  this._view = new Float32Array(this._arrayBuffer, this._offset, 3);
  this._view[0] = a || 0;
  this._view[1] = b || 0;
  this._view[2] = d || 0;
};
cc.Vertex3F.BYTES_PER_ELEMENT = 12;
_p = cc.Vertex3F.prototype;
_p._getX = function () {
  return this._view[0];
};
_p._setX = function (a) {
  this._view[0] = a;
};
_p._getY = function () {
  return this._view[1];
};
_p._setY = function (a) {
  this._view[1] = a;
};
_p._getZ = function () {
  return this._view[2];
};
_p._setZ = function (a) {
  this._view[2] = a;
};
cc.defineGetterSetter(_p, "x", _p._getX, _p._setX);
cc.defineGetterSetter(_p, "y", _p._getY, _p._setY);
cc.defineGetterSetter(_p, "z", _p._getZ, _p._setZ);
cc.Tex2F = function (a, b, d, e) {
  this._arrayBuffer = d || new ArrayBuffer(cc.Tex2F.BYTES_PER_ELEMENT);
  this._offset = e || 0;
  this._view = new Float32Array(this._arrayBuffer, this._offset, 2);
  this._view[0] = a || 0;
  this._view[1] = b || 0;
};
cc.Tex2F.BYTES_PER_ELEMENT = 8;
_p = cc.Tex2F.prototype;
_p._getU = function () {
  return this._view[0];
};
_p._setU = function (a) {
  this._view[0] = a;
};
_p._getV = function () {
  return this._view[1];
};
_p._setV = function (a) {
  this._view[1] = a;
};
cc.defineGetterSetter(_p, "u", _p._getU, _p._setU);
cc.defineGetterSetter(_p, "v", _p._getV, _p._setV);
cc.Quad2 = function (a, b, d, e, f, g) {
  this._arrayBuffer = f || new ArrayBuffer(cc.Quad2.BYTES_PER_ELEMENT);
  this._offset = g || 0;
  f = this._arrayBuffer;
  g = this._offset;
  var h = cc.Vertex2F.BYTES_PER_ELEMENT;
  this._tl = a ? new cc.Vertex2F(a.x, a.y, f, g) : new cc.Vertex2F(0, 0, f, g);
  g += h;
  this._tr = b ? new cc.Vertex2F(b.x, b.y, f, g) : new cc.Vertex2F(0, 0, f, g);
  g += h;
  this._bl = d ? new cc.Vertex2F(d.x, d.y, f, g) : new cc.Vertex2F(0, 0, f, g);
  g += h;
  this._br = e ? new cc.Vertex2F(e.x, e.y, f, g) : new cc.Vertex2F(0, 0, f, g);
};
cc.Quad2.BYTES_PER_ELEMENT = 32;
_p = cc.Quad2.prototype;
_p._getTL = function () {
  return this._tl;
};
_p._setTL = function (a) {
  this._tl._view[0] = a.x;
  this._tl._view[1] = a.y;
};
_p._getTR = function () {
  return this._tr;
};
_p._setTR = function (a) {
  this._tr._view[0] = a.x;
  this._tr._view[1] = a.y;
};
_p._getBL = function () {
  return this._bl;
};
_p._setBL = function (a) {
  this._bl._view[0] = a.x;
  this._bl._view[1] = a.y;
};
_p._getBR = function () {
  return this._br;
};
_p._setBR = function (a) {
  this._br._view[0] = a.x;
  this._br._view[1] = a.y;
};
cc.defineGetterSetter(_p, "tl", _p._getTL, _p._setTL);
cc.defineGetterSetter(_p, "tr", _p._getTR, _p._setTR);
cc.defineGetterSetter(_p, "bl", _p._getBL, _p._setBL);
cc.defineGetterSetter(_p, "br", _p._getBR, _p._setBR);
cc.Quad3 = function (a, b, d, e, f, g) {
  this._arrayBuffer = f || new ArrayBuffer(cc.Quad3.BYTES_PER_ELEMENT);
  this._offset = g || 0;
  f = this._arrayBuffer;
  g = this._offset;
  var h = cc.Vertex3F.BYTES_PER_ELEMENT;
  this.bl = a
    ? new cc.Vertex3F(a.x, a.y, a.z, f, g)
    : new cc.Vertex3F(0, 0, 0, f, g);
  g += h;
  this.br = b
    ? new cc.Vertex3F(b.x, b.y, b.z, f, g)
    : new cc.Vertex3F(0, 0, 0, f, g);
  g += h;
  this.tl = d
    ? new cc.Vertex3F(d.x, d.y, d.z, f, g)
    : new cc.Vertex3F(0, 0, 0, f, g);
  g += h;
  this.tr = e
    ? new cc.Vertex3F(e.x, e.y, e.z, f, g)
    : new cc.Vertex3F(0, 0, 0, f, g);
};
cc.Quad3.BYTES_PER_ELEMENT = 48;
cc.V3F_C4B_T2F = function (a, b, d, e, f) {
  this._arrayBuffer = e || new ArrayBuffer(cc.V3F_C4B_T2F.BYTES_PER_ELEMENT);
  this._offset = f || 0;
  e = this._arrayBuffer;
  f = this._offset;
  this._vertices = a
    ? new cc.Vertex3F(a.x, a.y, a.z, e, f)
    : new cc.Vertex3F(0, 0, 0, e, f);
  f += cc.Vertex3F.BYTES_PER_ELEMENT;
  this._colors = b
    ? new cc._WebGLColor(b.r, b.g, b.b, b.a, e, f)
    : new cc._WebGLColor(0, 0, 0, 0, e, f);
  f += cc._WebGLColor.BYTES_PER_ELEMENT;
  this._texCoords = d ? new cc.Tex2F(d.u, d.v, e, f) : new cc.Tex2F(0, 0, e, f);
};
cc.V3F_C4B_T2F.BYTES_PER_ELEMENT = 24;
_p = cc.V3F_C4B_T2F.prototype;
_p._getVertices = function () {
  return this._vertices;
};
_p._setVertices = function (a) {
  var b = this._vertices;
  b._view[0] = a.x;
  b._view[1] = a.y;
  b._view[2] = a.z;
};
_p._getColor = function () {
  return this._colors;
};
_p._setColor = function (a) {
  var b = this._colors;
  b._view[0] = a.r;
  b._view[1] = a.g;
  b._view[2] = a.b;
  b._view[3] = a.a;
};
_p._getTexCoords = function () {
  return this._texCoords;
};
_p._setTexCoords = function (a) {
  this._texCoords._view[0] = a.u;
  this._texCoords._view[1] = a.v;
};
cc.defineGetterSetter(_p, "vertices", _p._getVertices, _p._setVertices);
cc.defineGetterSetter(_p, "colors", _p._getColor, _p._setColor);
cc.defineGetterSetter(_p, "texCoords", _p._getTexCoords, _p._setTexCoords);
cc.V3F_C4B_T2F_Quad = function (a, b, d, e, f, g) {
  this._arrayBuffer =
    f || new ArrayBuffer(cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT);
  this._offset = g || 0;
  f = this._arrayBuffer;
  g = this._offset;
  var h = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
  this._tl = a
    ? new cc.V3F_C4B_T2F(a.vertices, a.colors, a.texCoords, f, g)
    : new cc.V3F_C4B_T2F(null, null, null, f, g);
  g += h;
  this._bl = b
    ? new cc.V3F_C4B_T2F(b.vertices, b.colors, b.texCoords, f, g)
    : new cc.V3F_C4B_T2F(null, null, null, f, g);
  g += h;
  this._tr = d
    ? new cc.V3F_C4B_T2F(d.vertices, d.colors, d.texCoords, f, g)
    : new cc.V3F_C4B_T2F(null, null, null, f, g);
  g += h;
  this._br = e
    ? new cc.V3F_C4B_T2F(e.vertices, e.colors, e.texCoords, f, g)
    : new cc.V3F_C4B_T2F(null, null, null, f, g);
};
cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT = 96;
_p = cc.V3F_C4B_T2F_Quad.prototype;
_p._getTL = function () {
  return this._tl;
};
_p._setTL = function (a) {
  var b = this._tl;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getBL = function () {
  return this._bl;
};
_p._setBL = function (a) {
  var b = this._bl;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getTR = function () {
  return this._tr;
};
_p._setTR = function (a) {
  var b = this._tr;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getBR = function () {
  return this._br;
};
_p._setBR = function (a) {
  var b = this._br;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getArrayBuffer = function () {
  return this._arrayBuffer;
};
cc.defineGetterSetter(_p, "tl", _p._getTL, _p._setTL);
cc.defineGetterSetter(_p, "tr", _p._getTR, _p._setTR);
cc.defineGetterSetter(_p, "bl", _p._getBL, _p._setBL);
cc.defineGetterSetter(_p, "br", _p._getBR, _p._setBR);
cc.defineGetterSetter(_p, "arrayBuffer", _p._getArrayBuffer, null);
cc.V3F_C4B_T2F_QuadZero = function () {
  return new cc.V3F_C4B_T2F_Quad();
};
cc.V3F_C4B_T2F_QuadCopy = function (a) {
  if (!a) return cc.V3F_C4B_T2F_QuadZero();
  var b = a.tl,
    d = a.bl,
    e = a.tr;
  a = a.br;
  return {
    tl: {
      vertices: { x: b.vertices.x, y: b.vertices.y, z: b.vertices.z },
      colors: { r: b.colors.r, g: b.colors.g, b: b.colors.b, a: b.colors.a },
      texCoords: { u: b.texCoords.u, v: b.texCoords.v },
    },
    bl: {
      vertices: { x: d.vertices.x, y: d.vertices.y, z: d.vertices.z },
      colors: { r: d.colors.r, g: d.colors.g, b: d.colors.b, a: d.colors.a },
      texCoords: { u: d.texCoords.u, v: d.texCoords.v },
    },
    tr: {
      vertices: { x: e.vertices.x, y: e.vertices.y, z: e.vertices.z },
      colors: { r: e.colors.r, g: e.colors.g, b: e.colors.b, a: e.colors.a },
      texCoords: { u: e.texCoords.u, v: e.texCoords.v },
    },
    br: {
      vertices: { x: a.vertices.x, y: a.vertices.y, z: a.vertices.z },
      colors: { r: a.colors.r, g: a.colors.g, b: a.colors.b, a: a.colors.a },
      texCoords: { u: a.texCoords.u, v: a.texCoords.v },
    },
  };
};
cc.V3F_C4B_T2F_QuadsCopy = function (a) {
  if (!a) return [];
  for (var b = [], d = 0; d < a.length; d++)
    b.push(cc.V3F_C4B_T2F_QuadCopy(a[d]));
  return b;
};
cc.V2F_C4B_T2F = function (a, b, d, e, f) {
  this._arrayBuffer = e || new ArrayBuffer(cc.V2F_C4B_T2F.BYTES_PER_ELEMENT);
  this._offset = f || 0;
  e = this._arrayBuffer;
  f = this._offset;
  this._vertices = a
    ? new cc.Vertex2F(a.x, a.y, e, f)
    : new cc.Vertex2F(0, 0, e, f);
  f += cc.Vertex2F.BYTES_PER_ELEMENT;
  this._colors = b
    ? new cc._WebGLColor(b.r, b.g, b.b, b.a, e, f)
    : new cc._WebGLColor(0, 0, 0, 0, e, f);
  f += cc._WebGLColor.BYTES_PER_ELEMENT;
  this._texCoords = d ? new cc.Tex2F(d.u, d.v, e, f) : new cc.Tex2F(0, 0, e, f);
};
cc.V2F_C4B_T2F.BYTES_PER_ELEMENT = 20;
_p = cc.V2F_C4B_T2F.prototype;
_p._getVertices = function () {
  return this._vertices;
};
_p._setVertices = function (a) {
  this._vertices._view[0] = a.x;
  this._vertices._view[1] = a.y;
};
_p._getColor = function () {
  return this._colors;
};
_p._setColor = function (a) {
  var b = this._colors;
  b._view[0] = a.r;
  b._view[1] = a.g;
  b._view[2] = a.b;
  b._view[3] = a.a;
};
_p._getTexCoords = function () {
  return this._texCoords;
};
_p._setTexCoords = function (a) {
  this._texCoords._view[0] = a.u;
  this._texCoords._view[1] = a.v;
};
cc.defineGetterSetter(_p, "vertices", _p._getVertices, _p._setVertices);
cc.defineGetterSetter(_p, "colors", _p._getColor, _p._setColor);
cc.defineGetterSetter(_p, "texCoords", _p._getTexCoords, _p._setTexCoords);
cc.V2F_C4B_T2F_Triangle = function (a, b, d, e, f) {
  this._arrayBuffer =
    e || new ArrayBuffer(cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT);
  this._offset = f || 0;
  e = this._arrayBuffer;
  f = this._offset;
  var g = cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;
  this._a = a
    ? new cc.V2F_C4B_T2F(a.vertices, a.colors, a.texCoords, e, f)
    : new cc.V2F_C4B_T2F(null, null, null, e, f);
  f += g;
  this._b = b
    ? new cc.V2F_C4B_T2F(b.vertices, b.colors, b.texCoords, e, f)
    : new cc.V2F_C4B_T2F(null, null, null, e, f);
  f += g;
  this._c = d
    ? new cc.V2F_C4B_T2F(d.vertices, d.colors, d.texCoords, e, f)
    : new cc.V2F_C4B_T2F(null, null, null, e, f);
};
cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT = 60;
_p = cc.V2F_C4B_T2F_Triangle.prototype;
_p._getA = function () {
  return this._a;
};
_p._setA = function (a) {
  var b = this._a;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getB = function () {
  return this._b;
};
_p._setB = function (a) {
  var b = this._b;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
_p._getC = function () {
  return this._c;
};
_p._setC = function (a) {
  var b = this._c;
  b.vertices = a.vertices;
  b.colors = a.colors;
  b.texCoords = a.texCoords;
};
cc.defineGetterSetter(_p, "a", _p._getA, _p._setA);
cc.defineGetterSetter(_p, "b", _p._getB, _p._setB);
cc.defineGetterSetter(_p, "c", _p._getC, _p._setC);
cc.vertex2 = function (a, b) {
  return new cc.Vertex2F(a, b);
};
cc.vertex3 = function (a, b, d) {
  return new cc.Vertex3F(a, b, d);
};
cc.tex2 = function (a, b) {
  return new cc.Tex2F(a, b);
};
cc.BlendFunc = function (a, b) {
  this.src = a;
  this.dst = b;
};
cc.blendFuncDisable = function () {
  return new cc.BlendFunc(cc.ONE, cc.ZERO);
};
cc.hexToColor = function (a) {
  a = a.replace(/^#?/, "0x");
  a = parseInt(a);
  return new cc.Color(a >> 16, (a >> 8) % 256, a % 256);
};
cc.colorToHex = function (a) {
  var b = a.r.toString(16),
    d = a.g.toString(16),
    e = a.b.toString(16);
  return (
    "#" +
    (16 > a.r ? "0" + b : b) +
    (16 > a.g ? "0" + d : d) +
    (16 > a.b ? "0" + e : e)
  );
};
cc.TEXT_ALIGNMENT_LEFT = 0;
cc.TEXT_ALIGNMENT_CENTER = 1;
cc.TEXT_ALIGNMENT_RIGHT = 2;
cc.VERTICAL_TEXT_ALIGNMENT_TOP = 0;
cc.VERTICAL_TEXT_ALIGNMENT_CENTER = 1;
cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM = 2;
cc._Dictionary = cc.Class.extend({
  _keyMapTb: null,
  _valueMapTb: null,
  __currId: 0,
  ctor: function () {
    this._keyMapTb = {};
    this._valueMapTb = {};
    this.__currId = 2 << (0 | (10 * Math.random()));
  },
  __getKey: function () {
    this.__currId++;
    return "key_" + this.__currId;
  },
  setObject: function (a, b) {
    if (null != b) {
      var d = this.__getKey();
      this._keyMapTb[d] = b;
      this._valueMapTb[d] = a;
    }
  },
  objectForKey: function (a) {
    if (null == a) return null;
    var b = this._keyMapTb,
      d;
    for (d in b) if (b[d] === a) return this._valueMapTb[d];
    return null;
  },
  valueForKey: function (a) {
    return this.objectForKey(a);
  },
  removeObjectForKey: function (a) {
    if (null != a) {
      var b = this._keyMapTb,
        d;
      for (d in b)
        if (b[d] === a) {
          delete this._valueMapTb[d];
          delete b[d];
          break;
        }
    }
  },
  removeObjectsForKeys: function (a) {
    if (null != a)
      for (var b = 0; b < a.length; b++) this.removeObjectForKey(a[b]);
  },
  allKeys: function () {
    var a = [],
      b = this._keyMapTb,
      d;
    for (d in b) a.push(b[d]);
    return a;
  },
  removeAllObjects: function () {
    this._keyMapTb = {};
    this._valueMapTb = {};
  },
  count: function () {
    return this.allKeys().length;
  },
});
cc.FontDefinition = function (a) {
  this.fontName = "Arial";
  this.fontSize = 12;
  this.textAlign = cc.TEXT_ALIGNMENT_CENTER;
  this.verticalAlign = cc.VERTICAL_TEXT_ALIGNMENT_TOP;
  this.fillStyle = cc.color(255, 255, 255, 255);
  this.boundingHeight = this.boundingWidth = 0;
  this.strokeEnabled = !1;
  this.strokeStyle = cc.color(255, 255, 255, 255);
  this.lineWidth = 1;
  this.fontWeight = this.fontStyle = this.lineHeight = "normal";
  this.shadowEnabled = !1;
  this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0;
  this.shadowOpacity = 1;
  if (a && a instanceof Object) for (var b in a) this[b] = a[b];
};
cc.FontDefinition.prototype._getCanvasFontStr = function () {
  return (
    this.fontStyle +
    " " +
    this.fontWeight +
    " " +
    this.fontSize +
    "px/" +
    (this.lineHeight.charAt ? this.lineHeight : this.lineHeight + "px") +
    " '" +
    this.fontName +
    "'"
  );
};
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
    ((cc._WebGLColor = function (a, b, d, e, f, g) {
      this._arrayBuffer =
        f || new ArrayBuffer(cc._WebGLColor.BYTES_PER_ELEMENT);
      this._offset = g || 0;
      this._view = new Uint8Array(this._arrayBuffer, this._offset, 4);
      this._view[0] = a || 0;
      this._view[1] = b || 0;
      this._view[2] = d || 0;
      this._view[3] = null == e ? 255 : e;
      void 0 === e && (this.a_undefined = !0);
    }),
    (cc._WebGLColor.BYTES_PER_ELEMENT = 4),
    (_p = cc._WebGLColor.prototype),
    (_p._getR = function () {
      return this._view[0];
    }),
    (_p._setR = function (a) {
      this._view[0] = 0 > a ? 0 : a;
    }),
    (_p._getG = function () {
      return this._view[1];
    }),
    (_p._setG = function (a) {
      this._view[1] = 0 > a ? 0 : a;
    }),
    (_p._getB = function () {
      return this._view[2];
    }),
    (_p._setB = function (a) {
      this._view[2] = 0 > a ? 0 : a;
    }),
    (_p._getA = function () {
      return this._view[3];
    }),
    (_p._setA = function (a) {
      this._view[3] = 0 > a ? 0 : a;
    }),
    cc.defineGetterSetter(_p, "r", _p._getR, _p._setR),
    cc.defineGetterSetter(_p, "g", _p._getG, _p._setG),
    cc.defineGetterSetter(_p, "b", _p._getB, _p._setB),
    cc.defineGetterSetter(_p, "a", _p._getA, _p._setA));
});
_p = cc.color;
_p._getWhite = function () {
  return cc.color(255, 255, 255);
};
_p._getYellow = function () {
  return cc.color(255, 255, 0);
};
_p._getBlue = function () {
  return cc.color(0, 0, 255);
};
_p._getGreen = function () {
  return cc.color(0, 255, 0);
};
_p._getRed = function () {
  return cc.color(255, 0, 0);
};
_p._getMagenta = function () {
  return cc.color(255, 0, 255);
};
_p._getBlack = function () {
  return cc.color(0, 0, 0);
};
_p._getOrange = function () {
  return cc.color(255, 127, 0);
};
_p._getGray = function () {
  return cc.color(166, 166, 166);
};
cc.defineGetterSetter(_p, "WHITE", _p._getWhite);
cc.defineGetterSetter(_p, "YELLOW", _p._getYellow);
cc.defineGetterSetter(_p, "BLUE", _p._getBlue);
cc.defineGetterSetter(_p, "GREEN", _p._getGreen);
cc.defineGetterSetter(_p, "RED", _p._getRed);
cc.defineGetterSetter(_p, "MAGENTA", _p._getMagenta);
cc.defineGetterSetter(_p, "BLACK", _p._getBlack);
cc.defineGetterSetter(_p, "ORANGE", _p._getOrange);
cc.defineGetterSetter(_p, "GRAY", _p._getGray);
cc.BlendFunc._disable = function () {
  return new cc.BlendFunc(cc.ONE, cc.ZERO);
};
cc.BlendFunc._alphaPremultiplied = function () {
  return new cc.BlendFunc(cc.ONE, cc.ONE_MINUS_SRC_ALPHA);
};
cc.BlendFunc._alphaNonPremultiplied = function () {
  return new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
};
cc.BlendFunc._additive = function () {
  return new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE);
};
cc.defineGetterSetter(cc.BlendFunc, "DISABLE", cc.BlendFunc._disable);
cc.defineGetterSetter(
  cc.BlendFunc,
  "ALPHA_PREMULTIPLIED",
  cc.BlendFunc._alphaPremultiplied
);
cc.defineGetterSetter(
  cc.BlendFunc,
  "ALPHA_NON_PREMULTIPLIED",
  cc.BlendFunc._alphaNonPremultiplied
);
cc.defineGetterSetter(cc.BlendFunc, "ADDITIVE", cc.BlendFunc._additive);
cc.Touches = [];
cc.TouchesIntergerDict = {};
cc.DENSITYDPI_DEVICE = "device-dpi";
cc.DENSITYDPI_HIGH = "high-dpi";
cc.DENSITYDPI_MEDIUM = "medium-dpi";
cc.DENSITYDPI_LOW = "low-dpi";
var __BrowserGetter = {
  init: function () {
    this.html = document.documentElement;
  },
  availWidth: function (a) {
    return a && a !== this.html ? a.clientWidth : window.innerWidth;
  },
  availHeight: function (a) {
    return a && a !== this.html ? a.clientHeight : window.innerHeight;
  },
  meta: { width: "device-width" },
  adaptationType: cc.sys.browserType,
};
-1 < window.navigator.userAgent.indexOf("OS 8_1_") &&
  (__BrowserGetter.adaptationType = cc.sys.BROWSER_TYPE_MIUI);
cc.sys.os === cc.sys.OS_IOS &&
  (__BrowserGetter.adaptationType = cc.sys.BROWSER_TYPE_SAFARI);
switch (__BrowserGetter.adaptationType) {
  case cc.sys.BROWSER_TYPE_SAFARI:
    __BrowserGetter.meta["minimal-ui"] = "true";
    break;
  case cc.sys.BROWSER_TYPE_CHROME:
    __BrowserGetter.__defineGetter__("target-densitydpi", function () {
      return cc.view._targetDensityDPI;
    });
    break;
  case cc.sys.BROWSER_TYPE_MIUI:
    __BrowserGetter.init = function (a) {
      if (!a.__resizeWithBrowserSize) {
        var b = function () {
          a.setDesignResolutionSize(
            a._designResolutionSize.width,
            a._designResolutionSize.height,
            a._resolutionPolicy
          );
          window.removeEventListener("resize", b, !1);
        };
        window.addEventListener("resize", b, !1);
      }
    };
}
var _scissorRect = null;
cc.EGLView = cc.Class.extend({
  _delegate: null,
  _frameSize: null,
  _designResolutionSize: null,
  _originalDesignResolutionSize: null,
  _viewPortRect: null,
  _visibleRect: null,
  _retinaEnabled: !1,
  _autoFullScreen: !1,
  _devicePixelRatio: 1,
  _viewName: "",
  _resizeCallback: null,
  _orientationChanging: !0,
  _resizing: !1,
  _scaleX: 1,
  _originalScaleX: 1,
  _scaleY: 1,
  _originalScaleY: 1,
  _isRotated: !1,
  _orientation: 3,
  _resolutionPolicy: null,
  _rpExactFit: null,
  _rpShowAll: null,
  _rpNoBorder: null,
  _rpFixedHeight: null,
  _rpFixedWidth: null,
  _initialized: !1,
  _contentTranslateLeftTop: null,
  _frame: null,
  _frameZoomFactor: 1,
  __resizeWithBrowserSize: !1,
  _isAdjustViewPort: !0,
  _targetDensityDPI: null,
  ctor: function () {
    var a = document,
      b = cc.ContainerStrategy,
      d = cc.ContentStrategy;
    __BrowserGetter.init(this);
    this._frame =
      cc.container.parentNode === a.body
        ? a.documentElement
        : cc.container.parentNode;
    this._frameSize = cc.size(0, 0);
    this._initFrameSize();
    var a = cc._canvas.width,
      e = cc._canvas.height;
    this._designResolutionSize = cc.size(a, e);
    this._originalDesignResolutionSize = cc.size(a, e);
    this._viewPortRect = cc.rect(0, 0, a, e);
    this._visibleRect = cc.rect(0, 0, a, e);
    this._contentTranslateLeftTop = { left: 0, top: 0 };
    this._viewName = "Cocos2dHTML5";
    a = cc.sys;
    cc.visibleRect && cc.visibleRect.init(this._visibleRect);
    this._rpExactFit = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME, d.EXACT_FIT);
    this._rpShowAll = new cc.ResolutionPolicy(
      b.PROPORTION_TO_FRAME,
      d.SHOW_ALL
    );
    this._rpNoBorder = new cc.ResolutionPolicy(b.EQUAL_TO_FRAME, d.NO_BORDER);
    this._rpFixedHeight = new cc.ResolutionPolicy(
      b.EQUAL_TO_FRAME,
      d.FIXED_HEIGHT
    );
    this._rpFixedWidth = new cc.ResolutionPolicy(
      b.EQUAL_TO_FRAME,
      d.FIXED_WIDTH
    );
    this._targetDensityDPI = cc.DENSITYDPI_HIGH;
    a.isMobile &&
      window.addEventListener("orientationchange", this._orientationChange);
  },
  _resizeEvent: function () {
    var a;
    a = this.setDesignResolutionSize ? this : cc.view;
    if (!a._orientationChanging) {
      var b = a._frameSize.width,
        d = a._frameSize.height,
        e = a._isRotated;
      if (cc.sys.isMobile) {
        var f = cc.game.container.style,
          g = f.margin;
        f.margin = "0";
        f.display = "none";
        a._initFrameSize();
        f.margin = g;
        f.display = "block";
      } else a._initFrameSize();
      if (
        a._isRotated !== e ||
        a._frameSize.width !== b ||
        a._frameSize.height !== d
      )
        (b = a._originalDesignResolutionSize.width),
          (d = a._originalDesignResolutionSize.height),
          (a._resizing = !0),
          0 < b && a.setDesignResolutionSize(b, d, a._resolutionPolicy),
          (a._resizing = !1),
          cc.eventManager.dispatchCustomEvent("canvas-resize"),
          a._resizeCallback && a._resizeCallback.call();
    }
  },
  _orientationChange: function () {
    cc.view._orientationChanging = !0;
    cc.sys.isMobile && (cc.game.container.style.display = "none");
    setTimeout(function () {
      cc.view._orientationChanging = !1;
      cc.view._resizeEvent();
    }, 300);
  },
  setTargetDensityDPI: function (a) {
    this._targetDensityDPI = a;
    this._adjustViewportMeta();
  },
  getTargetDensityDPI: function () {
    return this._targetDensityDPI;
  },
  resizeWithBrowserSize: function (a) {
    a
      ? this.__resizeWithBrowserSize ||
        ((this.__resizeWithBrowserSize = !0),
        window.addEventListener("resize", this._resizeEvent))
      : this.__resizeWithBrowserSize &&
        ((this.__resizeWithBrowserSize = !1),
        window.removeEventListener("resize", this._resizeEvent));
  },
  setResizeCallback: function (a) {
    if ("function" === typeof a || null == a) this._resizeCallback = a;
  },
  setOrientation: function (a) {
    (a &= cc.ORIENTATION_AUTO) &&
      this._orientation !== a &&
      ((this._orientation = a),
      this._resolutionPolicy &&
        this.setDesignResolutionSize(
          this._originalDesignResolutionSize.width,
          this._originalDesignResolutionSize.height,
          this._resolutionPolicy
        ));
  },
  setDocumentPixelWidth: function (a) {
    this._setViewportMeta({ width: a }, !0);
    document.documentElement.style.width = a + "px";
    document.body.style.width = "100%";
    this.setDesignResolutionSize(
      this._designResolutionSize.width,
      this._designResolutionSize.height,
      this._resolutionPolicy
    );
  },
  _initFrameSize: function () {
    var a = this._frameSize,
      b = __BrowserGetter.availWidth(this._frame),
      d = __BrowserGetter.availHeight(this._frame),
      e = b >= d;
    !cc.sys.isMobile ||
    (e && this._orientation & cc.ORIENTATION_LANDSCAPE) ||
    (!e && this._orientation & cc.ORIENTATION_PORTRAIT)
      ? ((a.width = b),
        (a.height = d),
        (cc.container.style["-webkit-transform"] = "rotate(0deg)"),
        (cc.container.style.transform = "rotate(0deg)"),
        (this._isRotated = !1))
      : ((a.width = d),
        (a.height = b),
        (cc.container.style["-webkit-transform"] = "rotate(90deg)"),
        (cc.container.style.transform = "rotate(90deg)"),
        (cc.container.style["-webkit-transform-origin"] = "0px 0px 0px"),
        (cc.container.style.transformOrigin = "0px 0px 0px"),
        (this._isRotated = !0));
  },
  _adjustSizeKeepCanvasSize: function () {
    var a = this._originalDesignResolutionSize.width,
      b = this._originalDesignResolutionSize.height;
    0 < a && this.setDesignResolutionSize(a, b, this._resolutionPolicy);
  },
  _setViewportMeta: function (a, b) {
    var d = document.getElementById("cocosMetaElement");
    d && b && document.head.removeChild(d);
    var e = document.getElementsByName("viewport"),
      e = e ? e[0] : null,
      f,
      g,
      h;
    f = e ? e.content : "";
    d = d || document.createElement("meta");
    d.id = "cocosMetaElement";
    d.name = "viewport";
    d.content = "";
    for (g in a)
      -1 == f.indexOf(g)
        ? (f += "," + g + "\x3d" + a[g])
        : b &&
          ((h = RegExp(g + "s*\x3ds*[^,]+")), f.replace(h, g + "\x3d" + a[g]));
    /^,/.test(f) && (f = f.substr(1));
    d.content = f;
    e && (e.content = f);
    document.head.appendChild(d);
  },
  _adjustViewportMeta: function () {
    this._isAdjustViewPort &&
      (this._setViewportMeta(__BrowserGetter.meta, !1),
      (this._isAdjustViewPort = !1));
  },
  _setScaleXYForRenderTexture: function () {
    var a = cc.contentScaleFactor();
    this._scaleY = this._scaleX = a;
  },
  _resetScale: function () {
    this._scaleX = this._originalScaleX;
    this._scaleY = this._originalScaleY;
  },
  _adjustSizeToBrowser: function () {},
  initialize: function () {
    this._initialized = !0;
  },
  adjustViewPort: function (a) {
    this._isAdjustViewPort = a;
  },
  enableRetina: function (a) {
    this._retinaEnabled = !!a;
  },
  isRetinaEnabled: function () {
    return this._retinaEnabled;
  },
  enableAutoFullScreen: function (a) {
    a &&
    a !== this._autoFullScreen &&
    cc.sys.isMobile &&
    this._frame === document.documentElement
      ? ((this._autoFullScreen = !0), cc.screen.autoFullScreen(this._frame))
      : (this._autoFullScreen = !1);
  },
  isAutoFullScreenEnabled: function () {
    return this._autoFullScreen;
  },
  isOpenGLReady: function () {
    return cc.game.canvas && cc._renderContext;
  },
  setFrameZoomFactor: function (a) {
    this._frameZoomFactor = a;
    this.centerWindow();
    cc.director.setProjection(cc.director.getProjection());
  },
  swapBuffers: function () {},
  setIMEKeyboardState: function (a) {},
  setContentTranslateLeftTop: function (a, b) {
    this._contentTranslateLeftTop = { left: a, top: b };
  },
  getContentTranslateLeftTop: function () {
    return this._contentTranslateLeftTop;
  },
  getCanvasSize: function () {
    return cc.size(cc._canvas.width, cc._canvas.height);
  },
  getFrameSize: function () {
    return cc.size(this._frameSize.width, this._frameSize.height);
  },
  setFrameSize: function (a, b) {
    this._frameSize.width = a;
    this._frameSize.height = b;
    this._frame.style.width = a + "px";
    this._frame.style.height = b + "px";
    this._resizeEvent();
    cc.director.setProjection(cc.director.getProjection());
  },
  getVisibleSize: function () {
    return cc.size(this._visibleRect.width, this._visibleRect.height);
  },
  getVisibleSizeInPixel: function () {
    return cc.size(
      this._visibleRect.width * this._scaleX,
      this._visibleRect.height * this._scaleY
    );
  },
  getVisibleOrigin: function () {
    return cc.p(this._visibleRect.x, this._visibleRect.y);
  },
  getVisibleOriginInPixel: function () {
    return cc.p(
      this._visibleRect.x * this._scaleX,
      this._visibleRect.y * this._scaleY
    );
  },
  canSetContentScaleFactor: function () {
    return !0;
  },
  getResolutionPolicy: function () {
    return this._resolutionPolicy;
  },
  setResolutionPolicy: function (a) {
    if (a instanceof cc.ResolutionPolicy) this._resolutionPolicy = a;
    else {
      var b = cc.ResolutionPolicy;
      a === b.EXACT_FIT && (this._resolutionPolicy = this._rpExactFit);
      a === b.SHOW_ALL && (this._resolutionPolicy = this._rpShowAll);
      a === b.NO_BORDER && (this._resolutionPolicy = this._rpNoBorder);
      a === b.FIXED_HEIGHT && (this._resolutionPolicy = this._rpFixedHeight);
      a === b.FIXED_WIDTH && (this._resolutionPolicy = this._rpFixedWidth);
    }
  },
  setDesignResolutionSize: function (a, b, d) {
    if (0 < a || 0 < b)
      if (
        (this.setResolutionPolicy(d),
        (d = this._resolutionPolicy) && d.preApply(this),
        cc.sys.isMobile && this._adjustViewportMeta(),
        this._resizing || this._initFrameSize(),
        d)
      ) {
        this._originalDesignResolutionSize.width = this._designResolutionSize.width = a;
        this._originalDesignResolutionSize.height = this._designResolutionSize.height = b;
        var e = d.apply(this, this._designResolutionSize);
        e.scale &&
          2 === e.scale.length &&
          ((this._scaleX = e.scale[0]), (this._scaleY = e.scale[1]));
        e.viewport &&
          ((a = this._viewPortRect),
          (b = this._visibleRect),
          (e = e.viewport),
          (a.x = e.x),
          (a.y = e.y),
          (a.width = e.width),
          (a.height = e.height),
          (b.x = -a.x / this._scaleX),
          (b.y = -a.y / this._scaleY),
          (b.width = cc._canvas.width / this._scaleX),
          (b.height = cc._canvas.height / this._scaleY),
          cc._renderContext.setOffset &&
            cc._renderContext.setOffset(a.x, -a.y));
        a = cc.director;
        a._winSizeInPoints.width = this._designResolutionSize.width;
        a._winSizeInPoints.height = this._designResolutionSize.height;
        d.postApply(this);
        cc.winSize.width = a._winSizeInPoints.width;
        cc.winSize.height = a._winSizeInPoints.height;
        cc._renderType === cc.game.RENDER_TYPE_WEBGL
          ? a.setGLDefaultValues()
          : cc._renderType === cc.game.RENDER_TYPE_CANVAS &&
            (cc.renderer._allNeedDraw = !0);
        this._originalScaleX = this._scaleX;
        this._originalScaleY = this._scaleY;
        cc.visibleRect && cc.visibleRect.init(this._visibleRect);
      } else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2);
    else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize);
  },
  getDesignResolutionSize: function () {
    return cc.size(
      this._designResolutionSize.width,
      this._designResolutionSize.height
    );
  },
  setRealPixelResolution: function (a, b, d) {
    this._setViewportMeta({ width: a }, !0);
    document.documentElement.style.width = a + "px";
    document.body.style.width = a + "px";
    document.body.style.left = "0px";
    document.body.style.top = "0px";
    this.setDesignResolutionSize(a, b, d);
  },
  setViewPortInPoints: function (a, b, d, e) {
    var f = this._frameZoomFactor,
      g = this._scaleX,
      h = this._scaleY;
    cc._renderContext.viewport(
      a * g * f + this._viewPortRect.x * f,
      b * h * f + this._viewPortRect.y * f,
      d * g * f,
      e * h * f
    );
  },
  setScissorInPoints: function (a, b, d, e) {
    var f = this._frameZoomFactor,
      g = this._scaleX,
      h = this._scaleY;
    a = Math.ceil(a * g * f + this._viewPortRect.x * f);
    b = Math.ceil(b * h * f + this._viewPortRect.y * f);
    d = Math.ceil(d * g * f);
    e = Math.ceil(e * h * f);
    _scissorRect ||
      ((f = gl.getParameter(gl.SCISSOR_BOX)),
      (_scissorRect = cc.rect(f[0], f[1], f[2], f[3])));
    if (
      _scissorRect.x != a ||
      _scissorRect.y != b ||
      _scissorRect.width != d ||
      _scissorRect.height != e
    )
      (_scissorRect.x = a),
        (_scissorRect.y = b),
        (_scissorRect.width = d),
        (_scissorRect.height = e),
        cc._renderContext.scissor(a, b, d, e);
  },
  isScissorEnabled: function () {
    return cc._renderContext.isEnabled(gl.SCISSOR_TEST);
  },
  getScissorRect: function () {
    if (!_scissorRect) {
      var a = gl.getParameter(gl.SCISSOR_BOX);
      _scissorRect = cc.rect(a[0], a[1], a[2], a[3]);
    }
    var a = 1 / this._scaleX,
      b = 1 / this._scaleY;
    return cc.rect(
      (_scissorRect.x - this._viewPortRect.x) * a,
      (_scissorRect.y - this._viewPortRect.y) * b,
      _scissorRect.width * a,
      _scissorRect.height * b
    );
  },
  setViewName: function (a) {
    null != a && 0 < a.length && (this._viewName = a);
  },
  getViewName: function () {
    return this._viewName;
  },
  getViewPortRect: function () {
    return this._viewPortRect;
  },
  getScaleX: function () {
    return this._scaleX;
  },
  getScaleY: function () {
    return this._scaleY;
  },
  getDevicePixelRatio: function () {
    return this._devicePixelRatio;
  },
  convertToLocationInView: function (a, b, d) {
    a = this._devicePixelRatio * (a - d.left);
    b = this._devicePixelRatio * (d.top + d.height - b);
    return this._isRotated
      ? { x: this._viewPortRect.width - b, y: a }
      : { x: a, y: b };
  },
  _convertMouseToLocationInView: function (a, b) {
    var d = this._viewPortRect;
    a.x = (this._devicePixelRatio * (a.x - b.left) - d.x) / this._scaleX;
    a.y =
      (this._devicePixelRatio * (b.top + b.height - a.y) - d.y) / this._scaleY;
  },
  _convertPointWithScale: function (a) {
    var b = this._viewPortRect;
    a.x = (a.x - b.x) / this._scaleX;
    a.y = (a.y - b.y) / this._scaleY;
  },
  _convertTouchesWithScale: function (a) {
    for (
      var b = this._viewPortRect,
        d = this._scaleX,
        e = this._scaleY,
        f,
        g,
        h = 0;
      h < a.length;
      h++
    )
      (f = a[h]),
        (g = f._point),
        (f = f._prevPoint),
        (g.x = (g.x - b.x) / d),
        (g.y = (g.y - b.y) / e),
        (f.x = (f.x - b.x) / d),
        (f.y = (f.y - b.y) / e);
  },
});
cc.EGLView._getInstance = function () {
  this._instance ||
    ((this._instance = this._instance || new cc.EGLView()),
    this._instance.initialize());
  return this._instance;
};
cc.ContainerStrategy = cc.Class.extend({
  preApply: function (a) {},
  apply: function (a, b) {},
  postApply: function (a) {},
  _setupContainer: function (a, b, d) {
    var e = cc.game.canvas,
      f = cc.game.container;
    cc.sys.os === cc.sys.OS_ANDROID &&
      ((document.body.style.width = (a._isRotated ? d : b) + "px"),
      (document.body.style.height = (a._isRotated ? b : d) + "px"));
    f.style.width = e.style.width = b + "px";
    f.style.height = e.style.height = d + "px";
    f = a._devicePixelRatio = 1;
    a.isRetinaEnabled() &&
      (f = a._devicePixelRatio = Math.min(2, window.devicePixelRatio || 1));
    e.width = b * f;
    e.height = d * f;
    cc._renderContext.resetCache && cc._renderContext.resetCache();
  },
  _fixContainer: function () {
    document.body.insertBefore(cc.container, document.body.firstChild);
    var a = document.body.style;
    a.width = window.innerWidth + "px";
    a.height = window.innerHeight + "px";
    a.overflow = "hidden";
    a = cc.container.style;
    a.position = "fixed";
    a.left = a.top = "0px";
    document.body.scrollTop = 0;
  },
});
cc.ContentStrategy = cc.Class.extend({
  _result: { scale: [1, 1], viewport: null },
  _buildResult: function (a, b, d, e, f, g) {
    2 > Math.abs(a - d) && (d = a);
    2 > Math.abs(b - e) && (e = b);
    a = cc.rect(Math.round((a - d) / 2), Math.round((b - e) / 2), d, e);
    this._result.scale = [f, g];
    this._result.viewport = a;
    return this._result;
  },
  preApply: function (a) {},
  apply: function (a, b) {
    return { scale: [1, 1] };
  },
  postApply: function (a) {},
});
(function () {
  var a = cc.ContainerStrategy.extend({
      apply: function (a) {
        var b = a._frameSize.height,
          d = cc.container.style;
        this._setupContainer(a, a._frameSize.width, a._frameSize.height);
        d.margin = a._isRotated ? "0 0 0 " + b + "px" : "0px";
      },
    }),
    b = cc.ContainerStrategy.extend({
      apply: function (a, b) {
        var d = a._frameSize.width,
          e = a._frameSize.height,
          f = cc.container.style,
          p = b.width,
          r = b.height,
          s = d / p,
          u = e / r,
          v,
          t;
        s < u ? ((v = d), (t = r * s)) : ((v = p * u), (t = e));
        p = Math.round((d - v) / 2);
        t = Math.round((e - t) / 2);
        this._setupContainer(a, d - 2 * p, e - 2 * t);
        f.margin = a._isRotated ? "0 0 0 " + e + "px" : "0px";
        f.paddingLeft = p + "px";
        f.paddingRight = p + "px";
        f.paddingTop = t + "px";
        f.paddingBottom = t + "px";
      },
    });
  a.extend({
    preApply: function (a) {
      this._super(a);
      a._frame = document.documentElement;
    },
    apply: function (a) {
      this._super(a);
      this._fixContainer();
    },
  });
  b.extend({
    preApply: function (a) {
      this._super(a);
      a._frame = document.documentElement;
    },
    apply: function (a, b) {
      this._super(a, b);
      this._fixContainer();
    },
  });
  var d = cc.ContainerStrategy.extend({
    apply: function (a) {
      this._setupContainer(a, cc._canvas.width, cc._canvas.height);
    },
  });
  cc.ContainerStrategy.EQUAL_TO_FRAME = new a();
  cc.ContainerStrategy.PROPORTION_TO_FRAME = new b();
  cc.ContainerStrategy.ORIGINAL_CONTAINER = new d();
  var a = cc.ContentStrategy.extend({
      apply: function (a, b) {
        var d = cc._canvas.width,
          e = cc._canvas.height;
        return this._buildResult(d, e, d, e, d / b.width, e / b.height);
      },
    }),
    b = cc.ContentStrategy.extend({
      apply: function (a, b) {
        var d = cc._canvas.width,
          e = cc._canvas.height,
          f = b.width,
          p = b.height,
          r = d / f,
          s = e / p,
          u = 0,
          v,
          t;
        r < s
          ? ((u = r), (v = d), (t = p * u))
          : ((u = s), (v = f * u), (t = e));
        return this._buildResult(d, e, v, t, u, u);
      },
    }),
    d = cc.ContentStrategy.extend({
      apply: function (a, b) {
        var d = cc._canvas.width,
          e = cc._canvas.height,
          f = b.width,
          p = b.height,
          r = d / f,
          s = e / p,
          u,
          v,
          t;
        r < s
          ? ((u = s), (v = f * u), (t = e))
          : ((u = r), (v = d), (t = p * u));
        return this._buildResult(d, e, v, t, u, u);
      },
    }),
    e = cc.ContentStrategy.extend({
      apply: function (a, b) {
        var d = cc._canvas.width,
          e = cc._canvas.height,
          f = e / b.height;
        return this._buildResult(d, e, d, e, f, f);
      },
      postApply: function (a) {
        cc.director._winSizeInPoints = a.getVisibleSize();
      },
    }),
    f = cc.ContentStrategy.extend({
      apply: function (a, b) {
        var d = cc._canvas.width,
          e = cc._canvas.height,
          f = d / b.width;
        return this._buildResult(d, e, d, e, f, f);
      },
      postApply: function (a) {
        cc.director._winSizeInPoints = a.getVisibleSize();
      },
    });
  cc.ContentStrategy.EXACT_FIT = new a();
  cc.ContentStrategy.SHOW_ALL = new b();
  cc.ContentStrategy.NO_BORDER = new d();
  cc.ContentStrategy.FIXED_HEIGHT = new e();
  cc.ContentStrategy.FIXED_WIDTH = new f();
})();
cc.ResolutionPolicy = cc.Class.extend({
  _containerStrategy: null,
  _contentStrategy: null,
  ctor: function (a, b) {
    this.setContainerStrategy(a);
    this.setContentStrategy(b);
  },
  preApply: function (a) {
    this._containerStrategy.preApply(a);
    this._contentStrategy.preApply(a);
  },
  apply: function (a, b) {
    this._containerStrategy.apply(a, b);
    return this._contentStrategy.apply(a, b);
  },
  postApply: function (a) {
    this._containerStrategy.postApply(a);
    this._contentStrategy.postApply(a);
  },
  setContainerStrategy: function (a) {
    a instanceof cc.ContainerStrategy && (this._containerStrategy = a);
  },
  setContentStrategy: function (a) {
    a instanceof cc.ContentStrategy && (this._contentStrategy = a);
  },
});
cc.ResolutionPolicy.EXACT_FIT = 0;
cc.ResolutionPolicy.NO_BORDER = 1;
cc.ResolutionPolicy.SHOW_ALL = 2;
cc.ResolutionPolicy.FIXED_HEIGHT = 3;
cc.ResolutionPolicy.FIXED_WIDTH = 4;
cc.ResolutionPolicy.UNKNOWN = 5;
cc.screen = {
  _supportsFullScreen: !1,
  _preOnFullScreenChange: null,
  _touchEvent: "",
  _fn: null,
  _fnMap: [
    [
      "requestFullscreen",
      "exitFullscreen",
      "fullscreenchange",
      "fullscreenEnabled",
      "fullscreenElement",
    ],
    [
      "requestFullScreen",
      "exitFullScreen",
      "fullScreenchange",
      "fullScreenEnabled",
      "fullScreenElement",
    ],
    [
      "webkitRequestFullScreen",
      "webkitCancelFullScreen",
      "webkitfullscreenchange",
      "webkitIsFullScreen",
      "webkitCurrentFullScreenElement",
    ],
    [
      "mozRequestFullScreen",
      "mozCancelFullScreen",
      "mozfullscreenchange",
      "mozFullScreen",
      "mozFullScreenElement",
    ],
    [
      "msRequestFullscreen",
      "msExitFullscreen",
      "MSFullscreenChange",
      "msFullscreenEnabled",
      "msFullscreenElement",
    ],
  ],
  init: function () {
    this._fn = {};
    var a,
      b,
      d = this._fnMap,
      e;
    a = 0;
    for (l = d.length; a < l; a++)
      if ((b = d[a]) && b[1] in document) {
        a = 0;
        for (e = b.length; a < e; a++) this._fn[d[0][a]] = b[a];
        break;
      }
    this._supportsFullScreen =
      "undefined" !== typeof this._fn.requestFullscreen;
    this._touchEvent = "ontouchstart" in window ? "touchstart" : "mousedown";
  },
  fullScreen: function () {
    return this._supportsFullScreen
      ? void 0 === document[this._fn.fullscreenElement] ||
        null === document[this._fn.fullscreenElement]
        ? !1
        : !0
      : !1;
  },
  requestFullScreen: function (a, b) {
    if (this._supportsFullScreen) {
      a = a || document.documentElement;
      if (b) {
        var d = this._fn.fullscreenchange;
        this._preOnFullScreenChange &&
          document.removeEventListener(d, this._preOnFullScreenChange);
        this._preOnFullScreenChange = b;
        document.addEventListener(d, b, !1);
      }
      return a[this._fn.requestFullscreen]();
    }
  },
  exitFullScreen: function () {
    return this._supportsFullScreen ? document[this._fn.exitFullscreen]() : !0;
  },
  autoFullScreen: function (a, b) {
    function d() {
      e.removeEventListener(f._touchEvent, d);
      f.requestFullScreen(a, b);
    }
    a = a || document.body;
    var e = cc.game.canvas || a,
      f = this;
    this.requestFullScreen(a, b);
    e.addEventListener(this._touchEvent, d);
  },
};
cc.screen.init();
cc.visibleRect = {
  topLeft: cc.p(0, 0),
  topRight: cc.p(0, 0),
  top: cc.p(0, 0),
  bottomLeft: cc.p(0, 0),
  bottomRight: cc.p(0, 0),
  bottom: cc.p(0, 0),
  center: cc.p(0, 0),
  left: cc.p(0, 0),
  right: cc.p(0, 0),
  width: 0,
  height: 0,
  init: function (a) {
    var b = (this.width = a.width),
      d = (this.height = a.height),
      e = a.x;
    a = a.y;
    var f = a + d,
      g = e + b;
    this.topLeft.x = e;
    this.topLeft.y = f;
    this.topRight.x = g;
    this.topRight.y = f;
    this.top.x = e + b / 2;
    this.top.y = f;
    this.bottomLeft.x = e;
    this.bottomLeft.y = a;
    this.bottomRight.x = g;
    this.bottomRight.y = a;
    this.bottom.x = e + b / 2;
    this.bottom.y = a;
    this.center.x = e + b / 2;
    this.center.y = a + d / 2;
    this.left.x = e;
    this.left.y = a + d / 2;
    this.right.x = g;
    this.right.y = a + d / 2;
  },
};
cc.UIInterfaceOrientationLandscapeLeft = -90;
cc.UIInterfaceOrientationLandscapeRight = 90;
cc.UIInterfaceOrientationPortraitUpsideDown = 180;
cc.UIInterfaceOrientationPortrait = 0;
cc.inputManager = {
  TOUCH_TIMEOUT: 5e3,
  _mousePressed: !1,
  _isRegisterEvent: !1,
  _preTouchPoint: cc.p(0, 0),
  _prevMousePoint: cc.p(0, 0),
  _preTouchPool: [],
  _preTouchPoolPointer: 0,
  _touches: [],
  _touchesIntegerDict: {},
  _indexBitsUsed: 0,
  _maxTouches: 5,
  _accelEnabled: !1,
  _accelInterval: 1 / 30,
  _accelMinus: 1,
  _accelCurTime: 0,
  _acceleration: null,
  _accelDeviceEvent: null,
  _getUnUsedIndex: function () {
    for (
      var a = this._indexBitsUsed, b = cc.sys.now(), d = 0;
      d < this._maxTouches;
      d++
    ) {
      if (a & 1) {
        var e = this._touches[d];
        if (b - e._lastModified > this.TOUCH_TIMEOUT)
          return (
            this._removeUsedIndexBit(d),
            delete this._touchesIntegerDict[e.getID()],
            d
          );
      } else return (this._indexBitsUsed |= 1 << d), d;
      a >>= 1;
    }
    return -1;
  },
  _removeUsedIndexBit: function (a) {
    0 > a ||
      a >= this._maxTouches ||
      ((a = ~(1 << a)), (this._indexBitsUsed &= a));
  },
  _glView: null,
  handleTouchesBegin: function (a) {
    for (
      var b,
        d,
        e,
        f = [],
        g = this._touchesIntegerDict,
        h = cc.sys.now(),
        k = 0,
        m = a.length;
      k < m;
      k++
    )
      if (((b = a[k]), (e = b.getID()), (d = g[e]), null == d)) {
        var n = this._getUnUsedIndex();
        -1 === n
          ? cc.log(cc._LogInfos.inputManager_handleTouchesBegin, n)
          : ((d = this._touches[n] = new cc.Touch(
              b._point.x,
              b._point.y,
              b.getID()
            )),
            (d._lastModified = h),
            d._setPrevPoint(b._prevPoint),
            (g[e] = n),
            f.push(d));
      }
    0 < f.length &&
      (this._glView._convertTouchesWithScale(f),
      (a = new cc.EventTouch(f)),
      (a._eventCode = cc.EventTouch.EventCode.BEGAN),
      cc.eventManager.dispatchEvent(a));
  },
  handleTouchesMove: function (a) {
    for (
      var b,
        d,
        e = [],
        f = this._touches,
        g = cc.sys.now(),
        h = 0,
        k = a.length;
      h < k;
      h++
    )
      (b = a[h]),
        (d = b.getID()),
        (d = this._touchesIntegerDict[d]),
        null != d &&
          f[d] &&
          (f[d]._setPoint(b._point),
          f[d]._setPrevPoint(b._prevPoint),
          (f[d]._lastModified = g),
          e.push(f[d]));
    0 < e.length &&
      (this._glView._convertTouchesWithScale(e),
      (a = new cc.EventTouch(e)),
      (a._eventCode = cc.EventTouch.EventCode.MOVED),
      cc.eventManager.dispatchEvent(a));
  },
  handleTouchesEnd: function (a) {
    a = this.getSetOfTouchesEndOrCancel(a);
    0 < a.length &&
      (this._glView._convertTouchesWithScale(a),
      (a = new cc.EventTouch(a)),
      (a._eventCode = cc.EventTouch.EventCode.ENDED),
      cc.eventManager.dispatchEvent(a));
  },
  handleTouchesCancel: function (a) {
    a = this.getSetOfTouchesEndOrCancel(a);
    0 < a.length &&
      (this._glView._convertTouchesWithScale(a),
      (a = new cc.EventTouch(a)),
      (a._eventCode = cc.EventTouch.EventCode.CANCELLED),
      cc.eventManager.dispatchEvent(a));
  },
  getSetOfTouchesEndOrCancel: function (a) {
    for (
      var b,
        d,
        e,
        f = [],
        g = this._touches,
        h = this._touchesIntegerDict,
        k = 0,
        m = a.length;
      k < m;
      k++
    )
      (b = a[k]),
        (e = b.getID()),
        (d = h[e]),
        null != d &&
          g[d] &&
          (g[d]._setPoint(b._point),
          g[d]._setPrevPoint(b._prevPoint),
          f.push(g[d]),
          this._removeUsedIndexBit(d),
          delete h[e]);
    return f;
  },
  getHTMLElementPosition: function (a) {
    var b = document.documentElement,
      d = window,
      e = null,
      e = cc.isFunction(a.getBoundingClientRect)
        ? a.getBoundingClientRect()
        : {
            left: 0,
            top: 0,
            width: parseInt(a.style.width),
            height: parseInt(a.style.height),
          };
    return {
      left: e.left + d.pageXOffset - b.clientLeft,
      top: e.top + d.pageYOffset - b.clientTop,
      width: e.width,
      height: e.height,
    };
  },
  getPreTouch: function (a) {
    for (
      var b = null, d = this._preTouchPool, e = a.getID(), f = d.length - 1;
      0 <= f;
      f--
    )
      if (d[f].getID() === e) {
        b = d[f];
        break;
      }
    b || (b = a);
    return b;
  },
  setPreTouch: function (a) {
    for (
      var b = !1, d = this._preTouchPool, e = a.getID(), f = d.length - 1;
      0 <= f;
      f--
    )
      if (d[f].getID() === e) {
        d[f] = a;
        b = !0;
        break;
      }
    b ||
      (50 >= d.length
        ? d.push(a)
        : ((d[this._preTouchPoolPointer] = a),
          (this._preTouchPoolPointer = (this._preTouchPoolPointer + 1) % 50)));
  },
  getTouchByXY: function (a, b, d) {
    var e = this._preTouchPoint;
    a = this._glView.convertToLocationInView(a, b, d);
    b = new cc.Touch(a.x, a.y);
    b._setPrevPoint(e.x, e.y);
    e.x = a.x;
    e.y = a.y;
    return b;
  },
  getMouseEvent: function (a, b, d) {
    var e = this._prevMousePoint;
    this._glView._convertMouseToLocationInView(a, b);
    b = new cc.EventMouse(d);
    b.setLocation(a.x, a.y);
    b._setPrevCursor(e.x, e.y);
    e.x = a.x;
    e.y = a.y;
    return b;
  },
  getPointByEvent: function (a, b) {
    if (null != a.pageX) return { x: a.pageX, y: a.pageY };
    b.left -= document.body.scrollLeft;
    b.top -= document.body.scrollTop;
    return { x: a.clientX, y: a.clientY };
  },
  getTouchesByEvent: function (a, b) {
    for (
      var d = [],
        e = this._glView,
        f,
        g,
        h = this._preTouchPoint,
        k = a.changedTouches.length,
        m = 0;
      m < k;
      m++
    )
      if ((f = a.changedTouches[m])) {
        var n;
        n =
          cc.sys.BROWSER_TYPE_FIREFOX === cc.sys.browserType
            ? e.convertToLocationInView(f.pageX, f.pageY, b)
            : e.convertToLocationInView(f.clientX, f.clientY, b);
        null != f.identifier
          ? ((f = new cc.Touch(n.x, n.y, f.identifier)),
            (g = this.getPreTouch(f).getLocation()),
            f._setPrevPoint(g.x, g.y),
            this.setPreTouch(f))
          : ((f = new cc.Touch(n.x, n.y)), f._setPrevPoint(h.x, h.y));
        h.x = n.x;
        h.y = n.y;
        d.push(f);
      }
    return d;
  },
  registerSystemEvent: function (a) {
    if (!this._isRegisterEvent) {
      this._glView = cc.view;
      var b = this,
        d = "mouse" in cc.sys.capabilities,
        e = "touches" in cc.sys.capabilities,
        f = !1;
      cc.sys.isMobile && (f = !0);
      d &&
        (window.addEventListener(
          "mousedown",
          function () {
            b._mousePressed = !0;
          },
          !1
        ),
        window.addEventListener(
          "mouseup",
          function (d) {
            if (!f) {
              var e = b._mousePressed;
              b._mousePressed = !1;
              if (e) {
                var e = b.getHTMLElementPosition(a),
                  g = b.getPointByEvent(d, e);
                cc.rectContainsPoint(
                  new cc.Rect(e.left, e.top, e.width, e.height),
                  g
                ) ||
                  (b.handleTouchesEnd([b.getTouchByXY(g.x, g.y, e)]),
                  (e = b.getMouseEvent(g, e, cc.EventMouse.UP)),
                  e.setButton(d.button),
                  cc.eventManager.dispatchEvent(e));
              }
            }
          },
          !1
        ),
        a.addEventListener(
          "mousedown",
          function (d) {
            if (!f) {
              b._mousePressed = !0;
              var e = b.getHTMLElementPosition(a),
                g = b.getPointByEvent(d, e);
              b.handleTouchesBegin([b.getTouchByXY(g.x, g.y, e)]);
              e = b.getMouseEvent(g, e, cc.EventMouse.DOWN);
              e.setButton(d.button);
              cc.eventManager.dispatchEvent(e);
              d.stopPropagation();
              d.preventDefault();
              a.focus();
            }
          },
          !1
        ),
        a.addEventListener(
          "mouseup",
          function (d) {
            if (!f) {
              b._mousePressed = !1;
              var e = b.getHTMLElementPosition(a),
                g = b.getPointByEvent(d, e);
              b.handleTouchesEnd([b.getTouchByXY(g.x, g.y, e)]);
              e = b.getMouseEvent(g, e, cc.EventMouse.UP);
              e.setButton(d.button);
              cc.eventManager.dispatchEvent(e);
              d.stopPropagation();
              d.preventDefault();
            }
          },
          !1
        ),
        a.addEventListener(
          "mousemove",
          function (d) {
            if (!f) {
              var e = b.getHTMLElementPosition(a),
                g = b.getPointByEvent(d, e);
              b.handleTouchesMove([b.getTouchByXY(g.x, g.y, e)]);
              e = b.getMouseEvent(g, e, cc.EventMouse.MOVE);
              b._mousePressed ? e.setButton(d.button) : e.setButton(null);
              cc.eventManager.dispatchEvent(e);
              d.stopPropagation();
              d.preventDefault();
            }
          },
          !1
        ),
        a.addEventListener(
          "mousewheel",
          function (d) {
            var e = b.getHTMLElementPosition(a),
              f = b.getPointByEvent(d, e),
              e = b.getMouseEvent(f, e, cc.EventMouse.SCROLL);
            e.setButton(d.button);
            e.setScrollData(0, d.wheelDelta);
            cc.eventManager.dispatchEvent(e);
            d.stopPropagation();
            d.preventDefault();
          },
          !1
        ),
        a.addEventListener(
          "DOMMouseScroll",
          function (d) {
            var e = b.getHTMLElementPosition(a),
              f = b.getPointByEvent(d, e),
              e = b.getMouseEvent(f, e, cc.EventMouse.SCROLL);
            e.setButton(d.button);
            e.setScrollData(0, -120 * d.detail);
            cc.eventManager.dispatchEvent(e);
            d.stopPropagation();
            d.preventDefault();
          },
          !1
        ));
      if (window.navigator.msPointerEnabled) {
        var d = {
            MSPointerDown: b.handleTouchesBegin,
            MSPointerMove: b.handleTouchesMove,
            MSPointerUp: b.handleTouchesEnd,
            MSPointerCancel: b.handleTouchesCancel,
          },
          g;
        for (g in d)
          (function (d, e) {
            a.addEventListener(
              d,
              function (d) {
                var f = b.getHTMLElementPosition(a);
                f.left -= document.documentElement.scrollLeft;
                f.top -= document.documentElement.scrollTop;
                e.call(b, [b.getTouchByXY(d.clientX, d.clientY, f)]);
                d.stopPropagation();
              },
              !1
            );
          })(g, d[g]);
      }
      e &&
        (a.addEventListener(
          "touchstart",
          function (d) {
            if (d.changedTouches) {
              var e = b.getHTMLElementPosition(a);
              e.left -= document.body.scrollLeft;
              e.top -= document.body.scrollTop;
              b.handleTouchesBegin(b.getTouchesByEvent(d, e));
              d.stopPropagation();
              d.preventDefault();
              a.focus();
            }
          },
          !1
        ),
        a.addEventListener(
          "touchmove",
          function (d) {
            if (d.changedTouches) {
              var e = b.getHTMLElementPosition(a);
              e.left -= document.body.scrollLeft;
              e.top -= document.body.scrollTop;
              b.handleTouchesMove(b.getTouchesByEvent(d, e));
              d.stopPropagation();
              d.preventDefault();
            }
          },
          !1
        ),
        a.addEventListener(
          "touchend",
          function (d) {
            if (d.changedTouches) {
              var e = b.getHTMLElementPosition(a);
              e.left -= document.body.scrollLeft;
              e.top -= document.body.scrollTop;
              b.handleTouchesEnd(b.getTouchesByEvent(d, e));
              d.stopPropagation();
              d.preventDefault();
            }
          },
          !1
        ),
        a.addEventListener(
          "touchcancel",
          function (d) {
            if (d.changedTouches) {
              var e = b.getHTMLElementPosition(a);
              e.left -= document.body.scrollLeft;
              e.top -= document.body.scrollTop;
              b.handleTouchesCancel(b.getTouchesByEvent(d, e));
              d.stopPropagation();
              d.preventDefault();
            }
          },
          !1
        ));
      this._registerKeyboardEvent();
      this._isRegisterEvent = !0;
    }
  },
  _registerKeyboardEvent: function () {},
  _registerAccelerometerEvent: function () {},
  update: function (a) {
    this._accelCurTime > this._accelInterval &&
      ((this._accelCurTime -= this._accelInterval),
      cc.eventManager.dispatchEvent(
        new cc.EventAcceleration(this._acceleration)
      ));
    this._accelCurTime += a;
  },
};
_p = cc.inputManager;
_p.setAccelerometerEnabled = function (a) {
  this._accelEnabled !== a &&
    ((this._accelEnabled = a),
    (a = cc.director.getScheduler()),
    this._accelEnabled
      ? ((this._accelCurTime = 0),
        this._registerAccelerometerEvent(),
        a.scheduleUpdate(this))
      : ((this._accelCurTime = 0),
        this._unregisterAccelerometerEvent(),
        a.unscheduleUpdate(this)));
};
_p.setAccelerometerInterval = function (a) {
  this._accelInterval !== a && (this._accelInterval = a);
};
_p._registerKeyboardEvent = function () {
  cc._canvas.addEventListener(
    "keydown",
    function (a) {
      cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode, !0));
      a.stopPropagation();
      a.preventDefault();
    },
    !1
  );
  cc._canvas.addEventListener(
    "keyup",
    function (a) {
      cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode, !1));
      a.stopPropagation();
      a.preventDefault();
    },
    !1
  );
};
_p._registerAccelerometerEvent = function () {
  var a = window;
  this._acceleration = new cc.Acceleration();
  this._accelDeviceEvent = a.DeviceMotionEvent || a.DeviceOrientationEvent;
  cc.sys.browserType === cc.sys.BROWSER_TYPE_MOBILE_QQ &&
    (this._accelDeviceEvent = window.DeviceOrientationEvent);
  var b =
      this._accelDeviceEvent === a.DeviceMotionEvent
        ? "devicemotion"
        : "deviceorientation",
    d = navigator.userAgent;
  if (
    /Android/.test(d) ||
    (/Adr/.test(d) && cc.sys.browserType === cc.BROWSER_TYPE_UC)
  )
    this._minus = -1;
  this.didAccelerateCallback = this.didAccelerate.bind(this);
  a.addEventListener(b, this.didAccelerateCallback, !1);
};
_p._unregisterAccelerometerEvent = function () {
  this._acceleration = null;
  window.removeEventListener(
    this._accelDeviceEvent === window.DeviceMotionEvent
      ? "devicemotion"
      : "deviceorientation",
    this.didAccelerateCallback,
    !1
  );
};
_p.didAccelerate = function (a) {
  var b = window;
  if (this._accelEnabled) {
    var d = this._acceleration,
      e,
      f,
      g;
    this._accelDeviceEvent === window.DeviceMotionEvent
      ? ((g = a.accelerationIncludingGravity),
        (e = this._accelMinus * g.x * 0.1),
        (f = this._accelMinus * g.y * 0.1),
        (g = 0.1 * g.z))
      : ((e = (a.gamma / 90) * 0.981),
        (f = 0.981 * -(a.beta / 90)),
        (g = (a.alpha / 90) * 0.981));
    d.x = e;
    d.y = f;
    d.z = g;
    d.timestamp = a.timeStamp || Date.now();
    a = d.x;
    b.orientation === cc.UIInterfaceOrientationLandscapeRight
      ? ((d.x = -d.y), (d.y = a))
      : b.orientation === cc.UIInterfaceOrientationLandscapeLeft
      ? ((d.x = d.y), (d.y = -a))
      : b.orientation === cc.UIInterfaceOrientationPortraitUpsideDown &&
        ((d.x = -d.x), (d.y = -d.y));
  }
};
delete _p;
cc.AffineTransform = function (a, b, d, e, f, g) {
  this.a = a;
  this.b = b;
  this.c = d;
  this.d = e;
  this.tx = f;
  this.ty = g;
};
cc.affineTransformMake = function (a, b, d, e, f, g) {
  return { a: a, b: b, c: d, d: e, tx: f, ty: g };
};
cc.pointApplyAffineTransform = function (a, b, d) {
  var e;
  void 0 === d ? ((d = b), (e = a.x), (a = a.y)) : ((e = a), (a = b));
  return { x: d.a * e + d.c * a + d.tx, y: d.b * e + d.d * a + d.ty };
};
cc._pointApplyAffineTransform = function (a, b, d) {
  return cc.pointApplyAffineTransform(a, b, d);
};
cc.sizeApplyAffineTransform = function (a, b) {
  return {
    width: b.a * a.width + b.c * a.height,
    height: b.b * a.width + b.d * a.height,
  };
};
cc.affineTransformMakeIdentity = function () {
  return { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
};
cc.affineTransformIdentity = function () {
  return { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
};
cc.rectApplyAffineTransform = function (a, b) {
  var d = cc.rectGetMinY(a),
    e = cc.rectGetMinX(a),
    f = cc.rectGetMaxX(a),
    g = cc.rectGetMaxY(a),
    h = cc.pointApplyAffineTransform(e, d, b),
    d = cc.pointApplyAffineTransform(f, d, b),
    e = cc.pointApplyAffineTransform(e, g, b),
    k = cc.pointApplyAffineTransform(f, g, b),
    f = Math.min(h.x, d.x, e.x, k.x),
    g = Math.max(h.x, d.x, e.x, k.x),
    m = Math.min(h.y, d.y, e.y, k.y),
    h = Math.max(h.y, d.y, e.y, k.y);
  return cc.rect(f, m, g - f, h - m);
};
cc._rectApplyAffineTransformIn = function (a, b) {
  var d = cc.rectGetMinY(a),
    e = cc.rectGetMinX(a),
    f = cc.rectGetMaxX(a),
    g = cc.rectGetMaxY(a),
    h = cc.pointApplyAffineTransform(e, d, b),
    d = cc.pointApplyAffineTransform(f, d, b),
    e = cc.pointApplyAffineTransform(e, g, b),
    k = cc.pointApplyAffineTransform(f, g, b),
    f = Math.min(h.x, d.x, e.x, k.x),
    g = Math.max(h.x, d.x, e.x, k.x),
    m = Math.min(h.y, d.y, e.y, k.y),
    h = Math.max(h.y, d.y, e.y, k.y);
  a.x = f;
  a.y = m;
  a.width = g - f;
  a.height = h - m;
  return a;
};
cc.affineTransformTranslate = function (a, b, d) {
  return {
    a: a.a,
    b: a.b,
    c: a.c,
    d: a.d,
    tx: a.tx + a.a * b + a.c * d,
    ty: a.ty + a.b * b + a.d * d,
  };
};
cc.affineTransformScale = function (a, b, d) {
  return { a: a.a * b, b: a.b * b, c: a.c * d, d: a.d * d, tx: a.tx, ty: a.ty };
};
cc.affineTransformRotate = function (a, b) {
  var d = Math.sin(b),
    e = Math.cos(b);
  return {
    a: a.a * e + a.c * d,
    b: a.b * e + a.d * d,
    c: a.c * e - a.a * d,
    d: a.d * e - a.b * d,
    tx: a.tx,
    ty: a.ty,
  };
};
cc.affineTransformConcat = function (a, b) {
  return {
    a: a.a * b.a + a.b * b.c,
    b: a.a * b.b + a.b * b.d,
    c: a.c * b.a + a.d * b.c,
    d: a.c * b.b + a.d * b.d,
    tx: a.tx * b.a + a.ty * b.c + b.tx,
    ty: a.tx * b.b + a.ty * b.d + b.ty,
  };
};
cc.affineTransformConcatIn = function (a, b) {
  var d = a.a,
    e = a.b,
    f = a.c,
    g = a.d,
    h = a.tx,
    k = a.ty;
  a.a = d * b.a + e * b.c;
  a.b = d * b.b + e * b.d;
  a.c = f * b.a + g * b.c;
  a.d = f * b.b + g * b.d;
  a.tx = h * b.a + k * b.c + b.tx;
  a.ty = h * b.b + k * b.d + b.ty;
  return a;
};
cc.affineTransformEqualToTransform = function (a, b) {
  return (
    a.a === b.a &&
    a.b === b.b &&
    a.c === b.c &&
    a.d === b.d &&
    a.tx === b.tx &&
    a.ty === b.ty
  );
};
cc.affineTransformInvert = function (a) {
  var b = 1 / (a.a * a.d - a.b * a.c);
  return {
    a: b * a.d,
    b: -b * a.b,
    c: -b * a.c,
    d: b * a.a,
    tx: b * (a.c * a.ty - a.d * a.tx),
    ty: b * (a.b * a.tx - a.a * a.ty),
  };
};
cc.affineTransformInvertOut = function (a, b) {
  var d = a.a,
    e = a.b,
    f = a.c,
    g = a.d,
    h = 1 / (d * g - e * f);
  b.a = h * g;
  b.b = -h * e;
  b.c = -h * f;
  b.d = h * d;
  b.tx = h * (f * a.ty - g * a.tx);
  b.ty = h * (e * a.tx - d * a.ty);
};
cc.POINT_EPSILON = parseFloat("1.192092896e-07F");
cc.pNeg = function (a) {
  return cc.p(-a.x, -a.y);
};
cc.pAdd = function (a, b) {
  return cc.p(a.x + b.x, a.y + b.y);
};
cc.pSub = function (a, b) {
  return cc.p(a.x - b.x, a.y - b.y);
};
cc.pMult = function (a, b) {
  return cc.p(a.x * b, a.y * b);
};
cc.pMidpoint = function (a, b) {
  return cc.pMult(cc.pAdd(a, b), 0.5);
};
cc.pDot = function (a, b) {
  return a.x * b.x + a.y * b.y;
};
cc.pCross = function (a, b) {
  return a.x * b.y - a.y * b.x;
};
cc.pPerp = function (a) {
  return cc.p(-a.y, a.x);
};
cc.pRPerp = function (a) {
  return cc.p(a.y, -a.x);
};
cc.pProject = function (a, b) {
  return cc.pMult(b, cc.pDot(a, b) / cc.pDot(b, b));
};
cc.pRotate = function (a, b) {
  return cc.p(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);
};
cc.pUnrotate = function (a, b) {
  return cc.p(a.x * b.x + a.y * b.y, a.y * b.x - a.x * b.y);
};
cc.pLengthSQ = function (a) {
  return cc.pDot(a, a);
};
cc.pDistanceSQ = function (a, b) {
  return cc.pLengthSQ(cc.pSub(a, b));
};
cc.pLength = function (a) {
  return Math.sqrt(cc.pLengthSQ(a));
};
cc.pDistance = function (a, b) {
  return cc.pLength(cc.pSub(a, b));
};
cc.pNormalize = function (a) {
  var b = cc.pLength(a);
  return 0 === b ? cc.p(a) : cc.pMult(a, 1 / b);
};
cc.pForAngle = function (a) {
  return cc.p(Math.cos(a), Math.sin(a));
};
cc.pToAngle = function (a) {
  return Math.atan2(a.y, a.x);
};
cc.clampf = function (a, b, d) {
  if (b > d) {
    var e = b;
    b = d;
    d = e;
  }
  return a < b ? b : a < d ? a : d;
};
cc.pClamp = function (a, b, d) {
  return cc.p(cc.clampf(a.x, b.x, d.x), cc.clampf(a.y, b.y, d.y));
};
cc.pFromSize = function (a) {
  return cc.p(a.width, a.height);
};
cc.pCompOp = function (a, b) {
  return cc.p(b(a.x), b(a.y));
};
cc.pLerp = function (a, b, d) {
  return cc.pAdd(cc.pMult(a, 1 - d), cc.pMult(b, d));
};
cc.pFuzzyEqual = function (a, b, d) {
  return a.x - d <= b.x && b.x <= a.x + d && a.y - d <= b.y && b.y <= a.y + d
    ? !0
    : !1;
};
cc.pCompMult = function (a, b) {
  return cc.p(a.x * b.x, a.y * b.y);
};
cc.pAngleSigned = function (a, b) {
  var d = cc.pNormalize(a),
    e = cc.pNormalize(b),
    d = Math.atan2(d.x * e.y - d.y * e.x, cc.pDot(d, e));
  return Math.abs(d) < cc.POINT_EPSILON ? 0 : d;
};
cc.pAngle = function (a, b) {
  var d = Math.acos(cc.pDot(cc.pNormalize(a), cc.pNormalize(b)));
  return Math.abs(d) < cc.POINT_EPSILON ? 0 : d;
};
cc.pRotateByAngle = function (a, b, d) {
  a = cc.pSub(a, b);
  var e = Math.cos(d);
  d = Math.sin(d);
  var f = a.x;
  a.x = f * e - a.y * d + b.x;
  a.y = f * d + a.y * e + b.y;
  return a;
};
cc.pLineIntersect = function (a, b, d, e, f) {
  if ((a.x === b.x && a.y === b.y) || (d.x === e.x && d.y === e.y)) return !1;
  var g = b.x - a.x;
  b = b.y - a.y;
  var h = e.x - d.x;
  e = e.y - d.y;
  var k = a.x - d.x;
  a = a.y - d.y;
  d = e * g - h * b;
  f.x = h * a - e * k;
  f.y = g * a - b * k;
  if (0 === d) return 0 === f.x || 0 === f.y ? !0 : !1;
  f.x /= d;
  f.y /= d;
  return !0;
};
cc.pSegmentIntersect = function (a, b, d, e) {
  var f = cc.p(0, 0);
  return cc.pLineIntersect(a, b, d, e, f) &&
    0 <= f.x &&
    1 >= f.x &&
    0 <= f.y &&
    1 >= f.y
    ? !0
    : !1;
};
cc.pIntersectPoint = function (a, b, d, e) {
  var f = cc.p(0, 0);
  return cc.pLineIntersect(a, b, d, e, f)
    ? ((d = cc.p(0, 0)),
      (d.x = a.x + f.x * (b.x - a.x)),
      (d.y = a.y + f.x * (b.y - a.y)),
      d)
    : cc.p(0, 0);
};
cc.pSameAs = function (a, b) {
  return null != a && null != b ? a.x === b.x && a.y === b.y : !1;
};
cc.pZeroIn = function (a) {
  a.x = 0;
  a.y = 0;
};
cc.pIn = function (a, b) {
  a.x = b.x;
  a.y = b.y;
};
cc.pMultIn = function (a, b) {
  a.x *= b;
  a.y *= b;
};
cc.pSubIn = function (a, b) {
  a.x -= b.x;
  a.y -= b.y;
};
cc.pAddIn = function (a, b) {
  a.x += b.x;
  a.y += b.y;
};
cc.pNormalizeIn = function (a) {
  var b = Math.sqrt(a.x * a.x + a.y * a.y);
  0 !== b && cc.pMultIn(a, 1 / b);
};
cc.vertexLineToPolygon = function (a, b, d, e, f) {
  f += e;
  if (!(1 >= f)) {
    b *= 0.5;
    for (var g, h = f - 1, k = e; k < f; k++) {
      g = 2 * k;
      var m = cc.p(a[2 * k], a[2 * k + 1]),
        n;
      if (0 === k)
        n = cc.pPerp(
          cc.pNormalize(cc.pSub(m, cc.p(a[2 * (k + 1)], a[2 * (k + 1) + 1])))
        );
      else if (k === h)
        n = cc.pPerp(
          cc.pNormalize(cc.pSub(cc.p(a[2 * (k - 1)], a[2 * (k - 1) + 1]), m))
        );
      else {
        n = cc.p(a[2 * (k - 1)], a[2 * (k - 1) + 1]);
        var p = cc.p(a[2 * (k + 1)], a[2 * (k + 1) + 1]),
          r = cc.pNormalize(cc.pSub(p, m)),
          s = cc.pNormalize(cc.pSub(n, m)),
          u = Math.acos(cc.pDot(r, s));
        n =
          u < cc.degreesToRadians(70)
            ? cc.pPerp(cc.pNormalize(cc.pMidpoint(r, s)))
            : u < cc.degreesToRadians(170)
            ? cc.pNormalize(cc.pMidpoint(r, s))
            : cc.pPerp(cc.pNormalize(cc.pSub(p, n)));
      }
      n = cc.pMult(n, b);
      d[2 * g] = m.x + n.x;
      d[2 * g + 1] = m.y + n.y;
      d[2 * (g + 1)] = m.x - n.x;
      d[2 * (g + 1) + 1] = m.y - n.y;
    }
    for (k = 0 === e ? 0 : e - 1; k < h; k++)
      (g = 2 * k),
        (a = g + 2),
        (b = cc.vertex2(d[2 * g], d[2 * g + 1])),
        (f = cc.vertex2(d[2 * (g + 1)], d[2 * (g + 1) + 1])),
        (g = cc.vertex2(d[2 * a], d[2 * a])),
        (e = cc.vertex2(d[2 * (a + 1)], d[2 * (a + 1) + 1])),
        (b = !cc.vertexLineIntersect(b.x, b.y, e.x, e.y, f.x, f.y, g.x, g.y)),
        !b.isSuccess && (0 > b.value || 1 < b.value) && (b.isSuccess = !0),
        b.isSuccess &&
          ((d[2 * a] = e.x),
          (d[2 * a + 1] = e.y),
          (d[2 * (a + 1)] = g.x),
          (d[2 * (a + 1) + 1] = g.y));
  }
};
cc.vertexLineIntersect = function (a, b, d, e, f, g, h, k) {
  if ((a === d && b === e) || (f === h && g === k))
    return { isSuccess: !1, value: 0 };
  d -= a;
  e -= b;
  f -= a;
  g -= b;
  h -= a;
  k -= b;
  a = Math.sqrt(d * d + e * e);
  d /= a;
  e /= a;
  b = f * d + g * e;
  g = g * d - f * e;
  f = b;
  b = h * d + k * e;
  k = k * d - h * e;
  h = b;
  return g === k
    ? { isSuccess: !1, value: 0 }
    : { isSuccess: !0, value: (h + ((f - h) * k) / (k - g)) / a };
};
cc.vertexListIsClockwise = function (a) {
  for (var b = 0, d = a.length; b < d; b++) {
    var e = a[(b + 1) % d],
      f = a[(b + 2) % d];
    if (0 < cc.pCross(cc.pSub(e, a[b]), cc.pSub(f, e))) return !1;
  }
  return !0;
};
cc.CGAffineToGL = function (a, b) {
  b[2] = b[3] = b[6] = b[7] = b[8] = b[9] = b[11] = b[14] = 0;
  b[10] = b[15] = 1;
  b[0] = a.a;
  b[4] = a.c;
  b[12] = a.tx;
  b[1] = a.b;
  b[5] = a.d;
  b[13] = a.ty;
};
cc.GLToCGAffine = function (a, b) {
  b.a = a[0];
  b.c = a[4];
  b.tx = a[12];
  b.b = a[1];
  b.d = a[5];
  b.ty = a[13];
};
cc.Touch = cc.Class.extend({
  _lastModified: 0,
  _point: null,
  _prevPoint: null,
  _id: 0,
  _startPointCaptured: !1,
  _startPoint: null,
  ctor: function (a, b, d) {
    this.setTouchInfo(d, a, b);
  },
  getLocation: function () {
    return { x: this._point.x, y: this._point.y };
  },
  getLocationX: function () {
    return this._point.x;
  },
  getLocationY: function () {
    return this._point.y;
  },
  getPreviousLocation: function () {
    return { x: this._prevPoint.x, y: this._prevPoint.y };
  },
  getStartLocation: function () {
    return { x: this._startPoint.x, y: this._startPoint.y };
  },
  getDelta: function () {
    return cc.pSub(this._point, this._prevPoint);
  },
  getLocationInView: function () {
    return { x: this._point.x, y: this._point.y };
  },
  getPreviousLocationInView: function () {
    return { x: this._prevPoint.x, y: this._prevPoint.y };
  },
  getStartLocationInView: function () {
    return { x: this._startPoint.x, y: this._startPoint.y };
  },
  getID: function () {
    return this._id;
  },
  getId: function () {
    cc.log("getId is deprecated. Please use getID instead.");
    return this._id;
  },
  setTouchInfo: function (a, b, d) {
    this._prevPoint = this._point;
    this._point = cc.p(b || 0, d || 0);
    this._id = a;
    this._startPointCaptured ||
      ((this._startPoint = cc.p(this._point)),
      cc.view._convertPointWithScale(this._startPoint),
      (this._startPointCaptured = !0));
  },
  _setPoint: function (a, b) {
    void 0 === b
      ? ((this._point.x = a.x), (this._point.y = a.y))
      : ((this._point.x = a), (this._point.y = b));
  },
  _setPrevPoint: function (a, b) {
    this._prevPoint = void 0 === b ? cc.p(a.x, a.y) : cc.p(a || 0, b || 0);
  },
});
cc.Event = cc.Class.extend({
  _type: 0,
  _isStopped: !1,
  _currentTarget: null,
  _setCurrentTarget: function (a) {
    this._currentTarget = a;
  },
  ctor: function (a) {
    this._type = a;
  },
  getType: function () {
    return this._type;
  },
  stopPropagation: function () {
    this._isStopped = !0;
  },
  isStopped: function () {
    return this._isStopped;
  },
  getCurrentTarget: function () {
    return this._currentTarget;
  },
});
cc.Event.TOUCH = 0;
cc.Event.KEYBOARD = 1;
cc.Event.ACCELERATION = 2;
cc.Event.MOUSE = 3;
cc.Event.FOCUS = 4;
cc.Event.CUSTOM = 6;
cc.EventCustom = cc.Event.extend({
  _eventName: null,
  _userData: null,
  ctor: function (a) {
    cc.Event.prototype.ctor.call(this, cc.Event.CUSTOM);
    this._eventName = a;
  },
  setUserData: function (a) {
    this._userData = a;
  },
  getUserData: function () {
    return this._userData;
  },
  getEventName: function () {
    return this._eventName;
  },
});
cc.EventMouse = cc.Event.extend({
  _eventType: 0,
  _button: 0,
  _x: 0,
  _y: 0,
  _prevX: 0,
  _prevY: 0,
  _scrollX: 0,
  _scrollY: 0,
  ctor: function (a) {
    cc.Event.prototype.ctor.call(this, cc.Event.MOUSE);
    this._eventType = a;
  },
  setScrollData: function (a, b) {
    this._scrollX = a;
    this._scrollY = b;
  },
  getScrollX: function () {
    return this._scrollX;
  },
  getScrollY: function () {
    return this._scrollY;
  },
  setLocation: function (a, b) {
    this._x = a;
    this._y = b;
  },
  getLocation: function () {
    return { x: this._x, y: this._y };
  },
  getLocationInView: function () {
    return { x: this._x, y: cc.view._designResolutionSize.height - this._y };
  },
  _setPrevCursor: function (a, b) {
    this._prevX = a;
    this._prevY = b;
  },
  getDelta: function () {
    return { x: this._x - this._prevX, y: this._y - this._prevY };
  },
  getDeltaX: function () {
    return this._x - this._prevX;
  },
  getDeltaY: function () {
    return this._y - this._prevY;
  },
  setButton: function (a) {
    this._button = a;
  },
  getButton: function () {
    return this._button;
  },
  getLocationX: function () {
    return this._x;
  },
  getLocationY: function () {
    return this._y;
  },
});
cc.EventMouse.NONE = 0;
cc.EventMouse.DOWN = 1;
cc.EventMouse.UP = 2;
cc.EventMouse.MOVE = 3;
cc.EventMouse.SCROLL = 4;
cc.EventMouse.BUTTON_LEFT = 0;
cc.EventMouse.BUTTON_RIGHT = 2;
cc.EventMouse.BUTTON_MIDDLE = 1;
cc.EventMouse.BUTTON_4 = 3;
cc.EventMouse.BUTTON_5 = 4;
cc.EventMouse.BUTTON_6 = 5;
cc.EventMouse.BUTTON_7 = 6;
cc.EventMouse.BUTTON_8 = 7;
cc.EventTouch = cc.Event.extend({
  _eventCode: 0,
  _touches: null,
  ctor: function (a) {
    cc.Event.prototype.ctor.call(this, cc.Event.TOUCH);
    this._touches = a || [];
  },
  getEventCode: function () {
    return this._eventCode;
  },
  getTouches: function () {
    return this._touches;
  },
  _setEventCode: function (a) {
    this._eventCode = a;
  },
  _setTouches: function (a) {
    this._touches = a;
  },
});
cc.EventTouch.MAX_TOUCHES = 5;
cc.EventTouch.EventCode = { BEGAN: 0, MOVED: 1, ENDED: 2, CANCELLED: 3 };
cc.EventFocus = cc.Event.extend({
  _widgetGetFocus: null,
  _widgetLoseFocus: null,
  ctor: function (a, b) {
    cc.Event.prototype.ctor.call(this, cc.Event.FOCUS);
    this._widgetGetFocus = b;
    this._widgetLoseFocus = a;
  },
});
cc.EventListener = cc.Class.extend({
  _onEvent: null,
  _type: 0,
  _listenerID: null,
  _registered: !1,
  _fixedPriority: 0,
  _node: null,
  _paused: !0,
  _isEnabled: !0,
  ctor: function (a, b, d) {
    this._onEvent = d;
    this._type = a || 0;
    this._listenerID = b || "";
  },
  _setPaused: function (a) {
    this._paused = a;
  },
  _isPaused: function () {
    return this._paused;
  },
  _setRegistered: function (a) {
    this._registered = a;
  },
  _isRegistered: function () {
    return this._registered;
  },
  _getType: function () {
    return this._type;
  },
  _getListenerID: function () {
    return this._listenerID;
  },
  _setFixedPriority: function (a) {
    this._fixedPriority = a;
  },
  _getFixedPriority: function () {
    return this._fixedPriority;
  },
  _setSceneGraphPriority: function (a) {
    this._node = a;
  },
  _getSceneGraphPriority: function () {
    return this._node;
  },
  checkAvailable: function () {
    return null !== this._onEvent;
  },
  clone: function () {
    return null;
  },
  setEnabled: function (a) {
    this._isEnabled = a;
  },
  isEnabled: function () {
    return this._isEnabled;
  },
  retain: function () {},
  release: function () {},
});
cc.EventListener.UNKNOWN = 0;
cc.EventListener.TOUCH_ONE_BY_ONE = 1;
cc.EventListener.TOUCH_ALL_AT_ONCE = 2;
cc.EventListener.KEYBOARD = 3;
cc.EventListener.MOUSE = 4;
cc.EventListener.ACCELERATION = 6;
cc.EventListener.FOCUS = 7;
cc.EventListener.CUSTOM = 8;
cc._EventListenerCustom = cc.EventListener.extend({
  _onCustomEvent: null,
  ctor: function (a, b, d) {
    this._onCustomEvent = b;
    this._target = d;
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.CUSTOM,
      a,
      this._callback
    );
  },
  _callback: function (a) {
    null !== this._onCustomEvent && this._onCustomEvent.call(this._target, a);
  },
  checkAvailable: function () {
    return (
      cc.EventListener.prototype.checkAvailable.call(this) &&
      null !== this._onCustomEvent
    );
  },
  clone: function () {
    return new cc._EventListenerCustom(this._listenerID, this._onCustomEvent);
  },
});
cc._EventListenerCustom.create = function (a, b) {
  return new cc._EventListenerCustom(a, b);
};
cc._EventListenerMouse = cc.EventListener.extend({
  onMouseDown: null,
  onMouseUp: null,
  onMouseMove: null,
  onMouseScroll: null,
  ctor: function () {
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.MOUSE,
      cc._EventListenerMouse.LISTENER_ID,
      this._callback
    );
  },
  _callback: function (a) {
    var b = cc.EventMouse;
    switch (a._eventType) {
      case b.DOWN:
        if (this.onMouseDown) this.onMouseDown(a);
        break;
      case b.UP:
        if (this.onMouseUp) this.onMouseUp(a);
        break;
      case b.MOVE:
        if (this.onMouseMove) this.onMouseMove(a);
        break;
      case b.SCROLL:
        if (this.onMouseScroll) this.onMouseScroll(a);
    }
  },
  clone: function () {
    var a = new cc._EventListenerMouse();
    a.onMouseDown = this.onMouseDown;
    a.onMouseUp = this.onMouseUp;
    a.onMouseMove = this.onMouseMove;
    a.onMouseScroll = this.onMouseScroll;
    return a;
  },
  checkAvailable: function () {
    return !0;
  },
});
cc._EventListenerMouse.LISTENER_ID = "__cc_mouse";
cc._EventListenerMouse.create = function () {
  return new cc._EventListenerMouse();
};
cc._EventListenerTouchOneByOne = cc.EventListener.extend({
  _claimedTouches: null,
  swallowTouches: !1,
  onTouchBegan: null,
  onTouchMoved: null,
  onTouchEnded: null,
  onTouchCancelled: null,
  ctor: function () {
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.TOUCH_ONE_BY_ONE,
      cc._EventListenerTouchOneByOne.LISTENER_ID,
      null
    );
    this._claimedTouches = [];
  },
  setSwallowTouches: function (a) {
    this.swallowTouches = a;
  },
  isSwallowTouches: function () {
    return this.swallowTouches;
  },
  clone: function () {
    var a = new cc._EventListenerTouchOneByOne();
    a.onTouchBegan = this.onTouchBegan;
    a.onTouchMoved = this.onTouchMoved;
    a.onTouchEnded = this.onTouchEnded;
    a.onTouchCancelled = this.onTouchCancelled;
    a.swallowTouches = this.swallowTouches;
    return a;
  },
  checkAvailable: function () {
    return this.onTouchBegan
      ? !0
      : (cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable), !1);
  },
});
cc._EventListenerTouchOneByOne.LISTENER_ID = "__cc_touch_one_by_one";
cc._EventListenerTouchOneByOne.create = function () {
  return new cc._EventListenerTouchOneByOne();
};
cc._EventListenerTouchAllAtOnce = cc.EventListener.extend({
  onTouchesBegan: null,
  onTouchesMoved: null,
  onTouchesEnded: null,
  onTouchesCancelled: null,
  ctor: function () {
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.TOUCH_ALL_AT_ONCE,
      cc._EventListenerTouchAllAtOnce.LISTENER_ID,
      null
    );
  },
  clone: function () {
    var a = new cc._EventListenerTouchAllAtOnce();
    a.onTouchesBegan = this.onTouchesBegan;
    a.onTouchesMoved = this.onTouchesMoved;
    a.onTouchesEnded = this.onTouchesEnded;
    a.onTouchesCancelled = this.onTouchesCancelled;
    return a;
  },
  checkAvailable: function () {
    return null === this.onTouchesBegan &&
      null === this.onTouchesMoved &&
      null === this.onTouchesEnded &&
      null === this.onTouchesCancelled
      ? (cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable), !1)
      : !0;
  },
});
cc._EventListenerTouchAllAtOnce.LISTENER_ID = "__cc_touch_all_at_once";
cc._EventListenerTouchAllAtOnce.create = function () {
  return new cc._EventListenerTouchAllAtOnce();
};
cc.EventListener.create = function (a) {
  cc.assert(a && a.event, cc._LogInfos.EventListener_create);
  var b = a.event;
  delete a.event;
  var d = null;
  b === cc.EventListener.TOUCH_ONE_BY_ONE
    ? (d = new cc._EventListenerTouchOneByOne())
    : b === cc.EventListener.TOUCH_ALL_AT_ONCE
    ? (d = new cc._EventListenerTouchAllAtOnce())
    : b === cc.EventListener.MOUSE
    ? (d = new cc._EventListenerMouse())
    : b === cc.EventListener.CUSTOM
    ? ((d = new cc._EventListenerCustom(a.eventName, a.callback)),
      delete a.eventName,
      delete a.callback)
    : b === cc.EventListener.KEYBOARD
    ? (d = new cc._EventListenerKeyboard())
    : b === cc.EventListener.ACCELERATION
    ? ((d = new cc._EventListenerAcceleration(a.callback)), delete a.callback)
    : b === cc.EventListener.FOCUS && (d = new cc._EventListenerFocus());
  for (var e in a) d[e] = a[e];
  return d;
};
cc._EventListenerFocus = cc.EventListener.extend({
  clone: function () {
    var a = new cc._EventListenerFocus();
    a.onFocusChanged = this.onFocusChanged;
    return a;
  },
  checkAvailable: function () {
    return this.onFocusChanged
      ? !0
      : (cc.log("Invalid EventListenerFocus!"), !1);
  },
  onFocusChanged: null,
  ctor: function () {
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.FOCUS,
      cc._EventListenerFocus.LISTENER_ID,
      this._callback
    );
  },
  _callback: function (a) {
    if (this.onFocusChanged)
      this.onFocusChanged(a._widgetLoseFocus, a._widgetGetFocus);
  },
});
cc._EventListenerFocus.LISTENER_ID = "__cc_focus_event";
(function () {
  function a(a) {
    var d = cc.Event,
      e = a._type;
    if (e === d.ACCELERATION) return cc._EventListenerAcceleration.LISTENER_ID;
    if (e === d.CUSTOM) return a._eventName;
    if (e === d.KEYBOARD) return cc._EventListenerKeyboard.LISTENER_ID;
    if (e === d.MOUSE) return cc._EventListenerMouse.LISTENER_ID;
    if (e === d.FOCUS) return cc._EventListenerFocus.LISTENER_ID;
    e === d.TOUCH && cc.log(cc._LogInfos.__getListenerID);
    return "";
  }
  cc._EventListenerVector = cc.Class.extend({
    _fixedListeners: null,
    _sceneGraphListeners: null,
    gt0Index: 0,
    ctor: function () {
      this._fixedListeners = [];
      this._sceneGraphListeners = [];
    },
    size: function () {
      return this._fixedListeners.length + this._sceneGraphListeners.length;
    },
    empty: function () {
      return (
        0 === this._fixedListeners.length &&
        0 === this._sceneGraphListeners.length
      );
    },
    push: function (a) {
      0 === a._getFixedPriority()
        ? this._sceneGraphListeners.push(a)
        : this._fixedListeners.push(a);
    },
    clearSceneGraphListeners: function () {
      this._sceneGraphListeners.length = 0;
    },
    clearFixedListeners: function () {
      this._fixedListeners.length = 0;
    },
    clear: function () {
      this._sceneGraphListeners.length = 0;
      this._fixedListeners.length = 0;
    },
    getFixedPriorityListeners: function () {
      return this._fixedListeners;
    },
    getSceneGraphPriorityListeners: function () {
      return this._sceneGraphListeners;
    },
  });
  cc.eventManager = {
    DIRTY_NONE: 0,
    DIRTY_FIXED_PRIORITY: 1,
    DIRTY_SCENE_GRAPH_PRIORITY: 2,
    DIRTY_ALL: 3,
    _listenersMap: {},
    _priorityDirtyFlagMap: {},
    _nodeListenersMap: {},
    _nodePriorityMap: {},
    _globalZOrderNodeMap: {},
    _toAddedListeners: [],
    _toRemovedListeners: [],
    _dirtyNodes: [],
    _inDispatch: 0,
    _isEnabled: !1,
    _nodePriorityIndex: 0,
    _internalCustomListenerIDs: [cc.game.EVENT_HIDE, cc.game.EVENT_SHOW],
    _setDirtyForNode: function (a) {
      null != this._nodeListenersMap[a.__instanceId] &&
        this._dirtyNodes.push(a);
      a = a.getChildren();
      for (var d = 0, e = a.length; d < e; d++) this._setDirtyForNode(a[d]);
    },
    pauseTarget: function (a, d) {
      var e = this._nodeListenersMap[a.__instanceId],
        f,
        g;
      if (e) for (f = 0, g = e.length; f < g; f++) e[f]._setPaused(!0);
      if (!0 === d)
        for (e = a.getChildren(), f = 0, g = e.length; f < g; f++)
          this.pauseTarget(e[f], !0);
    },
    resumeTarget: function (a, d) {
      var e = this._nodeListenersMap[a.__instanceId],
        f,
        g;
      if (e) for (f = 0, g = e.length; f < g; f++) e[f]._setPaused(!1);
      this._setDirtyForNode(a);
      if (!0 === d)
        for (e = a.getChildren(), f = 0, g = e.length; f < g; f++)
          this.resumeTarget(e[f], !0);
    },
    _addListener: function (a) {
      0 === this._inDispatch
        ? this._forceAddEventListener(a)
        : this._toAddedListeners.push(a);
    },
    _forceAddEventListener: function (a) {
      var d = a._getListenerID(),
        e = this._listenersMap[d];
      e || ((e = new cc._EventListenerVector()), (this._listenersMap[d] = e));
      e.push(a);
      0 === a._getFixedPriority()
        ? (this._setDirty(d, this.DIRTY_SCENE_GRAPH_PRIORITY),
          (d = a._getSceneGraphPriority()),
          null === d &&
            cc.log(cc._LogInfos.eventManager__forceAddEventListener),
          this._associateNodeAndEventListener(d, a),
          d.isRunning() && this.resumeTarget(d))
        : this._setDirty(d, this.DIRTY_FIXED_PRIORITY);
    },
    _getListeners: function (a) {
      return this._listenersMap[a];
    },
    _updateDirtyFlagForSceneGraph: function () {
      if (0 !== this._dirtyNodes.length) {
        for (
          var a = this._dirtyNodes,
            d,
            e,
            f = this._nodeListenersMap,
            g = 0,
            h = a.length;
          g < h;
          g++
        )
          if ((d = f[a[g].__instanceId]))
            for (var k = 0, m = d.length; k < m; k++)
              (e = d[k]) &&
                this._setDirty(
                  e._getListenerID(),
                  this.DIRTY_SCENE_GRAPH_PRIORITY
                );
        this._dirtyNodes.length = 0;
      }
    },
    _removeAllListenersInVector: function (a) {
      if (a)
        for (var d, e = 0; e < a.length; )
          (d = a[e]),
            d._setRegistered(!1),
            null != d._getSceneGraphPriority() &&
              (this._dissociateNodeAndEventListener(
                d._getSceneGraphPriority(),
                d
              ),
              d._setSceneGraphPriority(null)),
            0 === this._inDispatch ? cc.arrayRemoveObject(a, d) : ++e;
    },
    _removeListenersForListenerID: function (a) {
      var d = this._listenersMap[a];
      if (d) {
        var e = d.getFixedPriorityListeners(),
          f = d.getSceneGraphPriorityListeners();
        this._removeAllListenersInVector(f);
        this._removeAllListenersInVector(e);
        delete this._priorityDirtyFlagMap[a];
        this._inDispatch || d.clear();
        delete this._listenersMap[a];
      }
      e = this._toAddedListeners;
      for (d = 0; d < e.length; )
        (f = e[d]) && f._getListenerID() === a
          ? cc.arrayRemoveObject(e, f)
          : ++d;
    },
    _sortEventListeners: function (a) {
      var d = this.DIRTY_NONE,
        e = this._priorityDirtyFlagMap;
      e[a] && (d = e[a]);
      d !== this.DIRTY_NONE &&
        ((e[a] = this.DIRTY_NONE),
        d & this.DIRTY_FIXED_PRIORITY && this._sortListenersOfFixedPriority(a),
        d & this.DIRTY_SCENE_GRAPH_PRIORITY &&
          ((d = cc.director.getRunningScene())
            ? this._sortListenersOfSceneGraphPriority(a, d)
            : (e[a] = this.DIRTY_SCENE_GRAPH_PRIORITY)));
    },
    _sortListenersOfSceneGraphPriority: function (a, d) {
      var e = this._getListeners(a);
      if (e) {
        var f = e.getSceneGraphPriorityListeners();
        f &&
          0 !== f.length &&
          ((this._nodePriorityIndex = 0),
          (this._nodePriorityMap = {}),
          this._visitTarget(d, !0),
          e
            .getSceneGraphPriorityListeners()
            .sort(this._sortEventListenersOfSceneGraphPriorityDes));
      }
    },
    _sortEventListenersOfSceneGraphPriorityDes: function (a, d) {
      var e = cc.eventManager._nodePriorityMap,
        f = a._getSceneGraphPriority(),
        g = d._getSceneGraphPriority();
      return d && g && e[g.__instanceId]
        ? a && f && e[f.__instanceId]
          ? e[d._getSceneGraphPriority().__instanceId] -
            e[a._getSceneGraphPriority().__instanceId]
          : 1
        : -1;
    },
    _sortListenersOfFixedPriority: function (a) {
      if ((a = this._listenersMap[a])) {
        var d = a.getFixedPriorityListeners();
        if (d && 0 !== d.length) {
          d.sort(this._sortListenersOfFixedPriorityAsc);
          for (
            var e = 0, f = d.length;
            e < f && !(0 <= d[e]._getFixedPriority());

          )
            ++e;
          a.gt0Index = e;
        }
      }
    },
    _sortListenersOfFixedPriorityAsc: function (a, d) {
      return a._getFixedPriority() - d._getFixedPriority();
    },
    _onUpdateListeners: function (a) {
      var d = a.getFixedPriorityListeners(),
        e = a.getSceneGraphPriorityListeners(),
        f,
        g,
        h = this._toRemovedListeners;
      if (e)
        for (f = 0; f < e.length; )
          (g = e[f]),
            g._isRegistered()
              ? ++f
              : (cc.arrayRemoveObject(e, g),
                (g = h.indexOf(g)),
                -1 !== g && h.splice(g, 1));
      if (d)
        for (f = 0; f < d.length; )
          (g = d[f]),
            g._isRegistered()
              ? ++f
              : (cc.arrayRemoveObject(d, g),
                (g = h.indexOf(g)),
                -1 !== g && h.splice(g, 1));
      e && 0 === e.length && a.clearSceneGraphListeners();
      d && 0 === d.length && a.clearFixedListeners();
    },
    frameUpdateListeners: function () {
      var a = this._listenersMap,
        d = this._priorityDirtyFlagMap,
        e;
      for (e in a) a[e].empty() && (delete d[e], delete a[e]);
      a = this._toAddedListeners;
      if (0 !== a.length) {
        d = 0;
        for (e = a.length; d < e; d++) this._forceAddEventListener(a[d]);
        a.length = 0;
      }
      0 !== this._toRemovedListeners.length && this._cleanToRemovedListeners();
    },
    _updateTouchListeners: function (a) {
      a = this._inDispatch;
      cc.assert(0 < a, cc._LogInfos.EventManager__updateListeners);
      if (!(1 < a)) {
        var d;
        (d = this._listenersMap[cc._EventListenerTouchOneByOne.LISTENER_ID]) &&
          this._onUpdateListeners(d);
        (d = this._listenersMap[cc._EventListenerTouchAllAtOnce.LISTENER_ID]) &&
          this._onUpdateListeners(d);
        cc.assert(1 === a, cc._LogInfos.EventManager__updateListeners_2);
        a = this._toAddedListeners;
        if (0 !== a.length) {
          d = 0;
          for (var e = a.length; d < e; d++) this._forceAddEventListener(a[d]);
          a.length = 0;
        }
        0 !== this._toRemovedListeners.length &&
          this._cleanToRemovedListeners();
      }
    },
    _cleanToRemovedListeners: function () {
      for (var a = this._toRemovedListeners, d = 0; d < a.length; d++) {
        var e = a[d],
          f = this._listenersMap[e._getListenerID()];
        if (f) {
          var g = f.getFixedPriorityListeners(),
            h = f.getSceneGraphPriorityListeners();
          h && ((f = h.indexOf(e)), -1 !== f && h.splice(f, 1));
          g && ((f = g.indexOf(e)), -1 !== f && g.splice(f, 1));
        }
      }
      a.length = 0;
    },
    _onTouchEventCallback: function (a, d) {
      if (!a._isRegistered) return !1;
      var e = d.event,
        f = d.selTouch;
      e._setCurrentTarget(a._node);
      var g = !1,
        h,
        k = e.getEventCode(),
        m = cc.EventTouch.EventCode;
      if (k === m.BEGAN)
        a.onTouchBegan &&
          (g = a.onTouchBegan(f, e)) &&
          a._registered &&
          a._claimedTouches.push(f);
      else if (
        0 < a._claimedTouches.length &&
        -1 !== (h = a._claimedTouches.indexOf(f))
      )
        if (((g = !0), k === m.MOVED && a.onTouchMoved)) a.onTouchMoved(f, e);
        else if (k === m.ENDED) {
          if (a.onTouchEnded) a.onTouchEnded(f, e);
          a._registered && a._claimedTouches.splice(h, 1);
        } else if (k === m.CANCELLED) {
          if (a.onTouchCancelled) a.onTouchCancelled(f, e);
          a._registered && a._claimedTouches.splice(h, 1);
        }
      return e.isStopped()
        ? (cc.eventManager._updateTouchListeners(e), !0)
        : g && a._registered && a.swallowTouches
        ? (d.needsMutableSet && d.touches.splice(f, 1), !0)
        : !1;
    },
    _dispatchTouchEvent: function (a) {
      this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID);
      this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);
      var d = this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),
        e = this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);
      if (null !== d || null !== e) {
        var f = a.getTouches(),
          g = cc.copyArray(f),
          h = { event: a, needsMutableSet: d && e, touches: g, selTouch: null };
        if (d)
          for (var k = 0; k < f.length; k++)
            if (
              ((h.selTouch = f[k]),
              this._dispatchEventToListeners(d, this._onTouchEventCallback, h),
              a.isStopped())
            )
              return;
        if (
          e &&
          0 < g.length &&
          (this._dispatchEventToListeners(e, this._onTouchesEventCallback, {
            event: a,
            touches: g,
          }),
          a.isStopped())
        )
          return;
        this._updateTouchListeners(a);
      }
    },
    _onTouchesEventCallback: function (a, d) {
      if (!a._registered) return !1;
      var e = cc.EventTouch.EventCode,
        f = d.event,
        g = d.touches,
        h = f.getEventCode();
      f._setCurrentTarget(a._node);
      if (h === e.BEGAN && a.onTouchesBegan) a.onTouchesBegan(g, f);
      else if (h === e.MOVED && a.onTouchesMoved) a.onTouchesMoved(g, f);
      else if (h === e.ENDED && a.onTouchesEnded) a.onTouchesEnded(g, f);
      else if (h === e.CANCELLED && a.onTouchesCancelled)
        a.onTouchesCancelled(g, f);
      return f.isStopped()
        ? (cc.eventManager._updateTouchListeners(f), !0)
        : !1;
    },
    _associateNodeAndEventListener: function (a, d) {
      var e = this._nodeListenersMap[a.__instanceId];
      e || ((e = []), (this._nodeListenersMap[a.__instanceId] = e));
      e.push(d);
    },
    _dissociateNodeAndEventListener: function (a, d) {
      var e = this._nodeListenersMap[a.__instanceId];
      e &&
        (cc.arrayRemoveObject(e, d),
        0 === e.length && delete this._nodeListenersMap[a.__instanceId]);
    },
    _dispatchEventToListeners: function (a, d, e) {
      var f = !1,
        g = a.getFixedPriorityListeners(),
        h = a.getSceneGraphPriorityListeners(),
        k = 0,
        m;
      if (g && 0 !== g.length)
        for (; k < a.gt0Index; ++k)
          if (
            ((m = g[k]),
            m.isEnabled() && !m._isPaused() && m._isRegistered() && d(m, e))
          ) {
            f = !0;
            break;
          }
      if (h && !f)
        for (a = 0; a < h.length; a++)
          if (
            ((m = h[a]),
            m.isEnabled() && !m._isPaused() && m._isRegistered() && d(m, e))
          ) {
            f = !0;
            break;
          }
      if (g && !f)
        for (
          ;
          k < g.length &&
          ((m = g[k]),
          !m.isEnabled() || m._isPaused() || !m._isRegistered() || !d(m, e));
          ++k
        );
    },
    _setDirty: function (a, d) {
      var e = this._priorityDirtyFlagMap;
      e[a] = null == e[a] ? d : d | e[a];
    },
    _visitTarget: function (a, d) {
      var e = a.getChildren(),
        f = 0,
        g = e.length,
        h = this._globalZOrderNodeMap,
        k = this._nodeListenersMap;
      if (0 < g) {
        for (var m; f < g; f++)
          if ((m = e[f]) && 0 > m.getLocalZOrder()) this._visitTarget(m, !1);
          else break;
        null != k[a.__instanceId] &&
          (h[a.getGlobalZOrder()] || (h[a.getGlobalZOrder()] = []),
          h[a.getGlobalZOrder()].push(a.__instanceId));
        for (; f < g; f++) (m = e[f]) && this._visitTarget(m, !1);
      } else
        null != k[a.__instanceId] &&
          (h[a.getGlobalZOrder()] || (h[a.getGlobalZOrder()] = []),
          h[a.getGlobalZOrder()].push(a.__instanceId));
      if (d) {
        var e = [],
          n;
        for (n in h) e.push(n);
        e.sort(this._sortNumberAsc);
        n = e.length;
        m = this._nodePriorityMap;
        for (f = 0; f < n; f++)
          for (g = h[e[f]], k = 0; k < g.length; k++)
            m[g[k]] = ++this._nodePriorityIndex;
        this._globalZOrderNodeMap = {};
      }
    },
    _sortNumberAsc: function (a, d) {
      return a - d;
    },
    addListener: function (a, d) {
      cc.assert(a && d, cc._LogInfos.eventManager_addListener_2);
      if (!(a instanceof cc.EventListener))
        cc.assert(!cc.isNumber(d), cc._LogInfos.eventManager_addListener_3),
          (a = cc.EventListener.create(a));
      else if (a._isRegistered()) {
        cc.log(cc._LogInfos.eventManager_addListener_4);
        return;
      }
      if (a.checkAvailable()) {
        if (cc.isNumber(d)) {
          if (0 === d) {
            cc.log(cc._LogInfos.eventManager_addListener);
            return;
          }
          a._setSceneGraphPriority(null);
          a._setFixedPriority(d);
          a._setRegistered(!0);
          a._setPaused(!1);
        } else
          a._setSceneGraphPriority(d),
            a._setFixedPriority(0),
            a._setRegistered(!0);
        this._addListener(a);
        return a;
      }
    },
    addCustomListener: function (a, d, e) {
      a = new cc._EventListenerCustom(a, d, e);
      this.addListener(a, 1);
      return a;
    },
    removeListener: function (a) {
      if (null != a) {
        var d,
          e = this._listenersMap,
          f;
        for (f in e) {
          var g = e[f],
            h = g.getFixedPriorityListeners();
          d = g.getSceneGraphPriorityListeners();
          (d = this._removeListenerInVector(d, a))
            ? this._setDirty(
                a._getListenerID(),
                this.DIRTY_SCENE_GRAPH_PRIORITY
              )
            : (d = this._removeListenerInVector(h, a)) &&
              this._setDirty(a._getListenerID(), this.DIRTY_FIXED_PRIORITY);
          g.empty() &&
            (delete this._priorityDirtyFlagMap[a._getListenerID()],
            delete e[f]);
          if (d) break;
        }
        if (!d)
          for (e = this._toAddedListeners, f = 0, g = e.length; f < g; f++)
            if (((h = e[f]), h === a)) {
              cc.arrayRemoveObject(e, h);
              h._setRegistered(!1);
              break;
            }
      }
    },
    _removeListenerInCallback: function (a, d) {
      if (null == a) return !1;
      for (var e = 0, f = a.length; e < f; e++) {
        var g = a[e];
        if (g._onCustomEvent === d || g._onEvent === d)
          return (
            g._setRegistered(!1),
            null != g._getSceneGraphPriority() &&
              (this._dissociateNodeAndEventListener(
                g._getSceneGraphPriority(),
                g
              ),
              g._setSceneGraphPriority(null)),
            0 === this._inDispatch && cc.arrayRemoveObject(a, g),
            !0
          );
      }
      return !1;
    },
    _removeListenerInVector: function (a, d) {
      if (null == a) return !1;
      for (var e = 0, f = a.length; e < f; e++) {
        var g = a[e];
        if (g === d)
          return (
            g._setRegistered(!1),
            null != g._getSceneGraphPriority() &&
              (this._dissociateNodeAndEventListener(
                g._getSceneGraphPriority(),
                g
              ),
              g._setSceneGraphPriority(null)),
            0 === this._inDispatch
              ? cc.arrayRemoveObject(a, g)
              : this._toRemovedListeners.push(g),
            !0
          );
      }
      return !1;
    },
    removeListeners: function (a, d) {
      if (a instanceof cc.Node) {
        delete this._nodePriorityMap[a.__instanceId];
        cc.arrayRemoveObject(this._dirtyNodes, a);
        var e = this._nodeListenersMap[a.__instanceId];
        if (e) {
          for (var f = cc.copyArray(e), e = 0; e < f.length; e++)
            this.removeListener(f[e]);
          f.length = 0;
        }
        f = this._toAddedListeners;
        for (e = 0; e < f.length; ) {
          var g = f[e];
          g._getSceneGraphPriority() === a
            ? (g._setSceneGraphPriority(null),
              g._setRegistered(!1),
              f.splice(e, 1))
            : ++e;
        }
        if (!0 === d)
          for (f = a.getChildren(), e = 0, g = f.length; e < g; e++)
            this.removeListeners(f[e], !0);
      } else
        a === cc.EventListener.TOUCH_ONE_BY_ONE
          ? this._removeListenersForListenerID(
              cc._EventListenerTouchOneByOne.LISTENER_ID
            )
          : a === cc.EventListener.TOUCH_ALL_AT_ONCE
          ? this._removeListenersForListenerID(
              cc._EventListenerTouchAllAtOnce.LISTENER_ID
            )
          : a === cc.EventListener.MOUSE
          ? this._removeListenersForListenerID(
              cc._EventListenerMouse.LISTENER_ID
            )
          : a === cc.EventListener.ACCELERATION
          ? this._removeListenersForListenerID(
              cc._EventListenerAcceleration.LISTENER_ID
            )
          : a === cc.EventListener.KEYBOARD
          ? this._removeListenersForListenerID(
              cc._EventListenerKeyboard.LISTENER_ID
            )
          : cc.log(cc._LogInfos.eventManager_removeListeners);
    },
    removeCustomListeners: function (a) {
      this._removeListenersForListenerID(a);
    },
    removeAllListeners: function () {
      var a = this._listenersMap,
        d = this._internalCustomListenerIDs,
        e;
      for (e in a) -1 === d.indexOf(e) && this._removeListenersForListenerID(e);
    },
    setPriority: function (a, d) {
      if (null != a) {
        var e = this._listenersMap,
          f;
        for (f in e) {
          var g = e[f].getFixedPriorityListeners();
          if (g && -1 !== g.indexOf(a)) {
            null != a._getSceneGraphPriority() &&
              cc.log(cc._LogInfos.eventManager_setPriority);
            a._getFixedPriority() !== d &&
              (a._setFixedPriority(d),
              this._setDirty(a._getListenerID(), this.DIRTY_FIXED_PRIORITY));
            break;
          }
        }
      }
    },
    setEnabled: function (a) {
      this._isEnabled = a;
    },
    isEnabled: function () {
      return this._isEnabled;
    },
    dispatchEvent: function (b) {
      if (this._isEnabled) {
        this._updateDirtyFlagForSceneGraph();
        this._inDispatch++;
        if (!b || !b.getType) throw Error("event is undefined");
        if (b._type === cc.Event.TOUCH) this._dispatchTouchEvent(b);
        else {
          var d = a(b);
          this._sortEventListeners(d);
          if ((d = this._listenersMap[d]))
            this._dispatchEventToListeners(d, this._onListenerCallback, b),
              this._onUpdateListeners(d);
        }
        this._inDispatch--;
      }
    },
    _onListenerCallback: function (a, d) {
      d._setCurrentTarget(a._getSceneGraphPriority());
      a._onEvent(d);
      return d.isStopped();
    },
    dispatchCustomEvent: function (a, d) {
      var e = new cc.EventCustom(a);
      e.setUserData(d);
      this.dispatchEvent(e);
    },
  };
})();
cc.EventAcceleration = cc.Event.extend({
  _acc: null,
  ctor: function (a) {
    cc.Event.prototype.ctor.call(this, cc.Event.ACCELERATION);
    this._acc = a;
  },
});
cc.EventKeyboard = cc.Event.extend({
  _keyCode: 0,
  _isPressed: !1,
  ctor: function (a, b) {
    cc.Event.prototype.ctor.call(this, cc.Event.KEYBOARD);
    this._keyCode = a;
    this._isPressed = b;
  },
});
cc._EventListenerAcceleration = cc.EventListener.extend({
  _onAccelerationEvent: null,
  ctor: function (a) {
    this._onAccelerationEvent = a;
    var b = this;
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.ACCELERATION,
      cc._EventListenerAcceleration.LISTENER_ID,
      function (a) {
        b._onAccelerationEvent(a._acc, a);
      }
    );
  },
  checkAvailable: function () {
    cc.assert(
      this._onAccelerationEvent,
      cc._LogInfos._EventListenerAcceleration_checkAvailable
    );
    return !0;
  },
  clone: function () {
    return new cc._EventListenerAcceleration(this._onAccelerationEvent);
  },
});
cc._EventListenerAcceleration.LISTENER_ID = "__cc_acceleration";
cc._EventListenerAcceleration.create = function (a) {
  return new cc._EventListenerAcceleration(a);
};
cc._EventListenerKeyboard = cc.EventListener.extend({
  onKeyPressed: null,
  onKeyReleased: null,
  ctor: function () {
    var a = this;
    cc.EventListener.prototype.ctor.call(
      this,
      cc.EventListener.KEYBOARD,
      cc._EventListenerKeyboard.LISTENER_ID,
      function (b) {
        if (b._isPressed) {
          if (a.onKeyPressed) a.onKeyPressed(b._keyCode, b);
        } else if (a.onKeyReleased) a.onKeyReleased(b._keyCode, b);
      }
    );
  },
  clone: function () {
    var a = new cc._EventListenerKeyboard();
    a.onKeyPressed = this.onKeyPressed;
    a.onKeyReleased = this.onKeyReleased;
    return a;
  },
  checkAvailable: function () {
    return null === this.onKeyPressed && null === this.onKeyReleased
      ? (cc.log(cc._LogInfos._EventListenerKeyboard_checkAvailable), !1)
      : !0;
  },
});
cc._EventListenerKeyboard.LISTENER_ID = "__cc_keyboard";
cc._EventListenerKeyboard.create = function () {
  return new cc._EventListenerKeyboard();
};
var GlobalVertexBuffer = (function () {
  var a = function (a, d) {
    this.gl = a;
    this.vertexBuffer = a.createBuffer();
    this.size = 888;
    this.byteLength = d || 3552 * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
    this.data = new ArrayBuffer(this.byteLength);
    this.dataArray = new Float32Array(this.data);
    a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer);
    a.bufferData(a.ARRAY_BUFFER, this.dataArray, a.DYNAMIC_DRAW);
    this._dirty = !1;
    this._spaces = { 0: this.byteLength };
  };
  a.prototype = {
    constructor: a,
    allocBuffer: function (a, d) {
      var e = this._spaces[a];
      return e && e >= d
        ? (delete this._spaces[a], e > d && (this._spaces[a + d] = e - d), !0)
        : !1;
    },
    requestBuffer: function (a) {
      var d, e, f;
      for (d in this._spaces)
        if (
          ((e = parseInt(d)),
          (f = this._spaces[d]),
          f >= a && this.allocBuffer(e, a))
        )
          return e;
      return -1;
    },
    freeBuffer: function (a, d) {
      var e = this._spaces,
        f,
        g;
      for (g in e) {
        f = parseInt(g);
        if (f > a) break;
        if (f + e[g] >= a) {
          d = d + a - f;
          a = f;
          break;
        }
      }
      e = a + d;
      this._spaces[e] && ((d += this._spaces[e]), delete this._spaces[e]);
      this._spaces[a] = d;
    },
    setDirty: function () {
      this._dirty = !0;
    },
    update: function () {
      this._dirty &&
        (this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer),
        this.gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.dataArray),
        (this._dirty = !1));
    },
    updateSubData: function (a, d) {
      this.gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
      this.gl.bufferSubData(gl.ARRAY_BUFFER, a, d);
    },
    destroy: function () {
      this.gl.deleteBuffer(this.vertexBuffer);
      this.vertexBuffer = this.texCoords = this.colors = this.positions = this.data = null;
    },
  };
  return a;
})();
cc.rendererCanvas = {
  childrenOrderDirty: !0,
  assignedZ: 0,
  assignedZStep: 1e-4,
  _transformNodePool: [],
  _renderCmds: [],
  _isCacheToCanvasOn: !1,
  _cacheToCanvasCmds: {},
  _cacheInstanceIds: [],
  _currentID: 0,
  _clearColor: cc.color(),
  _clearFillStyle: "rgb(0, 0, 0)",
  _dirtyRegion: null,
  _allNeedDraw: !0,
  _enableDirtyRegion: !1,
  _debugDirtyRegion: !1,
  _canUseDirtyRegion: !1,
  _dirtyRegionCountThreshold: 10,
  getRenderCmd: function (a) {
    return a._createRenderCmd();
  },
  enableDirtyRegion: function (a) {
    this._enableDirtyRegion = a;
  },
  isDirtyRegionEnabled: function () {
    return this._enableDirtyRegion;
  },
  setDirtyRegionCountThreshold: function (a) {
    this._dirtyRegionCountThreshold = a;
  },
  _collectDirtyRegion: function () {
    var a = this._renderCmds,
      b,
      d,
      e = this._dirtyRegion,
      f = 0,
      g = !0,
      h = cc.Node.CanvasRenderCmd.RegionStatus;
    b = 0;
    for (d = a.length; b < d; b++) {
      var k = a[b],
        m = k._oldRegion,
        n = k._currentRegion;
      k._regionFlag > h.NotDirty &&
        (++f,
        f > this._dirtyRegionCountThreshold && (g = !1),
        g &&
          (!n.isEmpty() && e.addRegion(n),
          k._regionFlag > h.Dirty && !m.isEmpty() && e.addRegion(m)),
        (k._regionFlag = h.NotDirty));
    }
    return g;
  },
  _beginDrawDirtyRegion: function (a) {
    var b = a.getContext(),
      d = this._dirtyRegion.getDirtyRegions();
    b.save();
    a.setTransform(
      { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 },
      a._scaleX,
      a._scaleY
    );
    b.beginPath();
    a = 0;
    for (var e = d.length; a < e; ++a) {
      var f = d[a];
      b.rect(f._minX, -f._maxY, f._width, f._height);
    }
    b.clip();
  },
  _endDrawDirtyRegion: function (a) {
    a.restore();
  },
  _debugDrawDirtyRegion: function (a) {
    if (this._debugDirtyRegion) {
      var b = a.getContext(),
        d = this._dirtyRegion.getDirtyRegions();
      a.setTransform(
        { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 },
        a._scaleX,
        a._scaleY
      );
      b.beginPath();
      a = 0;
      for (var e = d.length; a < e; ++a) {
        var f = d[a];
        b.rect(f._minX, -f._maxY, f._width, f._height);
      }
      d = b.fillStyle;
      b.fillStyle = "green";
      b.fill();
      b.fillStyle = d;
    }
  },
  rendering: function (a) {
    var b = (this._dirtyRegion = this._dirtyRegion || new cc.DirtyRegion()),
      d = cc._canvas;
    a = a || cc._renderContext;
    var e = a.getContext(),
      f = cc.view.getScaleX(),
      g = cc.view.getScaleY();
    a.setViewScale(f, g);
    a.computeRealOffsetY();
    var h = this._dirtyRegion.getDirtyRegions(),
      k = this._renderCmds,
      m,
      n =
        this._allNeedDraw ||
        !this._enableDirtyRegion ||
        !this._canUseDirtyRegion;
    m = !0;
    n || (m = this._collectDirtyRegion());
    (n = n || !m) || this._beginDrawDirtyRegion(a);
    e.setTransform(1, 0, 0, 1, 0, 0);
    e.clearRect(0, 0, d.width, d.height);
    if (
      255 !== this._clearColor.r ||
      255 !== this._clearColor.g ||
      255 !== this._clearColor.b
    )
      a.setFillStyle(this._clearFillStyle),
        a.setGlobalAlpha(this._clearColor.a),
        e.fillRect(0, 0, d.width, d.height);
    d = 0;
    for (m = k.length; d < m; d++) {
      var p = k[d],
        r = !1,
        s = p._currentRegion;
      if (!s || n) r = !0;
      else
        for (var u = 0, v = h.length; u < v; ++u)
          if (h[u].intersects(s)) {
            r = !0;
            break;
          }
      r && p.rendering(a, f, g);
    }
    n || (this._debugDrawDirtyRegion(a), this._endDrawDirtyRegion(e));
    b.clear();
    this._allNeedDraw = !1;
  },
  _renderingToCacheCanvas: function (a, b, d, e) {
    a || cc.log("The context of RenderTexture is invalid.");
    d = cc.isUndefined(d) ? 1 : d;
    e = cc.isUndefined(e) ? 1 : e;
    b = b || this._currentID;
    var f,
      g = this._cacheToCanvasCmds[b],
      h;
    a.computeRealOffsetY();
    f = 0;
    for (h = g.length; f < h; f++) g[f].rendering(a, d, e);
    this._removeCache(b);
    a = this._cacheInstanceIds;
    0 === a.length
      ? (this._isCacheToCanvasOn = !1)
      : (this._currentID = a[a.length - 1]);
  },
  _turnToCacheMode: function (a) {
    this._isCacheToCanvasOn = !0;
    a = a || 0;
    this._cacheToCanvasCmds[a] = [];
    -1 === this._cacheInstanceIds.indexOf(a) && this._cacheInstanceIds.push(a);
    this._currentID = a;
  },
  _turnToNormalMode: function () {
    this._isCacheToCanvasOn = !1;
  },
  _removeCache: function (a) {
    a = a || this._currentID;
    var b = this._cacheToCanvasCmds[a];
    b && ((b.length = 0), delete this._cacheToCanvasCmds[a]);
    cc.arrayRemoveObject(this._cacheInstanceIds, a);
  },
  resetFlag: function () {
    this.childrenOrderDirty = !1;
    this._transformNodePool.length = 0;
  },
  transform: function () {
    var a = this._transformNodePool;
    a.sort(this._sortNodeByLevelAsc);
    for (var b = 0, d = a.length; b < d; b++)
      0 !== a[b]._dirtyFlag && a[b].updateStatus();
    a.length = 0;
  },
  transformDirty: function () {
    return 0 < this._transformNodePool.length;
  },
  _sortNodeByLevelAsc: function (a, b) {
    return a._curLevel - b._curLevel;
  },
  pushDirtyNode: function (a) {
    this._transformNodePool.push(a);
  },
  clear: function () {},
  clearRenderCommands: function () {
    this._renderCmds.length = 0;
    this._cacheInstanceIds.length = 0;
    this._isCacheToCanvasOn = !1;
    this._canUseDirtyRegion = this._allNeedDraw = !0;
  },
  pushRenderCommand: function (a) {
    if (a.needDraw())
      if (
        (a._canUseDirtyRegion || (this._canUseDirtyRegion = !1),
        this._isCacheToCanvasOn)
      ) {
        var b = this._cacheToCanvasCmds[this._currentID];
        -1 === b.indexOf(a) && b.push(a);
      } else -1 === this._renderCmds.indexOf(a) && this._renderCmds.push(a);
  },
};
(function () {
  cc.CanvasContextWrapper = function (a) {
    this._context = a;
    this._saveCount = 0;
    this._currentAlpha = a.globalAlpha;
    this._currentCompositeOperation = a.globalCompositeOperation;
    this._currentFillStyle = a.fillStyle;
    this._currentStrokeStyle = a.strokeStyle;
    this._offsetY = this._offsetX = 0;
    this._realOffsetY = this.height;
    this._armatureMode = 0;
  };
  var a = cc.CanvasContextWrapper.prototype;
  a.resetCache = function () {
    var a = this._context;
    this._currentAlpha = a.globalAlpha;
    this._currentCompositeOperation = a.globalCompositeOperation;
    this._currentFillStyle = a.fillStyle;
    this._currentStrokeStyle = a.strokeStyle;
    this._realOffsetY = this._context.canvas.height + this._offsetY;
  };
  a.setOffset = function (a, d) {
    this._offsetX = a;
    this._offsetY = d;
    this._realOffsetY = this._context.canvas.height + this._offsetY;
  };
  a.computeRealOffsetY = function () {
    this._realOffsetY = this._context.canvas.height + this._offsetY;
  };
  a.setViewScale = function (a, d) {
    this._scaleX = a;
    this._scaleY = d;
  };
  a.getContext = function () {
    return this._context;
  };
  a.save = function () {
    this._context.save();
    this._saveCount++;
  };
  a.restore = function () {
    this._context.restore();
    this._saveCount--;
  };
  a.setGlobalAlpha = function (a) {
    0 < this._saveCount
      ? (this._context.globalAlpha = a)
      : this._currentAlpha !== a &&
        ((this._currentAlpha = a), (this._context.globalAlpha = a));
  };
  a.setCompositeOperation = function (a) {
    0 < this._saveCount
      ? (this._context.globalCompositeOperation = a)
      : this._currentCompositeOperation !== a &&
        ((this._currentCompositeOperation = a),
        (this._context.globalCompositeOperation = a));
  };
  a.setFillStyle = function (a) {
    0 < this._saveCount
      ? (this._context.fillStyle = a)
      : this._currentFillStyle !== a &&
        ((this._currentFillStyle = a), (this._context.fillStyle = a));
  };
  a.setStrokeStyle = function (a) {
    0 < this._saveCount
      ? (this._context.strokeStyle = a)
      : this._currentStrokeStyle !== a &&
        ((this._currentStrokeStyle = a), (this._context.strokeStyle = a));
  };
  a.setTransform = function (a, d, e) {
    0 < this._armatureMode
      ? (this.restore(),
        this.save(),
        this._context.transform(
          a.a * d,
          -a.b * e,
          -a.c * d,
          a.d * e,
          a.tx * d,
          -(a.ty * e)
        ))
      : this._context.setTransform(
          a.a * d,
          -a.b * e,
          -a.c * d,
          a.d * e,
          this._offsetX + a.tx * d,
          this._realOffsetY - a.ty * e
        );
  };
  a._switchToArmatureMode = function (a, d, e, f) {
    a
      ? (this._armatureMode++,
        this._context.setTransform(
          d.a,
          d.c,
          d.b,
          d.d,
          this._offsetX + d.tx * e,
          this._realOffsetY - d.ty * f
        ),
        this.save())
      : (this._armatureMode--, this.restore());
  };
})();
cc.rendererWebGL = (function () {
  var a = {
      texture: null,
      blendSrc: null,
      blendDst: null,
      glProgramState: null,
    },
    b = !1,
    d = null,
    e = null,
    f = 0,
    g = 0,
    h = 0,
    k = null,
    m = 0,
    n = null,
    p = null,
    r = null,
    s = 0,
    u = !0,
    v = { QUAD: 0, TRIANGLE: 1, CUSTOM: 2 };
  return {
    mat4Identity: null,
    childrenOrderDirty: !0,
    assignedZ: 0,
    assignedZStep: 0.01,
    VertexType: v,
    _transformNodePool: [],
    _renderCmds: [],
    _isCacheToBufferOn: !1,
    _cacheToBufferCmds: {},
    _cacheInstanceIds: [],
    _currentID: 0,
    _clearColor: cc.color(0, 0, 0, 255),
    init: function () {
      var a = cc._renderContext;
      a.disable(a.CULL_FACE);
      a.disable(a.DEPTH_TEST);
      this.mat4Identity = new cc.math.Matrix4();
      this.mat4Identity.identity();
      var a = cc.BATCH_VERTEX_COUNT,
        b = cc._renderContext;
      null === d && ((e = b.createBuffer()), (d = b.createBuffer()));
      b = cc._renderContext;
      if (d) {
        var g = 6 * Math.ceil(a / 4);
        b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, d);
        r = new Uint16Array(g);
        for (var h = 0, s = 0; s < g; s += 6)
          (r[s] = h + 0),
            (r[s + 1] = h + 1),
            (r[s + 2] = h + 2),
            (r[s + 3] = h + 1),
            (r[s + 4] = h + 2),
            (r[s + 5] = h + 3),
            (h += 4);
        b.bufferData(b.ELEMENT_ARRAY_BUFFER, r, b.DYNAMIC_DRAW);
      }
      e &&
        ((m = 6 * a),
        (k = new ArrayBuffer(4 * m)),
        (n = new Float32Array(k)),
        (p = new Uint32Array(k)),
        b.bindBuffer(b.ARRAY_BUFFER, e),
        b.bufferData(b.ARRAY_BUFFER, n, b.DYNAMIC_DRAW));
      f = a - 200;
    },
    getVertexSize: function () {
      return f;
    },
    getRenderCmd: function (a) {
      return a._createRenderCmd();
    },
    _turnToCacheMode: function (a) {
      this._isCacheToBufferOn = !0;
      a = a || 0;
      this._cacheToBufferCmds[a]
        ? (this._cacheToBufferCmds[a].length = 0)
        : (this._cacheToBufferCmds[a] = []);
      -1 === this._cacheInstanceIds.indexOf(a) &&
        this._cacheInstanceIds.push(a);
      this._currentID = a;
    },
    _turnToNormalMode: function () {
      this._isCacheToBufferOn = !1;
    },
    _removeCache: function (a) {
      a = a || this._currentID;
      var b = this._cacheToBufferCmds[a];
      b && ((b.length = 0), delete this._cacheToBufferCmds[a]);
      cc.arrayRemoveObject(this._cacheInstanceIds, a);
    },
    _renderingToBuffer: function (a) {
      a = a || this._currentID;
      this.rendering(cc._renderContext, this._cacheToBufferCmds[a]);
      this._removeCache(a);
      a = this._cacheInstanceIds;
      0 === a.length
        ? (this._isCacheToBufferOn = !1)
        : (this._currentID = a[a.length - 1]);
    },
    resetFlag: function () {
      this.childrenOrderDirty && (this.childrenOrderDirty = !1);
      this._transformNodePool.length = 0;
    },
    transform: function () {
      var a = this._transformNodePool;
      a.sort(this._sortNodeByLevelAsc);
      var b, d, e;
      b = 0;
      for (d = a.length; b < d; b++) (e = a[b]), e.updateStatus();
      a.length = 0;
    },
    transformDirty: function () {
      return 0 < this._transformNodePool.length;
    },
    _sortNodeByLevelAsc: function (a, b) {
      return a._curLevel - b._curLevel;
    },
    pushDirtyNode: function (a) {
      this._transformNodePool.push(a);
    },
    clearRenderCommands: function () {
      this._renderCmds.length = 0;
    },
    clear: function () {
      var a = cc._renderContext;
      a.clearColor(
        this._clearColor.r / 255,
        this._clearColor.g / 255,
        this._clearColor.b / 255,
        this._clearColor.a / 255
      );
      a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT);
    },
    setDepthTest: function (a) {
      var b = cc._renderContext;
      a
        ? (b.clearDepth(1), b.enable(b.DEPTH_TEST), b.depthFunc(b.LEQUAL))
        : b.disable(b.DEPTH_TEST);
    },
    pushRenderCommand: function (a) {
      if (a.rendering || a.uploadData)
        if (this._isCacheToBufferOn) {
          var b = this._cacheToBufferCmds[this._currentID];
          -1 === b.indexOf(a) && b.push(a);
        } else -1 === this._renderCmds.indexOf(a) && this._renderCmds.push(a);
    },
    _increaseBatchingSize: function (a, b, d) {
      b = b || v.QUAD;
      switch (b) {
        case v.QUAD:
          for (b = 0; b < a; b += 4)
            (d = g + b),
              (r[h++] = d + 0),
              (r[h++] = d + 1),
              (r[h++] = d + 2),
              (r[h++] = d + 1),
              (r[h++] = d + 2),
              (r[h++] = d + 3);
          break;
        case v.TRIANGLE:
          u = !1;
          for (b = 0; b < a; b += 3)
            (d = g + b), (r[h++] = d + 0), (r[h++] = d + 1), (r[h++] = d + 2);
          break;
        case v.CUSTOM:
          u = !1;
          var e = d.length;
          for (b = 0; b < e; b++) r[h++] = g + d[b];
          break;
        default:
          return;
      }
      g += a;
    },
    _updateBatchedInfo: function (b, d, e) {
      return b !== a.texture ||
        d.src !== a.blendSrc ||
        d.dst !== a.blendDst ||
        e !== a.glProgramState
        ? (this._batchRendering(),
          (a.texture = b),
          (a.blendSrc = d.src),
          (a.blendDst = d.dst),
          (a.glProgramState = e),
          !0)
        : !1;
    },
    _breakBatch: function () {
      b = !0;
    },
    _uploadBufferData: function (d) {
      g >= f && this._batchRendering();
      var e = d._node,
        h = e._texture || (e._spriteFrame && e._spriteFrame._texture),
        k = e._blendFunc.src,
        e = e._blendFunc.dst,
        m = d._glProgramState;
      if (
        b ||
        a.texture !== h ||
        a.blendSrc !== k ||
        a.blendDst !== e ||
        a.glProgramState !== m
      )
        this._batchRendering(),
          (a.texture = h),
          (a.blendSrc = k),
          (a.blendDst = e),
          (a.glProgramState = m),
          (b = !1);
      h = d.uploadData(n, p, 6 * g);
      0 < h && this._increaseBatchingSize(h, d.vertexType);
    },
    _batchRendering: function () {
      if (0 !== g && a.texture) {
        var b = cc._renderContext,
          k = a.texture,
          m = a.glProgramState,
          p = g > 0.5 * f;
        m && (m.apply(), m.getGLProgram()._updateProjectionUniform());
        cc.glBlendFunc(a.blendSrc, a.blendDst);
        cc.glBindTexture2DN(0, k);
        b.bindBuffer(b.ARRAY_BUFFER, e);
        p
          ? b.bufferData(b.ARRAY_BUFFER, n, b.DYNAMIC_DRAW)
          : ((k = n.subarray(0, 6 * g)),
            b.bufferData(b.ARRAY_BUFFER, k, b.DYNAMIC_DRAW));
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
        b.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
        b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, b.FLOAT, !1, 24, 0);
        b.vertexAttribPointer(
          cc.VERTEX_ATTRIB_COLOR,
          4,
          b.UNSIGNED_BYTE,
          !0,
          24,
          12
        );
        b.vertexAttribPointer(
          cc.VERTEX_ATTRIB_TEX_COORDS,
          2,
          b.FLOAT,
          !1,
          24,
          16
        );
        b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, d);
        if (!s || !u || h > s)
          p
            ? b.bufferData(b.ELEMENT_ARRAY_BUFFER, r, b.DYNAMIC_DRAW)
            : b.bufferData(
                b.ELEMENT_ARRAY_BUFFER,
                r.subarray(0, h),
                b.DYNAMIC_DRAW
              );
        b.drawElements(b.TRIANGLES, h, b.UNSIGNED_SHORT, 0);
        cc.g_NumberOfDraws++;
        u ? (s = h) : ((s = 0), (u = !0));
        h = g = 0;
      }
    },
    rendering: function (b, d) {
      var e = d || this._renderCmds,
        f,
        h,
        k,
        m = b || cc._renderContext;
      m.bindBuffer(gl.ARRAY_BUFFER, null);
      f = 0;
      for (h = e.length; f < h; ++f)
        (k = e[f]),
          k.needDraw() &&
            (k.uploadData
              ? this._uploadBufferData(k)
              : (0 < g && this._batchRendering(), k.rendering(m)));
      this._batchRendering();
      a.texture = null;
    },
  };
})();
var Region = function () {
    this._area = this._height = this._width = this._maxY = this._maxX = this._minY = this._minX = 0;
  },
  regionProto = Region.prototype,
  regionPool = [];
function regionCreate() {
  var a = regionPool.pop();
  a || (a = new Region());
  return a;
}
function regionRelease(a) {
  regionPool.push(a);
}
regionProto.setTo = function (a, b, d, e) {
  this._minX = a;
  this._minY = b;
  this._maxX = d;
  this._maxY = e;
  this.updateArea();
  return this;
};
regionProto.intValues = function () {
  this._minX = Math.floor(this._minX);
  this._minY = Math.floor(this._minY);
  this._maxX = Math.ceil(this._maxX);
  this._maxY = Math.ceil(this._maxY);
  this.updateArea();
};
regionProto.updateArea = function () {
  this._width = this._maxX - this._minX;
  this._height = this._maxY - this._minY;
  this._area = this._width * this._height;
};
regionProto.union = function (a) {
  0 >= this._width || 0 >= this._height
    ? this.setTo(a._minX, a._minY, a._maxX, a._maxY)
    : (this._minX > a._minX && (this._minX = a._minX),
      this._minY > a._minY && (this._minY = a._minY),
      this._maxX < a._maxX && (this._maxX = a._maxX),
      this._maxY < a._maxY && (this._maxY = a._maxY),
      this.updateArea());
};
regionProto.setEmpty = function () {
  this._area = this._height = this._width = this._maxY = this._maxX = this._minY = this._minX = 0;
};
regionProto.isEmpty = function () {
  return 0 >= this._width || 0 >= this._height;
};
regionProto.intersects = function (a) {
  if (0 >= this._width || 0 >= this._height || 0 >= a._width || 0 >= a._height)
    return !1;
  var b = this._minX > a._minX ? this._minX : a._minX,
    d = this._maxX < a._maxX ? this._maxX : a._maxX;
  if (b > d) return !1;
  b = this._minY > a._minY ? this._minY : a._minY;
  d = this._maxY < a._maxY ? this._maxY : a._maxY;
  return b <= d;
};
regionProto.updateRegion = function (a, b) {
  if (0 == a.width || 0 == a.height) this.setEmpty();
  else {
    var d = b.a,
      e = b.b,
      f = b.c,
      g = b.d,
      h = b.tx,
      k = b.ty,
      m = a.x,
      n = a.y,
      p = m + a.width,
      r = n + a.height,
      s,
      u,
      v;
    if (1 == d && 0 == e && 0 == f && 1 == g)
      (s = m + h - 1), (u = n + k - 1), (v = p + h + 1), (n = r + k + 1);
    else {
      s = d * m + f * n + h;
      u = e * m + g * n + k;
      v = d * p + f * n + h;
      var n = e * p + g * n + k,
        t = d * p + f * r + h,
        p = e * p + g * r + k,
        h = d * m + f * r + h,
        k = e * m + g * r + k,
        r = 0;
      s > v && ((r = s), (s = v), (v = r));
      t > h && ((r = t), (t = h), (h = r));
      s = (s < t ? s : t) - 1;
      v = (v > h ? v : h) + 1;
      u > n && ((r = u), (u = n), (n = r));
      p > k && ((r = p), (p = k), (k = r));
      u = (u < p ? u : p) - 1;
      n = (n > k ? n : k) + 1;
    }
    this._minX = s;
    this._minY = u;
    this._maxX = v;
    this._maxY = n;
    this._width = v - s;
    this._height = n - u;
    this._area = this._width * this._height;
  }
};
function unionArea(a, b) {
  return (
    ((a._maxX > b._maxX ? a._maxX : b._maxX) -
      (a._minX < b._minX ? a._minX : b._minX)) *
    ((a._maxY > b._maxY ? a._maxY : b._maxY) -
      (a._minY < b._minY ? a._minY : b._minY))
  );
}
var DirtyRegion = function () {
    this.dirtyList = [];
    this.hasClipRect = !1;
    this.clipArea = this.clipHeight = this.clipWidth = 0;
    this.clipRectChanged = !1;
  },
  dirtyRegionProto = DirtyRegion.prototype;
dirtyRegionProto.setClipRect = function (a, b) {
  this.clipRectChanged = this.hasClipRect = !0;
  this.clipWidth = Math.ceil(a);
  this.clipHeight = Math.ceil(b);
  this.clipArea = this.clipWidth * this.clipHeight;
};
dirtyRegionProto.addRegion = function (a) {
  var b = a._minX,
    d = a._minY,
    e = a._maxX;
  a = a._maxY;
  this.hasClipRect &&
    (0 > b && (b = 0),
    0 > d && (d = 0),
    e > this.clipWidth && (e = this.clipWidth),
    a > this.clipHeight && (a = this.clipHeight));
  if (b >= e || d >= a) return !1;
  if (this.clipRectChanged) return !0;
  var f = this.dirtyList,
    g = regionCreate();
  f.push(g.setTo(b, d, e, a));
  this.mergeDirtyList(f);
  return !0;
};
dirtyRegionProto.clear = function () {
  for (var a = this.dirtyList, b = a.length, d = 0; d < b; d++)
    regionRelease(a[d]);
  a.length = 0;
};
dirtyRegionProto.getDirtyRegions = function () {
  var a = this.dirtyList;
  if (this.clipRectChanged) {
    this.clipRectChanged = !1;
    this.clear();
    var b = regionCreate();
    a.push(b.setTo(0, 0, this.clipWidth, this.clipHeight));
  } else for (; this.mergeDirtyList(a); );
  a = this.dirtyList.length;
  if (0 < a) for (b = 0; b < a; b++) this.dirtyList[b].intValues();
  return this.dirtyList;
};
dirtyRegionProto.mergeDirtyList = function (a) {
  var b = a.length;
  if (2 > b) return !1;
  for (
    var d = this.hasClipRect,
      e = 3 < b ? Number.POSITIVE_INFINITY : 0,
      f = 0,
      g = 0,
      h = 0,
      k = 0;
    k < b - 1;
    k++
  ) {
    var m = a[k];
    d && (h += m.area);
    for (var n = k + 1; n < b; n++) {
      var p = a[n],
        p = unionArea(m, p) - m.area - p.area;
      e > p && ((f = k), (g = n), (e = p));
    }
  }
  d && 0.95 < h / this.clipArea && (this.clipRectChanged = !0);
  return f != g
    ? ((b = a[g]), a[f].union(b), regionRelease(b), a.splice(g, 1), !0)
    : !1;
};
cc.Region = Region;
cc.DirtyRegion = DirtyRegion;
cc._tmp.PrototypeCCNode = function () {
  var a = cc.Node.prototype;
  cc.defineGetterSetter(a, "x", a.getPositionX, a.setPositionX);
  cc.defineGetterSetter(a, "y", a.getPositionY, a.setPositionY);
  cc.defineGetterSetter(a, "width", a._getWidth, a._setWidth);
  cc.defineGetterSetter(a, "height", a._getHeight, a._setHeight);
  cc.defineGetterSetter(a, "anchorX", a._getAnchorX, a._setAnchorX);
  cc.defineGetterSetter(a, "anchorY", a._getAnchorY, a._setAnchorY);
  cc.defineGetterSetter(a, "skewX", a.getSkewX, a.setSkewX);
  cc.defineGetterSetter(a, "skewY", a.getSkewY, a.setSkewY);
  cc.defineGetterSetter(a, "zIndex", a.getLocalZOrder, a.setLocalZOrder);
  cc.defineGetterSetter(a, "vertexZ", a.getVertexZ, a.setVertexZ);
  cc.defineGetterSetter(a, "rotation", a.getRotation, a.setRotation);
  cc.defineGetterSetter(a, "rotationX", a.getRotationX, a.setRotationX);
  cc.defineGetterSetter(a, "rotationY", a.getRotationY, a.setRotationY);
  cc.defineGetterSetter(a, "scale", a.getScale, a.setScale);
  cc.defineGetterSetter(a, "scaleX", a.getScaleX, a.setScaleX);
  cc.defineGetterSetter(a, "scaleY", a.getScaleY, a.setScaleY);
  cc.defineGetterSetter(a, "children", a.getChildren);
  cc.defineGetterSetter(a, "childrenCount", a.getChildrenCount);
  cc.defineGetterSetter(a, "parent", a.getParent, a.setParent);
  cc.defineGetterSetter(a, "visible", a.isVisible, a.setVisible);
  cc.defineGetterSetter(a, "running", a.isRunning);
  cc.defineGetterSetter(
    a,
    "ignoreAnchor",
    a.isIgnoreAnchorPointForPosition,
    a.ignoreAnchorPointForPosition
  );
  cc.defineGetterSetter(
    a,
    "actionManager",
    a.getActionManager,
    a.setActionManager
  );
  cc.defineGetterSetter(a, "scheduler", a.getScheduler, a.setScheduler);
  cc.defineGetterSetter(
    a,
    "shaderProgram",
    a.getShaderProgram,
    a.setShaderProgram
  );
  cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
  cc.defineGetterSetter(a, "opacityModifyRGB", a.isOpacityModifyRGB);
  cc.defineGetterSetter(
    a,
    "cascadeOpacity",
    a.isCascadeOpacityEnabled,
    a.setCascadeOpacityEnabled
  );
  cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
  cc.defineGetterSetter(
    a,
    "cascadeColor",
    a.isCascadeColorEnabled,
    a.setCascadeColorEnabled
  );
};
cc.NODE_TAG_INVALID = -1;
cc.s_globalOrderOfArrival = 1;
cc.Node = cc.Class.extend({
  _localZOrder: 0,
  _globalZOrder: 0,
  _vertexZ: 0,
  _customZ: NaN,
  _rotationX: 0,
  _rotationY: 0,
  _scaleX: 1,
  _scaleY: 1,
  _position: null,
  _normalizedPosition: null,
  _usingNormalizedPosition: !1,
  _normalizedPositionDirty: !1,
  _skewX: 0,
  _skewY: 0,
  _children: null,
  _visible: !0,
  _anchorPoint: null,
  _contentSize: null,
  _running: !1,
  _parent: null,
  _ignoreAnchorPointForPosition: !1,
  tag: cc.NODE_TAG_INVALID,
  userData: null,
  userObject: null,
  _reorderChildDirty: !1,
  arrivalOrder: 0,
  _actionManager: null,
  _scheduler: null,
  _additionalTransformDirty: !1,
  _additionalTransform: null,
  _componentContainer: null,
  _isTransitionFinished: !1,
  _className: "Node",
  _showNode: !1,
  _name: "",
  _realOpacity: 255,
  _realColor: null,
  _cascadeColorEnabled: !1,
  _cascadeOpacityEnabled: !1,
  _renderCmd: null,
  ctor: function () {
    this._anchorPoint = cc.p(0, 0);
    this._contentSize = cc.size(0, 0);
    this._position = cc.p(0, 0);
    this._normalizedPosition = cc.p(0, 0);
    this._children = [];
    this._additionalTransform = cc.affineTransformMakeIdentity();
    cc.ComponentContainer &&
      (this._componentContainer = new cc.ComponentContainer(this));
    this._realColor = cc.color(255, 255, 255, 255);
    this._renderCmd = this._createRenderCmd();
  },
  init: function () {
    return !0;
  },
  attr: function (a) {
    for (var b in a) this[b] = a[b];
  },
  getSkewX: function () {
    return this._skewX;
  },
  setSkewX: function (a) {
    this._skewX = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getSkewY: function () {
    return this._skewY;
  },
  setSkewY: function (a) {
    this._skewY = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setLocalZOrder: function (a) {
    a !== this._localZOrder &&
      (this._parent
        ? this._parent.reorderChild(this, a)
        : (this._localZOrder = a),
      cc.eventManager._setDirtyForNode(this));
  },
  _setLocalZOrder: function (a) {
    this._localZOrder = a;
  },
  getLocalZOrder: function () {
    return this._localZOrder;
  },
  getZOrder: function () {
    cc.log(cc._LogInfos.Node_getZOrder);
    return this.getLocalZOrder();
  },
  setZOrder: function (a) {
    cc.log(cc._LogInfos.Node_setZOrder);
    this.setLocalZOrder(a);
  },
  setGlobalZOrder: function (a) {
    this._globalZOrder !== a &&
      ((this._globalZOrder = a), cc.eventManager._setDirtyForNode(this));
  },
  getGlobalZOrder: function () {
    return this._globalZOrder;
  },
  getVertexZ: function () {
    return this._vertexZ;
  },
  setVertexZ: function (a) {
    this._customZ = this._vertexZ = a;
  },
  getRotation: function () {
    this._rotationX !== this._rotationY &&
      cc.log(cc._LogInfos.Node_getRotation);
    return this._rotationX;
  },
  setRotation: function (a) {
    this._rotationX = this._rotationY = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getRotationX: function () {
    return this._rotationX;
  },
  setRotationX: function (a) {
    this._rotationX = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getRotationY: function () {
    return this._rotationY;
  },
  setRotationY: function (a) {
    this._rotationY = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getScale: function () {
    this._scaleX !== this._scaleY && cc.log(cc._LogInfos.Node_getScale);
    return this._scaleX;
  },
  setScale: function (a, b) {
    this._scaleX = a;
    this._scaleY = b || 0 === b ? b : a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getScaleX: function () {
    return this._scaleX;
  },
  setScaleX: function (a) {
    this._scaleX = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getScaleY: function () {
    return this._scaleY;
  },
  setScaleY: function (a) {
    this._scaleY = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setPosition: function (a, b) {
    var d = this._position;
    if (void 0 === b) {
      if (d.x === a.x && d.y === a.y) return;
      d.x = a.x;
      d.y = a.y;
    } else {
      if (d.x === a && d.y === b) return;
      d.x = a;
      d.y = b;
    }
    this._usingNormalizedPosition = !1;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setNormalizedPosition: function (a, b) {
    var d = this._normalizedPosition;
    void 0 === b ? ((d.x = a.x), (d.y = a.y)) : ((d.x = a), (d.y = b));
    this._normalizedPositionDirty = this._usingNormalizedPosition = !0;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getPosition: function () {
    return cc.p(this._position);
  },
  getNormalizedPosition: function () {
    return cc.p(this._normalizedPosition);
  },
  getPositionX: function () {
    return this._position.x;
  },
  setPositionX: function (a) {
    this._position.x = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getPositionY: function () {
    return this._position.y;
  },
  setPositionY: function (a) {
    this._position.y = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getChildrenCount: function () {
    return this._children.length;
  },
  getChildren: function () {
    return this._children;
  },
  isVisible: function () {
    return this._visible;
  },
  setVisible: function (a) {
    this._visible !== a &&
      ((this._visible = a),
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),
      (cc.renderer.childrenOrderDirty = !0));
  },
  getAnchorPoint: function () {
    return cc.p(this._anchorPoint);
  },
  setAnchorPoint: function (a, b) {
    var d = this._anchorPoint;
    if (void 0 === b) {
      if (a.x === d.x && a.y === d.y) return;
      d.x = a.x;
      d.y = a.y;
    } else {
      if (a === d.x && b === d.y) return;
      d.x = a;
      d.y = b;
    }
    this._renderCmd._updateAnchorPointInPoint();
  },
  _getAnchorX: function () {
    return this._anchorPoint.x;
  },
  _setAnchorX: function (a) {
    this._anchorPoint.x !== a &&
      ((this._anchorPoint.x = a), this._renderCmd._updateAnchorPointInPoint());
  },
  _getAnchorY: function () {
    return this._anchorPoint.y;
  },
  _setAnchorY: function (a) {
    this._anchorPoint.y !== a &&
      ((this._anchorPoint.y = a), this._renderCmd._updateAnchorPointInPoint());
  },
  getAnchorPointInPoints: function () {
    return this._renderCmd.getAnchorPointInPoints();
  },
  _getWidth: function () {
    return this._contentSize.width;
  },
  _setWidth: function (a) {
    this._contentSize.width = a;
    this._renderCmd._updateAnchorPointInPoint();
  },
  _getHeight: function () {
    return this._contentSize.height;
  },
  _setHeight: function (a) {
    this._contentSize.height = a;
    this._renderCmd._updateAnchorPointInPoint();
  },
  getContentSize: function () {
    return cc.size(this._contentSize);
  },
  setContentSize: function (a, b) {
    var d = this._contentSize;
    if (void 0 === b) {
      if (a.width === d.width && a.height === d.height) return;
      d.width = a.width;
      d.height = a.height;
    } else {
      if (a === d.width && b === d.height) return;
      d.width = a;
      d.height = b;
    }
    this._renderCmd._updateAnchorPointInPoint();
  },
  isRunning: function () {
    return this._running;
  },
  getParent: function () {
    return this._parent;
  },
  setParent: function (a) {
    this._parent = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  isIgnoreAnchorPointForPosition: function () {
    return this._ignoreAnchorPointForPosition;
  },
  ignoreAnchorPointForPosition: function (a) {
    a !== this._ignoreAnchorPointForPosition &&
      ((this._ignoreAnchorPointForPosition = a),
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty));
  },
  getTag: function () {
    return this.tag;
  },
  setTag: function (a) {
    this.tag = a;
  },
  setName: function (a) {
    this._name = a;
  },
  getName: function () {
    return this._name;
  },
  getUserData: function () {
    return this.userData;
  },
  setUserData: function (a) {
    this.userData = a;
  },
  getUserObject: function () {
    return this.userObject;
  },
  setUserObject: function (a) {
    this.userObject !== a && (this.userObject = a);
  },
  getOrderOfArrival: function () {
    return this.arrivalOrder;
  },
  setOrderOfArrival: function (a) {
    this.arrivalOrder = a;
  },
  getActionManager: function () {
    return this._actionManager || cc.director.getActionManager();
  },
  setActionManager: function (a) {
    this._actionManager !== a &&
      (this.stopAllActions(), (this._actionManager = a));
  },
  getScheduler: function () {
    return this._scheduler || cc.director.getScheduler();
  },
  setScheduler: function (a) {
    this._scheduler !== a &&
      (this.unscheduleAllCallbacks(), (this._scheduler = a));
  },
  boundingBox: function () {
    cc.log(cc._LogInfos.Node_boundingBox);
    return this.getBoundingBox();
  },
  getBoundingBox: function () {
    var a = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
    return cc._rectApplyAffineTransformIn(a, this.getNodeToParentTransform());
  },
  cleanup: function () {
    this.stopAllActions();
    this.unscheduleAllCallbacks();
    cc.eventManager.removeListeners(this);
  },
  getChildByTag: function (a) {
    var b = this._children;
    if (null !== b)
      for (var d = 0; d < b.length; d++) {
        var e = b[d];
        if (e && e.tag === a) return e;
      }
    return null;
  },
  getChildByName: function (a) {
    if (!a) return cc.log("Invalid name"), null;
    for (var b = this._children, d = 0, e = b.length; d < e; d++)
      if (b[d]._name === a) return b[d];
    return null;
  },
  addChild: function (a, b, d) {
    b = void 0 === b ? a._localZOrder : b;
    var e,
      f = !1;
    void 0 === d
      ? (e = a._name)
      : "string" === typeof d
      ? ((e = d), (d = void 0))
      : "number" === typeof d && ((f = !0), (e = ""));
    cc.assert(a, cc._LogInfos.Node_addChild_3);
    cc.assert(
      null === a._parent,
      "child already added. It can't be added again"
    );
    this._addChildHelper(a, b, d, e, f);
  },
  _addChildHelper: function (a, b, d, e, f) {
    this._children || (this._children = []);
    this._insertChild(a, b);
    f ? a.setTag(d) : a.setName(e);
    a.setParent(this);
    a.setOrderOfArrival(cc.s_globalOrderOfArrival++);
    this._running &&
      (a._performRecursive(cc.Node._stateCallbackType.onEnter),
      this._isTransitionFinished &&
        a._performRecursive(
          cc.Node._stateCallbackType.onEnterTransitionDidFinish
        ));
    a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    this._cascadeColorEnabled &&
      a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
    this._cascadeOpacityEnabled &&
      a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  removeFromParent: function (a) {
    this._parent &&
      (void 0 === a && (a = !0), this._parent.removeChild(this, a));
  },
  removeFromParentAndCleanup: function (a) {
    cc.log(cc._LogInfos.Node_removeFromParentAndCleanup);
    this.removeFromParent(a);
  },
  removeChild: function (a, b) {
    0 !== this._children.length &&
      (void 0 === b && (b = !0),
      -1 < this._children.indexOf(a) && this._detachChild(a, b),
      (cc.renderer.childrenOrderDirty = !0));
  },
  removeChildByTag: function (a, b) {
    a === cc.NODE_TAG_INVALID && cc.log(cc._LogInfos.Node_removeChildByTag);
    var d = this.getChildByTag(a);
    d
      ? this.removeChild(d, b)
      : cc.log(cc._LogInfos.Node_removeChildByTag_2, a);
  },
  removeAllChildrenWithCleanup: function (a) {
    this.removeAllChildren(a);
  },
  removeAllChildren: function (a) {
    var b = this._children;
    if (null !== b) {
      void 0 === a && (a = !0);
      for (var d = 0; d < b.length; d++) {
        var e = b[d];
        e &&
          (this._running &&
            (e._performRecursive(
              cc.Node._stateCallbackType.onExitTransitionDidStart
            ),
            e._performRecursive(cc.Node._stateCallbackType.onExit)),
          a && e._performRecursive(cc.Node._stateCallbackType.cleanup),
          (e.parent = null),
          e._renderCmd.detachFromParent());
      }
      this._children.length = 0;
      cc.renderer.childrenOrderDirty = !0;
    }
  },
  _detachChild: function (a, b) {
    this._running &&
      (a._performRecursive(cc.Node._stateCallbackType.onExitTransitionDidStart),
      a._performRecursive(cc.Node._stateCallbackType.onExit));
    b && a._performRecursive(cc.Node._stateCallbackType.cleanup);
    a.parent = null;
    a._renderCmd.detachFromParent();
    cc.arrayRemoveObject(this._children, a);
  },
  _insertChild: function (a, b) {
    cc.renderer.childrenOrderDirty = this._reorderChildDirty = !0;
    this._children.push(a);
    a._setLocalZOrder(b);
  },
  setNodeDirty: function () {
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  reorderChild: function (a, b) {
    cc.assert(a, cc._LogInfos.Node_reorderChild);
    -1 === this._children.indexOf(a)
      ? cc.log(cc._LogInfos.Node_reorderChild_2)
      : ((cc.renderer.childrenOrderDirty = this._reorderChildDirty = !0),
        (a.arrivalOrder = cc.s_globalOrderOfArrival),
        cc.s_globalOrderOfArrival++,
        a._setLocalZOrder(b),
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.orderDirty));
  },
  sortAllChildren: function () {
    if (this._reorderChildDirty) {
      var a = this._children,
        b = a.length,
        d,
        e,
        f;
      for (d = 1; d < b; d++) {
        f = a[d];
        for (e = d - 1; 0 <= e; ) {
          if (f._localZOrder < a[e]._localZOrder) a[e + 1] = a[e];
          else if (
            f._localZOrder === a[e]._localZOrder &&
            f.arrivalOrder < a[e].arrivalOrder
          )
            a[e + 1] = a[e];
          else break;
          e--;
        }
        a[e + 1] = f;
      }
      this._reorderChildDirty = !1;
    }
  },
  draw: function (a) {},
  transformAncestors: function () {
    null !== this._parent &&
      (this._parent.transformAncestors(), this._parent.transform());
  },
  onEnter: function () {
    this._isTransitionFinished = !1;
    this._running = !0;
    this.resume();
  },
  _performRecursive: function (a) {
    var b = cc.Node._stateCallbackType;
    if (!(a >= b.max)) {
      var d = 0,
        e,
        f,
        g,
        h,
        k,
        m = cc.Node._performStacks[cc.Node._performing];
      m || ((m = []), cc.Node._performStacks.push(m));
      m.length = 0;
      cc.Node._performing++;
      for (g = m[0] = this; g; ) {
        if ((e = g._children) && 0 < e.length)
          for (h = 0, k = e.length; h < k; ++h) (f = e[h]), m.push(f);
        if ((e = g._protectedChildren) && 0 < e.length)
          for (h = 0, k = e.length; h < k; ++h) (f = e[h]), m.push(f);
        d++;
        g = m[d];
      }
      for (h = m.length - 1; 0 <= h; --h)
        if (((g = m[h]), (m[h] = null), g))
          switch (a) {
            case b.onEnter:
              g.onEnter();
              break;
            case b.onExit:
              g.onExit();
              break;
            case b.onEnterTransitionDidFinish:
              g.onEnterTransitionDidFinish();
              break;
            case b.cleanup:
              g.cleanup();
              break;
            case b.onExitTransitionDidStart:
              g.onExitTransitionDidStart();
          }
      cc.Node._performing--;
    }
  },
  onEnterTransitionDidFinish: function () {
    this._isTransitionFinished = !0;
  },
  onExitTransitionDidStart: function () {},
  onExit: function () {
    this._running = !1;
    this.pause();
    this.removeAllComponents();
  },
  runAction: function (a) {
    cc.assert(a, cc._LogInfos.Node_runAction);
    this.actionManager.addAction(a, this, !this._running);
    return a;
  },
  stopAllActions: function () {
    this.actionManager && this.actionManager.removeAllActionsFromTarget(this);
  },
  stopAction: function (a) {
    this.actionManager.removeAction(a);
  },
  stopActionByTag: function (a) {
    a === cc.ACTION_TAG_INVALID
      ? cc.log(cc._LogInfos.Node_stopActionByTag)
      : this.actionManager.removeActionByTag(a, this);
  },
  getActionByTag: function (a) {
    return a === cc.ACTION_TAG_INVALID
      ? (cc.log(cc._LogInfos.Node_getActionByTag), null)
      : this.actionManager.getActionByTag(a, this);
  },
  getNumberOfRunningActions: function () {
    return this.actionManager.numberOfRunningActionsInTarget(this);
  },
  scheduleUpdate: function () {
    this.scheduleUpdateWithPriority(0);
  },
  scheduleUpdateWithPriority: function (a) {
    this.scheduler.scheduleUpdate(this, a, !this._running);
  },
  unscheduleUpdate: function () {
    this.scheduler.unscheduleUpdate(this);
  },
  schedule: function (a, b, d, e, f) {
    var g = arguments.length;
    "function" === typeof a
      ? 1 === g
        ? ((b = 0), (d = cc.REPEAT_FOREVER), (e = 0), (f = this.__instanceId))
        : 2 === g
        ? "number" === typeof b
          ? ((d = cc.REPEAT_FOREVER), (e = 0), (f = this.__instanceId))
          : ((f = b), (b = 0), (d = cc.REPEAT_FOREVER), (e = 0))
        : 3 === g
        ? ("string" === typeof d
            ? ((f = d), (d = cc.REPEAT_FOREVER))
            : (f = this.__instanceId),
          (e = 0))
        : 4 === g && (f = this.__instanceId)
      : 1 === g
      ? ((b = 0), (d = cc.REPEAT_FOREVER), (e = 0))
      : 2 === g && ((d = cc.REPEAT_FOREVER), (e = 0));
    cc.assert(a, cc._LogInfos.Node_schedule);
    cc.assert(0 <= b, cc._LogInfos.Node_schedule_2);
    b = b || 0;
    d = isNaN(d) ? cc.REPEAT_FOREVER : d;
    this.scheduler.schedule(a, this, b, d, e || 0, !this._running, f);
  },
  scheduleOnce: function (a, b, d) {
    void 0 === d && (d = this.__instanceId);
    this.schedule(a, 0, 0, b, d);
  },
  unschedule: function (a) {
    a && this.scheduler.unschedule(a, this);
  },
  unscheduleAllCallbacks: function () {
    this.scheduler.unscheduleAllForTarget(this);
  },
  resumeSchedulerAndActions: function () {
    cc.log(cc._LogInfos.Node_resumeSchedulerAndActions);
    this.resume();
  },
  resume: function () {
    this.scheduler.resumeTarget(this);
    this.actionManager && this.actionManager.resumeTarget(this);
    cc.eventManager.resumeTarget(this);
  },
  pauseSchedulerAndActions: function () {
    cc.log(cc._LogInfos.Node_pauseSchedulerAndActions);
    this.pause();
  },
  pause: function () {
    this.scheduler.pauseTarget(this);
    this.actionManager && this.actionManager.pauseTarget(this);
    cc.eventManager.pauseTarget(this);
  },
  setAdditionalTransform: function (a) {
    if (void 0 === a) return (this._additionalTransformDirty = !1);
    this._additionalTransform = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    this._additionalTransformDirty = !0;
  },
  getParentToNodeTransform: function () {
    return this._renderCmd.getParentToNodeTransform();
  },
  parentToNodeTransform: function () {
    return this.getParentToNodeTransform();
  },
  getNodeToWorldTransform: function () {
    for (
      var a = this.getNodeToParentTransform(), b = this._parent;
      null !== b;
      b = b.parent
    )
      a = cc.affineTransformConcat(a, b.getNodeToParentTransform());
    return a;
  },
  nodeToWorldTransform: function () {
    return this.getNodeToWorldTransform();
  },
  getWorldToNodeTransform: function () {
    return cc.affineTransformInvert(this.getNodeToWorldTransform());
  },
  worldToNodeTransform: function () {
    return this.getWorldToNodeTransform();
  },
  convertToNodeSpace: function (a) {
    return cc.pointApplyAffineTransform(a, this.getWorldToNodeTransform());
  },
  convertToWorldSpace: function (a) {
    a = a || cc.p(0, 0);
    return cc.pointApplyAffineTransform(a, this.getNodeToWorldTransform());
  },
  convertToNodeSpaceAR: function (a) {
    return cc.pSub(
      this.convertToNodeSpace(a),
      this._renderCmd.getAnchorPointInPoints()
    );
  },
  convertToWorldSpaceAR: function (a) {
    a = a || cc.p(0, 0);
    a = cc.pAdd(a, this._renderCmd.getAnchorPointInPoints());
    return this.convertToWorldSpace(a);
  },
  _convertToWindowSpace: function (a) {
    a = this.convertToWorldSpace(a);
    return cc.director.convertToUI(a);
  },
  convertTouchToNodeSpace: function (a) {
    a = a.getLocation();
    return this.convertToNodeSpace(a);
  },
  convertTouchToNodeSpaceAR: function (a) {
    a = cc.director.convertToGL(a.getLocation());
    return this.convertToNodeSpaceAR(a);
  },
  update: function (a) {
    this._componentContainer &&
      !this._componentContainer.isEmpty() &&
      this._componentContainer.visit(a);
  },
  updateTransform: function () {
    for (var a = this._children, b, d = 0; d < a.length; d++)
      (b = a[d]) && b.updateTransform();
  },
  retain: function () {},
  release: function () {},
  getComponent: function (a) {
    return this._componentContainer
      ? this._componentContainer.getComponent(a)
      : null;
  },
  addComponent: function (a) {
    this._componentContainer && this._componentContainer.add(a);
  },
  removeComponent: function (a) {
    return this._componentContainer ? this._componentContainer.remove(a) : !1;
  },
  removeAllComponents: function () {
    this._componentContainer && this._componentContainer.removeAll();
  },
  grid: null,
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      a = cc.renderer;
      b.visit(d);
      var e = this._children,
        f = e.length,
        g;
      if (0 < f) {
        this._reorderChildDirty && this.sortAllChildren();
        for (d = 0; d < f; d++)
          if (((g = e[d]), 0 > g._localZOrder)) g.visit(this);
          else break;
        for (a.pushRenderCommand(b); d < f; d++) e[d].visit(this);
      } else a.pushRenderCommand(b);
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  transform: function (a, b) {
    this._renderCmd.transform(a, b);
  },
  nodeToParentTransform: function () {
    return this.getNodeToParentTransform();
  },
  getNodeToParentTransform: function (a) {
    var b = this._renderCmd.getNodeToParentTransform();
    if (a)
      for (
        var b = { a: b.a, b: b.b, c: b.c, d: b.d, tx: b.tx, ty: b.ty },
          d = this._parent;
        null != d && d != a;
        d = d.getParent()
      )
        cc.affineTransformConcatIn(b, d.getNodeToParentTransform());
    return b;
  },
  getNodeToParentAffineTransform: function (a) {
    return this.getNodeToParentTransform(a);
  },
  getCamera: function () {
    return null;
  },
  getGrid: function () {
    return this.grid;
  },
  setGrid: function (a) {
    this.grid = a;
  },
  getShaderProgram: function () {
    return this._renderCmd.getShaderProgram();
  },
  setShaderProgram: function (a) {
    this._renderCmd.setShaderProgram(a);
  },
  setGLProgramState: function (a) {
    this._renderCmd.setGLProgramState(a);
  },
  getGLProgramState: function () {
    return this._renderCmd.getGLProgramState();
  },
  getGLServerState: function () {
    return 0;
  },
  setGLServerState: function (a) {},
  getBoundingBoxToWorld: function () {
    var a = cc.rect(0, 0, this._contentSize.width, this._contentSize.height),
      b = this.getNodeToWorldTransform(),
      a = cc.rectApplyAffineTransform(a, b);
    if (!this._children) return a;
    for (var d = this._children, e = 0; e < d.length; e++) {
      var f = d[e];
      f &&
        f._visible &&
        (f = f._getBoundingBoxToCurrentNode(b)) &&
        (a = cc.rectUnion(a, f));
    }
    return a;
  },
  _getBoundingBoxToCurrentNode: function (a) {
    var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
    a =
      void 0 === a
        ? this.getNodeToParentTransform()
        : cc.affineTransformConcat(this.getNodeToParentTransform(), a);
    b = cc.rectApplyAffineTransform(b, a);
    if (!this._children) return b;
    for (var d = this._children, e = 0; e < d.length; e++) {
      var f = d[e];
      f &&
        f._visible &&
        (f = f._getBoundingBoxToCurrentNode(a)) &&
        (b = cc.rectUnion(b, f));
    }
    return b;
  },
  getOpacity: function () {
    return this._realOpacity;
  },
  getDisplayedOpacity: function () {
    return this._renderCmd.getDisplayedOpacity();
  },
  setOpacity: function (a) {
    this._realOpacity = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  updateDisplayedOpacity: function (a) {
    this._renderCmd._updateDisplayOpacity(a);
  },
  isCascadeOpacityEnabled: function () {
    return this._cascadeOpacityEnabled;
  },
  setCascadeOpacityEnabled: function (a) {
    this._cascadeOpacityEnabled !== a &&
      ((this._cascadeOpacityEnabled = a),
      this._renderCmd.setCascadeOpacityEnabledDirty());
  },
  getColor: function () {
    var a = this._realColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getDisplayedColor: function () {
    return this._renderCmd.getDisplayedColor();
  },
  setColor: function (a) {
    var b = this._realColor;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
  },
  updateDisplayedColor: function (a) {
    this._renderCmd._updateDisplayColor(a);
  },
  isCascadeColorEnabled: function () {
    return this._cascadeColorEnabled;
  },
  setCascadeColorEnabled: function (a) {
    this._cascadeColorEnabled !== a &&
      ((this._cascadeColorEnabled = a),
      this._renderCmd.setCascadeColorEnabledDirty());
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.Node.CanvasRenderCmd(this)
      : new cc.Node.WebGLRenderCmd(this);
  },
  enumerateChildren: function (a, b) {
    cc.assert(a && 0 != a.length, "Invalid name");
    cc.assert(null != b, "Invalid callback function");
    var d = a.length,
      e = 0,
      f = d,
      g = !1;
    2 < d && "/" === a[0] && "/" === a[1] && ((g = !0), (e = 2), (f -= 2));
    var h = !1;
    3 < d &&
      "/" === a[d - 3] &&
      "." === a[d - 2] &&
      "." === a[d - 1] &&
      ((h = !0), (f -= 3));
    d = a.substr(e, f);
    h && (d = "[[:alnum:]]+/" + d);
    g ? this.doEnumerateRecursive(this, d, b) : this.doEnumerate(d, b);
  },
  doEnumerateRecursive: function (a, b, d) {
    var e = !1;
    if (a.doEnumerate(b, d)) e = !0;
    else
      for (var f = a.getChildren(), g = f.length, h = 0; h < g; h++)
        if (((a = f[h]), this.doEnumerateRecursive(a, b, d))) {
          e = !0;
          break;
        }
    return e;
  },
  doEnumerate: function (a, b) {
    var d = a.indexOf("/"),
      e = a,
      f = !1;
    -1 !== d && ((e = a.substr(0, d)), (f = !0));
    for (var d = !1, g, h = this._children, k = h.length, m = 0; m < k; m++)
      if (((g = h[m]), -1 !== g._name.indexOf(e)))
        if (f) {
          if ((d = g.doEnumerate(a, b))) break;
        } else if (b(g)) {
          d = !0;
          break;
        }
    return d;
  },
});
cc.Node.create = function () {
  return new cc.Node();
};
cc.Node._stateCallbackType = {
  onEnter: 1,
  onExit: 2,
  cleanup: 3,
  onEnterTransitionDidFinish: 4,
  onExitTransitionDidStart: 5,
  max: 6,
};
cc.Node._performStacks = [[]];
cc.Node._performing = 0;
cc.assert(
  cc.isFunction(cc._tmp.PrototypeCCNode),
  cc._LogInfos.MissingFile,
  "BaseNodesPropertyDefine.js"
);
cc._tmp.PrototypeCCNode();
delete cc._tmp.PrototypeCCNode;
cc.CustomRenderCmd = function (a, b) {
  this._needDraw = !0;
  this._target = a;
  this._callback = b;
};
cc.CustomRenderCmd.prototype.rendering = function (a, b, d) {
  this._callback && this._callback.call(this._target, a, b, d);
};
cc.CustomRenderCmd.prototype.needDraw = function () {
  return this._needDraw;
};
var dirtyFlags = (cc.Node._dirtyFlags = {
    transformDirty: 1,
    visibleDirty: 2,
    colorDirty: 4,
    opacityDirty: 8,
    cacheDirty: 16,
    orderDirty: 32,
    textDirty: 64,
    gradientDirty: 128,
    textureDirty: 256,
    contentDirty: 512,
    COUNT: 10,
    all: 1023,
  }),
  ONE_DEGREE = Math.PI / 180;
function transformChildTree(a) {
  var b = 1,
    d,
    e,
    f,
    g,
    h,
    k = cc.Node._performStacks[cc.Node._performing];
  k || ((k = []), cc.Node._performStacks.push(k));
  k.length = 0;
  cc.Node._performing++;
  for (k[0] = a; b; )
    if ((b--, (e = k[b]), (k[b] = null), e)) {
      if ((d = e._children) && 0 < d.length)
        for (f = e._renderCmd, g = 0, h = d.length; g < h; ++g)
          (a = d[g]), (k[b] = a), b++, a._renderCmd.transform(f);
      if ((d = e._protectedChildren) && 0 < d.length)
        for (f = e._renderCmd, g = 0, h = d.length; g < h; ++g)
          (a = d[g]), (k[b] = a), b++, a._renderCmd.transform(f);
    }
  cc.Node._performing--;
}
cc.Node.RenderCmd = function (a) {
  this._node = a;
  this._anchorPointInPoints = { x: 0, y: 0 };
  this._displayedColor = cc.color(255, 255, 255, 255);
};
cc.Node.RenderCmd.prototype = {
  constructor: cc.Node.RenderCmd,
  _needDraw: !1,
  _dirtyFlag: 1,
  _curLevel: -1,
  _displayedOpacity: 255,
  _cascadeColorEnabledDirty: !1,
  _cascadeOpacityEnabledDirty: !1,
  _transform: null,
  _worldTransform: null,
  _inverse: null,
  needDraw: function () {
    return this._needDraw;
  },
  getAnchorPointInPoints: function () {
    return cc.p(this._anchorPointInPoints);
  },
  getDisplayedColor: function () {
    var a = this._displayedColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getDisplayedOpacity: function () {
    return this._displayedOpacity;
  },
  setCascadeColorEnabledDirty: function () {
    this._cascadeColorEnabledDirty = !0;
    this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
  },
  setCascadeOpacityEnabledDirty: function () {
    this._cascadeOpacityEnabledDirty = !0;
    this.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  getParentToNodeTransform: function () {
    this._inverse || (this._inverse = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 });
    this._dirtyFlag & cc.Node._dirtyFlags.transformDirty &&
      cc.affineTransformInvertOut(
        this.getNodeToParentTransform(),
        this._inverse
      );
    return this._inverse;
  },
  detachFromParent: function () {},
  _updateAnchorPointInPoint: function () {
    var a = this._anchorPointInPoints,
      b = this._node._contentSize,
      d = this._node._anchorPoint;
    a.x = b.width * d.x;
    a.y = b.height * d.y;
    this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setDirtyFlag: function (a) {
    0 === this._dirtyFlag && 0 !== a && cc.renderer.pushDirtyNode(this);
    this._dirtyFlag |= a;
  },
  getParentRenderCmd: function () {
    return this._node && this._node._parent && this._node._parent._renderCmd
      ? this._node._parent._renderCmd
      : null;
  },
  transform: function (a, b) {
    this._transform ||
      ((this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }),
      (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }));
    var d = this._node,
      e = a ? a._worldTransform : null,
      f = this._transform,
      g = this._worldTransform;
    if (d._usingNormalizedPosition && d._parent) {
      var h = d._parent._contentSize;
      d._position.x = d._normalizedPosition.x * h.width;
      d._position.y = d._normalizedPosition.y * h.height;
      d._normalizedPositionDirty = !1;
    }
    var k = d._rotationX || d._rotationY,
      m = d._skewX || d._skewY,
      n = d._scaleX,
      p = d._scaleY,
      h = this._anchorPointInPoints.x,
      r = this._anchorPointInPoints.y,
      s = 1,
      u = 0,
      v = 0,
      t = 1;
    if (k || m) {
      f.tx = d._position.x;
      f.ty = d._position.y;
      k &&
        ((s = d._rotationX * ONE_DEGREE),
        (v = Math.sin(s)),
        (t = Math.cos(s)),
        d._rotationY === d._rotationX
          ? ((s = t), (u = -v))
          : ((u = d._rotationY * ONE_DEGREE),
            (s = Math.cos(u)),
            (u = -Math.sin(u))));
      f.a = s *= n;
      f.b = u *= n;
      f.c = v *= p;
      f.d = t *= p;
      m &&
        ((m = Math.tan(d._skewX * ONE_DEGREE)),
        (n = Math.tan(d._skewY * ONE_DEGREE)),
        Infinity === m && (m = 99999999),
        Infinity === n && (n = 99999999),
        (f.a = s + v * n),
        (f.b = u + t * n),
        (f.c = v + s * m),
        (f.d = t + u * m));
      if (h || r)
        (f.tx -= f.a * h + f.c * r),
          (f.ty -= f.b * h + f.d * r),
          d._ignoreAnchorPointForPosition && ((f.tx += h), (f.ty += r));
      d._additionalTransformDirty &&
        cc.affineTransformConcatIn(f, d._additionalTransform);
      e
        ? ((g.a = f.a * e.a + f.b * e.c),
          (g.b = f.a * e.b + f.b * e.d),
          (g.c = f.c * e.a + f.d * e.c),
          (g.d = f.c * e.b + f.d * e.d),
          (g.tx = e.a * f.tx + e.c * f.ty + e.tx),
          (g.ty = e.d * f.ty + e.ty + e.b * f.tx))
        : ((g.a = f.a),
          (g.b = f.b),
          (g.c = f.c),
          (g.d = f.d),
          (g.tx = f.tx),
          (g.ty = f.ty));
    } else {
      f.a = n;
      f.b = 0;
      f.c = 0;
      f.d = p;
      f.tx = d._position.x;
      f.ty = d._position.y;
      if (h || r)
        (f.tx -= f.a * h),
          (f.ty -= f.d * r),
          d._ignoreAnchorPointForPosition && ((f.tx += h), (f.ty += r));
      d._additionalTransformDirty &&
        cc.affineTransformConcatIn(f, d._additionalTransform);
      e
        ? ((g.a = f.a * e.a + f.b * e.c),
          (g.b = f.a * e.b + f.b * e.d),
          (g.c = f.c * e.a + f.d * e.c),
          (g.d = f.c * e.b + f.d * e.d),
          (g.tx = f.tx * e.a + f.ty * e.c + e.tx),
          (g.ty = f.tx * e.b + f.ty * e.d + e.ty))
        : ((g.a = f.a),
          (g.b = f.b),
          (g.c = f.c),
          (g.d = f.d),
          (g.tx = f.tx),
          (g.ty = f.ty));
    }
    this._updateCurrentRegions &&
      (this._updateCurrentRegions(),
      this._notifyRegionStatus &&
        this._notifyRegionStatus(
          cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble
        ));
    b && transformChildTree(d);
    this._cacheDirty = !0;
  },
  getNodeToParentTransform: function () {
    (!this._transform ||
      this._dirtyFlag & cc.Node._dirtyFlags.transformDirty) &&
      this.transform();
    return this._transform;
  },
  visit: function (a) {
    var b = this._node,
      d = cc.renderer;
    if ((a = a || this.getParentRenderCmd())) this._curLevel = a._curLevel + 1;
    isNaN(b._customZ) &&
      ((b._vertexZ = d.assignedZ), (d.assignedZ += d.assignedZStep));
    this._syncStatus(a);
  },
  _updateDisplayColor: function (a) {
    var b = this._node,
      d = this._displayedColor,
      e = b._realColor,
      f;
    this._notifyRegionStatus &&
      this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
    if (this._cascadeColorEnabledDirty && !b._cascadeColorEnabled) {
      d.r = e.r;
      d.g = e.g;
      d.b = e.b;
      d = new cc.Color(255, 255, 255, 255);
      a = b._children;
      b = 0;
      for (e = a.length; b < e; b++)
        (f = a[b]) && f._renderCmd && f._renderCmd._updateDisplayColor(d);
      this._cascadeColorEnabledDirty = !1;
    } else if (
      (void 0 === a &&
        (a =
          (a = b._parent) && a._cascadeColorEnabled
            ? a.getDisplayedColor()
            : cc.color.WHITE),
      (d.r = 0 | ((e.r * a.r) / 255)),
      (d.g = 0 | ((e.g * a.g) / 255)),
      (d.b = 0 | ((e.b * a.b) / 255)),
      b._cascadeColorEnabled)
    )
      for (a = b._children, b = 0, e = a.length; b < e; b++)
        (f = a[b]) &&
          f._renderCmd &&
          (f._renderCmd._updateDisplayColor(d), f._renderCmd._updateColor());
    this._dirtyFlag &= ~dirtyFlags.colorDirty;
  },
  _updateDisplayOpacity: function (a) {
    var b = this._node,
      d,
      e;
    this._notifyRegionStatus &&
      this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
    if (this._cascadeOpacityEnabledDirty && !b._cascadeOpacityEnabled) {
      this._displayedOpacity = b._realOpacity;
      d = b._children;
      a = 0;
      for (b = d.length; a < b; a++)
        (e = d[a]) && e._renderCmd && e._renderCmd._updateDisplayOpacity(255);
      this._cascadeOpacityEnabledDirty = !1;
    } else if (
      (void 0 === a &&
        ((d = b._parent),
        (a = 255),
        d && d._cascadeOpacityEnabled && (a = d.getDisplayedOpacity())),
      (this._displayedOpacity = (b._realOpacity * a) / 255),
      b._cascadeOpacityEnabled)
    )
      for (d = b._children, a = 0, b = d.length; a < b; a++)
        (e = d[a]) &&
          e._renderCmd &&
          (e._renderCmd._updateDisplayOpacity(this._displayedOpacity),
          e._renderCmd._updateColor());
    this._dirtyFlag &= ~dirtyFlags.opacityDirty;
  },
  _syncDisplayColor: function (a) {
    var b = this._node,
      d = this._displayedColor,
      e = b._realColor;
    void 0 === a &&
      (a =
        (a = b._parent) && a._cascadeColorEnabled
          ? a.getDisplayedColor()
          : cc.color.WHITE);
    d.r = 0 | ((e.r * a.r) / 255);
    d.g = 0 | ((e.g * a.g) / 255);
    d.b = 0 | ((e.b * a.b) / 255);
  },
  _syncDisplayOpacity: function (a) {
    var b = this._node;
    if (void 0 === a) {
      var d = b._parent;
      a = 255;
      d && d._cascadeOpacityEnabled && (a = d.getDisplayedOpacity());
    }
    this._displayedOpacity = (b._realOpacity * a) / 255;
  },
  _updateColor: function () {},
  _propagateFlagsDown: function (a) {
    var b = this._dirtyFlag,
      d = a ? a._node : null;
    d &&
      d._cascadeColorEnabled &&
      a._dirtyFlag & dirtyFlags.colorDirty &&
      (b |= dirtyFlags.colorDirty);
    d &&
      d._cascadeOpacityEnabled &&
      a._dirtyFlag & dirtyFlags.opacityDirty &&
      (b |= dirtyFlags.opacityDirty);
    a &&
      a._dirtyFlag & dirtyFlags.transformDirty &&
      (b |= dirtyFlags.transformDirty);
    this._dirtyFlag = b;
  },
  updateStatus: function () {
    var a = this._dirtyFlag,
      b = a & dirtyFlags.colorDirty,
      d = a & dirtyFlags.opacityDirty;
    a & dirtyFlags.contentDirty &&
      (this._notifyRegionStatus &&
        this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),
      (this._dirtyFlag &= ~dirtyFlags.contentDirty));
    b && this._updateDisplayColor();
    d && this._updateDisplayOpacity();
    (b || d) && this._updateColor();
    a & dirtyFlags.transformDirty &&
      (this.transform(this.getParentRenderCmd(), !0),
      (this._dirtyFlag &= ~dirtyFlags.transformDirty));
    a & dirtyFlags.orderDirty && (this._dirtyFlag &= ~dirtyFlags.orderDirty);
  },
  _syncStatus: function (a) {
    var b = this._dirtyFlag,
      d = a ? a._node : null;
    d &&
      d._cascadeColorEnabled &&
      a._dirtyFlag & dirtyFlags.colorDirty &&
      (b |= dirtyFlags.colorDirty);
    d &&
      d._cascadeOpacityEnabled &&
      a._dirtyFlag & dirtyFlags.opacityDirty &&
      (b |= dirtyFlags.opacityDirty);
    a &&
      a._dirtyFlag & dirtyFlags.transformDirty &&
      (b |= dirtyFlags.transformDirty);
    this._dirtyFlag = b;
    var d = b & dirtyFlags.colorDirty,
      e = b & dirtyFlags.opacityDirty;
    d && this._syncDisplayColor();
    e && this._syncDisplayOpacity();
    (d || e) && this._updateColor();
    b & dirtyFlags.transformDirty && this.transform(a);
    b & dirtyFlags.orderDirty && (this._dirtyFlag &= ~dirtyFlags.orderDirty);
  },
  setShaderProgram: function (a) {},
  getShaderProgram: function () {
    return null;
  },
  getGLProgramState: function () {
    return null;
  },
  setGLProgramState: function (a) {},
};
cc.Node.RenderCmd.prototype.originTransform =
  cc.Node.RenderCmd.prototype.transform;
cc.Node.RenderCmd.prototype.originUpdateStatus =
  cc.Node.RenderCmd.prototype.updateStatus;
cc.Node.RenderCmd.prototype._originSyncStatus =
  cc.Node.RenderCmd.prototype._syncStatus;
(function () {
  cc.Node.CanvasRenderCmd = function (a) {
    this._node = a;
    this._anchorPointInPoints = { x: 0, y: 0 };
    this._displayedColor = cc.color(255, 255, 255, 255);
    this._cachedParent = null;
    this._cacheDirty = !1;
    this._currentRegion = new cc.Region();
    this._oldRegion = new cc.Region();
    this._regionFlag = 0;
    this._canUseDirtyRegion = !1;
  };
  cc.Node.CanvasRenderCmd.RegionStatus = {
    NotDirty: 0,
    Dirty: 1,
    DirtyDouble: 2,
  };
  var a = (cc.Node.CanvasRenderCmd.prototype = Object.create(
    cc.Node.RenderCmd.prototype
  ));
  a.constructor = cc.Node.CanvasRenderCmd;
  a._rootCtor = cc.Node.CanvasRenderCmd;
  a._notifyRegionStatus = function (a) {
    this._needDraw && this._regionFlag < a && (this._regionFlag = a);
  };
  var b = new cc.Rect();
  a.getLocalBB = function () {
    var a = this._node;
    b.x = b.y = 0;
    b.width = a._contentSize.width;
    b.height = a._contentSize.height;
    return b;
  };
  a._updateCurrentRegions = function () {
    var a = this._currentRegion;
    this._currentRegion = this._oldRegion;
    this._oldRegion = a;
    cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble !== this._regionFlag ||
      this._currentRegion.isEmpty() ||
      this._oldRegion.union(this._currentRegion);
    this._currentRegion.updateRegion(this.getLocalBB(), this._worldTransform);
  };
  a.setDirtyFlag = function (a, b) {
    cc.Node.RenderCmd.prototype.setDirtyFlag.call(this, a, b);
    this._setCacheDirty(b);
    this._cachedParent && this._cachedParent.setDirtyFlag(a, !0);
  };
  a._setCacheDirty = function () {
    if (!1 === this._cacheDirty) {
      this._cacheDirty = !0;
      var a = this._cachedParent;
      a && a !== this && a._setNodeDirtyForCache && a._setNodeDirtyForCache();
    }
  };
  a._setCachedParent = function (a) {
    if (this._cachedParent !== a) {
      this._cachedParent = a;
      for (var b = this._node._children, f = 0, g = b.length; f < g; f++)
        b[f]._renderCmd._setCachedParent(a);
    }
  };
  a.detachFromParent = function () {
    this._cachedParent = null;
    for (var a = this._node._children, b, f = 0, g = a.length; f < g; f++)
      (b = a[f]) && b._renderCmd && b._renderCmd.detachFromParent();
  };
  cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc = function (a) {
    return a
      ? (a.src === cc.SRC_ALPHA && a.dst === cc.ONE) ||
        (a.src === cc.ONE && a.dst === cc.ONE)
        ? "lighter"
        : a.src === cc.ZERO && a.dst === cc.SRC_ALPHA
        ? "destination-in"
        : a.src === cc.ZERO && a.dst === cc.ONE_MINUS_SRC_ALPHA
        ? "destination-out"
        : "source-over"
      : "source-over";
  };
})();
(function () {
  cc.Node.WebGLRenderCmd = function (a) {
    this._node = a;
    this._anchorPointInPoints = { x: 0, y: 0 };
    this._displayedColor = cc.color(255, 255, 255, 255);
    this._glProgramState = null;
  };
  var a = (cc.Node.WebGLRenderCmd.prototype = Object.create(
    cc.Node.RenderCmd.prototype
  ));
  a.constructor = cc.Node.WebGLRenderCmd;
  a._rootCtor = cc.Node.WebGLRenderCmd;
  a._updateColor = function () {};
  a.setShaderProgram = function (a) {
    this._glProgramState = cc.GLProgramState.getOrCreateWithGLProgram(a);
  };
  a.getShaderProgram = function () {
    return this._glProgramState ? this._glProgramState.getGLProgram() : null;
  };
  a.getGLProgramState = function () {
    return this._glProgramState;
  };
  a.setGLProgramState = function (a) {
    this._glProgramState = a;
  };
  Object.defineProperty(a, "_shaderProgram", {
    set: function (a) {
      this.setShaderProgram(a);
    },
    get: function () {
      return this.getShaderProgram();
    },
  });
})();
cc.AtlasNode = cc.Node.extend({
  textureAtlas: null,
  quadsToDraw: 0,
  _itemsPerRow: 0,
  _itemsPerColumn: 0,
  _itemWidth: 0,
  _itemHeight: 0,
  _opacityModifyRGB: !1,
  _blendFunc: null,
  _ignoreContentScaleFactor: !1,
  _className: "AtlasNode",
  _texture: null,
  _textureForCanvas: null,
  ctor: function (a, b, d, e) {
    cc.Node.prototype.ctor.call(this);
    this._blendFunc = { src: cc.BLEND_SRC, dst: cc.BLEND_DST };
    this._ignoreContentScaleFactor = !1;
    void 0 !== e && this.initWithTileFile(a, b, d, e);
  },
  _createRenderCmd: function () {
    this._renderCmd =
      cc._renderType === cc.game.RENDER_TYPE_CANVAS
        ? new cc.AtlasNode.CanvasRenderCmd(this)
        : new cc.AtlasNode.WebGLRenderCmd(this);
  },
  updateAtlasValues: function () {
    cc.log(cc._LogInfos.AtlasNode_updateAtlasValues);
  },
  getColor: function () {
    return this._opacityModifyRGB
      ? this._renderCmd._colorUnmodified
      : cc.Node.prototype.getColor.call(this);
  },
  setOpacityModifyRGB: function (a) {
    var b = this.color;
    this._opacityModifyRGB = a;
    this.setColor(b);
  },
  isOpacityModifyRGB: function () {
    return this._opacityModifyRGB;
  },
  getBlendFunc: function () {
    return this._blendFunc;
  },
  setBlendFunc: function (a, b) {
    this._blendFunc = void 0 === b ? a : { src: a, dst: b };
  },
  setTextureAtlas: function (a) {
    this.textureAtlas = a;
  },
  getTextureAtlas: function () {
    return this.textureAtlas;
  },
  getQuadsToDraw: function () {
    return this.quadsToDraw;
  },
  setQuadsToDraw: function (a) {
    this.quadsToDraw = a;
  },
  initWithTileFile: function (a, b, d, e) {
    if (!a)
      throw Error("cc.AtlasNode.initWithTileFile(): title should not be null");
    a = cc.textureCache.addImage(a);
    return this.initWithTexture(a, b, d, e);
  },
  initWithTexture: function (a, b, d, e) {
    return this._renderCmd.initWithTexture(a, b, d, e);
  },
  setColor: function (a) {
    this._renderCmd.setColor(a);
  },
  setOpacity: function (a) {
    this._renderCmd.setOpacity(a);
  },
  getTexture: function () {
    return this._texture;
  },
  setTexture: function (a) {
    this._texture = a;
  },
  _setIgnoreContentScaleFactor: function (a) {
    this._ignoreContentScaleFactor = a;
  },
});
_p = cc.AtlasNode.prototype;
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
cc.defineGetterSetter(_p, "color", _p.getColor, _p.setColor);
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.EventHelper.prototype.apply(_p);
cc.AtlasNode.create = function (a, b, d, e) {
  return new cc.AtlasNode(a, b, d, e);
};
(function () {
  cc.AtlasNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
    this._colorUnmodified = cc.color.WHITE;
    this._textureToRender = null;
  };
  var a = (cc.AtlasNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.AtlasNode.CanvasRenderCmd;
  a.initWithTexture = function (a, d, e, f) {
    var g = this._node;
    g._itemWidth = d;
    g._itemHeight = e;
    g._opacityModifyRGB = !0;
    g._texture = a;
    if (!g._texture) return cc.log(cc._LogInfos.AtlasNode__initWithTexture), !1;
    this._textureToRender = a;
    this._calculateMaxItems();
    g.quadsToDraw = f;
    return !0;
  };
  a.setColor = function (a) {
    var d = this._node._realColor;
    if (d.r !== a.r || d.g !== a.g || d.b !== a.b)
      (this._colorUnmodified = a), this._changeTextureColor();
  };
  a._changeTextureColor = function () {
    var a = this._node._texture,
      d = this._colorUnmodified,
      e = a.getHtmlElementObj(),
      e = cc.rect(0, 0, e.width, e.height);
    a === this._textureToRender
      ? (this._textureToRender = a._generateColorTexture(d.r, d.g, d.b, e))
      : a._generateColorTexture(
          d.r,
          d.g,
          d.b,
          e,
          this._textureToRender.getHtmlElementObj()
        );
  };
  a.setOpacity = function (a) {
    cc.Node.prototype.setOpacity.call(this._node, a);
  };
  a._calculateMaxItems = function () {
    var a = this._node,
      d = a._texture.getContentSize();
    a._itemsPerColumn = 0 | (d.height / a._itemHeight);
    a._itemsPerRow = 0 | (d.width / a._itemWidth);
  };
})();
(function () {
  cc.AtlasNode.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._textureAtlas = null;
    this._colorUnmodified = cc.color.WHITE;
    this._uniformColor = this._colorF32Array = null;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_POSITION_TEXTURE_UCOLOR
    );
    this._uniformColor = cc._renderContext.getUniformLocation(
      this._shaderProgram.getProgram(),
      "u_color"
    );
  };
  var a = (cc.AtlasNode.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.AtlasNode.WebGLRenderCmd;
  a._updateBlendFunc = function () {
    var a = this._node;
    this._textureAtlas.texture.hasPremultipliedAlpha() ||
      ((a._blendFunc.src = cc.SRC_ALPHA),
      (a._blendFunc.dst = cc.ONE_MINUS_SRC_ALPHA));
  };
  a._updateOpacityModifyRGB = function () {
    this._node._opacityModifyRGB = this._textureAtlas.texture.hasPremultipliedAlpha();
  };
  a.rendering = function (a) {
    a = a || cc._renderContext;
    var d = this._node,
      e = this._worldTransform;
    this._matrix.mat[0] = e.a;
    this._matrix.mat[4] = e.c;
    this._matrix.mat[12] = e.tx;
    this._matrix.mat[1] = e.b;
    this._matrix.mat[5] = e.d;
    this._matrix.mat[13] = e.ty;
    this._glProgramState.apply(this._matrix);
    cc.glBlendFunc(d._blendFunc.src, d._blendFunc.dst);
    this._uniformColor &&
      this._colorF32Array &&
      (a.uniform4fv(this._uniformColor, this._colorF32Array),
      this._textureAtlas.drawNumberOfQuads(d.quadsToDraw, 0));
  };
  a.initWithTexture = function (a, d, e, f) {
    var g = this._node;
    g._itemWidth = d;
    g._itemHeight = e;
    this._colorUnmodified = cc.color.WHITE;
    g._opacityModifyRGB = !0;
    g._blendFunc.src = cc.BLEND_SRC;
    g._blendFunc.dst = cc.BLEND_DST;
    d = g._realColor;
    this._colorF32Array = new Float32Array([
      d.r / 255,
      d.g / 255,
      d.b / 255,
      g._realOpacity / 255,
    ]);
    this._textureAtlas = new cc.TextureAtlas();
    this._textureAtlas.initWithTexture(a, f);
    if (!this._textureAtlas)
      return cc.log(cc._LogInfos.AtlasNode__initWithTexture), !1;
    this._updateBlendFunc();
    this._updateOpacityModifyRGB();
    this._calculateMaxItems();
    g.quadsToDraw = f;
    return !0;
  };
  a.setColor = function (a) {
    var d = cc.color(a.r, a.g, a.b),
      e = this._node;
    this._colorUnmodified = a;
    a = this._displayedOpacity;
    e._opacityModifyRGB &&
      ((d.r = (d.r * a) / 255),
      (d.g = (d.g * a) / 255),
      (d.b = (d.b * a) / 255));
    cc.Node.prototype.setColor.call(e, d);
  };
  a.setOpacity = function (a) {
    var d = this._node;
    cc.Node.prototype.setOpacity.call(d, a);
    d._opacityModifyRGB && (d.color = this._colorUnmodified);
  };
  a._updateColor = function () {
    if (this._colorF32Array) {
      var a = this._displayedColor;
      this._colorF32Array[0] = a.r / 255;
      this._colorF32Array[1] = a.g / 255;
      this._colorF32Array[2] = a.b / 255;
      this._colorF32Array[3] = this._displayedOpacity / 255;
    }
  };
  a.getTexture = function () {
    return this._textureAtlas.texture;
  };
  a.setTexture = function (a) {
    this._textureAtlas.texture = a;
    this._updateBlendFunc();
    this._updateOpacityModifyRGB();
  };
  a._calculateMaxItems = function () {
    var a = this._node,
      d = this._textureAtlas.texture,
      e = d.getContentSize();
    a._ignoreContentScaleFactor && (e = d.getContentSizeInPixels());
    a._itemsPerColumn = 0 | (e.height / a._itemHeight);
    a._itemsPerRow = 0 | (e.width / a._itemWidth);
  };
})();
cc._tmp.WebGLTexture2D = function () {
  cc.Texture2D = cc.Class.extend({
    _pVRHaveAlphaPremultiplied: !0,
    _pixelFormat: null,
    _pixelsWide: 0,
    _pixelsHigh: 0,
    _name: "",
    _contentSize: null,
    maxS: 0,
    maxT: 0,
    _hasPremultipliedAlpha: !1,
    _hasMipmaps: !1,
    shaderProgram: null,
    _textureLoaded: !1,
    _htmlElementObj: null,
    _webTextureObj: null,
    url: null,
    ctor: function () {
      this._contentSize = cc.size(0, 0);
      this._pixelFormat = cc.Texture2D.defaultPixelFormat;
    },
    releaseTexture: function () {
      this._webTextureObj &&
        cc._renderContext.deleteTexture(this._webTextureObj);
      this._htmlElementObj = null;
      cc.loader.release(this.url);
    },
    getPixelFormat: function () {
      return this._pixelFormat;
    },
    getPixelsWide: function () {
      return this._pixelsWide;
    },
    getPixelsHigh: function () {
      return this._pixelsHigh;
    },
    getName: function () {
      return this._webTextureObj;
    },
    getContentSize: function () {
      return cc.size(
        this._contentSize.width / cc.contentScaleFactor(),
        this._contentSize.height / cc.contentScaleFactor()
      );
    },
    _getWidth: function () {
      return this._contentSize.width / cc.contentScaleFactor();
    },
    _getHeight: function () {
      return this._contentSize.height / cc.contentScaleFactor();
    },
    getContentSizeInPixels: function () {
      return this._contentSize;
    },
    getMaxS: function () {
      return this.maxS;
    },
    setMaxS: function (a) {
      this.maxS = a;
    },
    getMaxT: function () {
      return this.maxT;
    },
    setMaxT: function (a) {
      this.maxT = a;
    },
    getShaderProgram: function () {
      return this.shaderProgram;
    },
    setShaderProgram: function (a) {
      this.shaderProgram = a;
    },
    hasPremultipliedAlpha: function () {
      return this._hasPremultipliedAlpha;
    },
    hasMipmaps: function () {
      return this._hasMipmaps;
    },
    description: function () {
      return (
        "\x3ccc.Texture2D | Name \x3d " +
        this._name +
        " | Dimensions \x3d " +
        this._pixelsWide +
        " x " +
        this._pixelsHigh +
        " | Coordinates \x3d (" +
        this.maxS +
        ", " +
        this.maxT +
        ")\x3e"
      );
    },
    releaseData: function (a) {},
    keepData: function (a, b) {
      return a;
    },
    initWithData: function (a, b, d, e, f) {
      var g = cc.Texture2D,
        h = cc._renderContext,
        k = h.RGBA,
        m = h.UNSIGNED_BYTE,
        n = (d * cc.Texture2D._B[b]) / 8;
      0 === n % 8
        ? h.pixelStorei(h.UNPACK_ALIGNMENT, 8)
        : 0 === n % 4
        ? h.pixelStorei(h.UNPACK_ALIGNMENT, 4)
        : 0 === n % 2
        ? h.pixelStorei(h.UNPACK_ALIGNMENT, 2)
        : h.pixelStorei(h.UNPACK_ALIGNMENT, 1);
      this._webTextureObj = h.createTexture();
      cc.glBindTexture2D(this);
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MIN_FILTER, h.LINEAR);
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_MAG_FILTER, h.LINEAR);
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_WRAP_S, h.CLAMP_TO_EDGE);
      h.texParameteri(h.TEXTURE_2D, h.TEXTURE_WRAP_T, h.CLAMP_TO_EDGE);
      switch (b) {
        case g.PIXEL_FORMAT_RGBA8888:
          k = h.RGBA;
          break;
        case g.PIXEL_FORMAT_RGB888:
          k = h.RGB;
          break;
        case g.PIXEL_FORMAT_RGBA4444:
          m = h.UNSIGNED_SHORT_4_4_4_4;
          break;
        case g.PIXEL_FORMAT_RGB5A1:
          m = h.UNSIGNED_SHORT_5_5_5_1;
          break;
        case g.PIXEL_FORMAT_RGB565:
          m = h.UNSIGNED_SHORT_5_6_5;
          break;
        case g.PIXEL_FORMAT_AI88:
          k = h.LUMINANCE_ALPHA;
          break;
        case g.PIXEL_FORMAT_A8:
          k = h.ALPHA;
          break;
        case g.PIXEL_FORMAT_I8:
          k = h.LUMINANCE;
          break;
        default:
          cc.assert(0, cc._LogInfos.Texture2D_initWithData);
      }
      h.texImage2D(h.TEXTURE_2D, 0, k, d, e, 0, k, m, a);
      this._contentSize.width = f.width;
      this._contentSize.height = f.height;
      this._pixelsWide = d;
      this._pixelsHigh = e;
      this._pixelFormat = b;
      this.maxS = f.width / d;
      this.maxT = f.height / e;
      this._hasMipmaps = this._hasPremultipliedAlpha = !1;
      this.shaderProgram = cc.shaderCache.programForKey(
        cc.SHADER_POSITION_TEXTURE
      );
      return (this._textureLoaded = !0);
    },
    drawAtPoint: function (a) {
      var b = [0, this.maxT, this.maxS, this.maxT, 0, 0, this.maxS, 0],
        d = cc._renderContext,
        e = this._pixelsWide * this.maxS,
        f = this._pixelsHigh * this.maxT;
      a = [a.x, a.y, 0, e + a.x, a.y, 0, a.x, f + a.y, 0, e + a.x, f + a.y, 0];
      this._glProgramState.apply();
      this._glProgramState._glprogram.setUniformsForBuiltins();
      cc.glBindTexture2D(this);
      d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      d.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
      d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, d.FLOAT, !1, 0, a);
      d.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, d.FLOAT, !1, 0, b);
      d.drawArrays(d.TRIANGLE_STRIP, 0, 4);
    },
    drawInRect: function (a) {
      var b = [0, this.maxT, this.maxS, this.maxT, 0, 0, this.maxS, 0];
      a = [
        a.x,
        a.y,
        a.x + a.width,
        a.y,
        a.x,
        a.y + a.height,
        a.x + a.width,
        a.y + a.height,
      ];
      this._glProgramState.apply();
      this._glProgramState._glprogram.setUniformsForBuiltins();
      cc.glBindTexture2D(this);
      var d = cc._renderContext;
      d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      d.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
      d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, d.FLOAT, !1, 0, a);
      d.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, d.FLOAT, !1, 0, b);
      d.drawArrays(d.TRIANGLE_STRIP, 0, 4);
    },
    initWithImage: function (a) {
      if (null == a) return cc.log(cc._LogInfos.Texture2D_initWithImage), !1;
      var b = a.getWidth(),
        d = a.getHeight(),
        e = cc.configuration.getMaxTextureSize();
      if (b > e || d > e)
        return cc.log(cc._LogInfos.Texture2D_initWithImage_2, b, d, e, e), !1;
      this._textureLoaded = !0;
      return this._initPremultipliedATextureWithImage(a, b, d);
    },
    initWithElement: function (a) {
      a &&
        ((this._webTextureObj = cc._renderContext.createTexture()),
        (this._htmlElementObj = a),
        (this._hasPremultipliedAlpha = this._textureLoaded = !0));
    },
    getHtmlElementObj: function () {
      return this._htmlElementObj;
    },
    isLoaded: function () {
      return this._textureLoaded;
    },
    handleLoadedTexture: function (a) {
      a = void 0 !== a ? a : this._hasPremultipliedAlpha;
      if (
        cc.game._rendererInitialized &&
        this._htmlElementObj &&
        this._htmlElementObj.width &&
        this._htmlElementObj.height
      ) {
        var b = cc._renderContext;
        cc.glBindTexture2D(this);
        b.pixelStorei(b.UNPACK_ALIGNMENT, 4);
        a && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
        b.texImage2D(
          b.TEXTURE_2D,
          0,
          b.RGBA,
          b.RGBA,
          b.UNSIGNED_BYTE,
          this._htmlElementObj
        );
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.LINEAR);
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.LINEAR);
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE);
        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE);
        this.shaderProgram = cc.shaderCache.programForKey(
          cc.SHADER_POSITION_TEXTURE
        );
        cc.glBindTexture2D(null);
        a && b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);
        b = this._htmlElementObj.height;
        this._pixelsWide = this._contentSize.width = this._htmlElementObj.width;
        this._pixelsHigh = this._contentSize.height = b;
        this._pixelFormat = cc.Texture2D.PIXEL_FORMAT_RGBA8888;
        this.maxT = this.maxS = 1;
        this._hasPremultipliedAlpha = a;
        this._hasMipmaps = !1;
        window.ENABLE_IMAEG_POOL && (this._htmlElementObj = null);
        this.dispatchEvent("load");
      }
    },
    initWithString: function (a, b, d, e, f, g) {
      cc.log(cc._LogInfos.Texture2D_initWithString);
      return null;
    },
    initWithETCFile: function (a) {
      cc.log(cc._LogInfos.Texture2D_initWithETCFile_2);
      return !1;
    },
    initWithPVRFile: function (a) {
      cc.log(cc._LogInfos.Texture2D_initWithPVRFile_2);
      return !1;
    },
    initWithPVRTCData: function (a, b, d, e, f, g) {
      cc.log(cc._LogInfos.Texture2D_initWithPVRTCData_2);
      return !1;
    },
    setTexParameters: function (a, b, d, e) {
      var f = cc._renderContext;
      void 0 !== b && (a = { minFilter: a, magFilter: b, wrapS: d, wrapT: e });
      cc.assert(
        (this._pixelsWide === cc.NextPOT(this._pixelsWide) &&
          this._pixelsHigh === cc.NextPOT(this._pixelsHigh)) ||
          (a.wrapS === f.CLAMP_TO_EDGE && a.wrapT === f.CLAMP_TO_EDGE),
        "WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures"
      );
      cc.glBindTexture2D(this);
      f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MIN_FILTER, a.minFilter);
      f.texParameteri(f.TEXTURE_2D, f.TEXTURE_MAG_FILTER, a.magFilter);
      f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_S, a.wrapS);
      f.texParameteri(f.TEXTURE_2D, f.TEXTURE_WRAP_T, a.wrapT);
    },
    setAntiAliasTexParameters: function () {
      var a = cc._renderContext;
      cc.glBindTexture2D(this);
      this._hasMipmaps
        ? a.texParameteri(
            a.TEXTURE_2D,
            a.TEXTURE_MIN_FILTER,
            a.LINEAR_MIPMAP_NEAREST
          )
        : a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.LINEAR);
      a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.LINEAR);
    },
    setAliasTexParameters: function () {
      var a = cc._renderContext;
      cc.glBindTexture2D(this);
      this._hasMipmaps
        ? a.texParameteri(
            a.TEXTURE_2D,
            a.TEXTURE_MIN_FILTER,
            a.NEAREST_MIPMAP_NEAREST
          )
        : a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
      a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
    },
    generateMipmap: function () {
      cc.assert(
        this._pixelsWide === cc.NextPOT(this._pixelsWide) &&
          this._pixelsHigh === cc.NextPOT(this._pixelsHigh),
        "Mimpap texture only works in POT textures"
      );
      cc.glBindTexture2D(this);
      cc._renderContext.generateMipmap(cc._renderContext.TEXTURE_2D);
      this._hasMipmaps = !0;
    },
    stringForFormat: function () {
      return cc.Texture2D._M[this._pixelFormat];
    },
    bitsPerPixelForFormat: function (a) {
      a = a || this._pixelFormat;
      var b = cc.Texture2D._B[a];
      if (null != b) return b;
      cc.log(cc._LogInfos.Texture2D_bitsPerPixelForFormat, a);
      return -1;
    },
    _initPremultipliedATextureWithImage: function (a, b, d) {
      var e = cc.Texture2D,
        f = a.getData(),
        g = null,
        g = null,
        h = a.hasAlpha(),
        k = cc.size(a.getWidth(), a.getHeight()),
        m = e.defaultPixelFormat,
        n = a.getBitsPerComponent();
      h ||
        (8 <= n
          ? (m = e.PIXEL_FORMAT_RGB888)
          : (cc.log(cc._LogInfos.Texture2D__initPremultipliedATextureWithImage),
            (m = e.PIXEL_FORMAT_RGB565)));
      var p = b * d;
      if (m === e.PIXEL_FORMAT_RGB565)
        if (h)
          for (f = new Uint16Array(b * d), g = a.getData(), n = 0; n < p; ++n)
            f[n] =
              ((((g[n] >> 0) & 255) >> 3) << 11) |
              ((((g[n] >> 8) & 255) >> 2) << 5) |
              ((((g[n] >> 16) & 255) >> 3) << 0);
        else
          for (f = new Uint16Array(b * d), g = a.getData(), n = 0; n < p; ++n)
            f[n] =
              (((g[n] & 255) >> 3) << 11) |
              (((g[n] & 255) >> 2) << 5) |
              (((g[n] & 255) >> 3) << 0);
      else if (m === e.PIXEL_FORMAT_RGBA4444)
        for (f = new Uint16Array(b * d), g = a.getData(), n = 0; n < p; ++n)
          f[n] =
            ((((g[n] >> 0) & 255) >> 4) << 12) |
            ((((g[n] >> 8) & 255) >> 4) << 8) |
            ((((g[n] >> 16) & 255) >> 4) << 4) |
            ((((g[n] >> 24) & 255) >> 4) << 0);
      else if (m === e.PIXEL_FORMAT_RGB5A1)
        for (f = new Uint16Array(b * d), g = a.getData(), n = 0; n < p; ++n)
          f[n] =
            ((((g[n] >> 0) & 255) >> 3) << 11) |
            ((((g[n] >> 8) & 255) >> 3) << 6) |
            ((((g[n] >> 16) & 255) >> 3) << 1) |
            ((((g[n] >> 24) & 255) >> 7) << 0);
      else if (m === e.PIXEL_FORMAT_A8)
        for (f = new Uint8Array(b * d), g = a.getData(), n = 0; n < p; ++n)
          f[n] = (g >> 24) & 255;
      if (h && m === e.PIXEL_FORMAT_RGB888)
        for (g = a.getData(), f = new Uint8Array(b * d * 3), n = 0; n < p; ++n)
          (f[3 * n] = (g >> 0) & 255),
            (f[3 * n + 1] = (g >> 8) & 255),
            (f[3 * n + 2] = (g >> 16) & 255);
      this.initWithData(f, m, b, d, k);
      a.getData();
      this._hasPremultipliedAlpha = a.isPremultipliedAlpha();
      return !0;
    },
    addLoadedEventListener: function (a, b) {
      this.addEventListener("load", a, b);
    },
    removeLoadedEventListener: function (a) {
      this.removeEventTarget("load", a);
    },
  });
};
cc._tmp.WebGLTextureAtlas = function () {
  var a = cc.TextureAtlas.prototype;
  a._setupVBO = function () {
    var a = cc._renderContext;
    this._buffersVBO[0] = a.createBuffer();
    this._buffersVBO[1] = a.createBuffer();
    this._quadsWebBuffer = a.createBuffer();
    this._mapBuffers();
  };
  a._mapBuffers = function () {
    var a = cc._renderContext;
    a.bindBuffer(a.ARRAY_BUFFER, this._quadsWebBuffer);
    a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
  };
  a.drawNumberOfQuads = function (a, d) {
    d = d || 0;
    if (0 !== a && this.texture && this.texture.isLoaded()) {
      var e = cc._renderContext;
      cc.glBindTexture2D(this.texture);
      e.bindBuffer(e.ARRAY_BUFFER, this._quadsWebBuffer);
      this.dirty &&
        (e.bufferData(e.ARRAY_BUFFER, this._quadsArrayBuffer, e.DYNAMIC_DRAW),
        (this.dirty = !1));
      e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      e.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
      e.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
      e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, e.FLOAT, !1, 24, 0);
      e.vertexAttribPointer(
        cc.VERTEX_ATTRIB_COLOR,
        4,
        e.UNSIGNED_BYTE,
        !0,
        24,
        12
      );
      e.vertexAttribPointer(
        cc.VERTEX_ATTRIB_TEX_COORDS,
        2,
        e.FLOAT,
        !1,
        24,
        16
      );
      e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
      cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP
        ? e.drawElements(
            e.TRIANGLE_STRIP,
            6 * a,
            e.UNSIGNED_SHORT,
            6 * d * this._indices.BYTES_PER_ELEMENT
          )
        : e.drawElements(
            e.TRIANGLES,
            6 * a,
            e.UNSIGNED_SHORT,
            6 * d * this._indices.BYTES_PER_ELEMENT
          );
      cc.g_NumberOfDraws++;
    }
  };
};
cc._tmp.WebGLTextureCache = function () {
  var a = cc.textureCache;
  a.handleLoadedTexture = function (a, d) {
    var e = this._textures,
      f;
    cc.game._rendererInitialized || (e = this._loadedTexturesBefore);
    f = e[a];
    f || ((f = e[a] = new cc.Texture2D()), (f.url = a));
    f.initWithElement(d);
    ".png" === cc.path.extname(a)
      ? f.handleLoadedTexture(!0)
      : f.handleLoadedTexture();
    return f;
  };
  a.addImage = function (a, d, e) {
    cc.assert(a, cc._LogInfos.Texture2D_addImage_2);
    var f = this._textures;
    cc.game._rendererInitialized || (f = this._loadedTexturesBefore);
    var g = f[a] || f[cc.loader._getAliase(a)];
    if (g)
      return (
        g.isLoaded()
          ? d && d.call(e, g)
          : g.addEventListener(
              "load",
              function () {
                d && d.call(e, g);
              },
              e
            ),
        g
      );
    g = f[a] = new cc.Texture2D();
    g.url = a;
    f = cc.loader.getBasePath ? cc.loader.getBasePath() : cc.loader.resPath;
    cc.loader.loadImg(cc.path.join(f || "", a), function (f, g) {
      if (f) return d && d.call(e, f);
      var m = cc.textureCache.handleLoadedTexture(a, g);
      d && d.call(e, m);
    });
    return g;
  };
  a.addImageAsync = a.addImage;
  a = null;
};
cc._tmp.PrototypeTexture2D = function () {
  var a = cc.Texture2D;
  a.PVRImagesHavePremultipliedAlpha = function (a) {
    cc.PVRHaveAlphaPremultiplied_ = a;
  };
  a.PIXEL_FORMAT_RGBA8888 = 2;
  a.PIXEL_FORMAT_RGB888 = 3;
  a.PIXEL_FORMAT_RGB565 = 4;
  a.PIXEL_FORMAT_A8 = 5;
  a.PIXEL_FORMAT_I8 = 6;
  a.PIXEL_FORMAT_AI88 = 7;
  a.PIXEL_FORMAT_RGBA4444 = 8;
  a.PIXEL_FORMAT_RGB5A1 = 7;
  a.PIXEL_FORMAT_PVRTC4 = 9;
  a.PIXEL_FORMAT_PVRTC2 = 10;
  a.PIXEL_FORMAT_DEFAULT = a.PIXEL_FORMAT_RGBA8888;
  a.defaultPixelFormat = a.PIXEL_FORMAT_DEFAULT;
  var b = (cc.Texture2D._M = {});
  b[a.PIXEL_FORMAT_RGBA8888] = "RGBA8888";
  b[a.PIXEL_FORMAT_RGB888] = "RGB888";
  b[a.PIXEL_FORMAT_RGB565] = "RGB565";
  b[a.PIXEL_FORMAT_A8] = "A8";
  b[a.PIXEL_FORMAT_I8] = "I8";
  b[a.PIXEL_FORMAT_AI88] = "AI88";
  b[a.PIXEL_FORMAT_RGBA4444] = "RGBA4444";
  b[a.PIXEL_FORMAT_RGB5A1] = "RGB5A1";
  b[a.PIXEL_FORMAT_PVRTC4] = "PVRTC4";
  b[a.PIXEL_FORMAT_PVRTC2] = "PVRTC2";
  b = cc.Texture2D._B = {};
  b[a.PIXEL_FORMAT_RGBA8888] = 32;
  b[a.PIXEL_FORMAT_RGB888] = 24;
  b[a.PIXEL_FORMAT_RGB565] = 16;
  b[a.PIXEL_FORMAT_A8] = 8;
  b[a.PIXEL_FORMAT_I8] = 8;
  b[a.PIXEL_FORMAT_AI88] = 16;
  b[a.PIXEL_FORMAT_RGBA4444] = 16;
  b[a.PIXEL_FORMAT_RGB5A1] = 16;
  b[a.PIXEL_FORMAT_PVRTC4] = 4;
  b[a.PIXEL_FORMAT_PVRTC2] = 3;
  a = cc.Texture2D.prototype;
  cc.defineGetterSetter(a, "name", a.getName);
  cc.defineGetterSetter(a, "pixelFormat", a.getPixelFormat);
  cc.defineGetterSetter(a, "pixelsWidth", a.getPixelsWide);
  cc.defineGetterSetter(a, "pixelsHeight", a.getPixelsHigh);
  cc.defineGetterSetter(a, "width", a._getWidth);
  cc.defineGetterSetter(a, "height", a._getHeight);
};
cc._tmp.PrototypeTextureAtlas = function () {
  var a = cc.TextureAtlas.prototype;
  cc.defineGetterSetter(a, "totalQuads", a.getTotalQuads);
  cc.defineGetterSetter(a, "capacity", a.getCapacity);
  cc.defineGetterSetter(a, "quads", a.getQuads, a.setQuads);
};
cc.ALIGN_CENTER = 51;
cc.ALIGN_TOP = 19;
cc.ALIGN_TOP_RIGHT = 18;
cc.ALIGN_RIGHT = 50;
cc.ALIGN_BOTTOM_RIGHT = 34;
cc.ALIGN_BOTTOM = 35;
cc.ALIGN_BOTTOM_LEFT = 33;
cc.ALIGN_LEFT = 49;
cc.ALIGN_TOP_LEFT = 17;
cc.PVRHaveAlphaPremultiplied_ = !1;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
    var a = {
      _contentSize: null,
      _textureLoaded: !1,
      _htmlElementObj: null,
      url: null,
      _pattern: null,
      ctor: function () {
        this._contentSize = cc.size(0, 0);
        this._textureLoaded = !1;
        this._htmlElementObj = null;
        this._pattern = "";
        this._pixelsHigh = this._pixelsWide = 0;
      },
      getPixelsWide: function () {
        return this._pixelsWide;
      },
      getPixelsHigh: function () {
        return this._pixelsHigh;
      },
      getContentSize: function () {
        var a = cc.contentScaleFactor();
        return cc.size(
          this._contentSize.width / a,
          this._contentSize.height / a
        );
      },
      _getWidth: function () {
        return this._contentSize.width / cc.contentScaleFactor();
      },
      _getHeight: function () {
        return this._contentSize.height / cc.contentScaleFactor();
      },
      getContentSizeInPixels: function () {
        return this._contentSize;
      },
      initWithElement: function (a) {
        a &&
          ((this._htmlElementObj = a),
          (this._pixelsWide = this._contentSize.width = a.width),
          (this._pixelsHigh = this._contentSize.height = a.height),
          (this._textureLoaded = !0));
      },
      getHtmlElementObj: function () {
        return this._htmlElementObj;
      },
      isLoaded: function () {
        return this._textureLoaded;
      },
      handleLoadedTexture: function () {
        if (this._htmlElementObj) {
          var a = this._htmlElementObj;
          this._pixelsWide = this._contentSize.width = a.width;
          this._pixelsHigh = this._contentSize.height = a.height;
          this.dispatchEvent("load");
        }
      },
      description: function () {
        return (
          "\x3ccc.Texture2D | width \x3d " +
          this._contentSize.width +
          " height " +
          this._contentSize.height +
          "\x3e"
        );
      },
      initWithData: function (a, d, e, f, g) {
        return !1;
      },
      initWithImage: function (a) {
        return !1;
      },
      initWithString: function (a, d, e, f, g, h) {
        return !1;
      },
      releaseTexture: function () {
        this._htmlElementObj = null;
        cc.loader.release(this.url);
      },
      getName: function () {
        return null;
      },
      getMaxS: function () {
        return 1;
      },
      setMaxS: function (a) {},
      getMaxT: function () {
        return 1;
      },
      setMaxT: function (a) {},
      getPixelFormat: function () {
        return null;
      },
      getShaderProgram: function () {
        return null;
      },
      setShaderProgram: function (a) {},
      hasPremultipliedAlpha: function () {
        return !1;
      },
      hasMipmaps: function () {
        return !1;
      },
      releaseData: function (a) {},
      keepData: function (a, d) {
        return a;
      },
      drawAtPoint: function (a) {},
      drawInRect: function (a) {},
      initWithETCFile: function (a) {
        cc.log(cc._LogInfos.Texture2D_initWithETCFile);
        return !1;
      },
      initWithPVRFile: function (a) {
        cc.log(cc._LogInfos.Texture2D_initWithPVRFile);
        return !1;
      },
      initWithPVRTCData: function (a, d, e, f, g, h) {
        cc.log(cc._LogInfos.Texture2D_initWithPVRTCData);
        return !1;
      },
      setTexParameters: function (a, d, e, f) {
        void 0 !== d &&
          (a = { minFilter: a, magFilter: d, wrapS: e, wrapT: f });
        this._pattern =
          a.wrapS === cc.REPEAT && a.wrapT === cc.REPEAT
            ? "repeat"
            : a.wrapS === cc.REPEAT
            ? "repeat-x"
            : a.wrapT === cc.REPEAT
            ? "repeat-y"
            : "";
      },
      setAntiAliasTexParameters: function () {},
      setAliasTexParameters: function () {},
      generateMipmap: function () {},
      stringForFormat: function () {
        return "";
      },
      bitsPerPixelForFormat: function (a) {
        return -1;
      },
      addLoadedEventListener: function (a, d) {
        this.addEventListener("load", a, d);
      },
      removeLoadedEventListener: function (a) {
        this.removeEventTarget("load", a);
      },
      _generateColorTexture: function () {},
      _generateTextureCacheForColor: function () {
        if (this.channelCache) return this.channelCache;
        var a = [
            document.createElement("canvas"),
            document.createElement("canvas"),
            document.createElement("canvas"),
            document.createElement("canvas"),
          ],
          d = this._htmlElementObj,
          e = d.width,
          f = d.height;
        a[0].width = e;
        a[0].height = f;
        a[1].width = e;
        a[1].height = f;
        a[2].width = e;
        a[2].height = f;
        a[3].width = e;
        a[3].height = f;
        var g = a[3].getContext("2d");
        g.drawImage(d, 0, 0);
        for (var g = g.getImageData(0, 0, e, f).data, h, k = 0; 4 > k; k++) {
          h = a[k].getContext("2d");
          for (
            var m = h.getImageData(0, 0, e, f), n = m.data, p = 0;
            p < g.length;
            p += 4
          )
            (n[p] = 0 === k ? g[p] : 0),
              (n[p + 1] = 1 === k ? g[p + 1] : 0),
              (n[p + 2] = 2 === k ? g[p + 2] : 0),
              (n[p + 3] = g[p + 3]);
          h.putImageData(m, 0, 0);
        }
        d.onload = null;
        return (this.channelCache = a);
      },
      _grayElementObj: null,
      _backupElement: null,
      _isGray: !1,
      _switchToGray: function (a) {
        this._textureLoaded &&
          this._isGray !== a &&
          ((this._isGray = a)
            ? ((this._backupElement = this._htmlElementObj),
              this._grayElementObj ||
                (this._grayElementObj = cc.Texture2D._generateGrayTexture(
                  this._htmlElementObj
                )),
              (this._htmlElementObj = this._grayElementObj))
            : null !== this._backupElement &&
              (this._htmlElementObj = this._backupElement));
      },
      _generateGrayTexture: function () {
        if (!this._textureLoaded) return null;
        var a = cc.Texture2D._generateGrayTexture(this._htmlElementObj),
          d = new cc.Texture2D();
        d.initWithElement(a);
        d.handleLoadedTexture();
        return d;
      },
    };
    a._generateColorTexture = cc.sys._supportCanvasNewBlendModes
      ? function (a, d, e, f, g) {
          var h = !1;
          g ? (h = !0) : (g = document.createElement("canvas"));
          var k = this._htmlElementObj;
          f || (f = cc.rect(0, 0, k.width, k.height));
          g.width = f.width;
          g.height = f.height;
          var m = g.getContext("2d");
          m.globalCompositeOperation = "source-over";
          m.fillStyle = "rgb(" + (a | 0) + "," + (d | 0) + "," + (e | 0) + ")";
          m.fillRect(0, 0, f.width, f.height);
          m.globalCompositeOperation = "multiply";
          m.drawImage(k, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
          m.globalCompositeOperation = "destination-atop";
          m.drawImage(k, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
          if (h) return g;
          a = new cc.Texture2D();
          a.initWithElement(g);
          a.handleLoadedTexture();
          return a;
        }
      : function (a, d, e, f, g) {
          var h = !1;
          g ? (h = !0) : (g = document.createElement("canvas"));
          var k = this._htmlElementObj;
          f || (f = cc.rect(0, 0, k.width, k.height));
          var m,
            n,
            k = f.x;
          m = f.y;
          n = f.width;
          f = f.height;
          if (n && f) {
            g.width = n;
            g.height = f;
            var p = g.getContext("2d"),
              r = cc.textureCache.getTextureColors(this);
            p.globalCompositeOperation = "lighter";
            p.drawImage(r[3], k, m, n, f, 0, 0, n, f);
            0 < a &&
              ((p.globalAlpha = a / 255),
              p.drawImage(r[0], k, m, n, f, 0, 0, n, f));
            0 < d &&
              ((p.globalAlpha = d / 255),
              p.drawImage(r[1], k, m, n, f, 0, 0, n, f));
            0 < e &&
              ((p.globalAlpha = e / 255),
              p.drawImage(r[2], k, m, n, f, 0, 0, n, f));
            if (h) return g;
            a = new cc.Texture2D();
            a.initWithElement(g);
            a.handleLoadedTexture();
            return a;
          }
        };
    cc.Texture2D = cc.Class.extend(a);
    cc.Texture2D._generateGrayTexture = function (a, d, e) {
      if (null === a) return null;
      e = e || document.createElement("canvas");
      d = d || cc.rect(0, 0, a.width, a.height);
      e.width = d.width;
      e.height = d.height;
      var f = e.getContext("2d");
      f.drawImage(a, d.x, d.y, d.width, d.height, 0, 0, d.width, d.height);
      a = f.getImageData(0, 0, d.width, d.height);
      d = a.data;
      for (var g = 0, h = d.length; g < h; g += 4)
        d[g] = d[g + 1] = d[g + 2] =
          0.34 * d[g] + 0.5 * d[g + 1] + 0.16 * d[g + 2];
      f.putImageData(a, 0, 0);
      return e;
    };
  } else cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D), cc._LogInfos.MissingFile, "TexturesWebGL.js"), cc._tmp.WebGLTexture2D(), delete cc._tmp.WebGLTexture2D);
  cc.EventHelper.prototype.apply(cc.Texture2D.prototype);
  cc.assert(
    cc.isFunction(cc._tmp.PrototypeTexture2D),
    cc._LogInfos.MissingFile,
    "TexturesPropertyDefine.js"
  );
  cc._tmp.PrototypeTexture2D();
  delete cc._tmp.PrototypeTexture2D;
});
cc.textureCache = {
  _textures: {},
  _textureColorsCache: {},
  _textureKeySeq: 0 | (1e3 * Math.random()),
  _loadedTexturesBefore: {},
  _initializingRenderer: function () {
    var a,
      b = this._loadedTexturesBefore,
      d = this._textures;
    for (a in b) {
      var e = b[a];
      e.handleLoadedTexture();
      d[a] = e;
    }
    this._loadedTexturesBefore = {};
  },
  addPVRTCImage: function (a) {
    cc.log(cc._LogInfos.textureCache_addPVRTCImage);
  },
  addETCImage: function (a) {
    cc.log(cc._LogInfos.textureCache_addETCImage);
  },
  description: function () {
    return (
      "\x3cTextureCache | Number of textures \x3d " +
      this._textures.length +
      "\x3e"
    );
  },
  textureForKey: function (a) {
    cc.log(cc._LogInfos.textureCache_textureForKey);
    return this.getTextureForKey(a);
  },
  getTextureForKey: function (a) {
    return this._textures[a] || this._textures[cc.loader._getAliase(a)];
  },
  getKeyByTexture: function (a) {
    for (var b in this._textures) if (this._textures[b] === a) return b;
    return null;
  },
  _generalTextureKey: function (a) {
    return "_textureKey_" + a;
  },
  getTextureColors: function (a) {
    var b = a._htmlElementObj,
      d = this.getKeyByTexture(b);
    d ||
      (d =
        b instanceof HTMLImageElement
          ? b.src
          : this._generalTextureKey(a.__instanceId));
    this._textureColorsCache[d] ||
      (this._textureColorsCache[d] = a._generateTextureCacheForColor());
    return this._textureColorsCache[d];
  },
  addPVRImage: function (a) {
    cc.log(cc._LogInfos.textureCache_addPVRImage);
  },
  removeAllTextures: function () {
    var a = this._textures,
      b;
    for (b in a) a[b] && a[b].releaseTexture();
    this._textures = {};
  },
  removeTexture: function (a) {
    if (a) {
      var b = this._textures,
        d;
      for (d in b) b[d] === a && (b[d].releaseTexture(), delete b[d]);
    }
  },
  removeTextureForKey: function (a) {
    if (null != a) {
      var b = this._textures[a];
      b && (b.releaseTexture(), delete this._textures[a]);
    }
  },
  cacheImage: function (a, b) {
    if (b instanceof cc.Texture2D) this._textures[a] = b;
    else {
      var d = new cc.Texture2D();
      d.initWithElement(b);
      d.handleLoadedTexture();
      this._textures[a] = d;
    }
  },
  addUIImage: function (a, b) {
    cc.assert(a, cc._LogInfos.textureCache_addUIImage_2);
    if (b && this._textures[b]) return this._textures[b];
    var d = new cc.Texture2D();
    d.initWithImage(a);
    null != b
      ? (this._textures[b] = d)
      : cc.log(cc._LogInfos.textureCache_addUIImage);
    return d;
  },
  dumpCachedTextureInfo: function () {
    var a = 0,
      b = 0,
      d = this._textures,
      e;
    for (e in d) {
      var f = d[e];
      a++;
      f.getHtmlElementObj() instanceof HTMLImageElement
        ? cc.log(
            cc._LogInfos.textureCache_dumpCachedTextureInfo,
            e,
            f.getHtmlElementObj().src,
            f.getPixelsWide(),
            f.getPixelsHigh()
          )
        : cc.log(
            cc._LogInfos.textureCache_dumpCachedTextureInfo_2,
            e,
            f.getPixelsWide(),
            f.getPixelsHigh()
          );
      b += f.getPixelsWide() * f.getPixelsHigh() * 4;
    }
    d = this._textureColorsCache;
    for (e in d) {
      var f = d[e],
        g;
      for (g in f) {
        var h = f[g];
        a++;
        cc.log(
          cc._LogInfos.textureCache_dumpCachedTextureInfo_2,
          e,
          h.width,
          h.height
        );
        b += h.width * h.height * 4;
      }
    }
    cc.log(
      cc._LogInfos.textureCache_dumpCachedTextureInfo_3,
      a,
      b / 1024,
      (b / 1048576).toFixed(2)
    );
  },
  _clear: function () {
    this._textures = {};
    this._textureColorsCache = {};
    this._textureKeySeq = 0 | (1e3 * Math.random());
    this._loadedTexturesBefore = {};
  },
};
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
    var a = cc.textureCache;
    a.handleLoadedTexture = function (a, d) {
      var e = this._textures,
        f = e[a];
      f || ((f = e[a] = new cc.Texture2D()), (f.url = a));
      f.initWithElement(d);
      f.handleLoadedTexture();
      return f;
    };
    a.addImage = function (a, d, e) {
      cc.assert(a, cc._LogInfos.Texture2D_addImage);
      var f = this._textures,
        g = f[a] || f[cc.loader._getAliase(a)];
      if (g)
        return (
          g.isLoaded()
            ? d && d.call(e, g)
            : g.addEventListener(
                "load",
                function () {
                  d && d.call(e, g);
                },
                e
              ),
          g
        );
      g = f[a] = new cc.Texture2D();
      g.url = a;
      f = cc.loader.getBasePath ? cc.loader.getBasePath() : cc.loader.resPath;
      cc.loader.loadImg(cc.path.join(f || "", a), function (f, g) {
        if (f) return d && d.call(e, f);
        var m = cc.textureCache.handleLoadedTexture(a, g);
        d && d.call(e, m);
      });
      return g;
    };
    a.addImageAsync = a.addImage;
    a = null;
  } else cc._renderType === cc.game.RENDER_TYPE_WEBGL && (cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache), cc._LogInfos.MissingFile, "TexturesWebGL.js"), cc._tmp.WebGLTextureCache(), delete cc._tmp.WebGLTextureCache);
});
cc.TextureAtlas = cc.Class.extend({
  dirty: !1,
  texture: null,
  _indices: null,
  _buffersVBO: null,
  _capacity: 0,
  _quads: null,
  _quadsArrayBuffer: null,
  _quadsWebBuffer: null,
  _quadsReader: null,
  ctor: function (a, b) {
    this._buffersVBO = [];
    cc.isString(a)
      ? this.initWithFile(a, b)
      : a instanceof cc.Texture2D && this.initWithTexture(a, b);
  },
  getTotalQuads: function () {
    return this._totalQuads;
  },
  getCapacity: function () {
    return this._capacity;
  },
  getTexture: function () {
    return this.texture;
  },
  setTexture: function (a) {
    this.texture = a;
  },
  setDirty: function (a) {
    this.dirty = a;
  },
  isDirty: function () {
    return this.dirty;
  },
  getQuads: function () {
    return this._quads;
  },
  setQuads: function (a) {
    this._quads = a;
  },
  _copyQuadsToTextureAtlas: function (a, b) {
    if (a) for (var d = 0; d < a.length; d++) this._setQuadToArray(a[d], b + d);
  },
  _setQuadToArray: function (a, b) {
    var d = this._quads;
    d[b]
      ? ((d[b].bl = a.bl), (d[b].br = a.br), (d[b].tl = a.tl), (d[b].tr = a.tr))
      : (d[b] = new cc.V3F_C4B_T2F_Quad(
          a.tl,
          a.bl,
          a.tr,
          a.br,
          this._quadsArrayBuffer,
          b * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT
        ));
  },
  description: function () {
    return "\x3ccc.TextureAtlas | totalQuads \x3d" + this._totalQuads + "\x3e";
  },
  _setupIndices: function () {
    if (0 !== this._capacity)
      for (var a = this._indices, b = this._capacity, d = 0; d < b; d++)
        cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP
          ? ((a[6 * d + 0] = 4 * d + 0),
            (a[6 * d + 1] = 4 * d + 0),
            (a[6 * d + 2] = 4 * d + 2),
            (a[6 * d + 3] = 4 * d + 1),
            (a[6 * d + 4] = 4 * d + 3),
            (a[6 * d + 5] = 4 * d + 3))
          : ((a[6 * d + 0] = 4 * d + 0),
            (a[6 * d + 1] = 4 * d + 1),
            (a[6 * d + 2] = 4 * d + 2),
            (a[6 * d + 3] = 4 * d + 3),
            (a[6 * d + 4] = 4 * d + 2),
            (a[6 * d + 5] = 4 * d + 1));
  },
  _setupVBO: function () {
    var a = cc._renderContext;
    this._buffersVBO[0] = a.createBuffer();
    this._buffersVBO[1] = a.createBuffer();
    this._quadsWebBuffer = a.createBuffer();
    this._mapBuffers();
  },
  _mapBuffers: function () {
    var a = cc._renderContext;
    a.bindBuffer(a.ARRAY_BUFFER, this._quadsWebBuffer);
    a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
  },
  initWithFile: function (a, b) {
    var d = cc.textureCache.addImage(a);
    if (d) return this.initWithTexture(d, b);
    cc.log(cc._LogInfos.TextureAtlas_initWithFile, a);
    return !1;
  },
  initWithTexture: function (a, b) {
    cc.assert(a, cc._LogInfos.TextureAtlas_initWithTexture);
    this._capacity = b |= 0;
    this._totalQuads = 0;
    this.texture = a;
    this._quads = [];
    this._indices = new Uint16Array(6 * b);
    var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
    this._quadsArrayBuffer = new ArrayBuffer(d * b);
    this._quadsReader = new Uint8Array(this._quadsArrayBuffer);
    if ((!this._quads || !this._indices) && 0 < b) return !1;
    for (var e = this._quads, f = 0; f < b; f++)
      e[f] = new cc.V3F_C4B_T2F_Quad(
        null,
        null,
        null,
        null,
        this._quadsArrayBuffer,
        f * d
      );
    this._setupIndices();
    this._setupVBO();
    return (this.dirty = !0);
  },
  updateQuad: function (a, b) {
    cc.assert(a, cc._LogInfos.TextureAtlas_updateQuad);
    cc.assert(
      0 <= b && b < this._capacity,
      cc._LogInfos.TextureAtlas_updateQuad_2
    );
    this._totalQuads = Math.max(b + 1, this._totalQuads);
    this._setQuadToArray(a, b);
    this.dirty = !0;
  },
  insertQuad: function (a, b) {
    cc.assert(b < this._capacity, cc._LogInfos.TextureAtlas_insertQuad_2);
    this._totalQuads++;
    if (this._totalQuads > this._capacity)
      cc.log(cc._LogInfos.TextureAtlas_insertQuad);
    else {
      var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
        e = b * d,
        f = (this._totalQuads - 1 - b) * d;
      this._quads[this._totalQuads - 1] = new cc.V3F_C4B_T2F_Quad(
        null,
        null,
        null,
        null,
        this._quadsArrayBuffer,
        (this._totalQuads - 1) * d
      );
      this._quadsReader.set(this._quadsReader.subarray(e, e + f), e + d);
      this._setQuadToArray(a, b);
      this.dirty = !0;
    }
  },
  insertQuads: function (a, b, d) {
    d = d || a.length;
    cc.assert(b + d <= this._capacity, cc._LogInfos.TextureAtlas_insertQuads);
    var e = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
    this._totalQuads += d;
    if (this._totalQuads > this._capacity)
      cc.log(cc._LogInfos.TextureAtlas_insertQuad);
    else {
      var f = b * e,
        g = (this._totalQuads - 1 - b - d) * e,
        h = this._totalQuads - 1 - d,
        k;
      for (k = 0; k < d; k++)
        this._quads[h + k] = new cc.V3F_C4B_T2F_Quad(
          null,
          null,
          null,
          null,
          this._quadsArrayBuffer,
          (this._totalQuads - 1) * e
        );
      this._quadsReader.set(this._quadsReader.subarray(f, f + g), f + e * d);
      for (k = 0; k < d; k++) this._setQuadToArray(a[k], b + k);
      this.dirty = !0;
    }
  },
  insertQuadFromIndex: function (a, b) {
    if (a !== b) {
      cc.assert(
        0 <= b || b < this._totalQuads,
        cc._LogInfos.TextureAtlas_insertQuadFromIndex
      );
      cc.assert(
        0 <= a || a < this._totalQuads,
        cc._LogInfos.TextureAtlas_insertQuadFromIndex_2
      );
      var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
        e = this._quadsReader,
        f = e.subarray(a * d, d),
        g;
      a > b
        ? ((g = b * d),
          e.set(e.subarray(g, g + (a - b) * d), g + d),
          e.set(f, g))
        : ((g = (a + 1) * d),
          e.set(e.subarray(g, g + (b - a) * d), g - d),
          e.set(f, b * d));
      this.dirty = !0;
    }
  },
  removeQuadAtIndex: function (a) {
    cc.assert(
      a < this._totalQuads,
      cc._LogInfos.TextureAtlas_removeQuadAtIndex
    );
    var b = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
    this._totalQuads--;
    this._quads.length = this._totalQuads;
    if (a !== this._totalQuads) {
      var d = (a + 1) * b;
      this._quadsReader.set(
        this._quadsReader.subarray(d, d + (this._totalQuads - a) * b),
        d - b
      );
    }
    this.dirty = !0;
  },
  removeQuadsAtIndex: function (a, b) {
    cc.assert(
      a + b <= this._totalQuads,
      cc._LogInfos.TextureAtlas_removeQuadsAtIndex
    );
    this._totalQuads -= b;
    if (a !== this._totalQuads) {
      var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
        e = (a + b) * d,
        f = a * d;
      this._quadsReader.set(
        this._quadsReader.subarray(e, e + (this._totalQuads - a) * d),
        f
      );
    }
    this.dirty = !0;
  },
  removeAllQuads: function () {
    this._totalQuads = this._quads.length = 0;
  },
  _setDirty: function (a) {
    this.dirty = a;
  },
  resizeCapacity: function (a) {
    if (a === this._capacity) return !0;
    var b = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
      d = this._capacity;
    this._totalQuads = Math.min(this._totalQuads, a);
    var e = (this._capacity = 0 | a),
      f = this._totalQuads;
    if (null === this._quads)
      for (
        this._quads = [],
          this._quadsArrayBuffer = new ArrayBuffer(b * e),
          this._quadsReader = new Uint8Array(this._quadsArrayBuffer),
          a = 0;
        a < e;
        a++
      )
        this._quads = new cc.V3F_C4B_T2F_Quad(
          null,
          null,
          null,
          null,
          this._quadsArrayBuffer,
          a * b
        );
    else {
      var g,
        h,
        k = this._quads;
      if (e > d) {
        g = [];
        h = new ArrayBuffer(b * e);
        for (a = 0; a < f; a++)
          g[a] = new cc.V3F_C4B_T2F_Quad(
            k[a].tl,
            k[a].bl,
            k[a].tr,
            k[a].br,
            h,
            a * b
          );
        for (; a < e; a++)
          g[a] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, h, a * b);
      } else
        for (
          f = Math.max(f, e), g = [], h = new ArrayBuffer(b * e), a = 0;
          a < f;
          a++
        )
          g[a] = new cc.V3F_C4B_T2F_Quad(
            k[a].tl,
            k[a].bl,
            k[a].tr,
            k[a].br,
            h,
            a * b
          );
      this._quadsReader = new Uint8Array(h);
      this._quads = g;
      this._quadsArrayBuffer = h;
    }
    null === this._indices
      ? (this._indices = new Uint16Array(6 * e))
      : e > d
      ? ((b = new Uint16Array(6 * e)),
        b.set(this._indices, 0),
        (this._indices = b))
      : (this._indices = this._indices.subarray(0, 6 * e));
    this._setupIndices();
    this._mapBuffers();
    return (this.dirty = !0);
  },
  increaseTotalQuadsWith: function (a) {
    this._totalQuads += a;
  },
  moveQuadsFromIndex: function (a, b, d) {
    if (void 0 === d) {
      if (
        ((d = b),
        (b = this._totalQuads - a),
        cc.assert(
          d + (this._totalQuads - a) <= this._capacity,
          cc._LogInfos.TextureAtlas_moveQuadsFromIndex
        ),
        0 === b)
      )
        return;
    } else if (
      (cc.assert(
        d + b <= this._totalQuads,
        cc._LogInfos.TextureAtlas_moveQuadsFromIndex_2
      ),
      cc.assert(
        a < this._totalQuads,
        cc._LogInfos.TextureAtlas_moveQuadsFromIndex_3
      ),
      a === d)
    )
      return;
    var e = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
      f = a * e,
      g = b * e,
      h = this._quadsReader,
      k = h.subarray(f, f + g),
      m = d * e;
    d < a
      ? ((b = d * e), h.set(h.subarray(b, b + (a - d) * e), b + g))
      : ((b = (a + b) * e), h.set(h.subarray(b, b + (d - a) * e), f));
    h.set(k, m);
    this.dirty = !0;
  },
  fillWithEmptyQuadsFromIndex: function (a, b) {
    for (
      var d = b * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
        e = new Uint8Array(
          this._quadsArrayBuffer,
          a * cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
          d
        ),
        f = 0;
      f < d;
      f++
    )
      e[f] = 0;
  },
  drawQuads: function () {
    this.drawNumberOfQuads(this._totalQuads, 0);
  },
  _releaseBuffer: function () {
    var a = cc._renderContext;
    this._buffersVBO &&
      (this._buffersVBO[0] && a.deleteBuffer(this._buffersVBO[0]),
      this._buffersVBO[1] && a.deleteBuffer(this._buffersVBO[1]));
    this._quadsWebBuffer && a.deleteBuffer(this._quadsWebBuffer);
  },
});
_p = cc.TextureAtlas.prototype;
cc.defineGetterSetter(_p, "totalQuads", _p.getTotalQuads);
cc.defineGetterSetter(_p, "capacity", _p.getCapacity);
cc.defineGetterSetter(_p, "quads", _p.getQuads, _p.setQuads);
cc.TextureAtlas.create = function (a, b) {
  return new cc.TextureAtlas(a, b);
};
cc.TextureAtlas.createWithTexture = cc.TextureAtlas.create;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
    (cc.assert(
      cc.isFunction(cc._tmp.WebGLTextureAtlas),
      cc._LogInfos.MissingFile,
      "TexturesWebGL.js"
    ),
    cc._tmp.WebGLTextureAtlas(),
    delete cc._tmp.WebGLTextureAtlas);
});
cc.assert(
  cc.isFunction(cc._tmp.PrototypeTextureAtlas),
  cc._LogInfos.MissingFile,
  "TexturesPropertyDefine.js"
);
cc._tmp.PrototypeTextureAtlas();
delete cc._tmp.PrototypeTextureAtlas;
cc.Scene = cc.Node.extend({
  _className: "Scene",
  ctor: function () {
    cc.Node.prototype.ctor.call(this);
    this._ignoreAnchorPointForPosition = !0;
    this.setAnchorPoint(0.5, 0.5);
    this.setContentSize(cc.director.getWinSize());
  },
});
cc.Scene.create = function () {
  return new cc.Scene();
};
cc.LoaderScene = cc.Scene.extend({
  _interval: null,
  _label: null,
  _logo: null,
  _className: "LoaderScene",
  cb: null,
  target: null,
  init: function () {
    var a = this,
      b = 200,
      d = (a._bgLayer = new cc.LayerColor(cc.color(32, 32, 32, 255)));
    a.addChild(d, 0);
    var e = 24,
      f = -b / 2 + 100;
    cc._loaderImage &&
      (cc.loader.loadImg(
        cc._loaderImage,
        { isCrossOrigin: !1 },
        function (d, e) {
          b = e.height;
          a._initStage(e, cc.visibleRect.center);
        }
      ),
      (e = 14),
      (f = -b / 2 - 10));
    e = a._label = new cc.LabelTTF("Loading... 0%", "Arial", e);
    e.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, f)));
    e.setColor(cc.color(180, 180, 180));
    d.addChild(this._label, 10);
    return !0;
  },
  _initStage: function (a, b) {
    var d = (this._texture2d = new cc.Texture2D());
    d.initWithElement(a);
    d.handleLoadedTexture();
    d = this._logo = new cc.Sprite(d);
    d.setScale(cc.contentScaleFactor());
    d.x = b.x;
    d.y = b.y;
    this._bgLayer.addChild(d, 10);
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.schedule(this._startLoading, 0.3);
  },
  onExit: function () {
    cc.Node.prototype.onExit.call(this);
    this._label.setString("Loading... 0%");
  },
  initWithResources: function (a, b, d) {
    cc.isString(a) && (a = [a]);
    this.resources = a || [];
    this.cb = b;
    this.target = d;
  },
  _startLoading: function () {
    var a = this;
    a.unschedule(a._startLoading);
    cc.loader.load(
      a.resources,
      function (b, d, e) {
        b = Math.min(((e / d) * 100) | 0, 100);
        a._label.setString("Loading... " + b + "%");
      },
      function () {
        a.cb && a.cb.call(a.target);
      }
    );
  },
  _updateTransform: function () {
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    this._logo &&
      this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
});
cc.LoaderScene.preload = function (a, b, d) {
  var e = cc;
  e.loaderScene ||
    ((e.loaderScene = new cc.LoaderScene()),
    e.loaderScene.init(),
    cc.eventManager.addCustomListener(
      cc.Director.EVENT_PROJECTION_CHANGED,
      function () {
        e.loaderScene._updateTransform();
      }
    ));
  e.loaderScene.initWithResources(a, b, d);
  cc.director.runScene(e.loaderScene);
  return e.loaderScene;
};
cc.Layer = cc.Node.extend({
  _className: "Layer",
  ctor: function () {
    cc.Node.prototype.ctor.call(this);
    this._ignoreAnchorPointForPosition = !0;
    this.setAnchorPoint(0.5, 0.5);
    this.setContentSize(cc.winSize);
    this._cascadeOpacityEnabled = this._cascadeColorEnabled = !1;
  },
  bake: function () {
    this._renderCmd.bake();
  },
  unbake: function () {
    this._renderCmd.unbake();
  },
  isBaked: function () {
    return this._renderCmd._isBaked;
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      a = cc.renderer;
      b.visit(d);
      if (b._isBaked) a.pushRenderCommand(b), b._bakeSprite.visit(this);
      else {
        var e = this._children,
          f = e.length,
          g;
        if (0 < f) {
          this._reorderChildDirty && this.sortAllChildren();
          for (d = 0; d < f; d++)
            if (((g = e[d]), 0 > g._localZOrder)) g.visit(this);
            else break;
          for (a.pushRenderCommand(b); d < f; d++) e[d].visit(this);
        } else a.pushRenderCommand(b);
      }
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  addChild: function (a, b, d) {
    cc.Node.prototype.addChild.call(this, a, b, d);
    this._renderCmd._bakeForAddChild(a);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.Layer.CanvasRenderCmd(this)
      : new cc.Layer.WebGLRenderCmd(this);
  },
});
cc.Layer.create = function () {
  return new cc.Layer();
};
cc.LayerColor = cc.Layer.extend({
  _blendFunc: null,
  _className: "LayerColor",
  getBlendFunc: function () {
    return this._blendFunc;
  },
  changeWidthAndHeight: function (a, b) {
    this.width = a;
    this.height = b;
  },
  changeWidth: function (a) {
    this.width = a;
  },
  changeHeight: function (a) {
    this.height = a;
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  ctor: function (a, b, d) {
    cc.Layer.prototype.ctor.call(this);
    this._blendFunc = cc.BlendFunc._alphaNonPremultiplied();
    cc.LayerColor.prototype.init.call(this, a, b, d);
  },
  init: function (a, b, d) {
    var e = cc.director.getWinSize();
    a = a || cc.color(0, 0, 0, 255);
    b = void 0 === b ? e.width : b;
    d = void 0 === d ? e.height : d;
    e = this._realColor;
    e.r = a.r;
    e.g = a.g;
    e.b = a.b;
    this._realOpacity = a.a;
    this._renderCmd.setDirtyFlag(
      cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty
    );
    cc.LayerColor.prototype.setContentSize.call(this, b, d);
    return !0;
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      a = cc.renderer;
      b.visit(d);
      if (b._isBaked)
        a.pushRenderCommand(b._bakeRenderCmd),
          b._bakeSprite._renderCmd.setDirtyFlag(
            cc.Node._dirtyFlags.transformDirty
          ),
          b._bakeSprite.visit(this);
      else {
        var e = this._children,
          f = e.length;
        if (0 < f) {
          this._reorderChildDirty && this.sortAllChildren();
          for (d = 0; d < f; d++)
            if (((child = e[d]), 0 > child._localZOrder)) child.visit(this);
            else break;
          for (a.pushRenderCommand(b); d < f; d++) e[d].visit(this);
        } else a.pushRenderCommand(b);
      }
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  setBlendFunc: function (a, b) {
    var d = this._blendFunc;
    void 0 === b
      ? ((d.src = a.src), (d.dst = a.dst))
      : ((d.src = a), (d.dst = b));
    this._renderCmd.updateBlendFunc(d);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.LayerColor.CanvasRenderCmd(this)
      : new cc.LayerColor.WebGLRenderCmd(this);
  },
});
cc.LayerColor.create = function (a, b, d) {
  return new cc.LayerColor(a, b, d);
};
(function () {
  var a = cc.LayerColor.prototype;
  cc.defineGetterSetter(a, "width", a._getWidth, a._setWidth);
  cc.defineGetterSetter(a, "height", a._getHeight, a._setHeight);
})();
cc.LayerGradient = cc.LayerColor.extend({
  _endColor: null,
  _startOpacity: 255,
  _endOpacity: 255,
  _alongVector: null,
  _compressedInterpolation: !1,
  _className: "LayerGradient",
  _colorStops: [],
  ctor: function (a, b, d, e) {
    cc.LayerColor.prototype.ctor.call(this);
    this._endColor = cc.color(0, 0, 0, 255);
    this._alongVector = cc.p(0, -1);
    this._endOpacity = this._startOpacity = 255;
    e && e instanceof Array
      ? ((this._colorStops = e),
        e.splice(0, 0, { p: 0, color: a || cc.color.BLACK }),
        e.push({ p: 1, color: b || cc.color.BLACK }))
      : (this._colorStops = [
          { p: 0, color: a || cc.color.BLACK },
          { p: 1, color: b || cc.color.BLACK },
        ]);
    cc.LayerGradient.prototype.init.call(this, a, b, d, e);
  },
  init: function (a, b, d, e) {
    a = a || cc.color(0, 0, 0, 255);
    b = b || cc.color(0, 0, 0, 255);
    d = d || cc.p(0, -1);
    e = this._endColor;
    this._startOpacity = a.a;
    e.r = b.r;
    e.g = b.g;
    e.b = b.b;
    this._endOpacity = b.a;
    this._alongVector = d;
    this._compressedInterpolation = !0;
    cc.LayerColor.prototype.init.call(this, cc.color(a.r, a.g, a.b, 255));
    this._renderCmd.setDirtyFlag(
      cc.Node._dirtyFlags.colorDirty |
        cc.Node._dirtyFlags.opacityDirty |
        cc.Node._dirtyFlags.gradientDirty
    );
    return !0;
  },
  setContentSize: function (a, b) {
    cc.LayerColor.prototype.setContentSize.call(this, a, b);
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty);
  },
  _setWidth: function (a) {
    cc.LayerColor.prototype._setWidth.call(this, a);
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty);
  },
  _setHeight: function (a) {
    cc.LayerColor.prototype._setHeight.call(this, a);
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty);
  },
  getStartColor: function () {
    return cc.color(this._realColor);
  },
  setStartColor: function (a) {
    this.color = a;
    var b = this._colorStops;
    b &&
      0 < b.length &&
      ((b = b[0].color), (b.r = a.r), (b.g = a.g), (b.b = a.b));
  },
  setEndColor: function (a) {
    var b = this._endColor;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    (b = this._colorStops) &&
      0 < b.length &&
      ((b = b[b.length - 1].color), (b.r = a.r), (b.g = a.g), (b.b = a.b));
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
  },
  getEndColor: function () {
    return cc.color(this._endColor);
  },
  setStartOpacity: function (a) {
    this._startOpacity = a;
    var b = this._colorStops;
    b && 0 < b.length && (b[0].color.a = a);
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  getStartOpacity: function () {
    return this._startOpacity;
  },
  setEndOpacity: function (a) {
    this._endOpacity = a;
    var b = this._colorStops;
    b && 0 < b.length && (b[b.length - 1].color.a = a);
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  getEndOpacity: function () {
    return this._endOpacity;
  },
  setVector: function (a) {
    this._alongVector.x = a.x;
    this._alongVector.y = a.y;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty);
  },
  getVector: function () {
    return cc.p(this._alongVector.x, this._alongVector.y);
  },
  isCompressedInterpolation: function () {
    return this._compressedInterpolation;
  },
  setCompressedInterpolation: function (a) {
    this._compressedInterpolation = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty);
  },
  getColorStops: function () {
    return this._colorStops;
  },
  setColorStops: function (a) {
    this._colorStops = a;
    this._renderCmd.setDirtyFlag(
      cc.Node._dirtyFlags.colorDirty |
        cc.Node._dirtyFlags.opacityDirty |
        cc.Node._dirtyFlags.gradientDirty
    );
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.LayerGradient.CanvasRenderCmd(this)
      : new cc.LayerGradient.WebGLRenderCmd(this);
  },
});
cc.LayerGradient.create = function (a, b, d, e) {
  return new cc.LayerGradient(a, b, d, e);
};
(function () {
  var a = cc.LayerGradient.prototype;
  cc.defineGetterSetter(a, "startColor", a.getStartColor, a.setStartColor);
  cc.defineGetterSetter(a, "endColor", a.getEndColor, a.setEndColor);
  cc.defineGetterSetter(
    a,
    "startOpacity",
    a.getStartOpacity,
    a.setStartOpacity
  );
  cc.defineGetterSetter(a, "endOpacity", a.getEndOpacity, a.setEndOpacity);
  cc.defineGetterSetter(a, "vector", a.getVector, a.setVector);
  cc.defineGetterSetter(a, "colorStops", a.getColorStops, a.setColorStops);
})();
cc.LayerMultiplex = cc.Layer.extend({
  _enabledLayer: 0,
  _layers: null,
  _className: "LayerMultiplex",
  ctor: function (a) {
    cc.Layer.prototype.ctor.call(this);
    a instanceof Array
      ? cc.LayerMultiplex.prototype.initWithLayers.call(this, a)
      : cc.LayerMultiplex.prototype.initWithLayers.call(
          this,
          Array.prototype.slice.call(arguments)
        );
  },
  initWithLayers: function (a) {
    0 < a.length &&
      null == a[a.length - 1] &&
      cc.log(cc._LogInfos.LayerMultiplex_initWithLayers);
    this._layers = a;
    this._enabledLayer = 0;
    this.addChild(this._layers[this._enabledLayer]);
    return !0;
  },
  switchTo: function (a) {
    a >= this._layers.length
      ? cc.log(cc._LogInfos.LayerMultiplex_switchTo)
      : (this.removeChild(this._layers[this._enabledLayer], !0),
        (this._enabledLayer = a),
        this.addChild(this._layers[a]));
  },
  switchToAndReleaseMe: function (a) {
    a >= this._layers.length
      ? cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe)
      : (this.removeChild(this._layers[this._enabledLayer], !0),
        (this._layers[this._enabledLayer] = null),
        (this._enabledLayer = a),
        this.addChild(this._layers[a]));
  },
  addLayer: function (a) {
    a ? this._layers.push(a) : cc.log(cc._LogInfos.LayerMultiplex_addLayer);
  },
});
cc.LayerMultiplex.create = function () {
  return new cc.LayerMultiplex(Array.prototype.slice.call(arguments));
};
(function () {
  cc.Layer.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._isBaked = !1;
    this._bakeSprite = null;
    this._canUseDirtyRegion = !0;
    this._updateCache = 2;
  };
  var a = (cc.Layer.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.Layer.CanvasRenderCmd;
  a._layerCmdCtor = cc.Layer.CanvasRenderCmd;
  a._setCacheDirty = function (a) {
    a && 0 === this._updateCache && (this._updateCache = 2);
    !1 === this._cacheDirty &&
      ((this._cacheDirty = !0),
      (a = this._cachedParent) &&
        a !== this &&
        a._setNodeDirtyForCache &&
        a._setNodeDirtyForCache());
  };
  a.updateStatus = function () {
    var a = cc.Node._dirtyFlags;
    this._dirtyFlag & a.orderDirty &&
      ((this._cacheDirty = !0),
      0 === this._updateCache && (this._updateCache = 2),
      (this._dirtyFlag &= ~a.orderDirty));
    this.originUpdateStatus();
  };
  a._syncStatus = function (a) {
    var d = cc.Node._dirtyFlags,
      e = this._dirtyFlag;
    if (this._isBaked || e & d.orderDirty)
      (this._cacheDirty = !0),
        0 === this._updateCache && (this._updateCache = 2),
        (this._dirtyFlag &= ~d.orderDirty);
    this._originSyncStatus(a);
  };
  a.transform = function (a, d) {
    this._worldTransform ||
      (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 });
    var e = this._worldTransform,
      f = e.a,
      g = e.b,
      h = e.c,
      k = e.d;
    this.originTransform(a, d);
    (e.a === f && e.b === g && e.c === h && e.d === k) ||
      0 !== this._updateCache ||
      (this._updateCache = 2);
  };
  a.bake = function () {
    if (!this._isBaked) {
      this._needDraw = !0;
      this._isBaked = this._cacheDirty = cc.renderer.childrenOrderDirty = !0;
      0 === this._updateCache && (this._updateCache = 2);
      for (var a = this._node._children, d = 0, e = a.length; d < e; d++)
        a[d]._renderCmd._setCachedParent(this);
      this._bakeSprite ||
        ((this._bakeSprite = new cc.BakeSprite()),
        this._bakeSprite.setAnchorPoint(0, 0));
    }
  };
  a.unbake = function () {
    if (this._isBaked) {
      cc.renderer.childrenOrderDirty = !0;
      this._isBaked = this._needDraw = !1;
      this._cacheDirty = !0;
      0 === this._updateCache && (this._updateCache = 2);
      for (var a = this._node._children, d = 0, e = a.length; d < e; d++)
        a[d]._renderCmd._setCachedParent(null);
    }
  };
  a.isBaked = function () {
    return this._isBaked;
  };
  a.rendering = function () {
    if (this._cacheDirty) {
      var a = this._node,
        d = a._children,
        e = this._bakeSprite;
      this.transform(this.getParentRenderCmd(), !0);
      var f = this._getBoundingBoxForBake();
      f.width = 0 | (f.width + 0.5);
      f.height = 0 | (f.height + 0.5);
      var g = e.getCacheContext(),
        h = g.getContext();
      e.setPosition(f.x, f.y);
      if (0 < this._updateCache) {
        e.resetCanvasSize(f.width, f.height);
        g.setOffset(0 - f.x, h.canvas.height - f.height + f.y);
        a.sortAllChildren();
        cc.renderer._turnToCacheMode(this.__instanceId);
        a = 0;
        for (f = d.length; a < f; a++) d[a].visit(this);
        cc.renderer._renderingToCacheCanvas(g, this.__instanceId);
        e.transform();
        this._updateCache--;
      }
      this._cacheDirty = !1;
    }
  };
  a._bakeForAddChild = function (a) {
    a._parent === this._node &&
      this._isBaked &&
      a._renderCmd._setCachedParent(this);
  };
  a._getBoundingBoxForBake = function () {
    var a = null,
      d = this._node;
    if (!d._children || 0 === d._children.length) return cc.rect(0, 0, 10, 10);
    for (
      var e = d.getNodeToWorldTransform(), d = d._children, f = 0, g = d.length;
      f < g;
      f++
    ) {
      var h = d[f];
      h &&
        h._visible &&
        (a
          ? (h = h._getBoundingBoxToCurrentNode(e)) && (a = cc.rectUnion(a, h))
          : (a = h._getBoundingBoxToCurrentNode(e)));
    }
    return a;
  };
})();
(function () {
  cc.LayerColor.CanvasRenderCmd = function (a) {
    this._layerCmdCtor(a);
    this._needDraw = !0;
    this._blendFuncStr = "source-over";
    this._bakeRenderCmd = new cc.CustomRenderCmd(this, this._bakeRendering);
  };
  var a = (cc.LayerColor.CanvasRenderCmd.prototype = Object.create(
    cc.Layer.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.LayerColor.CanvasRenderCmd;
  a.unbake = function () {
    cc.Layer.CanvasRenderCmd.prototype.unbake.call(this);
    this._needDraw = !0;
  };
  a.rendering = function (a, d, e) {
    a = a || cc._renderContext;
    var f = a.getContext(),
      g = this._node,
      h = this._displayedColor,
      k = this._displayedOpacity / 255,
      m = g._contentSize.width,
      g = g._contentSize.height;
    0 !== k &&
      (a.setCompositeOperation(this._blendFuncStr),
      a.setGlobalAlpha(k),
      a.setFillStyle(
        "rgba(" + (0 | h.r) + "," + (0 | h.g) + "," + (0 | h.b) + ", 1)"
      ),
      a.setTransform(this._worldTransform, d, e),
      f.fillRect(0, 0, m, -g),
      cc.g_NumberOfDraws++);
  };
  a.updateBlendFunc = function (a) {
    this._blendFuncStr = cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(
      a
    );
  };
  a._updateSquareVertices = a._updateSquareVerticesWidth = a._updateSquareVerticesHeight = function () {};
  a._bakeRendering = function () {
    if (this._cacheDirty) {
      var a = this._node,
        d = this._bakeSprite,
        e = a._children,
        f,
        g = e.length;
      this.transform(this.getParentRenderCmd(), !0);
      f = this._getBoundingBoxForBake();
      f.width = 0 | (f.width + 0.5);
      f.height = 0 | (f.height + 0.5);
      var h = d.getCacheContext(),
        k = h.getContext();
      d.setPosition(f.x, f.y);
      if (0 < this._updateCache) {
        k.fillStyle = h._currentFillStyle;
        d.resetCanvasSize(f.width, f.height);
        h.setOffset(0 - f.x, k.canvas.height - f.height + f.y);
        cc.renderer._turnToCacheMode(this.__instanceId);
        if (0 < g) {
          a.sortAllChildren();
          for (f = 0; f < g; f++)
            if (((k = e[f]), 0 > k._localZOrder)) k.visit(a);
            else break;
          for (cc.renderer.pushRenderCommand(this); f < g; f++) e[f].visit(a);
        } else cc.renderer.pushRenderCommand(this);
        cc.renderer._renderingToCacheCanvas(h, this.__instanceId);
        d.transform();
        this._updateCache--;
      }
      this._cacheDirty = !1;
    }
  };
  a._getBoundingBoxForBake = function () {
    var a = this._node,
      d = cc.rect(0, 0, a._contentSize.width, a._contentSize.height),
      e = a.getNodeToWorldTransform(),
      d = cc.rectApplyAffineTransform(d, a.getNodeToWorldTransform());
    if (!a._children || 0 === a._children.length) return d;
    for (var a = a._children, f = 0; f < a.length; f++) {
      var g = a[f];
      g &&
        g._visible &&
        ((g = g._getBoundingBoxToCurrentNode(e)), (d = cc.rectUnion(d, g)));
    }
    return d;
  };
})();
(function () {
  cc.LayerGradient.CanvasRenderCmd = function (a) {
    cc.LayerColor.CanvasRenderCmd.call(this, a);
    this._needDraw = !0;
    this._startPoint = cc.p(0, 0);
    this._endPoint = cc.p(0, 0);
    this._endStopStr = this._startStopStr = null;
  };
  var a = (cc.LayerGradient.CanvasRenderCmd.prototype = Object.create(
    cc.LayerColor.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.LayerGradient.CanvasRenderCmd;
  a.rendering = function (a, d, e) {
    a = a || cc._renderContext;
    var f = a.getContext(),
      g = this._node,
      h = this._displayedOpacity / 255;
    if (0 !== h) {
      var k = g._contentSize.width,
        m = g._contentSize.height;
      a.setCompositeOperation(this._blendFuncStr);
      a.setGlobalAlpha(h);
      h = f.createLinearGradient(
        this._startPoint.x,
        this._startPoint.y,
        this._endPoint.x,
        this._endPoint.y
      );
      if (g._colorStops)
        for (var n = 0; n < g._colorStops.length; n++)
          h.addColorStop(g._colorStops[n].p, this._colorStopsStr[n]);
      else
        h.addColorStop(0, this._startStopStr),
          h.addColorStop(1, this._endStopStr);
      a.setFillStyle(h);
      a.setTransform(this._worldTransform, d, e);
      f.fillRect(0, 0, k, -m);
      cc.g_NumberOfDraws++;
    }
  };
  a.updateStatus = function () {
    var a = cc.Node._dirtyFlags;
    this._dirtyFlag & a.gradientDirty &&
      ((this._dirtyFlag |= a.colorDirty),
      (this._dirtyFlag &= ~a.gradientDirty));
    this.originUpdateStatus();
  };
  a._syncStatus = function (a) {
    var d = cc.Node._dirtyFlags;
    this._dirtyFlag & d.gradientDirty &&
      ((this._dirtyFlag |= d.colorDirty),
      (this._dirtyFlag &= ~d.gradientDirty));
    this._originSyncStatus(a);
  };
  a._updateColor = function () {
    var a = this._node,
      d = a._contentSize,
      e = 0.5 * d.width,
      d = 0.5 * d.height,
      f = cc.pAngleSigned(cc.p(0, -1), a._alongVector),
      f = cc.pRotateByAngle(cc.p(0, -1), cc.p(0, 0), f),
      g = Math.min(Math.abs(1 / f.x), Math.abs(1 / f.y));
    this._startPoint.x = e * -f.x * g + e;
    this._startPoint.y = d * f.y * g - d;
    this._endPoint.x = e * f.x * g + e;
    this._endPoint.y = d * -f.y * g - d;
    e = this._displayedColor;
    d = a._endColor;
    f = a._startOpacity / 255;
    g = a._endOpacity / 255;
    this._startStopStr =
      "rgba(" +
      Math.round(e.r) +
      "," +
      Math.round(e.g) +
      "," +
      Math.round(e.b) +
      "," +
      f.toFixed(4) +
      ")";
    this._endStopStr =
      "rgba(" +
      Math.round(d.r) +
      "," +
      Math.round(d.g) +
      "," +
      Math.round(d.b) +
      "," +
      g.toFixed(4) +
      ")";
    if (a._colorStops)
      for (
        this._endOpacity = this._startOpacity = 0,
          this._colorStopsStr = [],
          e = 0;
        e < a._colorStops.length;
        e++
      )
        (d = a._colorStops[e].color),
          (f = null == d.a ? 1 : d.a / 255),
          this._colorStopsStr.push(
            "rgba(" +
              Math.round(d.r) +
              "," +
              Math.round(d.g) +
              "," +
              Math.round(d.b) +
              "," +
              f.toFixed(4) +
              ")"
          );
  };
})();
(function () {
  cc.Layer.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._isBaked = !1;
  };
  var a = (cc.Layer.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.Layer.WebGLRenderCmd;
  a._layerCmdCtor = cc.Layer.WebGLRenderCmd;
  a.bake = function () {};
  a.unbake = function () {};
  a._bakeForAddChild = function () {};
})();
(function () {
  cc.LayerColor.WebGLRenderCmd = function (a) {
    this._layerCmdCtor(a);
    this._needDraw = !0;
    this._matrix = null;
    this.initData(4);
    this._color = new Uint32Array(1);
    this._vertexBuffer = null;
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_POSITION_COLOR
    );
  };
  var a = (cc.LayerColor.WebGLRenderCmd.prototype = Object.create(
    cc.Layer.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.LayerColor.WebGLRenderCmd;
  a.initData = function (a) {
    this._data = new ArrayBuffer(16 * a);
    this._positionView = new Float32Array(this._data);
    this._colorView = new Uint32Array(this._data);
    this._dataDirty = !0;
  };
  a.transform = function (a, d) {
    this.originTransform(a, d);
    var e = this._node,
      f = e._contentSize.width,
      g = e._contentSize.height,
      h = this._positionView;
    h[4] = f;
    h[9] = g;
    h[12] = f;
    h[13] = g;
    h[2].z = h[6] = h[10] = h[14] = e._vertexZ;
    this._dataDirty = !0;
  };
  a._updateColor = function () {
    var a = this._displayedColor;
    this._color[0] =
      (this._displayedOpacity << 24) | (a.b << 16) | (a.g << 8) | a.r;
    for (var a = this._colorView, d = 0; 4 > d; d++)
      a[4 * d + 3] = this._color[0];
    this._dataDirty = !0;
  };
  a.rendering = function (a) {
    a = a || cc._renderContext;
    var d = this._node;
    this._matrix ||
      ((this._matrix = new cc.math.Matrix4()), this._matrix.identity());
    var e = this._worldTransform;
    this._matrix.mat[0] = e.a;
    this._matrix.mat[4] = e.c;
    this._matrix.mat[12] = e.tx;
    this._matrix.mat[1] = e.b;
    this._matrix.mat[5] = e.d;
    this._matrix.mat[13] = e.ty;
    this._dataDirty &&
      (this._vertexBuffer || (this._vertexBuffer = a.createBuffer()),
      a.bindBuffer(a.ARRAY_BUFFER, this._vertexBuffer),
      a.bufferData(a.ARRAY_BUFFER, this._data, a.DYNAMIC_DRAW),
      (this._dataDirty = !1));
    this._glProgramState.apply(this._matrix);
    cc.glBlendFunc(d._blendFunc.src, d._blendFunc.dst);
    a.bindBuffer(a.ARRAY_BUFFER, this._vertexBuffer);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 16, 0);
    a.vertexAttribPointer(
      cc.VERTEX_ATTRIB_COLOR,
      4,
      a.UNSIGNED_BYTE,
      !0,
      16,
      12
    );
    a.drawArrays(a.TRIANGLE_STRIP, 0, 4);
  };
  a.updateBlendFunc = function (a) {};
})();
(function () {
  cc.LayerGradient.WebGLRenderCmd = function (a) {
    cc.LayerColor.WebGLRenderCmd.call(this, a);
    this._needDraw = !0;
    this._clipRect = new cc.Rect();
    this._clippingRectDirty = !1;
  };
  var a = (cc.LayerGradient.WebGLRenderCmd.prototype = Object.create(
    cc.LayerColor.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.LayerGradient.WebGLRenderCmd;
  a.updateStatus = function () {
    var a = cc.Node._dirtyFlags;
    this._dirtyFlag & a.gradientDirty &&
      ((this._dirtyFlag |= a.colorDirty),
      this._updateVertex(),
      (this._dirtyFlag &= ~a.gradientDirty));
    this.originUpdateStatus();
  };
  a._syncStatus = function (a) {
    var d = cc.Node._dirtyFlags;
    this._dirtyFlag & d.gradientDirty &&
      ((this._dirtyFlag |= d.colorDirty),
      this._updateVertex(),
      (this._dirtyFlag &= ~d.gradientDirty));
    this._originSyncStatus(a);
  };
  a.transform = function (a, d) {
    this.originTransform(a, d);
    this._updateVertex();
  };
  a._updateVertex = function () {
    var a = this._node,
      d = a._colorStops;
    if (d && !(2 > d.length)) {
      this._clippingRectDirty = !0;
      var e,
        f = d.length,
        g = 2 * f,
        h = a._contentSize;
      this._positionView.length / 4 < g && this.initData(g);
      var k = Math.PI + cc.pAngleSigned(cc.p(0, -1), a._alongVector),
        g = cc.p(h.width / 2, h.height / 2);
      e = Math.round(cc.radiansToDegrees(k));
      var m = cc.affineTransformMake(1, 0, 0, 1, g.x, g.y),
        m = cc.affineTransformRotate(m, k),
        n;
      90 > e
        ? ((n = cc.p(-g.x, g.y)), (e = cc.p(g.x, g.y)))
        : 180 > e
        ? ((n = cc.p(g.x, g.y)), (e = cc.p(g.x, -g.y)))
        : 270 > e
        ? ((n = cc.p(g.x, -g.y)), (e = cc.p(-g.x, -g.y)))
        : ((n = cc.p(-g.x, -g.y)), (e = cc.p(-g.x, g.y)));
      var p = Math.sin(k),
        k = Math.cos(k);
      n = Math.abs((n.x * k - n.y * p) / g.x);
      e = Math.abs((e.x * p + e.y * k) / g.y);
      m = cc.affineTransformScale(m, n, e);
      p = this._positionView;
      for (e = 0; e < f; e++) {
        n = d[e].p * h.height;
        var r = cc.pointApplyAffineTransform(-g.x, n - g.y, m),
          k = 8 * e;
        p[k] = r.x;
        p[k + 1] = r.y;
        p[k + 2] = a._vertexZ;
        n = cc.pointApplyAffineTransform(h.width - g.x, n - g.y, m);
        k += 4;
        p[k] = n.x;
        p[k + 1] = n.y;
        p[k + 2] = a._vertexZ;
      }
      this._dataDirty = !0;
    }
  };
  a._updateColor = function () {
    var a = this._node._colorStops;
    if (a && !(2 > a.length)) {
      var d = a.length,
        e,
        f = this._colorView,
        g = this._displayedOpacity / 255;
      for (i = 0; i < d; i++)
        (e = a[i].color),
          (this._color[0] = ((e.a * g) << 24) | (e.b << 16) | (e.g << 8) | e.r),
          (e = 8 * i),
          (f[e + 3] = this._color[0]),
          (e += 4),
          (f[e + 3] = this._color[0]);
      this._dataDirty = !0;
    }
  };
  a.rendering = function (a) {
    a = a || cc._renderContext;
    var d = this._node;
    this._matrix ||
      ((this._matrix = new cc.math.Matrix4()), this._matrix.identity());
    var e = this._getClippingRect();
    a.enable(a.SCISSOR_TEST);
    cc.view.setScissorInPoints(e.x, e.y, e.width, e.height);
    e = this._worldTransform;
    this._matrix.mat[0] = e.a;
    this._matrix.mat[4] = e.c;
    this._matrix.mat[12] = e.tx;
    this._matrix.mat[1] = e.b;
    this._matrix.mat[5] = e.d;
    this._matrix.mat[13] = e.ty;
    this._dataDirty &&
      (this._vertexBuffer || (this._vertexBuffer = gl.createBuffer()),
      gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer),
      gl.bufferData(gl.ARRAY_BUFFER, this._data, gl.DYNAMIC_DRAW),
      (this._dataDirty = !1));
    this._glProgramState.apply(this._matrix);
    cc.glBlendFunc(d._blendFunc.src, d._blendFunc.dst);
    gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexBuffer);
    gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    gl.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
    gl.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, gl.FLOAT, !1, 16, 0);
    gl.vertexAttribPointer(
      cc.VERTEX_ATTRIB_COLOR,
      4,
      gl.UNSIGNED_BYTE,
      !0,
      16,
      12
    );
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
    a.disable(a.SCISSOR_TEST);
  };
  a._getClippingRect = function () {
    if (this._clippingRectDirty) {
      var a = this._node,
        d = cc.rect(0, 0, a._contentSize.width, a._contentSize.height),
        a = a.getNodeToWorldTransform();
      this._clipRect = cc._rectApplyAffineTransformIn(d, a);
    }
    return this._clipRect;
  };
})();
cc._tmp.PrototypeSprite = function () {
  var a = cc.Sprite.prototype;
  cc.defineGetterSetter(
    a,
    "opacityModifyRGB",
    a.isOpacityModifyRGB,
    a.setOpacityModifyRGB
  );
  cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
  cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
  cc.defineGetterSetter(a, "flippedX", a.isFlippedX, a.setFlippedX);
  cc.defineGetterSetter(a, "flippedY", a.isFlippedY, a.setFlippedY);
  cc.defineGetterSetter(a, "offsetX", a._getOffsetX);
  cc.defineGetterSetter(a, "offsetY", a._getOffsetY);
  cc.defineGetterSetter(a, "texture", a.getTexture, a.setTexture);
  cc.defineGetterSetter(a, "textureRectRotated", a.isTextureRectRotated);
  cc.defineGetterSetter(a, "batchNode", a.getBatchNode, a.setBatchNode);
  cc.defineGetterSetter(a, "quad", a.getQuad);
};
cc.Sprite = cc.Node.extend({
  dirty: !1,
  atlasIndex: 0,
  textureAtlas: null,
  _batchNode: null,
  _recursiveDirty: null,
  _hasChildren: null,
  _shouldBeHidden: !1,
  _transformToBatch: null,
  _blendFunc: null,
  _texture: null,
  _rect: null,
  _rectRotated: !1,
  _offsetPosition: null,
  _unflippedOffsetPositionFromCenter: null,
  _opacityModifyRGB: !1,
  _flippedX: !1,
  _flippedY: !1,
  _textureLoaded: !1,
  _className: "Sprite",
  ctor: function (a, b, d) {
    cc.Node.prototype.ctor.call(this);
    this.setAnchorPoint(0.5, 0.5);
    this._loader = new cc.Sprite.LoadManager();
    this._shouldBeHidden = !1;
    this._offsetPosition = cc.p(0, 0);
    this._unflippedOffsetPositionFromCenter = cc.p(0, 0);
    this._blendFunc = { src: cc.BLEND_SRC, dst: cc.BLEND_DST };
    this._rect = cc.rect(0, 0, 0, 0);
    this._softInit(a, b, d);
  },
  textureLoaded: function () {
    return this._textureLoaded;
  },
  addLoadedEventListener: function (a, b) {
    this.addEventListener("load", a, b);
  },
  isDirty: function () {
    return this.dirty;
  },
  setDirty: function (a) {
    this.dirty = a;
  },
  isTextureRectRotated: function () {
    return this._rectRotated;
  },
  getAtlasIndex: function () {
    return this.atlasIndex;
  },
  setAtlasIndex: function (a) {
    this.atlasIndex = a;
  },
  getTextureRect: function () {
    return cc.rect(this._rect);
  },
  getTextureAtlas: function () {
    return this.textureAtlas;
  },
  setTextureAtlas: function (a) {
    this.textureAtlas = a;
  },
  getOffsetPosition: function () {
    return cc.p(this._offsetPosition);
  },
  _getOffsetX: function () {
    return this._offsetPosition.x;
  },
  _getOffsetY: function () {
    return this._offsetPosition.y;
  },
  getBlendFunc: function () {
    return this._blendFunc;
  },
  initWithSpriteFrame: function (a) {
    cc.assert(a, cc._LogInfos.Sprite_initWithSpriteFrame);
    return this.setSpriteFrame(a);
  },
  initWithSpriteFrameName: function (a) {
    cc.assert(a, cc._LogInfos.Sprite_initWithSpriteFrameName);
    var b = cc.spriteFrameCache.getSpriteFrame(a);
    cc.assert(b, a + cc._LogInfos.Sprite_initWithSpriteFrameName1);
    return this.initWithSpriteFrame(b);
  },
  useBatchNode: function (a) {},
  setVertexRect: function (a) {
    var b = this._rect;
    b.x = a.x;
    b.y = a.y;
    b.width = a.width;
    b.height = a.height;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setFlippedX: function (a) {
    this._flippedX !== a &&
      ((this._flippedX = a),
      this.setTextureRect(this._rect, this._rectRotated, this._contentSize),
      this.setNodeDirty(!0));
  },
  setFlippedY: function (a) {
    this._flippedY !== a &&
      ((this._flippedY = a),
      this.setTextureRect(this._rect, this._rectRotated, this._contentSize),
      this.setNodeDirty(!0));
  },
  isFlippedX: function () {
    return this._flippedX;
  },
  isFlippedY: function () {
    return this._flippedY;
  },
  setOpacityModifyRGB: function (a) {
    this._opacityModifyRGB !== a &&
      ((this._opacityModifyRGB = a), this._renderCmd._setColorDirty());
  },
  isOpacityModifyRGB: function () {
    return this._opacityModifyRGB;
  },
  setDisplayFrameWithAnimationName: function (a, b) {
    cc.assert(a, cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);
    var d = cc.animationCache.getAnimation(a);
    d
      ? (d = d.getFrames()[b])
        ? this.setSpriteFrame(d.getSpriteFrame())
        : cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2)
      : cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName);
  },
  getBatchNode: function () {
    return this._batchNode;
  },
  getTexture: function () {
    return this._texture;
  },
  _softInit: function (a, b, d) {
    if (void 0 === a) cc.Sprite.prototype.init.call(this);
    else if ("string" === typeof a)
      "#" === a[0]
        ? ((b = a.substr(1, a.length - 1)),
          (b = cc.spriteFrameCache.getSpriteFrame(b))
            ? this.initWithSpriteFrame(b)
            : cc.log("%s does not exist", a))
        : cc.Sprite.prototype.init.call(this, a, b);
    else if ("object" === typeof a)
      if (a instanceof cc.Texture2D) this.initWithTexture(a, b, d);
      else if (a instanceof cc.SpriteFrame) this.initWithSpriteFrame(a);
      else if (a instanceof HTMLImageElement || a instanceof HTMLCanvasElement)
        (b = new cc.Texture2D()),
          b.initWithElement(a),
          b.handleLoadedTexture(),
          this.initWithTexture(b);
  },
  getQuad: function () {
    return null;
  },
  setBlendFunc: function (a, b) {
    var d = this._blendFunc;
    void 0 === b
      ? ((d.src = a.src), (d.dst = a.dst))
      : ((d.src = a), (d.dst = b));
    this._renderCmd.updateBlendFunc(d);
  },
  init: function () {
    if (0 < arguments.length)
      return this.initWithFile(arguments[0], arguments[1]);
    cc.Node.prototype.init.call(this);
    this.dirty = this._recursiveDirty = !1;
    this._blendFunc.src = cc.BLEND_SRC;
    this._blendFunc.dst = cc.BLEND_DST;
    this.texture = null;
    this._flippedX = this._flippedY = !1;
    this.anchorY = this.anchorX = 0.5;
    this._offsetPosition.x = 0;
    this._offsetPosition.y = 0;
    this._hasChildren = !1;
    this.setTextureRect(cc.rect(0, 0, 0, 0), !1, cc.size(0, 0));
    return !0;
  },
  initWithFile: function (a, b) {
    cc.assert(a, cc._LogInfos.Sprite_initWithFile);
    var d = cc.textureCache.getTextureForKey(a);
    d || (d = cc.textureCache.addImage(a));
    if (!d.isLoaded())
      return (
        this._loader.clear(),
        this._loader.once(
          d,
          function () {
            this.initWithFile(a, b);
            this.dispatchEvent("load");
          },
          this
        ),
        !1
      );
    if (!b) {
      var e = d.getContentSize();
      b = cc.rect(0, 0, e.width, e.height);
    }
    return this.initWithTexture(d, b);
  },
  initWithTexture: function (a, b, d, e) {
    cc.assert(
      0 !== arguments.length,
      cc._LogInfos.CCSpriteBatchNode_initWithTexture
    );
    this._loader.clear();
    this._textureLoaded = a.isLoaded();
    if (!this._textureLoaded)
      return (
        this._loader.once(
          a,
          function () {
            this.initWithTexture(a, b, d, e);
            this.dispatchEvent("load");
          },
          this
        ),
        !1
      );
    d = d || !1;
    a = this._renderCmd._handleTextureForRotatedTexture(a, b, d, e);
    if (!cc.Node.prototype.init.call(this)) return !1;
    this._batchNode = null;
    this.dirty = this._recursiveDirty = !1;
    this._opacityModifyRGB = !0;
    this._blendFunc.src = cc.BLEND_SRC;
    this._blendFunc.dst = cc.BLEND_DST;
    this._flippedX = this._flippedY = !1;
    this._offsetPosition.x = 0;
    this._offsetPosition.y = 0;
    this._hasChildren = !1;
    this._rectRotated = d;
    b &&
      ((this._rect.x = b.x),
      (this._rect.y = b.y),
      (this._rect.width = b.width),
      (this._rect.height = b.height));
    b || (b = cc.rect(0, 0, a.width, a.height));
    this._renderCmd._checkTextureBoundary(a, b, d);
    this.setTexture(a);
    this.setTextureRect(b, d);
    this.setBatchNode(null);
    return !0;
  },
  setTextureRect: function (a, b, d, e) {
    this._rectRotated = b || !1;
    this.setContentSize(d || a);
    this.setVertexRect(a);
    this._renderCmd._setTextureCoords(a, e);
    a = this._unflippedOffsetPositionFromCenter.x;
    b = this._unflippedOffsetPositionFromCenter.y;
    this._flippedX && (a = -a);
    this._flippedY && (b = -b);
    d = this._rect;
    this._offsetPosition.x = a + (this._contentSize.width - d.width) / 2;
    this._offsetPosition.y = b + (this._contentSize.height - d.height) / 2;
  },
  addChild: function (a, b, d) {
    cc.assert(a, cc._LogInfos.CCSpriteBatchNode_addChild_2);
    null == b && (b = a._localZOrder);
    null == d && (d = a.tag);
    this._renderCmd._setBatchNodeForAddChild(a) &&
      (cc.Node.prototype.addChild.call(this, a, b, d),
      (this._hasChildren = !0));
  },
  setSpriteFrame: function (a) {
    "string" === typeof a &&
      ((a = cc.spriteFrameCache.getSpriteFrame(a)),
      cc.assert(a, cc._LogInfos.Sprite_setSpriteFrame));
    this._loader.clear();
    this.setNodeDirty(!0);
    var b = a.getTexture();
    this._textureLoaded = a.textureLoaded();
    this._loader.clear();
    if (!this._textureLoaded)
      return (
        this._loader.once(
          b,
          function () {
            this.setSpriteFrame(a);
            this.dispatchEvent("load");
          },
          this
        ),
        !1
      );
    var d = a.getOffset();
    this._unflippedOffsetPositionFromCenter.x = d.x;
    this._unflippedOffsetPositionFromCenter.y = d.y;
    b !== this._texture &&
      (this._renderCmd._setTexture(b), this.setColor(this._realColor));
    this.setTextureRect(a.getRect(), a.isRotated(), a.getOriginalSize());
  },
  setDisplayFrame: function (a) {
    cc.log(cc._LogInfos.Sprite_setDisplayFrame);
    this.setSpriteFrame(a);
  },
  isFrameDisplayed: function (a) {
    return this._renderCmd.isFrameDisplayed(a);
  },
  displayFrame: function () {
    return this.getSpriteFrame();
  },
  getSpriteFrame: function () {
    return new cc.SpriteFrame(
      this._texture,
      cc.rectPointsToPixels(this._rect),
      this._rectRotated,
      cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),
      cc.sizePointsToPixels(this._contentSize)
    );
  },
  setBatchNode: function (a) {},
  setTexture: function (a) {
    if (!a) return this._renderCmd._setTexture(null);
    var b = "string" === typeof a;
    b && (a = cc.textureCache.addImage(a));
    this._loader.clear();
    if (!a._textureLoaded)
      return (
        this._loader.once(
          a,
          function () {
            this.setTexture(a);
            this.dispatchEvent("load");
          },
          this
        ),
        !1
      );
    this._renderCmd._setTexture(a);
    b && this._changeRectWithTexture(a);
    this.setColor(this._realColor);
    this._textureLoaded = !0;
  },
  _changeRectWithTexture: function (a) {
    a = a._contentSize;
    a = cc.rect(0, 0, a.width, a.height);
    this.setTextureRect(a);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.Sprite.CanvasRenderCmd(this)
      : new cc.Sprite.WebGLRenderCmd(this);
  },
});
cc.Sprite.create = function (a, b, d) {
  return new cc.Sprite(a, b, d);
};
cc.Sprite.createWithTexture = cc.Sprite.create;
cc.Sprite.createWithSpriteFrameName = cc.Sprite.create;
cc.Sprite.createWithSpriteFrame = cc.Sprite.create;
cc.Sprite.INDEX_NOT_INITIALIZED = -1;
cc.EventHelper.prototype.apply(cc.Sprite.prototype);
cc.assert(
  cc.isFunction(cc._tmp.PrototypeSprite),
  cc._LogInfos.MissingFile,
  "SpritesPropertyDefine.js"
);
cc._tmp.PrototypeSprite();
delete cc._tmp.PrototypeSprite;
(function () {
  var a = (cc.Sprite.LoadManager = function () {
    this.list = [];
  });
  a.prototype.add = function (a, d, e) {
    a &&
      a.addEventListener &&
      (a.addEventListener("load", d, e),
      this.list.push({ source: a, listener: d, target: e }));
  };
  a.prototype.once = function (a, d, e) {
    if (a && a.addEventListener) {
      var f = function (g) {
        a.removeEventListener("load", f, e);
        d.call(e, g);
      };
      a.addEventListener("load", f, e);
      this.list.push({ source: a, listener: f, target: e });
    }
  };
  a.prototype.clear = function () {
    for (; 0 < this.list.length; ) {
      var a = this.list.pop();
      a.source.removeEventListener("load", a.listener, a.target);
    }
  };
})();
(function () {
  cc.Sprite.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._textureCoord = {
      renderX: 0,
      renderY: 0,
      x: 0,
      y: 0,
      width: 0,
      height: 0,
      validRect: !1,
    };
    this._blendFuncStr = "source-over";
    this._colorized = !1;
    this._canUseDirtyRegion = !0;
    this._textureToRender = null;
  };
  var a = (cc.Sprite.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.Sprite.CanvasRenderCmd;
  a._spriteCmdCtor = cc.Sprite.CanvasRenderCmd;
  a.setDirtyRecursively = function (a) {};
  a._setTexture = function (a) {
    var d = this._node;
    d._texture !== a &&
      ((d._textureLoaded = a ? a._textureLoaded : !1),
      (d._texture = a),
      (a = a._contentSize),
      (a = cc.rect(0, 0, a.width, a.height)),
      d.setTextureRect(a),
      this._updateColor());
  };
  a._setColorDirty = function () {
    this.setDirtyFlag(
      cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty
    );
  };
  a.isFrameDisplayed = function (a) {
    var d = this._node;
    return a.getTexture() !== d._texture
      ? !1
      : cc.rectEqualToRect(a.getRect(), d._rect);
  };
  a.updateBlendFunc = function (a) {
    this._blendFuncStr = cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(
      a
    );
  };
  a._setBatchNodeForAddChild = function (a) {
    return !0;
  };
  a._handleTextureForRotatedTexture = function (a, d, e, f) {
    e &&
      a.isLoaded() &&
      ((a = a.getHtmlElementObj()),
      (a = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(a, d, f)),
      (f = new cc.Texture2D()),
      f.initWithElement(a),
      f.handleLoadedTexture(),
      (a = f),
      (d.x = d.y = 0),
      (this._node._rect = cc.rect(0, 0, d.width, d.height)));
    return a;
  };
  a._checkTextureBoundary = function (a, d, e) {
    a &&
      a.url &&
      ((e = d.y + d.height),
      d.x + d.width > a.width && cc.error(cc._LogInfos.RectWidth, a.url),
      e > a.height && cc.error(cc._LogInfos.RectHeight, a.url));
  };
  a.rendering = function (a, d, e) {
    var f = this._node,
      g = this._textureCoord,
      h = this._displayedOpacity / 255,
      k = this._textureToRender || f._texture;
    if (
      (!k || (0 !== g.width && 0 !== g.height && k._textureLoaded)) &&
      0 !== h
    ) {
      a = a || cc._renderContext;
      var m = a.getContext(),
        n = f._offsetPosition.x,
        p = f._rect.height,
        r = f._rect.width,
        s = -f._offsetPosition.y - p;
      a.setTransform(this._worldTransform, d, e);
      a.setCompositeOperation(this._blendFuncStr);
      a.setGlobalAlpha(h);
      (f._flippedX || f._flippedY) && a.save();
      f._flippedX && ((n = -n - r), m.scale(-1, 1));
      f._flippedY && ((s = f._offsetPosition.y), m.scale(1, -1));
      var u, v, t;
      this._colorized ? (u = h = 0) : ((h = g.renderX), (u = g.renderY));
      v = g.width;
      t = g.height;
      k && k._htmlElementObj
        ? ((d = k._htmlElementObj),
          "" !== k._pattern
            ? (a.setFillStyle(m.createPattern(d, k._pattern)),
              m.fillRect(n, s, r, p))
            : m.drawImage(d, h, u, v, t, n, s, r, p))
        : ((k = f._contentSize),
          g.validRect &&
            ((g = this._displayedColor),
            a.setFillStyle("rgba(" + g.r + "," + g.g + "," + g.b + ",1)"),
            m.fillRect(n, s, k.width * d, k.height * e)));
      (f._flippedX || f._flippedY) && a.restore();
      cc.g_NumberOfDraws++;
    }
  };
  a._updateColor = function () {
    var a = this._node._texture,
      d = this._textureCoord,
      e = this._displayedColor;
    a &&
      (255 !== e.r || 255 !== e.g || 255 !== e.b
        ? ((this._textureToRender = a._generateColorTexture(e.r, e.g, e.b, d)),
          (this._colorized = !0))
        : a && ((this._textureToRender = a), (this._colorized = !1)));
  };
  a._textureLoadedCallback = function (a) {
    if (!this._textureLoaded) {
      this._textureLoaded = !0;
      var d = this._rect,
        e = this._renderCmd;
      d
        ? cc._rectEqualToZero(d) && ((d.width = a.width), (d.height = a.height))
        : (d = cc.rect(0, 0, a.width, a.height));
      this.texture = a;
      this.setTextureRect(d, this._rectRotated);
      a = e._displayedColor;
      (255 === a.r && 255 === a.g && 255 === a.b) || e._updateColor();
      this.setBatchNode(this._batchNode);
      this.dispatchEvent("load");
    }
  };
  a._setTextureCoords = function (a, d) {
    void 0 === d && (d = !0);
    var e = this._textureCoord,
      f = d ? cc.contentScaleFactor() : 1;
    e.renderX = e.x = 0 | (a.x * f);
    e.renderY = e.y = 0 | (a.y * f);
    e.width = 0 | (a.width * f);
    e.height = 0 | (a.height * f);
    e.validRect = !(0 === e.width || 0 === e.height || 0 > e.x || 0 > e.y);
  };
  cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas = function (a, d, e) {
    if (!a) return null;
    if (!d) return a;
    e = null == e ? !0 : e;
    var f = document.createElement("canvas");
    f.width = d.width;
    f.height = d.height;
    var g = f.getContext("2d");
    g.translate(f.width / 2, f.height / 2);
    e ? g.rotate(-1.5707963267948966) : g.rotate(1.5707963267948966);
    g.drawImage(
      a,
      d.x,
      d.y,
      d.height,
      d.width,
      -d.height / 2,
      -d.width / 2,
      d.height,
      d.width
    );
    return f;
  };
})();
(function () {
  cc.Sprite.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._vertices = [
      { x: 0, y: 0, u: 0, v: 0 },
      { x: 0, y: 0, u: 0, v: 0 },
      { x: 0, y: 0, u: 0, v: 0 },
      { x: 0, y: 0, u: 0, v: 0 },
    ];
    this._color = new Uint32Array(1);
    this._recursiveDirty = this._dirty = !1;
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_SPRITE_POSITION_TEXTURECOLOR
    );
  };
  var a = (cc.Sprite.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.Sprite.WebGLRenderCmd;
  a._spriteCmdCtor = cc.Sprite.WebGLRenderCmd;
  a.updateBlendFunc = function (a) {};
  a.setDirtyFlag = function (a) {
    cc.Node.WebGLRenderCmd.prototype.setDirtyFlag.call(this, a);
    this._dirty = !0;
  };
  a.setDirtyRecursively = function (a) {
    this._dirty = this._recursiveDirty = a;
    for (
      var d = this._node._children, e, f = d ? d.length : 0, g = 0;
      g < f;
      g++
    )
      (e = d[g]), e instanceof cc.Sprite && e._renderCmd.setDirtyRecursively(a);
  };
  a._setBatchNodeForAddChild = function (a) {
    var d = this._node;
    if (d._batchNode) {
      if (!(a instanceof cc.Sprite))
        return cc.log(cc._LogInfos.Sprite_addChild), !1;
      a.texture._webTextureObj !== d.textureAtlas.texture._webTextureObj &&
        cc.log(cc._LogInfos.Sprite_addChild_2);
      d._batchNode.appendChild(a);
      d._reorderChildDirty || d._setReorderChildDirtyRecursively();
    }
    return !0;
  };
  a._handleTextureForRotatedTexture = function (a) {
    return a;
  };
  a.isFrameDisplayed = function (a) {
    var d = this._node;
    return (
      cc.rectEqualToRect(a.getRect(), d._rect) &&
      a.getTexture().getName() === d._texture.getName() &&
      cc.pointEqualToPoint(a.getOffset(), d._unflippedOffsetPositionFromCenter)
    );
  };
  a._textureLoadedCallback = function (a) {
    if (!this._textureLoaded) {
      this._textureLoaded = !0;
      var d = this._rect;
      d
        ? cc._rectEqualToZero(d) && ((d.width = a.width), (d.height = a.height))
        : (d = cc.rect(0, 0, a.width, a.height));
      this.texture = a;
      this.setTextureRect(d, this._rectRotated);
      this.setBatchNode(this._batchNode);
      this.dispatchEvent("load");
      cc.renderer.childrenOrderDirty = !0;
    }
  };
  a._setTextureCoords = function (a, d) {
    void 0 === d && (d = !0);
    d && (a = cc.rectPointsToPixels(a));
    var e = this._node,
      f = e._batchNode ? e.textureAtlas.texture : e._texture,
      g = this._vertices;
    if (f) {
      var h = f.pixelsWidth,
        k = f.pixelsHeight,
        m,
        n;
      e._rectRotated
        ? (cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL
            ? ((f = (2 * a.x + 1) / (2 * h)),
              (h = f + (2 * a.height - 2) / (2 * h)),
              (m = (2 * a.y + 1) / (2 * k)),
              (k = m + (2 * a.width - 2) / (2 * k)))
            : ((f = a.x / h),
              (h = (a.x + a.height) / h),
              (m = a.y / k),
              (k = (a.y + a.width) / k)),
          e._flippedX && ((n = m), (m = k), (k = n)),
          e._flippedY && ((n = f), (f = h), (h = n)),
          (g[0].u = h),
          (g[0].v = m),
          (g[1].u = f),
          (g[1].v = m),
          (g[2].u = h),
          (g[2].v = k),
          (g[3].u = f))
        : (cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL
            ? ((f = (2 * a.x + 1) / (2 * h)),
              (h = f + (2 * a.width - 2) / (2 * h)),
              (m = (2 * a.y + 1) / (2 * k)),
              (k = m + (2 * a.height - 2) / (2 * k)))
            : ((f = a.x / h),
              (h = (a.x + a.width) / h),
              (m = a.y / k),
              (k = (a.y + a.height) / k)),
          e._flippedX && ((n = f), (f = h), (h = n)),
          e._flippedY && ((n = m), (m = k), (k = n)),
          (g[0].u = f),
          (g[0].v = m),
          (g[1].u = f),
          (g[1].v = k),
          (g[2].u = h),
          (g[2].v = m),
          (g[3].u = h));
      g[3].v = k;
    }
  };
  a._setColorDirty = function () {};
  a._updateBlendFunc = function () {
    if (this._batchNode) cc.log(cc._LogInfos.Sprite__updateBlendFunc);
    else {
      var a = this._node,
        d = a._blendFunc;
      a._texture && a._texture.hasPremultipliedAlpha()
        ? (d.src === cc.SRC_ALPHA && d.dst === cc.BLEND_DST && (d.src = cc.ONE),
          (a.opacityModifyRGB = !0))
        : (d.src === cc.ONE && d.dst === cc.BLEND_DST && (d.src = cc.SRC_ALPHA),
          (a.opacityModifyRGB = !1));
    }
  };
  a._setTexture = function (a) {
    var d = this._node;
    if (d._texture !== a) {
      d._textureLoaded = a ? a._textureLoaded : !1;
      if ((d._texture = a))
        (a = a._contentSize),
          (a = cc.rect(0, 0, a.width, a.height)),
          d.setTextureRect(a),
          this._updateBlendFunc();
      d._textureLoaded && (cc.renderer.childrenOrderDirty = !0);
    }
  };
  a._checkTextureBoundary = function (a, d, e) {
    a &&
      a.url &&
      (e
        ? ((e = d.x + d.height), (d = d.y + d.width))
        : ((e = d.x + d.width), (d = d.y + d.height)),
      e > a.width && cc.error(cc._LogInfos.RectWidth, a.url),
      d > a.height && cc.error(cc._LogInfos.RectHeight, a.url));
  };
  a.transform = function (a, d) {
    this.originTransform(a, d);
    var e = this._node,
      f = e._offsetPosition.x,
      g = f + e._rect.width,
      h = e._offsetPosition.y,
      k = h + e._rect.height,
      m = this._worldTransform,
      e = m.tx,
      n = m.ty,
      p = f * m.a,
      f = f * m.b,
      r = g * m.a,
      g = g * m.b,
      s = k * m.c,
      k = k * m.d,
      u = h * m.c,
      h = h * m.d,
      m = this._vertices;
    m[0].x = p + s + e;
    m[0].y = f + k + n;
    m[1].x = p + u + e;
    m[1].y = f + h + n;
    m[2].x = r + s + e;
    m[2].y = g + k + n;
    m[3].x = r + u + e;
    m[3].y = g + h + n;
  };
  a.needDraw = function () {
    var a = this._node._texture;
    return this._needDraw && a;
  };
  a.uploadData = function (a, d, e) {
    var f = this._node,
      g = f._texture;
    if (
      !(
        g &&
        g._textureLoaded &&
        f._rect.width &&
        f._rect.height &&
        this._displayedOpacity
      )
    )
      return 0;
    var g = this._displayedOpacity,
      h = this._displayedColor.r,
      k = this._displayedColor.g,
      m = this._displayedColor.b;
    if (f._opacityModifyRGB)
      var n = g / 255,
        h = h * n,
        k = k * n,
        m = m * n;
    this._color[0] = (g << 24) | (m << 16) | (k << 8) | h;
    f = f._vertexZ;
    g = this._vertices;
    h = g.length;
    m = e;
    for (e = 0; e < h; ++e)
      (k = g[e]),
        (a[m] = k.x),
        (a[m + 1] = k.y),
        (a[m + 2] = f),
        (d[m + 3] = this._color[0]),
        (a[m + 4] = k.u),
        (a[m + 5] = k.v),
        (m += 6);
    return h;
  };
})();
cc.SpriteBatchNode = cc.Node.extend({
  _blendFunc: null,
  _texture: null,
  _className: "SpriteBatchNode",
  ctor: function (a) {
    cc.Node.prototype.ctor.call(this);
    this._blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
    var b;
    cc.isString(a)
      ? (b = cc.textureCache.getTextureForKey(a)) ||
        (b = cc.textureCache.addImage(a))
      : a instanceof cc.Texture2D && (b = a);
    b && this.initWithTexture(b);
  },
  addSpriteWithoutQuad: function (a, b, d) {
    this.addChild(a, b, d);
    return this;
  },
  getTextureAtlas: function () {
    return null;
  },
  setTextureAtlas: function (a) {},
  getDescendants: function () {
    return this._children;
  },
  initWithFile: function (a, b) {
    var d = cc.textureCache.getTextureForKey(a);
    d || (d = cc.textureCache.addImage(a));
    return this.initWithTexture(d, b);
  },
  init: function (a, b) {
    var d = cc.textureCache.getTextureForKey(a);
    d || (d = cc.textureCache.addImage(a));
    return this.initWithTexture(d, b);
  },
  increaseAtlasCapacity: function () {},
  removeChildAtIndex: function (a, b) {
    this.removeChild(this._children[a], b);
  },
  rebuildIndexInOrder: function (a, b) {
    return b;
  },
  highestAtlasIndexInChild: function (a) {
    var b = a.children;
    return b && 0 !== b.length
      ? this.highestAtlasIndexInChild(b[b.length - 1])
      : a.zIndex;
  },
  lowestAtlasIndexInChild: function (a) {
    var b = a.children;
    return b && 0 !== b.length
      ? this.lowestAtlasIndexInChild(b[b.length - 1])
      : a.zIndex;
  },
  atlasIndexForChild: function (a) {
    return a.zIndex;
  },
  reorderBatch: function (a) {
    this._reorderChildDirty = a;
  },
  setBlendFunc: function (a, b) {
    this._blendFunc = void 0 === b ? a : { src: a, dst: b };
  },
  getBlendFunc: function () {
    return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst);
  },
  updateQuadFromSprite: function (a, b) {
    cc.assert(a, cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite_2);
    a instanceof cc.Sprite
      ? ((a.dirty = !0), a._renderCmd.transform(this._renderCmd, !0))
      : cc.log(cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite);
  },
  insertQuadFromSprite: function (a, b) {
    this.addChild(a, b);
  },
  insertChild: function (a, b) {
    this.addChild(a, b);
  },
  appendChild: function (a) {
    this.sortAllChildren();
    this.addChild(a.lastLocalZOrder + 1);
  },
  removeSpriteFromAtlas: function (a, b) {
    this.removeChild(a, b);
  },
  initWithTexture: function (a) {
    this.setTexture(a);
    return !0;
  },
  getTexture: function () {
    return this._texture;
  },
  setTexture: function (a) {
    this._texture = a;
    if (a._textureLoaded) {
      var b,
        d = this._children,
        e = d.length;
      for (b = 0; b < e; ++b) d[b].setTexture(a);
    } else
      a.addEventListener(
        "load",
        function () {
          var b,
            d = this._children,
            e = d.length;
          for (b = 0; b < e; ++b) d[b].setTexture(a);
        },
        this
      );
  },
  setShaderProgram: function (a) {
    this._renderCmd.setShaderProgram(a);
    var b,
      d = this._children,
      e = d.length;
    for (b = 0; b < e; ++b) d[b].setShaderProgram(a);
  },
  addChild: function (a, b, d) {
    cc.assert(void 0 !== a, cc._LogInfos.CCSpriteBatchNode_addChild_3);
    this._isValidChild(a) &&
      ((b = void 0 === b ? a.zIndex : b),
      (d = void 0 === d ? a.tag : d),
      cc.Node.prototype.addChild.call(this, a, b, d),
      this._renderCmd._shaderProgram &&
        (a.shaderProgram = this._renderCmd._shaderProgram));
  },
  _isValidChild: function (a) {
    return a instanceof cc.Sprite
      ? a.texture !== this._texture
        ? (cc.log(cc._LogInfos.Sprite_addChild_5), !1)
        : !0
      : (cc.log(cc._LogInfos.Sprite_addChild_4), !1);
  },
});
_p = cc.SpriteBatchNode.prototype;
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.defineGetterSetter(
  _p,
  "shaderProgram",
  _p.getShaderProgram,
  _p.setShaderProgram
);
cc.SpriteBatchNode.create = function (a) {
  return new cc.SpriteBatchNode(a);
};
cc.SpriteBatchNode.createWithTexture = cc.SpriteBatchNode.create;
cc.BakeSprite = cc.Sprite.extend({
  _cacheCanvas: null,
  _cacheContext: null,
  ctor: function () {
    cc.Sprite.prototype.ctor.call(this);
    var a = document.createElement("canvas");
    a.width = a.height = 10;
    this._cacheCanvas = a;
    this._cacheContext = new cc.CanvasContextWrapper(a.getContext("2d"));
    var b = new cc.Texture2D();
    b.initWithElement(a);
    b.handleLoadedTexture();
    this.setTexture(b);
  },
  getCacheContext: function () {
    return this._cacheContext;
  },
  getCacheCanvas: function () {
    return this._cacheCanvas;
  },
  resetCanvasSize: function (a, b) {
    var d = this._cacheCanvas,
      e = this._cacheContext,
      f = e._context.strokeStyle,
      g = e._context.fillStyle;
    void 0 === b && ((b = a.height), (a = a.width));
    d.width = a;
    d.height = b;
    f !== e._context.strokeStyle && (e._context.strokeStyle = f);
    g !== e._context.fillStyle && (e._context.fillStyle = g);
    this.getTexture().handleLoadedTexture();
    this.setTextureRect(cc.rect(0, 0, a, b), !1, null, !1);
  },
});
cc.AnimationFrame = cc.Class.extend({
  _spriteFrame: null,
  _delayPerUnit: 0,
  _userInfo: null,
  ctor: function (a, b, d) {
    this._spriteFrame = a || null;
    this._delayPerUnit = b || 0;
    this._userInfo = d || null;
  },
  clone: function () {
    var a = new cc.AnimationFrame();
    a.initWithSpriteFrame(
      this._spriteFrame.clone(),
      this._delayPerUnit,
      this._userInfo
    );
    return a;
  },
  copyWithZone: function (a) {
    return cc.clone(this);
  },
  copy: function (a) {
    a = new cc.AnimationFrame();
    a.initWithSpriteFrame(
      this._spriteFrame.clone(),
      this._delayPerUnit,
      this._userInfo
    );
    return a;
  },
  initWithSpriteFrame: function (a, b, d) {
    this._spriteFrame = a;
    this._delayPerUnit = b;
    this._userInfo = d;
    return !0;
  },
  getSpriteFrame: function () {
    return this._spriteFrame;
  },
  setSpriteFrame: function (a) {
    this._spriteFrame = a;
  },
  getDelayUnits: function () {
    return this._delayPerUnit;
  },
  setDelayUnits: function (a) {
    this._delayPerUnit = a;
  },
  getUserInfo: function () {
    return this._userInfo;
  },
  setUserInfo: function (a) {
    this._userInfo = a;
  },
});
cc.AnimationFrame.create = function (a, b, d) {
  return new cc.AnimationFrame(a, b, d);
};
cc.Animation = cc.Class.extend({
  _frames: null,
  _loops: 0,
  _restoreOriginalFrame: !1,
  _duration: 0,
  _delayPerUnit: 0,
  _totalDelayUnits: 0,
  ctor: function (a, b, d) {
    this._frames = [];
    if (void 0 === a) this.initWithSpriteFrames(null, 0);
    else {
      var e = a[0];
      e &&
        (e instanceof cc.SpriteFrame
          ? this.initWithSpriteFrames(a, b, d)
          : e instanceof cc.AnimationFrame &&
            this.initWithAnimationFrames(a, b, d));
    }
  },
  getFrames: function () {
    return this._frames;
  },
  setFrames: function (a) {
    this._frames = a;
  },
  addSpriteFrame: function (a) {
    var b = new cc.AnimationFrame();
    b.initWithSpriteFrame(a, 1, null);
    this._frames.push(b);
    this._totalDelayUnits++;
  },
  addSpriteFrameWithFile: function (a) {
    a = cc.textureCache.addImage(a);
    var b = cc.rect(0, 0, 0, 0);
    b.width = a.width;
    b.height = a.height;
    a = new cc.SpriteFrame(a, b);
    this.addSpriteFrame(a);
  },
  addSpriteFrameWithTexture: function (a, b) {
    var d = new cc.SpriteFrame(a, b);
    this.addSpriteFrame(d);
  },
  initWithAnimationFrames: function (a, b, d) {
    cc.arrayVerifyType(a, cc.AnimationFrame);
    this._delayPerUnit = b;
    this._loops = void 0 === d ? 1 : d;
    this._totalDelayUnits = 0;
    b = this._frames;
    for (d = b.length = 0; d < a.length; d++) {
      var e = a[d];
      b.push(e);
      this._totalDelayUnits += e.getDelayUnits();
    }
    return !0;
  },
  clone: function () {
    var a = new cc.Animation();
    a.initWithAnimationFrames(
      this._copyFrames(),
      this._delayPerUnit,
      this._loops
    );
    a.setRestoreOriginalFrame(this._restoreOriginalFrame);
    return a;
  },
  copyWithZone: function (a) {
    a = new cc.Animation();
    a.initWithAnimationFrames(
      this._copyFrames(),
      this._delayPerUnit,
      this._loops
    );
    a.setRestoreOriginalFrame(this._restoreOriginalFrame);
    return a;
  },
  _copyFrames: function () {
    for (var a = [], b = 0; b < this._frames.length; b++)
      a.push(this._frames[b].clone());
    return a;
  },
  copy: function (a) {
    return this.copyWithZone(null);
  },
  getLoops: function () {
    return this._loops;
  },
  setLoops: function (a) {
    this._loops = a;
  },
  setRestoreOriginalFrame: function (a) {
    this._restoreOriginalFrame = a;
  },
  getRestoreOriginalFrame: function () {
    return this._restoreOriginalFrame;
  },
  getDuration: function () {
    return this._totalDelayUnits * this._delayPerUnit;
  },
  getDelayPerUnit: function () {
    return this._delayPerUnit;
  },
  setDelayPerUnit: function (a) {
    this._delayPerUnit = a;
  },
  getTotalDelayUnits: function () {
    return this._totalDelayUnits;
  },
  initWithSpriteFrames: function (a, b, d) {
    cc.arrayVerifyType(a, cc.SpriteFrame);
    this._loops = void 0 === d ? 1 : d;
    this._delayPerUnit = b || 0;
    this._totalDelayUnits = 0;
    b = this._frames;
    b.length = 0;
    if (a) {
      for (d = 0; d < a.length; d++) {
        var e = a[d],
          f = new cc.AnimationFrame();
        f.initWithSpriteFrame(e, 1, null);
        b.push(f);
      }
      this._totalDelayUnits += a.length;
    }
    return !0;
  },
  retain: function () {},
  release: function () {},
});
cc.Animation.create = function (a, b, d) {
  return new cc.Animation(a, b, d);
};
cc.Animation.createWithAnimationFrames = cc.Animation.create;
cc.animationCache = {
  _animations: {},
  addAnimation: function (a, b) {
    this._animations[b] = a;
  },
  removeAnimation: function (a) {
    a && this._animations[a] && delete this._animations[a];
  },
  getAnimation: function (a) {
    return this._animations[a] ? this._animations[a] : null;
  },
  _addAnimationsWithDictionary: function (a, b) {
    var d = a.animations;
    if (d) {
      var e = 1,
        f = a.properties;
      if (f)
        for (
          var e = null != f.format ? parseInt(f.format) : e,
            f = f.spritesheets,
            g = cc.spriteFrameCache,
            h = cc.path,
            k = 0;
          k < f.length;
          k++
        )
          g.addSpriteFrames(h.changeBasename(b, f[k]));
      switch (e) {
        case 1:
          this._parseVersion1(d);
          break;
        case 2:
          this._parseVersion2(d);
          break;
        default:
          cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2);
      }
    } else cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary);
  },
  addAnimations: function (a) {
    cc.assert(a, cc._LogInfos.animationCache_addAnimations_2);
    var b = cc.loader.getRes(a);
    b
      ? this._addAnimationsWithDictionary(b, a)
      : cc.log(cc._LogInfos.animationCache_addAnimations);
  },
  _parseVersion1: function (a) {
    var b = cc.spriteFrameCache,
      d;
    for (d in a) {
      var e = a[d],
        f = e.frames,
        e = parseFloat(e.delay) || 0,
        g = null;
      if (f) {
        for (var g = [], h = 0; h < f.length; h++) {
          var k = b.getSpriteFrame(f[h]);
          if (k) {
            var m = new cc.AnimationFrame();
            m.initWithSpriteFrame(k, 1, null);
            g.push(m);
          } else cc.log(cc._LogInfos.animationCache__parseVersion1_2, d, f[h]);
        }
        0 === g.length
          ? cc.log(cc._LogInfos.animationCache__parseVersion1_3, d)
          : (g.length !== f.length &&
              cc.log(cc._LogInfos.animationCache__parseVersion1_4, d),
            (g = new cc.Animation(g, e, 1)),
            cc.animationCache.addAnimation(g, d));
      } else cc.log(cc._LogInfos.animationCache__parseVersion1, d);
    }
  },
  _parseVersion2: function (a) {
    var b = cc.spriteFrameCache,
      d;
    for (d in a) {
      var e = a[d],
        f = e.loop,
        g = parseInt(e.loops),
        f = f ? cc.REPEAT_FOREVER : isNaN(g) ? 1 : g,
        g = e.restoreOriginalFrame && !0 == e.restoreOriginalFrame ? !0 : !1,
        h = e.frames;
      if (h) {
        for (var k = [], m = 0; m < h.length; m++) {
          var n = h[m],
            p = n.spriteframe,
            r = b.getSpriteFrame(p);
          if (r) {
            var p = parseFloat(n.delayUnits) || 0,
              n = n.notification,
              s = new cc.AnimationFrame();
            s.initWithSpriteFrame(r, p, n);
            k.push(s);
          } else cc.log(cc._LogInfos.animationCache__parseVersion2_2, d, p);
        }
        e = parseFloat(e.delayPerUnit) || 0;
        h = new cc.Animation();
        h.initWithAnimationFrames(k, e, f);
        h.setRestoreOriginalFrame(g);
        cc.animationCache.addAnimation(h, d);
      } else cc.log(cc._LogInfos.animationCache__parseVersion2, d);
    }
  },
  _clear: function () {
    this._animations = {};
  },
};
cc.SpriteFrame = cc.Class.extend({
  _offset: null,
  _originalSize: null,
  _rectInPixels: null,
  _rotated: !1,
  _rect: null,
  _offsetInPixels: null,
  _originalSizeInPixels: null,
  _texture: null,
  _textureFilename: "",
  _textureLoaded: !1,
  ctor: function (a, b, d, e, f) {
    this._offset = cc.p(0, 0);
    this._offsetInPixels = cc.p(0, 0);
    this._originalSize = cc.size(0, 0);
    this._rotated = !1;
    this._originalSizeInPixels = cc.size(0, 0);
    this._textureFilename = "";
    this._texture = null;
    this._textureLoaded = !1;
    void 0 !== a &&
      void 0 !== b &&
      (void 0 === d || void 0 === e || void 0 === f
        ? this.initWithTexture(a, b)
        : this.initWithTexture(a, b, d, e, f));
  },
  textureLoaded: function () {
    return this._textureLoaded;
  },
  addLoadedEventListener: function (a, b) {
    this.addEventListener("load", a, b);
  },
  getRectInPixels: function () {
    var a = this._rectInPixels;
    return cc.rect(a.x, a.y, a.width, a.height);
  },
  setRectInPixels: function (a) {
    this._rectInPixels || (this._rectInPixels = cc.rect(0, 0, 0, 0));
    this._rectInPixels.x = a.x;
    this._rectInPixels.y = a.y;
    this._rectInPixels.width = a.width;
    this._rectInPixels.height = a.height;
    this._rect = cc.rectPixelsToPoints(a);
  },
  isRotated: function () {
    return this._rotated;
  },
  setRotated: function (a) {
    this._rotated = a;
  },
  getRect: function () {
    var a = this._rect;
    return cc.rect(a.x, a.y, a.width, a.height);
  },
  setRect: function (a) {
    this._rect || (this._rect = cc.rect(0, 0, 0, 0));
    this._rect.x = a.x;
    this._rect.y = a.y;
    this._rect.width = a.width;
    this._rect.height = a.height;
    this._rectInPixels = cc.rectPointsToPixels(this._rect);
  },
  getOffsetInPixels: function () {
    return cc.p(this._offsetInPixels);
  },
  setOffsetInPixels: function (a) {
    this._offsetInPixels.x = a.x;
    this._offsetInPixels.y = a.y;
    cc._pointPixelsToPointsOut(this._offsetInPixels, this._offset);
  },
  getOriginalSizeInPixels: function () {
    return cc.size(this._originalSizeInPixels);
  },
  setOriginalSizeInPixels: function (a) {
    this._originalSizeInPixels.width = a.width;
    this._originalSizeInPixels.height = a.height;
  },
  getOriginalSize: function () {
    return cc.size(this._originalSize);
  },
  setOriginalSize: function (a) {
    this._originalSize.width = a.width;
    this._originalSize.height = a.height;
  },
  getTexture: function () {
    if (this._texture) return this._texture;
    if ("" !== this._textureFilename) {
      var a = cc.textureCache.addImage(this._textureFilename);
      a && (this._textureLoaded = a.isLoaded());
      return a;
    }
    return null;
  },
  setTexture: function (a) {
    if (this._texture !== a) {
      var b = a.isLoaded();
      this._textureLoaded = b;
      this._texture = a;
      b ||
        a.addEventListener(
          "load",
          function (a) {
            this._textureLoaded = !0;
            if (
              this._rotated &&
              cc._renderType === cc.game.RENDER_TYPE_CANVAS
            ) {
              var b = a.getHtmlElementObj(),
                b = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(
                  b,
                  this.getRect()
                ),
                f = new cc.Texture2D();
              f.initWithElement(b);
              f.handleLoadedTexture();
              this.setTexture(f);
              b = this.getRect();
              this.setRect(cc.rect(0, 0, b.width, b.height));
            }
            b = this._rect;
            0 === b.width &&
              0 === b.height &&
              ((b = a.width),
              (a = a.height),
              (this._rect.width = b),
              (this._rect.height = a),
              (this._rectInPixels = cc.rectPointsToPixels(this._rect)),
              (this._originalSizeInPixels.width = this._rectInPixels.width),
              (this._originalSizeInPixels.height = this._rectInPixels.height),
              (this._originalSize.width = b),
              (this._originalSize.height = a));
            this.dispatchEvent("load");
          },
          this
        );
    }
  },
  getOffset: function () {
    return cc.p(this._offset);
  },
  setOffset: function (a) {
    this._offset.x = a.x;
    this._offset.y = a.y;
  },
  clone: function () {
    var a = new cc.SpriteFrame();
    a.initWithTexture(
      this._textureFilename,
      this._rectInPixels,
      this._rotated,
      this._offsetInPixels,
      this._originalSizeInPixels
    );
    a.setTexture(this._texture);
    return a;
  },
  copyWithZone: function () {
    var a = new cc.SpriteFrame();
    a.initWithTexture(
      this._textureFilename,
      this._rectInPixels,
      this._rotated,
      this._offsetInPixels,
      this._originalSizeInPixels
    );
    a.setTexture(this._texture);
    return a;
  },
  copy: function () {
    return this.copyWithZone();
  },
  initWithTexture: function (a, b, d, e, f) {
    2 === arguments.length && (b = cc.rectPointsToPixels(b));
    e = e || cc.p(0, 0);
    f = f || b;
    d = d || !1;
    "string" === typeof a
      ? ((this._texture = null), (this._textureFilename = a))
      : a instanceof cc.Texture2D && this.setTexture(a);
    a = this.getTexture();
    this._rectInPixels = b;
    this._rect = cc.rectPixelsToPoints(b);
    if (a && a.url && a.isLoaded()) {
      var g, h;
      d
        ? ((g = b.x + b.height), (h = b.y + b.width))
        : ((g = b.x + b.width), (h = b.y + b.height));
      g > a.getPixelsWide() && cc.error(cc._LogInfos.RectWidth, a.url);
      h > a.getPixelsHigh() && cc.error(cc._LogInfos.RectHeight, a.url);
    }
    this._offsetInPixels.x = e.x;
    this._offsetInPixels.y = e.y;
    cc._pointPixelsToPointsOut(e, this._offset);
    this._originalSizeInPixels.width = f.width;
    this._originalSizeInPixels.height = f.height;
    cc._sizePixelsToPointsOut(f, this._originalSize);
    this._rotated = d;
    return !0;
  },
});
cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype);
cc.SpriteFrame.create = function (a, b, d, e, f) {
  return new cc.SpriteFrame(a, b, d, e, f);
};
cc.SpriteFrame.createWithTexture = cc.SpriteFrame.create;
cc.SpriteFrame._frameWithTextureForCanvas = function (a, b, d, e, f) {
  var g = new cc.SpriteFrame();
  g._texture = a;
  g._rectInPixels = b;
  g._rect = cc.rectPixelsToPoints(b);
  g._offsetInPixels.x = e.x;
  g._offsetInPixels.y = e.y;
  cc._pointPixelsToPointsOut(g._offsetInPixels, g._offset);
  g._originalSizeInPixels.width = f.width;
  g._originalSizeInPixels.height = f.height;
  cc._sizePixelsToPointsOut(g._originalSizeInPixels, g._originalSize);
  g._rotated = d;
  return g;
};
cc.spriteFrameCache = {
  _CCNS_REG1: /^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,
  _CCNS_REG2: /^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,
  _spriteFrames: {},
  _spriteFramesAliases: {},
  _frameConfigCache: {},
  _rectFromString: function (a) {
    return (a = this._CCNS_REG2.exec(a))
      ? cc.rect(
          parseFloat(a[1]),
          parseFloat(a[2]),
          parseFloat(a[3]),
          parseFloat(a[4])
        )
      : cc.rect(0, 0, 0, 0);
  },
  _pointFromString: function (a) {
    return (a = this._CCNS_REG1.exec(a))
      ? cc.p(parseFloat(a[1]), parseFloat(a[2]))
      : cc.p(0, 0);
  },
  _sizeFromString: function (a) {
    return (a = this._CCNS_REG1.exec(a))
      ? cc.size(parseFloat(a[1]), parseFloat(a[2]))
      : cc.size(0, 0);
  },
  _getFrameConfig: function (a) {
    var b = cc.loader.getRes(a);
    cc.assert(b, cc._LogInfos.spriteFrameCache__getFrameConfig_2, a);
    cc.loader.release(a);
    if (b._inited) return (this._frameConfigCache[a] = b);
    this._frameConfigCache[a] = this._parseFrameConfig(b);
    return this._frameConfigCache[a];
  },
  _getFrameConfigByJsonObject: function (a, b) {
    cc.assert(b, cc._LogInfos.spriteFrameCache__getFrameConfig_2, a);
    this._frameConfigCache[a] = this._parseFrameConfig(b);
    return this._frameConfigCache[a];
  },
  _parseFrameConfig: function (a) {
    var b = a.frames,
      d = a.metadata || a.meta;
    a = {};
    var e = {},
      f = 0;
    d &&
      ((f = d.format),
      (f = 1 >= f.length ? parseInt(f) : f),
      (e.image = d.textureFileName || d.textureFileName || d.image));
    for (var g in b) {
      var h = b[g];
      if (h) {
        d = {};
        if (0 == f) {
          d.rect = cc.rect(h.x, h.y, h.width, h.height);
          d.rotated = !1;
          d.offset = cc.p(h.offsetX, h.offsetY);
          var k = h.originalWidth,
            h = h.originalHeight;
          (k && h) || cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig);
          k = Math.abs(k);
          h = Math.abs(h);
          d.size = cc.size(k, h);
        } else if (1 == f || 2 == f)
          (d.rect = this._rectFromString(h.frame)),
            (d.rotated = h.rotated || !1),
            (d.offset = this._pointFromString(h.offset)),
            (d.size = this._sizeFromString(h.sourceSize));
        else if (3 == f) {
          var k = this._sizeFromString(h.spriteSize),
            m = this._rectFromString(h.textureRect);
          k && (m = cc.rect(m.x, m.y, k.width, k.height));
          d.rect = m;
          d.rotated = h.textureRotated || !1;
          d.offset = this._pointFromString(h.spriteOffset);
          d.size = this._sizeFromString(h.spriteSourceSize);
          d.aliases = h.aliases;
        } else
          (k = h.frame),
            (m = h.sourceSize),
            (g = h.filename || g),
            (d.rect = cc.rect(k.x, k.y, k.w, k.h)),
            (d.rotated = h.rotated || !1),
            (d.offset = cc.p(0, 0)),
            (d.size = cc.size(m.w, m.h));
        a[g] = d;
      }
    }
    return { _inited: !0, frames: a, meta: e };
  },
  _addSpriteFramesByObject: function (a, b, d) {
    cc.assert(a, cc._LogInfos.spriteFrameCache_addSpriteFrames_2);
    b &&
      b.frames &&
      ((b =
        this._frameConfigCache[a] || this._getFrameConfigByJsonObject(a, b)),
      this._createSpriteFrames(a, b, d));
  },
  _createSpriteFrames: function (a, b, d) {
    var e = b.frames;
    b = b.meta;
    d
      ? d instanceof cc.Texture2D ||
        (cc.isString(d)
          ? (d = cc.textureCache.addImage(d))
          : cc.assert(0, cc._LogInfos.spriteFrameCache_addSpriteFrames_3))
      : ((d = cc.path.changeBasename(a, b.image || ".png")),
        (d = cc.textureCache.addImage(d)));
    a = this._spriteFramesAliases;
    b = this._spriteFrames;
    for (var f in e) {
      var g = e[f],
        h = b[f];
      if (!h) {
        h = new cc.SpriteFrame(d, cc.rect(g.rect), g.rotated, g.offset, g.size);
        if ((g = g.aliases))
          for (var k = 0, m = g.length; k < m; k++) {
            var n = g[k];
            a[n] && cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames, n);
            a[n] = f;
          }
        cc._renderType === cc.game.RENDER_TYPE_CANVAS &&
          h.isRotated() &&
          h.getTexture().isLoaded() &&
          ((g = h.getTexture().getHtmlElementObj()),
          (g = cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(
            g,
            h.getRectInPixels()
          )),
          (k = new cc.Texture2D()),
          k.initWithElement(g),
          k.handleLoadedTexture(),
          h.setTexture(k),
          h.setRotated(!1),
          (g = h._rect),
          h.setRect(cc.rect(0, 0, g.width, g.height)));
        b[f] = h;
      }
    }
  },
  addSpriteFrames: function (a, b) {
    cc.assert(a, cc._LogInfos.spriteFrameCache_addSpriteFrames_2);
    var d = this._frameConfigCache[a] || cc.loader.getRes(a);
    d &&
      d.frames &&
      ((d = this._frameConfigCache[a] || this._getFrameConfig(a)),
      this._createSpriteFrames(a, d, b));
  },
  _checkConflict: function (a) {
    a = a.frames;
    for (var b in a)
      this._spriteFrames[b] &&
        cc.log(cc._LogInfos.spriteFrameCache__checkConflict, b);
  },
  addSpriteFrame: function (a, b) {
    this._spriteFrames[b] = a;
  },
  removeSpriteFrames: function () {
    this._spriteFrames = {};
    this._spriteFramesAliases = {};
  },
  removeSpriteFrameByName: function (a) {
    a &&
      (this._spriteFramesAliases[a] && delete this._spriteFramesAliases[a],
      this._spriteFrames[a] && delete this._spriteFrames[a]);
  },
  removeSpriteFramesFromFile: function (a) {
    var b = this._spriteFrames,
      d = this._spriteFramesAliases;
    if ((a = this._frameConfigCache[a])) {
      a = a.frames;
      for (var e in a)
        if (b[e]) {
          delete b[e];
          for (var f in d) d[f] === e && delete d[f];
        }
    }
  },
  removeSpriteFramesFromTexture: function (a) {
    var b = this._spriteFrames,
      d = this._spriteFramesAliases,
      e;
    for (e in b) {
      var f = b[e];
      if (f && f.getTexture() === a) {
        delete b[e];
        for (var g in d) d[g] === e && delete d[g];
      }
    }
  },
  getSpriteFrame: function (a) {
    var b = this._spriteFrames[a];
    if (!b) {
      var d = this._spriteFramesAliases[a];
      d &&
        ((b = this._spriteFrames[d.toString()]) ||
          delete this._spriteFramesAliases[a]);
    }
    return b;
  },
  _clear: function () {
    this._spriteFrames = {};
    this._spriteFramesAliases = {};
    this._frameConfigCache = {};
  },
};
cc.configuration = {
  ERROR: 0,
  STRING: 1,
  INT: 2,
  DOUBLE: 3,
  BOOLEAN: 4,
  _maxTextureSize: 0,
  _maxModelviewStackDepth: 0,
  _supportsPVRTC: !1,
  _supportsNPOT: !1,
  _supportsBGRA8888: !1,
  _supportsDiscardFramebuffer: !1,
  _supportsShareableVAO: !1,
  _maxSamplesAllowed: 0,
  _maxTextureUnits: 0,
  _GlExtensions: "",
  _valueDict: {},
  _inited: !1,
  _init: function () {
    var a = this._valueDict;
    a["cocos2d.x.version"] = cc.ENGINE_VERSION;
    a["cocos2d.x.compiled_with_profiler"] = !1;
    a["cocos2d.x.compiled_with_gl_state_cache"] = cc.ENABLE_GL_STATE_CACHE;
    this._inited = !0;
  },
  getMaxTextureSize: function () {
    return this._maxTextureSize;
  },
  getMaxModelviewStackDepth: function () {
    return this._maxModelviewStackDepth;
  },
  getMaxTextureUnits: function () {
    return this._maxTextureUnits;
  },
  supportsNPOT: function () {
    return this._supportsNPOT;
  },
  supportsPVRTC: function () {
    return this._supportsPVRTC;
  },
  supportsETC: function () {
    return !1;
  },
  supportsS3TC: function () {
    return !1;
  },
  supportsATITC: function () {
    return !1;
  },
  supportsBGRA8888: function () {
    return this._supportsBGRA8888;
  },
  supportsDiscardFramebuffer: function () {
    return this._supportsDiscardFramebuffer;
  },
  supportsShareableVAO: function () {
    return this._supportsShareableVAO;
  },
  checkForGLExtension: function (a) {
    return -1 < this._GlExtensions.indexOf(a);
  },
  getValue: function (a, b) {
    this._inited || this._init();
    var d = this._valueDict;
    return d[a] ? d[a] : b;
  },
  setValue: function (a, b) {
    this._valueDict[a] = b;
  },
  dumpInfo: function () {
    0 === cc.ENABLE_GL_STATE_CACHE &&
      (cc.log(""), cc.log(cc._LogInfos.configuration_dumpInfo), cc.log(""));
  },
  gatherGPUInfo: function () {
    if (cc._renderType !== cc.game.RENDER_TYPE_CANVAS) {
      this._inited || this._init();
      var a = cc._renderContext,
        b = this._valueDict;
      b["gl.vendor"] = a.getParameter(a.VENDOR);
      b["gl.renderer"] = a.getParameter(a.RENDERER);
      b["gl.version"] = a.getParameter(a.VERSION);
      this._GlExtensions = "";
      for (var d = a.getSupportedExtensions(), e = 0; e < d.length; e++)
        this._GlExtensions += d[e] + " ";
      this._maxTextureSize = a.getParameter(a.MAX_TEXTURE_SIZE);
      b["gl.max_texture_size"] = this._maxTextureSize;
      this._maxTextureUnits = a.getParameter(
        a.MAX_COMBINED_TEXTURE_IMAGE_UNITS
      );
      b["gl.max_texture_units"] = this._maxTextureUnits;
      this._supportsPVRTC = this.checkForGLExtension(
        "GL_IMG_texture_compression_pvrtc"
      );
      b["gl.supports_PVRTC"] = this._supportsPVRTC;
      this._supportsNPOT = !1;
      b["gl.supports_NPOT"] = this._supportsNPOT;
      this._supportsBGRA8888 = this.checkForGLExtension(
        "GL_IMG_texture_format_BGRA888"
      );
      b["gl.supports_BGRA8888"] = this._supportsBGRA8888;
      this._supportsDiscardFramebuffer = this.checkForGLExtension(
        "GL_EXT_discard_framebuffer"
      );
      b["gl.supports_discard_framebuffer"] = this._supportsDiscardFramebuffer;
      this._supportsShareableVAO = this.checkForGLExtension(
        "vertex_array_object"
      );
      b["gl.supports_vertex_array_object"] = this._supportsShareableVAO;
      cc.checkGLErrorDebug();
    }
  },
  loadConfigFile: function (a) {
    this._inited || this._init();
    var b = cc.loader.getRes(a);
    if (!b) throw Error("Please load the resource first : " + a);
    cc.assert(b, cc._LogInfos.configuration_loadConfigFile_2, a);
    if ((b = b.data)) for (var d in b) this._valueDict[d] = b[d];
    else cc.log(cc._LogInfos.configuration_loadConfigFile, a);
  },
};
cc.g_NumberOfDraws = 0;
cc.Director = cc.Class.extend({
  _landscape: !1,
  _nextDeltaTimeZero: !1,
  _paused: !1,
  _purgeDirectorInNextLoop: !1,
  _sendCleanupToScene: !1,
  _animationInterval: 0,
  _oldAnimationInterval: 0,
  _projection: 0,
  _contentScaleFactor: 1,
  _deltaTime: 0,
  _winSizeInPoints: null,
  _lastUpdate: null,
  _nextScene: null,
  _notificationNode: null,
  _openGLView: null,
  _scenesStack: null,
  _projectionDelegate: null,
  _runningScene: null,
  _totalFrames: 0,
  _secondsPerFrame: 0,
  _dirtyRegion: null,
  _scheduler: null,
  _actionManager: null,
  _eventProjectionChanged: null,
  _eventAfterUpdate: null,
  _eventAfterVisit: null,
  _eventAfterDraw: null,
  ctor: function () {
    var a = this;
    a._lastUpdate = Date.now();
    cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
      a._lastUpdate = Date.now();
    });
  },
  init: function () {
    this._oldAnimationInterval = this._animationInterval = 1 / cc.defaultFPS;
    this._scenesStack = [];
    this._projection = cc.Director.PROJECTION_DEFAULT;
    this._projectionDelegate = null;
    this._totalFrames = 0;
    this._lastUpdate = Date.now();
    this._purgeDirectorInNextLoop = this._paused = !1;
    this._winSizeInPoints = cc.size(0, 0);
    this._openGLView = null;
    this._contentScaleFactor = 1;
    this._scheduler = new cc.Scheduler();
    cc.ActionManager
      ? ((this._actionManager = new cc.ActionManager()),
        this._scheduler.scheduleUpdate(
          this._actionManager,
          cc.Scheduler.PRIORITY_SYSTEM,
          !1
        ))
      : (this._actionManager = null);
    this._eventAfterUpdate = new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE);
    this._eventAfterUpdate.setUserData(this);
    this._eventAfterVisit = new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT);
    this._eventAfterVisit.setUserData(this);
    this._eventAfterDraw = new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW);
    this._eventAfterDraw.setUserData(this);
    this._eventProjectionChanged = new cc.EventCustom(
      cc.Director.EVENT_PROJECTION_CHANGED
    );
    this._eventProjectionChanged.setUserData(this);
    return !0;
  },
  calculateDeltaTime: function () {
    var a = Date.now();
    this._nextDeltaTimeZero
      ? ((this._deltaTime = 0), (this._nextDeltaTimeZero = !1))
      : (this._deltaTime = (a - this._lastUpdate) / 1e3);
    0 < cc.game.config[cc.game.CONFIG_KEY.debugMode] &&
      0.2 < this._deltaTime &&
      (this._deltaTime = 1 / 60);
    this._lastUpdate = a;
  },
  convertToGL: function (a) {
    var b = document.documentElement,
      d = cc.view,
      e = b.getBoundingClientRect();
    e.left += window.pageXOffset - b.clientLeft;
    e.top += window.pageYOffset - b.clientTop;
    b = d._devicePixelRatio * (a.x - e.left);
    a = d._devicePixelRatio * (e.top + e.height - a.y);
    return d._isRotated
      ? { x: d._viewPortRect.width - a, y: b }
      : { x: b, y: a };
  },
  convertToUI: function (a) {
    var b = document.documentElement,
      d = cc.view,
      e = b.getBoundingClientRect();
    e.left += window.pageXOffset - b.clientLeft;
    e.top += window.pageYOffset - b.clientTop;
    b = { x: 0, y: 0 };
    d._isRotated
      ? ((b.x = e.left + a.y / d._devicePixelRatio),
        (b.y =
          e.top +
          e.height -
          (d._viewPortRect.width - a.x) / d._devicePixelRatio))
      : ((b.x = e.left + a.x / d._devicePixelRatio),
        (b.y = e.top + e.height - a.y / d._devicePixelRatio));
    return b;
  },
  drawScene: function () {
    var a = cc.renderer;
    this.calculateDeltaTime();
    this._paused ||
      (this._scheduler.update(this._deltaTime),
      cc.eventManager.dispatchEvent(this._eventAfterUpdate));
    this._nextScene && this.setNextScene();
    this._runningScene &&
      (a.childrenOrderDirty
        ? (cc.renderer.clearRenderCommands(),
          (cc.renderer.assignedZ = 0),
          (this._runningScene._renderCmd._curLevel = 0),
          this._runningScene.visit(),
          a.resetFlag())
        : a.transformDirty() && a.transform());
    a.clear();
    this._notificationNode && this._notificationNode.visit();
    cc.eventManager.dispatchEvent(this._eventAfterVisit);
    cc.g_NumberOfDraws = 0;
    a.rendering(cc._renderContext);
    this._totalFrames++;
    cc.eventManager.dispatchEvent(this._eventAfterDraw);
    cc.eventManager.frameUpdateListeners();
    this._calculateMPF();
  },
  end: function () {
    this._purgeDirectorInNextLoop = !0;
  },
  getContentScaleFactor: function () {
    return this._contentScaleFactor;
  },
  getNotificationNode: function () {
    return this._notificationNode;
  },
  getWinSize: function () {
    return cc.size(this._winSizeInPoints);
  },
  getWinSizeInPixels: function () {
    return cc.size(
      this._winSizeInPoints.width * this._contentScaleFactor,
      this._winSizeInPoints.height * this._contentScaleFactor
    );
  },
  getVisibleSize: null,
  getVisibleOrigin: null,
  getZEye: null,
  pause: function () {
    this._paused ||
      ((this._oldAnimationInterval = this._animationInterval),
      this.setAnimationInterval(0.25),
      (this._paused = !0));
  },
  popScene: function () {
    cc.assert(this._runningScene, cc._LogInfos.Director_popScene);
    this._scenesStack.pop();
    var a = this._scenesStack.length;
    0 === a
      ? this.end()
      : ((this._sendCleanupToScene = !0),
        (this._nextScene = this._scenesStack[a - 1]));
  },
  purgeCachedData: function () {
    cc.animationCache._clear();
    cc.spriteFrameCache._clear();
    cc.textureCache._clear();
  },
  purgeDirector: function () {
    this.getScheduler().unscheduleAll();
    cc.eventManager && cc.eventManager.setEnabled(!1);
    this._runningScene &&
      (this._runningScene._performRecursive(
        cc.Node._stateCallbackType.onExitTransitionDidStart
      ),
      this._runningScene._performRecursive(cc.Node._stateCallbackType.onExit),
      this._runningScene._performRecursive(cc.Node._stateCallbackType.cleanup));
    this._nextScene = this._runningScene = null;
    this._scenesStack.length = 0;
    this.stopAnimation();
    this.purgeCachedData();
    cc.checkGLErrorDebug();
  },
  pushScene: function (a) {
    cc.assert(a, cc._LogInfos.Director_pushScene);
    this._sendCleanupToScene = !1;
    this._scenesStack.push(a);
    this._nextScene = a;
  },
  runScene: function (a) {
    cc.assert(a, cc._LogInfos.Director_pushScene);
    if (this._runningScene) {
      var b = this._scenesStack.length;
      0 === b
        ? ((this._sendCleanupToScene = !0), (this._scenesStack[b] = a))
        : ((this._sendCleanupToScene = !0), (this._scenesStack[b - 1] = a));
      this._nextScene = a;
    } else this.pushScene(a), this.startAnimation();
  },
  resume: function () {
    this._paused &&
      (this.setAnimationInterval(this._oldAnimationInterval),
      (this._lastUpdate = Date.now()) || cc.log(cc._LogInfos.Director_resume),
      (this._paused = !1),
      (this._deltaTime = 0));
  },
  setContentScaleFactor: function (a) {
    a !== this._contentScaleFactor && (this._contentScaleFactor = a);
  },
  setDepthTest: null,
  setClearColor: null,
  setDefaultValues: function () {},
  setNextDeltaTimeZero: function (a) {
    this._nextDeltaTimeZero = a;
  },
  setNextScene: function () {
    var a = !1,
      b = !1;
    cc.TransitionScene &&
      ((a = this._runningScene
        ? this._runningScene instanceof cc.TransitionScene
        : !1),
      (b = this._nextScene
        ? this._nextScene instanceof cc.TransitionScene
        : !1));
    if (!b) {
      if ((b = this._runningScene))
        b._performRecursive(
          cc.Node._stateCallbackType.onExitTransitionDidStart
        ),
          b._performRecursive(cc.Node._stateCallbackType.onExit);
      this._sendCleanupToScene &&
        b &&
        b._performRecursive(cc.Node._stateCallbackType.cleanup);
    }
    this._runningScene = this._nextScene;
    cc.renderer.childrenOrderDirty = !0;
    this._nextScene = null;
    a ||
      null === this._runningScene ||
      (this._runningScene._performRecursive(cc.Node._stateCallbackType.onEnter),
      this._runningScene._performRecursive(
        cc.Node._stateCallbackType.onEnterTransitionDidFinish
      ));
  },
  setNotificationNode: function (a) {
    cc.renderer.childrenOrderDirty = !0;
    this._notificationNode &&
      (this._notificationNode._performRecursive(
        cc.Node._stateCallbackType.onExitTransitionDidStart
      ),
      this._notificationNode._performRecursive(
        cc.Node._stateCallbackType.onExit
      ),
      this._notificationNode._performRecursive(
        cc.Node._stateCallbackType.cleanup
      ));
    if ((this._notificationNode = a))
      this._notificationNode._performRecursive(
        cc.Node._stateCallbackType.onEnter
      ),
        this._notificationNode._performRecursive(
          cc.Node._stateCallbackType.onEnterTransitionDidFinish
        );
  },
  getDelegate: function () {
    return this._projectionDelegate;
  },
  setDelegate: function (a) {
    this._projectionDelegate = a;
  },
  setOpenGLView: null,
  setProjection: null,
  setViewport: null,
  getOpenGLView: null,
  getProjection: null,
  setAlphaBlending: null,
  isSendCleanupToScene: function () {
    return this._sendCleanupToScene;
  },
  getRunningScene: function () {
    return this._runningScene;
  },
  getAnimationInterval: function () {
    return this._animationInterval;
  },
  isDisplayStats: function () {
    return cc.profiler ? cc.profiler.isShowingStats() : !1;
  },
  setDisplayStats: function (a) {
    cc.profiler && (a ? cc.profiler.showStats() : cc.profiler.hideStats());
  },
  getSecondsPerFrame: function () {
    return this._secondsPerFrame;
  },
  isNextDeltaTimeZero: function () {
    return this._nextDeltaTimeZero;
  },
  isPaused: function () {
    return this._paused;
  },
  getTotalFrames: function () {
    return this._totalFrames;
  },
  popToRootScene: function () {
    this.popToSceneStackLevel(1);
  },
  popToSceneStackLevel: function (a) {
    cc.assert(this._runningScene, cc._LogInfos.Director_popToSceneStackLevel_2);
    var b = this._scenesStack,
      d = b.length;
    if (0 === a) this.end();
    else if (!(a >= d)) {
      for (; d > a; ) {
        var e = b.pop();
        e.running &&
          (e._performRecursive(
            cc.Node._stateCallbackType.onExitTransitionDidStart
          ),
          e._performRecursive(cc.Node._stateCallbackType.onExit));
        e._performRecursive(cc.Node._stateCallbackType.cleanup);
        d--;
      }
      this._nextScene = b[b.length - 1];
      this._sendCleanupToScene = !0;
    }
  },
  getScheduler: function () {
    return this._scheduler;
  },
  setScheduler: function (a) {
    this._scheduler !== a && (this._scheduler = a);
  },
  getActionManager: function () {
    return this._actionManager;
  },
  setActionManager: function (a) {
    this._actionManager !== a && (this._actionManager = a);
  },
  getDeltaTime: function () {
    return this._deltaTime;
  },
  _calculateMPF: function () {
    this._secondsPerFrame = (Date.now() - this._lastUpdate) / 1e3;
  },
});
cc.Director.EVENT_PROJECTION_CHANGED = "director_projection_changed";
cc.Director.EVENT_AFTER_UPDATE = "director_after_update";
cc.Director.EVENT_AFTER_VISIT = "director_after_visit";
cc.Director.EVENT_AFTER_DRAW = "director_after_draw";
cc.DisplayLinkDirector = cc.Director.extend({
  invalid: !1,
  startAnimation: function () {
    this._nextDeltaTimeZero = !0;
    this.invalid = !1;
  },
  mainLoop: function () {
    this._purgeDirectorInNextLoop
      ? ((this._purgeDirectorInNextLoop = !1), this.purgeDirector())
      : this.invalid || this.drawScene();
  },
  stopAnimation: function () {
    this.invalid = !0;
  },
  setAnimationInterval: function (a) {
    this._animationInterval = a;
    this.invalid || (this.stopAnimation(), this.startAnimation());
  },
});
cc.Director.sharedDirector = null;
cc.Director.firstUseDirector = !0;
cc.Director._getInstance = function () {
  cc.Director.firstUseDirector &&
    ((cc.Director.firstUseDirector = !1),
    (cc.Director.sharedDirector = new cc.DisplayLinkDirector()),
    cc.Director.sharedDirector.init());
  return cc.Director.sharedDirector;
};
cc.defaultFPS = 60;
cc.Director.PROJECTION_2D = 0;
cc.Director.PROJECTION_3D = 1;
cc.Director.PROJECTION_CUSTOM = 3;
cc.Director.PROJECTION_DEFAULT = cc.Director.PROJECTION_3D;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
    var a = cc.Director.prototype;
    a.getProjection = function (a) {
      return this._projection;
    };
    a.setProjection = function (a) {
      this._projection = a;
      cc.eventManager.dispatchEvent(this._eventProjectionChanged);
    };
    a.setDepthTest = function () {};
    a.setClearColor = function (a) {
      cc.renderer._clearColor = a;
      cc.renderer._clearFillStyle = "rgb(" + a.r + "," + a.g + "," + a.b + ")";
    };
    a.setOpenGLView = function (a) {
      this._winSizeInPoints.width = cc._canvas.width;
      this._winSizeInPoints.height = cc._canvas.height;
      this._openGLView = a || cc.view;
      cc.eventManager && cc.eventManager.setEnabled(!0);
    };
    a.getVisibleSize = function () {
      return this.getWinSize();
    };
    a.getVisibleOrigin = function () {
      return cc.p(0, 0);
    };
  } else
    (cc.Director._fpsImage = new Image()),
      cc.Director._fpsImage.addEventListener("load", function () {
        cc.Director._fpsImageLoaded = !0;
      }),
      cc._fpsImage && (cc.Director._fpsImage.src = cc._fpsImage);
});
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
    cc.DirectorDelegate = cc.Class.extend({ updateProjection: function () {} });
    var a = cc.Director.prototype,
      b = function (a) {
        if (a && a._renderCmd) {
          a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
          var e = a._children;
          for (a = 0; a < e.length; a++) b(e[a]);
        }
      };
    cc.eventManager.addCustomListener(
      cc.Director.EVENT_PROJECTION_CHANGED,
      function () {
        for (var a = cc.director._scenesStack, e = 0; e < a.length; e++)
          b(a[e]);
      }
    );
    a.setProjection = function (a) {
      var b = this._winSizeInPoints;
      this.setViewport();
      var f = this._openGLView,
        g = f._viewPortRect.x / f._scaleX,
        h = f._viewPortRect.y / f._scaleY;
      switch (a) {
        case cc.Director.PROJECTION_2D:
          cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
          cc.kmGLLoadIdentity();
          f = cc.math.Matrix4.createOrthographicProjection(
            0,
            b.width,
            0,
            b.height,
            -1024,
            1024
          );
          cc.kmGLMultMatrix(f);
          cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
          cc.kmGLLoadIdentity();
          break;
        case cc.Director.PROJECTION_3D:
          var k = this.getZEye(),
            m = new cc.math.Matrix4(),
            f = new cc.math.Matrix4();
          cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
          cc.kmGLLoadIdentity();
          m = cc.math.Matrix4.createPerspectiveProjection(
            60,
            b.width / b.height,
            0.1,
            2 * k
          );
          cc.kmGLMultMatrix(m);
          k = new cc.math.Vec3(-g + b.width / 2, -h + b.height / 2, k);
          b = new cc.math.Vec3(-g + b.width / 2, -h + b.height / 2, 0);
          g = new cc.math.Vec3(0, 1, 0);
          f.lookAt(k, b, g);
          cc.kmGLMultMatrix(f);
          cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
          cc.kmGLLoadIdentity();
          break;
        case cc.Director.PROJECTION_CUSTOM:
          this._projectionDelegate &&
            this._projectionDelegate.updateProjection();
          break;
        default:
          cc.log(cc._LogInfos.Director_setProjection);
      }
      this._projection = a;
      cc.eventManager.dispatchEvent(this._eventProjectionChanged);
      cc.setProjectionMatrixDirty();
      cc.renderer.childrenOrderDirty = !0;
    };
    a.setDepthTest = function (a) {
      cc.renderer.setDepthTest(a);
    };
    a.setClearColor = function (a) {
      cc.renderer._clearColor = a;
    };
    a.setOpenGLView = function (a) {
      this._winSizeInPoints.width = cc._canvas.width;
      this._winSizeInPoints.height = cc._canvas.height;
      this._openGLView = a || cc.view;
      a = cc.configuration;
      a.gatherGPUInfo();
      a.dumpInfo();
      this.setGLDefaultValues();
      cc.eventManager && cc.eventManager.setEnabled(!0);
    };
    a.getVisibleSize = function () {
      return this._openGLView.getVisibleSize();
    };
    a.getVisibleOrigin = function () {
      return this._openGLView.getVisibleOrigin();
    };
    a.getZEye = function () {
      return this._winSizeInPoints.height / 1.1546999375;
    };
    a.setViewport = function () {
      var a = this._openGLView;
      if (a) {
        var b = this._winSizeInPoints;
        a.setViewPortInPoints(
          -a._viewPortRect.x / a._scaleX,
          -a._viewPortRect.y / a._scaleY,
          b.width,
          b.height
        );
      }
    };
    a.getOpenGLView = function () {
      return this._openGLView;
    };
    a.getProjection = function () {
      return this._projection;
    };
    a.setAlphaBlending = function (a) {
      a
        ? cc.glBlendFunc(cc.BLEND_SRC, cc.BLEND_DST)
        : cc.glBlendFunc(cc._renderContext.ONE, cc._renderContext.ZERO);
    };
    a.setGLDefaultValues = function () {
      this.setAlphaBlending(!0);
      this.setProjection(this._projection);
      cc._renderContext.clearColor(0, 0, 0, 0);
    };
  }
});
(function () {
  var a = function (a, b, d, e, f, g, h) {
      this.prev = a;
      this.next = b;
      this.callback = d;
      this.target = e;
      this.priority = f;
      this.paused = g;
      this.markedForDeletion = h;
    },
    b = [];
  a.get = function (d, e, f, g, h, k, v) {
    var t = b.pop();
    t
      ? ((t.prev = d),
        (t.next = e),
        (t.callback = f),
        (t.target = g),
        (t.priority = h),
        (t.paused = k),
        (t.markedForDeletion = v))
      : (t = new a(d, e, f, g, h, k, v));
    return t;
  };
  a.put = function (a) {
    a.prev = null;
    a.next = null;
    a.callback = null;
    a.target = null;
    a.priority = 0;
    a.paused = !1;
    a.markedForDeletion = !1;
    20 > b.length && b.push(a);
  };
  var d = function (a, b, d, e) {
      this.list = a;
      this.entry = b;
      this.target = d;
      this.callback = e;
    },
    e = [];
  d.get = function (a, b, f, g) {
    var h = e.pop();
    h
      ? ((h.list = a), (h.entry = b), (h.target = f), (h.callback = g))
      : (h = new d(a, b, f, g));
    return h;
  };
  d.put = function (a) {
    a.list = null;
    a.entry = null;
    a.target = null;
    a.callback = null;
    20 > e.length && e.push(a);
  };
  var f = function (a, b, d, e, f, g) {
      this.timers = a;
      this.target = b;
      this.timerIndex = d;
      this.currentTimer = e;
      this.currentTimerSalvaged = f;
      this.paused = g;
    },
    g = [];
  f.get = function (a, b, d, e, h, k) {
    var v = g.pop();
    v
      ? ((v.timers = a),
        (v.target = b),
        (v.timerIndex = d),
        (v.currentTimer = e),
        (v.currentTimerSalvaged = h),
        (v.paused = k))
      : (v = new f(a, b, d, e, h, k));
    return v;
  };
  f.put = function (a) {
    a.timers = null;
    a.target = null;
    a.timerIndex = 0;
    a.currentTimer = null;
    a.currentTimerSalvaged = !1;
    a.paused = !1;
    20 > g.length && g.push(a);
  };
  var h = function () {
    this._scheduler = null;
    this._elapsed = -1;
    this._useDelay = this._runForever = !1;
    this._interval = this._delay = this._repeat = this._timesExecuted = 0;
    this._key = this._callback = this._target = null;
  };
  cc.inject(
    {
      initWithCallback: function (a, b, d, e, f, g, h) {
        this._scheduler = a;
        this._target = d;
        this._callback = b;
        h && (this._key = h);
        this._elapsed = -1;
        this._interval = e;
        this._delay = g;
        this._useDelay = 0 < this._delay;
        this._repeat = f;
        this._runForever = this._repeat === cc.REPEAT_FOREVER;
        return !0;
      },
      getInterval: function () {
        return this._interval;
      },
      setInterval: function (a) {
        this._interval = a;
      },
      update: function (a) {
        -1 === this._elapsed
          ? (this._timesExecuted = this._elapsed = 0)
          : ((this._elapsed += a),
            this._runForever && !this._useDelay
              ? this._elapsed >= this._interval &&
                (this.trigger(), (this._elapsed = 0))
              : (this._useDelay
                  ? this._elapsed >= this._delay &&
                    (this.trigger(),
                    (this._elapsed -= this._delay),
                    (this._timesExecuted += 1),
                    (this._useDelay = !1))
                  : this._elapsed >= this._interval &&
                    (this.trigger(),
                    (this._elapsed = 0),
                    (this._timesExecuted += 1)),
                this._callback &&
                  !this._runForever &&
                  this._timesExecuted > this._repeat &&
                  this.cancel()));
      },
      getCallback: function () {
        return this._callback;
      },
      getKey: function () {
        return this._key;
      },
      trigger: function () {
        this._target &&
          this._callback &&
          this._callback.call(this._target, this._elapsed);
      },
      cancel: function () {
        this._scheduler.unschedule(this._callback, this._target);
      },
    },
    h.prototype
  );
  var k = [];
  h.get = function () {
    return k.pop() || new h();
  };
  h.put = function (a) {
    a._scheduler = null;
    a._elapsed = -1;
    a._runForever = !1;
    a._useDelay = !1;
    a._timesExecuted = 0;
    a._repeat = 0;
    a._delay = 0;
    a._interval = 0;
    a._target = null;
    a._callback = null;
    a._key = null;
    20 > k.length && k.push(a);
  };
  cc.Scheduler = cc.Class.extend({
    _timeScale: 1,
    _updatesNegList: null,
    _updates0List: null,
    _updatesPosList: null,
    _hashForTimers: null,
    _arrayForTimers: null,
    _hashForUpdates: null,
    _currentTarget: null,
    _currentTargetSalvaged: !1,
    _updateHashLocked: !1,
    ctor: function () {
      this._timeScale = 1;
      this._updatesNegList = [];
      this._updates0List = [];
      this._updatesPosList = [];
      this._hashForUpdates = {};
      this._hashForTimers = {};
      this._currentTarget = null;
      this._updateHashLocked = this._currentTargetSalvaged = !1;
      this._arrayForTimers = [];
    },
    _schedulePerFrame: function (a, b, d, e) {
      var f = this._hashForUpdates[b.__instanceId];
      if (f && f.entry)
        if (f.entry.priority !== d) {
          if (this._updateHashLocked) {
            cc.log(
              "warning: you CANNOT change update priority in scheduled function"
            );
            f.entry.markedForDeletion = !1;
            f.entry.paused = e;
            return;
          }
          this.unscheduleUpdate(b);
        } else {
          f.entry.markedForDeletion = !1;
          f.entry.paused = e;
          return;
        }
      0 === d
        ? this._appendIn(this._updates0List, a, b, e)
        : 0 > d
        ? this._priorityIn(this._updatesNegList, a, b, d, e)
        : this._priorityIn(this._updatesPosList, a, b, d, e);
    },
    _removeHashElement: function (a) {
      delete this._hashForTimers[a.target.__instanceId];
      for (var b = this._arrayForTimers, d = 0, e = b.length; d < e; d++)
        if (b[d] === a) {
          b.splice(d, 1);
          break;
        }
      f.put(a);
    },
    _removeUpdateFromHash: function (b) {
      if ((b = this._hashForUpdates[b.target.__instanceId])) {
        for (var e = b.list, f = b.entry, g = 0, h = e.length; g < h; g++)
          if (e[g] === f) {
            e.splice(g, 1);
            break;
          }
        delete this._hashForUpdates[b.target.__instanceId];
        a.put(f);
        d.put(b);
      }
    },
    _priorityIn: function (b, e, f, g, h) {
      e = a.get(null, null, e, f, g, h, !1);
      if (b) {
        h = b.length - 1;
        for (var k = 0; k <= h && !(g < b[k].priority); k++);
        b.splice(k, 0, e);
      } else (b = []), b.push(e);
      this._hashForUpdates[f.__instanceId] = d.get(b, e, f, null);
      return b;
    },
    _appendIn: function (b, e, f, g) {
      e = a.get(null, null, e, f, 0, g, !1);
      b.push(e);
      this._hashForUpdates[f.__instanceId] = d.get(b, e, f, null, null);
    },
    setTimeScale: function (a) {
      this._timeScale = a;
    },
    getTimeScale: function () {
      return this._timeScale;
    },
    update: function (a) {
      this._updateHashLocked = !0;
      1 !== this._timeScale && (a *= this._timeScale);
      var b, d, e, f;
      b = 0;
      d = this._updatesNegList;
      for (e = d.length; b < e; b++)
        (f = d[b]), f.paused || f.markedForDeletion || f.callback(a);
      b = 0;
      d = this._updates0List;
      for (e = d.length; b < e; b++)
        (f = d[b]), f.paused || f.markedForDeletion || f.callback(a);
      b = 0;
      d = this._updatesPosList;
      for (e = d.length; b < e; b++)
        (f = d[b]), f.paused || f.markedForDeletion || f.callback(a);
      e = this._arrayForTimers;
      for (b = 0; b < e.length; b++) {
        this._currentTarget = d = e[b];
        this._currentTargetSalvaged = !1;
        if (!d.paused)
          for (d.timerIndex = 0; d.timerIndex < d.timers.length; ++d.timerIndex)
            (d.currentTimer = d.timers[d.timerIndex]),
              (d.currentTimerSalvaged = !1),
              d.currentTimer.update(a),
              (d.currentTimer = null);
        this._currentTargetSalvaged &&
          0 === this._currentTarget.timers.length &&
          this._removeHashElement(this._currentTarget);
      }
      b = 0;
      for (d = this._updatesNegList; b < d.length; )
        (f = d[b]), f.markedForDeletion ? this._removeUpdateFromHash(f) : b++;
      b = 0;
      for (d = this._updates0List; b < d.length; )
        (f = d[b]), f.markedForDeletion ? this._removeUpdateFromHash(f) : b++;
      b = 0;
      for (d = this._updatesPosList; b < d.length; )
        (f = d[b]), f.markedForDeletion ? this._removeUpdateFromHash(f) : b++;
      this._updateHashLocked = !1;
      this._currentTarget = null;
    },
    scheduleCallbackForTarget: function (a, b, d, e, f, g) {
      this.schedule(b, a, d, e, f, g, a.__instanceId + "");
    },
    schedule: function (a, b, d, e, g, k, v) {
      if ("function" !== typeof a) {
        var t = a;
        a = b;
        b = t;
      }
      if (4 === arguments.length || 5 === arguments.length)
        (v = g), (k = e), (e = cc.REPEAT_FOREVER), (g = 0);
      void 0 === v && (v = b.__instanceId + "");
      cc.assert(b, cc._LogInfos.Scheduler_scheduleCallbackForTarget_3);
      (t = this._hashForTimers[b.__instanceId])
        ? cc.assert(t.paused === k, "")
        : ((t = f.get(null, b, 0, null, null, k)),
          this._arrayForTimers.push(t),
          (this._hashForTimers[b.__instanceId] = t));
      var w, x;
      if (null == t.timers) t.timers = [];
      else
        for (x = 0; x < t.timers.length; x++)
          if (((w = t.timers[x]), a === w._callback)) {
            cc.log(
              cc._LogInfos.Scheduler_scheduleCallbackForTarget,
              w.getInterval().toFixed(4),
              d.toFixed(4)
            );
            w._interval = d;
            return;
          }
      w = h.get();
      w.initWithCallback(this, a, b, d, e, g, v);
      t.timers.push(w);
    },
    scheduleUpdate: function (a, b, d) {
      this._schedulePerFrame(
        function (b) {
          a.update(b);
        },
        a,
        b,
        d
      );
    },
    _getUnscheduleMark: function (a, b) {
      switch (typeof a) {
        case "number":
        case "string":
          return a === b._key;
        case "function":
          return a === b._callback;
      }
    },
    unschedule: function (a, b) {
      if (b && a) {
        var d = this._hashForTimers[b.__instanceId];
        if (d)
          for (var e = d.timers, f = 0, g = e.length; f < g; f++) {
            var k = e[f];
            if (this._getUnscheduleMark(a, k)) {
              k !== d.currentTimer ||
                d.currentTimerSalvaged ||
                (d.currentTimerSalvaged = !0);
              e.splice(f, 1);
              h.put(k);
              d.timerIndex >= f && d.timerIndex--;
              0 === e.length &&
                (this._currentTarget === d
                  ? (this._currentTargetSalvaged = !0)
                  : this._removeHashElement(d));
              break;
            }
          }
      }
    },
    unscheduleUpdate: function (a) {
      a &&
        (a = this._hashForUpdates[a.__instanceId]) &&
        (this._updateHashLocked
          ? (a.entry.markedForDeletion = !0)
          : this._removeUpdateFromHash(a.entry));
    },
    unscheduleAllForTarget: function (a) {
      if (a) {
        var b = this._hashForTimers[a.__instanceId];
        if (b) {
          var d = b.timers;
          -1 < d.indexOf(b.currentTimer) &&
            !b.currentTimerSalvaged &&
            (b.currentTimerSalvaged = !0);
          for (var e = 0, f = d.length; e < f; e++) h.put(d[e]);
          d.length = 0;
          this._currentTarget === b
            ? (this._currentTargetSalvaged = !0)
            : this._removeHashElement(b);
        }
        this.unscheduleUpdate(a);
      }
    },
    unscheduleAll: function () {
      this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM);
    },
    unscheduleAllWithMinPriority: function (a) {
      var b,
        d,
        e = this._arrayForTimers;
      for (b = e.length - 1; 0 <= b; b--)
        (d = e[b]), this.unscheduleAllForTarget(d.target);
      e = 0;
      if (0 > a)
        for (b = 0; b < this._updatesNegList.length; )
          (e = this._updatesNegList.length),
            (d = this._updatesNegList[b]) &&
              d.priority >= a &&
              this.unscheduleUpdate(d.target),
            e == this._updatesNegList.length && b++;
      if (0 >= a)
        for (b = 0; b < this._updates0List.length; )
          (e = this._updates0List.length),
            (d = this._updates0List[b]) && this.unscheduleUpdate(d.target),
            e == this._updates0List.length && b++;
      for (b = 0; b < this._updatesPosList.length; )
        (e = this._updatesPosList.length),
          (d = this._updatesPosList[b]) &&
            d.priority >= a &&
            this.unscheduleUpdate(d.target),
          e == this._updatesPosList.length && b++;
    },
    isScheduled: function (a, b) {
      cc.assert(a, "Argument callback must not be empty");
      cc.assert(b, "Argument target must be non-nullptr");
      var d = this._hashForTimers[b.__instanceId];
      if (!d) return !1;
      if (null != d.timers)
        for (var d = d.timers, e = 0; e < d.length; ++e)
          if (a === d[e]._callback) return !0;
      return !1;
    },
    pauseAllTargets: function () {
      return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM);
    },
    pauseAllTargetsWithMinPriority: function (a) {
      var b = [],
        d,
        e = this._arrayForTimers,
        f,
        g;
      f = 0;
      for (g = e.length; f < g; f++)
        if ((d = e[f])) (d.paused = !0), b.push(d.target);
      if (0 > a)
        for (f = 0; f < this._updatesNegList.length; f++)
          (d = this._updatesNegList[f]) &&
            d.priority >= a &&
            ((d.paused = !0), b.push(d.target));
      if (0 >= a)
        for (f = 0; f < this._updates0List.length; f++)
          if ((d = this._updates0List[f])) (d.paused = !0), b.push(d.target);
      for (f = 0; f < this._updatesPosList.length; f++)
        (d = this._updatesPosList[f]) &&
          d.priority >= a &&
          ((d.paused = !0), b.push(d.target));
      return b;
    },
    resumeTargets: function (a) {
      if (a) for (var b = 0; b < a.length; b++) this.resumeTarget(a[b]);
    },
    pauseTarget: function (a) {
      cc.assert(a, cc._LogInfos.Scheduler_pauseTarget);
      var b = this._hashForTimers[a.__instanceId];
      b && (b.paused = !0);
      (a = this._hashForUpdates[a.__instanceId]) && (a.entry.paused = !0);
    },
    resumeTarget: function (a) {
      cc.assert(a, cc._LogInfos.Scheduler_resumeTarget);
      var b = this._hashForTimers[a.__instanceId];
      b && (b.paused = !1);
      (a = this._hashForUpdates[a.__instanceId]) && (a.entry.paused = !1);
    },
    isTargetPaused: function (a) {
      cc.assert(a, cc._LogInfos.Scheduler_isTargetPaused);
      var b = this._hashForTimers[a.__instanceId];
      return b
        ? b.paused
        : (a = this._hashForUpdates[a.__instanceId])
        ? a.entry.paused
        : !1;
    },
    scheduleUpdateForTarget: function (a, b, d) {
      this.scheduleUpdate(a, b, d);
    },
    unscheduleCallbackForTarget: function (a, b) {
      this.unschedule(b, a);
    },
    unscheduleUpdateForTarget: function (a) {
      this.unscheduleUpdate(a);
    },
    unscheduleAllCallbacksForTarget: function (a) {
      this.unschedule(a.__instanceId + "", a);
    },
    unscheduleAllCallbacks: function () {
      this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM);
    },
    unscheduleAllCallbacksWithMinPriority: function (a) {
      this.unscheduleAllWithMinPriority(a);
    },
  });
  cc.Scheduler.PRIORITY_SYSTEM = -2147483648;
  cc.Scheduler.PRIORITY_NON_SYSTEM = cc.Scheduler.PRIORITY_SYSTEM + 1;
})();
cc.PI2 = 2 * Math.PI;
cc.DrawingPrimitiveCanvas = cc.Class.extend({
  _cacheArray: [],
  _renderContext: null,
  ctor: function (a) {
    this._renderContext = a;
  },
  drawPoint: function (a, b) {
    b || (b = 1);
    var d = cc.view.getScaleX(),
      e = cc.view.getScaleY(),
      e = cc.p(a.x * d, a.y * e),
      f = this._renderContext.getContext();
    f.beginPath();
    f.arc(e.x, -e.y, b * d, 0, 2 * Math.PI, !1);
    f.closePath();
    f.fill();
  },
  drawPoints: function (a, b, d) {
    if (null != a) {
      d || (d = 1);
      b = this._renderContext.getContext();
      var e = cc.view.getScaleX(),
        f = cc.view.getScaleY();
      b.beginPath();
      for (var g = 0, h = a.length; g < h; g++)
        b.arc(a[g].x * e, -a[g].y * f, d * e, 0, 2 * Math.PI, !1);
      b.closePath();
      b.fill();
    }
  },
  drawLine: function (a, b) {
    var d = this._renderContext.getContext();
    cc.view.getScaleX();
    cc.view.getScaleY();
    d.beginPath();
    d.moveTo(a.x, -a.y);
    d.lineTo(b.x, -b.y);
    d.closePath();
    d.stroke();
  },
  drawRect: function (a, b) {
    this.drawLine(cc.p(a.x, a.y), cc.p(b.x, a.y));
    this.drawLine(cc.p(b.x, a.y), cc.p(b.x, b.y));
    this.drawLine(cc.p(b.x, b.y), cc.p(a.x, b.y));
    this.drawLine(cc.p(a.x, b.y), cc.p(a.x, a.y));
  },
  drawSolidRect: function (a, b, d) {
    a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
    this.drawSolidPoly(a, 4, d);
  },
  drawPoly: function (a, b, d, e) {
    e = e || !1;
    if (null != a) {
      if (3 > a.length) throw Error("Polygon's point must greater than 2");
      var f = a[0];
      b = this._renderContext.getContext();
      cc.view.getScaleX();
      cc.view.getScaleY();
      b.beginPath();
      b.moveTo(f.x, -f.y);
      for (var f = 1, g = a.length; f < g; f++) b.lineTo(a[f].x, -a[f].y);
      d && b.closePath();
      e ? b.fill() : b.stroke();
    }
  },
  drawSolidPoly: function (a, b, d) {
    this.setDrawColor(d.r, d.g, d.b, d.a);
    this.drawPoly(a, b, !0, !0);
  },
  drawCircle: function (a, b, d, e, f) {
    f = f || !1;
    e = this._renderContext.getContext();
    cc.view.getScaleX();
    cc.view.getScaleY();
    e.beginPath();
    e.arc(0 | a.x, 0 | -a.y, b, -d, -(d - 2 * Math.PI), !1);
    f && e.lineTo(0 | a.x, 0 | -a.y);
    e.stroke();
  },
  drawQuadBezier: function (a, b, d, e) {
    for (var f = this._cacheArray, g = (f.length = 0), h = 0; h < e; h++) {
      var k = Math.pow(1 - g, 2) * a.x + 2 * (1 - g) * g * b.x + g * g * d.x,
        m = Math.pow(1 - g, 2) * a.y + 2 * (1 - g) * g * b.y + g * g * d.y;
      f.push(cc.p(k, m));
      g += 1 / e;
    }
    f.push(cc.p(d.x, d.y));
    this.drawPoly(f, e + 1, !1, !1);
  },
  drawCubicBezier: function (a, b, d, e, f) {
    for (var g = this._cacheArray, h = (g.length = 0), k = 0; k < f; k++) {
      var m =
          Math.pow(1 - h, 3) * a.x +
          3 * Math.pow(1 - h, 2) * h * b.x +
          3 * (1 - h) * h * h * d.x +
          h * h * h * e.x,
        n =
          Math.pow(1 - h, 3) * a.y +
          3 * Math.pow(1 - h, 2) * h * b.y +
          3 * (1 - h) * h * h * d.y +
          h * h * h * e.y;
      g.push(cc.p(m, n));
      h += 1 / f;
    }
    g.push(cc.p(e.x, e.y));
    this.drawPoly(g, f + 1, !1, !1);
  },
  drawCatmullRom: function (a, b) {
    this.drawCardinalSpline(a, 0.5, b);
  },
  drawCardinalSpline: function (a, b, d) {
    cc._renderContext.setStrokeStyle("rgba(255,255,255,1)");
    var e = this._cacheArray;
    e.length = 0;
    for (var f, g, h = 1 / a.length, k = 0; k < d + 1; k++)
      (g = k / d),
        1 === g
          ? ((f = a.length - 1), (g = 1))
          : ((f = 0 | (g / h)), (g = (g - h * f) / h)),
        (f = cc.CardinalSplineAt(
          cc.getControlPointAt(a, f - 1),
          cc.getControlPointAt(a, f - 0),
          cc.getControlPointAt(a, f + 1),
          cc.getControlPointAt(a, f + 2),
          b,
          g
        )),
        e.push(f);
    this.drawPoly(e, d + 1, !1, !1);
  },
  drawImage: function (a, b, d, e, f) {
    var g = arguments.length,
      h = this._renderContext.getContext();
    switch (g) {
      case 2:
        h.drawImage(a, b.x, -(b.y + a.height));
        break;
      case 3:
        h.drawImage(a, b.x, -(b.y + d.height), d.width, d.height);
        break;
      case 5:
        h.drawImage(
          a,
          b.x,
          b.y,
          d.width,
          d.height,
          e.x,
          -(e.y + f.height),
          f.width,
          f.height
        );
        break;
      default:
        throw Error("Argument must be non-nil");
    }
  },
  drawStar: function (a, b, d) {
    a = a || this._renderContext;
    var e = a.getContext();
    d = "rgba(" + (0 | d.r) + "," + (0 | d.g) + "," + (0 | d.b);
    a.setFillStyle(d + ",1)");
    var f = b / 10;
    e.beginPath();
    e.moveTo(-b, b);
    e.lineTo(0, f);
    e.lineTo(b, b);
    e.lineTo(f, 0);
    e.lineTo(b, -b);
    e.lineTo(0, -f);
    e.lineTo(-b, -b);
    e.lineTo(-f, 0);
    e.lineTo(-b, b);
    e.closePath();
    e.fill();
    var g = e.createRadialGradient(0, 0, f, 0, 0, b);
    g.addColorStop(0, d + ", 1)");
    g.addColorStop(0.3, d + ", 0.8)");
    g.addColorStop(1, d + ", 0.0)");
    a.setFillStyle(g);
    e.beginPath();
    e.arc(0, 0, b - f, 0, cc.PI2, !1);
    e.closePath();
    e.fill();
  },
  drawColorBall: function (a, b, d) {
    a = a || this._renderContext;
    var e = a.getContext();
    b *= cc.view.getScaleX();
    d = "rgba(" + (0 | d.r) + "," + (0 | d.g) + "," + (0 | d.b);
    var f = e.createRadialGradient(0, 0, b / 10, 0, 0, b);
    f.addColorStop(0, d + ", 1)");
    f.addColorStop(0.3, d + ", 0.8)");
    f.addColorStop(0.6, d + ", 0.4)");
    f.addColorStop(1, d + ", 0.0)");
    a.setFillStyle(f);
    e.beginPath();
    e.arc(0, 0, b, 0, cc.PI2, !1);
    e.closePath();
    e.fill();
  },
  fillText: function (a, b, d) {
    this._renderContext.getContext().fillText(a, b, -d);
  },
  setDrawColor: function (a, b, d, e) {
    this._renderContext.setFillStyle(
      "rgba(" + a + "," + b + "," + d + "," + e / 255 + ")"
    );
    this._renderContext.setStrokeStyle(
      "rgba(" + a + "," + b + "," + d + "," + e / 255 + ")"
    );
  },
  setPointSize: function (a) {},
  setLineWidth: function (a) {
    this._renderContext.getContext().lineWidth = a * cc.view.getScaleX();
  },
});
cc.DrawingPrimitiveWebGL = cc.Class.extend({
  _renderContext: null,
  _initialized: !1,
  _shader: null,
  _colorLocation: "u_color",
  _colorArray: null,
  _pointSizeLocation: "u_pointSize",
  _pointSize: -1,
  ctor: function (a) {
    null == a && (a = cc._renderContext);
    if (!a instanceof WebGLRenderingContext)
      throw Error(
        "Can't initialise DrawingPrimitiveWebGL. context need is WebGLRenderingContext"
      );
    this._renderContext = a;
    this._colorArray = new Float32Array([1, 1, 1, 1]);
  },
  lazy_init: function () {
    this._initialized ||
      ((this._shader = cc.shaderCache.programForKey(cc.SHADER_POSITION_UCOLOR)),
      this._shader._addUniformLocation(this._colorLocation),
      this._shader._addUniformLocation(this._pointSizeLocation),
      (this._glProgramState = cc.GLProgramState.getOrCreateWithGLProgram(
        this._shader
      )),
      (this._initialized = !0));
  },
  drawInit: function () {
    this._initialized = !1;
  },
  drawPoint: function (a) {
    this.lazy_init();
    var b = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    this._shader.setUniformLocationWith1f(
      this._pointSizeLocation,
      this._pointSize
    );
    var d = b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER, d);
    b.bufferData(b.ARRAY_BUFFER, new Float32Array([a.x, a.y]), b.STATIC_DRAW);
    b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
    b.drawArrays(b.POINTS, 0, 1);
    b.deleteBuffer(d);
    cc.incrementGLDraws(1);
  },
  drawPoints: function (a, b) {
    if (a && 0 !== a.length) {
      this.lazy_init();
      var d = this._renderContext;
      this._glProgramState.apply();
      this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
      d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      this._shader.setUniformLocationWith4fv(
        this._colorLocation,
        this._colorArray
      );
      this._shader.setUniformLocationWith1f(
        this._pointSizeLocation,
        this._pointSize
      );
      var e = d.createBuffer();
      d.bindBuffer(d.ARRAY_BUFFER, e);
      d.bufferData(d.ARRAY_BUFFER, this._pointsToTypeArray(a), d.STATIC_DRAW);
      d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, d.FLOAT, !1, 0, 0);
      d.drawArrays(d.POINTS, 0, a.length);
      d.deleteBuffer(e);
      cc.incrementGLDraws(1);
    }
  },
  _pointsToTypeArray: function (a) {
    for (var b = new Float32Array(2 * a.length), d = 0; d < a.length; d++)
      (b[2 * d] = a[d].x), (b[2 * d + 1] = a[d].y);
    return b;
  },
  drawLine: function (a, b) {
    this.lazy_init();
    var d = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    var e = d.createBuffer();
    d.bindBuffer(d.ARRAY_BUFFER, e);
    d.bufferData(
      d.ARRAY_BUFFER,
      this._pointsToTypeArray([a, b]),
      d.STATIC_DRAW
    );
    d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, d.FLOAT, !1, 0, 0);
    d.drawArrays(d.LINES, 0, 2);
    d.deleteBuffer(e);
    cc.incrementGLDraws(1);
  },
  drawRect: function (a, b) {
    this.drawLine(cc.p(a.x, a.y), cc.p(b.x, a.y));
    this.drawLine(cc.p(b.x, a.y), cc.p(b.x, b.y));
    this.drawLine(cc.p(b.x, b.y), cc.p(a.x, b.y));
    this.drawLine(cc.p(a.x, b.y), cc.p(a.x, a.y));
  },
  drawSolidRect: function (a, b, d) {
    a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
    this.drawSolidPoly(a, 4, d);
  },
  drawPoly: function (a, b, d) {
    this.lazy_init();
    b = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    var e = b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER, e);
    b.bufferData(b.ARRAY_BUFFER, this._pointsToTypeArray(a), b.STATIC_DRAW);
    b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
    d
      ? b.drawArrays(b.LINE_LOOP, 0, a.length)
      : b.drawArrays(b.LINE_STRIP, 0, a.length);
    b.deleteBuffer(e);
    cc.incrementGLDraws(1);
  },
  drawSolidPoly: function (a, b, d) {
    this.lazy_init();
    d && this.setDrawColor(d.r, d.g, d.b, d.a);
    b = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    d = b.createBuffer();
    b.bindBuffer(b.ARRAY_BUFFER, d);
    b.bufferData(b.ARRAY_BUFFER, this._pointsToTypeArray(a), b.STATIC_DRAW);
    b.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, b.FLOAT, !1, 0, 0);
    b.drawArrays(b.TRIANGLE_FAN, 0, a.length);
    b.deleteBuffer(d);
    cc.incrementGLDraws(1);
  },
  drawCircle: function (a, b, d, e, f) {
    this.lazy_init();
    var g = 1;
    f && g++;
    var h = (2 * Math.PI) / e;
    if ((f = new Float32Array(2 * (e + 2)))) {
      for (var k = 0; k <= e; k++) {
        var m = k * h,
          n = b * Math.cos(m + d) + a.x,
          m = b * Math.sin(m + d) + a.y;
        f[2 * k] = n;
        f[2 * k + 1] = m;
      }
      f[2 * (e + 1)] = a.x;
      f[2 * (e + 1) + 1] = a.y;
      a = this._renderContext;
      this._glProgramState.apply();
      this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      this._shader.setUniformLocationWith4fv(
        this._colorLocation,
        this._colorArray
      );
      b = a.createBuffer();
      a.bindBuffer(a.ARRAY_BUFFER, b);
      a.bufferData(a.ARRAY_BUFFER, f, a.STATIC_DRAW);
      a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
      a.drawArrays(a.LINE_STRIP, 0, e + g);
      a.deleteBuffer(b);
      cc.incrementGLDraws(1);
    }
  },
  drawQuadBezier: function (a, b, d, e) {
    this.lazy_init();
    for (var f = new Float32Array(2 * (e + 1)), g = 0, h = 0; h < e; h++)
      (f[2 * h] =
        Math.pow(1 - g, 2) * a.x + 2 * (1 - g) * g * b.x + g * g * d.x),
        (f[2 * h + 1] =
          Math.pow(1 - g, 2) * a.y + 2 * (1 - g) * g * b.y + g * g * d.y),
        (g += 1 / e);
    f[2 * e] = d.x;
    f[2 * e + 1] = d.y;
    a = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    b = a.createBuffer();
    a.bindBuffer(a.ARRAY_BUFFER, b);
    a.bufferData(a.ARRAY_BUFFER, f, a.STATIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
    a.drawArrays(a.LINE_STRIP, 0, e + 1);
    a.deleteBuffer(b);
    cc.incrementGLDraws(1);
  },
  drawCubicBezier: function (a, b, d, e, f) {
    this.lazy_init();
    for (var g = new Float32Array(2 * (f + 1)), h = 0, k = 0; k < f; k++)
      (g[2 * k] =
        Math.pow(1 - h, 3) * a.x +
        3 * Math.pow(1 - h, 2) * h * b.x +
        3 * (1 - h) * h * h * d.x +
        h * h * h * e.x),
        (g[2 * k + 1] =
          Math.pow(1 - h, 3) * a.y +
          3 * Math.pow(1 - h, 2) * h * b.y +
          3 * (1 - h) * h * h * d.y +
          h * h * h * e.y),
        (h += 1 / f);
    g[2 * f] = e.x;
    g[2 * f + 1] = e.y;
    a = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    b = a.createBuffer();
    a.bindBuffer(a.ARRAY_BUFFER, b);
    a.bufferData(a.ARRAY_BUFFER, g, a.STATIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
    a.drawArrays(a.LINE_STRIP, 0, f + 1);
    a.deleteBuffer(b);
    cc.incrementGLDraws(1);
  },
  drawCatmullRom: function (a, b) {
    this.drawCardinalSpline(a, 0.5, b);
  },
  drawCardinalSpline: function (a, b, d) {
    this.lazy_init();
    for (
      var e = new Float32Array(2 * (d + 1)), f, g, h = 1 / a.length, k = 0;
      k < d + 1;
      k++
    )
      (g = k / d),
        1 === g
          ? ((f = a.length - 1), (g = 1))
          : ((f = 0 | (g / h)), (g = (g - h * f) / h)),
        (f = cc.cardinalSplineAt(
          cc.getControlPointAt(a, f - 1),
          cc.getControlPointAt(a, f),
          cc.getControlPointAt(a, f + 1),
          cc.getControlPointAt(a, f + 2),
          b,
          g
        )),
        (e[2 * k] = f.x),
        (e[2 * k + 1] = f.y);
    a = this._renderContext;
    this._glProgramState.apply();
    this._shader.setUniformForModelViewAndProjectionMatrixWithMat4();
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    this._shader.setUniformLocationWith4fv(
      this._colorLocation,
      this._colorArray
    );
    b = a.createBuffer();
    a.bindBuffer(a.ARRAY_BUFFER, b);
    a.bufferData(a.ARRAY_BUFFER, e, a.STATIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
    a.drawArrays(a.LINE_STRIP, 0, d + 1);
    a.deleteBuffer(b);
    cc.incrementGLDraws(1);
  },
  setDrawColor: function (a, b, d, e) {
    this._colorArray[0] = a / 255;
    this._colorArray[1] = b / 255;
    this._colorArray[2] = d / 255;
    this._colorArray[3] = e / 255;
  },
  setPointSize: function (a) {
    this._pointSize = a * cc.contentScaleFactor();
  },
  setLineWidth: function (a) {
    this._renderContext.lineWidth && this._renderContext.lineWidth(a);
  },
});
cc._tmp.PrototypeLabelTTF = function () {
  var a = cc.LabelTTF.prototype;
  cc.defineGetterSetter(a, "color", a.getColor, a.setColor);
  cc.defineGetterSetter(a, "opacity", a.getOpacity, a.setOpacity);
  cc.defineGetterSetter(a, "string", a.getString, a.setString);
  cc.defineGetterSetter(
    a,
    "textAlign",
    a.getHorizontalAlignment,
    a.setHorizontalAlignment
  );
  cc.defineGetterSetter(
    a,
    "verticalAlign",
    a.getVerticalAlignment,
    a.setVerticalAlignment
  );
  cc.defineGetterSetter(a, "fontSize", a.getFontSize, a.setFontSize);
  cc.defineGetterSetter(a, "fontName", a.getFontName, a.setFontName);
  cc.defineGetterSetter(a, "font", a._getFont, a._setFont);
  cc.defineGetterSetter(
    a,
    "boundingWidth",
    a._getBoundingWidth,
    a._setBoundingWidth
  );
  cc.defineGetterSetter(
    a,
    "boundingHeight",
    a._getBoundingHeight,
    a._setBoundingHeight
  );
  cc.defineGetterSetter(a, "fillStyle", a._getFillStyle, a.setFontFillColor);
  cc.defineGetterSetter(a, "strokeStyle", a._getStrokeStyle, a._setStrokeStyle);
  cc.defineGetterSetter(a, "lineWidth", a._getLineWidth, a._setLineWidth);
  cc.defineGetterSetter(
    a,
    "shadowOffsetX",
    a._getShadowOffsetX,
    a._setShadowOffsetX
  );
  cc.defineGetterSetter(
    a,
    "shadowOffsetY",
    a._getShadowOffsetY,
    a._setShadowOffsetY
  );
  cc.defineGetterSetter(
    a,
    "shadowOpacity",
    a._getShadowOpacity,
    a._setShadowOpacity
  );
  cc.defineGetterSetter(a, "shadowBlur", a._getShadowBlur, a._setShadowBlur);
};
cc.LabelTTF = cc.Sprite.extend({
  _dimensions: null,
  _hAlignment: cc.TEXT_ALIGNMENT_CENTER,
  _vAlignment: cc.VERTICAL_TEXT_ALIGNMENT_TOP,
  _fontName: null,
  _fontSize: 0,
  _string: "",
  _originalText: null,
  _onCacheCanvasMode: !0,
  _shadowEnabled: !1,
  _shadowOffset: null,
  _shadowOpacity: 0,
  _shadowBlur: 0,
  _shadowColor: null,
  _strokeEnabled: !1,
  _strokeColor: null,
  _strokeSize: 0,
  _textFillColor: null,
  _strokeShadowOffsetX: 0,
  _strokeShadowOffsetY: 0,
  _needUpdateTexture: !1,
  _lineWidths: null,
  _className: "LabelTTF",
  _fontStyle: "normal",
  _fontWeight: "normal",
  _lineHeight: "normal",
  initWithString: function (a, b, d, e, f, g) {
    a = a ? a + "" : "";
    d = d || 16;
    e = e || cc.size(0, 0);
    f = f || cc.TEXT_ALIGNMENT_LEFT;
    g = g || cc.VERTICAL_TEXT_ALIGNMENT_TOP;
    this._opacityModifyRGB = !1;
    this._dimensions = cc.size(e.width, e.height);
    this._fontName = b || "Arial";
    this._hAlignment = f;
    this._vAlignment = g;
    this._fontSize = d;
    this._renderCmd._setFontStyle(
      this._fontName,
      d,
      this._fontStyle,
      this._fontWeight
    );
    this.string = a;
    this._renderCmd._setColorsString();
    this._renderCmd._updateTexture();
    this._setUpdateTextureDirty();
    this._scaleX = this._scaleY = 1 / cc.view.getDevicePixelRatio();
    return !0;
  },
  _setUpdateTextureDirty: function () {
    this._needUpdateTexture = !0;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.textDirty);
  },
  ctor: function (a, b, d, e, f, g) {
    cc.Sprite.prototype.ctor.call(this);
    this._dimensions = cc.size(0, 0);
    this._hAlignment = cc.TEXT_ALIGNMENT_LEFT;
    this._vAlignment = cc.VERTICAL_TEXT_ALIGNMENT_TOP;
    this._opacityModifyRGB = !1;
    this._fontName = "Arial";
    this._shadowEnabled = !1;
    this._shadowOffset = cc.p(0, 0);
    this._shadowBlur = this._shadowOpacity = 0;
    this._strokeEnabled = !1;
    this._strokeColor = cc.color(255, 255, 255, 255);
    this._strokeSize = 0;
    this._textFillColor = cc.color(255, 255, 255, 255);
    this._strokeShadowOffsetY = this._strokeShadowOffsetX = 0;
    this._needUpdateTexture = !1;
    this._lineWidths = [];
    this._renderCmd._setColorsString();
    this._textureLoaded = !0;
    b && b instanceof cc.FontDefinition
      ? this.initWithStringAndTextDefinition(a, b)
      : cc.LabelTTF.prototype.initWithString.call(this, a, b, d, e, f, g);
  },
  init: function () {
    return this.initWithString(" ", this._fontName, this._fontSize);
  },
  description: function () {
    return (
      "\x3ccc.LabelTTF | FontName \x3d" +
      this._fontName +
      " FontSize \x3d " +
      this._fontSize.toFixed(1) +
      "\x3e"
    );
  },
  getLineHeight: function () {
    return !this._lineHeight || this._lineHeight.charAt
      ? this._renderCmd._getFontClientHeight()
      : this._lineHeight || this._renderCmd._getFontClientHeight();
  },
  setLineHeight: function (a) {
    this._lineHeight = a;
  },
  getString: function () {
    return this._string;
  },
  getHorizontalAlignment: function () {
    return this._hAlignment;
  },
  getVerticalAlignment: function () {
    return this._vAlignment;
  },
  getDimensions: function () {
    return cc.size(this._dimensions);
  },
  getFontSize: function () {
    return this._fontSize;
  },
  getFontName: function () {
    return this._fontName;
  },
  initWithStringAndTextDefinition: function (a, b) {
    this._updateWithTextDefinition(b, !1);
    this.string = a;
    return !0;
  },
  setTextDefinition: function (a) {
    a && this._updateWithTextDefinition(a, !0);
  },
  getTextDefinition: function () {
    return this._prepareTextDefinition(!1);
  },
  enableShadow: function (a, b, d, e) {
    null != a.r && null != a.g && null != a.b && null != a.a
      ? this._enableShadow(a, b, d)
      : this._enableShadowNoneColor(a, b, d, e);
  },
  _enableShadowNoneColor: function (a, b, d, e) {
    d = d || 0.5;
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    var f = this._shadowOffset;
    if ((f && f.x !== a) || f._y !== b) (f.x = a), (f.y = b);
    this._shadowOpacity !== d && (this._shadowOpacity = d);
    this._renderCmd._setColorsString();
    this._shadowBlur !== e && (this._shadowBlur = e);
    this._setUpdateTextureDirty();
  },
  _enableShadow: function (a, b, d) {
    this._shadowColor || (this._shadowColor = cc.color(255, 255, 255, 128));
    this._shadowColor.r = a.r;
    this._shadowColor.g = a.g;
    this._shadowColor.b = a.b;
    this._enableShadowNoneColor(
      b.width || b.x || 0,
      b.height || b.y || 0,
      null != a.a ? a.a / 255 : 0.5,
      d
    );
  },
  _getShadowOffsetX: function () {
    return this._shadowOffset.x;
  },
  _setShadowOffsetX: function (a) {
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    this._shadowOffset.x !== a &&
      ((this._shadowOffset.x = a), this._setUpdateTextureDirty());
  },
  _getShadowOffsetY: function () {
    return this._shadowOffset._y;
  },
  _setShadowOffsetY: function (a) {
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    this._shadowOffset._y !== a &&
      ((this._shadowOffset._y = a), this._setUpdateTextureDirty());
  },
  _getShadowOffset: function () {
    return cc.p(this._shadowOffset.x, this._shadowOffset.y);
  },
  _setShadowOffset: function (a) {
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    if (this._shadowOffset.x !== a.x || this._shadowOffset.y !== a.y)
      (this._shadowOffset.x = a.x),
        (this._shadowOffset.y = a.y),
        this._setUpdateTextureDirty();
  },
  _getShadowOpacity: function () {
    return this._shadowOpacity;
  },
  _setShadowOpacity: function (a) {
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    this._shadowOpacity !== a &&
      ((this._shadowOpacity = a),
      this._renderCmd._setColorsString(),
      this._setUpdateTextureDirty());
  },
  _getShadowBlur: function () {
    return this._shadowBlur;
  },
  _setShadowBlur: function (a) {
    !1 === this._shadowEnabled && (this._shadowEnabled = !0);
    this._shadowBlur !== a &&
      ((this._shadowBlur = a), this._setUpdateTextureDirty());
  },
  disableShadow: function () {
    this._shadowEnabled &&
      ((this._shadowEnabled = !1), this._setUpdateTextureDirty());
  },
  enableStroke: function (a, b) {
    !1 === this._strokeEnabled && (this._strokeEnabled = !0);
    var d = this._strokeColor;
    if (d.r !== a.r || d.g !== a.g || d.b !== a.b)
      (d.r = a.r), (d.g = a.g), (d.b = a.b), this._renderCmd._setColorsString();
    this._strokeSize !== b && (this._strokeSize = b || 0);
    this._setUpdateTextureDirty();
  },
  _getStrokeStyle: function () {
    return this._strokeColor;
  },
  _setStrokeStyle: function (a) {
    !1 === this._strokeEnabled && (this._strokeEnabled = !0);
    var b = this._strokeColor;
    if (b.r !== a.r || b.g !== a.g || b.b !== a.b)
      (b.r = a.r),
        (b.g = a.g),
        (b.b = a.b),
        this._renderCmd._setColorsString(),
        this._setUpdateTextureDirty();
  },
  _getLineWidth: function () {
    return this._strokeSize;
  },
  _setLineWidth: function (a) {
    !1 === this._strokeEnabled && (this._strokeEnabled = !0);
    this._strokeSize !== a &&
      ((this._strokeSize = a || 0), this._setUpdateTextureDirty());
  },
  disableStroke: function () {
    this._strokeEnabled &&
      ((this._strokeEnabled = !1), this._setUpdateTextureDirty());
  },
  setFontFillColor: function (a) {
    var b = this._textFillColor;
    if (b.r !== a.r || b.g !== a.g || b.b !== a.b)
      (b.r = a.r),
        (b.g = a.g),
        (b.b = a.b),
        this._renderCmd._setColorsString(),
        (this._needUpdateTexture = !0);
  },
  _getFillStyle: function () {
    return this._textFillColor;
  },
  _updateWithTextDefinition: function (a, b) {
    a.fontDimensions
      ? ((this._dimensions.width = a.boundingWidth),
        (this._dimensions.height = a.boundingHeight))
      : ((this._dimensions.width = 0), (this._dimensions.height = 0));
    this._hAlignment = a.textAlign;
    this._vAlignment = a.verticalAlign;
    this._fontName = a.fontName;
    this._fontSize = a.fontSize || 12;
    this._lineHeight = a.lineHeight ? a.lineHeight : this._fontSize;
    this._renderCmd._setFontStyle(a);
    a.shadowEnabled &&
      this.enableShadow(
        a.shadowOffsetX,
        a.shadowOffsetY,
        a.shadowOpacity,
        a.shadowBlur
      );
    a.strokeEnabled && this.enableStroke(a.strokeStyle, a.lineWidth);
    this.setFontFillColor(a.fillStyle);
    b && this._renderCmd._updateTexture();
    var d = cc.Node._dirtyFlags;
    this._renderCmd.setDirtyFlag(d.colorDirty | d.opacityDirty | d.textDirty);
  },
  _prepareTextDefinition: function (a) {
    var b = new cc.FontDefinition();
    a
      ? ((b.fontSize = this._fontSize),
        (b.boundingWidth = cc.contentScaleFactor() * this._dimensions.width),
        (b.boundingHeight = cc.contentScaleFactor() * this._dimensions.height))
      : ((b.fontSize = this._fontSize),
        (b.boundingWidth = this._dimensions.width),
        (b.boundingHeight = this._dimensions.height));
    b.fontName = this._fontName;
    b.textAlign = this._hAlignment;
    b.verticalAlign = this._vAlignment;
    if (this._strokeEnabled) {
      b.strokeEnabled = !0;
      var d = this._strokeColor;
      b.strokeStyle = cc.color(d.r, d.g, d.b);
      b.lineWidth = this._strokeSize;
    } else b.strokeEnabled = !1;
    this._shadowEnabled
      ? ((b.shadowEnabled = !0),
        (b.shadowBlur = this._shadowBlur),
        (b.shadowOpacity = this._shadowOpacity),
        (b.shadowOffsetX =
          (a ? cc.contentScaleFactor() : 1) * this._shadowOffset.x),
        (b.shadowOffsetY =
          (a ? cc.contentScaleFactor() : 1) * this._shadowOffset.y))
      : (b._shadowEnabled = !1);
    a = this._textFillColor;
    b.fillStyle = cc.color(a.r, a.g, a.b);
    return b;
  },
  getScale: function () {
    this._scaleX !== this._scaleY && cc.log(cc._LogInfos.Node_getScale);
    return this._scaleX * cc.view.getDevicePixelRatio();
  },
  setScale: function (a, b) {
    var d = cc.view.getDevicePixelRatio();
    this._scaleX = a / d;
    this._scaleY = (b || 0 === b ? b : a) / d;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getScaleX: function () {
    return this._scaleX * cc.view.getDevicePixelRatio();
  },
  setScaleX: function (a) {
    this._scaleX = a / cc.view.getDevicePixelRatio();
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getScaleY: function () {
    return this._scaleY * cc.view.getDevicePixelRatio();
  },
  setScaleY: function (a) {
    this._scaleY = a / cc.view.getDevicePixelRatio();
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  setString: function (a) {
    a = String(a);
    this._originalText !== a &&
      ((this._originalText = a + ""),
      this._updateString(),
      this._setUpdateTextureDirty(),
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty));
  },
  _updateString: function () {
    (this._string && "" !== this._string) ||
      this._string === this._originalText ||
      (cc.renderer.childrenOrderDirty = !0);
    this._string = this._originalText;
  },
  setHorizontalAlignment: function (a) {
    a !== this._hAlignment &&
      ((this._hAlignment = a), this._setUpdateTextureDirty());
  },
  setVerticalAlignment: function (a) {
    a !== this._vAlignment &&
      ((this._vAlignment = a), this._setUpdateTextureDirty());
  },
  setDimensions: function (a, b) {
    var d;
    void 0 === b ? ((d = a.width), (b = a.height)) : (d = a);
    if (d !== this._dimensions.width || b !== this._dimensions.height)
      (this._dimensions.width = d),
        (this._dimensions.height = b),
        this._updateString(),
        this._setUpdateTextureDirty();
  },
  _getBoundingWidth: function () {
    return this._dimensions.width;
  },
  _setBoundingWidth: function (a) {
    a !== this._dimensions.width &&
      ((this._dimensions.width = a),
      this._updateString(),
      this._setUpdateTextureDirty());
  },
  _getBoundingHeight: function () {
    return this._dimensions.height;
  },
  _setBoundingHeight: function (a) {
    a !== this._dimensions.height &&
      ((this._dimensions.height = a),
      this._updateString(),
      this._setUpdateTextureDirty());
  },
  setFontSize: function (a) {
    this._fontSize !== a &&
      ((this._fontSize = a),
      this._renderCmd._setFontStyle(
        this._fontName,
        this._fontSize,
        this._fontStyle,
        this._fontWeight
      ),
      this._setUpdateTextureDirty());
  },
  setFontName: function (a) {
    this._fontName &&
      this._fontName !== a &&
      ((this._fontName = a),
      this._renderCmd._setFontStyle(
        this._fontName,
        this._fontSize,
        this._fontStyle,
        this._fontWeight
      ),
      this._setUpdateTextureDirty());
  },
  _getFont: function () {
    return this._renderCmd._getFontStyle();
  },
  _setFont: function (a) {
    if ((a = cc.LabelTTF._fontStyleRE.exec(a)))
      (this._fontSize = parseInt(a[1])),
        (this._fontName = a[2]),
        this._renderCmd._setFontStyle(
          this._fontName,
          this._fontSize,
          this._fontStyle,
          this._fontWeight
        ),
        this._setUpdateTextureDirty();
  },
  getContentSize: function () {
    this._needUpdateTexture && this._renderCmd._updateTTF();
    var a = cc.view.getDevicePixelRatio();
    return cc.size(this._contentSize.width / a, this._contentSize.height / a);
  },
  _getWidth: function () {
    this._needUpdateTexture && this._renderCmd._updateTTF();
    return this._contentSize.width / cc.view.getDevicePixelRatio();
  },
  _getHeight: function () {
    this._needUpdateTexture && this._renderCmd._updateTTF();
    return this._contentSize.height / cc.view.getDevicePixelRatio();
  },
  setTextureRect: function (a, b, d) {
    this._rectRotated = b || !1;
    this.setContentSize(d || a);
    b = this._rect;
    b.x = a.x;
    b.y = a.y;
    b.width = a.width;
    b.height = a.height;
    this._renderCmd._setTextureCoords(a, !1);
    d = this._unflippedOffsetPositionFromCenter.x;
    var e = this._unflippedOffsetPositionFromCenter.y;
    this._flippedX && (d = -d);
    this._flippedY && (e = -e);
    this._offsetPosition.x = d + (a.width - b.width) / 2;
    this._offsetPosition.y = e + (a.height - b.height) / 2;
  },
  setDrawMode: function (a) {
    this._onCacheCanvasMode = a;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new cc.LabelTTF.WebGLRenderCmd(this)
      : this._onCacheCanvasMode
      ? new cc.LabelTTF.CacheCanvasRenderCmd(this)
      : new cc.LabelTTF.CanvasRenderCmd(this);
  },
  _setFontStyle: function (a) {
    this._fontStyle !== a &&
      ((this._fontStyle = a),
      this._renderCmd._setFontStyle(
        this._fontName,
        this._fontSize,
        this._fontStyle,
        this._fontWeight
      ),
      this._setUpdateTextureDirty());
  },
  _getFontStyle: function () {
    return this._fontStyle;
  },
  _setFontWeight: function (a) {
    this._fontWeight !== a &&
      ((this._fontWeight = a),
      this._renderCmd._setFontStyle(
        this._fontName,
        this._fontSize,
        this._fontStyle,
        this._fontWeight
      ),
      this._setUpdateTextureDirty());
  },
  _getFontWeight: function () {
    return this._fontWeight;
  },
});
cc.assert(
  cc.isFunction(cc._tmp.PrototypeLabelTTF),
  cc._LogInfos.MissingFile,
  "LabelTTFPropertyDefine.js"
);
cc._tmp.PrototypeLabelTTF();
delete cc._tmp.PrototypeLabelTTF;
cc.LabelTTF._fontStyleRE = /^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/;
cc.LabelTTF.create = function (a, b, d, e, f, g) {
  return new cc.LabelTTF(a, b, d, e, f, g);
};
cc.LabelTTF.createWithFontDefinition = cc.LabelTTF.create;
cc.LabelTTF.__labelHeightDiv = document.createElement("div");
cc.LabelTTF.__labelHeightDiv.style.fontFamily = "Arial";
cc.LabelTTF.__labelHeightDiv.style.position = "absolute";
cc.LabelTTF.__labelHeightDiv.style.left = "-100px";
cc.LabelTTF.__labelHeightDiv.style.top = "-100px";
cc.LabelTTF.__labelHeightDiv.style.lineHeight = "normal";
document.body
  ? document.body.appendChild(cc.LabelTTF.__labelHeightDiv)
  : window.addEventListener(
      "load",
      function () {
        this.removeEventListener("load", arguments.callee, !1);
        document.body.appendChild(cc.LabelTTF.__labelHeightDiv);
      },
      !1
    );
cc.LabelTTF.__getFontHeightByDiv = function (a, b) {
  var d,
    e = cc.LabelTTF.__labelHeightDiv;
  if (a instanceof cc.FontDefinition) {
    d = cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()];
    if (0 < d) return d;
    e.innerHTML = "ajghl~!";
    e.style.fontFamily = a.fontName;
    e.style.fontSize = a.fontSize + "px";
    e.style.fontStyle = a.fontStyle;
    e.style.fontWeight = a.fontWeight;
    d = e.clientHeight;
    cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()] = d;
  } else {
    d = cc.LabelTTF.__fontHeightCache[a + "." + b];
    if (0 < d) return d;
    e.innerHTML = "ajghl~!";
    e.style.fontFamily = a;
    e.style.fontSize = b + "px";
    d = e.clientHeight;
    cc.LabelTTF.__fontHeightCache[a + "." + b] = d;
  }
  e.innerHTML = "";
  return d;
};
cc.LabelTTF.__fontHeightCache = {};
cc.LabelTTF._textAlign = ["left", "center", "right"];
cc.LabelTTF._textBaseline = ["top", "middle", "bottom"];
cc.LabelTTF.wrapInspection = !0;
cc.LabelTTF._wordRex = /([a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+|\S)/;
cc.LabelTTF._symbolRex = /^[!,.:;}\]%\?>\u3001\u2018\u201c\u300b\u00bb\uff1f\u3002\uff0c\uff01\u2010\u2032-\u2034\u203a\u203c\u2046\u2047-\u2049]/;
cc.LabelTTF._lastWordRex = /([a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+|\S)$/;
cc.LabelTTF._lastEnglish = /[a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]+$/;
cc.LabelTTF._firsrEnglish = /^[a-zA-Z0-9\-\u00bf\u00a1\u00ab\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02af\u0300-\u034e\u0350-\u036F\u0370-\u052f\u2011\u2035-\u2037\u2039\u2045]/;
(function () {
  cc.LabelTTF.RenderCmd = function () {
    this._fontClientHeight = 18;
    this._fontStyleStr = "";
    this._shadowColorStr = "rgba(128, 128, 128, 0.5)";
    this._strokeColorStr = "";
    this._fillColorStr = "rgba(255,255,255,1)";
    this._labelContext = this._labelCanvas = null;
    this._lineWidths = [];
    this._strings = [];
    this._isMultiLine = !1;
    this._status = [];
    this._renderingIndex = 0;
    this._canUseDirtyRegion = !0;
  };
  var a = cc.LabelTTF.RenderCmd.prototype;
  a.constructor = cc.LabelTTF.RenderCmd;
  a._labelCmdCtor = cc.LabelTTF.RenderCmd;
  a._setFontStyle = function (a, b, f, g) {
    if (a instanceof cc.FontDefinition)
      (this._fontStyleStr = a._getCanvasFontStr()),
        (this._fontClientHeight = cc.LabelTTF.__getFontHeightByDiv(a));
    else {
      var h = b * cc.view.getDevicePixelRatio();
      this._fontStyleStr = f + " " + g + " " + h + "px '" + a + "'";
      this._fontClientHeight = cc.LabelTTF.__getFontHeightByDiv(a, b);
    }
  };
  a._getFontStyle = function () {
    return this._fontStyleStr;
  };
  a._getFontClientHeight = function () {
    return this._fontClientHeight;
  };
  a._updateColor = function () {
    this._setColorsString();
    this._updateTexture();
  };
  a._setColorsString = function () {
    var a = this._displayedColor,
      b = this._node,
      f = b._shadowColor || this._displayedColor,
      g = b._strokeColor,
      h = b._textFillColor,
      k = a.r / 255,
      m = a.g / 255,
      a = a.b / 255;
    this._shadowColorStr =
      "rgba(" +
      (0 | (k * f.r)) +
      "," +
      (0 | (m * f.g)) +
      "," +
      (0 | (a * f.b)) +
      "," +
      b._shadowOpacity +
      ")";
    this._fillColorStr =
      "rgba(" +
      (0 | (k * h.r)) +
      "," +
      (0 | (m * h.g)) +
      "," +
      (0 | (a * h.b)) +
      ", 1)";
    this._strokeColorStr =
      "rgba(" +
      (0 | (k * g.r)) +
      "," +
      (0 | (m * g.g)) +
      "," +
      (0 | (a * g.b)) +
      ", 1)";
  };
  var b = new cc.Rect();
  a.getLocalBB = function () {
    var a = this._node;
    b.x = b.y = 0;
    var e = cc.view.getDevicePixelRatio();
    b.width = a._getWidth() * e;
    b.height = a._getHeight() * e;
    return b;
  };
  a._updateTTF = function () {
    var a = this._node,
      b = cc.view.getDevicePixelRatio(),
      f = a._dimensions.width * b,
      g,
      h,
      k = this._lineWidths;
    k.length = 0;
    this._isMultiLine = !1;
    this._measureConfig();
    var m = {};
    if (0 !== f)
      for (
        this._strings = a._string.split("\n"), g = 0;
        g < this._strings.length;
        g++
      )
        this._checkWarp(this._strings, g, f);
    else
      for (
        this._strings = a._string.split("\n"), g = 0, h = this._strings.length;
        g < h;
        g++
      )
        if (this._strings[g]) {
          var n = this._measure(this._strings[g]);
          k.push(n);
          m[this._strings[g]] = n;
        } else k.push(0);
    1 < this._strings.length && (this._isMultiLine = !0);
    h = g = 0;
    a._strokeEnabled && (g = h = 2 * a._strokeSize);
    a._shadowEnabled &&
      ((n = a._shadowOffset),
      (g += 2 * Math.abs(n.x)),
      (h += 2 * Math.abs(n.y)));
    0 === f
      ? this._isMultiLine
        ? (b = cc.size(
            Math.ceil(Math.max.apply(Math, k) + g),
            Math.ceil(this._fontClientHeight * b * this._strings.length + h)
          ))
        : ((n = m[a._string]),
          !n && a._string && (n = this._measure(a._string)),
          (b = cc.size(
            Math.ceil((n ? n : 0) + g),
            Math.ceil(this._fontClientHeight * b + h)
          )))
      : (b =
          0 === a._dimensions.height
            ? this._isMultiLine
              ? cc.size(
                  Math.ceil(f + g),
                  Math.ceil(a.getLineHeight() * b * this._strings.length + h)
                )
              : cc.size(Math.ceil(f + g), Math.ceil(a.getLineHeight() * b + h))
            : cc.size(
                Math.ceil(f + g),
                Math.ceil(a._dimensions.height * b + h)
              ));
    "normal" !== a._getFontStyle() &&
      (b.width = Math.ceil(b.width + 0.3 * a._fontSize));
    a.setContentSize(b);
    a._strokeShadowOffsetX = g;
    a._strokeShadowOffsetY = h;
    a = a._anchorPoint;
    this._anchorPointInPoints.x = 0.5 * g + (b.width - g) * a.x;
    this._anchorPointInPoints.y = 0.5 * h + (b.height - h) * a.y;
  };
  a._saveStatus = function () {
    var a = this._node,
      b = cc.view.getDevicePixelRatio(),
      f = a._strokeShadowOffsetX,
      g = a._strokeShadowOffsetY,
      h = a._contentSize.height - g,
      k = a._vAlignment,
      m = a._hAlignment,
      n = 0.5 * f,
      g = h + 0.5 * g,
      p = 0,
      r = 0,
      s = [],
      f = a._contentSize.width - f,
      a = a.getLineHeight() * b,
      b = (a - this._fontClientHeight * b) / 2,
      p =
        m === cc.TEXT_ALIGNMENT_RIGHT
          ? p + f
          : m === cc.TEXT_ALIGNMENT_CENTER
          ? p + f / 2
          : p + 0;
    if (this._isMultiLine)
      for (
        m = this._strings.length,
          k === cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM
            ? (r = a - 2 * b + h - a * m)
            : k === cc.VERTICAL_TEXT_ALIGNMENT_CENTER &&
              (r = (a - 2 * b) / 2 + (h - a * m) / 2),
          k = 0;
        k < m;
        k++
      )
        s.push(-h + (a * k + b) + r);
    else
      k !== cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM &&
        (r = k === cc.VERTICAL_TEXT_ALIGNMENT_TOP ? r - h : r - 0.5 * h),
        s.push(r);
    h = { contextTransform: cc.p(n, g), xOffset: p, OffsetYArray: s };
    this._status.push(h);
  };
  a._drawTTFInCanvas = function (a) {
    if (a) {
      var b = this._status.pop();
      a.setTransform(1, 0, 0, 1, b.contextTransform.x, b.contextTransform.y);
      this.drawLabels(a, b.xOffset, b.OffsetYArray);
    }
  };
  a._checkWarp = function (a, b, f) {
    var g = a[b],
      h = this._measure(g);
    if (h > f && 1 < g.length) {
      for (
        var k = ((f / h) * g.length) | 0,
          m = g.substr(k),
          n = h - this._measure(m),
          p,
          r = 0,
          s = 0;
        n > f && 100 > s++;

      )
        (k *= f / n), (k |= 0), (m = g.substr(k)), (n = h - this._measure(m));
      for (s = 0; n < f && 100 > s++; )
        m &&
          ((r = (p = cc.LabelTTF._wordRex.exec(m)) ? p[0].length : 1), (p = m)),
          (k += r),
          (m = g.substr(k)),
          (n = h - this._measure(m));
      k -= r;
      0 === k && ((k = 1), (p = p.substr(1)));
      f = g.substr(0, k);
      cc.LabelTTF.wrapInspection &&
        cc.LabelTTF._symbolRex.test(p || m) &&
        ((h = cc.LabelTTF._lastWordRex.exec(f)),
        (k -= h ? h[0].length : 0),
        0 === k && (k = 1),
        (p = g.substr(k)),
        (f = g.substr(0, k)));
      cc.LabelTTF._firsrEnglish.test(p) &&
        (h = cc.LabelTTF._lastEnglish.exec(f)) &&
        f !== h[0] &&
        ((k -= h[0].length), (p = g.substr(k)), (f = g.substr(0, k)));
      a[b] = p || m;
      a.splice(b, 0, f);
    }
  };
  a.updateStatus = function () {
    this._dirtyFlag & cc.Node._dirtyFlags.textDirty && this._updateTexture();
    this.originUpdateStatus();
  };
  a._syncStatus = function (a) {
    var b = cc.Node._dirtyFlags,
      f = this._dirtyFlag;
    f & b.textDirty && this._updateTexture();
    this._originSyncStatus(a);
    (cc._renderType === cc.game.RENDER_TYPE_WEBGL || f & b.transformDirty) &&
      this.transform(a);
  };
  a.drawLabels = function (a, b, f) {
    var g = this._node;
    if (g._shadowEnabled) {
      var h = g._shadowOffset;
      a.shadowColor = this._shadowColorStr;
      a.shadowOffsetX = h.x;
      a.shadowOffsetY = -h.y;
      a.shadowBlur = g._shadowBlur;
    }
    var h = g._hAlignment,
      k = g._vAlignment,
      m = g._strokeSize;
    a.font !== this._fontStyleStr && (a.font = this._fontStyleStr);
    a.fillStyle = this._fillColorStr;
    if ((g = g._strokeEnabled))
      (a.lineWidth = 2 * m), (a.strokeStyle = this._strokeColorStr);
    a.textBaseline = cc.LabelTTF._textBaseline[k];
    a.textAlign = cc.LabelTTF._textAlign[h];
    h = this._strings.length;
    for (k = 0; k < h; k++)
      (m = this._strings[k]),
        g && ((a.lineJoin = "round"), a.strokeText(m, b, f[k])),
        a.fillText(m, b, f[k]);
    cc.g_NumberOfDraws++;
  };
})();
(function () {
  cc.LabelTTF.CacheRenderCmd = function () {
    this._labelCmdCtor();
    var a = (this._labelCanvas = document.createElement("canvas"));
    a.width = 1;
    a.height = 1;
    this._labelContext = a.getContext("2d");
  };
  cc.LabelTTF.CacheRenderCmd.prototype = Object.create(
    cc.LabelTTF.RenderCmd.prototype
  );
  cc.inject(
    cc.LabelTTF.RenderCmd.prototype,
    cc.LabelTTF.CacheRenderCmd.prototype
  );
  var a = cc.LabelTTF.CacheRenderCmd.prototype;
  a.constructor = cc.LabelTTF.CacheRenderCmd;
  a._cacheCmdCtor = cc.LabelTTF.CacheRenderCmd;
  a._updateTexture = function () {
    this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.textDirty;
    var a = this._node;
    a._needUpdateTexture = !1;
    var d = a._contentSize;
    this._updateTTF();
    var e = d.width,
      f = d.height,
      g = this._labelContext,
      h = this._labelCanvas;
    if (!a._texture) {
      var k = new cc.Texture2D();
      k.initWithElement(this._labelCanvas);
      a.setTexture(k);
    }
    if (0 === a._string.length)
      return (
        (h.width = 1),
        (h.height = d.height || 1),
        a._texture &&
          ((a._texture._htmlElementObj = this._labelCanvas),
          a._texture.handleLoadedTexture()),
        a.setTextureRect(cc.rect(0, 0, 1, d.height)),
        !0
      );
    g.font = this._fontStyleStr;
    d = h.width === e && h.height === f;
    h.width = e;
    h.height = f;
    d && g.clearRect(0, 0, e, f);
    this._saveStatus();
    this._drawTTFInCanvas(g);
    a._texture &&
      ((a._texture._htmlElementObj = this._labelCanvas),
      a._texture.handleLoadedTexture());
    a.setTextureRect(cc.rect(0, 0, e, f));
    return !0;
  };
  a._measureConfig = function () {
    this._labelContext.font = this._fontStyleStr;
  };
  a._measure = function (a) {
    return a ? this._labelContext.measureText(a).width : 0;
  };
})();
(function () {
  cc.LabelTTF.CacheCanvasRenderCmd = function (a) {
    this._spriteCmdCtor(a);
    this._cacheCmdCtor();
  };
  var a = (cc.LabelTTF.CacheCanvasRenderCmd.prototype = Object.create(
    cc.Sprite.CanvasRenderCmd.prototype
  ));
  cc.inject(cc.LabelTTF.CacheRenderCmd.prototype, a);
  a.constructor = cc.LabelTTF.CacheCanvasRenderCmd;
})();
(function () {
  cc.LabelTTF.CanvasRenderCmd = function (a) {
    this._spriteCmdCtor(a);
    this._labelCmdCtor();
  };
  cc.LabelTTF.CanvasRenderCmd.prototype = Object.create(
    cc.Sprite.CanvasRenderCmd.prototype
  );
  cc.inject(
    cc.LabelTTF.RenderCmd.prototype,
    cc.LabelTTF.CanvasRenderCmd.prototype
  );
  var a = cc.LabelTTF.CanvasRenderCmd.prototype;
  a.constructor = cc.LabelTTF.CanvasRenderCmd;
  a._measureConfig = function () {};
  a._measure = function (a) {
    if (a) {
      var d = cc._renderContext.getContext();
      d.font = this._fontStyleStr;
      return d.measureText(a).width;
    }
    return 0;
  };
  a._updateTexture = function () {
    this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.textDirty;
    var a = this._node,
      d = a._contentSize;
    this._updateTTF();
    var e = d.width,
      f = d.height;
    if (0 === a._string.length)
      return a.setTextureRect(cc.rect(0, 0, 1, d.height)), !0;
    this._saveStatus();
    a.setTextureRect(cc.rect(0, 0, e, f));
    return !0;
  };
  a.rendering = function (a) {
    var d = cc.view.getScaleX(),
      e = cc.view.getScaleY();
    a = a || cc._renderContext;
    var f = a.getContext();
    if (f) {
      var g = this._node;
      a.computeRealOffsetY();
      if (!(0 >= this._status.length)) {
        var h =
            this._renderingIndex >= this._status.length
              ? this._renderingIndex - this._status.length
              : this._renderingIndex,
          k = this._status[h];
        this._renderingIndex = h + 1;
        var m = g._offsetPosition.x,
          h = -g._offsetPosition.y - g._rect.height,
          n = this._displayedOpacity / 255;
        a.setTransform(this._worldTransform, d, e);
        a.setCompositeOperation(this._blendFuncStr);
        a.setGlobalAlpha(n);
        a.save();
        g._flippedX && ((m = -m - g._rect.width), f.scale(-1, 1));
        g._flippedY && ((h = g._offsetPosition.y), f.scale(1, -1));
        d = k.xOffset + k.contextTransform.x + m * d;
        g = [];
        m = this._strings.length;
        for (n = 0; n < m; n++)
          g.push(k.OffsetYArray[n] + k.contextTransform.y + h * e);
        this.drawLabels(f, d, g);
        a.restore();
      }
    }
  };
})();
(function () {
  cc.LabelTTF.WebGLRenderCmd = function (a) {
    this._spriteCmdCtor(a);
    this._cacheCmdCtor();
  };
  var a = (cc.LabelTTF.WebGLRenderCmd.prototype = Object.create(
    cc.Sprite.WebGLRenderCmd.prototype
  ));
  cc.inject(cc.LabelTTF.CacheRenderCmd.prototype, a);
  a.constructor = cc.LabelTTF.WebGLRenderCmd;
  a._updateColor = function () {};
})();
cc.HashElement = function () {
  this.actions = [];
  this.target = null;
  this.actionIndex = 0;
  this.currentAction = null;
  this.lock = this.paused = !1;
};
cc.ActionManager = cc.Class.extend({
  _elementPool: [],
  _searchElementByTarget: function (a, b) {
    for (var d = 0; d < a.length; d++) if (b === a[d].target) return a[d];
    return null;
  },
  ctor: function () {
    this._hashTargets = {};
    this._arrayTargets = [];
    this._currentTarget = null;
  },
  _getElement: function (a, b) {
    var d = this._elementPool.pop();
    d || (d = new cc.HashElement());
    d.target = a;
    d.paused = !!b;
    return d;
  },
  _putElement: function (a) {
    a.actions.length = 0;
    a.actionIndex = 0;
    a.currentAction = null;
    a.paused = !1;
    a.target = null;
    a.lock = !1;
    this._elementPool.push(a);
  },
  addAction: function (a, b, d) {
    if (!a)
      throw Error("cc.ActionManager.addAction(): action must be non-null");
    if (!b)
      throw Error("cc.ActionManager.addAction(): target must be non-null");
    var e = this._hashTargets[b.__instanceId];
    e
      ? e.actions || (e.actions = [])
      : ((e = this._getElement(b, d)),
        (this._hashTargets[b.__instanceId] = e),
        this._arrayTargets.push(e));
    e.actions.push(a);
    a.startWithTarget(b);
  },
  removeAllActions: function () {
    for (var a = this._arrayTargets, b = 0; b < a.length; b++) {
      var d = a[b];
      d && this.removeAllActionsFromTarget(d.target, !0);
    }
  },
  removeAllActionsFromTarget: function (a, b) {
    if (null != a) {
      var d = this._hashTargets[a.__instanceId];
      d && ((d.actions.length = 0), this._deleteHashElement(d));
    }
  },
  removeAction: function (a) {
    if (null != a) {
      var b = a.getOriginalTarget();
      if ((b = this._hashTargets[b.__instanceId]))
        for (var d = 0; d < b.actions.length; d++) {
          if (b.actions[d] === a) {
            b.actions.splice(d, 1);
            b.actionIndex >= d && b.actionIndex--;
            break;
          }
        }
      else cc.log(cc._LogInfos.ActionManager_removeAction);
    }
  },
  removeActionByTag: function (a, b) {
    a === cc.ACTION_TAG_INVALID && cc.log(cc._LogInfos.ActionManager_addAction);
    cc.assert(b, cc._LogInfos.ActionManager_addAction);
    var d = this._hashTargets[b.__instanceId];
    if (d)
      for (var e = d.actions.length, f = 0; f < e; ++f) {
        var g = d.actions[f];
        if (g && g.getTag() === a && g.getOriginalTarget() === b) {
          this._removeActionAtIndex(f, d);
          break;
        }
      }
  },
  getActionByTag: function (a, b) {
    a === cc.ACTION_TAG_INVALID &&
      cc.log(cc._LogInfos.ActionManager_getActionByTag);
    var d = this._hashTargets[b.__instanceId];
    if (d) {
      if (null != d.actions)
        for (var e = 0; e < d.actions.length; ++e) {
          var f = d.actions[e];
          if (f && f.getTag() === a) return f;
        }
      cc.log(cc._LogInfos.ActionManager_getActionByTag_2, a);
    }
    return null;
  },
  numberOfRunningActionsInTarget: function (a) {
    return (a = this._hashTargets[a.__instanceId])
      ? a.actions
        ? a.actions.length
        : 0
      : 0;
  },
  pauseTarget: function (a) {
    (a = this._hashTargets[a.__instanceId]) && (a.paused = !0);
  },
  resumeTarget: function (a) {
    (a = this._hashTargets[a.__instanceId]) && (a.paused = !1);
  },
  pauseAllRunningActions: function () {
    for (var a = [], b = this._arrayTargets, d = 0; d < b.length; d++) {
      var e = b[d];
      e && !e.paused && ((e.paused = !0), a.push(e.target));
    }
    return a;
  },
  resumeTargets: function (a) {
    if (a) for (var b = 0; b < a.length; b++) a[b] && this.resumeTarget(a[b]);
  },
  purgeSharedManager: function () {
    cc.director.getScheduler().unscheduleUpdate(this);
  },
  _removeActionAtIndex: function (a, b) {
    b.actions.splice(a, 1);
    b.actionIndex >= a && b.actionIndex--;
    0 === b.actions.length && this._deleteHashElement(b);
  },
  _deleteHashElement: function (a) {
    var b = !1;
    if (a && !a.lock && this._hashTargets[a.target.__instanceId]) {
      delete this._hashTargets[a.target.__instanceId];
      for (var b = this._arrayTargets, d = 0, e = b.length; d < e; d++)
        if (b[d] === a) {
          b.splice(d, 1);
          break;
        }
      this._putElement(a);
      b = !0;
    }
    return b;
  },
  update: function (a) {
    for (var b = this._arrayTargets, d, e = 0; e < b.length; e++) {
      d = this._currentTarget = b[e];
      if (!d.paused && d.actions) {
        d.lock = !0;
        for (
          d.actionIndex = 0;
          d.actionIndex < d.actions.length;
          d.actionIndex++
        )
          if (((d.currentAction = d.actions[d.actionIndex]), d.currentAction)) {
            d.currentAction.step(
              a * (d.currentAction._speedMethod ? d.currentAction._speed : 1)
            );
            if (d.currentAction && d.currentAction.isDone()) {
              d.currentAction.stop();
              var f = d.currentAction;
              d.currentAction = null;
              this.removeAction(f);
            }
            d.currentAction = null;
          }
        d.lock = !1;
      }
      0 === d.actions.length && this._deleteHashElement(d) && e--;
    }
  },
});
cc.profiler = (function () {
  var a = !1,
    b = !1,
    d = 0,
    e = 0,
    f = 0,
    g = 0,
    h = null,
    k = document.createElement("div"),
    m = document.createElement("div"),
    n = document.createElement("div"),
    p = document.createElement("div"),
    r = 10,
    s = [0, 10, 20, 30],
    u = [0, 0, 0, 0],
    v = 3,
    t = 0,
    w = 0;
  p.id = "fps";
  p.style.position = "absolute";
  p.style.padding = "3px";
  p.style.textAlign = "left";
  p.style.backgroundColor = "rgb(0, 0, 34)";
  p.style.bottom = cc.DIRECTOR_STATS_POSITION.y + "0px";
  p.style.left = cc.DIRECTOR_STATS_POSITION.x + "px";
  p.style.width = "45px";
  p.style.height = "80px";
  for (var x = [n, m, k], y = 0; 3 > y; ++y) {
    var B = x[y].style;
    B.color = "rgb(0, 255, 255)";
    B.font = "bold 12px Helvetica, Arial";
    B.lineHeight = "20px";
    B.width = "100%";
    p.appendChild(x[y]);
  }
  var A = function () {
      f = cc.director.getSecondsPerFrame();
      d++;
      g += cc.director.getDeltaTime();
      if (g > cc.DIRECTOR_FPS_INTERVAL) {
        e = d / g;
        g = d = 0;
        if (z.onFrameRateChange) {
          var b = e,
            h = s.length - 1,
            p = h,
            x = 0;
          t++;
          for (w += b; 0 <= p; p--)
            if (b >= s[p]) {
              u[p]++;
              break;
            }
          if (t >= r) {
            x = w / r;
            for (p = h; 0 < p; p--)
              if (((b = u[p] / r), 0.6 <= b && x >= s[p])) {
                p != v &&
                  ((v = p),
                  z.onFrameRateChange && z.onFrameRateChange(x.toFixed(2)));
                break;
              }
            w = t = _changeCount = 0;
            for (p = h; 0 < p; p--) u[p] = 0;
          }
        }
        a &&
          ((h =
            cc._renderType === cc.game.RENDER_TYPE_CANVAS
              ? "\n canvas"
              : "\n webgl"),
          (m.innerHTML = f.toFixed(3)),
          (k.innerHTML = e.toFixed(1).toString() + h),
          (n.innerHTML = (0 | cc.g_NumberOfDraws).toString()));
      }
    },
    z = {
      onFrameRateChange: null,
      getSecondsPerFrame: function () {
        return f;
      },
      getFrameRate: function () {
        return e;
      },
      setProfileDuration: function (a) {
        !isNaN(a) && 0 < a && (r = a / cc.DIRECTOR_FPS_INTERVAL);
      },
      resumeProfiling: function () {
        cc.eventManager.addListener(h, 1);
      },
      stopProfiling: function () {
        cc.eventManager.removeListener(h);
      },
      isShowingStats: function () {
        return a;
      },
      showStats: function () {
        b || this.init();
        null === p.parentElement && cc.container.appendChild(p);
        a = !0;
      },
      hideStats: function () {
        a = !1;
        p.parentElement === cc.container && cc.container.removeChild(p);
      },
      init: function () {
        b ||
          ((h = cc.eventManager.addCustomListener(
            cc.Director.EVENT_AFTER_VISIT,
            A
          )),
          (b = !0));
      },
    };
  return z;
})();
cc.math = cc.math || {};
cc.math.EPSILON = 0.015625;
cc.math.square = function (a) {
  return a * a;
};
cc.math.almostEqual = function (a, b) {
  return a + cc.math.EPSILON > b && a - cc.math.EPSILON < b;
};
(function (a) {
  a.math.Vec2 = function (a, b) {
    void 0 === b
      ? ((this.x = a.x), (this.y = a.y))
      : ((this.x = a || 0), (this.y = b || 0));
  };
  var b = a.math.Vec2.prototype;
  b.fill = function (a, b) {
    this.x = a;
    this.y = b;
  };
  b.length = function () {
    return Math.sqrt(a.math.square(this.x) + a.math.square(this.y));
  };
  b.lengthSq = function () {
    return a.math.square(this.x) + a.math.square(this.y);
  };
  b.normalize = function () {
    var a = 1 / this.length();
    this.x *= a;
    this.y *= a;
    return this;
  };
  a.math.Vec2.add = function (a, b, f) {
    a.x = b.x + f.x;
    a.y = b.y + f.y;
    return a;
  };
  b.add = function (a) {
    this.x += a.x;
    this.y += a.y;
    return this;
  };
  b.dot = function (a) {
    return this.x * a.x + this.y * a.y;
  };
  a.math.Vec2.subtract = function (a, b, f) {
    a.x = b.x - f.x;
    a.y = b.y - f.y;
    return a;
  };
  b.subtract = function (a) {
    this.x -= a.x;
    this.y -= a.y;
    return this;
  };
  b.transform = function (a) {
    var b = this.x,
      f = this.y;
    this.x = b * a.mat[0] + f * a.mat[3] + a.mat[6];
    this.y = b * a.mat[1] + f * a.mat[4] + a.mat[7];
    return this;
  };
  a.math.Vec2.scale = function (a, b, f) {
    a.x = b.x * f;
    a.y = b.y * f;
    return a;
  };
  b.scale = function (a) {
    this.x *= a;
    this.y *= a;
    return this;
  };
  b.equals = function (b) {
    return (
      this.x < b.x + a.math.EPSILON &&
      this.x > b.x - a.math.EPSILON &&
      this.y < b.y + a.math.EPSILON &&
      this.y > b.y - a.math.EPSILON
    );
  };
})(cc);
(function (a) {
  a.math.Vec3 = a.kmVec3 = function (a, b, f) {
    a && void 0 === b
      ? ((this.x = a.x), (this.y = a.y), (this.z = a.z))
      : ((this.x = a || 0), (this.y = b || 0), (this.z = f || 0));
  };
  a.math.vec3 = function (b, e, f) {
    return new a.math.Vec3(b, e, f);
  };
  var b = a.math.Vec3.prototype;
  b.fill = function (a, b, f) {
    a && void 0 === b
      ? ((this.x = a.x), (this.y = a.y), (this.z = a.z))
      : ((this.x = a), (this.y = b), (this.z = f));
    return this;
  };
  b.length = function () {
    return Math.sqrt(
      a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z)
    );
  };
  b.lengthSq = function () {
    return (
      a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z)
    );
  };
  b.normalize = function () {
    var a = 1 / this.length();
    this.x *= a;
    this.y *= a;
    this.z *= a;
    return this;
  };
  b.cross = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z;
    this.x = f * a.z - g * a.y;
    this.y = g * a.x - b * a.z;
    this.z = b * a.y - f * a.x;
    return this;
  };
  b.dot = function (a) {
    return this.x * a.x + this.y * a.y + this.z * a.z;
  };
  b.add = function (a) {
    this.x += a.x;
    this.y += a.y;
    this.z += a.z;
    return this;
  };
  b.subtract = function (a) {
    this.x -= a.x;
    this.y -= a.y;
    this.z -= a.z;
    return this;
  };
  b.transform = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z;
    a = a.mat;
    this.x = b * a[0] + f * a[4] + g * a[8] + a[12];
    this.y = b * a[1] + f * a[5] + g * a[9] + a[13];
    this.z = b * a[2] + f * a[6] + g * a[10] + a[14];
    return this;
  };
  b.transformNormal = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z;
    a = a.mat;
    this.x = b * a[0] + f * a[4] + g * a[8];
    this.y = b * a[1] + f * a[5] + g * a[9];
    this.z = b * a[2] + f * a[6] + g * a[10];
    return this;
  };
  b.transformCoord = function (b) {
    var e = new a.math.Vec4(this.x, this.y, this.z, 1);
    e.transform(b);
    this.x = e.x / e.w;
    this.y = e.y / e.w;
    this.z = e.z / e.w;
    return this;
  };
  b.scale = function (a) {
    this.x *= a;
    this.y *= a;
    this.z *= a;
    return this;
  };
  b.equals = function (b) {
    var e = a.math.EPSILON;
    return (
      this.x < b.x + e &&
      this.x > b.x - e &&
      this.y < b.y + e &&
      this.y > b.y - e &&
      this.z < b.z + e &&
      this.z > b.z - e
    );
  };
  b.inverseTransform = function (b) {
    b = b.mat;
    var e = new a.math.Vec3(this.x - b[12], this.y - b[13], this.z - b[14]);
    this.x = e.x * b[0] + e.y * b[1] + e.z * b[2];
    this.y = e.x * b[4] + e.y * b[5] + e.z * b[6];
    this.z = e.x * b[8] + e.y * b[9] + e.z * b[10];
    return this;
  };
  b.inverseTransformNormal = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z;
    a = a.mat;
    this.x = b * a[0] + f * a[1] + g * a[2];
    this.y = b * a[4] + f * a[5] + g * a[6];
    this.z = b * a[8] + f * a[9] + g * a[10];
    return this;
  };
  b.assignFrom = function (a) {
    if (!a) return this;
    this.x = a.x;
    this.y = a.y;
    this.z = a.z;
    return this;
  };
  a.math.Vec3.zero = function (a) {
    a.x = a.y = a.z = 0;
    return a;
  };
  b.toTypeArray = function () {
    var a = new Float32Array(3);
    a[0] = this.x;
    a[1] = this.y;
    a[2] = this.z;
    return a;
  };
})(cc);
(function (a) {
  a.math.Vec4 = function (a, b, f, g) {
    a && void 0 === b
      ? ((this.x = a.x), (this.y = a.y), (this.z = a.z), (this.w = a.w))
      : ((this.x = a || 0),
        (this.y = b || 0),
        (this.z = f || 0),
        (this.w = g || 0));
  };
  a.kmVec4 = a.math.Vec4;
  var b = a.math.Vec4.prototype;
  b.fill = function (a, b, f, g) {
    a && void 0 === b
      ? ((this.x = a.x), (this.y = a.y), (this.z = a.z), (this.w = a.w))
      : ((this.x = a), (this.y = b), (this.z = f), (this.w = g));
  };
  b.add = function (a) {
    if (!a) return this;
    this.x += a.x;
    this.y += a.y;
    this.z += a.z;
    this.w += a.w;
    return this;
  };
  b.dot = function (a) {
    return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w;
  };
  b.length = function () {
    return Math.sqrt(
      a.math.square(this.x) +
        a.math.square(this.y) +
        a.math.square(this.z) +
        a.math.square(this.w)
    );
  };
  b.lengthSq = function () {
    return (
      a.math.square(this.x) +
      a.math.square(this.y) +
      a.math.square(this.z) +
      a.math.square(this.w)
    );
  };
  b.lerp = function (a, b) {
    return this;
  };
  b.normalize = function () {
    var a = 1 / this.length();
    this.x *= a;
    this.y *= a;
    this.z *= a;
    this.w *= a;
    return this;
  };
  b.scale = function (a) {
    this.normalize();
    this.x *= a;
    this.y *= a;
    this.z *= a;
    this.w *= a;
    return this;
  };
  b.subtract = function (a) {
    this.x -= a.x;
    this.y -= a.y;
    this.z -= a.z;
    this.w -= a.w;
  };
  b.transform = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z,
      h = this.w;
    a = a.mat;
    this.x = b * a[0] + f * a[4] + g * a[8] + h * a[12];
    this.y = b * a[1] + f * a[5] + g * a[9] + h * a[13];
    this.z = b * a[2] + f * a[6] + g * a[10] + h * a[14];
    this.w = b * a[3] + f * a[7] + g * a[11] + h * a[15];
    return this;
  };
  a.math.Vec4.transformArray = function (b, e) {
    for (var f = [], g = 0; g < b.length; g++) {
      var h = new a.math.Vec4(b[g]);
      h.transform(e);
      f.push(h);
    }
    return f;
  };
  b.equals = function (b) {
    var e = a.math.EPSILON;
    return (
      this.x < b.x + e &&
      this.x > b.x - e &&
      this.y < b.y + e &&
      this.y > b.y - e &&
      this.z < b.z + e &&
      this.z > b.z - e &&
      this.w < b.w + e &&
      this.w > b.w - e
    );
  };
  b.assignFrom = function (a) {
    this.x = a.x;
    this.y = a.y;
    this.z = a.z;
    this.w = a.w;
    return this;
  };
  b.toTypeArray = function () {
    var a = new Float32Array(4);
    a[0] = this.x;
    a[1] = this.y;
    a[2] = this.z;
    a[3] = this.w;
    return a;
  };
})(cc);
(function (a) {
  function b(b, e, f) {
    e = new a.math.Vec2(e);
    e.subtract(b);
    f.x = -e.y;
    f.y = e.x;
    f.normalize();
  }
  a.math.Ray2 = function (b, e) {
    this.start = b || new a.math.Vec2();
    this.dir = e || new a.math.Vec2();
  };
  a.math.Ray2.prototype.fill = function (a, b, f, g) {
    this.start.x = a;
    this.start.y = b;
    this.dir.x = f;
    this.dir.y = g;
  };
  a.math.Ray2.prototype.intersectLineSegment = function (b, e, f) {
    var g = this.start.x,
      h = this.start.y,
      k = this.start.x + this.dir.x,
      m = this.start.y + this.dir.y,
      n = b.x,
      p = b.y,
      r = e.x,
      s = e.y,
      u = (s - p) * (k - g) - (r - n) * (m - h);
    if (u > -a.math.EPSILON && u < a.math.EPSILON) return !1;
    p = ((r - n) * (h - p) - (s - p) * (g - n)) / u;
    n = g + p * (k - g);
    p = h + p * (m - h);
    if (
      n < Math.min(b.x, e.x) - a.math.EPSILON ||
      n > Math.max(b.x, e.x) + a.math.EPSILON ||
      p < Math.min(b.y, e.y) - a.math.EPSILON ||
      p > Math.max(b.y, e.y) + a.math.EPSILON ||
      n < Math.min(g, k) - a.math.EPSILON ||
      n > Math.max(g, k) + a.math.EPSILON ||
      p < Math.min(h, m) - a.math.EPSILON ||
      p > Math.max(h, m) + a.math.EPSILON
    )
      return !1;
    f.x = n;
    f.y = p;
    return !0;
  };
  a.math.Ray2.prototype.intersectTriangle = function (d, e, f, g, h) {
    var k = new a.math.Vec2(),
      m = new a.math.Vec2(),
      n = new a.math.Vec2(),
      p = 1e4,
      r = !1,
      s;
    this.intersectLineSegment(d, e, k) &&
      ((r = !0),
      (s = k.subtract(this.start).length()),
      s < p && ((m.x = k.x), (m.y = k.y), (p = s), b(d, e, n)));
    this.intersectLineSegment(e, f, k) &&
      ((r = !0),
      (s = k.subtract(this.start).length()),
      s < p && ((m.x = k.x), (m.y = k.y), (p = s), b(e, f, n)));
    this.intersectLineSegment(f, d, k) &&
      ((r = !0),
      (s = k.subtract(this.start).length()),
      s < p && ((m.x = k.x), (m.y = k.y), b(f, d, n)));
    r && ((g.x = m.x), (g.y = m.y), h && ((h.x = n.x), (h.y = n.y)));
    return r;
  };
})(cc);
window.Uint16Array = window.Uint16Array || window.Array;
window.Float32Array = window.Float32Array || window.Array;
(function (a) {
  a.math.Matrix3 = function (a) {
    this.mat = a && a.mat ? new Float32Array(a.mat) : new Float32Array(9);
  };
  a.kmMat3 = a.math.Matrix3;
  var b = a.math.Matrix3.prototype;
  b.fill = function (a) {
    var b = this.mat;
    a = a.mat;
    b[0] = a[0];
    b[1] = a[1];
    b[2] = a[2];
    b[3] = a[3];
    b[4] = a[4];
    b[5] = a[5];
    b[6] = a[6];
    b[7] = a[7];
    b[8] = a[8];
    return this;
  };
  b.adjugate = function () {
    var a = this.mat,
      b = a[0],
      d = a[1],
      h = a[2],
      k = a[3],
      m = a[4],
      n = a[5],
      p = a[6],
      r = a[7],
      s = a[8];
    a[0] = m * s - n * r;
    a[1] = h * r - d * s;
    a[2] = d * n - h * m;
    a[3] = n * p - k * s;
    a[4] = b * s - h * p;
    a[5] = h * k - b * n;
    a[6] = k * r - m * p;
    a[8] = b * m - d * k;
    return this;
  };
  b.identity = function () {
    var a = this.mat;
    a[1] = a[2] = a[3] = a[5] = a[6] = a[7] = 0;
    a[0] = a[4] = a[8] = 1;
    return this;
  };
  var d = new a.math.Matrix3();
  b.inverse = function (a) {
    if (0 === a) return this;
    d.assignFrom(this);
    a = 1 / a;
    this.adjugate();
    this.multiplyScalar(a);
    return this;
  };
  b.isIdentity = function () {
    var a = this.mat;
    return (
      1 === a[0] &&
      0 === a[1] &&
      0 === a[2] &&
      0 === a[3] &&
      1 === a[4] &&
      0 === a[5] &&
      0 === a[6] &&
      0 === a[7] &&
      1 === a[8]
    );
  };
  b.transpose = function () {
    var a = this.mat,
      b = a[1],
      d = a[2],
      h = a[5],
      k = a[6],
      m = a[7];
    a[1] = a[3];
    a[2] = k;
    a[3] = b;
    a[5] = m;
    a[6] = d;
    a[7] = h;
    return this;
  };
  b.determinant = function () {
    var a = this.mat,
      b = a[0] * a[4] * a[8] + a[1] * a[5] * a[6] + a[2] * a[3] * a[7];
    return (b -= a[2] * a[4] * a[6] + a[0] * a[5] * a[7] + a[1] * a[3] * a[8]);
  };
  b.multiply = function (a) {
    var b = this.mat,
      d = a.mat;
    a = b[0];
    var h = b[1],
      k = b[2],
      m = b[3],
      n = b[4],
      p = b[5],
      r = b[6],
      s = b[7],
      u = b[8],
      v = d[0],
      t = d[1],
      w = d[2],
      x = d[3],
      y = d[4],
      B = d[5],
      A = d[6],
      z = d[7],
      d = d[8];
    b[0] = a * v + m * t + r * w;
    b[1] = h * v + n * t + s * w;
    b[2] = k * v + p * t + u * w;
    b[3] = k * v + p * t + u * w;
    b[4] = h * x + n * y + s * B;
    b[5] = k * x + p * y + u * B;
    b[6] = a * A + m * z + r * d;
    b[7] = h * A + n * z + s * d;
    b[8] = k * A + p * z + u * d;
    return this;
  };
  b.multiplyScalar = function (a) {
    var b = this.mat;
    b[0] *= a;
    b[1] *= a;
    b[2] *= a;
    b[3] *= a;
    b[4] *= a;
    b[5] *= a;
    b[6] *= a;
    b[7] *= a;
    b[8] *= a;
    return this;
  };
  a.math.Matrix3.rotationAxisAngle = function (b, d) {
    var g = Math.cos(d),
      h = Math.sin(d),
      k = new a.math.Matrix3(),
      m = k.mat;
    m[0] = g + b.x * b.x * (1 - g);
    m[1] = b.z * h + b.y * b.x * (1 - g);
    m[2] = -b.y * h + b.z * b.x * (1 - g);
    m[3] = -b.z * h + b.x * b.y * (1 - g);
    m[4] = g + b.y * b.y * (1 - g);
    m[5] = b.x * h + b.z * b.y * (1 - g);
    m[6] = b.y * h + b.x * b.z * (1 - g);
    m[7] = -b.x * h + b.y * b.z * (1 - g);
    m[8] = g + b.z * b.z * (1 - g);
    return k;
  };
  b.assignFrom = function (b) {
    if (this === b)
      return (
        a.log("cc.math.Matrix3.assign(): current matrix equals matIn"), this
      );
    var d = this.mat;
    b = b.mat;
    d[0] = b[0];
    d[1] = b[1];
    d[2] = b[2];
    d[3] = b[3];
    d[4] = b[4];
    d[5] = b[5];
    d[6] = b[6];
    d[7] = b[7];
    d[8] = b[8];
    return this;
  };
  b.equals = function (b) {
    if (this === b) return !0;
    var d = a.math.EPSILON,
      g = this.mat;
    b = b.mat;
    for (var h = 0; 9 > h; ++h)
      if (!(g[h] + d > b[h] && g[h] - d < b[h])) return !1;
    return !0;
  };
  a.math.Matrix3.createByRotationX = function (b) {
    var d = new a.math.Matrix3(),
      g = d.mat;
    g[0] = 1;
    g[1] = 0;
    g[2] = 0;
    g[3] = 0;
    g[4] = Math.cos(b);
    g[5] = Math.sin(b);
    g[6] = 0;
    g[7] = -Math.sin(b);
    g[8] = Math.cos(b);
    return d;
  };
  a.math.Matrix3.createByRotationY = function (b) {
    var d = new a.math.Matrix3(),
      g = d.mat;
    g[0] = Math.cos(b);
    g[1] = 0;
    g[2] = -Math.sin(b);
    g[3] = 0;
    g[4] = 1;
    g[5] = 0;
    g[6] = Math.sin(b);
    g[7] = 0;
    g[8] = Math.cos(b);
    return d;
  };
  a.math.Matrix3.createByRotationZ = function (b) {
    var d = new a.math.Matrix3(),
      g = d.mat;
    g[0] = Math.cos(b);
    g[1] = -Math.sin(b);
    g[2] = 0;
    g[3] = Math.sin(b);
    g[4] = Math.cos(b);
    g[5] = 0;
    g[6] = 0;
    g[7] = 0;
    g[8] = 1;
    return d;
  };
  a.math.Matrix3.createByRotation = function (b) {
    var d = new a.math.Matrix3(),
      g = d.mat;
    g[0] = Math.cos(b);
    g[1] = Math.sin(b);
    g[2] = 0;
    g[3] = -Math.sin(b);
    g[4] = Math.cos(b);
    g[5] = 0;
    g[6] = 0;
    g[7] = 0;
    g[8] = 1;
    return d;
  };
  a.math.Matrix3.createByScale = function (b, d) {
    var g = new a.math.Matrix3();
    g.identity();
    g.mat[0] = b;
    g.mat[4] = d;
    return g;
  };
  a.math.Matrix3.createByTranslation = function (b, d) {
    var g = new a.math.Matrix3();
    g.identity();
    g.mat[6] = b;
    g.mat[7] = d;
    return g;
  };
  a.math.Matrix3.createByQuaternion = function (b) {
    if (!b) return null;
    var d = new a.math.Matrix3(),
      g = d.mat;
    g[0] = 1 - 2 * (b.y * b.y + b.z * b.z);
    g[1] = 2 * (b.x * b.y - b.w * b.z);
    g[2] = 2 * (b.x * b.z + b.w * b.y);
    g[3] = 2 * (b.x * b.y + b.w * b.z);
    g[4] = 1 - 2 * (b.x * b.x + b.z * b.z);
    g[5] = 2 * (b.y * b.z - b.w * b.x);
    g[6] = 2 * (b.x * b.z - b.w * b.y);
    g[7] = 2 * (b.y * b.z + b.w * b.x);
    g[8] = 1 - 2 * (b.x * b.x + b.y * b.y);
    return d;
  };
  b.rotationToAxisAngle = function () {
    return a.math.Quaternion.rotationMatrix(this).toAxisAndAngle();
  };
})(cc);
(function (a) {
  a.math.Matrix4 = function (a) {
    this.mat = a && a.mat ? new Float32Array(a.mat) : new Float32Array(16);
  };
  a.kmMat4 = a.math.Matrix4;
  var b = a.math.Matrix4.prototype;
  b.fill = function (a) {
    for (var b = this.mat, d = 0; 16 > d; d++) b[d] = a[d];
    return this;
  };
  a.kmMat4Identity = function (a) {
    var b = a.mat;
    b[1] = b[2] = b[3] = b[4] = b[6] = b[7] = b[8] = b[9] = b[11] = b[12] = b[13] = b[14] = 0;
    b[0] = b[5] = b[10] = b[15] = 1;
    return a;
  };
  b.identity = function () {
    var a = this.mat;
    a[1] = a[2] = a[3] = a[4] = a[6] = a[7] = a[8] = a[9] = a[11] = a[12] = a[13] = a[14] = 0;
    a[0] = a[5] = a[10] = a[15] = 1;
    return this;
  };
  b.get = function (a, b) {
    return this.mat[a + 4 * b];
  };
  b.set = function (a, b, d) {
    this.mat[a + 4 * b] = d;
  };
  b.swap = function (a, b, d, e) {
    var m = this.mat,
      n = m[a + 4 * b];
    m[a + 4 * b] = m[d + 4 * e];
    m[d + 4 * e] = n;
  };
  a.math.Matrix4._gaussj = function (a, b) {
    var d,
      e = 0,
      m = 0,
      n,
      p,
      r,
      s,
      u = [0, 0, 0, 0],
      v = [0, 0, 0, 0],
      t = [0, 0, 0, 0];
    for (d = 0; 4 > d; d++) {
      for (n = s = 0; 4 > n; n++)
        if (1 !== t[n])
          for (p = 0; 4 > p; p++)
            0 === t[p] &&
              ((r = Math.abs(a.get(n, p))),
              r >= s && ((s = r), (m = n), (e = p)));
      ++t[e];
      if (m !== e) {
        for (n = 0; 4 > n; n++) a.swap(m, n, e, n);
        for (n = 0; 4 > n; n++) b.swap(m, n, e, n);
      }
      v[d] = m;
      u[d] = e;
      if (0 === a.get(e, e)) return !1;
      p = 1 / a.get(e, e);
      a.set(e, e, 1);
      for (n = 0; 4 > n; n++) a.set(e, n, a.get(e, n) * p);
      for (n = 0; 4 > n; n++) b.set(e, n, b.get(e, n) * p);
      for (p = 0; 4 > p; p++)
        if (p !== e) {
          r = a.get(p, e);
          a.set(p, e, 0);
          for (n = 0; 4 > n; n++) a.set(p, n, a.get(p, n) - a.get(e, n) * r);
          for (n = 0; 4 > n; n++) b.set(p, n, a.get(p, n) - b.get(e, n) * r);
        }
    }
    for (n = 3; 0 <= n; n--)
      if (v[n] !== u[n]) for (p = 0; 4 > p; p++) a.swap(p, v[n], p, u[n]);
    return !0;
  };
  var d = new a.math.Matrix4().identity();
  a.kmMat4Inverse = function (b, e) {
    var h = new a.math.Matrix4(e),
      k = new a.math.Matrix4(d);
    if (!1 === a.math.Matrix4._gaussj(h, k)) return null;
    b.assignFrom(h);
    return b;
  };
  b.inverse = function () {
    var b = new a.math.Matrix4(this),
      e = new a.math.Matrix4(d);
    return !1 === a.math.Matrix4._gaussj(b, e) ? null : b;
  };
  b.isIdentity = function () {
    var a = this.mat;
    return (
      1 === a[0] &&
      0 === a[1] &&
      0 === a[2] &&
      0 === a[3] &&
      0 === a[4] &&
      1 === a[5] &&
      0 === a[6] &&
      0 === a[7] &&
      0 === a[8] &&
      0 === a[9] &&
      1 === a[10] &&
      0 === a[11] &&
      0 === a[12] &&
      0 === a[13] &&
      0 === a[14] &&
      1 === a[15]
    );
  };
  b.transpose = function () {
    var a = this.mat,
      b = a[1],
      d = a[2],
      e = a[3],
      m = a[6],
      n = a[7],
      p = a[8],
      r = a[9],
      s = a[11],
      u = a[12],
      v = a[13],
      t = a[14];
    a[1] = a[4];
    a[2] = p;
    a[3] = u;
    a[4] = b;
    a[6] = r;
    a[7] = v;
    a[8] = d;
    a[9] = m;
    a[11] = t;
    a[12] = e;
    a[13] = n;
    a[14] = s;
    return this;
  };
  a.kmMat4Multiply = function (a, b, d) {
    var e = a.mat,
      m = b.mat,
      n = d.mat;
    d = m[0];
    b = m[1];
    var p = m[2],
      r = m[3],
      s = m[4],
      u = m[5],
      v = m[6],
      t = m[7],
      w = m[8],
      x = m[9],
      y = m[10],
      B = m[11],
      A = m[12],
      z = m[13],
      C = m[14],
      m = m[15],
      D = n[0],
      E = n[1],
      J = n[2],
      G = n[3],
      F = n[4],
      L = n[5],
      H = n[6],
      I = n[7],
      M = n[8],
      K = n[9],
      N = n[10],
      O = n[11],
      P = n[12],
      R = n[13],
      Q = n[14],
      n = n[15];
    e[0] = D * d + E * s + J * w + G * A;
    e[1] = D * b + E * u + J * x + G * z;
    e[2] = D * p + E * v + J * y + G * C;
    e[3] = D * r + E * t + J * B + G * m;
    e[4] = F * d + L * s + H * w + I * A;
    e[5] = F * b + L * u + H * x + I * z;
    e[6] = F * p + L * v + H * y + I * C;
    e[7] = F * r + L * t + H * B + I * m;
    e[8] = M * d + K * s + N * w + O * A;
    e[9] = M * b + K * u + N * x + O * z;
    e[10] = M * p + K * v + N * y + O * C;
    e[11] = M * r + K * t + N * B + O * m;
    e[12] = P * d + R * s + Q * w + n * A;
    e[13] = P * b + R * u + Q * x + n * z;
    e[14] = P * p + R * v + Q * y + n * C;
    e[15] = P * r + R * t + Q * B + n * m;
    return a;
  };
  b.multiply = function (a) {
    var b = this.mat,
      d = a.mat;
    a = b[0];
    var e = b[1],
      m = b[2],
      n = b[3],
      p = b[4],
      r = b[5],
      s = b[6],
      u = b[7],
      v = b[8],
      t = b[9],
      w = b[10],
      x = b[11],
      y = b[12],
      B = b[13],
      A = b[14],
      z = b[15],
      C = d[0],
      D = d[1],
      E = d[2],
      J = d[3],
      G = d[4],
      F = d[5],
      L = d[6],
      H = d[7],
      I = d[8],
      M = d[9],
      K = d[10],
      N = d[11],
      O = d[12],
      P = d[13],
      R = d[14],
      d = d[15];
    b[0] = C * a + D * p + E * v + J * y;
    b[1] = C * e + D * r + E * t + J * B;
    b[2] = C * m + D * s + E * w + J * A;
    b[3] = C * n + D * u + E * x + J * z;
    b[4] = G * a + F * p + L * v + H * y;
    b[5] = G * e + F * r + L * t + H * B;
    b[6] = G * m + F * s + L * w + H * A;
    b[7] = G * n + F * u + L * x + H * z;
    b[8] = I * a + M * p + K * v + N * y;
    b[9] = I * e + M * r + K * t + N * B;
    b[10] = I * m + M * s + K * w + N * A;
    b[11] = I * n + M * u + K * x + N * z;
    b[12] = O * a + P * p + R * v + d * y;
    b[13] = O * e + P * r + R * t + d * B;
    b[14] = O * m + P * s + R * w + d * A;
    b[15] = O * n + P * u + R * x + d * z;
    return this;
  };
  a.getMat4MultiplyValue = function (a, b) {
    var d = a.mat,
      e = b.mat,
      m = new Float32Array(16);
    m[0] = d[0] * e[0] + d[4] * e[1] + d[8] * e[2] + d[12] * e[3];
    m[1] = d[1] * e[0] + d[5] * e[1] + d[9] * e[2] + d[13] * e[3];
    m[2] = d[2] * e[0] + d[6] * e[1] + d[10] * e[2] + d[14] * e[3];
    m[3] = d[3] * e[0] + d[7] * e[1] + d[11] * e[2] + d[15] * e[3];
    m[4] = d[0] * e[4] + d[4] * e[5] + d[8] * e[6] + d[12] * e[7];
    m[5] = d[1] * e[4] + d[5] * e[5] + d[9] * e[6] + d[13] * e[7];
    m[6] = d[2] * e[4] + d[6] * e[5] + d[10] * e[6] + d[14] * e[7];
    m[7] = d[3] * e[4] + d[7] * e[5] + d[11] * e[6] + d[15] * e[7];
    m[8] = d[0] * e[8] + d[4] * e[9] + d[8] * e[10] + d[12] * e[11];
    m[9] = d[1] * e[8] + d[5] * e[9] + d[9] * e[10] + d[13] * e[11];
    m[10] = d[2] * e[8] + d[6] * e[9] + d[10] * e[10] + d[14] * e[11];
    m[11] = d[3] * e[8] + d[7] * e[9] + d[11] * e[10] + d[15] * e[11];
    m[12] = d[0] * e[12] + d[4] * e[13] + d[8] * e[14] + d[12] * e[15];
    m[13] = d[1] * e[12] + d[5] * e[13] + d[9] * e[14] + d[13] * e[15];
    m[14] = d[2] * e[12] + d[6] * e[13] + d[10] * e[14] + d[14] * e[15];
    m[15] = d[3] * e[12] + d[7] * e[13] + d[11] * e[14] + d[15] * e[15];
    return m;
  };
  a.kmMat4Assign = function (b, d) {
    if (b === d) return a.log("cc.kmMat4Assign(): pOut equals pIn"), b;
    var e = b.mat,
      k = d.mat;
    e[0] = k[0];
    e[1] = k[1];
    e[2] = k[2];
    e[3] = k[3];
    e[4] = k[4];
    e[5] = k[5];
    e[6] = k[6];
    e[7] = k[7];
    e[8] = k[8];
    e[9] = k[9];
    e[10] = k[10];
    e[11] = k[11];
    e[12] = k[12];
    e[13] = k[13];
    e[14] = k[14];
    e[15] = k[15];
    return b;
  };
  b.assignFrom = function (b) {
    if (this === b)
      return (
        a.log("cc.mat.Matrix4.assignFrom(): mat4 equals current matrix"), this
      );
    var d = this.mat;
    b = b.mat;
    d[0] = b[0];
    d[1] = b[1];
    d[2] = b[2];
    d[3] = b[3];
    d[4] = b[4];
    d[5] = b[5];
    d[6] = b[6];
    d[7] = b[7];
    d[8] = b[8];
    d[9] = b[9];
    d[10] = b[10];
    d[11] = b[11];
    d[12] = b[12];
    d[13] = b[13];
    d[14] = b[14];
    d[15] = b[15];
    return this;
  };
  b.equals = function (b) {
    if (this === b)
      return a.log("cc.kmMat4AreEqual(): pMat1 and pMat2 are same object."), !0;
    var d = this.mat;
    b = b.mat;
    for (var e = a.math.EPSILON, k = 0; 16 > k; k++)
      if (!(d[k] + e > b[k] && d[k] - e < b[k])) return !1;
    return !0;
  };
  a.math.Matrix4.createByRotationX = function (b, d) {
    d = d || new a.math.Matrix4();
    var e = d.mat;
    e[0] = 1;
    e[3] = e[2] = e[1] = 0;
    e[4] = 0;
    e[5] = Math.cos(b);
    e[6] = Math.sin(b);
    e[7] = 0;
    e[8] = 0;
    e[9] = -Math.sin(b);
    e[10] = Math.cos(b);
    e[11] = 0;
    e[14] = e[13] = e[12] = 0;
    e[15] = 1;
    return d;
  };
  a.math.Matrix4.createByRotationY = function (b, d) {
    d = d || new a.math.Matrix4();
    var e = d.mat;
    e[0] = Math.cos(b);
    e[1] = 0;
    e[2] = -Math.sin(b);
    e[3] = 0;
    e[7] = e[6] = e[4] = 0;
    e[5] = 1;
    e[8] = Math.sin(b);
    e[9] = 0;
    e[10] = Math.cos(b);
    e[11] = 0;
    e[14] = e[13] = e[12] = 0;
    e[15] = 1;
    return d;
  };
  a.math.Matrix4.createByRotationZ = function (b, d) {
    d = d || new a.math.Matrix4();
    var e = d.mat;
    e[0] = Math.cos(b);
    e[1] = Math.sin(b);
    e[3] = e[2] = 0;
    e[4] = -Math.sin(b);
    e[5] = Math.cos(b);
    e[7] = e[6] = 0;
    e[11] = e[9] = e[8] = 0;
    e[10] = 1;
    e[14] = e[13] = e[12] = 0;
    e[15] = 1;
    return d;
  };
  a.math.Matrix4.createByPitchYawRoll = function (b, d, e, k) {
    k = k || new a.math.Matrix4();
    var m = Math.cos(b);
    b = Math.sin(b);
    var n = Math.cos(d);
    d = Math.sin(d);
    var p = Math.cos(e);
    e = Math.sin(e);
    var r = b * d,
      s = m * d,
      u = k.mat;
    u[0] = n * p;
    u[4] = n * e;
    u[8] = -d;
    u[1] = r * p - m * e;
    u[5] = r * e + m * p;
    u[9] = b * n;
    u[2] = s * p + b * e;
    u[6] = s * e - b * p;
    u[10] = m * n;
    u[3] = u[7] = u[11] = 0;
    u[15] = 1;
    return k;
  };
  a.math.Matrix4.createByQuaternion = function (b, d) {
    d = d || new a.math.Matrix4();
    var e = d.mat;
    e[0] = 1 - 2 * (b.y * b.y + b.z * b.z);
    e[1] = 2 * (b.x * b.y + b.z * b.w);
    e[2] = 2 * (b.x * b.z - b.y * b.w);
    e[3] = 0;
    e[4] = 2 * (b.x * b.y - b.z * b.w);
    e[5] = 1 - 2 * (b.x * b.x + b.z * b.z);
    e[6] = 2 * (b.z * b.y + b.x * b.w);
    e[7] = 0;
    e[8] = 2 * (b.x * b.z + b.y * b.w);
    e[9] = 2 * (b.y * b.z - b.x * b.w);
    e[10] = 1 - 2 * (b.x * b.x + b.y * b.y);
    e[11] = 0;
    e[14] = e[13] = e[12] = 0;
    e[15] = 1;
    return d;
  };
  a.math.Matrix4.createByRotationTranslation = function (b, d, e) {
    e = e || new a.math.Matrix4();
    var k = e.mat;
    b = b.mat;
    k[0] = b[0];
    k[1] = b[1];
    k[2] = b[2];
    k[3] = 0;
    k[4] = b[3];
    k[5] = b[4];
    k[6] = b[5];
    k[7] = 0;
    k[8] = b[6];
    k[9] = b[7];
    k[10] = b[8];
    k[11] = 0;
    k[12] = d.x;
    k[13] = d.y;
    k[14] = d.z;
    k[15] = 1;
    return e;
  };
  a.math.Matrix4.createByScale = function (b, d, e, k) {
    k = k || new a.math.Matrix4();
    var m = k.mat;
    m[0] = b;
    m[5] = d;
    m[10] = e;
    m[15] = 1;
    m[1] = m[2] = m[3] = m[4] = m[6] = m[7] = m[8] = m[9] = m[11] = m[12] = m[13] = m[14] = 0;
    return k;
  };
  a.kmMat4Translation = function (a, b, d, e) {
    a.mat[0] = a.mat[5] = a.mat[10] = a.mat[15] = 1;
    a.mat[1] = a.mat[2] = a.mat[3] = a.mat[4] = a.mat[6] = a.mat[7] = a.mat[8] = a.mat[9] = a.mat[11] = 0;
    a.mat[12] = b;
    a.mat[13] = d;
    a.mat[14] = e;
    return a;
  };
  a.math.Matrix4.createByTranslation = function (b, d, e, k) {
    k = k || new a.math.Matrix4();
    k.identity();
    k.mat[12] = b;
    k.mat[13] = d;
    k.mat[14] = e;
    return k;
  };
  b.getUpVec3 = function () {
    var b = this.mat;
    return new a.math.Vec3(b[4], b[5], b[6]).normalize();
  };
  b.getRightVec3 = function () {
    var b = this.mat;
    return new a.math.Vec3(b[0], b[1], b[2]).normalize();
  };
  b.getForwardVec3 = function () {
    var b = this.mat;
    return new a.math.Vec3(b[8], b[9], b[10]).normalize();
  };
  a.kmMat4PerspectiveProjection = function (b, d, e, k, m) {
    var n = a.degreesToRadians(d / 2);
    d = m - k;
    var p = Math.sin(n);
    if (0 === d || 0 === p || 0 === e) return null;
    n = Math.cos(n) / p;
    b.identity();
    b.mat[0] = n / e;
    b.mat[5] = n;
    b.mat[10] = -(m + k) / d;
    b.mat[11] = -1;
    b.mat[14] = (-2 * k * m) / d;
    b.mat[15] = 0;
    return b;
  };
  a.math.Matrix4.createPerspectiveProjection = function (b, d, e, k) {
    var m = a.degreesToRadians(b / 2);
    b = k - e;
    var n = Math.sin(m);
    if (0 === b || 0 === n || 0 === d) return null;
    var m = Math.cos(m) / n,
      n = new a.math.Matrix4(),
      p = n.mat;
    n.identity();
    p[0] = m / d;
    p[5] = m;
    p[10] = -(k + e) / b;
    p[11] = -1;
    p[14] = (-2 * e * k) / b;
    p[15] = 0;
    return n;
  };
  a.kmMat4OrthographicProjection = function (a, b, d, e, m, n, p) {
    a.identity();
    a.mat[0] = 2 / (d - b);
    a.mat[5] = 2 / (m - e);
    a.mat[10] = -2 / (p - n);
    a.mat[12] = -((d + b) / (d - b));
    a.mat[13] = -((m + e) / (m - e));
    a.mat[14] = -((p + n) / (p - n));
    return a;
  };
  a.math.Matrix4.createOrthographicProjection = function (b, d, e, k, m, n) {
    var p = new a.math.Matrix4(),
      r = p.mat;
    p.identity();
    r[0] = 2 / (d - b);
    r[5] = 2 / (k - e);
    r[10] = -2 / (n - m);
    r[12] = -((d + b) / (d - b));
    r[13] = -((k + e) / (k - e));
    r[14] = -((n + m) / (n - m));
    return p;
  };
  a.kmMat4LookAt = function (b, d, e, k) {
    e = new a.math.Vec3(e);
    var m = new a.math.Vec3(k);
    e.subtract(d);
    e.normalize();
    m.normalize();
    k = new a.math.Vec3(e);
    k.cross(m);
    k.normalize();
    m = new a.math.Vec3(k);
    m.cross(e);
    k.normalize();
    b.identity();
    b.mat[0] = k.x;
    b.mat[4] = k.y;
    b.mat[8] = k.z;
    b.mat[1] = m.x;
    b.mat[5] = m.y;
    b.mat[9] = m.z;
    b.mat[2] = -e.x;
    b.mat[6] = -e.y;
    b.mat[10] = -e.z;
    d = a.math.Matrix4.createByTranslation(-d.x, -d.y, -d.z);
    b.multiply(d);
    return b;
  };
  var e = new a.math.Matrix4();
  b.lookAt = function (b, d, h) {
    d = new a.math.Vec3(d);
    var k = new a.math.Vec3(h);
    h = this.mat;
    d.subtract(b);
    d.normalize();
    k.normalize();
    var m = new a.math.Vec3(d);
    m.cross(k);
    m.normalize();
    k = new a.math.Vec3(m);
    k.cross(d);
    m.normalize();
    this.identity();
    h[0] = m.x;
    h[4] = m.y;
    h[8] = m.z;
    h[1] = k.x;
    h[5] = k.y;
    h[9] = k.z;
    h[2] = -d.x;
    h[6] = -d.y;
    h[10] = -d.z;
    e = a.math.Matrix4.createByTranslation(-b.x, -b.y, -b.z, e);
    this.multiply(e);
    return this;
  };
  a.kmMat4RotationAxisAngle = function (b, d, e) {
    var k = Math.cos(e);
    e = Math.sin(e);
    d = new a.math.Vec3(d);
    d.normalize();
    b.mat[0] = k + d.x * d.x * (1 - k);
    b.mat[1] = d.z * e + d.y * d.x * (1 - k);
    b.mat[2] = -d.y * e + d.z * d.x * (1 - k);
    b.mat[3] = 0;
    b.mat[4] = -d.z * e + d.x * d.y * (1 - k);
    b.mat[5] = k + d.y * d.y * (1 - k);
    b.mat[6] = d.x * e + d.z * d.y * (1 - k);
    b.mat[7] = 0;
    b.mat[8] = d.y * e + d.x * d.z * (1 - k);
    b.mat[9] = -d.x * e + d.y * d.z * (1 - k);
    b.mat[10] = k + d.z * d.z * (1 - k);
    b.mat[11] = 0;
    b.mat[12] = 0;
    b.mat[13] = 0;
    b.mat[14] = 0;
    b.mat[15] = 1;
    return b;
  };
  a.math.Matrix4.createByAxisAndAngle = function (b, d, e) {
    e = e || new a.math.Matrix4();
    var k = this.mat,
      m = Math.cos(d);
    d = Math.sin(d);
    b = new a.math.Vec3(b);
    b.normalize();
    k[0] = m + b.x * b.x * (1 - m);
    k[1] = b.z * d + b.y * b.x * (1 - m);
    k[2] = -b.y * d + b.z * b.x * (1 - m);
    k[3] = 0;
    k[4] = -b.z * d + b.x * b.y * (1 - m);
    k[5] = m + b.y * b.y * (1 - m);
    k[6] = b.x * d + b.z * b.y * (1 - m);
    k[7] = 0;
    k[8] = b.y * d + b.x * b.z * (1 - m);
    k[9] = -b.x * d + b.y * b.z * (1 - m);
    k[10] = m + b.z * b.z * (1 - m);
    k[11] = 0;
    k[12] = k[13] = k[14] = 0;
    k[15] = 1;
    return e;
  };
  b.extractRotation = function () {
    var b = new a.math.Matrix3(),
      d = this.mat,
      e = b.mat;
    e[0] = d[0];
    e[1] = d[1];
    e[2] = d[2];
    e[3] = d[4];
    e[4] = d[5];
    e[5] = d[6];
    e[6] = d[8];
    e[7] = d[9];
    e[8] = d[10];
    return b;
  };
  b.extractPlane = function (b) {
    var d = new a.math.Plane(),
      e = this.mat;
    switch (b) {
      case a.math.Plane.RIGHT:
        d.a = e[3] - e[0];
        d.b = e[7] - e[4];
        d.c = e[11] - e[8];
        d.d = e[15] - e[12];
        break;
      case a.math.Plane.LEFT:
        d.a = e[3] + e[0];
        d.b = e[7] + e[4];
        d.c = e[11] + e[8];
        d.d = e[15] + e[12];
        break;
      case a.math.Plane.BOTTOM:
        d.a = e[3] + e[1];
        d.b = e[7] + e[5];
        d.c = e[11] + e[9];
        d.d = e[15] + e[13];
        break;
      case a.math.Plane.TOP:
        d.a = e[3] - e[1];
        d.b = e[7] - e[5];
        d.c = e[11] - e[9];
        d.d = e[15] - e[13];
        break;
      case a.math.Plane.FAR:
        d.a = e[3] - e[2];
        d.b = e[7] - e[6];
        d.c = e[11] - e[10];
        d.d = e[15] - e[14];
        break;
      case a.math.Plane.NEAR:
        d.a = e[3] + e[2];
        d.b = e[7] + e[6];
        d.c = e[11] + e[10];
        d.d = e[15] + e[14];
        break;
      default:
        a.log("cc.math.Matrix4.extractPlane: Invalid plane index");
    }
    b = Math.sqrt(d.a * d.a + d.b * d.b + d.c * d.c);
    d.a /= b;
    d.b /= b;
    d.c /= b;
    d.d /= b;
    return d;
  };
  b.toAxisAndAngle = function () {
    var b = this.extractRotation();
    return a.math.Quaternion.rotationMatrix(b).toAxisAndAngle();
  };
})(cc);
(function (a) {
  a.math.Plane = function (a, b, f, g) {
    a && void 0 === b
      ? ((this.a = a.a), (this.b = a.b), (this.c = a.c), (this.d = a.d))
      : ((this.a = a || 0),
        (this.b = b || 0),
        (this.c = f || 0),
        (this.d = g || 0));
  };
  a.kmPlane = a.math.Plane;
  var b = a.math.Plane.prototype;
  a.math.Plane.LEFT = 0;
  a.math.Plane.RIGHT = 1;
  a.math.Plane.BOTTOM = 2;
  a.math.Plane.TOP = 3;
  a.math.Plane.NEAR = 4;
  a.math.Plane.FAR = 5;
  a.math.Plane.POINT_INFRONT_OF_PLANE = 0;
  a.math.Plane.POINT_BEHIND_PLANE = 1;
  a.math.Plane.POINT_ON_PLANE = 2;
  b.dot = function (a) {
    return this.a * a.x + this.b * a.y + this.c * a.z + this.d * a.w;
  };
  b.dotCoord = function (a) {
    return this.a * a.x + this.b * a.y + this.c * a.z + this.d;
  };
  b.dotNormal = function (a) {
    return this.a * a.x + this.b * a.y + this.c * a.z;
  };
  a.math.Plane.fromPointNormal = function (b, e) {
    return new a.math.Plane(e.x, e.y, e.z, -e.dot(b));
  };
  a.math.Plane.fromPoints = function (b, e, f) {
    e = new a.math.Vec3(e);
    f = new a.math.Vec3(f);
    var g = new a.math.Plane();
    e.subtract(b);
    f.subtract(b);
    e.cross(f);
    e.normalize();
    g.a = e.x;
    g.b = e.y;
    g.c = e.z;
    g.d = e.scale(-1).dot(b);
    return g;
  };
  b.normalize = function () {
    var b = new a.math.Vec3(this.a, this.b, this.c),
      e = 1 / b.length();
    b.normalize();
    this.a = b.x;
    this.b = b.y;
    this.c = b.z;
    this.d *= e;
    return this;
  };
  b.classifyPoint = function (b) {
    b = this.a * b.x + this.b * b.y + this.c * b.z + this.d;
    return 0.001 < b
      ? a.math.Plane.POINT_INFRONT_OF_PLANE
      : -0.001 > b
      ? a.math.Plane.POINT_BEHIND_PLANE
      : a.math.Plane.POINT_ON_PLANE;
  };
})(cc);
(function (a) {
  a.math.Quaternion = function (a, b, f, g) {
    a && void 0 === b
      ? ((this.x = a.x), (this.y = a.y), (this.z = a.z), (this.w = a.w))
      : ((this.x = a || 0),
        (this.y = b || 0),
        (this.z = f || 0),
        (this.w = g || 0));
  };
  a.kmQuaternion = a.math.Quaternion;
  var b = a.math.Quaternion.prototype;
  b.conjugate = function (a) {
    this.x = -a.x;
    this.y = -a.y;
    this.z = -a.z;
    this.w = a.w;
    return this;
  };
  b.dot = function (a) {
    return this.w * a.w + this.x * a.x + this.y * a.y + this.z * a.z;
  };
  b.exponential = function () {
    return this;
  };
  b.identity = function () {
    this.z = this.y = this.x = 0;
    this.w = 1;
    return this;
  };
  b.inverse = function () {
    var b = this.length();
    if (Math.abs(b) > a.math.EPSILON)
      return (this.w = this.z = this.y = this.x = 0), this;
    this.conjugate(this).scale(1 / b);
    return this;
  };
  b.isIdentity = function () {
    return 0 === this.x && 0 === this.y && 0 === this.z && 1 === this.w;
  };
  b.length = function () {
    return Math.sqrt(this.lengthSq());
  };
  b.lengthSq = function () {
    return (
      this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
    );
  };
  b.multiply = function (a) {
    var b = this.x,
      f = this.y,
      g = this.z,
      h = this.w;
    this.w = h * a.w - b * a.x - f * a.y - g * a.z;
    this.x = h * a.x + b * a.w + f * a.z - g * a.y;
    this.y = h * a.y + f * a.w + g * a.x - b * a.z;
    this.z = h * a.z + g * a.w + b * a.y - f * a.x;
    return this;
  };
  b.normalize = function () {
    var b = this.length();
    if (Math.abs(b) <= a.math.EPSILON)
      throw Error("current quaternion is an invalid value");
    this.scale(1 / b);
    return this;
  };
  b.rotationAxis = function (a, b) {
    var f = 0.5 * b,
      g = Math.sin(f);
    this.w = Math.cos(f);
    this.x = a.x * g;
    this.y = a.y * g;
    this.z = a.z * g;
    return this;
  };
  a.math.Quaternion.rotationMatrix = function (b) {
    if (!b) return null;
    var e, f, g;
    e = [];
    f = b.mat;
    b = 0;
    e[0] = f[0];
    e[1] = f[3];
    e[2] = f[6];
    e[4] = f[1];
    e[5] = f[4];
    e[6] = f[7];
    e[8] = f[2];
    e[9] = f[5];
    e[10] = f[8];
    e[15] = 1;
    var h = e[0];
    b = h[0] + h[5] + h[10] + 1;
    b > a.math.EPSILON
      ? ((b = 2 * Math.sqrt(b)),
        (e = (h[9] - h[6]) / b),
        (f = (h[2] - h[8]) / b),
        (g = (h[4] - h[1]) / b),
        (b *= 0.25))
      : h[0] > h[5] && h[0] > h[10]
      ? ((b = 2 * Math.sqrt(1 + h[0] - h[5] - h[10])),
        (e = 0.25 * b),
        (f = (h[4] + h[1]) / b),
        (g = (h[2] + h[8]) / b),
        (b = (h[9] - h[6]) / b))
      : h[5] > h[10]
      ? ((b = 2 * Math.sqrt(1 + h[5] - h[0] - h[10])),
        (e = (h[4] + h[1]) / b),
        (f = 0.25 * b),
        (g = (h[9] + h[6]) / b),
        (b = (h[2] - h[8]) / b))
      : ((b = 2 * Math.sqrt(1 + h[10] - h[0] - h[5])),
        (e = (h[2] + h[8]) / b),
        (f = (h[9] + h[6]) / b),
        (g = 0.25 * b),
        (b = (h[4] - h[1]) / b));
    return new a.math.Quaternion(e, f, g, b);
  };
  a.math.Quaternion.rotationYawPitchRoll = function (b, e, f) {
    var g, h, k, m, n;
    g = a.degreesToRadians(e) / 2;
    h = a.degreesToRadians(b) / 2;
    k = a.degreesToRadians(f) / 2;
    f = Math.cos(g);
    b = Math.cos(h);
    e = Math.cos(k);
    g = Math.sin(g);
    h = Math.sin(h);
    k = Math.sin(k);
    m = b * e;
    n = h * k;
    var p = new a.math.Quaternion();
    p.w = f * m + g * n;
    p.x = g * m - f * n;
    p.y = f * h * e + g * b * k;
    p.z = f * b * k - g * h * e;
    p.normalize();
    return p;
  };
  b.slerp = function (b, e) {
    if (this.x === b.x && this.y === b.y && this.z === b.z && this.w === b.w)
      return this;
    var f = this.dot(b),
      g = Math.acos(f),
      h = Math.sqrt(1 - a.math.square(f)),
      f = Math.sin(e * g) / h,
      g = Math.sin((1 - e) * g) / h,
      h = new a.math.Quaternion(b);
    this.scale(g);
    h.scale(f);
    this.add(h);
    return this;
  };
  b.toAxisAndAngle = function () {
    var b,
      e,
      f = new a.math.Vec3();
    b = Math.acos(this.w);
    e = Math.sqrt(
      a.math.square(this.x) + a.math.square(this.y) + a.math.square(this.z)
    );
    (e > -a.math.EPSILON && e < a.math.EPSILON) ||
    (e < 2 * Math.PI + a.math.EPSILON && e > 2 * Math.PI - a.math.EPSILON)
      ? ((b = 0), (f.x = 0), (f.y = 0), (f.z = 1))
      : ((b *= 2),
        (f.x = this.x / e),
        (f.y = this.y / e),
        (f.z = this.z / e),
        f.normalize());
    return { axis: f, angle: b };
  };
  b.scale = function (a) {
    this.x *= a;
    this.y *= a;
    this.z *= a;
    this.w *= a;
    return this;
  };
  b.assignFrom = function (a) {
    this.x = a.x;
    this.y = a.y;
    this.z = a.z;
    this.w = a.w;
    return this;
  };
  b.add = function (a) {
    this.x += a.x;
    this.y += a.y;
    this.z += a.z;
    this.w += a.w;
    return this;
  };
  a.math.Quaternion.rotationBetweenVec3 = function (b, e, f) {
    var g = new a.math.Vec3(b),
      h = new a.math.Vec3(e);
    g.normalize();
    h.normalize();
    var k = g.dot(h);
    e = new a.math.Quaternion();
    if (1 <= k) return e.identity(), e;
    -0.999999 > k
      ? Math.abs(f.lengthSq()) < a.math.EPSILON
        ? e.rotationAxis(f, Math.PI)
        : ((g = new a.math.Vec3(1, 0, 0)),
          g.cross(b),
          Math.abs(g.lengthSq()) < a.math.EPSILON &&
            (g.fill(0, 1, 0), g.cross(b)),
          g.normalize(),
          e.rotationAxis(g, Math.PI))
      : ((b = Math.sqrt(2 * (1 + k))),
        (f = 1 / b),
        g.cross(h),
        (e.x = g.x * f),
        (e.y = g.y * f),
        (e.z = g.z * f),
        (e.w = 0.5 * b),
        e.normalize());
    return e;
  };
  b.multiplyVec3 = function (b) {
    var e = this.x,
      f = this.y,
      g = this.z,
      h = new a.math.Vec3(b),
      k = new a.math.Vec3(e, f, g),
      e = new a.math.Vec3(e, f, g);
    k.cross(b);
    e.cross(k);
    k.scale(2 * q.w);
    e.scale(2);
    h.add(k);
    h.add(e);
    return h;
  };
})(cc);
cc.math.AABB = function (a, b) {
  this.min = a || new cc.math.Vec3();
  this.max = b || new cc.math.Vec3();
};
cc.math.AABB.prototype.containsPoint = function (a) {
  return (
    a.x >= this.min.x &&
    a.x <= this.max.x &&
    a.y >= this.min.y &&
    a.y <= this.max.y &&
    a.z >= this.min.z &&
    a.z <= this.max.z
  );
};
cc.math.AABB.containsPoint = function (a, b) {
  return (
    a.x >= b.min.x &&
    a.x <= b.max.x &&
    a.y >= b.min.y &&
    a.y <= b.max.y &&
    a.z >= b.min.z &&
    a.z <= b.max.z
  );
};
cc.math.AABB.prototype.assignFrom = function (a) {
  this.min.assignFrom(a.min);
  this.max.assignFrom(a.max);
};
cc.math.AABB.assign = function (a, b) {
  a.min.assignFrom(b.min);
  a.max.assignFrom(b.max);
  return a;
};
(function (a) {
  a.math.Matrix4Stack = function (a, b) {
    this.top = a;
    this.stack = b || [];
    this.lastUpdated = 0;
  };
  a.km_mat4_stack = a.math.Matrix4Stack;
  var b = a.math.Matrix4Stack.prototype;
  b.initialize = function () {
    this.stack.length = 0;
    this.top = null;
  };
  a.km_mat4_stack_push = function (b, e) {
    b.stack.push(b.top);
    b.top = new a.math.Matrix4(e);
  };
  a.km_mat4_stack_pop = function (a, b) {
    a.top = a.stack.pop();
  };
  a.km_mat4_stack_release = function (a) {
    a.stack = null;
    a.top = null;
  };
  b.push = function (b) {
    b = b || this.top;
    this.stack.push(this.top);
    this.top = new a.math.Matrix4(b);
  };
  b.pop = function () {
    this.top = this.stack.pop();
  };
  b.release = function () {
    this._matrixPool = this.top = this.stack = null;
  };
  b._getFromPool = function (b) {
    var e = this._matrixPool;
    if (0 === e.length) return new a.math.Matrix4(b);
    e = e.pop();
    e.assignFrom(b);
    return e;
  };
  b._putInPool = function (a) {
    this._matrixPool.push(a);
  };
})(cc);
(function (a) {
  a.KM_GL_MODELVIEW = 5888;
  a.KM_GL_PROJECTION = 5889;
  a.KM_GL_TEXTURE = 5890;
  a.modelview_matrix_stack = new a.math.Matrix4Stack();
  a.projection_matrix_stack = new a.math.Matrix4Stack();
  a.texture_matrix_stack = new a.math.Matrix4Stack();
  a.current_stack = null;
  a.lazyInitialize = function () {
    var b = new a.math.Matrix4();
    a.modelview_matrix_stack.initialize();
    a.projection_matrix_stack.initialize();
    a.texture_matrix_stack.initialize();
    a.current_stack = a.modelview_matrix_stack;
    a.initialized = !0;
    b.identity();
    a.modelview_matrix_stack.push(b);
    a.projection_matrix_stack.push(b);
    a.texture_matrix_stack.push(b);
  };
  a.lazyInitialize();
  a.kmGLFreeAll = function () {
    a.modelview_matrix_stack.release();
    a.modelview_matrix_stack = null;
    a.projection_matrix_stack.release();
    a.projection_matrix_stack = null;
    a.texture_matrix_stack.release();
    a.texture_matrix_stack = null;
    a.initialized = !1;
    a.current_stack = null;
  };
  a.kmGLPushMatrix = function () {
    a.current_stack.push(a.current_stack.top);
  };
  a.kmGLPushMatrixWitMat4 = function (b) {
    a.current_stack.stack.push(a.current_stack.top);
    b.assignFrom(a.current_stack.top);
    a.current_stack.top = b;
  };
  a.kmGLPopMatrix = function () {
    a.current_stack.top = a.current_stack.stack.pop();
  };
  a.kmGLMatrixMode = function (b) {
    switch (b) {
      case a.KM_GL_MODELVIEW:
        a.current_stack = a.modelview_matrix_stack;
        break;
      case a.KM_GL_PROJECTION:
        a.current_stack = a.projection_matrix_stack;
        break;
      case a.KM_GL_TEXTURE:
        a.current_stack = a.texture_matrix_stack;
        break;
      default:
        throw Error("Invalid matrix mode specified");
    }
    a.current_stack.lastUpdated = a.director.getTotalFrames();
  };
  a.kmGLLoadIdentity = function () {
    a.current_stack.top.identity();
  };
  a.kmGLLoadMatrix = function (b) {
    a.current_stack.top.assignFrom(b);
  };
  a.kmGLMultMatrix = function (b) {
    a.current_stack.top.multiply(b);
  };
  var b = new a.math.Matrix4();
  a.kmGLTranslatef = function (d, f, g) {
    d = a.math.Matrix4.createByTranslation(d, f, g, b);
    a.current_stack.top.multiply(d);
  };
  var d = new a.math.Vec3();
  a.kmGLRotatef = function (e, f, g, h) {
    d.fill(f, g, h);
    e = a.math.Matrix4.createByAxisAndAngle(d, a.degreesToRadians(e), b);
    a.current_stack.top.multiply(e);
  };
  a.kmGLScalef = function (d, f, g) {
    d = a.math.Matrix4.createByScale(d, f, g, b);
    a.current_stack.top.multiply(d);
  };
  a.kmGLGetMatrix = function (b, d) {
    switch (b) {
      case a.KM_GL_MODELVIEW:
        d.assignFrom(a.modelview_matrix_stack.top);
        break;
      case a.KM_GL_PROJECTION:
        d.assignFrom(a.projection_matrix_stack.top);
        break;
      case a.KM_GL_TEXTURE:
        d.assignFrom(a.texture_matrix_stack.top);
        break;
      default:
        throw Error("Invalid matrix mode specified");
    }
  };
})(cc);
cc.SHADER_POSITION_UCOLOR_FRAG =
  "precision lowp float;\nvarying vec4 v_fragmentColor;\nvoid main()                              \n{ \n    gl_FragColor \x3d v_fragmentColor;      \n}\n";
cc.SHADER_POSITION_UCOLOR_VERT =
  "attribute vec4 a_position;\nuniform    vec4 u_color;\nuniform float u_pointSize;\nvarying lowp vec4 v_fragmentColor; \nvoid main(void)   \n{\n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    gl_PointSize \x3d u_pointSize;          \n    v_fragmentColor \x3d u_color;           \n}";
cc.SHADER_POSITION_COLOR_FRAG =
  "precision lowp float; \nvarying vec4 v_fragmentColor; \nvoid main() \n{ \n     gl_FragColor \x3d v_fragmentColor; \n} ";
cc.SHADER_POSITION_COLOR_VERT =
  "attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor \x3d a_color;             \n}";
cc.SHADER_SPRITE_POSITION_COLOR_VERT =
  "attribute vec4 a_position;\nattribute vec4 a_color;\nvarying lowp vec4 v_fragmentColor;\nvoid main()\n{\n    gl_Position \x3d CC_PMatrix * a_position;  \n    v_fragmentColor \x3d a_color;             \n}";
cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG =
  "// #extension GL_OES_standard_derivatives : enable\nvarying mediump vec4 v_color;\nvarying mediump vec2 v_texcoord;\nvoid main()\t\n{ \n// #if defined GL_OES_standard_derivatives\t\n// gl_FragColor \x3d v_color*smoothstep(0.0, length(fwidth(v_texcoord)), 1.0 - length(v_texcoord)); \n// #else\t\ngl_FragColor \x3d v_color * step(0.0, 1.0 - length(v_texcoord)); \n// #endif \n}";
cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT =
  "attribute mediump vec4 a_position; \nattribute mediump vec2 a_texcoord; \nattribute mediump vec4 a_color;\t\nvarying mediump vec4 v_color; \nvarying mediump vec2 v_texcoord;\t\nvoid main() \n{ \n     v_color \x3d a_color;//vec4(a_color.rgb * a_color.a, a_color.a); \n     v_texcoord \x3d a_texcoord; \n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n}";
cc.SHADER_POSITION_TEXTURE_FRAG =
  "precision lowp float;   \nvarying vec2 v_texCoord;  \nvoid main() \n{  \n    gl_FragColor \x3d  texture2D(CC_Texture0, v_texCoord);   \n}";
cc.SHADER_POSITION_TEXTURE_VERT =
  "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord \x3d a_texCoord;               \n}";
cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG =
  "precision lowp float;  \nuniform vec4 u_color; \nvarying vec2 v_texCoord; \nvoid main() \n{  \n    gl_FragColor \x3d  texture2D(CC_Texture0, v_texCoord) * u_color;    \n}";
cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT =
  "attribute vec4 a_position;\nattribute vec2 a_texCoord; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_texCoord \x3d a_texCoord;                 \n}";
cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG =
  "precision lowp float;  \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor \x3d vec4( v_fragmentColor.rgb,         \n        v_fragmentColor.a * texture2D(CC_Texture0, v_texCoord).a   \n    ); \n}";
cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT =
  "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_FRAG =
  "precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    gl_FragColor \x3d v_fragmentColor * texture2D(CC_Texture0, v_texCoord); \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_VERT =
  "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d (CC_PMatrix * CC_MVMatrix) * a_position;  \n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}";
cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT =
  "attribute vec4 a_position; \nattribute vec2 a_texCoord; \nattribute vec4 a_color;  \nvarying lowp vec4 v_fragmentColor; \nvarying mediump vec2 v_texCoord; \nvoid main() \n{ \n    gl_Position \x3d CC_PMatrix * a_position;  \n    v_fragmentColor \x3d a_color; \n    v_texCoord \x3d a_texCoord; \n}";
cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG =
  "precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    vec4 c \x3d texture2D(CC_Texture0, v_texCoord); \n    gl_FragColor.xyz \x3d vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b); \n     gl_FragColor.w \x3d c.w ; \n}";
cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG =
  "precision lowp float;   \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord;   \nuniform float CC_alpha_value; \nvoid main() \n{  \n    vec4 texColor \x3d texture2D(CC_Texture0, v_texCoord);  \n    if ( texColor.a \x3c\x3d CC_alpha_value )          \n        discard; \n    gl_FragColor \x3d texColor * v_fragmentColor;  \n}";
cc.SHADEREX_SWITCHMASK_FRAG =
  "precision lowp float; \nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nuniform sampler2D u_texture;  \nuniform sampler2D   u_mask;   \nvoid main()  \n{  \n    vec4 texColor   \x3d texture2D(u_texture, v_texCoord);  \n    vec4 maskColor  \x3d texture2D(u_mask, v_texCoord); \n    vec4 finalColor \x3d vec4(texColor.r, texColor.g, texColor.b, maskColor.a * texColor.a);        \n    gl_FragColor    \x3d v_fragmentColor * finalColor; \n}";
cc.shaderCache = {
  TYPE_POSITION_TEXTURECOLOR: 0,
  TYPE_POSITION_TEXTURECOLOR_ALPHATEST: 1,
  TYPE_POSITION_COLOR: 2,
  TYPE_POSITION_TEXTURE: 3,
  TYPE_POSITION_TEXTURE_UCOLOR: 4,
  TYPE_POSITION_TEXTURE_A8COLOR: 5,
  TYPE_POSITION_UCOLOR: 6,
  TYPE_POSITION_LENGTH_TEXTURECOLOR: 7,
  TYPE_SPRITE_POSITION_TEXTURECOLOR: 8,
  TYPE_SPRITE_POSITION_TEXTURECOLOR_ALPHATEST: 9,
  TYPE_SPRITE_POSITION_COLOR: 10,
  TYPE_SPRITE_POSITION_TEXTURECOLOR_GRAY: 11,
  TYPE_MAX: 11,
  _keyMap: [
    cc.SHADER_POSITION_TEXTURECOLOR,
    cc.SHADER_POSITION_TEXTURECOLORALPHATEST,
    cc.SHADER_POSITION_COLOR,
    cc.SHADER_POSITION_TEXTURE,
    cc.SHADER_POSITION_TEXTURE_UCOLOR,
    cc.SHADER_POSITION_TEXTUREA8COLOR,
    cc.SHADER_POSITION_UCOLOR,
    cc.SHADER_POSITION_LENGTHTEXTURECOLOR,
    cc.SHADER_SPRITE_POSITION_TEXTURECOLOR,
    cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST,
    cc.SHADER_SPRITE_POSITION_COLOR,
    cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY,
  ],
  _programs: {},
  _init: function () {
    this.loadDefaultShaders();
    return !0;
  },
  _loadDefaultShader: function (a, b) {
    switch (b) {
      case cc.SHADER_POSITION_TEXTURECOLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_TEXTURE_COLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_COLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_COLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY:
        a.initWithVertexShaderByteArray(
          cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,
          cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_POSITION_TEXTURECOLORALPHATEST:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_TEXTURE_COLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST:
        a.initWithVertexShaderByteArray(
          cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_COLOR_ALPHATEST_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_POSITION_COLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_COLOR_VERT,
          cc.SHADER_POSITION_COLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        break;
      case cc.SHADER_SPRITE_POSITION_COLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_SPRITE_POSITION_COLOR_VERT,
          cc.SHADER_POSITION_COLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        break;
      case cc.SHADER_POSITION_TEXTURE:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_TEXTURE_VERT,
          cc.SHADER_POSITION_TEXTURE_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_POSITION_TEXTURE_UCOLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_TEXTURE_UCOLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_UCOLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_POSITION_TEXTUREA8COLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_TEXTURE_A8COLOR_VERT,
          cc.SHADER_POSITION_TEXTURE_A8COLOR_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        break;
      case cc.SHADER_POSITION_UCOLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_UCOLOR_VERT,
          cc.SHADER_POSITION_UCOLOR_FRAG
        );
        a.addAttribute("aVertex", cc.VERTEX_ATTRIB_POSITION);
        break;
      case cc.SHADER_POSITION_LENGTHTEXTURECOLOR:
        a.initWithVertexShaderByteArray(
          cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_VERT,
          cc.SHADER_POSITION_COLOR_LENGTH_TEXTURE_FRAG
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_POSITION, cc.VERTEX_ATTRIB_POSITION);
        a.addAttribute(
          cc.ATTRIBUTE_NAME_TEX_COORD,
          cc.VERTEX_ATTRIB_TEX_COORDS
        );
        a.addAttribute(cc.ATTRIBUTE_NAME_COLOR, cc.VERTEX_ATTRIB_COLOR);
        break;
      default:
        cc.log("cocos2d: cc.shaderCache._loadDefaultShader, error shader type");
        return;
    }
    a.link();
    a.updateUniforms();
  },
  loadDefaultShaders: function () {
    for (var a = 0; a < this.TYPE_MAX; ++a) this.programForKey(this._keyMap[a]);
  },
  reloadDefaultShaders: function () {
    var a = this.programForKey(cc.SHADER_POSITION_TEXTURECOLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURECOLOR);
    a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);
    a = this.programForKey(cc.SHADER_POSITION_TEXTURECOLORALPHATEST);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURECOLORALPHATEST);
    a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST);
    a = this.programForKey(cc.SHADER_POSITION_COLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_COLOR);
    a = this.programForKey(cc.SHADER_POSITION_TEXTURE);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURE);
    a = this.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG);
    a.reset();
    this._loadDefaultShader(
      a,
      cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_GRAY_FRAG
    );
    a = this.programForKey(cc.SHADER_POSITION_TEXTURE_UCOLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTURE_UCOLOR);
    a = this.programForKey(cc.SHADER_POSITION_TEXTUREA8COLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_TEXTUREA8COLOR);
    a = this.programForKey(cc.SHADER_POSITION_UCOLOR);
    a.reset();
    this._loadDefaultShader(a, cc.SHADER_POSITION_UCOLOR);
  },
  programForKey: function (a) {
    if (!this._programs[a]) {
      var b = new cc.GLProgram();
      this._loadDefaultShader(b, a);
      this._programs[a] = b;
    }
    return this._programs[a];
  },
  getProgram: function (a) {
    return this.programForKey(a);
  },
  addProgram: function (a, b) {
    this._programs[b] = a;
  },
};
cc.GLProgram = cc.Class.extend({
  _glContext: null,
  _programObj: null,
  _vertShader: null,
  _fragShader: null,
  _uniforms: null,
  _hashForUniforms: null,
  _usesTime: !1,
  _projectionUpdated: -1,
  _updateUniform: function (a) {
    if (!a) return !1;
    var b = !1,
      d = this._hashForUniforms[a],
      e;
    if (Array.isArray(arguments[1])) e = arguments[1];
    else {
      e = Array(arguments.length - 1);
      for (var f = 1; f < arguments.length; f += 1) e[f - 1] = arguments[f];
    }
    if (d && d.length === e.length)
      for (f = 0; f < e.length; f += 1) {
        if (e[f] !== d[f] || "object" === typeof e[f]) (d[f] = e[f]), (b = !0);
      }
    else (this._hashForUniforms[a] = [].concat(e)), (b = !0);
    return b;
  },
  _description: function () {
    return (
      "\x3cCCGLProgram \x3d " +
      this.toString() +
      " | Program \x3d " +
      this._programObj.toString() +
      ", VertexShader \x3d " +
      this._vertShader.toString() +
      ", FragmentShader \x3d " +
      this._fragShader.toString() +
      "\x3e"
    );
  },
  _compileShader: function (a, b, d) {
    if (!d || !a) return !1;
    d =
      (cc.GLProgram._isHighpSupported()
        ? "precision highp float;\n"
        : "precision mediump float;\n") +
      "uniform mat4 CC_PMatrix;         \nuniform mat4 CC_MVMatrix;        \nuniform mat4 CC_MVPMatrix;       \nuniform vec4 CC_Time;            \nuniform vec4 CC_SinTime;         \nuniform vec4 CC_CosTime;         \nuniform vec4 CC_Random01;        \nuniform sampler2D CC_Texture0;   \n//CC INCLUDES END                \n" +
      d;
    this._glContext.shaderSource(a, d);
    this._glContext.compileShader(a);
    d = this._glContext.getShaderParameter(a, this._glContext.COMPILE_STATUS);
    d ||
      (cc.log(
        "cocos2d: ERROR: Failed to compile shader:\n" +
          this._glContext.getShaderSource(a)
      ),
      b === this._glContext.VERTEX_SHADER
        ? cc.log("cocos2d: \n" + this.vertexShaderLog())
        : cc.log("cocos2d: \n" + this.fragmentShaderLog()));
    return !0 === d;
  },
  ctor: function (a, b, d) {
    this._uniforms = {};
    this._hashForUniforms = {};
    this._glContext = d || cc._renderContext;
    a && b && this.init(a, b);
  },
  destroyProgram: function () {
    this._hashForUniforms = this._uniforms = this._fragShader = this._vertShader = null;
    this._glContext.deleteProgram(this._programObj);
  },
  initWithVertexShaderByteArray: function (a, b) {
    var d = this._glContext;
    this._programObj = d.createProgram();
    this._fragShader = this._vertShader = null;
    a &&
      ((this._vertShader = d.createShader(d.VERTEX_SHADER)),
      this._compileShader(this._vertShader, d.VERTEX_SHADER, a) ||
        cc.log("cocos2d: ERROR: Failed to compile vertex shader"));
    b &&
      ((this._fragShader = d.createShader(d.FRAGMENT_SHADER)),
      this._compileShader(this._fragShader, d.FRAGMENT_SHADER, b) ||
        cc.log("cocos2d: ERROR: Failed to compile fragment shader"));
    this._vertShader && d.attachShader(this._programObj, this._vertShader);
    cc.checkGLErrorDebug();
    this._fragShader && d.attachShader(this._programObj, this._fragShader);
    0 < Object.keys(this._hashForUniforms).length &&
      (this._hashForUniforms = {});
    cc.checkGLErrorDebug();
    return !0;
  },
  initWithString: function (a, b) {
    return this.initWithVertexShaderByteArray(a, b);
  },
  initWithVertexShaderFilename: function (a, b) {
    var d = cc.loader.getRes(a);
    if (!d) throw Error("Please load the resource firset : " + a);
    var e = cc.loader.getRes(b);
    if (!e) throw Error("Please load the resource firset : " + b);
    return this.initWithVertexShaderByteArray(d, e);
  },
  init: function (a, b) {
    return this.initWithVertexShaderFilename(a, b);
  },
  addAttribute: function (a, b) {
    this._glContext.bindAttribLocation(this._programObj, b, a);
  },
  link: function () {
    if (!this._programObj)
      return cc.log("cc.GLProgram.link(): Cannot link invalid program"), !1;
    this._glContext.linkProgram(this._programObj);
    this._vertShader && this._glContext.deleteShader(this._vertShader);
    this._fragShader && this._glContext.deleteShader(this._fragShader);
    this._fragShader = this._vertShader = null;
    return cc.game.config[cc.game.CONFIG_KEY.debugMode] &&
      !this._glContext.getProgramParameter(
        this._programObj,
        this._glContext.LINK_STATUS
      )
      ? (cc.log(
          "cocos2d: ERROR: Failed to link program: " +
            this._glContext.getProgramInfoLog(this._programObj)
        ),
        cc.glDeleteProgram(this._programObj),
        (this._programObj = null),
        !1)
      : !0;
  },
  use: function () {
    cc.glUseProgram(this._programObj);
  },
  updateUniforms: function () {
    this._addUniformLocation(cc.UNIFORM_PMATRIX_S);
    this._addUniformLocation(cc.UNIFORM_MVMATRIX_S);
    this._addUniformLocation(cc.UNIFORM_MVPMATRIX_S);
    this._addUniformLocation(cc.UNIFORM_TIME_S);
    this._addUniformLocation(cc.UNIFORM_SINTIME_S);
    this._addUniformLocation(cc.UNIFORM_COSTIME_S);
    this._addUniformLocation(cc.UNIFORM_RANDOM01_S);
    this._addUniformLocation(cc.UNIFORM_SAMPLER_S);
    this._usesTime =
      null != this._uniforms[cc.UNIFORM_TIME_S] ||
      null != this._uniforms[cc.UNIFORM_SINTIME_S] ||
      null != this._uniforms[cc.UNIFORM_COSTIME_S];
    this.use();
    this.setUniformLocationWith1i(this._uniforms[cc.UNIFORM_SAMPLER_S], 0);
  },
  _addUniformLocation: function (a) {
    var b = this._glContext.getUniformLocation(this._programObj, a);
    b && (b._name = a);
    return (this._uniforms[a] = b);
  },
  getUniformLocationForName: function (a) {
    if (!a)
      throw Error(
        "cc.GLProgram.getUniformLocationForName(): uniform name should be non-null"
      );
    if (!this._programObj)
      throw Error(
        "cc.GLProgram.getUniformLocationForName(): Invalid operation. Cannot get uniform location when program is not initialized"
      );
    return this._uniforms[a] || this._addUniformLocation(a);
  },
  getUniformMVPMatrix: function () {
    return this._uniforms[cc.UNIFORM_MVPMATRIX_S];
  },
  getUniformSampler: function () {
    return this._uniforms[cc.UNIFORM_SAMPLER_S];
  },
  setUniformLocationWith1i: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform1i(a, b))
      : this._glContext.uniform1i(a, b);
  },
  setUniformLocationWith2i: function (a, b, d) {
    var e = "string" === typeof a,
      f = e ? a : a && a._name;
    f
      ? this._updateUniform(f, b, d) &&
        (e && (a = this.getUniformLocationForName(f)),
        this._glContext.uniform2i(a, b, d))
      : this._glContext.uniform2i(a, b, d);
  },
  setUniformLocationWith3i: function (a, b, d, e) {
    var f = "string" === typeof a,
      g = f ? a : a && a._name;
    g
      ? this._updateUniform(g, b, d, e) &&
        (f && (a = this.getUniformLocationForName(g)),
        this._glContext.uniform3i(a, b, d, e))
      : this._glContext.uniform3i(a, b, d, e);
  },
  setUniformLocationWith4i: function (a, b, d, e, f) {
    var g = "string" === typeof a,
      h = g ? a : a && a._name;
    h
      ? this._updateUniform(h, b, d, e, f) &&
        (g && (a = this.getUniformLocationForName(h)),
        this._glContext.uniform4i(a, b, d, e, f))
      : this._glContext.uniform4i(a, b, d, e, f);
  },
  setUniformLocationWith2iv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform2iv(a, b))
      : this._glContext.uniform2iv(a, b);
  },
  setUniformLocationWith3iv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform3iv(a, b))
      : this._glContext.uniform3iv(a, b);
  },
  setUniformLocationWith4iv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform4iv(a, b))
      : this._glContext.uniform4iv(a, b);
  },
  setUniformLocationI32: function (a, b) {
    this.setUniformLocationWith1i(a, b);
  },
  setUniformLocationWith1f: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform1f(a, b))
      : this._glContext.uniform1f(a, b);
  },
  setUniformLocationWith2f: function (a, b, d) {
    var e = "string" === typeof a,
      f = e ? a : a && a._name;
    f
      ? this._updateUniform(f, b, d) &&
        (e && (a = this.getUniformLocationForName(f)),
        this._glContext.uniform2f(a, b, d))
      : this._glContext.uniform2f(a, b, d);
  },
  setUniformLocationWith3f: function (a, b, d, e) {
    var f = "string" === typeof a,
      g = f ? a : a && a._name;
    g
      ? this._updateUniform(g, b, d, e) &&
        (f && (a = this.getUniformLocationForName(g)),
        this._glContext.uniform3f(a, b, d, e))
      : this._glContext.uniform3f(a, b, d, e);
  },
  setUniformLocationWith4f: function (a, b, d, e, f) {
    var g = "string" === typeof a,
      h = g ? a : a && a._name;
    h
      ? this._updateUniform(h, b, d, e, f) &&
        (g && (a = this.getUniformLocationForName(h)),
        this._glContext.uniform4f(a, b, d, e, f))
      : (this._glContext.uniform4f(a, b, d, e, f),
        cc.log("uniform4f", b, d, e, f));
  },
  setUniformLocationWith2fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform2fv(a, b))
      : this._glContext.uniform2fv(a, b);
  },
  setUniformLocationWith3fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform3fv(a, b))
      : this._glContext.uniform3fv(a, b);
  },
  setUniformLocationWith4fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniform4fv(a, b))
      : (this._glContext.uniform4fv(a, b), cc.log("uniform4fv", b));
  },
  setUniformLocationWithMatrix2fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniformMatrix2fv(a, !1, b))
      : this._glContext.uniformMatrix2fv(a, !1, b);
  },
  setUniformLocationWithMatrix3fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniformMatrix3fv(a, !1, b))
      : this._glContext.uniformMatrix3fv(a, !1, b);
  },
  setUniformLocationWithMatrix4fv: function (a, b) {
    var d = "string" === typeof a,
      e = d ? a : a && a._name;
    e
      ? this._updateUniform(e, b) &&
        (d && (a = this.getUniformLocationForName(e)),
        this._glContext.uniformMatrix4fv(a, !1, b))
      : this._glContext.uniformMatrix4fv(a, !1, b);
  },
  setUniformLocationF32: function () {
    if (!(2 > arguments.length))
      switch (arguments.length) {
        case 2:
          this.setUniformLocationWith1f(arguments[0], arguments[1]);
          break;
        case 3:
          this.setUniformLocationWith2f(
            arguments[0],
            arguments[1],
            arguments[2]
          );
          break;
        case 4:
          this.setUniformLocationWith3f(
            arguments[0],
            arguments[1],
            arguments[2],
            arguments[3]
          );
          break;
        case 5:
          this.setUniformLocationWith4f(
            arguments[0],
            arguments[1],
            arguments[2],
            arguments[3],
            arguments[4]
          );
      }
  },
  setUniformsForBuiltins: function () {
    var a = new cc.math.Matrix4(),
      b = new cc.math.Matrix4(),
      d = new cc.math.Matrix4();
    cc.kmGLGetMatrix(cc.KM_GL_PROJECTION, a);
    cc.kmGLGetMatrix(cc.KM_GL_MODELVIEW, b);
    cc.kmMat4Multiply(d, a, b);
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_PMATRIX_S],
      a.mat,
      1
    );
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVMATRIX_S],
      b.mat,
      1
    );
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVPMATRIX_S],
      d.mat,
      1
    );
    this._usesTime &&
      ((a = cc.director),
      (a = a.getTotalFrames() * a.getAnimationInterval()),
      this.setUniformLocationWith4f(
        this._uniforms[cc.UNIFORM_TIME_S],
        a / 10,
        a,
        2 * a,
        4 * a
      ),
      this.setUniformLocationWith4f(
        this._uniforms[cc.UNIFORM_SINTIME_S],
        a / 8,
        a / 4,
        a / 2,
        Math.sin(a)
      ),
      this.setUniformLocationWith4f(
        this._uniforms[cc.UNIFORM_COSTIME_S],
        a / 8,
        a / 4,
        a / 2,
        Math.cos(a)
      ));
    -1 !== this._uniforms[cc.UNIFORM_RANDOM01_S] &&
      this.setUniformLocationWith4f(
        this._uniforms[cc.UNIFORM_RANDOM01_S],
        Math.random(),
        Math.random(),
        Math.random(),
        Math.random()
      );
  },
  _setUniformsForBuiltinsForRenderer: function (a) {
    if (a && a._renderCmd) {
      var b = new cc.math.Matrix4(),
        d = new cc.math.Matrix4();
      cc.kmGLGetMatrix(cc.KM_GL_PROJECTION, b);
      cc.kmMat4Multiply(d, b, a._renderCmd._stackMatrix);
      this.setUniformLocationWithMatrix4fv(
        this._uniforms[cc.UNIFORM_PMATRIX_S],
        b.mat,
        1
      );
      this.setUniformLocationWithMatrix4fv(
        this._uniforms[cc.UNIFORM_MVMATRIX_S],
        a._renderCmd._stackMatrix.mat,
        1
      );
      this.setUniformLocationWithMatrix4fv(
        this._uniforms[cc.UNIFORM_MVPMATRIX_S],
        d.mat,
        1
      );
      this._usesTime &&
        ((a = cc.director),
        (a = a.getTotalFrames() * a.getAnimationInterval()),
        this.setUniformLocationWith4f(
          this._uniforms[cc.UNIFORM_TIME_S],
          a / 10,
          a,
          2 * a,
          4 * a
        ),
        this.setUniformLocationWith4f(
          this._uniforms[cc.UNIFORM_SINTIME_S],
          a / 8,
          a / 4,
          a / 2,
          Math.sin(a)
        ),
        this.setUniformLocationWith4f(
          this._uniforms[cc.UNIFORM_COSTIME_S],
          a / 8,
          a / 4,
          a / 2,
          Math.cos(a)
        ));
      -1 !== this._uniforms[cc.UNIFORM_RANDOM01_S] &&
        this.setUniformLocationWith4f(
          this._uniforms[cc.UNIFORM_RANDOM01_S],
          Math.random(),
          Math.random(),
          Math.random(),
          Math.random()
        );
    }
  },
  setUniformForModelViewProjectionMatrix: function () {
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVPMATRIX_S],
      cc.getMat4MultiplyValue(
        cc.projection_matrix_stack.top,
        cc.modelview_matrix_stack.top
      )
    );
  },
  setUniformForModelViewProjectionMatrixWithMat4: function (a) {
    cc.kmMat4Multiply(
      a,
      cc.projection_matrix_stack.top,
      cc.modelview_matrix_stack.top
    );
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVPMATRIX_S],
      a.mat
    );
  },
  setUniformForModelViewAndProjectionMatrixWithMat4: function () {
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVMATRIX_S],
      cc.modelview_matrix_stack.top.mat
    );
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_PMATRIX_S],
      cc.projection_matrix_stack.top.mat
    );
  },
  _setUniformForMVPMatrixWithMat4: function (a) {
    if (!a) throw Error("modelView matrix is undefined.");
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_MVMATRIX_S],
      a.mat
    );
    this.setUniformLocationWithMatrix4fv(
      this._uniforms[cc.UNIFORM_PMATRIX_S],
      cc.projection_matrix_stack.top.mat
    );
  },
  _updateProjectionUniform: function () {
    var a = cc.projection_matrix_stack;
    a.lastUpdated !== this._projectionUpdated &&
      (this._glContext.uniformMatrix4fv(
        this._uniforms[cc.UNIFORM_PMATRIX_S],
        !1,
        a.top.mat
      ),
      (this._projectionUpdated = a.lastUpdated));
  },
  vertexShaderLog: function () {
    return this._glContext.getShaderInfoLog(this._vertShader);
  },
  getVertexShaderLog: function () {
    return this._glContext.getShaderInfoLog(this._vertShader);
  },
  getFragmentShaderLog: function () {
    return this._glContext.getShaderInfoLog(this._vertShader);
  },
  fragmentShaderLog: function () {
    return this._glContext.getShaderInfoLog(this._fragShader);
  },
  programLog: function () {
    return this._glContext.getProgramInfoLog(this._programObj);
  },
  getProgramLog: function () {
    return this._glContext.getProgramInfoLog(this._programObj);
  },
  reset: function () {
    this._fragShader = this._vertShader = null;
    0 < Object.keys(this._uniforms).length && (this._uniforms = {});
    this._glContext.deleteProgram(this._programObj);
    this._programObj = null;
    0 < Object.keys(this._hashForUniforms).length &&
      (this._hashForUniforms = {});
  },
  getProgram: function () {
    return this._programObj;
  },
  retain: function () {},
  release: function () {},
});
cc.GLProgram.create = function (a, b) {
  return new cc.GLProgram(a, b);
};
cc.GLProgram._highpSupported = null;
cc.GLProgram._isHighpSupported = function () {
  var a = cc._renderContext;
  a.getShaderPrecisionFormat &&
    null == cc.GLProgram._highpSupported &&
    ((a = a.getShaderPrecisionFormat(a.FRAGMENT_SHADER, a.HIGH_FLOAT)),
    (cc.GLProgram._highpSupported = 0 !== a.precision));
  return cc.GLProgram._highpSupported;
};
cc.setProgram = function (a, b) {
  a.shaderProgram = b;
  var d = a.children;
  if (d) for (var e = 0; e < d.length; e++) cc.setProgram(d[e], b);
};
var types = {
  GL_FLOAT: 0,
  GL_INT: 1,
  GL_FLOAT_VEC2: 2,
  GL_FLOAT_VEC3: 3,
  GL_FLOAT_VEC4: 4,
  GL_FLOAT_MAT4: 5,
  GL_CALLBACK: 6,
  GL_TEXTURE: 7,
};
cc.UniformValue = function (a, b) {
  this._uniform = a;
  this._glprogram = b;
  this._value = null;
  this._type = -1;
};
cc.UniformValue.prototype = {
  setFloat: function (a) {
    this._value = a;
    this._type = types.GL_FLOAT;
  },
  setInt: function (a) {
    this._value = a;
    this._type = types.GL_INT;
  },
  setVec2: function (a, b) {
    this._value = [a, b];
    this._type = types.GL_FLOAT_VEC2;
  },
  setVec2v: function (a) {
    this._value = a.slice(0);
    this._type = types.GL_FLOAT_VEC2;
  },
  setVec3: function (a, b, d) {
    this._value = [a, b, d];
    this._type = types.GL_FLOAT_VEC3;
  },
  setVec3v: function (a) {
    this._value = a.slice(0);
    this._type = types.GL_FLOAT_VEC3;
  },
  setVec4: function (a, b, d, e) {
    this._value = [a, b, d, e];
    this._type = types.GL_FLOAT_VEC4;
  },
  setVec4v: function (a) {
    this._value = a.slice(0);
    this._type = types.GL_FLOAT_VEC4;
  },
  setMat4: function (a) {
    this._value = a.slice(0);
    this._type = types.GL_FLOAT_MAT4;
  },
  setCallback: function (a) {
    this._value = a;
    this._type = types.GL_CALLBACK;
  },
  setTexture: function (a, b) {
    this._value = b;
    this._textureId = a;
    this._type = types.GL_TEXTURE;
  },
  apply: function () {
    switch (this._type) {
      case types.GL_INT:
        this._glprogram.setUniformLocationWith1i(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_FLOAT:
        this._glprogram.setUniformLocationWith1f(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_FLOAT_VEC2:
        this._glprogram.setUniformLocationWith2fv(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_FLOAT_VEC3:
        this._glprogram.setUniformLocationWith3fv(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_FLOAT_VEC4:
        this._glprogram.setUniformLocationWith4fv(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_FLOAT_MAT4:
        this._glprogram.setUniformLocationWithMatrix4fv(
          this._uniform._location,
          this._value
        );
        break;
      case types.GL_CALLBACK:
        this._value(this._glprogram, this._uniform);
        break;
      case types.GL_TEXTURE:
        this._glprogram.setUniformLocationWith1i(
          this._uniform._location,
          this._value
        ),
          cc.glBindTexture2DN(this._value, this._textureId);
    }
  },
};
cc.GLProgramState = function (a) {
  this._glprogram = a;
  this._uniforms = {};
  this._boundTextureUnits = {};
  this._textureUnitIndex = 1;
  for (
    var b = a._glContext.getProgramParameter(
        a._programObj,
        a._glContext.ACTIVE_UNIFORMS
      ),
      d = 0;
    d < b;
    d += 1
  ) {
    var e = a._glContext.getActiveUniform(a._programObj, d);
    if (0 !== e.name.indexOf("CC_")) {
      e._location = a._glContext.getUniformLocation(a._programObj, e.name);
      e._location._name = e.name;
      var f = new cc.UniformValue(e, a);
      this._uniforms[e.name] = f;
    }
  }
};
cc.GLProgramState.prototype = {
  apply: function (a) {
    this._glprogram.use();
    a && this._glprogram._setUniformForMVPMatrixWithMat4(a);
    for (var b in this._uniforms) this._uniforms[b].apply();
  },
  setGLProgram: function (a) {
    this._glprogram = a;
  },
  getGLProgram: function () {
    return this._glprogram;
  },
  getUniformCount: function () {
    return this._uniforms.length;
  },
  getUniformValue: function (a) {
    return this._uniforms[a];
  },
  setUniformInt: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setInt(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformFloat: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setFloat(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec2: function (a, b, d) {
    var e = this.getUniformValue(a);
    e ? e.setVec2(b, d) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec2v: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setVec2v(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec3: function (a, b, d, e) {
    var f = this.getUniformValue(a);
    f
      ? f.setVec3(b, d, e)
      : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec3v: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setVec3v(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec4: function (a, b, d, e, f) {
    var g = this.getUniformValue(a);
    g
      ? g.setVec4(b, d, e, f)
      : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformVec4v: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setVec4v(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformMat4: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setMat4(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformCallback: function (a, b) {
    var d = this.getUniformValue(a);
    d ? d.setCallback(b) : cc.log("cocos2d: warning: Uniform not found: " + a);
  },
  setUniformTexture: function (a, b) {
    var d = this.getUniformValue(a);
    if (d) {
      var e = this._boundTextureUnits[a];
      e
        ? d.setTexture(b, e)
        : (d.setTexture(b, this._textureUnitIndex),
          (this._boundTextureUnits[a] = this._textureUnitIndex++));
    }
  },
};
cc.GLProgramState._cache = {};
cc.GLProgramState.getOrCreateWithGLProgram = function (a) {
  var b = cc.GLProgramState._cache[a.__instanceId];
  b ||
    ((b = new cc.GLProgramState(a)),
    (cc.GLProgramState._cache[a.__instanceId] = b));
  return b;
};
cc._currentProjectionMatrix = -1;
cc.ENABLE_GL_STATE_CACHE &&
  ((cc.MAX_ACTIVETEXTURE = 16),
  (cc._currentShaderProgram = -1),
  (cc._currentBoundTexture = [
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
    -1,
  ]),
  (cc._blendingSource = -1),
  (cc._blendingDest = -1),
  (cc._GLServerState = 0),
  cc.TEXTURE_ATLAS_USE_VAO && (cc._uVAO = 0));
cc.glInvalidateStateCache = function () {
  cc.kmGLFreeAll();
  cc._currentProjectionMatrix = -1;
  if (cc.ENABLE_GL_STATE_CACHE) {
    cc._currentShaderProgram = -1;
    for (var a = 0; a < cc.MAX_ACTIVETEXTURE; a++)
      cc._currentBoundTexture[a] = -1;
    cc._blendingSource = -1;
    cc._blendingDest = -1;
    cc._GLServerState = 0;
  }
};
cc.glUseProgram = cc.ENABLE_GL_STATE_CACHE
  ? function (a) {
      a !== cc._currentShaderProgram &&
        ((cc._currentShaderProgram = a), cc._renderContext.useProgram(a));
    }
  : function (a) {
      cc._renderContext.useProgram(a);
    };
cc.glDeleteProgram = function (a) {
  cc.ENABLE_GL_STATE_CACHE &&
    a === cc._currentShaderProgram &&
    (cc._currentShaderProgram = -1);
  gl.deleteProgram(a);
};
cc.setBlending = function (a, b) {
  var d = cc._renderContext;
  a === d.ONE && b === d.ZERO
    ? d.disable(d.BLEND)
    : (d.enable(d.BLEND), cc._renderContext.blendFunc(a, b));
};
cc.glBlendFunc = cc.ENABLE_GL_STATE_CACHE
  ? function (a, b) {
      if (a !== cc._blendingSource || b !== cc._blendingDest)
        (cc._blendingSource = a), (cc._blendingDest = b), cc.setBlending(a, b);
    }
  : cc.setBlending;
cc.glBlendFuncForParticle = function (a, b) {
  if (a !== cc._blendingSource || b !== cc._blendingDest) {
    cc._blendingSource = a;
    cc._blendingDest = b;
    var d = cc._renderContext;
    a === d.ONE && b === d.ZERO
      ? d.disable(d.BLEND)
      : (d.enable(d.BLEND), d.blendFuncSeparate(d.SRC_ALPHA, b, a, b));
  }
};
cc.glBlendResetToCache = function () {
  var a = cc._renderContext;
  a.blendEquation(a.FUNC_ADD);
  cc.ENABLE_GL_STATE_CACHE
    ? cc.setBlending(cc._blendingSource, cc._blendingDest)
    : cc.setBlending(a.BLEND_SRC, a.BLEND_DST);
};
cc.setProjectionMatrixDirty = function () {
  cc._currentProjectionMatrix = -1;
};
cc.glBindTexture2D = function (a) {
  cc.glBindTexture2DN(0, a);
};
cc.glBindTexture2DN = cc.ENABLE_GL_STATE_CACHE
  ? function (a, b) {
      if (cc._currentBoundTexture[a] !== b) {
        cc._currentBoundTexture[a] = b;
        var d = cc._renderContext;
        d.activeTexture(d.TEXTURE0 + a);
        b
          ? d.bindTexture(d.TEXTURE_2D, b._webTextureObj)
          : d.bindTexture(d.TEXTURE_2D, null);
      }
    }
  : function (a, b) {
      var d = cc._renderContext;
      d.activeTexture(d.TEXTURE0 + a);
      b
        ? d.bindTexture(d.TEXTURE_2D, b._webTextureObj)
        : d.bindTexture(d.TEXTURE_2D, null);
    };
cc.glDeleteTexture = function (a) {
  cc.glDeleteTextureN(0, a);
};
cc.glDeleteTextureN = function (a, b) {
  cc.ENABLE_GL_STATE_CACHE &&
    b === cc._currentBoundTexture[a] &&
    (cc._currentBoundTexture[a] = -1);
  cc._renderContext.deleteTexture(b._webTextureObj);
};
cc.glBindVAO = function (a) {
  cc.TEXTURE_ATLAS_USE_VAO &&
    cc.ENABLE_GL_STATE_CACHE &&
    cc._uVAO !== a &&
    (cc._uVAO = a);
};
cc.glEnable = function (a) {};
cc.IMAGE_FORMAT_JPEG = 0;
cc.IMAGE_FORMAT_PNG = 1;
cc.IMAGE_FORMAT_RAWDATA = 9;
cc.NextPOT = function (a) {
  a -= 1;
  a |= a >> 1;
  a |= a >> 2;
  a |= a >> 4;
  a |= a >> 8;
  return (a | (a >> 16)) + 1;
};
cc.RenderTexture = cc.Node.extend({
  sprite: null,
  clearFlags: 0,
  clearDepthVal: 0,
  autoDraw: !1,
  _texture: null,
  _pixelFormat: 0,
  clearStencilVal: 0,
  _clearColor: null,
  _className: "RenderTexture",
  ctor: function (a, b, d, e) {
    cc.Node.prototype.ctor.call(this);
    this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
    this._pixelFormat = cc.Texture2D.PIXEL_FORMAT_RGBA8888;
    this._clearColor = new cc.Color(0, 0, 0, 255);
    void 0 !== a &&
      void 0 !== b &&
      ((d = d || cc.Texture2D.PIXEL_FORMAT_RGBA8888),
      this.initWithWidthAndHeight(a, b, d, e || 0));
    this.setAnchorPoint(0, 0);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.RenderTexture.CanvasRenderCmd(this)
      : new cc.RenderTexture.WebGLRenderCmd(this);
  },
  visit: function (a) {
    var b = this._renderCmd;
    a = a ? a._renderCmd : null;
    if (this._visible) {
      var d = cc.renderer;
      b.visit(a);
      d.pushRenderCommand(b);
      this.sprite.visit(this);
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(a);
  },
  cleanup: function () {
    cc.Node.prototype.onExit.call(this);
    this._renderCmd.cleanup();
  },
  getSprite: function () {
    return this.sprite;
  },
  setSprite: function (a) {
    this.sprite = a;
  },
  setVirtualViewport: function (a, b, d) {
    this._renderCmd.setVirtualViewport(a, b, d);
  },
  initWithWidthAndHeight: function (a, b, d, e) {
    return this._renderCmd.initWithWidthAndHeight(a, b, d, e);
  },
  begin: function () {
    cc.renderer._turnToCacheMode(this.__instanceId);
    this._renderCmd.begin();
  },
  beginWithClear: function (a, b, d, e, f, g) {
    var h = cc._renderContext;
    f = f || h.COLOR_BUFFER_BIT;
    g = g || h.COLOR_BUFFER_BIT | h.DEPTH_BUFFER_BIT;
    this._beginWithClear(
      a,
      b,
      d,
      e,
      f,
      g,
      h.COLOR_BUFFER_BIT | h.DEPTH_BUFFER_BIT | h.STENCIL_BUFFER_BIT
    );
  },
  _beginWithClear: function (a, b, d, e, f, g, h) {
    this.begin();
    this._renderCmd._beginWithClear(a, b, d, e, f, g, h);
  },
  end: function () {
    this._renderCmd.end();
  },
  clear: function (a, b, d, e) {
    this.beginWithClear(a, b, d, e);
    this.end();
  },
  clearRect: function (a, b, d, e) {
    this._renderCmd.clearRect(a, b, d, e);
  },
  clearDepth: function (a) {
    this._renderCmd.clearDepth(a);
  },
  clearStencil: function (a) {
    this._renderCmd.clearStencil(a);
  },
  getClearFlags: function () {
    return this.clearFlags;
  },
  setClearFlags: function (a) {
    this.clearFlags = a;
  },
  getClearColor: function () {
    return this._clearColor;
  },
  setClearColor: function (a) {
    var b = this._clearColor;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    b.a = a.a;
    this._renderCmd.updateClearColor(a);
  },
  getClearDepth: function () {
    return this.clearDepthVal;
  },
  setClearDepth: function (a) {
    this.clearDepthVal = a;
  },
  getClearStencil: function () {
    return this.clearStencilVal;
  },
  setClearStencil: function (a) {
    this.clearStencilVal = a;
  },
  isAutoDraw: function () {
    return this.autoDraw;
  },
  setAutoDraw: function (a) {
    this.autoDraw = a;
  },
  saveToFile: function (a, b) {
    cc.log("saveToFile isn't supported on Cocos2d-Html5");
  },
  newCCImage: function (a) {
    cc.log("saveToFile isn't supported on cocos2d-html5");
    return null;
  },
  listenToBackground: function (a) {},
  listenToForeground: function (a) {},
});
_p = cc.RenderTexture.prototype;
cc.defineGetterSetter(_p, "clearColorVal", _p.getClearColor, _p.setClearColor);
cc.RenderTexture.create = function (a, b, d, e) {
  return new cc.RenderTexture(a, b, d, e);
};
(function () {
  cc.RenderTexture.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
    this._clearColorStr = "rgba(255,255,255,1)";
    this._cacheCanvas = document.createElement("canvas");
    this._cacheContext = new cc.CanvasContextWrapper(
      this._cacheCanvas.getContext("2d")
    );
  };
  var a = (cc.RenderTexture.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.RenderTexture.CanvasRenderCmd;
  a.cleanup = function () {
    this._cacheCanvas = this._cacheContext = null;
  };
  a.clearStencil = function (a) {};
  a.setVirtualViewport = function (a, d, e) {};
  a.updateClearColor = function (a) {
    this._clearColorStr =
      "rgba(" +
      (0 | a.r) +
      "," +
      (0 | a.g) +
      "," +
      (0 | a.b) +
      "," +
      a.a / 255 +
      ")";
  };
  a.initWithWidthAndHeight = function (a, d, e, f) {
    e = this._node;
    f = this._cacheCanvas;
    var g = cc.contentScaleFactor();
    f.width = 0 | (a * g);
    f.height = 0 | (d * g);
    a = new cc.Texture2D();
    a.initWithElement(f);
    a.handleLoadedTexture();
    a = e.sprite = new cc.Sprite(a);
    a.setBlendFunc(cc.ONE, cc.ONE_MINUS_SRC_ALPHA);
    e.autoDraw = !1;
    e.addChild(a);
    return !0;
  };
  a.begin = function () {};
  a._beginWithClear = function (a, d, e, f, g, h, k) {
    a = a || 0;
    d = d || 0;
    e = e || 0;
    f = isNaN(f) ? 255 : f;
    g = this._cacheContext.getContext();
    h = this._cacheCanvas;
    g.setTransform(1, 0, 0, 1, 0, 0);
    this._cacheContext.setFillStyle(
      "rgba(" + (0 | a) + "," + (0 | d) + "," + (0 | e) + "," + f / 255 + ")"
    );
    g.clearRect(0, 0, h.width, h.height);
    g.fillRect(0, 0, h.width, h.height);
  };
  a.end = function () {
    var a = this._node,
      d = cc.contentScaleFactor();
    cc.renderer._renderingToCacheCanvas(
      this._cacheContext,
      a.__instanceId,
      d,
      d
    );
    a = a.sprite._renderCmd;
    a._notifyRegionStatus &&
      a._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
  };
  a.clearRect = function (a, d, e, f) {
    this._cacheContext.clearRect(a, d, e, -f);
  };
  a.clearDepth = function (a) {
    cc.log("clearDepth isn't supported on Cocos2d-Html5");
  };
})();
(function () {
  cc.RenderTexture.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._depthRenderBuffer = this._textureCopy = this._oldFBO = this._fBO = null;
    this._rtTextureRect = new cc.Rect();
    this._fullRect = new cc.Rect();
    this._fullViewport = new cc.Rect();
  };
  var a = (cc.RenderTexture.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.RenderTexture.WebGLRenderCmd;
  a.setVirtualViewport = function (a, d, e) {
    this._rtTextureRect.x = a.x;
    this._rtTextureRect.y = a.y;
    this._fullRect = d;
    this._fullViewport = e;
  };
  a.needDraw = function () {
    return this._needDraw && this._node.autoDraw;
  };
  a.rendering = function (a) {
    var d = a || cc._renderContext;
    a = this._node;
    if (a.autoDraw) {
      a.begin();
      var e = a.clearFlags;
      if (e) {
        var f = [0, 0, 0, 0],
          g = 0,
          h = 0;
        e & d.COLOR_BUFFER_BIT &&
          ((f = d.getParameter(d.COLOR_CLEAR_VALUE)),
          d.clearColor(
            a._clearColor.r / 255,
            a._clearColor.g / 255,
            a._clearColor.b / 255,
            a._clearColor.a / 255
          ));
        e & d.DEPTH_BUFFER_BIT &&
          ((g = d.getParameter(d.DEPTH_CLEAR_VALUE)),
          d.clearDepth(a.clearDepthVal));
        e & d.STENCIL_BUFFER_BIT &&
          ((h = d.getParameter(d.STENCIL_CLEAR_VALUE)),
          d.clearStencil(a.clearStencilVal));
        d.clear(e);
        e & d.COLOR_BUFFER_BIT && d.clearColor(f[0], f[1], f[2], f[3]);
        e & d.DEPTH_BUFFER_BIT && d.clearDepth(g);
        e & d.STENCIL_BUFFER_BIT && d.clearStencil(h);
      }
      a.sortAllChildren();
      d = a._children;
      for (e = 0; e < d.length; e++)
        (f = d[e]), f !== a.sprite && f.visit(a.sprite);
      a.end();
    }
  };
  a.clearStencil = function (a) {
    var d = cc._renderContext,
      e = d.getParameter(d.STENCIL_CLEAR_VALUE);
    d.clearStencil(a);
    d.clear(d.STENCIL_BUFFER_BIT);
    d.clearStencil(e);
  };
  a.cleanup = function () {
    this._textureCopy = null;
    var a = cc._renderContext;
    a.deleteFramebuffer(this._fBO);
    this._depthRenderBuffer && a.deleteRenderbuffer(this._depthRenderBuffer);
  };
  a.updateClearColor = function (a) {};
  a.initWithWidthAndHeight = function (a, d, e, f) {
    var g = this._node;
    e === cc.Texture2D.PIXEL_FORMAT_A8 &&
      cc.log(
        "cc.RenderTexture._initWithWidthAndHeightForWebGL() : only RGB and RGBA formats are valid for a render texture;"
      );
    var h = cc._renderContext,
      k = cc.contentScaleFactor();
    this._fullRect = new cc.Rect(0, 0, a, d);
    this._fullViewport = new cc.Rect(0, 0, a, d);
    a = 0 | (a * k);
    d = 0 | (d * k);
    this._oldFBO = h.getParameter(h.FRAMEBUFFER_BINDING);
    var m;
    cc.configuration.supportsNPOT()
      ? ((k = a), (m = d))
      : ((k = cc.NextPOT(a)), (m = cc.NextPOT(d)));
    for (var n = new Uint8Array(k * m * 4), p = 0; p < k * m * 4; p++) n[p] = 0;
    this._pixelFormat = e;
    p = g._texture = new cc.Texture2D();
    if (!g._texture) return !1;
    p.initWithData(n, g._pixelFormat, k, m, cc.size(a, d));
    e = h.getParameter(h.RENDERBUFFER_BINDING);
    if (cc.configuration.checkForGLExtension("GL_QCOM")) {
      this._textureCopy = new cc.Texture2D();
      if (!this._textureCopy) return !1;
      this._textureCopy.initWithData(n, g._pixelFormat, k, m, cc.size(a, d));
    }
    this._fBO = h.createFramebuffer();
    h.bindFramebuffer(h.FRAMEBUFFER, this._fBO);
    h.framebufferTexture2D(
      h.FRAMEBUFFER,
      h.COLOR_ATTACHMENT0,
      h.TEXTURE_2D,
      p._webTextureObj,
      0
    );
    0 !== f &&
      ((this._depthRenderBuffer = h.createRenderbuffer()),
      h.bindRenderbuffer(h.RENDERBUFFER, this._depthRenderBuffer),
      h.renderbufferStorage(h.RENDERBUFFER, f, k, m),
      f === h.DEPTH_STENCIL
        ? h.framebufferRenderbuffer(
            h.FRAMEBUFFER,
            h.DEPTH_STENCIL_ATTACHMENT,
            h.RENDERBUFFER,
            this._depthRenderBuffer
          )
        : f === h.STENCIL_INDEX || f === h.STENCIL_INDEX8
        ? h.framebufferRenderbuffer(
            h.FRAMEBUFFER,
            h.STENCIL_ATTACHMENT,
            h.RENDERBUFFER,
            this._depthRenderBuffer
          )
        : f === h.DEPTH_COMPONENT16 &&
          h.framebufferRenderbuffer(
            h.FRAMEBUFFER,
            h.DEPTH_ATTACHMENT,
            h.RENDERBUFFER,
            this._depthRenderBuffer
          ));
    h.checkFramebufferStatus(h.FRAMEBUFFER) !== h.FRAMEBUFFER_COMPLETE &&
      cc.log("Could not attach texture to the framebuffer");
    p.setAliasTexParameters();
    a = g.sprite = new cc.Sprite(p);
    a.scaleY = -1;
    a.setBlendFunc(h.ONE, h.ONE_MINUS_SRC_ALPHA);
    h.bindRenderbuffer(h.RENDERBUFFER, e);
    h.bindFramebuffer(h.FRAMEBUFFER, this._oldFBO);
    g.autoDraw = !1;
    g.addChild(a);
    return !0;
  };
  a.begin = function () {
    var a = this._node;
    cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
    cc.kmGLPushMatrix();
    cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
    cc.kmGLPushMatrix();
    var d = cc._renderContext,
      e = cc.director;
    e.setProjection(e.getProjection());
    var f = a._texture.getContentSizeInPixels(),
      g = cc.director.getWinSizeInPixels(),
      e = g.width / f.width,
      f = g.height / f.height,
      e = cc.math.Matrix4.createOrthographicProjection(
        -1 / e,
        1 / e,
        -1 / f,
        1 / f,
        -1,
        1
      );
    cc.kmGLMultMatrix(e);
    e = new cc.Rect(0, 0, 0, 0);
    e.width = this._fullViewport.width;
    e.height = this._fullViewport.height;
    f = e.height / this._fullRect.height;
    e.x =
      (e.width / this._fullRect.width) *
      (this._fullRect.x - this._rtTextureRect.x);
    e.y = (this._fullRect.y - this._rtTextureRect.y) * f;
    d.viewport(e.x, e.y, e.width, e.height);
    this._oldFBO = d.getParameter(d.FRAMEBUFFER_BINDING);
    d.bindFramebuffer(d.FRAMEBUFFER, this._fBO);
    cc.configuration.checkForGLExtension("GL_QCOM") &&
      (d.framebufferTexture2D(
        d.FRAMEBUFFER,
        d.COLOR_ATTACHMENT0,
        d.TEXTURE_2D,
        this._textureCopy._webTextureObj,
        0
      ),
      d.clear(d.COLOR_BUFFER_BIT | d.DEPTH_BUFFER_BIT),
      d.framebufferTexture2D(
        d.FRAMEBUFFER,
        d.COLOR_ATTACHMENT0,
        d.TEXTURE_2D,
        a._texture._webTextureObj,
        0
      ));
  };
  a._beginWithClear = function (a, d, e, f, g, h, k) {
    a /= 255;
    d /= 255;
    e /= 255;
    f /= 255;
    var m = cc._renderContext,
      n = [0, 0, 0, 0],
      p = 0,
      r = 0;
    k & m.COLOR_BUFFER_BIT &&
      ((n = m.getParameter(m.COLOR_CLEAR_VALUE)), m.clearColor(a, d, e, f));
    k & m.DEPTH_BUFFER_BIT &&
      ((p = m.getParameter(m.DEPTH_CLEAR_VALUE)), m.clearDepth(g));
    k & m.STENCIL_BUFFER_BIT &&
      ((r = m.getParameter(m.STENCIL_CLEAR_VALUE)), m.clearStencil(h));
    m.clear(k);
    k & m.COLOR_BUFFER_BIT && m.clearColor(n[0], n[1], n[2], n[3]);
    k & m.DEPTH_BUFFER_BIT && m.clearDepth(p);
    k & m.STENCIL_BUFFER_BIT && m.clearStencil(r);
  };
  a.end = function () {
    cc.renderer._renderingToBuffer(this._node.__instanceId);
    var a = cc._renderContext,
      d = cc.director;
    a.bindFramebuffer(a.FRAMEBUFFER, this._oldFBO);
    d.setViewport();
    cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
    cc.kmGLPopMatrix();
    cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
    cc.kmGLPopMatrix();
  };
  a.clearRect = function (a, d, e, f) {};
  a.clearDepth = function (a) {
    var d = this._node;
    d.begin();
    var e = cc._renderContext,
      f = e.getParameter(e.DEPTH_CLEAR_VALUE);
    e.clearDepth(a);
    e.clear(e.DEPTH_BUFFER_BIT);
    e.clearDepth(f);
    d.end();
  };
})();
cc.LabelBMFont = cc.SpriteBatchNode.extend({
  _opacityModifyRGB: !1,
  _string: "",
  _config: null,
  _fntFile: "",
  _initialString: "",
  _alignment: cc.TEXT_ALIGNMENT_CENTER,
  _width: -1,
  _lineBreakWithoutSpaces: !1,
  _imageOffset: null,
  _textureLoaded: !1,
  _className: "LabelBMFont",
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new cc.LabelBMFont.WebGLRenderCmd(this)
      : new cc.LabelBMFont.CanvasRenderCmd(this);
  },
  _setString: function (a, b) {
    b ? (this._initialString = a) : (this._string = a);
    var d = this._children;
    if (d)
      for (var e = 0; e < d.length; e++) {
        var f = d[e];
        f && f.setVisible(!1);
      }
    this._textureLoaded &&
      (this._string && 0 < this._string.length && this.createFontChars(),
      b && this.updateLabel());
  },
  ctor: function (a, b, d, e, f) {
    cc.SpriteBatchNode.prototype.ctor.call(this);
    this._imageOffset = cc.p(0, 0);
    this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
    this.initWithString(a, b, d, e, f);
  },
  textureLoaded: function () {
    return this._textureLoaded;
  },
  addLoadedEventListener: function (a, b) {
    this.addEventListener("load", a, b);
  },
  isOpacityModifyRGB: function () {
    return this._opacityModifyRGB;
  },
  setOpacityModifyRGB: function (a) {
    this._opacityModifyRGB = a;
    if ((a = this._children))
      for (var b = 0; b < a.length; b++) {
        var d = a[b];
        d && (d.opacityModifyRGB = this._opacityModifyRGB);
      }
  },
  _changeTextureColor: function () {
    this._renderCmd._changeTextureColor();
  },
  init: function () {
    return this.initWithString(null, null, null, null, null);
  },
  initWithString: function (a, b, d, e, f) {
    a = a || "";
    this._config &&
      cc.log("cc.LabelBMFont.initWithString(): re-init is no longer supported");
    var g;
    if (b) {
      g = cc.loader.getRes(b);
      if (
        !g &&
        ((g = cc.FntFrameCache[b] || cc.FntFrameCache[cc.path.basename(b)]), !g)
      )
        return (
          cc.log(
            "cc.LabelBMFont.initWithString(): Impossible to create font. Please check file"
          ),
          !1
        );
      this._config = g;
      this._fntFile = b;
      b = g.atlasName;
      (b =
        cc.spriteFrameCache.getSpriteFrame(b) ||
        cc.spriteFrameCache.getSpriteFrame(cc.path.basename(b)))
        ? ((g = b.getTexture()), (this._spriteFrame = b))
        : (g = cc.textureCache.addImage(g.atlasName));
      (this._textureLoaded = b = g.isLoaded()) ||
        g.addEventListener(
          "load",
          function (a) {
            this._textureLoaded = !0;
            this.initWithTexture(a, this._initialString.length);
            this.setString(this._initialString, !0);
            this.dispatchEvent("load");
          },
          this
        );
    } else
      (g = new cc.Texture2D()),
        (b = new Image()),
        g.initWithElement(b),
        (this._textureLoaded = !1);
    return this.initWithTexture(g, a.length)
      ? ((this._alignment = e || cc.TEXT_ALIGNMENT_LEFT),
        (this._imageOffset = f || cc.p(0, 0)),
        (this._width = void 0 === d ? -1 : d),
        (this._realOpacity = 255),
        (this._realColor = cc.color(255, 255, 255, 255)),
        (this._contentSize.width = 0),
        (this._contentSize.height = 0),
        this.setAnchorPoint(0.5, 0.5),
        this.setString(a, !0),
        !0)
      : !1;
  },
  createFontChars: function () {
    var a = this._string,
      b = a ? a.length : 0,
      d = this._renderCmd,
      e = d._texture || this._texture,
      f = 0,
      g = cc.size(0, 0),
      h = 0,
      k = 1,
      m,
      n = this._config,
      p = n.kerningDict,
      r = n.commonHeight,
      s = n.fontDefDictionary;
    for (m = 0; m < b - 1; m++) 10 === a.charCodeAt(m) && k++;
    var u = r * k,
      k = -(r - r * k),
      v = -1,
      t;
    for (m = 0; m < b; m++)
      if (((r = a.charCodeAt(m)), 0 !== r))
        if (10 === r) (f = 0), (k -= n.commonHeight);
        else {
          v = p[(v << 16) | (r & 65535)] || 0;
          t = s[r];
          t ||
            (cc.log("cocos2d: LabelBMFont: character not found " + a[m]),
            (t = {
              rect: { x: 0, y: 0, width: 0, height: 0 },
              xOffset: 0,
              yOffset: 0,
              xAdvance: 0,
            }));
          var w = cc.rect(t.rect.x, t.rect.y, t.rect.width, t.rect.height),
            w = cc.rectPixelsToPoints(w);
          w.x += this._imageOffset.x;
          w.y += this._imageOffset.y;
          var x = !1;
          if (this._spriteFrame) {
            var y = this._spriteFrame._rect;
            if (this._spriteFrame._rotated) {
              var x = !0,
                B = w.x;
              w.x = w.y + y.x;
              w.y = B + y.y;
            } else (w.x += y.x), (w.y += y.y);
          }
          (y = this.getChildByTag(m))
            ? d._updateCharTexture(y, w, r, x)
            : ((y = new cc.Sprite()),
              y.initWithTexture(e, w, x),
              (y._newTextureWhenChangeColor = !0),
              this.addChild(y, 0, m));
          y.opacityModifyRGB = this._opacityModifyRGB;
          d._updateCharColorAndOpacity(y);
          w = cc.p(
            f + t.xOffset + 0.5 * t.rect.width + v,
            k +
              (n.commonHeight - t.yOffset) -
              0.5 * w.height * cc.contentScaleFactor()
          );
          y.setPosition(cc.pointPixelsToPoints(w));
          f += t.xAdvance + v;
          v = r;
          h < f && (h = f);
        }
    g.width =
      t && t.xAdvance < t.rect.width ? h - t.xAdvance + t.rect.width : h;
    g.height = u;
    this.setContentSize(cc.sizePixelsToPoints(g));
  },
  updateString: function (a) {
    var b = this._children;
    if (b)
      for (var d = 0, e = b.length; d < e; d++) {
        var f = b[d];
        f && (f.visible = !1);
      }
    this._config &&
      this._string &&
      0 < this._string.length &&
      this.createFontChars();
    a || this.updateLabel();
  },
  getString: function () {
    return this._initialString;
  },
  setString: function (a, b) {
    a = String(a);
    void 0 === b && (b = !0);
    if (void 0 === a || "string" !== typeof a) a += "";
    this._initialString = a;
    this._setString(a, b);
  },
  _setStringForSetter: function (a) {
    this.setString(a, !1);
  },
  setCString: function (a) {
    this.setString(a, !0);
  },
  _getCharsWidth: function (a, b) {
    if (0 >= b) return 0;
    var d = this.getChildByTag(a),
      e = this.getChildByTag(a + b);
    return this._getLetterPosXLeft(e) - this._getLetterPosXLeft(d);
  },
  _checkWarp: function (a, b, d, e) {
    for (var f = a[b], g = 0, h = 0; h < b; h++) g += a[h].length;
    var g = g + b - e,
      k = this._getCharsWidth(g, a[b].length - 1);
    if (k > d && 1 < f.length) {
      e = ((d / k) * f.length) | 0;
      for (
        var h = f.substr(e),
          m = k - this._getCharsWidth(g + e, h.length - 1),
          n,
          p = 0,
          r = 0;
        m > d && 100 > r++;

      )
        (e *= d / m),
          (e |= 0),
          (h = f.substr(e)),
          (m = k - this._getCharsWidth(g + e, h.length - 1));
      for (r = 0; m < d && 100 > r++; )
        h &&
          ((p = (n = cc.LabelTTF._wordRex.exec(h)) ? n[0].length : 1), (n = h)),
          this._lineBreakWithoutSpaces && (p = 0),
          (e += p),
          (h = f.substr(e)),
          (m = k - this._getCharsWidth(g + e, h.length - 1));
      e -= p;
      0 === e && ((e = 1), (n = n.substr(1)));
      d = f.substr(0, e);
      cc.LabelTTF.wrapInspection &&
        cc.LabelTTF._symbolRex.test(n || h) &&
        ((p = (g = cc.LabelTTF._lastWordRex.exec(d)) ? g[0].length : 0),
        this._lineBreakWithoutSpaces && (p = 0),
        (e -= p),
        (n = f.substr(e)),
        (d = f.substr(0, e)));
      cc.LabelTTF._firsrEnglish.test(n) &&
        (g = cc.LabelTTF._lastEnglish.exec(d)) &&
        d !== g[0] &&
        ((p = g[0].length),
        this._lineBreakWithoutSpaces && (p = 0),
        (e -= p),
        (n = f.substr(e)),
        (d = f.substr(0, e)));
      a[b] = n || h;
      a.splice(b, 0, d);
    }
  },
  updateLabel: function () {
    this.string = this._initialString;
    var a, b, d;
    if (0 < this._width) {
      var e = this.string.split("\n"),
        f = "",
        g = 0,
        h = 0;
      for (a = 0; a < e.length; a++)
        (h = e.length),
          this._checkWarp(e, a, this._width * this._scaleX, g),
          h < e.length && g++,
          0 < a && (f += "\n"),
          (f += e[a]);
      f += String.fromCharCode(0);
      this._setString(f, !1);
    }
    if (this._alignment !== cc.TEXT_ALIGNMENT_LEFT)
      for (e = a = 0, f = this._string.length, g = [], h = 0; h < f; h++)
        if (
          10 === this._string[h].charCodeAt(0) ||
          0 === this._string[h].charCodeAt(0)
        ) {
          b = 0;
          var k = g.length;
          if (0 === k) e++;
          else if (((d = a + k - 1 + e), !(0 > d))) {
            var m = this.getChildByTag(d);
            if (null != m) {
              b = m.getPositionX() + m._getWidth() / 2;
              m = 0;
              switch (this._alignment) {
                case cc.TEXT_ALIGNMENT_CENTER:
                  m = this.width / 2 - b / 2;
                  break;
                case cc.TEXT_ALIGNMENT_RIGHT:
                  m = this.width - b;
              }
              if (0 !== m)
                for (b = 0; b < k; b++)
                  (d = a + b + e),
                    0 > d || ((d = this.getChildByTag(d)) && (d.x += m));
              a += k;
              e++;
              g.length = 0;
            }
          }
        } else g.push(this._string[a]);
  },
  setAlignment: function (a) {
    this._alignment = a;
    this.updateLabel();
  },
  _getAlignment: function () {
    return this._alignment;
  },
  setBoundingWidth: function (a) {
    this._width = a;
    this.updateLabel();
  },
  _getBoundingWidth: function () {
    return this._width;
  },
  setLineBreakWithoutSpace: function (a) {
    this._lineBreakWithoutSpaces = a;
    this.updateLabel();
  },
  setScale: function (a, b) {
    cc.Node.prototype.setScale.call(this, a, b);
    this.updateLabel();
  },
  setScaleX: function (a) {
    cc.Node.prototype.setScaleX.call(this, a);
    this.updateLabel();
  },
  setScaleY: function (a) {
    cc.Node.prototype.setScaleY.call(this, a);
    this.updateLabel();
  },
  setFntFile: function (a) {
    if (null != a && a !== this._fntFile) {
      var b = cc.loader.getRes(a);
      b
        ? ((this._fntFile = a),
          (this._config = b),
          (a = cc.textureCache.addImage(b.atlasName)),
          (this._textureLoaded = b = a.isLoaded())
            ? (this.setTexture(a),
              this._string && 0 < this._string.length && this.createFontChars())
            : a.addEventListener(
                "load",
                function (a) {
                  this._textureLoaded = !0;
                  this.setTexture(a);
                  this._string &&
                    0 < this._string.length &&
                    this.createFontChars();
                  this._changeTextureColor();
                  this.updateLabel();
                  this.dispatchEvent("load");
                },
                this
              ))
        : cc.log(
            "cc.LabelBMFont.setFntFile() : Impossible to create font. Please check file"
          );
    }
  },
  getFntFile: function () {
    return this._fntFile;
  },
  setTexture: function (a) {
    this._texture = a;
    this._renderCmd.setTexture(a);
  },
  setAnchorPoint: function (a, b) {
    cc.Node.prototype.setAnchorPoint.call(this, a, b);
    this.updateLabel();
  },
  _setAnchorX: function (a) {
    cc.Node.prototype._setAnchorX.call(this, a);
    this.updateLabel();
  },
  _setAnchorY: function (a) {
    cc.Node.prototype._setAnchorY.call(this, a);
    this.updateLabel();
  },
  _atlasNameFromFntFile: function (a) {},
  _kerningAmountForFirst: function (a, b) {
    var d = 0;
    if (this._configuration.kerningDictionary) {
      var e = this._configuration.kerningDictionary[
        ((a << 16) | (b & 65535)).toString()
      ];
      e && (d = e.amount);
    }
    return d;
  },
  _getLetterPosXLeft: function (a) {
    return (
      a.getPositionX() * this._scaleX -
      a._getWidth() * this._scaleX * a._getAnchorX()
    );
  },
  _getLetterPosXRight: function (a) {
    return (
      a.getPositionX() * this._scaleX +
      a._getWidth() * this._scaleX * a._getAnchorX()
    );
  },
  _isspace_unicode: function (a) {
    a = a.charCodeAt(0);
    return (
      (9 <= a && 13 >= a) ||
      32 === a ||
      133 === a ||
      160 === a ||
      5760 === a ||
      (8192 <= a && 8202 >= a) ||
      8232 === a ||
      8233 === a ||
      8239 === a ||
      8287 === a ||
      12288 === a
    );
  },
  _utf8_trim_ws: function (a) {
    var b = a.length;
    if (!(0 >= b) && ((b -= 1), this._isspace_unicode(a[b]))) {
      for (var d = b - 1; 0 <= d; --d)
        if (this._isspace_unicode(a[d])) b = d;
        else break;
      this._utf8_trim_from(a, b);
    }
  },
  _utf8_trim_from: function (a, b) {
    var d = a.length;
    b >= d || 0 > b || a.splice(b, d);
  },
});
(function () {
  var a = cc.LabelBMFont.prototype;
  cc.EventHelper.prototype.apply(a);
  cc.defineGetterSetter(a, "string", a.getString, a._setStringForSetter);
  cc.defineGetterSetter(
    a,
    "boundingWidth",
    a._getBoundingWidth,
    a.setBoundingWidth
  );
  cc.defineGetterSetter(a, "textAlign", a._getAlignment, a.setAlignment);
  cc.defineGetterSetter(a, "texture", a.getTexture, a.setTexture);
})();
cc.LabelBMFont.create = function (a, b, d, e, f) {
  return new cc.LabelBMFont(a, b, d, e, f);
};
cc.FntFrameCache = {};
var _fntLoader = {
  FNT_HEAD: /fntframes [^\n]*(\n|$)/gi,
  FNT_FRAME_NAME: /fntframe [^\n]*(\n|$)/gi,
  INFO_EXP: /info [^\n]*(\n|$)/gi,
  COMMON_EXP: /common [^\n]*(\n|$)/gi,
  PAGE_EXP: /page [^\n]*(\n|$)/gi,
  CHAR_EXP: /char [^\n]*(\n|$)/gi,
  KERNING_EXP: /kerning [^\n]*(\n|$)/gi,
  ITEM_EXP: /\w+=[^ \r\n]+/gi,
  INT_EXP: /^[\-]?\d+$/,
  _parseStrToObj: function (a) {
    a = a.match(this.ITEM_EXP);
    var b = {};
    if (a)
      for (var d = 0, e = a.length; d < e; d++) {
        var f = a[d],
          g = f.indexOf("\x3d"),
          h = f.substring(0, g),
          f = f.substring(g + 1);
        f.match(this.INT_EXP)
          ? (f = parseInt(f))
          : '"' === f[0] && (f = f.substring(1, f.length - 1));
        b[h] = f;
      }
    return b;
  },
  _parseFntContent: function (a, b, d, e) {
    var f = this._parseStrToObj(b.match(this.COMMON_EXP)[0]);
    a.commonHeight = f.lineHeight;
    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
      var g = cc.configuration.getMaxTextureSize();
      (f.scaleW > g.width || f.scaleH > g.height) &&
        cc.log(
          "cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported"
        );
    }
    1 !== f.pages &&
      cc.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page");
    f = this._parseStrToObj(b.match(this.PAGE_EXP)[0]);
    0 !== f.id &&
      cc.log("cc.LabelBMFont._parseImageFileName() : file could not be found");
    a.atlasName = e
      ? cc.path.join(cc.path.dirname(e.path) + f.file)
      : cc.path.changeBasename(d, f.file);
    f = b.match(this.CHAR_EXP);
    g = a.fontDefDictionary = {};
    d = 0;
    for (e = f.length; d < e; d++) {
      var h = this._parseStrToObj(f[d]);
      g[h.id] = {
        rect: { x: h.x, y: h.y, width: h.width, height: h.height },
        xOffset: h.xoffset,
        yOffset: h.yoffset,
        xAdvance: h.xadvance,
      };
    }
    f = a.kerningDict = {};
    if ((b = b.match(this.KERNING_EXP)))
      for (d = 0, e = b.length; d < e; d++)
        (g = this._parseStrToObj(b[d])),
          (f[(g.first << 16) | (g.second & 65535)] = g.amount);
    return a;
  },
  parseFnt: function (a, b) {
    var d = {},
      e = a.match(this.FNT_HEAD);
    if (e) {
      var f = this._parseStrToObj(e[0]);
      if (f && f.count) {
        a = a.substr(e[0].length);
        for (var e = a.split("----"), g = 0; g < f.count; ++g) {
          var h = e[g],
            k = h.match(this.FNT_FRAME_NAME);
          if (k) {
            var m = this._parseStrToObj(k[0]);
            if (m && m.name) {
              var d = {},
                n = cc.path.join(cc.path.dirname(b), m.name);
              cc.FntFrameCache[n] = this._parseFntContent(
                d,
                h.substr(k[0].length),
                b,
                { path: m.name }
              );
            }
          }
        }
      }
    } else d = this._parseFntContent(d, a, b);
    return d;
  },
  load: function (a, b, d, e) {
    var f = this;
    cc.loader.loadTxt(a, function (a, d) {
      if (a) return e(a);
      e(null, f.parseFnt(d, b));
    });
  },
};
cc.loader.register(["fnt"], _fntLoader);
(function () {
  cc.LabelBMFont.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
  };
  var a = (cc.LabelBMFont.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.LabelBMFont.CanvasRenderCmd;
  a._updateCharTexture = function (a, d, e) {
    32 === e
      ? a.setTextureRect(d, !1, cc.size(0, 0))
      : (a.setTextureRect(d, !1), (a.visible = !0));
  };
  a._updateCharColorAndOpacity = function (a) {
    a._displayedColor = this._displayedColor;
    a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
    a._displayedOpacity = this._displayedOpacity;
    a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  };
  a.setTexture = function (a) {
    for (
      var d = this._node, e = d._children, f = this._displayedColor, g = 0;
      g < e.length;
      g++
    ) {
      var h = e[g],
        k = h._renderCmd,
        m = k._displayedColor;
      if (
        d._texture === k._texture ||
        (m.r === f.r && m.g === f.g && m.b === f.b)
      )
        h.texture = a;
    }
    d._texture = a;
  };
  a._changeTextureColor = function () {
    var a = this._node,
      d = a._texture,
      e = d.getContentSize(),
      f = a._texture,
      g = f.getHtmlElementObj(),
      h = this._displayedColor,
      k = cc.rect(0, 0, g.width, g.height);
    d &&
      0 < e.width &&
      g &&
      ((d = f._generateColorTexture(h.r, h.g, h.b, k)), a.setTexture(d));
  };
  a._updateChildrenDisplayedOpacity = function (a) {
    cc.Node.prototype.updateDisplayedOpacity.call(a, this._displayedOpacity);
  };
  a._updateChildrenDisplayedColor = function (a) {
    cc.Node.prototype.updateDisplayedColor.call(a, this._displayedColor);
  };
})();
(function () {
  cc.LabelBMFont.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
  };
  var a = (cc.LabelBMFont.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.LabelBMFont.WebGLRenderCmd;
  a.setTexture = function (a) {
    this._node.setOpacityModifyRGB(this._node._texture.hasPremultipliedAlpha());
  };
  a._updateCharTexture = function (a, d, e, f) {
    a.setTextureRect(d, f);
    a.visible = !0;
  };
  a._changeTextureColor = function () {};
  a._updateCharColorAndOpacity = function () {};
})();
cc.LabelAtlas = cc.LabelBMFont.extend({
  _className: "LabelAtlas",
  ctor: function (a, b, d, e, f) {
    cc.SpriteBatchNode.prototype.ctor.call(this);
    this._imageOffset = cc.p(0, 0);
    this._cascadeOpacityEnabled = this._cascadeColorEnabled = !0;
    b && cc.LabelAtlas.prototype.initWithString.call(this, a, b, d, e, f);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new cc.LabelBMFont.WebGLRenderCmd(this)
      : new cc.LabelBMFont.CanvasRenderCmd(this);
  },
  _createFntConfig: function (a, b, d, e) {
    var f = {};
    f.commonHeight = d;
    var g = (f.fontDefDictionary = {}),
      h = a.pixelsWidth;
    a = a.pixelsHeight;
    e = e.charCodeAt(0);
    for (var k = 0, m = d; m <= a; m += d)
      for (var n = 0; n < h; n += b)
        (g[e + k] = {
          rect: { x: n, y: m - d, width: b, height: d },
          xOffset: 0,
          yOffset: 0,
          xAdvance: b,
        }),
          ++k;
    f.kerningDict = {};
    return f;
  },
  initWithString: function (a, b, d, e, f) {
    var g;
    this._string = this._initialString = a = a + "" || "";
    if (void 0 === d) {
      f = cc.loader.getRes(b);
      if (1 !== parseInt(f.version, 10))
        return (
          cc.log(
            "cc.LabelAtlas.initWithString(): Unsupported version. Upgrade cocos2d version"
          ),
          !1
        );
      g = cc.path.changeBasename(b, f.textureFilename);
      e = cc.contentScaleFactor();
      d = parseInt(f.itemWidth, 10) / e;
      e = parseInt(f.itemHeight, 10) / e;
      f = String.fromCharCode(parseInt(f.firstChar, 10));
    } else (g = b), (d = d || 0), (e = e || 0), (f = f || " ");
    if (b) {
      this._fntFile = "dummy_fnt_file:" + g;
      b = g;
      var h =
        cc.spriteFrameCache.getSpriteFrame(b) ||
        cc.spriteFrameCache.getSpriteFrame(cc.path.basename(b));
      h
        ? ((b = h.getTexture()), (this._spriteFrame = h))
        : (b = cc.textureCache.addImage(g));
      d = this._createFntConfig(b, d, e, f);
      d.atlasName = g;
      this._config = d;
      (this._textureLoaded = g = b.isLoaded()) ||
        b.addEventListener(
          "load",
          function (a) {
            this._textureLoaded = !0;
            this.initWithTexture(a, this._initialString.length);
            this.setString(this._initialString, !0);
            this.dispatchEvent("load");
          },
          this
        );
    } else
      (b = new cc.Texture2D()),
        (g = new Image()),
        b.initWithElement(g),
        (this._textureLoaded = !1);
    return this.initWithTexture(b, a.length)
      ? ((this._alignment = cc.TEXT_ALIGNMENT_LEFT),
        (this._imageOffset = cc.p(0, 0)),
        (this._width = -1),
        (this._realOpacity = 255),
        (this._realColor = cc.color(255, 255, 255, 255)),
        (this._contentSize.width = 0),
        (this._contentSize.height = 0),
        this.setString(a, !0),
        !0)
      : !1;
  },
  setFntFile: function () {
    cc.warn("setFntFile doesn't support with LabelAtlas.");
  },
});
cc.LabelAtlas.create = function (a, b, d, e, f) {
  return new cc.LabelAtlas(a, b, d, e, f);
};
(function () {
  cc.LabelAtlas.CanvasRenderCmd = function (a) {
    cc.AtlasNode.CanvasRenderCmd.call(this, a);
    this._needDraw = !1;
  };
  var a = (cc.LabelAtlas.CanvasRenderCmd.prototype = Object.create(
    cc.AtlasNode.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.LabelAtlas.CanvasRenderCmd;
  a.setCascade = function () {
    var a = this._node;
    a._cascadeOpacityEnabled = !0;
    a._cascadeColorEnabled = !1;
  };
  a.updateAtlasValues = function () {
    for (
      var a = this._node,
        d = a._string || "",
        e = d.length,
        f = this._textureToRender,
        g = a._itemWidth,
        h = a._itemHeight,
        k = 0,
        m = -1;
      k < e;
      k++
    ) {
      var n = d.charCodeAt(k) - a._mapStartChar.charCodeAt(0),
        p = parseInt(n % a._itemsPerRow, 10),
        n = parseInt(n / a._itemsPerRow, 10);
      if (
        !(
          0 > p ||
          0 > n ||
          ((p = cc.rect(p * g, n * h, g, h)),
          (n = f._contentSize),
          0 > p.x ||
            0 > p.y ||
            p.x + p.width > n.width ||
            p.y + p.height > n.height)
        )
      ) {
        m++;
        var n = d.charCodeAt(k),
          r = a.getChildByTag(k);
        r
          ? 32 === n
            ? (r.init(),
              r.setTextureRect(cc.rect(0, 0, 10, 10), !1, cc.size(0, 0)))
            : (r.initWithTexture(f, p), (r.visible = !0))
          : ((r = new cc.Sprite()),
            32 === n
              ? (r.init(),
                r.setTextureRect(cc.rect(0, 0, 10, 10), !1, cc.size(0, 0)))
              : r.initWithTexture(f, p),
            cc.Node.prototype.addChild.call(a, r, 0, k));
        r.setPosition(m * g + g / 2, h / 2);
      }
    }
    this.updateContentSize(k, m + 1);
  };
  a.updateContentSize = function (a, d) {
    var e = this._node,
      f = e._contentSize;
    a !== d &&
      a * e._itemWidth === f.width &&
      e._itemHeight === f.height &&
      e.setContentSize(d * e._itemWidth, e._itemHeight);
  };
  a.setString = function (a) {
    a = this._node;
    if (a._children) {
      a = a._children;
      for (var d = a.length, e = 0; e < d; e++) {
        var f = a[e];
        f && !f._lateChild && (f.visible = !1);
      }
    }
  };
  a._addChild = function () {
    child._lateChild = !0;
  };
})();
(function () {
  cc.LabelAtlas.WebGLRenderCmd = function (a) {
    cc.AtlasNode.WebGLRenderCmd.call(this, a);
    this._needDraw = !0;
  };
  var a = (cc.LabelAtlas.WebGLRenderCmd.prototype = Object.create(
    cc.AtlasNode.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.LabelAtlas.WebGLRenderCmd;
  a._updateColor = function () {
    if (this._colorF32Array) {
      var a = this._displayedColor,
        d = this._displayedOpacity / 255;
      this._node._opacityModifyRGB
        ? ((this._colorF32Array[0] = (a.r * d) / 255),
          (this._colorF32Array[1] = (a.g * d) / 255),
          (this._colorF32Array[2] = (a.b * d) / 255))
        : ((this._colorF32Array[0] = a.r / 255),
          (this._colorF32Array[1] = a.g / 255),
          (this._colorF32Array[2] = a.b / 255));
      this._colorF32Array[3] = d;
    }
  };
  a.setCascade = function () {
    var a = this._node;
    a._cascadeOpacityEnabled = !0;
    a._cascadeColorEnabled = !0;
  };
  a.rendering = function (a) {
    cc.AtlasNode.WebGLRenderCmd.prototype.rendering.call(this, a);
    if (cc.LABELATLAS_DEBUG_DRAW) {
      var d = this._node;
      a = d.getContentSize();
      var d = d.getBoundingBoxToWorld(),
        e = d.x,
        f = d.y;
      a.width = d.width;
      a.height = d.height;
      a = [
        cc.p(e, f),
        cc.p(e + a.width, f),
        cc.p(a.width + e, a.height + f),
        cc.p(e, f + a.height),
      ];
      cc._drawingUtil.drawPoly(a, 4, !0);
    }
  };
  a.updateAtlasValues = function () {
    var a = this._node,
      d = a._string,
      e = d.length,
      f = this._textureAtlas,
      g = f.texture,
      h = g.pixelsWidth,
      g = g.pixelsHeight,
      k = a._itemWidth,
      m = a._itemHeight;
    a._ignoreContentScaleFactor ||
      ((k = a._itemWidth * cc.contentScaleFactor()),
      (m = a._itemHeight * cc.contentScaleFactor()));
    e > f.getCapacity() &&
      cc.log("cc.LabelAtlas._updateAtlasValues(): Invalid String length");
    for (
      var n = f.quads, p = a._itemWidth, r = a._itemHeight, s = 0, u = -1;
      s < e;
      s++
    ) {
      var v = d.charCodeAt(s) - a._mapStartChar.charCodeAt(0),
        t = v % a._itemsPerRow,
        w = 0 | (v / a._itemsPerRow);
      if (!(0 > t || 0 > w || t * p + p > h || w * r + r > g)) {
        u++;
        var x;
        cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL
          ? ((t = (2 * t * k + 1) / (2 * h)),
            (v = t + (2 * k - 2) / (2 * h)),
            (w = (2 * w * m + 1) / (2 * g)),
            (x = w + (2 * m - 2) / (2 * g)))
          : ((t = (t * k) / h),
            (v = t + k / h),
            (w = (w * m) / g),
            (x = w + m / g));
        var y = n[s],
          B = y.tl,
          A = y.tr,
          z = y.bl,
          y = y.br;
        B.texCoords.u = t;
        B.texCoords.v = w;
        A.texCoords.u = v;
        A.texCoords.v = w;
        z.texCoords.u = t;
        z.texCoords.v = x;
        y.texCoords.u = v;
        y.texCoords.v = x;
        z.vertices.x = u * p;
        z.vertices.y = 0;
        z.vertices.z = 0;
        y.vertices.x = u * p + p;
        y.vertices.y = 0;
        y.vertices.z = 0;
        B.vertices.x = u * p;
        B.vertices.y = a._itemHeight;
        B.vertices.z = 0;
        A.vertices.x = u * p + p;
        A.vertices.y = a._itemHeight;
        A.vertices.z = 0;
      }
    }
    this._updateColor();
    this.updateContentSize(s, u + 1);
    0 < e &&
      ((f.dirty = !0),
      (a = f.totalQuads),
      e > a && f.increaseTotalQuadsWith(e - a));
  };
  a.updateContentSize = function (a, d) {
    var e = this._node,
      f = e._contentSize;
    a !== d &&
      a * e._itemWidth === f.width &&
      e._itemHeight === f.height &&
      e.setContentSize(d * e._itemWidth, e._itemHeight);
  };
  a.setString = function (a) {
    a = a.length;
    a > this._textureAtlas.totalQuads && this._textureAtlas.resizeCapacity(a);
  };
  a._addChild = function () {};
})();
cc.MotionStreak = cc.Node.extend({
  texture: null,
  fastMode: !1,
  startingPositionInitialized: !1,
  _blendFunc: null,
  _stroke: 0,
  _fadeDelta: 0,
  _minSeg: 0,
  _maxPoints: 0,
  _nuPoints: 0,
  _previousNuPoints: 0,
  _pointVertexes: null,
  _pointState: null,
  _vertices: null,
  _colorPointer: null,
  _texCoords: null,
  _verticesBuffer: null,
  _colorPointerBuffer: null,
  _texCoordsBuffer: null,
  _className: "MotionStreak",
  ctor: function (a, b, d, e, f) {
    cc.Node.prototype.ctor.call(this);
    this._positionR = cc.p(0, 0);
    this._blendFunc = new cc.BlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
    this.startingPositionInitialized = this.fastMode = !1;
    this.texture = null;
    this._previousNuPoints = this._nuPoints = this._maxPoints = this._minSeg = this._fadeDelta = this._stroke = 0;
    this._texCoordsBuffer = this._colorPointerBuffer = this._verticesBuffer = this._texCoords = this._colorPointer = this._vertices = this._pointState = this._pointVertexes = null;
    void 0 !== f && this.initWithFade(a, b, d, e, f);
  },
  getTexture: function () {
    return this.texture;
  },
  setTexture: function (a) {
    this.texture !== a && (this.texture = a);
  },
  getBlendFunc: function () {
    return this._blendFunc;
  },
  setBlendFunc: function (a, b) {
    void 0 === b
      ? (this._blendFunc = a)
      : ((this._blendFunc.src = a), (this._blendFunc.dst = b));
  },
  getOpacity: function () {
    cc.log("cc.MotionStreak.getOpacity has not been supported.");
    return 0;
  },
  setOpacity: function (a) {
    cc.log("cc.MotionStreak.setOpacity has not been supported.");
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  isFastMode: function () {
    return this.fastMode;
  },
  setFastMode: function (a) {
    this.fastMode = a;
  },
  isStartingPositionInitialized: function () {
    return this.startingPositionInitialized;
  },
  setStartingPositionInitialized: function (a) {
    this.startingPositionInitialized = a;
  },
  getStroke: function () {
    return this._stroke;
  },
  setStroke: function (a) {
    this._stroke = a;
  },
  initWithFade: function (a, b, d, e, f) {
    if (!f)
      throw Error(
        "cc.MotionStreak.initWithFade(): Invalid filename or texture"
      );
    cc.isString(f) && (f = cc.textureCache.addImage(f));
    cc.Node.prototype.setPosition.call(this, cc.p(0, 0));
    this.anchorY = this.anchorX = 0;
    this.ignoreAnchor = !0;
    this.startingPositionInitialized = !1;
    this.fastMode = !0;
    this._minSeg = -1 === b ? d / 5 : b;
    this._minSeg *= this._minSeg;
    this._stroke = d;
    this._fadeDelta = 1 / a;
    this._maxPoints = a = (0 | (60 * a)) + 2;
    this._nuPoints = 0;
    this._pointState = new Float32Array(a);
    this._pointVertexes = new Float32Array(2 * a);
    this._vertices = new Float32Array(4 * a);
    this._texCoords = new Float32Array(4 * a);
    this._colorPointer = new Uint8Array(8 * a);
    this._verticesBuffer = gl.createBuffer();
    this._texCoordsBuffer = gl.createBuffer();
    this._colorPointerBuffer = gl.createBuffer();
    this._blendFunc.src = gl.SRC_ALPHA;
    this._blendFunc.dst = gl.ONE_MINUS_SRC_ALPHA;
    this.texture = f;
    this.color = e;
    this.scheduleUpdate();
    gl.bindBuffer(gl.ARRAY_BUFFER, this._verticesBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, this._vertices, gl.DYNAMIC_DRAW);
    gl.bindBuffer(gl.ARRAY_BUFFER, this._texCoordsBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, this._texCoords, gl.DYNAMIC_DRAW);
    gl.bindBuffer(gl.ARRAY_BUFFER, this._colorPointerBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, this._colorPointer, gl.DYNAMIC_DRAW);
    return !0;
  },
  tintWithColor: function (a) {
    this.color = a;
    for (var b = this._colorPointer, d = 0, e = 2 * this._nuPoints; d < e; d++)
      (b[4 * d] = a.r), (b[4 * d + 1] = a.g), (b[4 * d + 2] = a.b);
  },
  reset: function () {
    this._nuPoints = 0;
  },
  setPosition: function (a, b) {
    this.startingPositionInitialized = !0;
    void 0 === b
      ? ((this._positionR.x = a.x), (this._positionR.y = a.y))
      : ((this._positionR.x = a), (this._positionR.y = b));
  },
  getPositionX: function () {
    return this._positionR.x;
  },
  setPositionX: function (a) {
    this._positionR.x = a;
    this.startingPositionInitialized || (this.startingPositionInitialized = !0);
  },
  getPositionY: function () {
    return this._positionR.y;
  },
  setPositionY: function (a) {
    this._positionR.y = a;
    this.startingPositionInitialized || (this.startingPositionInitialized = !0);
  },
  update: function (a) {
    if (this.startingPositionInitialized) {
      this._renderCmd._updateDisplayColor();
      a *= this._fadeDelta;
      var b,
        d,
        e,
        f,
        g = 0,
        h = this._nuPoints,
        k = this._pointState,
        m = this._pointVertexes,
        n = this._vertices,
        p = this._colorPointer;
      for (b = 0; b < h; b++)
        (k[b] -= a),
          0 >= k[b]
            ? g++
            : ((d = b - g),
              0 < g
                ? ((k[d] = k[b]),
                  (m[2 * d] = m[2 * b]),
                  (m[2 * d + 1] = m[2 * b + 1]),
                  (f = 2 * b),
                  (e = 2 * d),
                  (n[2 * e] = n[2 * f]),
                  (n[2 * e + 1] = n[2 * f + 1]),
                  (n[2 * (e + 1)] = n[2 * (f + 1)]),
                  (n[2 * (e + 1) + 1] = n[2 * (f + 1) + 1]),
                  (f *= 4),
                  (e *= 4),
                  (p[e + 0] = p[f + 0]),
                  (p[e + 1] = p[f + 1]),
                  (p[e + 2] = p[f + 2]),
                  (p[e + 4] = p[f + 4]),
                  (p[e + 5] = p[f + 5]),
                  (p[e + 6] = p[f + 6]))
                : (e = 8 * d),
              (d = 255 * k[d]),
              (p[e + 3] = d),
              (p[e + 7] = d));
      h -= g;
      b = !0;
      h >= this._maxPoints
        ? (b = !1)
        : 0 < h &&
          ((a =
            cc.pDistanceSQ(
              cc.p(m[2 * (h - 1)], m[2 * (h - 1) + 1]),
              this._positionR
            ) < this._minSeg),
          (e =
            1 === h
              ? !1
              : cc.pDistanceSQ(
                  cc.p(m[2 * (h - 2)], m[2 * (h - 2) + 1]),
                  this._positionR
                ) <
                2 * this._minSeg),
          a || e) &&
          (b = !1);
      b &&
        ((m[2 * h] = this._positionR.x),
        (m[2 * h + 1] = this._positionR.y),
        (k[h] = 1),
        (k = 8 * h),
        (b = this.getDisplayedColor()),
        (p[k] = b.r),
        (p[k + 1] = b.g),
        (p[k + 2] = b.b),
        (p[k + 4] = b.r),
        (p[k + 5] = b.g),
        (p[k + 6] = b.b),
        (p[k + 3] = 255),
        (p[k + 7] = 255),
        0 < h &&
          this.fastMode &&
          (1 < h
            ? cc.vertexLineToPolygon(m, this._stroke, this._vertices, h, 1)
            : cc.vertexLineToPolygon(m, this._stroke, this._vertices, 0, 2)),
        h++);
      this.fastMode ||
        cc.vertexLineToPolygon(m, this._stroke, this._vertices, 0, h);
      if (h && this._previousNuPoints !== h) {
        m = 1 / h;
        p = this._texCoords;
        for (b = 0; b < h; b++)
          (p[4 * b] = 0),
            (p[4 * b + 1] = m * b),
            (p[2 * (2 * b + 1)] = 1),
            (p[2 * (2 * b + 1) + 1] = m * b);
        this._previousNuPoints = h;
      }
      this._nuPoints = h;
    }
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new cc.MotionStreak.WebGLRenderCmd(this)
      : null;
  },
});
cc.MotionStreak.create = function (a, b, d, e, f) {
  return new cc.MotionStreak(a, b, d, e, f);
};
cc.MotionStreak.WebGLRenderCmd = function (a) {
  this._rootCtor(a);
  this._needDraw = !0;
  this._matrix = new cc.math.Matrix4();
  this._matrix.identity();
  this._shaderProgram = cc.shaderCache.programForKey(
    cc.SHADER_POSITION_TEXTURECOLOR
  );
};
cc.MotionStreak.WebGLRenderCmd.prototype = Object.create(
  cc.Node.WebGLRenderCmd.prototype
);
cc.MotionStreak.WebGLRenderCmd.prototype.constructor = cc.Sprite.WebGLRenderCmd;
cc.MotionStreak.WebGLRenderCmd.prototype.rendering = function (a) {
  var b = this._node;
  if (!(1 >= b._nuPoints) && b.texture && b.texture.isLoaded()) {
    a = a || cc._renderContext;
    var d = this._worldTransform;
    this._matrix.mat[0] = d.a;
    this._matrix.mat[4] = d.c;
    this._matrix.mat[12] = d.tx;
    this._matrix.mat[1] = d.b;
    this._matrix.mat[5] = d.d;
    this._matrix.mat[13] = d.ty;
    this._glProgramState.apply(this._matrix);
    cc.glBlendFunc(b._blendFunc.src, b._blendFunc.dst);
    cc.glBindTexture2D(b.texture);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
    a.bindBuffer(a.ARRAY_BUFFER, b._verticesBuffer);
    a.bufferData(a.ARRAY_BUFFER, b._vertices, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 2, a.FLOAT, !1, 0, 0);
    a.bindBuffer(a.ARRAY_BUFFER, b._texCoordsBuffer);
    a.bufferData(a.ARRAY_BUFFER, b._texCoords, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, 0, 0);
    a.bindBuffer(a.ARRAY_BUFFER, b._colorPointerBuffer);
    a.bufferData(a.ARRAY_BUFFER, b._colorPointer, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR, 4, a.UNSIGNED_BYTE, !0, 0, 0);
    a.drawArrays(a.TRIANGLE_STRIP, 0, 2 * b._nuPoints);
    cc.g_NumberOfDraws++;
  }
};
cc.NodeGrid = cc.Node.extend({
  grid: null,
  _target: null,
  _gridRect: null,
  ctor: function (a) {
    cc.Node.prototype.ctor.call(this);
    void 0 === a && (a = cc.rect());
    this._gridRect = a;
  },
  getGrid: function () {
    return this.grid;
  },
  setGrid: function (a) {
    this.grid = a;
  },
  setGridRect: function (a) {
    this._gridRect = a;
  },
  getGridRect: function () {
    return this._gridRect;
  },
  setTarget: function (a) {
    this._target = a;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new cc.NodeGrid.WebGLRenderCmd(this)
      : new cc.Node.CanvasRenderCmd(this);
  },
});
_p = cc.NodeGrid.prototype;
cc.defineGetterSetter(_p, "target", null, _p.setTarget);
cc.NodeGrid.create = function () {
  return new cc.NodeGrid();
};
(function () {
  cc.NodeGrid.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
    this._gridBeginCommand = new cc.CustomRenderCmd(this, this.onGridBeginDraw);
    this._gridEndCommand = new cc.CustomRenderCmd(this, this.onGridEndDraw);
  };
  var a = (cc.NodeGrid.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.NodeGrid.WebGLRenderCmd;
  a.visit = function (a) {
    var d = this._node;
    if (d._visible) {
      if ((a = a || this.getParentRenderCmd()))
        this._curLevel = a._curLevel + 1;
      var e = cc.current_stack;
      e.stack.push(e.top);
      this._syncStatus(a);
      e.top = this._stackMatrix;
      cc.renderer.pushRenderCommand(this._gridBeginCommand);
      d._target && d._target.visit();
      if ((a = d._children) && 0 < a.length) {
        var f = a.length;
        d.sortAllChildren();
        for (d = 0; d < f; d++) {
          var g = a[d];
          g && g.visit();
        }
      }
      cc.renderer.pushRenderCommand(this._gridEndCommand);
      this._dirtyFlag = 0;
      e.top = e.stack.pop();
    }
  };
  a.onGridBeginDraw = function () {
    var a = this._node.grid;
    a && a._active && a.beforeDraw();
  };
  a.onGridEndDraw = function () {
    var a = this._node.grid;
    a && a._active && a.afterDraw(this._node);
  };
})();
cc.DrawNode = cc.Node.extend({
  _buffer: null,
  _blendFunc: null,
  _lineWidth: 1,
  _drawColor: null,
  getBlendFunc: function () {
    return this._blendFunc;
  },
  setBlendFunc: function (a, b) {
    void 0 === b
      ? ((this._blendFunc.src = a.src), (this._blendFunc.dst = a.dst))
      : ((this._blendFunc.src = a), (this._blendFunc.dst = b));
  },
  setLineWidth: function (a) {
    this._lineWidth = a;
  },
  getLineWidth: function () {
    return this._lineWidth;
  },
  setDrawColor: function (a) {
    var b = this._drawColor;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    b.a = null == a.a ? 255 : a.a;
  },
  getDrawColor: function () {
    return cc.color(
      this._drawColor.r,
      this._drawColor.g,
      this._drawColor.b,
      this._drawColor.a
    );
  },
});
cc.DrawNode.create = function () {
  return new cc.DrawNode();
};
cc.DrawNode.TYPE_DOT = 0;
cc.DrawNode.TYPE_SEGMENT = 1;
cc.DrawNode.TYPE_POLY = 2;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_CANVAS)
    (cc._DrawNodeElement = function (a, b, d, e, f, g, h, k, m) {
      this.type = a;
      this.verts = b || null;
      this.fillColor = d || null;
      this.lineWidth = e || 0;
      this.lineColor = f || null;
      this.lineCap = g || "butt";
      this.isClosePolygon = h || !1;
      this.isFill = k || !1;
      this.isStroke = m || !1;
    }),
      cc.extend(cc.DrawNode.prototype, {
        _className: "DrawNodeCanvas",
        ctor: function () {
          cc.Node.prototype.ctor.call(this);
          var a = this._renderCmd;
          a._buffer = this._buffer = [];
          a._drawColor = this._drawColor = cc.color(255, 255, 255, 255);
          a._blendFunc = this._blendFunc = new cc.BlendFunc(
            cc.SRC_ALPHA,
            cc.ONE_MINUS_SRC_ALPHA
          );
          this.init();
          this._localBB = new cc.Rect();
        },
        setLocalBB: function (a, b, d, e) {
          var f = this._localBB;
          void 0 === b
            ? ((f.x = a.x),
              (f.y = a.y),
              (f.width = a.width),
              (f.height = a.height))
            : ((f.x = a), (f.y = b), (f.width = d), (f.height = e));
        },
        drawRect: function (a, b, d, e, f) {
          e = null == e ? this._lineWidth : e;
          f = f || this.getDrawColor();
          null == f.a && (f.a = 255);
          a = [a, cc.p(b.x, a.y), b, cc.p(a.x, b.y)];
          b = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          b.verts = a;
          b.lineWidth = e;
          b.lineColor = f;
          b.isClosePolygon = !0;
          b.isStroke = !0;
          b.lineCap = "butt";
          if ((b.fillColor = d)) null == d.a && (d.a = 255), (b.isFill = !0);
          this._buffer.push(b);
        },
        drawCircle: function (a, b, d, e, f, g, h) {
          g = g || this._lineWidth;
          h = h || this.getDrawColor();
          null == h.a && (h.a = 255);
          for (var k = (2 * Math.PI) / e, m = [], n = 0; n <= e; n++) {
            var A = n * k,
              z = b * Math.cos(A + d) + a.x,
              A = b * Math.sin(A + d) + a.y;
            m.push(cc.p(z, A));
          }
          f && m.push(cc.p(a.x, a.y));
          a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          a.verts = m;
          a.lineWidth = g;
          a.lineColor = h;
          a.isClosePolygon = !0;
          a.isStroke = !0;
          this._buffer.push(a);
        },
        drawQuadBezier: function (a, b, d, e, f, g) {
          f = f || this._lineWidth;
          g = g || this.getDrawColor();
          null == g.a && (g.a = 255);
          for (var h = [], k = 0, m = 0; m < e; m++) {
            var n =
                Math.pow(1 - k, 2) * a.x + 2 * (1 - k) * k * b.x + k * k * d.x,
              A =
                Math.pow(1 - k, 2) * a.y + 2 * (1 - k) * k * b.y + k * k * d.y;
            h.push(cc.p(n, A));
            k += 1 / e;
          }
          h.push(cc.p(d.x, d.y));
          a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          a.verts = h;
          a.lineWidth = f;
          a.lineColor = g;
          a.isStroke = !0;
          a.lineCap = "round";
          this._buffer.push(a);
        },
        drawCubicBezier: function (a, b, d, e, f, g, h) {
          g = g || this._lineWidth;
          h = h || this.getDrawColor();
          null == h.a && (h.a = 255);
          for (var k = [], m = 0, n = 0; n < f; n++) {
            var A =
                Math.pow(1 - m, 3) * a.x +
                3 * Math.pow(1 - m, 2) * m * b.x +
                3 * (1 - m) * m * m * d.x +
                m * m * m * e.x,
              z =
                Math.pow(1 - m, 3) * a.y +
                3 * Math.pow(1 - m, 2) * m * b.y +
                3 * (1 - m) * m * m * d.y +
                m * m * m * e.y;
            k.push(cc.p(A, z));
            m += 1 / f;
          }
          k.push(cc.p(e.x, e.y));
          a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          a.verts = k;
          a.lineWidth = g;
          a.lineColor = h;
          a.isStroke = !0;
          a.lineCap = "round";
          this._buffer.push(a);
        },
        drawCatmullRom: function (a, b, d, e) {
          this.drawCardinalSpline(a, 0.5, b, d, e);
        },
        drawCardinalSpline: function (a, b, d, e, f) {
          e = e || this._lineWidth;
          f = f || this.getDrawColor();
          null == f.a && (f.a = 255);
          for (var g = [], h, k, m = 1 / a.length, n = 0; n < d + 1; n++)
            (k = n / d),
              1 === k
                ? ((h = a.length - 1), (k = 1))
                : ((h = 0 | (k / m)), (k = (k - m * h) / m)),
              (h = cc.cardinalSplineAt(
                cc.getControlPointAt(a, h - 1),
                cc.getControlPointAt(a, h - 0),
                cc.getControlPointAt(a, h + 1),
                cc.getControlPointAt(a, h + 2),
                b,
                k
              )),
              g.push(h);
          a = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          a.verts = g;
          a.lineWidth = e;
          a.lineColor = f;
          a.isStroke = !0;
          a.lineCap = "round";
          this._buffer.push(a);
        },
        drawDot: function (a, b, d) {
          d = d || this.getDrawColor();
          null == d.a && (d.a = 255);
          var e = new cc._DrawNodeElement(cc.DrawNode.TYPE_DOT);
          e.verts = [a];
          e.lineWidth = b;
          e.fillColor = d;
          this._buffer.push(e);
        },
        drawDots: function (a, b, d) {
          if (a && 0 != a.length) {
            d = d || this.getDrawColor();
            null == d.a && (d.a = 255);
            for (var e = 0, f = a.length; e < f; e++) this.drawDot(a[e], b, d);
          }
        },
        drawSegment: function (a, b, d, e) {
          d = d || this._lineWidth;
          e = e || this.getDrawColor();
          null == e.a && (e.a = 255);
          var f = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          f.verts = [a, b];
          f.lineWidth = 2 * d;
          f.lineColor = e;
          f.isStroke = !0;
          f.lineCap = "round";
          this._buffer.push(f);
        },
        drawPoly_: function (a, b, d, e) {
          d = null == d ? this._lineWidth : d;
          e = e || this.getDrawColor();
          null == e.a && (e.a = 255);
          var f = new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);
          f.verts = a;
          f.fillColor = b;
          f.lineWidth = d;
          f.lineColor = e;
          f.isClosePolygon = !0;
          f.isStroke = !0;
          f.lineCap = "round";
          b && (f.isFill = !0);
          this._buffer.push(f);
        },
        drawPoly: function (a, b, d, e) {
          for (var f = [], g = 0; g < a.length; g++)
            f.push(cc.p(a[g].x, a[g].y));
          return this.drawPoly_(f, b, d, e);
        },
        clear: function () {
          this._buffer.length = 0;
        },
        _createRenderCmd: function () {
          return new cc.DrawNode.CanvasRenderCmd(this);
        },
      });
  else if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
    var a = null,
      b = [],
      d = cc.p(),
      e = cc.p(),
      f = new Uint32Array(1),
      g = cc.p(),
      h = cc.p(),
      k = cc.p(),
      m = cc.p(),
      n = [];
    cc.extend(cc.DrawNode.prototype, {
      _bufferCapacity: 0,
      _vertexCount: 0,
      _offset: 0,
      _occupiedSize: 0,
      _f32Buffer: null,
      _ui32Buffer: null,
      _dirty: !1,
      _className: "DrawNodeWebGL",
      manualRelease: !1,
      ctor: function (b, d) {
        cc.Node.prototype.ctor.call(this);
        a ||
          (a = new GlobalVertexBuffer(
            cc._renderContext,
            20 * cc.DRAWNODE_TOTAL_VERTICES
          ));
        this._renderCmd._shaderProgram = cc.shaderCache.programForKey(
          cc.SHADER_POSITION_LENGTHTEXTURECOLOR
        );
        this._blendFunc = new cc.BlendFunc(
          cc.SRC_ALPHA,
          cc.ONE_MINUS_SRC_ALPHA
        );
        this._drawColor = cc.color(255, 255, 255, 255);
        this._bufferCapacity = b || 64;
        this.manualRelease = d;
        this._dirty = !0;
      },
      onEnter: function () {
        cc.Node.prototype.onEnter.call(this);
        this._occupiedSize < this._bufferCapacity &&
          this._ensureCapacity(this._bufferCapacity);
      },
      onExit: function () {
        this.manualRelease || this.release();
        cc.Node.prototype.onExit.call(this);
      },
      release: function () {
        0 < this._occupiedSize &&
          ((this._vertexCount = 0),
          a.freeBuffer(this._offset, 20 * this._occupiedSize),
          (this._occupiedSize = 0));
      },
      _ensureCapacity: function (b) {
        var d = this._occupiedSize,
          e = this._offset;
        if (b > d || this._bufferCapacity > d) {
          var f = Math.max(Math.min(d + d, 200), b, this._bufferCapacity);
          0 !== d && (a.freeBuffer(e, 20 * d), (this._occupiedSize = 0));
          b = this._offset = a.requestBuffer(20 * f);
          if (0 <= b) {
            this._occupiedSize = this._bufferCapacity = f;
            this._f32Buffer = new Float32Array(
              a.data,
              b,
              5 * this._occupiedSize
            );
            this._ui32Buffer = new Uint32Array(
              a.data,
              b,
              5 * this._occupiedSize
            );
            if (0 !== d && e !== b)
              for (d = e / 4 + 5 * d, b /= 4, e /= 4; e < d; b++, e++)
                a.dataArray[b] = a.dataArray[e];
            return !0;
          }
          cc.warn(
            "Failed to allocate buffer for DrawNode: buffer for " +
              f +
              " vertices requested"
          );
          return !1;
        }
        return !0;
      },
      drawRect: function (a, d, e, f, g) {
        f = null == f ? this._lineWidth : f;
        g = g || this._drawColor;
        b.length = 0;
        b.push(a.x, a.y, d.x, a.y, d.x, d.y, a.x, d.y);
        null == e ? this._drawSegments(b, f, g, !0) : this.drawPoly(b, e, f, g);
        b.length = 0;
      },
      drawCircle: function (a, f, g, h, k, m, n) {
        m = m || this._lineWidth;
        n = n || this._drawColor;
        var x = (2 * Math.PI) / h,
          y;
        for (y = b.length = 0; y <= h; y++) {
          var B = y * x,
            A = f * Math.cos(B + g) + a.x,
            B = f * Math.sin(B + g) + a.y;
          b.push(A, B);
        }
        k && b.push(a.x, a.y);
        m *= 0.5;
        y = 0;
        for (a = b.length - 2; y < a; y += 2)
          (d.x = b[y]),
            (d.y = b[y + 1]),
            (e.x = b[y + 2]),
            (e.y = b[y + 3]),
            this.drawSegment(d, e, m, n);
        b.length = 0;
      },
      drawQuadBezier: function (a, d, e, f, g, h) {
        g = g || this._lineWidth;
        h = h || this._drawColor;
        for (var k = 0, m = (b.length = 0); m < f; m++) {
          var n =
              Math.pow(1 - k, 2) * a.x + 2 * (1 - k) * k * d.x + k * k * e.x,
            B = Math.pow(1 - k, 2) * a.y + 2 * (1 - k) * k * d.y + k * k * e.y;
          b.push(n, B);
          k += 1 / f;
        }
        b.push(e.x, e.y);
        this._drawSegments(b, g, h, !1);
        b.length = 0;
      },
      drawCubicBezier: function (a, d, e, f, g, h, k) {
        h = h || this._lineWidth;
        k = k || this._drawColor;
        for (var m = 0, n = (b.length = 0); n < g; n++) {
          var B =
              Math.pow(1 - m, 3) * a.x +
              3 * Math.pow(1 - m, 2) * m * d.x +
              3 * (1 - m) * m * m * e.x +
              m * m * m * f.x,
            A =
              Math.pow(1 - m, 3) * a.y +
              3 * Math.pow(1 - m, 2) * m * d.y +
              3 * (1 - m) * m * m * e.y +
              m * m * m * f.y;
          b.push(B, A);
          m += 1 / g;
        }
        b.push(f.x, f.y);
        this._drawSegments(b, h, k, !1);
        b.length = 0;
      },
      drawCatmullRom: function (a, b, d, e) {
        this.drawCardinalSpline(a, 0.5, b, d, e);
      },
      drawCardinalSpline: function (a, f, g, h, k) {
        h = h || this._lineWidth;
        k = k || this._drawColor;
        for (var m, n, x = 1 / a.length, y = (b.length = 0); y < g + 1; y++)
          (n = y / g),
            1 === n
              ? ((m = a.length - 1), (n = 1))
              : ((m = 0 | (n / x)), (n = (n - x * m) / x)),
            cc.cardinalSplineAt(
              cc.getControlPointAt(a, m - 1),
              cc.getControlPointAt(a, m - 0),
              cc.getControlPointAt(a, m + 1),
              cc.getControlPointAt(a, m + 2),
              f,
              n,
              d
            ),
            b.push(d.x, d.y);
        h *= 0.5;
        a = 0;
        for (f = b.length - 2; a < f; a += 2)
          (d.x = b[a]),
            (d.y = b[a + 1]),
            (e.x = b[a + 2]),
            (e.y = b[a + 3]),
            this.drawSegment(d, e, h, k);
        b.length = 0;
      },
      drawDots: function (a, b, d) {
        if (a && 0 !== a.length) {
          d = d || this._drawColor;
          for (var e = 0, f = a.length; e < f; e++) this.drawDot(a[e], b, d);
        }
      },
      _render: function () {
        var b = cc._renderContext;
        0 > this._offset ||
          0 >= this._vertexCount ||
          (this._dirty
            ? (a.updateSubData(this._offset, this._f32Buffer),
              (this._dirty = !1))
            : b.bindBuffer(b.ARRAY_BUFFER, a.vertexBuffer),
          b.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),
          b.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),
          b.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),
          b.vertexAttribPointer(
            cc.VERTEX_ATTRIB_POSITION,
            2,
            b.FLOAT,
            !1,
            20,
            0
          ),
          b.vertexAttribPointer(
            cc.VERTEX_ATTRIB_COLOR,
            4,
            b.UNSIGNED_BYTE,
            !0,
            20,
            8
          ),
          b.vertexAttribPointer(
            cc.VERTEX_ATTRIB_TEX_COORDS,
            2,
            b.FLOAT,
            !1,
            20,
            12
          ),
          b.drawArrays(b.TRIANGLES, this._offset / 20, this._vertexCount),
          cc.incrementGLDraws(1));
      },
      appendVertexData: function (a, b, d, e, g) {
        var h = this._f32Buffer,
          k = 5 * this._vertexCount;
        h[k] = a;
        h[k + 1] = b;
        f[0] = (d.a << 24) | (d.b << 16) | (d.g << 8) | d.r;
        this._ui32Buffer[k + 2] = f[0];
        h[k + 3] = e;
        h[k + 4] = g;
        this._vertexCount++;
      },
      drawDot: function (a, b, d) {
        d = d || this._drawColor;
        null == d.a && (d.a = 255);
        var e = a.x - b,
          f = a.y - b,
          g = a.x + b;
        a = a.y + b;
        this._ensureCapacity(this._vertexCount + 6) &&
          (this.appendVertexData(e, f, d, -1, -1),
          this.appendVertexData(e, a, d, -1, 1),
          this.appendVertexData(g, a, d, 1, 1),
          this.appendVertexData(e, f, d, -1, -1),
          this.appendVertexData(g, a, d, 1, 1),
          this.appendVertexData(g, f, d, 1, -1),
          (this._dirty = !0));
      },
      drawSegment: function (a, b, d, e) {
        e = e || this.getDrawColor();
        null == e.a && (e.a = 255);
        d = d || 0.5 * this._lineWidth;
        if (this._ensureCapacity(this._vertexCount + 18)) {
          g.x = a.y - b.y;
          g.y = b.x - a.x;
          cc.pNormalizeIn(g);
          h.x = -g.y;
          h.y = g.x;
          var f = d;
          k.x = g.x * f;
          k.y = g.y * f;
          m.x = h.x * d;
          m.y = h.y * d;
          d = b.x + k.x - m.x;
          var f = b.y + k.y - m.y,
            n = g.x - h.x,
            w = g.y - h.y,
            x = b.x - k.x,
            y = b.y - k.y,
            B = -g.x,
            A = -g.y,
            z = b.x + k.x,
            C = b.y + k.y,
            D = g.x,
            E = g.y,
            J = a.x - k.x,
            G = a.y - k.y,
            F = a.x + k.x,
            L = a.y + k.y,
            H = g.x,
            I = g.y,
            M = a.x - k.x + m.x,
            K = a.y - k.y + m.y,
            N = h.x - g.x,
            O = h.y - g.y,
            P = a.x + k.x + m.x;
          a = a.y + k.y + m.y;
          var R = g.x + h.x,
            Q = g.y + h.y;
          this.appendVertexData(
            b.x - k.x - m.x,
            b.y - k.y - m.y,
            e,
            -(g.x + h.x),
            -(g.y + h.y)
          );
          this.appendVertexData(d, f, e, n, w);
          this.appendVertexData(x, y, e, B, A);
          this.appendVertexData(z, C, e, D, E);
          this.appendVertexData(d, f, e, n, w);
          this.appendVertexData(x, y, e, B, A);
          this.appendVertexData(z, C, e, D, E);
          this.appendVertexData(J, G, e, B, A);
          this.appendVertexData(x, y, e, B, A);
          this.appendVertexData(z, C, e, D, E);
          this.appendVertexData(J, G, e, B, A);
          this.appendVertexData(F, L, e, H, I);
          this.appendVertexData(M, K, e, N, O);
          this.appendVertexData(J, G, e, B, A);
          this.appendVertexData(F, L, e, H, I);
          this.appendVertexData(M, K, e, N, O);
          this.appendVertexData(P, a, e, R, Q);
          this.appendVertexData(F, L, e, H, I);
          this._dirty = !0;
        }
      },
      drawPoly: function (a, d, e, f) {
        if ("object" === typeof a[0]) {
          for (var h = (b.length = 0); h < a.length; h++)
            b.push(a[h].x, a[h].y);
          a = b;
        }
        if (null == d) this._drawSegments(a, e, f, !0);
        else {
          null == d.a && (d.a = 255);
          null == f.a && (f.a = 255);
          e = null == e ? this._lineWidth : e;
          e *= 0.5;
          for (
            var m, w, x, y, B, A, z, C = a.length, h = (n.length = 0);
            h < C;
            h += 2
          )
            (m = a[(h - 2 + C) % C]),
              (w = a[(h - 1 + C) % C]),
              (x = a[h]),
              (y = a[h + 1]),
              (B = a[(h + 2) % C]),
              (A = a[(h + 3) % C]),
              (g.x = w - y),
              (g.y = x - m),
              (k.x = y - A),
              (k.y = B - x),
              cc.pNormalizeIn(g),
              cc.pNormalizeIn(k),
              (y = g.x * k.x + g.y * k.y + 1),
              (z = (g.x + k.x) / y),
              (y = (g.y + k.y) / y),
              n.push(z, y, k.x, k.y);
          C /= 2;
          z = 0 < e;
          if (this._ensureCapacity(this._vertexCount + 3 * (3 * C - 2))) {
            for (var D = !1 == z ? 0.5 : 0, h = 0; h < C - 2; h++)
              (m = a[0] - n[0] * D),
                (w = a[1] - n[1] * D),
                (x = a[2 * h + 2] - n[4 * (h + 1)] * D),
                (y = a[2 * h + 3] - n[4 * (h + 1) + 1] * D),
                (B = a[2 * h + 4] - n[4 * (h + 2)] * D),
                (A = a[2 * h + 5] - n[4 * (h + 2) + 1] * D),
                this.appendVertexData(m, w, d, 0, 0),
                this.appendVertexData(x, y, d, 0, 0),
                this.appendVertexData(B, A, d, 0, 0);
            var E, J, G, F;
            e = z ? e : 0.5;
            d = z ? f : d;
            for (h = 0; h < C; h++)
              (f = (h + 1) % C),
                (m = a[2 * h]),
                (w = a[2 * h + 1]),
                (x = a[2 * f]),
                (y = a[2 * f + 1]),
                (g.x = n[4 * h + 2]),
                (g.y = n[4 * h + 3]),
                (k.x = z ? -g.x : 0),
                (k.y = z ? -g.y : 0),
                (E = n[4 * h]),
                (J = n[4 * h + 1]),
                (G = n[4 * f]),
                (F = n[4 * f + 1]),
                (f = m - E * e),
                (B = w - J * e),
                (A = x - G * e),
                (D = y - F * e),
                (m += E * e),
                (w += J * e),
                (x += G * e),
                (y += F * e),
                this.appendVertexData(f, B, d, k.x, k.y),
                this.appendVertexData(A, D, d, k.x, k.y),
                this.appendVertexData(x, y, d, g.x, g.y),
                this.appendVertexData(f, B, d, k.x, k.y),
                this.appendVertexData(m, w, d, g.x, g.y),
                this.appendVertexData(x, y, d, g.x, g.y);
            n.length = 0;
            b.length = 0;
            this._dirty = !0;
          }
        }
      },
      _drawSegments: function (a, b, d, e) {
        b = null == b ? this._lineWidth : b;
        if (!(0 >= b)) {
          d = d || this._drawColor;
          null == d.a && (d.a = 255);
          b *= 0.5;
          var f,
            h,
            m,
            x,
            y,
            B,
            A,
            z = a.length;
          for (A = n.length = 0; A < z; A += 2)
            (f = a[(A - 2 + z) % z]),
              (h = a[(A - 1 + z) % z]),
              (m = a[A]),
              (x = a[A + 1]),
              (y = a[(A + 2) % z]),
              (B = a[(A + 3) % z]),
              (g.x = h - x),
              (g.y = m - f),
              (k.x = x - B),
              (k.y = y - m),
              cc.pNormalizeIn(g),
              cc.pNormalizeIn(k),
              (m = g.x * k.x + g.y * k.y + 1),
              (x = (g.x + k.x) / m),
              (m = (g.y + k.y) / m),
              n.push(x, m, k.x, k.y);
          z /= 2;
          if (this._ensureCapacity(this._vertexCount + 3 * (3 * z - 2))) {
            e = e ? z : z - 1;
            var C, D, E, J, G, F;
            for (A = 0; A < e; A++)
              (y = (A + 1) % z),
                (f = a[2 * A]),
                (h = a[2 * A + 1]),
                (m = a[2 * y]),
                (x = a[2 * y + 1]),
                (g.x = n[4 * A + 2]),
                (g.y = n[4 * A + 3]),
                (C = n[4 * A]),
                (D = n[4 * A + 1]),
                (E = n[4 * y]),
                (J = n[4 * y + 1]),
                (y = f - C * b),
                (B = h - D * b),
                (G = m - E * b),
                (F = x - J * b),
                (f += C * b),
                (h += D * b),
                (m += E * b),
                (x += J * b),
                this.appendVertexData(y, B, d, -g.x, -g.y),
                this.appendVertexData(G, F, d, -g.x, -g.y),
                this.appendVertexData(m, x, d, g.x, g.y),
                this.appendVertexData(y, B, d, -g.x, -g.y),
                this.appendVertexData(f, h, d, g.x, g.y),
                this.appendVertexData(m, x, d, g.x, g.y);
            n.length = 0;
            this._dirty = !0;
          }
        }
      },
      clear: function () {
        this.release();
        this._dirty = !0;
      },
      _createRenderCmd: function () {
        return new cc.DrawNode.WebGLRenderCmd(this);
      },
    });
  }
});
(function () {
  cc.DrawNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._blendFunc = this._drawColor = this._buffer = null;
  };
  cc.DrawNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  );
  cc.DrawNode.CanvasRenderCmd.prototype.constructor =
    cc.DrawNode.CanvasRenderCmd;
  cc.DrawNode.CanvasRenderCmd.prototype.getLocalBB = function () {
    return this._node._localBB;
  };
  cc.extend(cc.DrawNode.CanvasRenderCmd.prototype, {
    rendering: function (a, b, d) {
      a = a || cc._renderContext;
      a.getContext();
      var e = this._displayedOpacity / 255;
      if (0 !== e) {
        a.setTransform(this._worldTransform, b, d);
        a.setGlobalAlpha(e);
        this._blendFunc &&
          this._blendFunc.src === cc.SRC_ALPHA &&
          this._blendFunc.dst === cc.ONE &&
          a.setCompositeOperation("lighter");
        for (var e = this._buffer, f = 0, g = e.length; f < g; f++) {
          var h = e[f];
          switch (h.type) {
            case cc.DrawNode.TYPE_DOT:
              this._drawDot(a, h, b, d);
              break;
            case cc.DrawNode.TYPE_SEGMENT:
              this._drawSegment(a, h, b, d);
              break;
            case cc.DrawNode.TYPE_POLY:
              this._drawPoly(a, h, b, d);
          }
        }
      }
    },
    _drawDot: function (a, b) {
      var d = b.fillColor,
        e = b.verts[0],
        f = b.lineWidth,
        g = a.getContext();
      a.setFillStyle(
        "rgba(" +
          (0 | d.r) +
          "," +
          (0 | d.g) +
          "," +
          (0 | d.b) +
          "," +
          d.a / 255 +
          ")"
      );
      g.beginPath();
      g.arc(e.x, -e.y, f, 0, 2 * Math.PI, !1);
      g.closePath();
      g.fill();
    },
    _drawSegment: function (a, b, d) {
      var e = b.lineColor,
        f = b.verts[0],
        g = b.verts[1],
        h = b.lineWidth;
      b = b.lineCap;
      var k = a.getContext();
      a.setStrokeStyle(
        "rgba(" +
          (0 | e.r) +
          "," +
          (0 | e.g) +
          "," +
          (0 | e.b) +
          "," +
          e.a / 255 +
          ")"
      );
      k.lineWidth = h * d;
      k.beginPath();
      k.lineCap = b;
      k.moveTo(f.x, -f.y);
      k.lineTo(g.x, -g.y);
      k.stroke();
    },
    _drawPoly: function (a, b, d) {
      var e = b.verts,
        f = b.lineCap;
      if (null != e) {
        var g = b.fillColor,
          h = b.lineWidth,
          k = b.lineColor,
          m = b.isClosePolygon,
          n = b.isFill;
        b = b.isStroke;
        var p = a.getContext(),
          r = e[0];
        p.lineCap = f;
        g &&
          a.setFillStyle(
            "rgba(" +
              (0 | g.r) +
              "," +
              (0 | g.g) +
              "," +
              (0 | g.b) +
              "," +
              g.a / 255 +
              ")"
          );
        h && (p.lineWidth = h * d);
        k &&
          a.setStrokeStyle(
            "rgba(" +
              (0 | k.r) +
              "," +
              (0 | k.g) +
              "," +
              (0 | k.b) +
              "," +
              k.a / 255 +
              ")"
          );
        p.beginPath();
        p.moveTo(r.x, -r.y);
        a = 1;
        for (d = e.length; a < d; a++) p.lineTo(e[a].x, -e[a].y);
        m && p.closePath();
        n && p.fill();
        b && p.stroke();
      }
    },
  });
})();
(function () {
  cc.DrawNode.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
  };
  cc.DrawNode.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  );
  cc.DrawNode.WebGLRenderCmd.prototype.constructor = cc.DrawNode.WebGLRenderCmd;
  cc.DrawNode.WebGLRenderCmd.prototype.rendering = function (a) {
    a = this._node;
    if (0 < a._vertexCount) {
      var b = this._worldTransform;
      this._matrix.mat[0] = b.a;
      this._matrix.mat[4] = b.c;
      this._matrix.mat[12] = b.tx;
      this._matrix.mat[1] = b.b;
      this._matrix.mat[5] = b.d;
      this._matrix.mat[13] = b.ty;
      cc.glBlendFunc(a._blendFunc.src, a._blendFunc.dst);
      this._glProgramState.apply(this._matrix);
      a._render();
    }
  };
})();
cc.stencilBits = -1;
cc.ClippingNode = cc.Node.extend({
  inverted: !1,
  _alphaThreshold: 0,
  _stencil: null,
  _className: "ClippingNode",
  _originStencilProgram: null,
  ctor: function (a) {
    a = a || null;
    cc.Node.prototype.ctor.call(this);
    if ((this._stencil = a)) this._originStencilProgram = a.getShaderProgram();
    this.alphaThreshold = 1;
    this.inverted = !1;
    this._renderCmd.initStencilBits();
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this._stencil &&
      this._stencil._performRecursive(cc.Node._stateCallbackType.onEnter);
  },
  onEnterTransitionDidFinish: function () {
    cc.Node.prototype.onEnterTransitionDidFinish.call(this);
    this._stencil &&
      this._stencil._performRecursive(
        cc.Node._stateCallbackType.onEnterTransitionDidFinish
      );
  },
  onExitTransitionDidStart: function () {
    this._stencil._performRecursive(
      cc.Node._stateCallbackType.onExitTransitionDidStart
    );
    cc.Node.prototype.onExitTransitionDidStart.call(this);
  },
  onExit: function () {
    this._stencil._performRecursive(cc.Node._stateCallbackType.onExit);
    cc.Node.prototype.onExit.call(this);
  },
  visit: function (a) {
    this._renderCmd.clippingVisit(a && a._renderCmd);
  },
  _visitChildren: function () {
    this._reorderChildDirty && this.sortAllChildren();
    for (var a = this._children, b, d = 0, e = a.length; d < e; d++)
      (b = a[d]) && b._visible && b.visit(this);
    this._renderCmd._dirtyFlag = 0;
  },
  getAlphaThreshold: function () {
    return this._alphaThreshold;
  },
  setAlphaThreshold: function (a) {
    1 === a &&
      a !== this._alphaThreshold &&
      this._renderCmd.resetProgramByStencil();
    this._alphaThreshold = a;
  },
  isInverted: function () {
    return this.inverted;
  },
  setInverted: function (a) {
    this.inverted = a;
  },
  getStencil: function () {
    return this._stencil;
  },
  setStencil: function (a) {
    this._stencil !== a &&
      (a && (this._originStencilProgram = a.getShaderProgram()),
      this._renderCmd.setStencil(a));
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ClippingNode.CanvasRenderCmd(this)
      : new cc.ClippingNode.WebGLRenderCmd(this);
  },
});
_p = cc.ClippingNode.prototype;
cc.defineGetterSetter(_p, "stencil", _p.getStencil, _p.setStencil);
cc.defineGetterSetter(
  _p,
  "alphaThreshold",
  _p.getAlphaThreshold,
  _p.setAlphaThreshold
);
cc.ClippingNode.create = function (a) {
  return new cc.ClippingNode(a);
};
(function () {
  cc.ClippingNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._clipElemType = this._godhelpme = this._needDraw = !1;
    this._rendererSaveCmd = new cc.CustomRenderCmd(this, this._saveCmdCallback);
    this._rendererClipCmd = new cc.CustomRenderCmd(this, this._clipCmdCallback);
    this._rendererRestoreCmd = new cc.CustomRenderCmd(
      this,
      this._restoreCmdCallback
    );
  };
  var a = (cc.ClippingNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ClippingNode.CanvasRenderCmd;
  a.resetProgramByStencil = function () {};
  a.initStencilBits = function () {};
  a.setStencil = function (a) {
    if (null != a)
      if (((this._node._stencil = a), a instanceof cc.DrawNode)) {
        if (a._buffer)
          for (var d = 0; d < a._buffer.length; d++)
            (a._buffer[d].isFill = !1), (a._buffer[d].isStroke = !1);
        a._renderCmd.rendering = function (a, b, d) {};
        a._renderCmd._canUseDirtyRegion = !0;
        this._rendererSaveCmd._canUseDirtyRegion = !0;
        this._rendererClipCmd._canUseDirtyRegion = !0;
        this._rendererRestoreCmd._canUseDirtyRegion = !0;
      } else a._parent = this._node;
  };
  a._saveCmdCallback = function (a, d, e) {
    var f = a || cc._renderContext;
    a = f.getContext();
    this._clipElemType
      ? ((d = cc.ClippingNode.CanvasRenderCmd._getSharedCache()),
        (e = a.canvas),
        (d.width = e.width),
        (d.height = e.height),
        d.getContext("2d").drawImage(e, 0, 0))
      : (f.save(),
        f.setTransform(this._worldTransform, d, e),
        this._node.inverted &&
          (a.beginPath(),
          a.rect(0, 0, a.canvas.width, -a.canvas.height),
          a.clip()));
  };
  a._setStencilCompositionOperation = function (a) {
    if (a) {
      var d = this._node;
      a._renderCmd &&
        a._renderCmd._blendFuncStr &&
        (a._renderCmd._blendFuncStr = d.inverted
          ? "destination-out"
          : "destination-in");
      if (a._children) {
        a = a._children;
        for (var d = 0, e = a.length; d < e; d++)
          this._setStencilCompositionOperation(a[d]);
      }
    }
  };
  a._clipCmdCallback = function (a) {
    var d = this._node;
    a = (a || cc._renderContext).getContext();
    if (this._clipElemType) this._setStencilCompositionOperation(d._stencil);
    else {
      d = this._node._stencil;
      if (d instanceof cc.DrawNode) {
        a.beginPath();
        var e = d._renderCmd._transform;
        a.transform(e.a, e.b, e.c, e.d, e.tx, -e.ty);
        for (e = 0; e < d._buffer.length; e++) {
          var f = d._buffer[e].verts,
            g = f[0];
          a.moveTo(g.x, -g.y);
          for (g = f.length - 1; 0 < g; g--) a.lineTo(f[g].x, -f[g].y);
        }
      }
      a.clip();
    }
  };
  a._restoreCmdCallback = function (a) {
    var d = cc.ClippingNode.CanvasRenderCmd._getSharedCache();
    a = a || cc._renderContext;
    var e = a.getContext();
    this._clipElemType
      ? (e.save(),
        e.setTransform(1, 0, 0, 1, 0, 0),
        (e.globalCompositeOperation = "destination-over"),
        e.drawImage(d, 0, 0),
        e.restore(),
        (this._dirtyFlag = 0))
      : a.restore();
  };
  a.transform = function (a, d) {
    this.originTransform(a, d);
    var e = this._node;
    e._stencil &&
      e._stencil._renderCmd &&
      (e._stencil._renderCmd.transform(this, !0),
      (e._stencil._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty));
  };
  a._cangodhelpme = function (a) {
    if (!0 === a || !1 === a)
      cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme = a;
    return cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme;
  };
  a.clippingVisit = function (a) {
    var d = this._node;
    a = a || this.getParentRenderCmd();
    this.visit(a);
    this._clipElemType = !(
      !this._cangodhelpme() && d._stencil instanceof cc.DrawNode
    );
    if (d._stencil && d._stencil.visible) {
      cc.renderer.pushRenderCommand(this._rendererSaveCmd);
      this._clipElemType ? d._visitChildren() : d._stencil.visit(d);
      cc.renderer.pushRenderCommand(this._rendererClipCmd);
      if (this._clipElemType) d._stencil.visit(d);
      else {
        this._cangodhelpme(!0);
        a = d._children;
        var e,
          f = a.length;
        if (0 < f) for (d.sortAllChildren(), e = 0; e < f; e++) a[e].visit(d);
        this._cangodhelpme(!1);
      }
      cc.renderer.pushRenderCommand(this._rendererRestoreCmd);
      this._dirtyFlag = 0;
    } else this.inverted && d._visitChildren();
  };
  cc.ClippingNode.CanvasRenderCmd._sharedCache = null;
  cc.ClippingNode.CanvasRenderCmd._getSharedCache = function () {
    return (
      cc.ClippingNode.CanvasRenderCmd._sharedCache ||
      (cc.ClippingNode.CanvasRenderCmd._sharedCache = document.createElement(
        "canvas"
      ))
    );
  };
})();
function setProgram(a, b) {
  a.shaderProgram = b;
  var d = a.children;
  if (d) for (var e = 0; e < d.length; e++) setProgram(d[e], b);
}
(function () {
  cc.ClippingNode.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
    this._beforeVisitCmd = new cc.CustomRenderCmd(this, this._onBeforeVisit);
    this._afterDrawStencilCmd = new cc.CustomRenderCmd(
      this,
      this._onAfterDrawStencil
    );
    this._afterVisitCmd = new cc.CustomRenderCmd(this, this._onAfterVisit);
    this._mask_layer_le = this._currentStencilEnabled = null;
  };
  var a = (cc.ClippingNode.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.ClippingNode.WebGLRenderCmd;
  cc.ClippingNode.WebGLRenderCmd._init_once = null;
  cc.ClippingNode.WebGLRenderCmd._visit_once = null;
  cc.ClippingNode.WebGLRenderCmd._layer = -1;
  a.initStencilBits = function () {
    cc.ClippingNode.WebGLRenderCmd._init_once = !0;
    cc.ClippingNode.WebGLRenderCmd._init_once &&
      ((cc.stencilBits = cc._renderContext.getParameter(
        cc._renderContext.STENCIL_BITS
      )),
      0 >= cc.stencilBits && cc.log("Stencil buffer is not enabled."),
      (cc.ClippingNode.WebGLRenderCmd._init_once = !1));
  };
  a.transform = function (a, d) {
    var e = this._node;
    this.originTransform(a, d);
    e._stencil &&
      (e._stencil._renderCmd.transform(this, !0),
      (e._stencil._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty));
  };
  a.clippingVisit = function (a) {
    var d = this._node;
    a = a || this.getParentRenderCmd();
    this.visit(a);
    if (1 > cc.stencilBits) d._visitChildren();
    else if (d._stencil && d._stencil.visible)
      if (cc.ClippingNode.WebGLRenderCmd._layer + 1 === cc.stencilBits)
        (cc.ClippingNode.WebGLRenderCmd._visit_once = !0),
          cc.ClippingNode.WebGLRenderCmd._visit_once &&
            (cc.log(
              "Nesting more than " +
                cc.stencilBits +
                "stencils is not supported. Everything will be drawn without stencil for this node and its children."
            ),
            (cc.ClippingNode.WebGLRenderCmd._visit_once = !1)),
          d._visitChildren();
      else {
        cc.renderer.pushRenderCommand(this._beforeVisitCmd);
        d._stencil.visit(d);
        cc.renderer.pushRenderCommand(this._afterDrawStencilCmd);
        if ((a = d._children) && 0 < a.length) {
          var e = a.length;
          d.sortAllChildren();
          for (var f = 0; f < e; f++) a[f].visit(d);
        }
        cc.renderer.pushRenderCommand(this._afterVisitCmd);
        this._dirtyFlag = 0;
      }
    else d.inverted && d._visitChildren();
  };
  a.setStencil = function (a) {
    var d = this._node;
    d._stencil && (d._stencil._parent = null);
    d._stencil = a;
    d._stencil && (d._stencil._parent = d);
  };
  a.resetProgramByStencil = function () {
    var a = this._node;
    a._stencil && setProgram(a._stencil, a._originStencilProgram);
  };
  a._onBeforeVisit = function (a) {
    var d = a || cc._renderContext;
    a = this._node;
    cc.ClippingNode.WebGLRenderCmd._layer++;
    var e = 1 << cc.ClippingNode.WebGLRenderCmd._layer;
    this._mask_layer_le = e | (e - 1);
    this._currentStencilEnabled = d.isEnabled(d.STENCIL_TEST);
    d.clear(d.DEPTH_BUFFER_BIT);
    d.enable(d.STENCIL_TEST);
    d.depthMask(!1);
    d.stencilFunc(d.NEVER, e, e);
    d.stencilOp(d.REPLACE, d.KEEP, d.KEEP);
    d.stencilMask(e);
    d.clear(d.STENCIL_BUFFER_BIT);
    1 > a.alphaThreshold &&
      ((d = cc.shaderCache.programForKey(
        cc.SHADER_POSITION_TEXTURECOLORALPHATEST
      )),
      cc.glUseProgram(d.getProgram()),
      d.setUniformLocationWith1f(
        cc.UNIFORM_ALPHA_TEST_VALUE_S,
        a.alphaThreshold
      ),
      d.setUniformLocationWithMatrix4fv(
        cc.UNIFORM_MVMATRIX_S,
        cc.renderer.mat4Identity.mat
      ),
      cc.setProgram(a._stencil, d));
  };
  a._onAfterDrawStencil = function (a) {
    a = a || cc._renderContext;
    a.depthMask(!0);
    a.stencilFunc(
      this._node.inverted ? a.NOTEQUAL : a.EQUAL,
      this._mask_layer_le,
      this._mask_layer_le
    );
    a.stencilOp(a.KEEP, a.KEEP, a.KEEP);
  };
  a._onAfterVisit = function (a) {
    a = a || cc._renderContext;
    cc.ClippingNode.WebGLRenderCmd._layer--;
    if (this._currentStencilEnabled) {
      var d = 1 << cc.ClippingNode.WebGLRenderCmd._layer,
        e = d | (d - 1);
      a.stencilMask(d);
      a.stencilFunc(a.EQUAL, e, e);
    } else a.disable(a.STENCIL_TEST);
  };
})();
cc.GridBase = cc.Class.extend({
  _active: !1,
  _reuseGrid: 0,
  _gridSize: null,
  _gridRect: null,
  _texture: null,
  _step: null,
  _grabber: null,
  _isTextureFlipped: !1,
  _glProgramState: null,
  _directorProjection: 0,
  _dirty: !1,
  ctor: function (a, b, d, e) {
    cc.sys._checkWebGLRenderMode();
    this._active = !1;
    this._reuseGrid = 0;
    this._gridSize = null;
    this._gridRect = new cc.rect();
    this._texture = null;
    this._step = cc.p(0, 0);
    this._grabber = null;
    this._isTextureFlipped = !1;
    this._glProgramState = null;
    this._directorProjection = 0;
    this._dirty = !1;
    void 0 !== a && this.initWithSize(a, b, d, e);
  },
  isActive: function () {
    return this._active;
  },
  setActive: function (a) {
    this._active = a;
    if (!a) {
      a = cc.director;
      var b = a.getProjection();
      a.setProjection(b);
    }
  },
  getReuseGrid: function () {
    return this._reuseGrid;
  },
  setReuseGrid: function (a) {
    this._reuseGrid = a;
  },
  getGridSize: function () {
    return cc.size(this._gridSize.width, this._gridSize.height);
  },
  setGridSize: function (a) {
    this._gridSize.width = parseInt(a.width);
    this._gridSize.height = parseInt(a.height);
  },
  setGridRect: function (a) {
    this._gridRect = a;
  },
  getGridRect: function () {
    return this._gridRect;
  },
  getStep: function () {
    return cc.p(this._step.x, this._step.y);
  },
  setStep: function (a) {
    this._step.x = a.x;
    this._step.y = a.y;
  },
  isTextureFlipped: function () {
    return this._isTextureFlipped;
  },
  setTextureFlipped: function (a) {
    this._isTextureFlipped !== a &&
      ((this._isTextureFlipped = a), this.calculateVertexPoints());
  },
  initWithSize: function (a, b, d, e) {
    if (!b) {
      var f = cc.director.getWinSizeInPixels(),
        g = cc.NextPOT(f.width),
        h = cc.NextPOT(f.height),
        k = new Uint8Array(g * h * 4);
      if (!k) return cc.log("cocos2d: CCGrid: not enough memory."), !1;
      b = new cc.Texture2D();
      b.initWithData(k, cc.Texture2D.PIXEL_FORMAT_RGBA8888, g, h, f);
      if (!b) return cc.log("cocos2d: CCGrid: error creating texture"), !1;
    }
    this._active = !1;
    this._reuseGrid = 0;
    this._gridSize = a;
    this._texture = b;
    this._isTextureFlipped = d || !1;
    if (void 0 === e || cc._rectEqualToZero(e))
      (b = this._texture.getContentSize()),
        (e = new cc.rect(0, 0, b.width, b.height));
    this._gridRect = e;
    this._step.x = this._gridRect.width / a.width;
    this._step.y = this._gridRect.height / a.height;
    this._grabber = new cc.Grabber();
    if (!this._grabber) return !1;
    this._grabber.grab(this._texture);
    this._glProgramState = cc.GLProgramState.getOrCreateWithGLProgram(
      cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE)
    );
    this.calculateVertexPoints();
    return !0;
  },
  beforeDraw: function () {
    this._directorProjection = cc.director.getProjection();
    var a = cc.director.getWinSizeInPixels();
    gl.viewport(0, 0, a.width, a.height);
    this._grabber.beforeRender(this._texture);
  },
  afterDraw: function (a) {
    this._grabber.afterRender(this._texture);
    cc.director.setViewport();
    cc.glBindTexture2D(this._texture);
    this.beforeBlit();
    this.blit(a);
    this.afterBlit();
  },
  beforeBlit: function () {},
  afterBlit: function () {},
  blit: function () {
    cc.log("cc.GridBase.blit(): Shall be overridden in subclass.");
  },
  reuse: function () {
    cc.log("cc.GridBase.reuse(): Shall be overridden in subclass.");
  },
  calculateVertexPoints: function () {
    cc.log(
      "cc.GridBase.calculateVertexPoints(): Shall be overridden in subclass."
    );
  },
  set2DProjection: function () {
    var a = cc.director.getWinSizeInPixels();
    cc._renderContext.viewport(0, 0, a.width, a.height);
    cc.kmGLMatrixMode(cc.KM_GL_PROJECTION);
    cc.kmGLLoadIdentity();
    a = cc.math.Matrix4.createOrthographicProjection(
      0,
      a.width,
      0,
      a.height,
      -1,
      1
    );
    cc.kmGLMultMatrix(a);
    cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
    cc.kmGLLoadIdentity();
    cc.setProjectionMatrixDirty();
  },
});
cc.GridBase.create = function (a, b, d, e) {
  return new cc.GridBase(a, b, d, e);
};
cc.Grid3D = cc.GridBase.extend({
  _texCoordinates: null,
  _vertices: null,
  _originalVertices: null,
  _indices: null,
  _texCoordinateBuffer: null,
  _verticesBuffer: null,
  _indicesBuffer: null,
  _needDepthTestForBlit: !1,
  _oldDepthTestValue: !1,
  _oldDepthWriteValue: !1,
  ctor: function (a, b, d, e) {
    cc.GridBase.prototype.ctor.call(this);
    this._indicesBuffer = this._verticesBuffer = this._texCoordinateBuffer = this._indices = this._originalVertices = this._vertices = this._texCoordinates = null;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
    void 0 !== a && this.initWithSize(a, b, d, e);
  },
  vertex: function (a) {
    return this.getVertex(a);
  },
  getVertex: function (a) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.Grid3D.vertex() : Numbers must be integers");
    a = 0 | (3 * (a.x * (this._gridSize.height + 1) + a.y));
    var b = this._vertices;
    return new cc.Vertex3F(b[a], b[a + 1], b[a + 2]);
  },
  originalVertex: function (a) {
    return this.getOriginalVertex(a);
  },
  getOriginalVertex: function (a) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.Grid3D.originalVertex() : Numbers must be integers");
    a = 0 | (3 * (a.x * (this._gridSize.height + 1) + a.y));
    var b = this._originalVertices;
    return new cc.Vertex3F(b[a], b[a + 1], b[a + 2]);
  },
  setVertex: function (a, b) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.Grid3D.setVertex() : Numbers must be integers");
    var d = 0 | (3 * (a.x * (this._gridSize.height + 1) + a.y)),
      e = this._vertices;
    e[d] = b.x;
    e[d + 1] = b.y;
    e[d + 2] = b.z;
    this._dirty = !0;
  },
  beforeBlit: function () {
    if (this._needDepthTestForBlit) {
      var a = cc._renderContext;
      this._oldDepthTestValue = a.isEnabled(a.DEPTH_TEST);
      this._oldDepthWriteValue = a.getParameter(a.DEPTH_WRITEMASK);
      a.enable(a.DEPTH_TEST);
      a.depthMask(!0);
    }
  },
  afterBlit: function () {
    if (this._needDepthTestForBlit) {
      var a = cc._renderContext;
      this._oldDepthTestValue
        ? a.enable(a.DEPTH_TEST)
        : a.disable(a.DEPTH_TEST);
      a.depthMask(this._oldDepthWriteValue);
    }
  },
  blit: function (a) {
    var b = this._gridSize.width * this._gridSize.height;
    a = a._renderCmd._worldTransform;
    this._matrix.mat[0] = a.a;
    this._matrix.mat[4] = a.c;
    this._matrix.mat[12] = a.tx;
    this._matrix.mat[1] = a.b;
    this._matrix.mat[5] = a.d;
    this._matrix.mat[13] = a.ty;
    this._glProgramState.apply(this._matrix);
    a = cc._renderContext;
    var d = this._dirty;
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
    a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
    d && a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 0, 0);
    a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
    d && a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, 0, 0);
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
    d && a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
    a.drawElements(a.TRIANGLES, 6 * b, a.UNSIGNED_SHORT, 0);
    d && (this._dirty = !1);
    cc.incrementGLDraws(1);
  },
  reuse: function () {
    if (0 < this._reuseGrid) {
      for (
        var a = this._originalVertices,
          b = this._vertices,
          d = 0,
          e = this._vertices.length;
        d < e;
        d++
      )
        a[d] = b[d];
      --this._reuseGrid;
    }
  },
  calculateVertexPoints: function () {
    var a = cc._renderContext,
      b = this._texture.pixelsWidth,
      d = this._texture.pixelsHeight,
      e = this._texture.getContentSizeInPixels().height,
      f = this._gridSize,
      g = (f.width + 1) * (f.height + 1);
    this._vertices = new Float32Array(3 * g);
    this._texCoordinates = new Float32Array(2 * g);
    this._indices = new Uint16Array(f.width * f.height * 6);
    this._verticesBuffer && a.deleteBuffer(this._verticesBuffer);
    this._verticesBuffer = a.createBuffer();
    this._texCoordinateBuffer && a.deleteBuffer(this._texCoordinateBuffer);
    this._texCoordinateBuffer = a.createBuffer();
    this._indicesBuffer && a.deleteBuffer(this._indicesBuffer);
    this._indicesBuffer = a.createBuffer();
    for (
      var h,
        k,
        m = this._indices,
        n = this._texCoordinates,
        p = this._isTextureFlipped,
        r = this._vertices,
        g = 0;
      g < f.width;
      ++g
    )
      for (h = 0; h < f.height; ++h) {
        var s = h * f.width + g;
        k = g * this._step.x + this._gridRect.x;
        var u = k + this._step.x,
          v = h * this._step.y + this._gridRect.y,
          t = v + this._step.y,
          w = g * (f.height + 1) + h,
          x = (g + 1) * (f.height + 1) + h,
          y = (g + 1) * (f.height + 1) + (h + 1),
          B = g * (f.height + 1) + (h + 1);
        m[6 * s] = w;
        m[6 * s + 1] = x;
        m[6 * s + 2] = B;
        m[6 * s + 3] = x;
        m[6 * s + 4] = y;
        m[6 * s + 5] = B;
        var s = [3 * w, 3 * x, 3 * y, 3 * B],
          A = [
            { x: k, y: v, z: 0 },
            { x: u, y: v, z: 0 },
            { x: u, y: t, z: 0 },
            { x: k, y: t, z: 0 },
          ],
          w = [2 * w, 2 * x, 2 * y, 2 * B],
          u = [cc.p(k, v), cc.p(u, v), cc.p(u, t), cc.p(k, t)];
        for (k = 0; 4 > k; ++k)
          (r[s[k]] = A[k].x),
            (r[s[k] + 1] = A[k].y),
            (r[s[k] + 2] = A[k].z),
            (n[w[k]] = u[k].x / b),
            (n[w[k] + 1] = p ? (e - u[k].y) / d : u[k].y / d);
      }
    this._originalVertices = new Float32Array(this._vertices);
    a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
    a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
    a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
    a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
    this._dirty = !0;
  },
  setNeedDepthTestForBlit: function (a) {
    this._needDepthTestForBlit = a;
  },
  getNeedDepthTestForBlit: function () {
    return this._needDepthTestForBlit;
  },
});
cc.Grid3D.create = function (a, b, d) {
  return new cc.Grid3D(a, b, d);
};
cc.TiledGrid3D = cc.GridBase.extend({
  _texCoordinates: null,
  _vertices: null,
  _originalVertices: null,
  _indices: null,
  _texCoordinateBuffer: null,
  _verticesBuffer: null,
  _indicesBuffer: null,
  ctor: function (a, b, d, e) {
    cc.GridBase.prototype.ctor.call(this);
    this._indicesBuffer = this._verticesBuffer = this._texCoordinateBuffer = this._indices = this._originalVertices = this._vertices = this._texCoordinates = null;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
    void 0 !== a && this.initWithSize(a, b, d, e);
  },
  tile: function (a) {
    return this.getTile(a);
  },
  getTile: function (a) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.TiledGrid3D.tile() : Numbers must be integers");
    a = 12 * (this._gridSize.height * a.x + a.y);
    var b = this._vertices;
    return new cc.Quad3(
      new cc.Vertex3F(b[a], b[a + 1], b[a + 2]),
      new cc.Vertex3F(b[a + 3], b[a + 4], b[a + 5]),
      new cc.Vertex3F(b[a + 6], b[a + 7], b[a + 8]),
      new cc.Vertex3F(b[a + 9], b[a + 10], b[a + 11])
    );
  },
  getOriginalTile: function (a) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.TiledGrid3D.originalTile() : Numbers must be integers");
    a = 12 * (this._gridSize.height * a.x + a.y);
    var b = this._originalVertices;
    return new cc.Quad3(
      new cc.Vertex3F(b[a], b[a + 1], b[a + 2]),
      new cc.Vertex3F(b[a + 3], b[a + 4], b[a + 5]),
      new cc.Vertex3F(b[a + 6], b[a + 7], b[a + 8]),
      new cc.Vertex3F(b[a + 9], b[a + 10], b[a + 11])
    );
  },
  originalTile: function (a) {
    return this.getOriginalTile(a);
  },
  setTile: function (a, b) {
    (a.x === (0 | a.x) && a.y === (0 | a.y)) ||
      cc.log("cc.TiledGrid3D.setTile() : Numbers must be integers");
    var d = 12 * (this._gridSize.height * a.x + a.y),
      e = this._vertices;
    e[d] = b.bl.x;
    e[d + 1] = b.bl.y;
    e[d + 2] = b.bl.z;
    e[d + 3] = b.br.x;
    e[d + 4] = b.br.y;
    e[d + 5] = b.br.z;
    e[d + 6] = b.tl.x;
    e[d + 7] = b.tl.y;
    e[d + 8] = b.tl.z;
    e[d + 9] = b.tr.x;
    e[d + 10] = b.tr.y;
    e[d + 11] = b.tr.z;
    this._dirty = !0;
  },
  blit: function (a) {
    var b = this._gridSize.width * this._gridSize.height;
    a = a._renderCmd._worldTransform;
    this._matrix.mat[0] = a.a;
    this._matrix.mat[4] = a.c;
    this._matrix.mat[12] = a.tx;
    this._matrix.mat[1] = a.b;
    this._matrix.mat[5] = a.d;
    this._matrix.mat[13] = a.ty;
    this._glProgramState.apply(this._matrix);
    a = cc._renderContext;
    var d = this._dirty;
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
    a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
    a.bindBuffer(a.ARRAY_BUFFER, this._verticesBuffer);
    d && a.bufferData(a.ARRAY_BUFFER, this._vertices, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(
      cc.VERTEX_ATTRIB_POSITION,
      3,
      a.FLOAT,
      !1,
      0,
      this._vertices
    );
    a.bindBuffer(a.ARRAY_BUFFER, this._texCoordinateBuffer);
    d && a.bufferData(a.ARRAY_BUFFER, this._texCoordinates, a.DYNAMIC_DRAW);
    a.vertexAttribPointer(
      cc.VERTEX_ATTRIB_TEX_COORDS,
      2,
      a.FLOAT,
      !1,
      0,
      this._texCoordinates
    );
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
    d && a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
    a.drawElements(a.TRIANGLES, 6 * b, a.UNSIGNED_SHORT, 0);
    d && (this._dirty = !1);
    cc.incrementGLDraws(1);
  },
  reuse: function () {
    if (0 < this._reuseGrid) {
      for (
        var a = this._vertices, b = this._originalVertices, d = 0;
        d < a.length;
        d++
      )
        b[d] = a[d];
      --this._reuseGrid;
    }
  },
  calculateVertexPoints: function () {
    var a = this._texture.pixelsWidth,
      b = this._texture.pixelsHeight,
      d = this._texture.getContentSizeInPixels().height,
      e = this._gridSize,
      f = e.width * e.height;
    this._vertices = new Float32Array(12 * f);
    this._texCoordinates = new Float32Array(8 * f);
    this._indices = new Uint16Array(6 * f);
    var g = cc._renderContext;
    this._verticesBuffer && g.deleteBuffer(this._verticesBuffer);
    this._verticesBuffer = g.createBuffer();
    this._texCoordinateBuffer && g.deleteBuffer(this._texCoordinateBuffer);
    this._texCoordinateBuffer = g.createBuffer();
    this._indicesBuffer && g.deleteBuffer(this._indicesBuffer);
    this._indicesBuffer = g.createBuffer();
    var h,
      k,
      m = 0,
      n = this._step,
      p = this._vertices,
      r = this._texCoordinates,
      s = this._isTextureFlipped;
    for (h = 0; h < e.width; h++)
      for (k = 0; k < e.height; k++) {
        var u = h * n.x,
          v = u + n.x,
          t = k * n.y,
          w = t + n.y;
        p[12 * m] = u;
        p[12 * m + 1] = t;
        p[12 * m + 2] = 0;
        p[12 * m + 3] = v;
        p[12 * m + 4] = t;
        p[12 * m + 5] = 0;
        p[12 * m + 6] = u;
        p[12 * m + 7] = w;
        p[12 * m + 8] = 0;
        p[12 * m + 9] = v;
        p[12 * m + 10] = w;
        p[12 * m + 11] = 0;
        var x = t,
          y = w;
        s && ((x = d - t), (y = d - w));
        r[8 * m] = u / a;
        r[8 * m + 1] = x / b;
        r[8 * m + 2] = v / a;
        r[8 * m + 3] = x / b;
        r[8 * m + 4] = u / a;
        r[8 * m + 5] = y / b;
        r[8 * m + 6] = v / a;
        r[8 * m + 7] = y / b;
        m++;
      }
    a = this._indices;
    for (h = 0; h < f; h++)
      (a[6 * h + 0] = 4 * h + 0),
        (a[6 * h + 1] = 4 * h + 1),
        (a[6 * h + 2] = 4 * h + 2),
        (a[6 * h + 3] = 4 * h + 1),
        (a[6 * h + 4] = 4 * h + 2),
        (a[6 * h + 5] = 4 * h + 3);
    this._originalVertices = new Float32Array(this._vertices);
    g.bindBuffer(g.ARRAY_BUFFER, this._verticesBuffer);
    g.bufferData(g.ARRAY_BUFFER, this._vertices, g.DYNAMIC_DRAW);
    g.bindBuffer(g.ARRAY_BUFFER, this._texCoordinateBuffer);
    g.bufferData(g.ARRAY_BUFFER, this._texCoordinates, g.DYNAMIC_DRAW);
    g.bindBuffer(g.ELEMENT_ARRAY_BUFFER, this._indicesBuffer);
    g.bufferData(g.ELEMENT_ARRAY_BUFFER, this._indices, g.DYNAMIC_DRAW);
    this._dirty = !0;
  },
});
cc.TiledGrid3D.create = function (a, b, d) {
  return new cc.TiledGrid3D(a, b, d);
};
cc.Grabber = cc.Class.extend({
  _FBO: null,
  _oldFBO: null,
  _oldClearColor: null,
  _gl: null,
  ctor: function () {
    cc.sys._checkWebGLRenderMode();
    this._gl = cc._renderContext;
    this._oldClearColor = [0, 0, 0, 0];
    this._oldFBO = null;
    this._FBO = this._gl.createFramebuffer();
  },
  grab: function (a) {
    var b = this._gl;
    this._oldFBO = b.getParameter(b.FRAMEBUFFER_BINDING);
    b.bindFramebuffer(b.FRAMEBUFFER, this._FBO);
    b.framebufferTexture2D(
      b.FRAMEBUFFER,
      b.COLOR_ATTACHMENT0,
      b.TEXTURE_2D,
      a._webTextureObj,
      0
    );
    b.checkFramebufferStatus(b.FRAMEBUFFER) !== b.FRAMEBUFFER_COMPLETE &&
      cc.log("Frame Grabber: could not attach texture to frmaebuffer");
    b.bindFramebuffer(b.FRAMEBUFFER, this._oldFBO);
  },
  beforeRender: function (a) {
    a = this._gl;
    this._oldFBO = a.getParameter(a.FRAMEBUFFER_BINDING);
    a.bindFramebuffer(a.FRAMEBUFFER, this._FBO);
    this._oldClearColor = a.getParameter(a.COLOR_CLEAR_VALUE);
    a.clearColor(0, 0, 0, 0);
    a.clear(a.COLOR_BUFFER_BIT | a.DEPTH_BUFFER_BIT);
  },
  afterRender: function (a) {
    a = this._gl;
    a.bindFramebuffer(a.FRAMEBUFFER, this._oldFBO);
    a.colorMask(!0, !0, !0, !0);
  },
  destroy: function () {
    this._gl.deleteFramebuffer(this._FBO);
  },
});
cc.ACTION_TAG_INVALID = -1;
cc.Action = cc.Class.extend({
  originalTarget: null,
  target: null,
  tag: cc.ACTION_TAG_INVALID,
  ctor: function () {
    this.target = this.originalTarget = null;
    this.tag = cc.ACTION_TAG_INVALID;
  },
  copy: function () {
    cc.log("copy is deprecated. Please use clone instead.");
    return this.clone();
  },
  clone: function () {
    var a = new cc.Action();
    a.originalTarget = null;
    a.target = null;
    a.tag = this.tag;
    return a;
  },
  isDone: function () {
    return !0;
  },
  startWithTarget: function (a) {
    this.target = this.originalTarget = a;
  },
  stop: function () {
    this.target = null;
  },
  step: function (a) {
    cc.log("[Action step]. override me");
  },
  update: function (a) {
    cc.log("[Action update]. override me");
  },
  getTarget: function () {
    return this.target;
  },
  setTarget: function (a) {
    this.target = a;
  },
  getOriginalTarget: function () {
    return this.originalTarget;
  },
  setOriginalTarget: function (a) {
    this.originalTarget = a;
  },
  getTag: function () {
    return this.tag;
  },
  setTag: function (a) {
    this.tag = a;
  },
  retain: function () {},
  release: function () {},
});
cc.action = function () {
  return new cc.Action();
};
cc.Action.create = cc.action;
cc.FiniteTimeAction = cc.Action.extend({
  _duration: 0,
  ctor: function () {
    cc.Action.prototype.ctor.call(this);
    this._duration = 0;
  },
  getDuration: function () {
    return this._duration * (this._timesForRepeat || 1);
  },
  setDuration: function (a) {
    this._duration = a;
  },
  reverse: function () {
    cc.log("cocos2d: FiniteTimeAction#reverse: Implement me");
    return null;
  },
  clone: function () {
    return new cc.FiniteTimeAction();
  },
});
cc.Speed = cc.Action.extend({
  _speed: 0,
  _innerAction: null,
  ctor: function (a, b) {
    cc.Action.prototype.ctor.call(this);
    this._speed = 0;
    this._innerAction = null;
    a && this.initWithAction(a, b);
  },
  getSpeed: function () {
    return this._speed;
  },
  setSpeed: function (a) {
    this._speed = a;
  },
  initWithAction: function (a, b) {
    if (!a) throw Error("cc.Speed.initWithAction(): action must be non nil");
    this._innerAction = a;
    this._speed = b;
    return !0;
  },
  clone: function () {
    var a = new cc.Speed();
    a.initWithAction(this._innerAction.clone(), this._speed);
    return a;
  },
  startWithTarget: function (a) {
    cc.Action.prototype.startWithTarget.call(this, a);
    this._innerAction.startWithTarget(a);
  },
  stop: function () {
    this._innerAction.stop();
    cc.Action.prototype.stop.call(this);
  },
  step: function (a) {
    this._innerAction.step(a * this._speed);
  },
  isDone: function () {
    return this._innerAction.isDone();
  },
  reverse: function () {
    return new cc.Speed(this._innerAction.reverse(), this._speed);
  },
  setInnerAction: function (a) {
    this._innerAction !== a && (this._innerAction = a);
  },
  getInnerAction: function () {
    return this._innerAction;
  },
});
cc.speed = function (a, b) {
  return new cc.Speed(a, b);
};
cc.Speed.create = cc.speed;
cc.Follow = cc.Action.extend({
  _followedNode: null,
  _boundarySet: !1,
  _boundaryFullyCovered: !1,
  _halfScreenSize: null,
  _fullScreenSize: null,
  _worldRect: null,
  leftBoundary: 0,
  rightBoundary: 0,
  topBoundary: 0,
  bottomBoundary: 0,
  ctor: function (a, b) {
    cc.Action.prototype.ctor.call(this);
    this._followedNode = null;
    this._boundaryFullyCovered = this._boundarySet = !1;
    this._fullScreenSize = this._halfScreenSize = null;
    this.bottomBoundary = this.topBoundary = this.rightBoundary = this.leftBoundary = 0;
    this._worldRect = cc.rect(0, 0, 0, 0);
    a && (b ? this.initWithTarget(a, b) : this.initWithTarget(a));
  },
  clone: function () {
    var a = new cc.Follow(),
      b = this._worldRect,
      b = new cc.Rect(b.x, b.y, b.width, b.height);
    a.initWithTarget(this._followedNode, b);
    return a;
  },
  isBoundarySet: function () {
    return this._boundarySet;
  },
  setBoudarySet: function (a) {
    this._boundarySet = a;
  },
  initWithTarget: function (a, b) {
    if (!a)
      throw Error("cc.Follow.initWithAction(): followedNode must be non nil");
    b = b || cc.rect(0, 0, 0, 0);
    this._followedNode = a;
    this._worldRect = b;
    this._boundarySet = !cc._rectEqualToZero(b);
    this._boundaryFullyCovered = !1;
    var d = cc.director.getWinSize();
    this._fullScreenSize = cc.p(d.width, d.height);
    this._halfScreenSize = cc.pMult(this._fullScreenSize, 0.5);
    this._boundarySet &&
      ((this.leftBoundary = -(b.x + b.width - this._fullScreenSize.x)),
      (this.rightBoundary = -b.x),
      (this.topBoundary = -b.y),
      (this.bottomBoundary = -(b.y + b.height - this._fullScreenSize.y)),
      this.rightBoundary < this.leftBoundary &&
        (this.rightBoundary = this.leftBoundary =
          (this.leftBoundary + this.rightBoundary) / 2),
      this.topBoundary < this.bottomBoundary &&
        (this.topBoundary = this.bottomBoundary =
          (this.topBoundary + this.bottomBoundary) / 2),
      this.topBoundary === this.bottomBoundary &&
        this.leftBoundary === this.rightBoundary &&
        (this._boundaryFullyCovered = !0));
    return !0;
  },
  step: function (a) {
    a = this._followedNode.x;
    var b = this._followedNode.y;
    a = this._halfScreenSize.x - a;
    b = this._halfScreenSize.y - b;
    this.target._renderCmd._dirtyFlag = 0;
    this._boundarySet
      ? this._boundaryFullyCovered ||
        this.target.setPosition(
          cc.clampf(a, this.leftBoundary, this.rightBoundary),
          cc.clampf(b, this.bottomBoundary, this.topBoundary)
        )
      : this.target.setPosition(a, b);
  },
  isDone: function () {
    return !this._followedNode.running;
  },
  stop: function () {
    this.target = null;
    cc.Action.prototype.stop.call(this);
  },
});
cc.follow = function (a, b) {
  return new cc.Follow(a, b);
};
cc.Follow.create = cc.follow;
cc.ActionInterval = cc.FiniteTimeAction.extend({
  _elapsed: 0,
  _firstTick: !1,
  _easeList: null,
  _timesForRepeat: 1,
  _repeatForever: !1,
  _repeatMethod: !1,
  _speed: 1,
  _speedMethod: !1,
  ctor: function (a) {
    this._timesForRepeat = this._speed = 1;
    this._repeatForever = !1;
    this.MAX_VALUE = 2;
    this._speedMethod = this._repeatMethod = !1;
    cc.FiniteTimeAction.prototype.ctor.call(this);
    void 0 !== a && this.initWithDuration(a);
  },
  getElapsed: function () {
    return this._elapsed;
  },
  initWithDuration: function (a) {
    this._duration = 0 === a ? cc.FLT_EPSILON : a;
    this._elapsed = 0;
    return (this._firstTick = !0);
  },
  isDone: function () {
    return this._elapsed >= this._duration;
  },
  _cloneDecoration: function (a) {
    a._repeatForever = this._repeatForever;
    a._speed = this._speed;
    a._timesForRepeat = this._timesForRepeat;
    a._easeList = this._easeList;
    a._speedMethod = this._speedMethod;
    a._repeatMethod = this._repeatMethod;
  },
  _reverseEaseList: function (a) {
    if (this._easeList) {
      a._easeList = [];
      for (var b = 0; b < this._easeList.length; b++)
        a._easeList.push(this._easeList[b].reverse());
    }
  },
  clone: function () {
    var a = new cc.ActionInterval(this._duration);
    this._cloneDecoration(a);
    return a;
  },
  easing: function (a) {
    this._easeList ? (this._easeList.length = 0) : (this._easeList = []);
    for (var b = 0; b < arguments.length; b++)
      this._easeList.push(arguments[b]);
    return this;
  },
  _computeEaseTime: function (a) {
    var b = this._easeList;
    if (!b || 0 === b.length) return a;
    for (var d = 0, e = b.length; d < e; d++) a = b[d].easing(a);
    return a;
  },
  step: function (a) {
    this._firstTick
      ? ((this._firstTick = !1), (this._elapsed = 0))
      : (this._elapsed += a);
    a =
      this._elapsed /
      (1.192092896e-7 < this._duration ? this._duration : 1.192092896e-7);
    a = 1 > a ? a : 1;
    this.update(0 < a ? a : 0);
    this._repeatMethod &&
      1 < this._timesForRepeat &&
      this.isDone() &&
      (this._repeatForever || this._timesForRepeat--,
      this.startWithTarget(this.target),
      this.step(this._elapsed - this._duration));
  },
  startWithTarget: function (a) {
    cc.Action.prototype.startWithTarget.call(this, a);
    this._elapsed = 0;
    this._firstTick = !0;
  },
  reverse: function () {
    cc.log("cc.IntervalAction: reverse not implemented.");
    return null;
  },
  setAmplitudeRate: function (a) {
    cc.log(
      "cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass."
    );
  },
  getAmplitudeRate: function () {
    cc.log(
      "cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass."
    );
    return 0;
  },
  speed: function (a) {
    if (0 >= a) return cc.log("The speed parameter error"), this;
    this._speedMethod = !0;
    this._speed *= a;
    return this;
  },
  getSpeed: function () {
    return this._speed;
  },
  setSpeed: function (a) {
    this._speed = a;
    return this;
  },
  repeat: function (a) {
    a = Math.round(a);
    if (isNaN(a) || 1 > a) return cc.log("The repeat parameter error"), this;
    this._repeatMethod = !0;
    this._timesForRepeat *= a;
    return this;
  },
  repeatForever: function () {
    this._repeatMethod = !0;
    this._timesForRepeat = this.MAX_VALUE;
    this._repeatForever = !0;
    return this;
  },
});
cc.actionInterval = function (a) {
  return new cc.ActionInterval(a);
};
cc.ActionInterval.create = cc.actionInterval;
cc.Sequence = cc.ActionInterval.extend({
  _actions: null,
  _split: null,
  _last: 0,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._actions = [];
    var b = a instanceof Array ? a : arguments,
      d = b.length - 1;
    0 <= d &&
      null == b[d] &&
      cc.log("parameters should not be ending with null in Javascript");
    if (0 <= d) {
      for (var e = b[0], f = 1; f < d; f++)
        b[f] && (e = cc.Sequence._actionOneTwo(e, b[f]));
      this.initWithTwoActions(e, b[d]);
    }
  },
  initWithTwoActions: function (a, b) {
    if (!a || !b)
      throw Error(
        "cc.Sequence.initWithTwoActions(): arguments must all be non nil"
      );
    this.initWithDuration(a._duration + b._duration);
    this._actions[0] = a;
    this._actions[1] = b;
    return !0;
  },
  clone: function () {
    var a = new cc.Sequence();
    this._cloneDecoration(a);
    a.initWithTwoActions(this._actions[0].clone(), this._actions[1].clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._split = this._actions[0]._duration / this._duration;
    this._last = -1;
  },
  stop: function () {
    -1 !== this._last && this._actions[this._last].stop();
    cc.Action.prototype.stop.call(this);
  },
  update: function (a) {
    var b = 0,
      d = this._split,
      e = this._actions,
      f = this._last;
    a = this._computeEaseTime(a);
    a < d
      ? ((a = 0 !== d ? a / d : 1),
        0 === b && 1 === f && (e[1].update(0), e[1].stop()))
      : ((b = 1),
        (a = 1 === d ? 1 : (a - d) / (1 - d)),
        -1 === f &&
          (e[0].startWithTarget(this.target), e[0].update(1), e[0].stop()),
        f || (e[0].update(1), e[0].stop()));
    e = e[b];
    (f === b && e.isDone()) ||
      (f !== b && e.startWithTarget(this.target),
      (a *= e._timesForRepeat),
      e.update(1 < a ? a % 1 : a),
      (this._last = b));
  },
  reverse: function () {
    var a = cc.Sequence._actionOneTwo(
      this._actions[1].reverse(),
      this._actions[0].reverse()
    );
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.sequence = function (a) {
  var b = a instanceof Array ? a : arguments;
  0 < b.length &&
    null == b[b.length - 1] &&
    cc.log("parameters should not be ending with null in Javascript");
  for (var d, e, f, g; b && 0 < b.length; )
    for (
      e = Array.prototype.shift.call(b),
        g = e._timesForRepeat || 1,
        e._repeatMethod = !1,
        e._timesForRepeat = 1,
        f = 0,
        d || ((d = e), (f = 1)),
        f;
      f < g;
      f++
    )
      d = cc.Sequence._actionOneTwo(d, e);
  return d;
};
cc.Sequence.create = cc.sequence;
cc.Sequence._actionOneTwo = function (a, b) {
  var d = new cc.Sequence();
  d.initWithTwoActions(a, b);
  return d;
};
cc.Repeat = cc.ActionInterval.extend({
  _times: 0,
  _total: 0,
  _nextDt: 0,
  _actionInstant: !1,
  _innerAction: null,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithAction(a, b);
  },
  initWithAction: function (a, b) {
    return this.initWithDuration(a._duration * b)
      ? ((this._times = b),
        (this._innerAction = a),
        a instanceof cc.ActionInstant &&
          ((this._actionInstant = !0), (this._times -= 1)),
        (this._total = 0),
        !0)
      : !1;
  },
  clone: function () {
    var a = new cc.Repeat();
    this._cloneDecoration(a);
    a.initWithAction(this._innerAction.clone(), this._times);
    return a;
  },
  startWithTarget: function (a) {
    this._total = 0;
    this._nextDt = this._innerAction._duration / this._duration;
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._innerAction.startWithTarget(a);
  },
  stop: function () {
    this._innerAction.stop();
    cc.Action.prototype.stop.call(this);
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    var b = this._innerAction,
      d = this._duration,
      e = this._times,
      f = this._nextDt;
    if (a >= f) {
      for (; a > f && this._total < e; )
        b.update(1),
          this._total++,
          b.stop(),
          b.startWithTarget(this.target),
          (this._nextDt = f += b._duration / d);
      1 <= a && this._total < e && this._total++;
      this._actionInstant ||
        (this._total === e
          ? (b.update(1), b.stop())
          : b.update(a - (f - b._duration / d)));
    } else b.update((a * e) % 1);
  },
  isDone: function () {
    return this._total === this._times;
  },
  reverse: function () {
    var a = new cc.Repeat(this._innerAction.reverse(), this._times);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  setInnerAction: function (a) {
    this._innerAction !== a && (this._innerAction = a);
  },
  getInnerAction: function () {
    return this._innerAction;
  },
});
cc.repeat = function (a, b) {
  return new cc.Repeat(a, b);
};
cc.Repeat.create = cc.repeat;
cc.RepeatForever = cc.ActionInterval.extend({
  _innerAction: null,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._innerAction = null;
    a && this.initWithAction(a);
  },
  initWithAction: function (a) {
    if (!a)
      throw Error("cc.RepeatForever.initWithAction(): action must be non null");
    this._innerAction = a;
    return !0;
  },
  clone: function () {
    var a = new cc.RepeatForever();
    this._cloneDecoration(a);
    a.initWithAction(this._innerAction.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._innerAction.startWithTarget(a);
  },
  step: function (a) {
    var b = this._innerAction;
    b.step(a);
    b.isDone() &&
      (b.startWithTarget(this.target), b.step(b.getElapsed() - b._duration));
  },
  isDone: function () {
    return !1;
  },
  reverse: function () {
    var a = new cc.RepeatForever(this._innerAction.reverse());
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  setInnerAction: function (a) {
    this._innerAction !== a && (this._innerAction = a);
  },
  getInnerAction: function () {
    return this._innerAction;
  },
});
cc.repeatForever = function (a) {
  return new cc.RepeatForever(a);
};
cc.RepeatForever.create = cc.repeatForever;
cc.Spawn = cc.ActionInterval.extend({
  _one: null,
  _two: null,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._two = this._one = null;
    var b, d, e;
    if (a instanceof Array) d = a;
    else
      for (d = Array(arguments.length), b = 0; b < arguments.length; ++b)
        d[b] = arguments[b];
    e = d.length - 1;
    0 <= e &&
      null == d[e] &&
      cc.log("parameters should not be ending with null in Javascript");
    if (0 <= e) {
      var f = d[0];
      for (b = 1; b < e; b++) d[b] && (f = cc.Spawn._actionOneTwo(f, d[b]));
      this.initWithTwoActions(f, d[e]);
    }
  },
  initWithTwoActions: function (a, b) {
    if (!a || !b)
      throw Error(
        "cc.Spawn.initWithTwoActions(): arguments must all be non null"
      );
    var d = !1,
      e = a._duration,
      f = b._duration;
    this.initWithDuration(Math.max(e, f)) &&
      ((this._one = a),
      (this._two = b),
      e > f
        ? (this._two = cc.Sequence._actionOneTwo(b, cc.delayTime(e - f)))
        : e < f &&
          (this._one = cc.Sequence._actionOneTwo(a, cc.delayTime(f - e))),
      (d = !0));
    return d;
  },
  clone: function () {
    var a = new cc.Spawn();
    this._cloneDecoration(a);
    a.initWithTwoActions(this._one.clone(), this._two.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._one.startWithTarget(a);
    this._two.startWithTarget(a);
  },
  stop: function () {
    this._one.stop();
    this._two.stop();
    cc.Action.prototype.stop.call(this);
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this._one && this._one.update(a);
    this._two && this._two.update(a);
  },
  reverse: function () {
    var a = cc.Spawn._actionOneTwo(this._one.reverse(), this._two.reverse());
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.spawn = function (a) {
  var b = a instanceof Array ? a : arguments;
  0 < b.length &&
    null == b[b.length - 1] &&
    cc.log("parameters should not be ending with null in Javascript");
  for (var d = b[0], e = 1; e < b.length; e++)
    null != b[e] && (d = cc.Spawn._actionOneTwo(d, b[e]));
  return d;
};
cc.Spawn.create = cc.spawn;
cc.Spawn._actionOneTwo = function (a, b) {
  var d = new cc.Spawn();
  d.initWithTwoActions(a, b);
  return d;
};
cc.RotateTo = cc.ActionInterval.extend({
  _dstAngleX: 0,
  _startAngleX: 0,
  _diffAngleX: 0,
  _dstAngleY: 0,
  _startAngleY: 0,
  _diffAngleY: 0,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._dstAngleX = b || 0),
        (this._dstAngleY = void 0 !== d ? d : this._dstAngleX),
        !0)
      : !1;
  },
  clone: function () {
    var a = new cc.RotateTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._dstAngleX, this._dstAngleY);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    var b = a.rotationX % 360,
      d = this._dstAngleX - b;
    180 < d && (d -= 360);
    -180 > d && (d += 360);
    this._startAngleX = b;
    this._diffAngleX = d;
    this._startAngleY = a.rotationY % 360;
    a = this._dstAngleY - this._startAngleY;
    180 < a && (a -= 360);
    -180 > a && (a += 360);
    this._diffAngleY = a;
  },
  reverse: function () {
    cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.");
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this.target &&
      ((this.target.rotationX = this._startAngleX + this._diffAngleX * a),
      (this.target.rotationY = this._startAngleY + this._diffAngleY * a));
  },
});
cc.rotateTo = function (a, b, d) {
  return new cc.RotateTo(a, b, d);
};
cc.RotateTo.create = cc.rotateTo;
cc.RotateBy = cc.ActionInterval.extend({
  _angleX: 0,
  _startAngleX: 0,
  _angleY: 0,
  _startAngleY: 0,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._angleX = b || 0), (this._angleY = d || this._angleX), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.RotateBy();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._angleX, this._angleY);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._startAngleX = a.rotationX;
    this._startAngleY = a.rotationY;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this.target &&
      ((this.target.rotationX = this._startAngleX + this._angleX * a),
      (this.target.rotationY = this._startAngleY + this._angleY * a));
  },
  reverse: function () {
    var a = new cc.RotateBy(this._duration, -this._angleX, -this._angleY);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.rotateBy = function (a, b, d) {
  return new cc.RotateBy(a, b, d);
};
cc.RotateBy.create = cc.rotateBy;
cc.MoveBy = cc.ActionInterval.extend({
  _positionDelta: null,
  _startPosition: null,
  _previousPosition: null,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._positionDelta = cc.p(0, 0);
    this._startPosition = cc.p(0, 0);
    this._previousPosition = cc.p(0, 0);
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? (void 0 !== b.x && ((d = b.y), (b = b.x)),
        (this._positionDelta.x = b),
        (this._positionDelta.y = d),
        !0)
      : !1;
  },
  clone: function () {
    var a = new cc.MoveBy();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._positionDelta);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    var b = a.getPositionX();
    a = a.getPositionY();
    this._previousPosition.x = b;
    this._previousPosition.y = a;
    this._startPosition.x = b;
    this._startPosition.y = a;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    if (this.target) {
      var b = this._positionDelta.x * a;
      a *= this._positionDelta.y;
      var d = this._startPosition;
      if (cc.ENABLE_STACKABLE_ACTIONS) {
        var e = this.target.getPositionX(),
          f = this.target.getPositionY(),
          g = this._previousPosition;
        d.x = d.x + e - g.x;
        d.y = d.y + f - g.y;
        b += d.x;
        a += d.y;
        g.x = b;
        g.y = a;
        this.target.setPosition(b, a);
      } else this.target.setPosition(d.x + b, d.y + a);
    }
  },
  reverse: function () {
    var a = new cc.MoveBy(
      this._duration,
      cc.p(-this._positionDelta.x, -this._positionDelta.y)
    );
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.moveBy = function (a, b, d) {
  return new cc.MoveBy(a, b, d);
};
cc.MoveBy.create = cc.moveBy;
cc.MoveTo = cc.MoveBy.extend({
  _endPosition: null,
  ctor: function (a, b, d) {
    cc.MoveBy.prototype.ctor.call(this);
    this._endPosition = cc.p(0, 0);
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.MoveBy.prototype.initWithDuration.call(this, a, b, d)
      ? (void 0 !== b.x && ((d = b.y), (b = b.x)),
        (this._endPosition.x = b),
        (this._endPosition.y = d),
        !0)
      : !1;
  },
  clone: function () {
    var a = new cc.MoveTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._endPosition);
    return a;
  },
  startWithTarget: function (a) {
    cc.MoveBy.prototype.startWithTarget.call(this, a);
    this._positionDelta.x = this._endPosition.x - a.getPositionX();
    this._positionDelta.y = this._endPosition.y - a.getPositionY();
  },
});
cc.moveTo = function (a, b, d) {
  return new cc.MoveTo(a, b, d);
};
cc.MoveTo.create = cc.moveTo;
cc.SkewTo = cc.ActionInterval.extend({
  _skewX: 0,
  _skewY: 0,
  _startSkewX: 0,
  _startSkewY: 0,
  _endSkewX: 0,
  _endSkewY: 0,
  _deltaX: 0,
  _deltaY: 0,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    var e = !1;
    cc.ActionInterval.prototype.initWithDuration.call(this, a) &&
      ((this._endSkewX = b), (this._endSkewY = d), (e = !0));
    return e;
  },
  clone: function () {
    var a = new cc.SkewTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._endSkewX, this._endSkewY);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._startSkewX = a.skewX % 180;
    this._deltaX = this._endSkewX - this._startSkewX;
    180 < this._deltaX && (this._deltaX -= 360);
    -180 > this._deltaX && (this._deltaX += 360);
    this._startSkewY = a.skewY % 360;
    this._deltaY = this._endSkewY - this._startSkewY;
    180 < this._deltaY && (this._deltaY -= 360);
    -180 > this._deltaY && (this._deltaY += 360);
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this.target.skewX = this._startSkewX + this._deltaX * a;
    this.target.skewY = this._startSkewY + this._deltaY * a;
  },
});
cc.skewTo = function (a, b, d) {
  return new cc.SkewTo(a, b, d);
};
cc.SkewTo.create = cc.skewTo;
cc.SkewBy = cc.SkewTo.extend({
  ctor: function (a, b, d) {
    cc.SkewTo.prototype.ctor.call(this);
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    var e = !1;
    cc.SkewTo.prototype.initWithDuration.call(this, a, b, d) &&
      ((this._skewX = b), (this._skewY = d), (e = !0));
    return e;
  },
  clone: function () {
    var a = new cc.SkewBy();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._skewX, this._skewY);
    return a;
  },
  startWithTarget: function (a) {
    cc.SkewTo.prototype.startWithTarget.call(this, a);
    this._deltaX = this._skewX;
    this._deltaY = this._skewY;
    this._endSkewX = this._startSkewX + this._deltaX;
    this._endSkewY = this._startSkewY + this._deltaY;
  },
  reverse: function () {
    var a = new cc.SkewBy(this._duration, -this._skewX, -this._skewY);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.skewBy = function (a, b, d) {
  return new cc.SkewBy(a, b, d);
};
cc.SkewBy.create = cc.skewBy;
cc.JumpBy = cc.ActionInterval.extend({
  _startPosition: null,
  _delta: null,
  _height: 0,
  _jumps: 0,
  _previousPosition: null,
  ctor: function (a, b, d, e, f) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._startPosition = cc.p(0, 0);
    this._previousPosition = cc.p(0, 0);
    this._delta = cc.p(0, 0);
    void 0 !== e && this.initWithDuration(a, b, d, e, f);
  },
  initWithDuration: function (a, b, d, e, f) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? (void 0 === f && ((f = e), (e = d), (d = b.y), (b = b.x)),
        (this._delta.x = b),
        (this._delta.y = d),
        (this._height = e),
        (this._jumps = f),
        !0)
      : !1;
  },
  clone: function () {
    var a = new cc.JumpBy();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._delta, this._height, this._jumps);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    var b = a.getPositionX();
    a = a.getPositionY();
    this._previousPosition.x = b;
    this._previousPosition.y = a;
    this._startPosition.x = b;
    this._startPosition.y = a;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    if (this.target) {
      var b = (a * this._jumps) % 1,
        b = 4 * this._height * b * (1 - b),
        b = b + this._delta.y * a;
      a *= this._delta.x;
      var d = this._startPosition;
      if (cc.ENABLE_STACKABLE_ACTIONS) {
        var e = this.target.getPositionX(),
          f = this.target.getPositionY(),
          g = this._previousPosition;
        d.x = d.x + e - g.x;
        d.y = d.y + f - g.y;
        a += d.x;
        b += d.y;
        g.x = a;
        g.y = b;
        this.target.setPosition(a, b);
      } else this.target.setPosition(d.x + a, d.y + b);
    }
  },
  reverse: function () {
    var a = new cc.JumpBy(
      this._duration,
      cc.p(-this._delta.x, -this._delta.y),
      this._height,
      this._jumps
    );
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.jumpBy = function (a, b, d, e, f) {
  return new cc.JumpBy(a, b, d, e, f);
};
cc.JumpBy.create = cc.jumpBy;
cc.JumpTo = cc.JumpBy.extend({
  _endPosition: null,
  ctor: function (a, b, d, e, f) {
    cc.JumpBy.prototype.ctor.call(this);
    this._endPosition = cc.p(0, 0);
    void 0 !== e && this.initWithDuration(a, b, d, e, f);
  },
  initWithDuration: function (a, b, d, e, f) {
    return cc.JumpBy.prototype.initWithDuration.call(this, a, b, d, e, f)
      ? (void 0 === f && ((d = b.y), (b = b.x)),
        (this._endPosition.x = b),
        (this._endPosition.y = d),
        !0)
      : !1;
  },
  startWithTarget: function (a) {
    cc.JumpBy.prototype.startWithTarget.call(this, a);
    this._delta.x = this._endPosition.x - this._startPosition.x;
    this._delta.y = this._endPosition.y - this._startPosition.y;
  },
  clone: function () {
    var a = new cc.JumpTo();
    this._cloneDecoration(a);
    a.initWithDuration(
      this._duration,
      this._endPosition,
      this._height,
      this._jumps
    );
    return a;
  },
});
cc.jumpTo = function (a, b, d, e, f) {
  return new cc.JumpTo(a, b, d, e, f);
};
cc.JumpTo.create = cc.jumpTo;
cc.bezierAt = function (a, b, d, e, f) {
  return (
    Math.pow(1 - f, 3) * a +
    3 * f * Math.pow(1 - f, 2) * b +
    3 * Math.pow(f, 2) * (1 - f) * d +
    Math.pow(f, 3) * e
  );
};
cc.BezierBy = cc.ActionInterval.extend({
  _config: null,
  _startPosition: null,
  _previousPosition: null,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._config = [];
    this._startPosition = cc.p(0, 0);
    this._previousPosition = cc.p(0, 0);
    b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._config = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.BezierBy();
    this._cloneDecoration(a);
    for (var b = [], d = 0; d < this._config.length; d++) {
      var e = this._config[d];
      b.push(cc.p(e.x, e.y));
    }
    a.initWithDuration(this._duration, b);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    var b = a.getPositionX();
    a = a.getPositionY();
    this._previousPosition.x = b;
    this._previousPosition.y = a;
    this._startPosition.x = b;
    this._startPosition.y = a;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    if (this.target) {
      var b = this._config,
        d = b[0].y,
        e = b[1].y,
        f = b[2].y,
        b = cc.bezierAt(0, b[0].x, b[1].x, b[2].x, a);
      a = cc.bezierAt(0, d, e, f, a);
      d = this._startPosition;
      if (cc.ENABLE_STACKABLE_ACTIONS) {
        var e = this.target.getPositionX(),
          f = this.target.getPositionY(),
          g = this._previousPosition;
        d.x = d.x + e - g.x;
        d.y = d.y + f - g.y;
        b += d.x;
        a += d.y;
        g.x = b;
        g.y = a;
        this.target.setPosition(b, a);
      } else this.target.setPosition(d.x + b, d.y + a);
    }
  },
  reverse: function () {
    var a = this._config,
      a = [
        cc.pAdd(a[1], cc.pNeg(a[2])),
        cc.pAdd(a[0], cc.pNeg(a[2])),
        cc.pNeg(a[2]),
      ],
      a = new cc.BezierBy(this._duration, a);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.bezierBy = function (a, b) {
  return new cc.BezierBy(a, b);
};
cc.BezierBy.create = cc.bezierBy;
cc.BezierTo = cc.BezierBy.extend({
  _toConfig: null,
  ctor: function (a, b) {
    cc.BezierBy.prototype.ctor.call(this);
    this._toConfig = [];
    b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._toConfig = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.BezierTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._toConfig);
    return a;
  },
  startWithTarget: function (a) {
    cc.BezierBy.prototype.startWithTarget.call(this, a);
    a = this._startPosition;
    var b = this._toConfig,
      d = this._config;
    d[0] = cc.pSub(b[0], a);
    d[1] = cc.pSub(b[1], a);
    d[2] = cc.pSub(b[2], a);
  },
});
cc.bezierTo = function (a, b) {
  return new cc.BezierTo(a, b);
};
cc.BezierTo.create = cc.bezierTo;
cc.ScaleTo = cc.ActionInterval.extend({
  _scaleX: 1,
  _scaleY: 1,
  _startScaleX: 1,
  _startScaleY: 1,
  _endScaleX: 0,
  _endScaleY: 0,
  _deltaX: 0,
  _deltaY: 0,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._endScaleX = b), (this._endScaleY = null != d ? d : b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.ScaleTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._endScaleX, this._endScaleY);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._startScaleX = a.scaleX;
    this._startScaleY = a.scaleY;
    this._deltaX = this._endScaleX - this._startScaleX;
    this._deltaY = this._endScaleY - this._startScaleY;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this.target &&
      ((this.target.scaleX = this._startScaleX + this._deltaX * a),
      (this.target.scaleY = this._startScaleY + this._deltaY * a));
  },
});
cc.scaleTo = function (a, b, d) {
  return new cc.ScaleTo(a, b, d);
};
cc.ScaleTo.create = cc.scaleTo;
cc.ScaleBy = cc.ScaleTo.extend({
  startWithTarget: function (a) {
    cc.ScaleTo.prototype.startWithTarget.call(this, a);
    this._deltaX = this._startScaleX * this._endScaleX - this._startScaleX;
    this._deltaY = this._startScaleY * this._endScaleY - this._startScaleY;
  },
  reverse: function () {
    var a = new cc.ScaleBy(
      this._duration,
      1 / this._endScaleX,
      1 / this._endScaleY
    );
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  clone: function () {
    var a = new cc.ScaleBy();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._endScaleX, this._endScaleY);
    return a;
  },
});
cc.scaleBy = function (a, b, d) {
  return new cc.ScaleBy(a, b, d);
};
cc.ScaleBy.create = cc.scaleBy;
cc.Blink = cc.ActionInterval.extend({
  _times: 0,
  _originalState: !1,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._times = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.Blink();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._times);
    return a;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    if (this.target && !this.isDone()) {
      var b = 1 / this._times;
      this.target.visible = a % b > b / 2;
    }
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._originalState = a.visible;
  },
  stop: function () {
    this.target.visible = this._originalState;
    cc.ActionInterval.prototype.stop.call(this);
  },
  reverse: function () {
    var a = new cc.Blink(this._duration, this._times);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.blink = function (a, b) {
  return new cc.Blink(a, b);
};
cc.Blink.create = cc.blink;
cc.FadeTo = cc.ActionInterval.extend({
  _toOpacity: 0,
  _fromOpacity: 0,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._toOpacity = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.FadeTo();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._toOpacity);
    return a;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    var b = void 0 !== this._fromOpacity ? this._fromOpacity : 255;
    this.target.opacity = b + (this._toOpacity - b) * a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._fromOpacity = a.opacity;
  },
});
cc.fadeTo = function (a, b) {
  return new cc.FadeTo(a, b);
};
cc.FadeTo.create = cc.fadeTo;
cc.FadeIn = cc.FadeTo.extend({
  _reverseAction: null,
  ctor: function (a) {
    cc.FadeTo.prototype.ctor.call(this);
    null == a && (a = 0);
    this.initWithDuration(a, 255);
  },
  reverse: function () {
    var a = new cc.FadeOut();
    a.initWithDuration(this._duration, 0);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  clone: function () {
    var a = new cc.FadeIn();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._toOpacity);
    return a;
  },
  startWithTarget: function (a) {
    this._reverseAction && (this._toOpacity = this._reverseAction._fromOpacity);
    cc.FadeTo.prototype.startWithTarget.call(this, a);
  },
});
cc.fadeIn = function (a) {
  return new cc.FadeIn(a);
};
cc.FadeIn.create = cc.fadeIn;
cc.FadeOut = cc.FadeTo.extend({
  ctor: function (a) {
    cc.FadeTo.prototype.ctor.call(this);
    null == a && (a = 0);
    this.initWithDuration(a, 0);
  },
  reverse: function () {
    var a = new cc.FadeIn();
    a._reverseAction = this;
    a.initWithDuration(this._duration, 255);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  clone: function () {
    var a = new cc.FadeOut();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration, this._toOpacity);
    return a;
  },
});
cc.fadeOut = function (a) {
  return new cc.FadeOut(a);
};
cc.FadeOut.create = cc.fadeOut;
cc.TintTo = cc.ActionInterval.extend({
  _to: null,
  _from: null,
  ctor: function (a, b, d, e) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._to = cc.color(0, 0, 0);
    this._from = cc.color(0, 0, 0);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._to = cc.color(b, d, e)), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.TintTo();
    this._cloneDecoration(a);
    var b = this._to;
    a.initWithDuration(this._duration, b.r, b.g, b.b);
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._from = this.target.color;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    var b = this._from,
      d = this._to;
    b &&
      this.target.setColor(
        cc.color(
          b.r + (d.r - b.r) * a,
          b.g + (d.g - b.g) * a,
          b.b + (d.b - b.b) * a
        )
      );
  },
});
cc.tintTo = function (a, b, d, e) {
  return new cc.TintTo(a, b, d, e);
};
cc.TintTo.create = cc.tintTo;
cc.TintBy = cc.ActionInterval.extend({
  _deltaR: 0,
  _deltaG: 0,
  _deltaB: 0,
  _fromR: 0,
  _fromG: 0,
  _fromB: 0,
  ctor: function (a, b, d, e) {
    cc.ActionInterval.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._deltaR = b), (this._deltaG = d), (this._deltaB = e), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.TintBy();
    this._cloneDecoration(a);
    a.initWithDuration(
      this._duration,
      this._deltaR,
      this._deltaG,
      this._deltaB
    );
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    a = a.color;
    this._fromR = a.r;
    this._fromG = a.g;
    this._fromB = a.b;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this.target.color = cc.color(
      this._fromR + this._deltaR * a,
      this._fromG + this._deltaG * a,
      this._fromB + this._deltaB * a
    );
  },
  reverse: function () {
    var a = new cc.TintBy(
      this._duration,
      -this._deltaR,
      -this._deltaG,
      -this._deltaB
    );
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
});
cc.tintBy = function (a, b, d, e) {
  return new cc.TintBy(a, b, d, e);
};
cc.TintBy.create = cc.tintBy;
cc.DelayTime = cc.ActionInterval.extend({
  update: function (a) {},
  reverse: function () {
    var a = new cc.DelayTime(this._duration);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  clone: function () {
    var a = new cc.DelayTime();
    this._cloneDecoration(a);
    a.initWithDuration(this._duration);
    return a;
  },
});
cc.delayTime = function (a) {
  return new cc.DelayTime(a);
};
cc.DelayTime.create = cc.delayTime;
cc.ReverseTime = cc.ActionInterval.extend({
  _other: null,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._other = null;
    a && this.initWithAction(a);
  },
  initWithAction: function (a) {
    if (!a)
      throw Error("cc.ReverseTime.initWithAction(): action must be non null");
    if (a === this._other)
      throw Error(
        "cc.ReverseTime.initWithAction(): the action was already passed in."
      );
    return cc.ActionInterval.prototype.initWithDuration.call(this, a._duration)
      ? ((this._other = a), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.ReverseTime();
    this._cloneDecoration(a);
    a.initWithAction(this._other.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._other.startWithTarget(a);
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this._other && this._other.update(1 - a);
  },
  reverse: function () {
    return this._other.clone();
  },
  stop: function () {
    this._other.stop();
    cc.Action.prototype.stop.call(this);
  },
});
cc.reverseTime = function (a) {
  return new cc.ReverseTime(a);
};
cc.ReverseTime.create = cc.reverseTime;
cc.Animate = cc.ActionInterval.extend({
  _animation: null,
  _nextFrame: 0,
  _origFrame: null,
  _executedLoops: 0,
  _splitTimes: null,
  _currFrameIndex: 0,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._splitTimes = [];
    a && this.initWithAnimation(a);
  },
  getAnimation: function () {
    return this._animation;
  },
  setAnimation: function (a) {
    this._animation = a;
  },
  getCurrentFrameIndex: function () {
    return this._currFrameIndex;
  },
  initWithAnimation: function (a) {
    if (!a)
      throw Error("cc.Animate.initWithAnimation(): animation must be non-NULL");
    var b = a.getDuration();
    if (this.initWithDuration(b * a.getLoops())) {
      this._nextFrame = 0;
      this.setAnimation(a);
      this._origFrame = null;
      this._executedLoops = 0;
      var d = this._splitTimes,
        e = (d.length = 0),
        f = b / a.getTotalDelayUnits();
      a = a.getFrames();
      cc.arrayVerifyType(a, cc.AnimationFrame);
      for (var g = 0; g < a.length; g++) {
        var h = (e * f) / b,
          e = e + a[g].getDelayUnits();
        d.push(h);
      }
      return !0;
    }
    return !1;
  },
  clone: function () {
    var a = new cc.Animate();
    this._cloneDecoration(a);
    a.initWithAnimation(this._animation.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._animation.getRestoreOriginalFrame() &&
      (this._origFrame = a.getSpriteFrame());
    this._executedLoops = this._nextFrame = 0;
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    1 > a &&
      ((a *= this._animation.getLoops()),
      (0 | a) > this._executedLoops &&
        ((this._nextFrame = 0), this._executedLoops++),
      (a %= 1));
    for (
      var b = this._animation.getFrames(),
        d = b.length,
        e = this._splitTimes,
        f = this._nextFrame;
      f < d;
      f++
    )
      if (e[f] <= a)
        (_currFrameIndex = f),
          this.target.setSpriteFrame(b[_currFrameIndex].getSpriteFrame()),
          (this._nextFrame = f + 1);
      else break;
  },
  reverse: function () {
    var a = this._animation,
      b = a.getFrames(),
      d = [];
    cc.arrayVerifyType(b, cc.AnimationFrame);
    if (0 < b.length)
      for (var e = b.length - 1; 0 <= e; e--) {
        var f = b[e];
        if (!f) break;
        d.push(f.clone());
      }
    b = new cc.Animation(d, a.getDelayPerUnit(), a.getLoops());
    b.setRestoreOriginalFrame(a.getRestoreOriginalFrame());
    a = new cc.Animate(b);
    this._cloneDecoration(a);
    this._reverseEaseList(a);
    return a;
  },
  stop: function () {
    this._animation.getRestoreOriginalFrame() &&
      this.target &&
      this.target.setSpriteFrame(this._origFrame);
    cc.Action.prototype.stop.call(this);
  },
});
cc.animate = function (a) {
  return new cc.Animate(a);
};
cc.Animate.create = cc.animate;
cc.TargetedAction = cc.ActionInterval.extend({
  _action: null,
  _forcedTarget: null,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    b && this.initWithTarget(a, b);
  },
  initWithTarget: function (a, b) {
    return this.initWithDuration(b._duration)
      ? ((this._forcedTarget = a), (this._action = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.TargetedAction();
    this._cloneDecoration(a);
    a.initWithTarget(this._forcedTarget, this._action.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._action.startWithTarget(this._forcedTarget);
  },
  stop: function () {
    this._action.stop();
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    this._action.update(a);
  },
  getForcedTarget: function () {
    return this._forcedTarget;
  },
  setForcedTarget: function (a) {
    this._forcedTarget !== a && (this._forcedTarget = a);
  },
});
cc.targetedAction = function (a, b) {
  return new cc.TargetedAction(a, b);
};
cc.TargetedAction.create = cc.targetedAction;
cc.ActionInstant = cc.FiniteTimeAction.extend({
  isDone: function () {
    return !0;
  },
  step: function (a) {
    this.update(1);
  },
  update: function (a) {},
  reverse: function () {
    return this.clone();
  },
  clone: function () {
    return new cc.ActionInstant();
  },
});
cc.Show = cc.ActionInstant.extend({
  update: function (a) {
    this.target.visible = !0;
  },
  reverse: function () {
    return new cc.Hide();
  },
  clone: function () {
    return new cc.Show();
  },
});
cc.show = function () {
  return new cc.Show();
};
cc.Show.create = cc.show;
cc.Hide = cc.ActionInstant.extend({
  update: function (a) {
    this.target.visible = !1;
  },
  reverse: function () {
    return new cc.Show();
  },
  clone: function () {
    return new cc.Hide();
  },
});
cc.hide = function () {
  return new cc.Hide();
};
cc.Hide.create = cc.hide;
cc.ToggleVisibility = cc.ActionInstant.extend({
  update: function (a) {
    this.target.visible = !this.target.visible;
  },
  reverse: function () {
    return new cc.ToggleVisibility();
  },
  clone: function () {
    return new cc.ToggleVisibility();
  },
});
cc.toggleVisibility = function () {
  return new cc.ToggleVisibility();
};
cc.ToggleVisibility.create = cc.toggleVisibility;
cc.RemoveSelf = cc.ActionInstant.extend({
  _isNeedCleanUp: !0,
  ctor: function (a) {
    cc.FiniteTimeAction.prototype.ctor.call(this);
    void 0 !== a && this.init(a);
  },
  update: function (a) {
    this.target.removeFromParent(this._isNeedCleanUp);
  },
  init: function (a) {
    this._isNeedCleanUp = a;
    return !0;
  },
  reverse: function () {
    return new cc.RemoveSelf(this._isNeedCleanUp);
  },
  clone: function () {
    return new cc.RemoveSelf(this._isNeedCleanUp);
  },
});
cc.removeSelf = function (a) {
  return new cc.RemoveSelf(a);
};
cc.RemoveSelf.create = cc.removeSelf;
cc.FlipX = cc.ActionInstant.extend({
  _flippedX: !1,
  ctor: function (a) {
    cc.FiniteTimeAction.prototype.ctor.call(this);
    this._flippedX = !1;
    void 0 !== a && this.initWithFlipX(a);
  },
  initWithFlipX: function (a) {
    this._flippedX = a;
    return !0;
  },
  update: function (a) {
    this.target.flippedX = this._flippedX;
  },
  reverse: function () {
    return new cc.FlipX(!this._flippedX);
  },
  clone: function () {
    var a = new cc.FlipX();
    a.initWithFlipX(this._flippedX);
    return a;
  },
});
cc.flipX = function (a) {
  return new cc.FlipX(a);
};
cc.FlipX.create = cc.flipX;
cc.FlipY = cc.ActionInstant.extend({
  _flippedY: !1,
  ctor: function (a) {
    cc.FiniteTimeAction.prototype.ctor.call(this);
    this._flippedY = !1;
    void 0 !== a && this.initWithFlipY(a);
  },
  initWithFlipY: function (a) {
    this._flippedY = a;
    return !0;
  },
  update: function (a) {
    this.target.flippedY = this._flippedY;
  },
  reverse: function () {
    return new cc.FlipY(!this._flippedY);
  },
  clone: function () {
    var a = new cc.FlipY();
    a.initWithFlipY(this._flippedY);
    return a;
  },
});
cc.flipY = function (a) {
  return new cc.FlipY(a);
};
cc.FlipY.create = cc.flipY;
cc.Place = cc.ActionInstant.extend({
  _x: 0,
  _y: 0,
  ctor: function (a, b) {
    cc.FiniteTimeAction.prototype.ctor.call(this);
    this._y = this._x = 0;
    void 0 !== a &&
      (void 0 !== a.x && ((b = a.y), (a = a.x)), this.initWithPosition(a, b));
  },
  initWithPosition: function (a, b) {
    this._x = a;
    this._y = b;
    return !0;
  },
  update: function (a) {
    this.target.setPosition(this._x, this._y);
  },
  clone: function () {
    var a = new cc.Place();
    a.initWithPosition(this._x, this._y);
    return a;
  },
});
cc.place = function (a, b) {
  return new cc.Place(a, b);
};
cc.Place.create = cc.place;
cc.CallFunc = cc.ActionInstant.extend({
  _selectorTarget: null,
  _function: null,
  _data: null,
  ctor: function (a, b, d) {
    cc.FiniteTimeAction.prototype.ctor.call(this);
    this.initWithFunction(a, b, d);
  },
  initWithFunction: function (a, b, d) {
    a && (this._function = a);
    b && (this._selectorTarget = b);
    void 0 !== d && (this._data = d);
    return !0;
  },
  execute: function () {
    this._function &&
      this._function.call(this._selectorTarget, this.target, this._data);
  },
  update: function (a) {
    this.execute();
  },
  getTargetCallback: function () {
    return this._selectorTarget;
  },
  setTargetCallback: function (a) {
    a !== this._selectorTarget &&
      (this._selectorTarget && (this._selectorTarget = null),
      (this._selectorTarget = a));
  },
  clone: function () {
    var a = new cc.CallFunc();
    a.initWithFunction(this._function, this._selectorTarget, this._data);
    return a;
  },
});
cc.callFunc = function (a, b, d) {
  return new cc.CallFunc(a, b, d);
};
cc.CallFunc.create = cc.callFunc;
cc.ActionEase = cc.ActionInterval.extend({
  _inner: null,
  ctor: function (a) {
    cc.ActionInterval.prototype.ctor.call(this);
    a && this.initWithAction(a);
  },
  initWithAction: function (a) {
    if (!a)
      throw Error("cc.ActionEase.initWithAction(): action must be non nil");
    return this.initWithDuration(a.getDuration())
      ? ((this._inner = a), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.ActionEase();
    a.initWithAction(this._inner.clone());
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._inner.startWithTarget(this.target);
  },
  stop: function () {
    this._inner.stop();
    cc.ActionInterval.prototype.stop.call(this);
  },
  update: function (a) {
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.ActionEase(this._inner.reverse());
  },
  getInnerAction: function () {
    return this._inner;
  },
});
cc.actionEase = function (a) {
  return new cc.ActionEase(a);
};
cc.ActionEase.create = cc.actionEase;
cc.EaseRateAction = cc.ActionEase.extend({
  _rate: 0,
  ctor: function (a, b) {
    cc.ActionEase.prototype.ctor.call(this);
    void 0 !== b && this.initWithAction(a, b);
  },
  setRate: function (a) {
    this._rate = a;
  },
  getRate: function () {
    return this._rate;
  },
  initWithAction: function (a, b) {
    return cc.ActionEase.prototype.initWithAction.call(this, a)
      ? ((this._rate = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.EaseRateAction();
    a.initWithAction(this._inner.clone(), this._rate);
    return a;
  },
  reverse: function () {
    return new cc.EaseRateAction(this._inner.reverse(), 1 / this._rate);
  },
});
cc.easeRateAction = function (a, b) {
  return new cc.EaseRateAction(a, b);
};
cc.EaseRateAction.create = cc.easeRateAction;
cc.EaseIn = cc.EaseRateAction.extend({
  update: function (a) {
    this._inner.update(Math.pow(a, this._rate));
  },
  reverse: function () {
    return new cc.EaseIn(this._inner.reverse(), 1 / this._rate);
  },
  clone: function () {
    var a = new cc.EaseIn();
    a.initWithAction(this._inner.clone(), this._rate);
    return a;
  },
});
cc.EaseIn.create = function (a, b) {
  return new cc.EaseIn(a, b);
};
cc.easeIn = function (a) {
  return {
    _rate: a,
    easing: function (a) {
      return Math.pow(a, this._rate);
    },
    reverse: function () {
      return cc.easeIn(1 / this._rate);
    },
  };
};
cc.EaseOut = cc.EaseRateAction.extend({
  update: function (a) {
    this._inner.update(Math.pow(a, 1 / this._rate));
  },
  reverse: function () {
    return new cc.EaseOut(this._inner.reverse(), 1 / this._rate);
  },
  clone: function () {
    var a = new cc.EaseOut();
    a.initWithAction(this._inner.clone(), this._rate);
    return a;
  },
});
cc.EaseOut.create = function (a, b) {
  return new cc.EaseOut(a, b);
};
cc.easeOut = function (a) {
  return {
    _rate: a,
    easing: function (a) {
      return Math.pow(a, 1 / this._rate);
    },
    reverse: function () {
      return cc.easeOut(1 / this._rate);
    },
  };
};
cc.EaseInOut = cc.EaseRateAction.extend({
  update: function (a) {
    a *= 2;
    1 > a
      ? this._inner.update(0.5 * Math.pow(a, this._rate))
      : this._inner.update(1 - 0.5 * Math.pow(2 - a, this._rate));
  },
  clone: function () {
    var a = new cc.EaseInOut();
    a.initWithAction(this._inner.clone(), this._rate);
    return a;
  },
  reverse: function () {
    return new cc.EaseInOut(this._inner.reverse(), this._rate);
  },
});
cc.EaseInOut.create = function (a, b) {
  return new cc.EaseInOut(a, b);
};
cc.easeInOut = function (a) {
  return {
    _rate: a,
    easing: function (a) {
      a *= 2;
      return 1 > a
        ? 0.5 * Math.pow(a, this._rate)
        : 1 - 0.5 * Math.pow(2 - a, this._rate);
    },
    reverse: function () {
      return cc.easeInOut(this._rate);
    },
  };
};
cc.EaseExponentialIn = cc.ActionEase.extend({
  update: function (a) {
    this._inner.update(0 === a ? 0 : Math.pow(2, 10 * (a - 1)));
  },
  reverse: function () {
    return new cc.EaseExponentialOut(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseExponentialIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseExponentialIn.create = function (a) {
  return new cc.EaseExponentialIn(a);
};
cc._easeExponentialInObj = {
  easing: function (a) {
    return 0 === a ? 0 : Math.pow(2, 10 * (a - 1));
  },
  reverse: function () {
    return cc._easeExponentialOutObj;
  },
};
cc.easeExponentialIn = function () {
  return cc._easeExponentialInObj;
};
cc.EaseExponentialOut = cc.ActionEase.extend({
  update: function (a) {
    this._inner.update(1 === a ? 1 : -Math.pow(2, -10 * a) + 1);
  },
  reverse: function () {
    return new cc.EaseExponentialIn(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseExponentialOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseExponentialOut.create = function (a) {
  return new cc.EaseExponentialOut(a);
};
cc._easeExponentialOutObj = {
  easing: function (a) {
    return 1 === a ? 1 : -Math.pow(2, -10 * a) + 1;
  },
  reverse: function () {
    return cc._easeExponentialInObj;
  },
};
cc.easeExponentialOut = function () {
  return cc._easeExponentialOutObj;
};
cc.EaseExponentialInOut = cc.ActionEase.extend({
  update: function (a) {
    1 !== a &&
      0 !== a &&
      ((a *= 2),
      (a =
        1 > a
          ? 0.5 * Math.pow(2, 10 * (a - 1))
          : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2)));
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.EaseExponentialInOut(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseExponentialInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseExponentialInOut.create = function (a) {
  return new cc.EaseExponentialInOut(a);
};
cc._easeExponentialInOutObj = {
  easing: function (a) {
    return 1 !== a && 0 !== a
      ? ((a *= 2),
        1 > a
          ? 0.5 * Math.pow(2, 10 * (a - 1))
          : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2))
      : a;
  },
  reverse: function () {
    return cc._easeExponentialInOutObj;
  },
};
cc.easeExponentialInOut = function () {
  return cc._easeExponentialInOutObj;
};
cc.EaseSineIn = cc.ActionEase.extend({
  update: function (a) {
    a = 0 === a || 1 === a ? a : -1 * Math.cos((a * Math.PI) / 2) + 1;
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.EaseSineOut(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseSineIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseSineIn.create = function (a) {
  return new cc.EaseSineIn(a);
};
cc._easeSineInObj = {
  easing: function (a) {
    return 0 === a || 1 === a ? a : -1 * Math.cos((a * Math.PI) / 2) + 1;
  },
  reverse: function () {
    return cc._easeSineOutObj;
  },
};
cc.easeSineIn = function () {
  return cc._easeSineInObj;
};
cc.EaseSineOut = cc.ActionEase.extend({
  update: function (a) {
    a = 0 === a || 1 === a ? a : Math.sin((a * Math.PI) / 2);
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.EaseSineIn(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseSineOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseSineOut.create = function (a) {
  return new cc.EaseSineOut(a);
};
cc._easeSineOutObj = {
  easing: function (a) {
    return 0 === a || 1 === a ? a : Math.sin((a * Math.PI) / 2);
  },
  reverse: function () {
    return cc._easeSineInObj;
  },
};
cc.easeSineOut = function () {
  return cc._easeSineOutObj;
};
cc.EaseSineInOut = cc.ActionEase.extend({
  update: function (a) {
    a = 0 === a || 1 === a ? a : -0.5 * (Math.cos(Math.PI * a) - 1);
    this._inner.update(a);
  },
  clone: function () {
    var a = new cc.EaseSineInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseSineInOut(this._inner.reverse());
  },
});
cc.EaseSineInOut.create = function (a) {
  return new cc.EaseSineInOut(a);
};
cc._easeSineInOutObj = {
  easing: function (a) {
    return 0 === a || 1 === a ? a : -0.5 * (Math.cos(Math.PI * a) - 1);
  },
  reverse: function () {
    return cc._easeSineInOutObj;
  },
};
cc.easeSineInOut = function () {
  return cc._easeSineInOutObj;
};
cc.EaseElastic = cc.ActionEase.extend({
  _period: 0.3,
  ctor: function (a, b) {
    cc.ActionEase.prototype.ctor.call(this);
    a && this.initWithAction(a, b);
  },
  getPeriod: function () {
    return this._period;
  },
  setPeriod: function (a) {
    this._period = a;
  },
  initWithAction: function (a, b) {
    cc.ActionEase.prototype.initWithAction.call(this, a);
    this._period = null == b ? 0.3 : b;
    return !0;
  },
  reverse: function () {
    cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass.");
    return null;
  },
  clone: function () {
    var a = new cc.EaseElastic();
    a.initWithAction(this._inner.clone(), this._period);
    return a;
  },
});
cc.EaseElastic.create = function (a, b) {
  return new cc.EaseElastic(a, b);
};
cc.EaseElasticIn = cc.EaseElastic.extend({
  update: function (a) {
    var b = 0;
    0 === a || 1 === a
      ? (b = a)
      : ((b = this._period / 4),
        (a -= 1),
        (b =
          -Math.pow(2, 10 * a) *
          Math.sin(((a - b) * Math.PI * 2) / this._period)));
    this._inner.update(b);
  },
  reverse: function () {
    return new cc.EaseElasticOut(this._inner.reverse(), this._period);
  },
  clone: function () {
    var a = new cc.EaseElasticIn();
    a.initWithAction(this._inner.clone(), this._period);
    return a;
  },
});
cc.EaseElasticIn.create = function (a, b) {
  return new cc.EaseElasticIn(a, b);
};
cc._easeElasticInObj = {
  easing: function (a) {
    if (0 === a || 1 === a) return a;
    a -= 1;
    return -Math.pow(2, 10 * a) * Math.sin(((a - 0.075) * Math.PI * 2) / 0.3);
  },
  reverse: function () {
    return cc._easeElasticOutObj;
  },
};
cc.easeElasticIn = function (a) {
  return a && 0.3 !== a
    ? {
        _period: a,
        easing: function (a) {
          if (0 === a || 1 === a) return a;
          a -= 1;
          return (
            -Math.pow(2, 10 * a) *
            Math.sin(((a - this._period / 4) * Math.PI * 2) / this._period)
          );
        },
        reverse: function () {
          return cc.easeElasticOut(this._period);
        },
      }
    : cc._easeElasticInObj;
};
cc.EaseElasticOut = cc.EaseElastic.extend({
  update: function (a) {
    var b = 0;
    0 === a || 1 === a
      ? (b = a)
      : ((b = this._period / 4),
        (b =
          Math.pow(2, -10 * a) *
            Math.sin(((a - b) * Math.PI * 2) / this._period) +
          1));
    this._inner.update(b);
  },
  reverse: function () {
    return new cc.EaseElasticIn(this._inner.reverse(), this._period);
  },
  clone: function () {
    var a = new cc.EaseElasticOut();
    a.initWithAction(this._inner.clone(), this._period);
    return a;
  },
});
cc.EaseElasticOut.create = function (a, b) {
  return new cc.EaseElasticOut(a, b);
};
cc._easeElasticOutObj = {
  easing: function (a) {
    return 0 === a || 1 === a
      ? a
      : Math.pow(2, -10 * a) * Math.sin(((a - 0.075) * Math.PI * 2) / 0.3) + 1;
  },
  reverse: function () {
    return cc._easeElasticInObj;
  },
};
cc.easeElasticOut = function (a) {
  return a && 0.3 !== a
    ? {
        _period: a,
        easing: function (a) {
          return 0 === a || 1 === a
            ? a
            : Math.pow(2, -10 * a) *
                Math.sin(
                  ((a - this._period / 4) * Math.PI * 2) / this._period
                ) +
                1;
        },
        reverse: function () {
          return cc.easeElasticIn(this._period);
        },
      }
    : cc._easeElasticOutObj;
};
cc.EaseElasticInOut = cc.EaseElastic.extend({
  update: function (a) {
    var b = 0,
      b = this._period;
    if (0 === a || 1 === a) b = a;
    else {
      b || (b = this._period = 0.3 * 1.5);
      var d = b / 4;
      a = 2 * a - 1;
      b =
        0 > a
          ? -0.5 * Math.pow(2, 10 * a) * Math.sin(((a - d) * Math.PI * 2) / b)
          : Math.pow(2, -10 * a) * Math.sin(((a - d) * Math.PI * 2) / b) * 0.5 +
            1;
    }
    this._inner.update(b);
  },
  reverse: function () {
    return new cc.EaseElasticInOut(this._inner.reverse(), this._period);
  },
  clone: function () {
    var a = new cc.EaseElasticInOut();
    a.initWithAction(this._inner.clone(), this._period);
    return a;
  },
});
cc.EaseElasticInOut.create = function (a, b) {
  return new cc.EaseElasticInOut(a, b);
};
cc.easeElasticInOut = function (a) {
  return {
    _period: a || 0.3,
    easing: function (a) {
      var d = 0,
        d = this._period;
      if (0 === a || 1 === a) d = a;
      else {
        d || (d = this._period = 0.3 * 1.5);
        var e = d / 4;
        a = 2 * a - 1;
        d =
          0 > a
            ? -0.5 * Math.pow(2, 10 * a) * Math.sin(((a - e) * Math.PI * 2) / d)
            : Math.pow(2, -10 * a) *
                Math.sin(((a - e) * Math.PI * 2) / d) *
                0.5 +
              1;
      }
      return d;
    },
    reverse: function () {
      return cc.easeElasticInOut(this._period);
    },
  };
};
cc.EaseBounce = cc.ActionEase.extend({
  bounceTime: function (a) {
    if (a < 1 / 2.75) return 7.5625 * a * a;
    if (a < 2 / 2.75) return (a -= 1.5 / 2.75), 7.5625 * a * a + 0.75;
    if (a < 2.5 / 2.75) return (a -= 2.25 / 2.75), 7.5625 * a * a + 0.9375;
    a -= 2.625 / 2.75;
    return 7.5625 * a * a + 0.984375;
  },
  clone: function () {
    var a = new cc.EaseBounce();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseBounce(this._inner.reverse());
  },
});
cc.EaseBounce.create = function (a) {
  return new cc.EaseBounce(a);
};
cc.EaseBounceIn = cc.EaseBounce.extend({
  update: function (a) {
    a = 1 - this.bounceTime(1 - a);
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.EaseBounceOut(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseBounceIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseBounceIn.create = function (a) {
  return new cc.EaseBounceIn(a);
};
cc._bounceTime = function (a) {
  if (a < 1 / 2.75) return 7.5625 * a * a;
  if (a < 2 / 2.75) return (a -= 1.5 / 2.75), 7.5625 * a * a + 0.75;
  if (a < 2.5 / 2.75) return (a -= 2.25 / 2.75), 7.5625 * a * a + 0.9375;
  a -= 2.625 / 2.75;
  return 7.5625 * a * a + 0.984375;
};
cc._easeBounceInObj = {
  easing: function (a) {
    return 1 - cc._bounceTime(1 - a);
  },
  reverse: function () {
    return cc._easeBounceOutObj;
  },
};
cc.easeBounceIn = function () {
  return cc._easeBounceInObj;
};
cc.EaseBounceOut = cc.EaseBounce.extend({
  update: function (a) {
    a = this.bounceTime(a);
    this._inner.update(a);
  },
  reverse: function () {
    return new cc.EaseBounceIn(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseBounceOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseBounceOut.create = function (a) {
  return new cc.EaseBounceOut(a);
};
cc._easeBounceOutObj = {
  easing: function (a) {
    return cc._bounceTime(a);
  },
  reverse: function () {
    return cc._easeBounceInObj;
  },
};
cc.easeBounceOut = function () {
  return cc._easeBounceOutObj;
};
cc.EaseBounceInOut = cc.EaseBounce.extend({
  update: function (a) {
    var b = 0,
      b =
        0.5 > a
          ? 0.5 * (1 - this.bounceTime(1 - 2 * a))
          : 0.5 * this.bounceTime(2 * a - 1) + 0.5;
    this._inner.update(b);
  },
  clone: function () {
    var a = new cc.EaseBounceInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseBounceInOut(this._inner.reverse());
  },
});
cc.EaseBounceInOut.create = function (a) {
  return new cc.EaseBounceInOut(a);
};
cc._easeBounceInOutObj = {
  easing: function (a) {
    return (a =
      0.5 > a
        ? 0.5 * (1 - cc._bounceTime(1 - 2 * a))
        : 0.5 * cc._bounceTime(2 * a - 1) + 0.5);
  },
  reverse: function () {
    return cc._easeBounceInOutObj;
  },
};
cc.easeBounceInOut = function () {
  return cc._easeBounceInOutObj;
};
cc.EaseBackIn = cc.ActionEase.extend({
  update: function (a) {
    this._inner.update(
      0 === a || 1 === a ? a : a * a * (2.70158 * a - 1.70158)
    );
  },
  reverse: function () {
    return new cc.EaseBackOut(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseBackIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseBackIn.create = function (a) {
  return new cc.EaseBackIn(a);
};
cc._easeBackInObj = {
  easing: function (a) {
    return 0 === a || 1 === a ? a : a * a * (2.70158 * a - 1.70158);
  },
  reverse: function () {
    return cc._easeBackOutObj;
  },
};
cc.easeBackIn = function () {
  return cc._easeBackInObj;
};
cc.EaseBackOut = cc.ActionEase.extend({
  update: function (a) {
    a -= 1;
    this._inner.update(a * a * (2.70158 * a + 1.70158) + 1);
  },
  reverse: function () {
    return new cc.EaseBackIn(this._inner.reverse());
  },
  clone: function () {
    var a = new cc.EaseBackOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
});
cc.EaseBackOut.create = function (a) {
  return new cc.EaseBackOut(a);
};
cc._easeBackOutObj = {
  easing: function (a) {
    a -= 1;
    return a * a * (2.70158 * a + 1.70158) + 1;
  },
  reverse: function () {
    return cc._easeBackInObj;
  },
};
cc.easeBackOut = function () {
  return cc._easeBackOutObj;
};
cc.EaseBackInOut = cc.ActionEase.extend({
  update: function (a) {
    a *= 2;
    1 > a
      ? this._inner.update((a * a * (3.5949095 * a - 2.5949095)) / 2)
      : ((a -= 2),
        this._inner.update((a * a * (3.5949095 * a + 2.5949095)) / 2 + 1));
  },
  clone: function () {
    var a = new cc.EaseBackInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseBackInOut(this._inner.reverse());
  },
});
cc.EaseBackInOut.create = function (a) {
  return new cc.EaseBackInOut(a);
};
cc._easeBackInOutObj = {
  easing: function (a) {
    a *= 2;
    if (1 > a) return (a * a * (3.5949095 * a - 2.5949095)) / 2;
    a -= 2;
    return (a * a * (3.5949095 * a + 2.5949095)) / 2 + 1;
  },
  reverse: function () {
    return cc._easeBackInOutObj;
  },
};
cc.easeBackInOut = function () {
  return cc._easeBackInOutObj;
};
cc.EaseBezierAction = cc.ActionEase.extend({
  _p0: null,
  _p1: null,
  _p2: null,
  _p3: null,
  ctor: function (a) {
    cc.ActionEase.prototype.ctor.call(this, a);
  },
  _updateTime: function (a, b, d, e, f) {
    return (
      Math.pow(1 - f, 3) * a +
      3 * f * Math.pow(1 - f, 2) * b +
      3 * Math.pow(f, 2) * (1 - f) * d +
      Math.pow(f, 3) * e
    );
  },
  update: function (a) {
    a = this._updateTime(this._p0, this._p1, this._p2, this._p3, a);
    this._inner.update(a);
  },
  clone: function () {
    var a = new cc.EaseBezierAction();
    a.initWithAction(this._inner.clone());
    a.setBezierParamer(this._p0, this._p1, this._p2, this._p3);
    return a;
  },
  reverse: function () {
    var a = new cc.EaseBezierAction(this._inner.reverse());
    a.setBezierParamer(this._p3, this._p2, this._p1, this._p0);
    return a;
  },
  setBezierParamer: function (a, b, d, e) {
    this._p0 = a || 0;
    this._p1 = b || 0;
    this._p2 = d || 0;
    this._p3 = e || 0;
  },
});
cc.EaseBezierAction.create = function (a) {
  return new cc.EaseBezierAction(a);
};
cc.easeBezierAction = function (a, b, d, e) {
  return {
    easing: function (f) {
      return cc.EaseBezierAction.prototype._updateTime(a, b, d, e, f);
    },
    reverse: function () {
      return cc.easeBezierAction(e, d, b, a);
    },
  };
};
cc.EaseQuadraticActionIn = cc.ActionEase.extend({
  _updateTime: function (a) {
    return Math.pow(a, 2);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuadraticActionIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuadraticActionIn(this._inner.reverse());
  },
});
cc.EaseQuadraticActionIn.create = function (a) {
  return new cc.EaseQuadraticActionIn(a);
};
cc._easeQuadraticActionIn = {
  easing: cc.EaseQuadraticActionIn.prototype._updateTime,
  reverse: function () {
    return cc._easeQuadraticActionIn;
  },
};
cc.easeQuadraticActionIn = function () {
  return cc._easeQuadraticActionIn;
};
cc.EaseQuadraticActionOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    return -a * (a - 2);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuadraticActionOut();
    a.initWithAction();
    return a;
  },
  reverse: function () {
    return new cc.EaseQuadraticActionOut(this._inner.reverse());
  },
});
cc.EaseQuadraticActionOut.create = function (a) {
  return new cc.EaseQuadraticActionOut(a);
};
cc._easeQuadraticActionOut = {
  easing: cc.EaseQuadraticActionOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuadraticActionOut;
  },
};
cc.easeQuadraticActionOut = function () {
  return cc._easeQuadraticActionOut;
};
cc.EaseQuadraticActionInOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    var b = a;
    a *= 2;
    1 > a ? (b = a * a * 0.5) : (--a, (b = -0.5 * (a * (a - 2) - 1)));
    return b;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuadraticActionInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuadraticActionInOut(this._inner.reverse());
  },
});
cc.EaseQuadraticActionInOut.create = function (a) {
  return new cc.EaseQuadraticActionInOut(a);
};
cc._easeQuadraticActionInOut = {
  easing: cc.EaseQuadraticActionInOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuadraticActionInOut;
  },
};
cc.easeQuadraticActionInOut = function () {
  return cc._easeQuadraticActionInOut;
};
cc.EaseQuarticActionIn = cc.ActionEase.extend({
  _updateTime: function (a) {
    return a * a * a * a;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuarticActionIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuarticActionIn(this._inner.reverse());
  },
});
cc.EaseQuarticActionIn.create = function (a) {
  return new cc.EaseQuarticActionIn(a);
};
cc._easeQuarticActionIn = {
  easing: cc.EaseQuarticActionIn.prototype._updateTime,
  reverse: function () {
    return cc._easeQuarticActionIn;
  },
};
cc.easeQuarticActionIn = function () {
  return cc._easeQuarticActionIn;
};
cc.EaseQuarticActionOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a -= 1;
    return -(a * a * a * a - 1);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuarticActionOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuarticActionOut(this._inner.reverse());
  },
});
cc.EaseQuarticActionOut.create = function (a) {
  return new cc.EaseQuarticActionOut(a);
};
cc._easeQuarticActionOut = {
  easing: cc.EaseQuarticActionOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuarticActionOut;
  },
};
cc.easeQuarticActionOut = function () {
  return cc._easeQuarticActionOut;
};
cc.EaseQuarticActionInOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a * a;
    a -= 2;
    return -0.5 * (a * a * a * a - 2);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuarticActionInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuarticActionInOut(this._inner.reverse());
  },
});
cc.EaseQuarticActionInOut.create = function (a) {
  return new cc.EaseQuarticActionInOut(a);
};
cc._easeQuarticActionInOut = {
  easing: cc.EaseQuarticActionInOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuarticActionInOut;
  },
};
cc.easeQuarticActionInOut = function () {
  return cc._easeQuarticActionInOut;
};
cc.EaseQuinticActionIn = cc.ActionEase.extend({
  _updateTime: function (a) {
    return a * a * a * a * a;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuinticActionIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuinticActionIn(this._inner.reverse());
  },
});
cc.EaseQuinticActionIn.create = function (a) {
  return new cc.EaseQuinticActionIn(a);
};
cc._easeQuinticActionIn = {
  easing: cc.EaseQuinticActionIn.prototype._updateTime,
  reverse: function () {
    return cc._easeQuinticActionIn;
  },
};
cc.easeQuinticActionIn = function () {
  return cc._easeQuinticActionIn;
};
cc.EaseQuinticActionOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a -= 1;
    return a * a * a * a * a + 1;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuinticActionOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuinticActionOut(this._inner.reverse());
  },
});
cc.EaseQuinticActionOut.create = function (a) {
  return new cc.EaseQuinticActionOut(a);
};
cc._easeQuinticActionOut = {
  easing: cc.EaseQuinticActionOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuinticActionOut;
  },
};
cc.easeQuinticActionOut = function () {
  return cc._easeQuinticActionOut;
};
cc.EaseQuinticActionInOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a * a * a;
    a -= 2;
    return 0.5 * (a * a * a * a * a + 2);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseQuinticActionInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseQuinticActionInOut(this._inner.reverse());
  },
});
cc.EaseQuinticActionInOut.create = function (a) {
  return new cc.EaseQuinticActionInOut(a);
};
cc._easeQuinticActionInOut = {
  easing: cc.EaseQuinticActionInOut.prototype._updateTime,
  reverse: function () {
    return cc._easeQuinticActionInOut;
  },
};
cc.easeQuinticActionInOut = function () {
  return cc._easeQuinticActionInOut;
};
cc.EaseCircleActionIn = cc.ActionEase.extend({
  _updateTime: function (a) {
    return -1 * (Math.sqrt(1 - a * a) - 1);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCircleActionIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCircleActionIn(this._inner.reverse());
  },
});
cc.EaseCircleActionIn.create = function (a) {
  return new cc.EaseCircleActionIn(a);
};
cc._easeCircleActionIn = {
  easing: cc.EaseCircleActionIn.prototype._updateTime,
  reverse: function () {
    return cc._easeCircleActionIn;
  },
};
cc.easeCircleActionIn = function () {
  return cc._easeCircleActionIn;
};
cc.EaseCircleActionOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a -= 1;
    return Math.sqrt(1 - a * a);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCircleActionOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCircleActionOut(this._inner.reverse());
  },
});
cc.EaseCircleActionOut.create = function (a) {
  return new cc.EaseCircleActionOut(a);
};
cc._easeCircleActionOut = {
  easing: cc.EaseCircleActionOut.prototype._updateTime,
  reverse: function () {
    return cc._easeCircleActionOut;
  },
};
cc.easeCircleActionOut = function () {
  return cc._easeCircleActionOut;
};
cc.EaseCircleActionInOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a *= 2;
    if (1 > a) return -0.5 * (Math.sqrt(1 - a * a) - 1);
    a -= 2;
    return 0.5 * (Math.sqrt(1 - a * a) + 1);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCircleActionInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCircleActionInOut(this._inner.reverse());
  },
});
cc.EaseCircleActionInOut.create = function (a) {
  return new cc.EaseCircleActionInOut(a);
};
cc._easeCircleActionInOut = {
  easing: cc.EaseCircleActionInOut.prototype._updateTime,
  reverse: function () {
    return cc._easeCircleActionInOut;
  },
};
cc.easeCircleActionInOut = function () {
  return cc._easeCircleActionInOut;
};
cc.EaseCubicActionIn = cc.ActionEase.extend({
  _updateTime: function (a) {
    return a * a * a;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCubicActionIn();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCubicActionIn(this._inner.reverse());
  },
});
cc.EaseCubicActionIn.create = function (a) {
  return new cc.EaseCubicActionIn(a);
};
cc._easeCubicActionIn = {
  easing: cc.EaseCubicActionIn.prototype._updateTime,
  reverse: function () {
    return cc._easeCubicActionIn;
  },
};
cc.easeCubicActionIn = function () {
  return cc._easeCubicActionIn;
};
cc.EaseCubicActionOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a -= 1;
    return a * a * a + 1;
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCubicActionOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCubicActionOut(this._inner.reverse());
  },
});
cc.EaseCubicActionOut.create = function (a) {
  return new cc.EaseCubicActionOut(a);
};
cc._easeCubicActionOut = {
  easing: cc.EaseCubicActionOut.prototype._updateTime,
  reverse: function () {
    return cc._easeCubicActionOut;
  },
};
cc.easeCubicActionOut = function () {
  return cc._easeCubicActionOut;
};
cc.EaseCubicActionInOut = cc.ActionEase.extend({
  _updateTime: function (a) {
    a *= 2;
    if (1 > a) return 0.5 * a * a * a;
    a -= 2;
    return 0.5 * (a * a * a + 2);
  },
  update: function (a) {
    this._inner.update(this._updateTime(a));
  },
  clone: function () {
    var a = new cc.EaseCubicActionInOut();
    a.initWithAction(this._inner.clone());
    return a;
  },
  reverse: function () {
    return new cc.EaseCubicActionInOut(this._inner.reverse());
  },
});
cc.EaseCubicActionInOut.create = function (a) {
  return new cc.EaseCubicActionInOut(a);
};
cc._easeCubicActionInOut = {
  easing: cc.EaseCubicActionInOut.prototype._updateTime,
  reverse: function () {
    return cc._easeCubicActionInOut;
  },
};
cc.easeCubicActionInOut = function () {
  return cc._easeCubicActionInOut;
};
cc.cardinalSplineAt = function (a, b, d, e, f, g, h) {
  var k = g * g,
    m = k * g,
    n = (1 - f) / 2;
  f = n * (-m + 2 * k - g);
  var p = n * (-m + k) + (2 * m - 3 * k + 1);
  g = n * (m - 2 * k + g) + (-2 * m + 3 * k);
  m = n * (m - k);
  k = a.x * f + b.x * p + d.x * g + e.x * m;
  a = a.y * f + b.y * p + d.y * g + e.y * m;
  if (void 0 !== h) (h.x = k), (h.y = a);
  else return cc.p(k, a);
};
cc.reverseControlPoints = function (a) {
  for (var b = [], d = a.length - 1; 0 <= d; d--) b.push(cc.p(a[d].x, a[d].y));
  return b;
};
cc.cloneControlPoints = function (a) {
  for (var b = [], d = 0; d < a.length; d++) b.push(cc.p(a[d].x, a[d].y));
  return b;
};
cc.copyControlPoints = cc.cloneControlPoints;
cc.getControlPointAt = function (a, b) {
  var d = Math.min(a.length - 1, Math.max(b, 0));
  return a[d];
};
cc.reverseControlPointsInline = function (a) {
  for (var b = a.length, d = 0 | (b / 2), e = 0; e < d; ++e) {
    var f = a[e];
    a[e] = a[b - e - 1];
    a[b - e - 1] = f;
  }
};
cc.CardinalSplineTo = cc.ActionInterval.extend({
  _points: null,
  _deltaT: 0,
  _tension: 0,
  _previousPosition: null,
  _accumulatedDiff: null,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._points = [];
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    if (!b || 0 === b.length)
      throw Error(
        "Invalid configuration. It must at least have one control point"
      );
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? (this.setPoints(b), (this._tension = d), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.CardinalSplineTo();
    a.initWithDuration(
      this._duration,
      cc.copyControlPoints(this._points),
      this._tension
    );
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._deltaT = 1 / (this._points.length - 1);
    this._previousPosition = cc.p(
      this.target.getPositionX(),
      this.target.getPositionY()
    );
    this._accumulatedDiff = cc.p(0, 0);
  },
  update: function (a) {
    a = this._computeEaseTime(a);
    var b,
      d = this._points;
    if (1 === a) (b = d.length - 1), (a = 1);
    else {
      var e = this._deltaT;
      b = 0 | (a / e);
      a = (a - e * b) / e;
    }
    b = cc.cardinalSplineAt(
      cc.getControlPointAt(d, b - 1),
      cc.getControlPointAt(d, b - 0),
      cc.getControlPointAt(d, b + 1),
      cc.getControlPointAt(d, b + 2),
      this._tension,
      a
    );
    cc.ENABLE_STACKABLE_ACTIONS &&
      ((d = this.target.getPositionX() - this._previousPosition.x),
      (a = this.target.getPositionY() - this._previousPosition.y),
      0 !== d || 0 !== a) &&
      ((e = this._accumulatedDiff),
      (d = e.x + d),
      (a = e.y + a),
      (e.x = d),
      (e.y = a),
      (b.x += d),
      (b.y += a));
    this.updatePosition(b);
  },
  reverse: function () {
    var a = cc.reverseControlPoints(this._points);
    return cc.cardinalSplineTo(this._duration, a, this._tension);
  },
  updatePosition: function (a) {
    this.target.setPosition(a);
    this._previousPosition = a;
  },
  getPoints: function () {
    return this._points;
  },
  setPoints: function (a) {
    this._points = a;
  },
});
cc.cardinalSplineTo = function (a, b, d) {
  return new cc.CardinalSplineTo(a, b, d);
};
cc.CardinalSplineTo.create = cc.cardinalSplineTo;
cc.CardinalSplineBy = cc.CardinalSplineTo.extend({
  _startPosition: null,
  ctor: function (a, b, d) {
    cc.CardinalSplineTo.prototype.ctor.call(this);
    this._startPosition = cc.p(0, 0);
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  startWithTarget: function (a) {
    cc.CardinalSplineTo.prototype.startWithTarget.call(this, a);
    this._startPosition.x = a.getPositionX();
    this._startPosition.y = a.getPositionY();
  },
  reverse: function () {
    for (var a = this._points.slice(), b, d = a[0], e = 1; e < a.length; ++e)
      (b = a[e]), (a[e] = cc.pSub(b, d)), (d = b);
    a = cc.reverseControlPoints(a);
    d = a[a.length - 1];
    a.pop();
    d.x = -d.x;
    d.y = -d.y;
    a.unshift(d);
    for (e = 1; e < a.length; ++e)
      (b = a[e]),
        (b.x = -b.x),
        (b.y = -b.y),
        (b.x += d.x),
        (b.y += d.y),
        (d = a[e] = b);
    return cc.cardinalSplineBy(this._duration, a, this._tension);
  },
  updatePosition: function (a) {
    var b = this._startPosition,
      d = a.x + b.x;
    a = a.y + b.y;
    this._previousPosition.x = d;
    this._previousPosition.y = a;
    this.target.setPosition(d, a);
  },
  clone: function () {
    var a = new cc.CardinalSplineBy();
    a.initWithDuration(
      this._duration,
      cc.copyControlPoints(this._points),
      this._tension
    );
    return a;
  },
});
cc.cardinalSplineBy = function (a, b, d) {
  return new cc.CardinalSplineBy(a, b, d);
};
cc.CardinalSplineBy.create = cc.cardinalSplineBy;
cc.CatmullRomTo = cc.CardinalSplineTo.extend({
  ctor: function (a, b) {
    b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.CardinalSplineTo.prototype.initWithDuration.call(this, a, b, 0.5);
  },
  clone: function () {
    var a = new cc.CatmullRomTo();
    a.initWithDuration(this._duration, cc.copyControlPoints(this._points));
    return a;
  },
});
cc.catmullRomTo = function (a, b) {
  return new cc.CatmullRomTo(a, b);
};
cc.CatmullRomTo.create = cc.catmullRomTo;
cc.CatmullRomBy = cc.CardinalSplineBy.extend({
  ctor: function (a, b) {
    cc.CardinalSplineBy.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.CardinalSplineTo.prototype.initWithDuration.call(this, a, b, 0.5);
  },
  clone: function () {
    var a = new cc.CatmullRomBy();
    a.initWithDuration(this._duration, cc.copyControlPoints(this._points));
    return a;
  },
});
cc.catmullRomBy = function (a, b) {
  return new cc.CatmullRomBy(a, b);
};
cc.CatmullRomBy.create = cc.catmullRomBy;
cc.ActionTweenDelegate = cc.Class.extend({
  updateTweenAction: function (a, b) {},
});
cc.ActionTween = cc.ActionInterval.extend({
  key: "",
  from: 0,
  to: 0,
  delta: 0,
  ctor: function (a, b, d, e) {
    cc.ActionInterval.prototype.ctor.call(this);
    this.key = "";
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this.key = b), (this.to = e), (this.from = d), !0)
      : !1;
  },
  startWithTarget: function (a) {
    if (!a || !a.updateTweenAction)
      throw Error(
        "cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function"
      );
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this.delta = this.to - this.from;
  },
  update: function (a) {
    this.target.updateTweenAction(this.to - this.delta * (1 - a), this.key);
  },
  reverse: function () {
    return new cc.ActionTween(this.duration, this.key, this.to, this.from);
  },
  clone: function () {
    var a = new cc.ActionTween();
    a.initWithDuration(this._duration, this.key, this.from, this.to);
    return a;
  },
});
cc.actionTween = function (a, b, d, e) {
  return new cc.ActionTween(a, b, d, e);
};
cc.ActionTween.create = cc.actionTween;
cc.GridAction = cc.ActionInterval.extend({
  _gridSize: null,
  _gridNodeTarget: null,
  ctor: function (a, b) {
    cc.sys._checkWebGLRenderMode();
    cc.ActionInterval.prototype.ctor.call(this);
    this._gridSize = cc.size(0, 0);
    b && this.initWithDuration(a, b);
  },
  _cacheTargetAsGridNode: function (a) {
    this._gridNodeTarget = a;
  },
  clone: function () {
    var a = new cc.GridAction(),
      b = this._gridSize;
    a.initWithDuration(this._duration, cc.size(b.width, b.height));
    return a;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    cc.renderer.childrenOrderDirty = !0;
    this._cacheTargetAsGridNode(a);
    var b = this.getGrid();
    (a = this._gridNodeTarget.getGrid()) && 0 < a.getReuseGrid()
      ? ((b = a.getGridSize()),
        a.isActive() &&
          b.width === this._gridSize.width &&
          b.height === this._gridSize.height &&
          a.reuse())
      : (a && a.isActive() && a.setActive(!1),
        this._gridNodeTarget.setGrid(b),
        this._gridNodeTarget.getGrid().setActive(!0));
  },
  reverse: function () {
    return new cc.ReverseTime(this);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._gridSize.width = b.width),
        (this._gridSize.height = b.height),
        !0)
      : !1;
  },
  getGrid: function () {
    cc.log("cc.GridAction.getGrid(): it should be overridden in subclass.");
  },
});
cc.gridAction = function (a, b) {
  return new cc.GridAction(a, b);
};
cc.GridAction.create = cc.gridAction;
cc.Grid3DAction = cc.GridAction.extend({
  getGrid: function () {
    return new cc.Grid3D(
      this._gridSize,
      void 0,
      void 0,
      this._gridNodeTarget.getGridRect()
    );
  },
  getGridRect: function () {
    return this._gridNodeTarget.getGridRect();
  },
  vertex: function (a) {
    return this.getVertex(a);
  },
  getVertex: function (a) {
    return this.target.grid.getVertex(a);
  },
  originalVertex: function (a) {
    return this.getOriginalVertex(a);
  },
  getOriginalVertex: function (a) {
    return this.target.grid.originalVertex(a);
  },
  setVertex: function (a, b) {
    this.target.grid.setVertex(a, b);
  },
});
cc.grid3DAction = function (a, b) {
  return new cc.Grid3DAction(a, b);
};
cc.Grid3DAction.create = cc.grid3DAction;
cc.TiledGrid3DAction = cc.GridAction.extend({
  tile: function (a) {
    return this.getTile(a);
  },
  getTile: function (a) {
    return this.target.grid.tile(a);
  },
  originalTile: function (a) {
    return this.getOriginalTile(a);
  },
  getOriginalTile: function (a) {
    return this.target.grid.originalTile(a);
  },
  setTile: function (a, b) {
    this.target.grid.setTile(a, b);
  },
  getGrid: function () {
    return new cc.TiledGrid3D(
      this._gridSize,
      void 0,
      void 0,
      this._gridNodeTarget.getGridRect()
    );
  },
});
cc.tiledGrid3DAction = function (a, b) {
  return new cc.TiledGrid3DAction(a, b);
};
cc.TiledGrid3DAction.create = cc.tiledGrid3DAction;
cc.StopGrid = cc.ActionInstant.extend({
  startWithTarget: function (a) {
    cc.ActionInstant.prototype.startWithTarget.call(this, a);
    cc.renderer.childrenOrderDirty = !0;
    (a = this.target.grid) && a.isActive() && a.setActive(!1);
  },
});
cc.stopGrid = function () {
  return new cc.StopGrid();
};
cc.StopGrid.create = cc.stopGrid;
cc.ReuseGrid = cc.ActionInstant.extend({
  _times: null,
  ctor: function (a) {
    cc.ActionInstant.prototype.ctor.call(this);
    void 0 !== a && this.initWithTimes(a);
  },
  initWithTimes: function (a) {
    this._times = a;
    return !0;
  },
  startWithTarget: function (a) {
    cc.ActionInstant.prototype.startWithTarget.call(this, a);
    cc.renderer.childrenOrderDirty = !0;
    this.target.grid &&
      this.target.grid.isActive() &&
      this.target.grid.setReuseGrid(
        this.target.grid.getReuseGrid() + this._times
      );
  },
});
cc.reuseGrid = function (a) {
  return new cc.ReuseGrid(a);
};
cc.ReuseGrid.create = cc.reuseGrid;
cc.Waves3D = cc.Grid3DAction.extend({
  _waves: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._waves = d),
        (this._amplitude = e),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._gridSize,
        d = this._amplitude,
        e = cc.p(0, 0),
        f = this._amplitudeRate,
        g = this._waves,
        h = 0;
      h < b.width + 1;
      ++h
    )
      for (var k = 0; k < b.height + 1; ++k) {
        e.x = h;
        e.y = k;
        var m = this.originalVertex(e);
        m.z += Math.sin(Math.PI * a * g * 2 + 0.01 * (m.y + m.x)) * d * f;
        this.setVertex(e, m);
      }
  },
});
cc.waves3D = function (a, b, d, e) {
  return new cc.Waves3D(a, b, d, e);
};
cc.Waves3D.create = cc.waves3D;
cc.FlipX3D = cc.Grid3DAction.extend({
  ctor: function (a) {
    void 0 !== a
      ? cc.GridAction.prototype.ctor.call(this, a, cc.size(1, 1))
      : cc.GridAction.prototype.ctor.call(this);
  },
  initWithDuration: function (a) {
    return cc.Grid3DAction.prototype.initWithDuration.call(
      this,
      a,
      cc.size(1, 1)
    );
  },
  initWithSize: function (a, b) {
    return 1 !== a.width || 1 !== a.height
      ? (cc.log("Grid size must be (1,1)"), !1)
      : cc.Grid3DAction.prototype.initWithDuration.call(this, b, a);
  },
  update: function (a) {
    var b = Math.PI * a;
    a = Math.sin(b);
    var d = Math.cos(b / 2),
      b = new cc.Vertex3F(),
      e = cc.p(0, 0);
    e.x = e.y = 1;
    var f = this.originalVertex(e);
    e.x = e.y = 0;
    var e = this.originalVertex(e),
      g = f.x,
      h = e.x,
      k,
      m;
    g > h
      ? ((f = cc.p(0, 0)), (e = cc.p(0, 1)), (k = cc.p(1, 0)), (m = cc.p(1, 1)))
      : ((k = cc.p(0, 0)),
        (m = cc.p(0, 1)),
        (f = cc.p(1, 0)),
        (e = cc.p(1, 1)),
        (g = h));
    b.x = g - g * d;
    b.z = Math.abs(parseFloat((g * a) / 4));
    a = this.originalVertex(f);
    a.x = b.x;
    a.z += b.z;
    this.setVertex(f, a);
    a = this.originalVertex(e);
    a.x = b.x;
    a.z += b.z;
    this.setVertex(e, a);
    a = this.originalVertex(k);
    a.x -= b.x;
    a.z -= b.z;
    this.setVertex(k, a);
    a = this.originalVertex(m);
    a.x -= b.x;
    a.z -= b.z;
    this.setVertex(m, a);
  },
});
cc.flipX3D = function (a) {
  return new cc.FlipX3D(a);
};
cc.FlipX3D.create = cc.flipX3D;
cc.FlipY3D = cc.FlipX3D.extend({
  ctor: function (a) {
    void 0 !== a
      ? cc.GridAction.prototype.ctor.call(this, a, cc.size(1, 1))
      : cc.GridAction.prototype.ctor.call(this);
  },
  update: function (a) {
    var b = Math.PI * a;
    a = Math.sin(b);
    var d = Math.cos(b / 2),
      b = new cc.Vertex3F(),
      e = cc.p(0, 0);
    e.x = e.y = 1;
    var f = this.originalVertex(e);
    e.x = e.y = 0;
    var e = this.originalVertex(e),
      g = f.y,
      h = e.y,
      k,
      m;
    g > h
      ? ((f = cc.p(0, 0)), (e = cc.p(0, 1)), (k = cc.p(1, 0)), (m = cc.p(1, 1)))
      : ((e = cc.p(0, 0)),
        (f = cc.p(0, 1)),
        (m = cc.p(1, 0)),
        (k = cc.p(1, 1)),
        (g = h));
    b.y = g - g * d;
    b.z = Math.abs(parseFloat(g * a) / 4);
    a = this.originalVertex(f);
    a.y = b.y;
    a.z += b.z;
    this.setVertex(f, a);
    a = this.originalVertex(e);
    a.y -= b.y;
    a.z -= b.z;
    this.setVertex(e, a);
    a = this.originalVertex(k);
    a.y = b.y;
    a.z += b.z;
    this.setVertex(k, a);
    a = this.originalVertex(m);
    a.y -= b.y;
    a.z -= b.z;
    this.setVertex(m, a);
  },
});
cc.flipY3D = function (a) {
  return new cc.FlipY3D(a);
};
cc.FlipY3D.create = cc.flipY3D;
cc.Lens3D = cc.Grid3DAction.extend({
  _position: null,
  _radius: 0,
  _lensEffect: 0,
  _concave: !1,
  _dirty: !1,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    this._position = cc.p(0, 0);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  getLensEffect: function () {
    return this._lensEffect;
  },
  setLensEffect: function (a) {
    this._lensEffect = a;
  },
  setConcave: function (a) {
    this._concave = a;
  },
  getPosition: function () {
    return this._position;
  },
  setPosition: function (a) {
    cc.pointEqualToPoint(a, this._position) ||
      ((this._position.x = a.x), (this._position.y = a.y), (this._dirty = !0));
  },
  initWithDuration: function (a, b, d, e) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? (this.setPosition(d),
        (this._radius = e),
        (this._lensEffect = 0.7),
        (this._dirty = !0))
      : !1;
  },
  update: function (a) {
    if (this._dirty) {
      a = this._gridSize.width;
      for (
        var b = this._gridSize.height,
          d = this._radius,
          e = this._lensEffect,
          f = cc.p(0, 0),
          g = cc.p(0, 0),
          h,
          k,
          m,
          n = 0;
        n < a + 1;
        ++n
      )
        for (var p = 0; p < b + 1; ++p)
          (f.x = n),
            (f.y = p),
            (h = this.originalVertex(f)),
            (g.x = this._position.x - h.x),
            (g.y = this._position.y - h.y),
            (k = cc.pLength(g)),
            k < d &&
              ((k = d - k),
              (k /= d),
              0 === k && (k = 0.001),
              (k = Math.log(k) * e),
              (m = Math.exp(k) * d),
              (k = cc.pLength(g)),
              0 < k &&
                ((g.x /= k),
                (g.y /= k),
                (g.x *= m),
                (g.y *= m),
                (h.z += cc.pLength(g) * e))),
            this.setVertex(f, h);
      this._dirty = !1;
    }
  },
});
cc.lens3D = function (a, b, d, e) {
  return new cc.Lens3D(a, b, d, e);
};
cc.Lens3D.create = cc.lens3D;
cc.Ripple3D = cc.Grid3DAction.extend({
  _position: null,
  _radius: 0,
  _waves: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e, f, g) {
    cc.GridAction.prototype.ctor.call(this);
    this._position = cc.p(0, 0);
    void 0 !== g && this.initWithDuration(a, b, d, e, f, g);
  },
  getPosition: function () {
    return this._position;
  },
  setPosition: function (a) {
    this._position.x = a.x;
    this._position.y = a.y;
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e, f, g) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? (this.setPosition(d),
        (this._radius = e),
        (this._waves = f),
        (this._amplitude = g),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._gridSize.width,
        d = this._gridSize.height,
        e = cc.p(0, 0),
        f = this._radius,
        g = this._waves,
        h = this._amplitude,
        k = this._amplitudeRate,
        m,
        n,
        p = cc.p(0, 0),
        r = 0;
      r < b + 1;
      ++r
    )
      for (var s = 0; s < d + 1; ++s) {
        e.x = r;
        e.y = s;
        m = this.originalVertex(e);
        p.x = this._position.x - m.x;
        p.y = this._position.y - m.y;
        n = cc.pLength(p);
        if (n < f) {
          n = f - n;
          var u = Math.pow(n / f, 2);
          m.z += Math.sin(a * Math.PI * g * 2 + 0.1 * n) * h * k * u;
        }
        this.setVertex(e, m);
      }
  },
});
cc.ripple3D = function (a, b, d, e, f, g) {
  return new cc.Ripple3D(a, b, d, e, f, g);
};
cc.Ripple3D.create = cc.ripple3D;
cc.Shaky3D = cc.Grid3DAction.extend({
  _randRange: 0,
  _shakeZ: !1,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._randRange = d), (this._shakeZ = e), !0)
      : !1;
  },
  update: function (a) {
    a = this._gridSize.width;
    for (
      var b = this._gridSize.height,
        d = this._randRange,
        e = this._shakeZ,
        f = cc.p(0, 0),
        g,
        h = 0;
      h < a + 1;
      ++h
    )
      for (var k = 0; k < b + 1; ++k)
        (f.x = h),
          (f.y = k),
          (g = this.originalVertex(f)),
          (g.x += (cc.rand() % (2 * d)) - d),
          (g.y += (cc.rand() % (2 * d)) - d),
          e && (g.z += (cc.rand() % (2 * d)) - d),
          this.setVertex(f, g);
  },
});
cc.shaky3D = function (a, b, d, e) {
  return new cc.Shaky3D(a, b, d, e);
};
cc.Shaky3D.create = cc.shaky3D;
cc.Liquid = cc.Grid3DAction.extend({
  _waves: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._waves = d),
        (this._amplitude = e),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._gridSize.width,
        d = this._gridSize.height,
        e = cc.p(0, 0),
        f = this._waves,
        g = this._amplitude,
        h = this._amplitudeRate,
        k,
        m = 1;
      m < b;
      ++m
    )
      for (var n = 1; n < d; ++n)
        (e.x = m),
          (e.y = n),
          (k = this.originalVertex(e)),
          (k.x += Math.sin(a * Math.PI * f * 2 + 0.01 * k.x) * g * h),
          (k.y += Math.sin(a * Math.PI * f * 2 + 0.01 * k.y) * g * h),
          this.setVertex(e, k);
  },
});
cc.liquid = function (a, b, d, e) {
  return new cc.Liquid(a, b, d, e);
};
cc.Liquid.create = cc.liquid;
cc.Waves = cc.Grid3DAction.extend({
  _waves: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  _vertical: !1,
  _horizontal: !1,
  ctor: function (a, b, d, e, f, g) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== g && this.initWithDuration(a, b, d, e, f, g);
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e, f, g) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._waves = d),
        (this._amplitude = e),
        (this._amplitudeRate = 1),
        (this._horizontal = f),
        (this._vertical = g),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._gridSize.width,
        d = this._gridSize.height,
        e = cc.p(0, 0),
        f = this._vertical,
        g = this._horizontal,
        h = this._waves,
        k = this._amplitude,
        m = this._amplitudeRate,
        n,
        p = 0;
      p < b + 1;
      ++p
    )
      for (var r = 0; r < d + 1; ++r)
        (e.x = p),
          (e.y = r),
          (n = this.originalVertex(e)),
          f && (n.x += Math.sin(a * Math.PI * h * 2 + 0.01 * n.y) * k * m),
          g && (n.y += Math.sin(a * Math.PI * h * 2 + 0.01 * n.x) * k * m),
          this.setVertex(e, n);
  },
});
cc.waves = function (a, b, d, e, f, g) {
  return new cc.Waves(a, b, d, e, f, g);
};
cc.Waves.create = cc.waves;
cc.Twirl = cc.Grid3DAction.extend({
  _position: null,
  _twirls: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e, f) {
    cc.GridAction.prototype.ctor.call(this);
    this._position = cc.p(0, 0);
    void 0 !== f && this.initWithDuration(a, b, d, e, f);
  },
  getPosition: function () {
    return this._position;
  },
  setPosition: function (a) {
    this._position.x = a.x;
    this._position.y = a.y;
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e, f) {
    return cc.Grid3DAction.prototype.initWithDuration.call(this, a, b)
      ? (this.setPosition(d),
        (this._twirls = e),
        (this._amplitude = f),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._position,
        d = this._gridSize.width,
        e = this._gridSize.height,
        f = cc.p(0, 0),
        g = 0.1 * this._amplitude * this._amplitudeRate,
        h = this._twirls,
        k,
        m,
        n,
        p = cc.p(0, 0),
        r = 0;
      r < d + 1;
      ++r
    )
      for (var s = 0; s < e + 1; ++s)
        (f.x = r),
          (f.y = s),
          (k = this.originalVertex(f)),
          (p.x = r - d / 2),
          (p.y = s - e / 2),
          (m = cc.pLength(p) * Math.cos(Math.PI / 2 + a * Math.PI * h * 2) * g),
          (n = Math.sin(m) * (k.y - b.y) + Math.cos(m) * (k.x - b.x)),
          (m = Math.cos(m) * (k.y - b.y) - Math.sin(m) * (k.x - b.x)),
          (k.x = b.x + n),
          (k.y = b.y + m),
          this.setVertex(f, k);
  },
});
cc.twirl = function (a, b, d, e, f) {
  return new cc.Twirl(a, b, d, e, f);
};
cc.Twirl.create = cc.twirl;
cc.ShakyTiles3D = cc.TiledGrid3DAction.extend({
  _randRange: 0,
  _shakeZ: !1,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._randRange = d), (this._shakeZ = e), !0)
      : !1;
  },
  update: function (a) {
    a = this._gridSize;
    for (var b = this._randRange, d = cc.p(0, 0), e = 0; e < a.width; ++e)
      for (var f = 0; f < a.height; ++f) {
        d.x = e;
        d.y = f;
        var g = this.originalTile(d);
        g.bl.x += (cc.rand() % (2 * b)) - b;
        g.br.x += (cc.rand() % (2 * b)) - b;
        g.tl.x += (cc.rand() % (2 * b)) - b;
        g.tr.x += (cc.rand() % (2 * b)) - b;
        g.bl.y += (cc.rand() % (2 * b)) - b;
        g.br.y += (cc.rand() % (2 * b)) - b;
        g.tl.y += (cc.rand() % (2 * b)) - b;
        g.tr.y += (cc.rand() % (2 * b)) - b;
        this._shakeZ &&
          ((g.bl.z += (cc.rand() % (2 * b)) - b),
          (g.br.z += (cc.rand() % (2 * b)) - b),
          (g.tl.z += (cc.rand() % (2 * b)) - b),
          (g.tr.z += (cc.rand() % (2 * b)) - b));
        this.setTile(d, g);
      }
  },
});
cc.shakyTiles3D = function (a, b, d, e) {
  return new cc.ShakyTiles3D(a, b, d, e);
};
cc.ShakyTiles3D.create = cc.shakyTiles3D;
cc.ShatteredTiles3D = cc.TiledGrid3DAction.extend({
  _randRange: 0,
  _once: !1,
  _shatterZ: !1,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  initWithDuration: function (a, b, d, e) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._once = !1), (this._randRange = d), (this._shatterZ = e), !0)
      : !1;
  },
  update: function (a) {
    if (!1 === this._once) {
      a = this._gridSize;
      for (var b = this._randRange, d, e = cc.p(0, 0), f = 0; f < a.width; ++f)
        for (var g = 0; g < a.height; ++g)
          (e.x = f),
            (e.y = g),
            (d = this.originalTile(e)),
            (d.bl.x += (cc.rand() % (2 * b)) - b),
            (d.br.x += (cc.rand() % (2 * b)) - b),
            (d.tl.x += (cc.rand() % (2 * b)) - b),
            (d.tr.x += (cc.rand() % (2 * b)) - b),
            (d.bl.y += (cc.rand() % (2 * b)) - b),
            (d.br.y += (cc.rand() % (2 * b)) - b),
            (d.tl.y += (cc.rand() % (2 * b)) - b),
            (d.tr.y += (cc.rand() % (2 * b)) - b),
            this._shatterZ &&
              ((d.bl.z += (cc.rand() % (2 * b)) - b),
              (d.br.z += (cc.rand() % (2 * b)) - b),
              (d.tl.z += (cc.rand() % (2 * b)) - b),
              (d.tr.z += (cc.rand() % (2 * b)) - b)),
            this.setTile(e, d);
      this._once = !0;
    }
  },
});
cc.shatteredTiles3D = function (a, b, d, e) {
  return new cc.ShatteredTiles3D(a, b, d, e);
};
cc.ShatteredTiles3D.create = cc.shatteredTiles3D;
cc.Tile = function (a, b, d) {
  this.position = a || cc.p(0, 0);
  this.startPosition = b || cc.p(0, 0);
  this.delta = d || cc.p(0, 0);
};
cc.ShuffleTiles = cc.TiledGrid3DAction.extend({
  _seed: 0,
  _tilesCount: 0,
  _tilesOrder: null,
  _tiles: null,
  ctor: function (a, b, d) {
    cc.GridAction.prototype.ctor.call(this);
    this._tilesOrder = [];
    this._tiles = [];
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._seed = d),
        (this._tilesOrder.length = 0),
        (this._tiles.length = 0),
        !0)
      : !1;
  },
  shuffle: function (a, b) {
    for (var d = b - 1; 0 <= d; d--) {
      var e = 0 | cc.rand() % (d + 1),
        f = a[d];
      a[d] = a[e];
      a[e] = f;
    }
  },
  getDelta: function (a) {
    var b = this._gridSize,
      d = a.width * b.height + a.height;
    return cc.size(
      this._tilesOrder[d] / b.height - a.width,
      (this._tilesOrder[d] % b.height) - a.height
    );
  },
  placeTile: function (a, b) {
    var d = this.originalTile(a),
      e = this.target.grid.getStep(),
      f = b.position;
    d.bl.x += f.x * e.x;
    d.bl.y += f.y * e.y;
    d.br.x += f.x * e.x;
    d.br.y += f.y * e.y;
    d.tl.x += f.x * e.x;
    d.tl.y += f.y * e.y;
    d.tr.x += f.x * e.x;
    d.tr.y += f.y * e.y;
    this.setTile(a, d);
  },
  startWithTarget: function (a) {
    cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
    a = this._gridSize;
    this._tilesCount = a.width * a.height;
    for (
      var b = this._tilesOrder, d = (b.length = 0);
      d < this._tilesCount;
      ++d
    )
      b[d] = d;
    this.shuffle(b, this._tilesCount);
    for (
      var b = this._tiles, d = (b.length = 0), e = cc.size(0, 0), f = 0;
      f < a.width;
      ++f
    )
      for (var g = 0; g < a.height; ++g)
        (b[d] = new cc.Tile()),
          (b[d].position = cc.p(f, g)),
          (b[d].startPosition = cc.p(f, g)),
          (e.width = f),
          (e.height = g),
          (b[d].delta = this.getDelta(e)),
          ++d;
  },
  update: function (a) {
    for (
      var b = 0, d = this._gridSize, e = this._tiles, f, g = cc.p(0, 0), h = 0;
      h < d.width;
      ++h
    )
      for (var k = 0; k < d.height; ++k)
        (g.x = h),
          (g.y = k),
          (f = e[b]),
          (f.position.x = f.delta.width * a),
          (f.position.y = f.delta.height * a),
          this.placeTile(g, f),
          ++b;
  },
});
cc.shuffleTiles = function (a, b, d) {
  return new cc.ShuffleTiles(a, b, d);
};
cc.ShuffleTiles.create = cc.shuffleTiles;
cc.FadeOutTRTiles = cc.TiledGrid3DAction.extend({
  testFunc: function (a, b) {
    var d = this._gridSize.width * b,
      e = this._gridSize.height * b;
    return d === this._gridSize.width && e === this._gridSize.height
      ? 0
      : 0 === d + e
      ? 1
      : Math.pow((a.x + a.y) / (d + e), 6);
  },
  turnOnTile: function (a) {
    this.setTile(a, this.originalTile(a));
  },
  turnOffTile: function (a) {
    this.setTile(a, new cc.Quad3());
  },
  transformTile: function (a, b) {
    var d = this.originalTile(a),
      e = this.target.grid.getStep();
    d.bl.x += (e.x / 2) * (1 - b);
    d.bl.y += (e.y / 2) * (1 - b);
    d.br.x -= (e.x / 2) * (1 - b);
    d.br.y += (e.y / 2) * (1 - b);
    d.tl.x += (e.x / 2) * (1 - b);
    d.tl.y -= (e.y / 2) * (1 - b);
    d.tr.x -= (e.x / 2) * (1 - b);
    d.tr.y -= (e.y / 2) * (1 - b);
    this.setTile(a, d);
  },
  update: function (a) {
    for (var b = this._gridSize, d = cc.p(0, 0), e, f = 0; f < b.width; ++f)
      for (var g = 0; g < b.height; ++g)
        (d.x = f),
          (d.y = g),
          (e = this.testFunc(d, a)),
          0 === e
            ? this.turnOffTile(d)
            : 1 > e
            ? this.transformTile(d, e)
            : this.turnOnTile(d);
  },
});
cc.fadeOutTRTiles = function (a, b) {
  return new cc.FadeOutTRTiles(a, b);
};
cc.FadeOutTRTiles.create = cc.fadeOutTRTiles;
cc.FadeOutBLTiles = cc.FadeOutTRTiles.extend({
  testFunc: function (a, b) {
    var d = this._gridSize.width * (1 - b),
      e = this._gridSize.height * (1 - b);
    return 0 === d + e
      ? 0
      : 0 === a.x + a.y
      ? 1
      : Math.pow((d + e) / (a.x + a.y), 6);
  },
});
cc.fadeOutBLTiles = function (a, b) {
  return new cc.FadeOutBLTiles(a, b);
};
cc.FadeOutBLTiles.create = cc.fadeOutBLTiles;
cc.FadeOutUpTiles = cc.FadeOutTRTiles.extend({
  testFunc: function (a, b) {
    var d = this._gridSize.height * b;
    return d === this._gridSize.height ? 0 : 0 === d ? 1 : Math.pow(a.y / d, 6);
  },
  transformTile: function (a, b) {
    var d = this.originalTile(a),
      e = this.target.grid.getStep();
    d.bl.y += (e.y / 2) * (1 - b);
    d.br.y += (e.y / 2) * (1 - b);
    d.tl.y -= (e.y / 2) * (1 - b);
    d.tr.y -= (e.y / 2) * (1 - b);
    this.setTile(a, d);
  },
});
cc.fadeOutUpTiles = function (a, b) {
  return new cc.FadeOutUpTiles(a, b);
};
cc.FadeOutUpTiles.create = cc.fadeOutUpTiles;
cc.FadeOutDownTiles = cc.FadeOutUpTiles.extend({
  testFunc: function (a, b) {
    var d = this._gridSize.height * (1 - b);
    return 0 === d ? 0 : 0 === a.y ? 1 : Math.pow(d / a.y, 6);
  },
});
cc.fadeOutDownTiles = function (a, b) {
  return new cc.FadeOutDownTiles(a, b);
};
cc.FadeOutDownTiles.create = cc.fadeOutDownTiles;
cc.TurnOffTiles = cc.TiledGrid3DAction.extend({
  _seed: null,
  _tilesCount: 0,
  _tilesOrder: null,
  ctor: function (a, b, d) {
    cc.GridAction.prototype.ctor.call(this);
    this._tilesOrder = [];
    void 0 !== b && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._seed = d || 0), (this._tilesOrder.length = 0), !0)
      : !1;
  },
  shuffle: function (a, b) {
    for (var d = b - 1; 0 <= d; d--) {
      var e = 0 | cc.rand() % (d + 1),
        f = a[d];
      a[d] = a[e];
      a[e] = f;
    }
  },
  turnOnTile: function (a) {
    this.setTile(a, this.originalTile(a));
  },
  turnOffTile: function (a) {
    this.setTile(a, new cc.Quad3());
  },
  startWithTarget: function (a) {
    cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
    this._tilesCount = this._gridSize.width * this._gridSize.height;
    a = this._tilesOrder;
    for (var b = (a.length = 0); b < this._tilesCount; ++b) a[b] = b;
    this.shuffle(a, this._tilesCount);
  },
  update: function (a) {
    a = 0 | (a * this._tilesCount);
    for (
      var b = this._gridSize, d, e = cc.p(0, 0), f = this._tilesOrder, g = 0;
      g < this._tilesCount;
      g++
    )
      (d = f[g]),
        (e.x = 0 | (d / b.height)),
        (e.y = d % (0 | b.height)),
        g < a ? this.turnOffTile(e) : this.turnOnTile(e);
  },
});
cc.turnOffTiles = function (a, b, d) {
  return new cc.TurnOffTiles(a, b, d);
};
cc.TurnOffTiles.create = cc.turnOffTiles;
cc.WavesTiles3D = cc.TiledGrid3DAction.extend({
  _waves: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._waves = d),
        (this._amplitude = e),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    for (
      var b = this._gridSize,
        d = this._waves,
        e = this._amplitude,
        f = this._amplitudeRate,
        g = cc.p(0, 0),
        h,
        k = 0;
      k < b.width;
      k++
    )
      for (var m = 0; m < b.height; m++)
        (g.x = k),
          (g.y = m),
          (h = this.originalTile(g)),
          (h.bl.z =
            Math.sin(a * Math.PI * d * 2 + 0.01 * (h.bl.y + h.bl.x)) * e * f),
          (h.br.z = h.bl.z),
          (h.tl.z = h.bl.z),
          (h.tr.z = h.bl.z),
          this.setTile(g, h);
  },
});
cc.wavesTiles3D = function (a, b, d, e) {
  return new cc.WavesTiles3D(a, b, d, e);
};
cc.WavesTiles3D.create = cc.wavesTiles3D;
cc.JumpTiles3D = cc.TiledGrid3DAction.extend({
  _jumps: 0,
  _amplitude: 0,
  _amplitudeRate: 0,
  ctor: function (a, b, d, e) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== e && this.initWithDuration(a, b, d, e);
  },
  getAmplitude: function () {
    return this._amplitude;
  },
  setAmplitude: function (a) {
    this._amplitude = a;
  },
  getAmplitudeRate: function () {
    return this._amplitudeRate;
  },
  setAmplitudeRate: function (a) {
    this._amplitudeRate = a;
  },
  initWithDuration: function (a, b, d, e) {
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(this, a, b)
      ? ((this._jumps = d),
        (this._amplitude = e),
        (this._amplitudeRate = 1),
        !0)
      : !1;
  },
  update: function (a) {
    var b =
      Math.sin(Math.PI * a * this._jumps * 2) *
      this._amplitude *
      this._amplitudeRate;
    a =
      Math.sin(Math.PI * (a * this._jumps * 2 + 1)) *
      this._amplitude *
      this._amplitudeRate;
    for (
      var d = this._gridSize, e = this.target.grid, f, g = cc.p(0, 0), h = 0;
      h < d.width;
      h++
    )
      for (var k = 0; k < d.height; k++)
        (g.x = h),
          (g.y = k),
          (f = e.originalTile(g)),
          0 === (h + k) % 2
            ? ((f.bl.z += b), (f.br.z += b), (f.tl.z += b), (f.tr.z += b))
            : ((f.bl.z += a), (f.br.z += a), (f.tl.z += a), (f.tr.z += a)),
          e.setTile(g, f);
  },
});
cc.jumpTiles3D = function (a, b, d, e) {
  return new cc.JumpTiles3D(a, b, d, e);
};
cc.JumpTiles3D.create = cc.jumpTiles3D;
cc.SplitRows = cc.TiledGrid3DAction.extend({
  _rows: 0,
  _winSize: null,
  ctor: function (a, b) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    this._rows = b;
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(
      this,
      a,
      cc.size(1, b)
    );
  },
  update: function (a) {
    for (
      var b = this._gridSize,
        d = this._winSize.width,
        e,
        f,
        g = cc.p(0, 0),
        h = 0;
      h < b.height;
      ++h
    )
      (g.y = h),
        (e = this.originalTile(g)),
        (f = 1),
        0 === h % 2 && (f = -1),
        (e.bl.x += f * d * a),
        (e.br.x += f * d * a),
        (e.tl.x += f * d * a),
        (e.tr.x += f * d * a),
        this.setTile(g, e);
  },
  startWithTarget: function (a) {
    cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
    this._winSize = cc.director.getWinSizeInPixels();
  },
});
cc.splitRows = function (a, b) {
  return new cc.SplitRows(a, b);
};
cc.SplitRows.create = cc.splitRows;
cc.SplitCols = cc.TiledGrid3DAction.extend({
  _cols: 0,
  _winSize: null,
  ctor: function (a, b) {
    cc.GridAction.prototype.ctor.call(this);
    void 0 !== b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    this._cols = b;
    return cc.TiledGrid3DAction.prototype.initWithDuration.call(
      this,
      a,
      cc.size(b, 1)
    );
  },
  update: function (a) {
    for (
      var b = this._gridSize.width,
        d = this._winSize.height,
        e,
        f,
        g = cc.p(0, 0),
        h = 0;
      h < b;
      ++h
    )
      (g.x = h),
        (e = this.originalTile(g)),
        (f = 1),
        0 === h % 2 && (f = -1),
        (e.bl.y += f * d * a),
        (e.br.y += f * d * a),
        (e.tl.y += f * d * a),
        (e.tr.y += f * d * a),
        this.setTile(g, e);
    cc.renderer.childrenOrderDirty = !0;
  },
  startWithTarget: function (a) {
    cc.TiledGrid3DAction.prototype.startWithTarget.call(this, a);
    this._winSize = cc.director.getWinSizeInPixels();
  },
});
cc.splitCols = function (a, b) {
  return new cc.SplitCols(a, b);
};
cc.SplitCols.create = cc.splitCols;
cc.PageTurn3D = cc.Grid3DAction.extend({
  getGrid: function () {
    var a = new cc.Grid3D(
      this._gridSize,
      void 0,
      void 0,
      this._gridNodeTarget.getGridRect()
    );
    a.setNeedDepthTestForBlit(!0);
    return a;
  },
  clone: function () {
    var a = new cc.PageTurn3D();
    a.initWithDuration(this._duration, this._gridSize);
    return a;
  },
  update: function (a) {
    var b = Math.max(0, a - 0.25),
      b = -100 - b * b * 500,
      d = Math.sqrt(a),
      e = 0.5 < d ? (Math.PI / 2) * d : (Math.PI / 2) * (1 - d);
    a = (2 - a) * Math.PI;
    for (
      var d = Math.sin(e),
        e = Math.cos(e),
        f = this._gridSize,
        g = cc.p(0, 0),
        h = 0;
      h <= f.width;
      ++h
    )
      for (var k = 0; k <= f.height; ++k) {
        g.x = h;
        g.y = k;
        var m = this.getOriginalVertex(g);
        m.x -= this.getGridRect().x;
        var n = Math.sqrt(m.x * m.x + (m.y - b) * (m.y - b)),
          p = n * d,
          r = Math.asin(m.x / n) / d,
          s = Math.cos(r);
        m.x = r <= Math.PI ? p * Math.sin(r) : 0;
        m.y = n + b - p * (1 - s) * d;
        m.z = p * (1 - s) * e;
        m.x = m.z * Math.sin(a) + m.x * Math.cos(a);
        m.z = m.z * Math.cos(a) - m.x * Math.cos(a);
        m.z /= 7;
        0.5 > m.z && (m.z = 0.5);
        m.x += this.getGridRect().x;
        this.setVertex(g, m);
      }
  },
});
cc.pageTurn3D = function (a, b) {
  return new cc.PageTurn3D(a, b);
};
cc.PageTurn3D.create = cc.pageTurn3D;
cc.ProgressTimer = cc.Node.extend({
  _type: null,
  _percentage: 0,
  _sprite: null,
  _midPoint: null,
  _barChangeRate: null,
  _reverseDirection: !1,
  _className: "ProgressTimer",
  ctor: function (a) {
    cc.Node.prototype.ctor.call(this);
    this._type = cc.ProgressTimer.TYPE_RADIAL;
    this._percentage = 0;
    this._midPoint = cc.p(0, 0);
    this._barChangeRate = cc.p(0, 0);
    this._reverseDirection = !1;
    this._sprite = null;
    a && this.initWithSprite(a);
  },
  onEnter: function () {
    this._super();
    cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      (this._renderCmd.initCmd(), this._renderCmd._updateProgress());
  },
  cleanup: function () {
    cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      this._renderCmd.releaseData();
    this._super();
  },
  getMidpoint: function () {
    return cc.p(this._midPoint.x, this._midPoint.y);
  },
  setMidpoint: function (a) {
    this._midPoint = cc.pClamp(a, cc.p(0, 0), cc.p(1, 1));
  },
  getBarChangeRate: function () {
    return cc.p(this._barChangeRate.x, this._barChangeRate.y);
  },
  setBarChangeRate: function (a) {
    this._barChangeRate = cc.pClamp(a, cc.p(0, 0), cc.p(1, 1));
  },
  getType: function () {
    return this._type;
  },
  getPercentage: function () {
    return this._percentage;
  },
  getSprite: function () {
    return this._sprite;
  },
  setPercentage: function (a) {
    this._percentage !== a &&
      ((this._percentage = cc.clampf(a, 0, 100)),
      this._renderCmd._updateProgress());
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  isReverseDirection: function () {
    return this._reverseDirection;
  },
  setColor: function (a) {
    this._sprite.color = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);
  },
  setOpacity: function (a) {
    this._sprite.opacity = a;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty);
  },
  getColor: function () {
    return this._sprite.color;
  },
  getOpacity: function () {
    return this._sprite.opacity;
  },
  setReverseProgress: function (a) {
    this._reverseDirection !== a &&
      ((this._reverseDirection = a), this._renderCmd.resetVertexData());
  },
  setSprite: function (a) {
    this._sprite !== a &&
      ((this._sprite = a)
        ? (this.setContentSize(a.width, a.height),
          a.ignoreAnchorPointForPosition(!0))
        : this.setContentSize(0, 0),
      this._renderCmd.resetVertexData());
  },
  setType: function (a) {
    a !== this._type && ((this._type = a), this._renderCmd.resetVertexData());
  },
  setReverseDirection: function (a) {
    this._reverseDirection !== a &&
      ((this._reverseDirection = a), this._renderCmd.resetVertexData());
  },
  initWithSprite: function (a) {
    this.percentage = 0;
    this.setAnchorPoint(0.5, 0.5);
    this._type = cc.ProgressTimer.TYPE_RADIAL;
    this._reverseDirection = !1;
    this.midPoint = cc.p(0.5, 0.5);
    this.barChangeRate = cc.p(1, 1);
    this.setSprite(a);
    this._renderCmd.resetVertexData();
    return !0;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ProgressTimer.CanvasRenderCmd(this)
      : new cc.ProgressTimer.WebGLRenderCmd(this);
  },
});
_p = cc.ProgressTimer.prototype;
cc.defineGetterSetter(_p, "midPoint", _p.getMidpoint, _p.setMidpoint);
cc.defineGetterSetter(
  _p,
  "barChangeRate",
  _p.getBarChangeRate,
  _p.setBarChangeRate
);
cc.defineGetterSetter(_p, "type", _p.getType, _p.setType);
cc.defineGetterSetter(_p, "percentage", _p.getPercentage, _p.setPercentage);
cc.defineGetterSetter(_p, "sprite", _p.getSprite, _p.setSprite);
cc.defineGetterSetter(
  _p,
  "reverseDir",
  _p.isReverseDirection,
  _p.setReverseDirection
);
cc.ProgressTimer.create = function (a) {
  return new cc.ProgressTimer(a);
};
cc.ProgressTimer.TEXTURE_COORDS_COUNT = 4;
cc.ProgressTimer.TEXTURE_COORDS = 75;
cc.ProgressTimer.TYPE_RADIAL = 0;
cc.ProgressTimer.TYPE_BAR = 1;
cc.ProgressTo = cc.ActionInterval.extend({
  _to: 0,
  _from: 0,
  ctor: function (a, b) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._from = this._to = 0;
    void 0 !== b && this.initWithDuration(a, b);
  },
  initWithDuration: function (a, b) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._to = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.ProgressTo();
    a.initWithDuration(this._duration, this._to);
    return a;
  },
  reverse: function () {
    cc.log("cc.ProgressTo.reverse(): reverse hasn't been supported.");
    return null;
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
    this._from = a.percentage;
  },
  update: function (a) {
    this.target instanceof cc.ProgressTimer &&
      (this.target.percentage = this._from + (this._to - this._from) * a);
  },
});
cc.progressTo = function (a, b) {
  return new cc.ProgressTo(a, b);
};
cc.ProgressTo.create = cc.progressTo;
cc.ProgressFromTo = cc.ActionInterval.extend({
  _to: 0,
  _from: 0,
  ctor: function (a, b, d) {
    cc.ActionInterval.prototype.ctor.call(this);
    this._from = this._to = 0;
    void 0 !== d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    return cc.ActionInterval.prototype.initWithDuration.call(this, a)
      ? ((this._to = d), (this._from = b), !0)
      : !1;
  },
  clone: function () {
    var a = new cc.ProgressFromTo();
    a.initWithDuration(this._duration, this._from, this._to);
    return a;
  },
  reverse: function () {
    return cc.progressFromTo(this._duration, this._to, this._from);
  },
  startWithTarget: function (a) {
    cc.ActionInterval.prototype.startWithTarget.call(this, a);
  },
  update: function (a) {
    this.target instanceof cc.ProgressTimer &&
      (this.target.percentage = this._from + (this._to - this._from) * a);
  },
});
cc.progressFromTo = function (a, b, d) {
  return new cc.ProgressFromTo(a, b, d);
};
cc.ProgressFromTo.create = cc.progressFromTo;
(function () {
  cc.ProgressTimer.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._PI180 = Math.PI / 180;
    this._barRect = cc.rect(0, 0, 0, 0);
    this._origin = cc.p(0, 0);
    this._radius = 0;
    this._endAngle = this._startAngle = 270;
    this._counterClockWise = !1;
    this._canUseDirtyRegion = !0;
  };
  var a = (cc.ProgressTimer.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ProgressTimer.CanvasRenderCmd;
  a.rendering = function (a, d, e) {
    a = a || cc._renderContext;
    var f = a.getContext(),
      g = this._node,
      h = g._sprite,
      k = h._renderCmd._textureCoord,
      m = h._renderCmd._displayedOpacity / 255;
    if (
      0 !== k.width &&
      0 !== k.height &&
      h._texture &&
      k.validRect &&
      0 !== m
    ) {
      a.setTransform(this._worldTransform, d, e);
      a.setCompositeOperation(h._blendFuncStr);
      a.setGlobalAlpha(m);
      var n = h._rect,
        p = h._offsetPosition;
      d = p.x;
      e = -p.y - n.height;
      m = n.width;
      n = n.height;
      a.save();
      h._flippedX && ((d = -d - m), f.scale(-1, 1));
      h._flippedY && ((e = p.y), f.scale(1, -1));
      g._type === cc.ProgressTimer.TYPE_BAR
        ? ((g = this._barRect),
          f.beginPath(),
          f.rect(g.x, g.y, g.width, g.height),
          f.clip(),
          f.closePath())
        : g._type === cc.ProgressTimer.TYPE_RADIAL &&
          ((g = this._origin.x),
          (p = this._origin.y),
          f.beginPath(),
          f.arc(
            g,
            p,
            this._radius,
            this._PI180 * this._startAngle,
            this._PI180 * this._endAngle,
            this._counterClockWise
          ),
          f.lineTo(g, p),
          f.clip(),
          f.closePath());
      g = (h._renderCmd._textureToRender || h._texture).getHtmlElementObj();
      h._renderCmd._colorized
        ? f.drawImage(g, 0, 0, k.width, k.height, d, e, m, n)
        : f.drawImage(g, k.renderX, k.renderY, k.width, k.height, d, e, m, n);
      a.restore();
      cc.g_NumberOfDraws++;
    }
  };
  a.releaseData = function () {};
  a.resetVertexData = function () {};
  a._updateProgress = function () {
    this.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    var a = this._node,
      d = a._sprite,
      e = d.width,
      f = d.height,
      g = a._midPoint;
    if (a._type === cc.ProgressTimer.TYPE_RADIAL) {
      this._radius = Math.round(Math.sqrt(e * e + f * f));
      var h,
        k = !1,
        m = this._origin;
      m.x = e * g.x;
      m.y = -f * g.y;
      a._reverseDirection
        ? ((h = 270), (g = 270 - 3.6 * a._percentage))
        : ((g = -90), (h = -90 + 3.6 * a._percentage));
      d._flippedX &&
        ((m.x -= 2 * e * a._midPoint.x),
        (g = -g - 180),
        (h = -h - 180),
        (k = !k));
      d._flippedY &&
        ((m.y += 2 * f * a._midPoint.y), (k = !k), (g = -g), (h = -h));
      this._startAngle = g;
      this._endAngle = h;
      this._counterClockWise = k;
    } else
      (k = a._barChangeRate),
        (m = a._percentage / 100),
        (a = this._barRect),
        (k = cc.size(e * (1 - k.x), f * (1 - k.y))),
        (m = cc.size((e - k.width) * m, (f - k.height) * m)),
        (k = cc.size(k.width + m.width, k.height + m.height)),
        (h = cc.p(e * g.x, f * g.y)),
        (m = h.x - k.width / 2),
        0.5 < g.x && k.width / 2 >= e - h.x && (m = e - k.width),
        (e = h.y - k.height / 2),
        0.5 < g.y && k.height / 2 >= f - h.y && (e = f - k.height),
        (a.x = 0),
        (f = 1),
        d._flippedX && ((a.x -= k.width), (f = -1)),
        0 < m && (a.x += m * f),
        (a.y = 0),
        (f = 1),
        d._flippedY && ((a.y += k.height), (f = -1)),
        0 < e && (a.y -= e * f),
        (a.width = k.width),
        (a.height = -k.height);
  };
  a._syncStatus = function (a) {
    var d = this._node;
    if (d._sprite) {
      var e = cc.Node._dirtyFlags,
        f = this._dirtyFlag,
        g = a ? a._node : null;
      g &&
        g._cascadeColorEnabled &&
        a._dirtyFlag & e.colorDirty &&
        (f |= e.colorDirty);
      g &&
        g._cascadeOpacityEnabled &&
        a._dirtyFlag & e.opacityDirty &&
        (f |= e.opacityDirty);
      a && a._dirtyFlag & e.transformDirty && (f |= e.transformDirty);
      this._dirtyFlag = f;
      var d = d._sprite._renderCmd,
        h = d._dirtyFlag,
        g = h & e.colorDirty,
        h = h & e.opacityDirty;
      g &&
        (d._syncDisplayColor(),
        (d._dirtyFlag &= ~e.colorDirty),
        (this._dirtyFlag &= ~e.colorDirty));
      h &&
        (d._syncDisplayOpacity(),
        (d._dirtyFlag &= ~e.opacityDirty),
        (this._dirtyFlag &= ~e.opacityDirty));
      (g || h) && d._updateColor();
      f & e.transformDirty && this.transform(a);
      f & e.orderDirty && (this._dirtyFlag &= ~e.orderDirty);
    }
  };
  a.updateStatus = function () {
    var a = this._node;
    if (a._sprite) {
      var d = cc.Node._dirtyFlags,
        e = this._dirtyFlag,
        a = a._sprite._renderCmd,
        f = a._dirtyFlag,
        g = f & d.colorDirty,
        f = f & d.opacityDirty;
      g &&
        (a._updateDisplayColor(),
        (a._dirtyFlag ^= a._dirtyFlag & d.colorDirty),
        (this._dirtyFlag ^= this._dirtyFlag & d.colorDirty));
      f &&
        (a._updateDisplayOpacity(),
        (a._dirtyFlag ^= a._dirtyFlag & d.opacityDirty),
        (this._dirtyFlag ^= this._dirtyFlag & d.opacityDirty));
      (g || f) && a._updateColor();
      e & d.transformDirty && this.transform(this.getParentRenderCmd(), !0);
      e & d.contentDirty &&
        this._notifyRegionStatus &&
        this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
      this._dirtyFlag = 0;
    }
  };
})();
(function () {
  cc.ProgressTimer.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._progressDirty = this._needDraw = !0;
    this._bl = cc.p();
    this._tr = cc.p();
    this._transformUpdating = !1;
    this.initCmd();
  };
  var a = (cc.ProgressTimer.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.ProgressTimer.WebGLRenderCmd;
  a.transform = function (a, d) {
    this.originTransform(a, d);
    var e = this._node._sprite;
    e._renderCmd.transform(this, d);
    var f = e._offsetPosition.x,
      g = f + e._rect.width,
      h = e._offsetPosition.y,
      e = h + e._rect.height,
      k = this._worldTransform;
    this._bl.x = f * k.a + h * k.c + k.tx;
    this._bl.y = f * k.b + h * k.d + k.ty;
    this._tr.x = g * k.a + e * k.c + k.tx;
    this._tr.y = g * k.b + e * k.d + k.ty;
    this._transformUpdating = !0;
    this._updateProgressData();
    this._transformUpdating = !1;
  };
  a.rendering = function (a) {
    var d = this._node;
    a = a || cc._renderContext;
    if (0 !== this._vertexDataCount && d._sprite) {
      this._glProgramState.apply();
      this._shaderProgram._updateProjectionUniform();
      var e = d._sprite._blendFunc;
      cc.glBlendFunc(e.src, e.dst);
      cc.glBindTexture2D(d._sprite.texture);
      a.bindBuffer(a.ARRAY_BUFFER, this._vertexWebGLBuffer);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
      this._vertexDataDirty &&
        (a.bufferSubData(a.ARRAY_BUFFER, 0, this._float32View),
        (this._vertexDataDirty = !1));
      e = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
      a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, e, 0);
      a.vertexAttribPointer(
        cc.VERTEX_ATTRIB_COLOR,
        4,
        a.UNSIGNED_BYTE,
        !0,
        e,
        12
      );
      a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS, 2, a.FLOAT, !1, e, 16);
      d._type === cc.ProgressTimer.TYPE_RADIAL
        ? a.drawArrays(a.TRIANGLE_FAN, 0, this._vertexDataCount)
        : d._type === cc.ProgressTimer.TYPE_BAR &&
          (d._reverseDirection
            ? (a.drawArrays(a.TRIANGLE_STRIP, 0, this._vertexDataCount / 2),
              a.drawArrays(a.TRIANGLE_STRIP, 4, this._vertexDataCount / 2),
              cc.g_NumberOfDraws++)
            : a.drawArrays(a.TRIANGLE_STRIP, 0, this._vertexDataCount));
      cc.g_NumberOfDraws++;
    }
  };
  a._syncStatus = function (a) {
    var d = this._node;
    if (d._sprite) {
      var e = cc.Node._dirtyFlags,
        f = this._dirtyFlag,
        g = a ? a._node : null;
      g &&
        g._cascadeColorEnabled &&
        a._dirtyFlag & e.colorDirty &&
        (f |= e.colorDirty);
      g &&
        g._cascadeOpacityEnabled &&
        a._dirtyFlag & e.opacityDirty &&
        (f |= e.opacityDirty);
      a && a._dirtyFlag & e.transformDirty && (f |= e.transformDirty);
      this._dirtyFlag = f;
      var d = d._sprite._renderCmd,
        h = d._dirtyFlag,
        g = (f | h) & e.colorDirty,
        h = (f | h) & e.opacityDirty;
      g &&
        (d._syncDisplayColor(),
        (d._dirtyFlag &= ~e.colorDirty),
        (this._dirtyFlag &= ~e.colorDirty));
      h &&
        (d._syncDisplayOpacity(),
        (d._dirtyFlag &= ~e.opacityDirty),
        (this._dirtyFlag &= ~e.opacityDirty));
      (g || h) && this._updateColor();
      f & e.transformDirty && this.transform(a);
      f & e.textureDirty &&
        (this._updateProgressData(), (this._dirtyFlag &= ~e.textureDirty));
      d._dirtyFlag = 0;
    }
  };
  a.updateStatus = function () {
    var a = this._node;
    if (a._sprite) {
      var d = cc.Node._dirtyFlags,
        e = this._dirtyFlag,
        a = a._sprite._renderCmd,
        f = a._dirtyFlag,
        g = (e | f) & d.colorDirty,
        f = (e | f) & d.opacityDirty;
      g &&
        (a._updateDisplayColor(),
        (a._dirtyFlag ^= a._dirtyFlag & d.colorDirty),
        (this._dirtyFlag ^= this._dirtyFlag & d.colorDirty));
      f &&
        (a._updateDisplayOpacity(),
        (a._dirtyFlag ^= a._dirtyFlag & d.opacityDirty),
        (this._dirtyFlag ^= this._dirtyFlag & d.opacityDirty));
      (g || f) && this._updateColor();
      e & d.transformDirty && this.transform(this.getParentRenderCmd(), !0);
      e & d.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & d.orderDirty);
      e & d.textureDirty &&
        (this._updateProgressData(),
        (this._dirtyFlag ^= this._dirtyFlag & d.textureDirty));
    }
  };
  a.releaseData = function () {
    if (this._vertexData) {
      var a = this._vertexWebGLBuffer;
      setTimeout(function () {
        cc._renderContext.deleteBuffer(a);
      }, 0.1);
      this._vertexArrayBuffer = this._float32View = this._vertexData = this._vertexWebGLBuffer = null;
      this._vertexDataCount = 0;
    }
  };
  a.initCmd = function () {
    if (!this._vertexData) {
      this._vertexWebGLBuffer = cc._renderContext.createBuffer();
      var a = cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;
      this._vertexArrayBuffer = new ArrayBuffer(8 * a);
      this._float32View = new Float32Array(this._vertexArrayBuffer);
      this._vertexData = [];
      for (var d = 0; 8 > d; d++)
        this._vertexData[d] = new cc.V3F_C4B_T2F(
          null,
          null,
          null,
          this._vertexArrayBuffer,
          d * a
        );
      gl.bindBuffer(gl.ARRAY_BUFFER, this._vertexWebGLBuffer);
      gl.bufferData(gl.ARRAY_BUFFER, this._float32View, gl.DYNAMIC_DRAW);
      this._vertexDataCount = 0;
      this._vertexDataDirty = !0;
      this._shaderProgram = cc.shaderCache.programForKey(
        cc.SHADER_SPRITE_POSITION_TEXTURECOLOR
      );
    }
  };
  a.resetVertexData = function () {
    this._vertexDataCount = 0;
  };
  a._updateProgressData = function () {
    var a = this._node._type;
    a === cc.ProgressTimer.TYPE_RADIAL
      ? this._updateRadial()
      : a === cc.ProgressTimer.TYPE_BAR && this._updateBar();
    this._vertexDataDirty = !0;
  };
  a._updateProgress = function () {
    this.setDirtyFlag(cc.Node._dirtyFlags.textureDirty);
  };
  a._updateBar = function () {
    var a = this._node;
    if (a._sprite) {
      var d = a._percentage / 100,
        e = a._barChangeRate,
        e = cc.pMult(cc.p(1 - e.x + d * e.x, 1 - e.y + d * e.y), 0.5),
        d = cc.pSub(a._midPoint, e),
        a = cc.pAdd(a._midPoint, e);
      0 > d.x && ((a.x += -d.x), (d.x = 0));
      1 < a.x && ((d.x -= a.x - 1), (a.x = 1));
      0 > d.y && ((a.y += -d.y), (d.y = 0));
      1 < a.y && ((d.y -= a.y - 1), (a.y = 1));
      this._reverseDirection
        ? ((e = this._vertexData),
          this._vertexDataCount ||
            ((this._vertexDataCount = 8),
            this._textureCoordFromAlphaPoint(e[0].texCoords, 0, 1),
            this._vertexFromAlphaPoint(e[0].vertices, 0, 1),
            this._textureCoordFromAlphaPoint(e[1].texCoords, 0, 0),
            this._vertexFromAlphaPoint(e[1].vertices, 0, 0),
            this._textureCoordFromAlphaPoint(e[6].texCoords, 1, 1),
            this._vertexFromAlphaPoint(e[6].vertices, 1, 1),
            this._textureCoordFromAlphaPoint(e[7].texCoords, 1, 0),
            this._vertexFromAlphaPoint(e[7].vertices, 1, 0)),
          this._textureCoordFromAlphaPoint(e[2].texCoords, d.x, a.y),
          this._vertexFromAlphaPoint(e[2].vertices, d.x, a.y),
          this._textureCoordFromAlphaPoint(e[3].texCoords, d.x, d.y),
          this._vertexFromAlphaPoint(e[3].vertices, d.x, d.y),
          this._textureCoordFromAlphaPoint(e[4].texCoords, a.x, a.y),
          this._vertexFromAlphaPoint(e[4].vertices, a.x, a.y),
          this._textureCoordFromAlphaPoint(e[5].texCoords, a.x, d.y),
          this._vertexFromAlphaPoint(e[5].vertices, a.x, d.y))
        : (this._vertexDataCount || (this._vertexDataCount = 4),
          (e = this._vertexData),
          this._textureCoordFromAlphaPoint(e[0].texCoords, d.x, a.y),
          this._vertexFromAlphaPoint(e[0].vertices, d.x, a.y),
          this._textureCoordFromAlphaPoint(e[1].texCoords, d.x, d.y),
          this._vertexFromAlphaPoint(e[1].vertices, d.x, d.y),
          this._textureCoordFromAlphaPoint(e[2].texCoords, a.x, a.y),
          this._vertexFromAlphaPoint(e[2].vertices, a.x, a.y),
          this._textureCoordFromAlphaPoint(e[3].texCoords, a.x, d.y),
          this._vertexFromAlphaPoint(e[3].vertices, a.x, d.y));
      this._updateColor();
    }
  };
  a._updateRadial = function () {
    var a = this._node;
    if (a._sprite) {
      var d,
        e = a._midPoint;
      d = a._percentage / 100;
      var f = 2 * cc.PI * (a._reverseDirection ? d : 1 - d),
        a = cc.p(e.x, 1),
        g = cc.pRotateByAngle(a, e, f),
        f = 0;
      if (0 === d) (g = a), (f = 0);
      else if (1 === d) (g = a), (f = 4);
      else {
        var h = cc.FLT_MAX,
          k = cc.ProgressTimer.TEXTURE_COORDS_COUNT;
        for (d = 0; d <= k; ++d) {
          var m = (d + (k - 1)) % k,
            n = this._boundaryTexCoord(d % k),
            m = this._boundaryTexCoord(m);
          0 === d
            ? (m = cc.pLerp(n, m, 1 - e.x))
            : 4 === d && (n = cc.pLerp(n, m, 1 - e.x));
          var p = cc.p(0, 0);
          cc.pLineIntersect(n, m, e, g, p) &&
            ((0 !== d && 4 !== d) || (0 <= p.x && 1 >= p.x)) &&
            0 <= p.y &&
            p.y < h &&
            ((h = p.y), (f = d));
        }
        g = cc.pAdd(e, cc.pMult(cc.pSub(g, e), h));
      }
      d = !0;
      this._vertexDataCount !== f + 3 &&
        ((d = !1), (this._vertexDataCount = f + 3));
      this._updateColor();
      h = this._vertexData;
      if (this._transformUpdating || !d)
        for (
          this._textureCoordFromAlphaPoint(h[0].texCoords, e.x, e.y),
            this._vertexFromAlphaPoint(h[0].vertices, e.x, e.y),
            this._textureCoordFromAlphaPoint(h[1].texCoords, a.x, a.y),
            this._vertexFromAlphaPoint(h[1].vertices, a.x, a.y),
            d = 0;
          d < f;
          d++
        )
          (e = this._boundaryTexCoord(d)),
            this._textureCoordFromAlphaPoint(h[d + 2].texCoords, e.x, e.y),
            this._vertexFromAlphaPoint(h[d + 2].vertices, e.x, e.y);
      this._textureCoordFromAlphaPoint(
        h[this._vertexDataCount - 1].texCoords,
        g.x,
        g.y
      );
      this._vertexFromAlphaPoint(
        h[this._vertexDataCount - 1].vertices,
        g.x,
        g.y
      );
    }
  };
  a._boundaryTexCoord = function (a) {
    if (a < cc.ProgressTimer.TEXTURE_COORDS_COUNT) {
      var d = cc.ProgressTimer.TEXTURE_COORDS;
      return this._node._reverseDirection
        ? cc.p((d >> (7 - (a << 1))) & 1, (d >> (7 - ((a << 1) + 1))) & 1)
        : cc.p((d >> ((a << 1) + 1)) & 1, (d >> (a << 1)) & 1);
    }
    return cc.p(0, 0);
  };
  a._textureCoordFromAlphaPoint = function (a, d, e) {
    var f = this._node._sprite;
    if (f) {
      var g = f._renderCmd._vertices,
        h = g[1],
        g = g[2],
        h = cc.p(h.u, h.v),
        g = cc.p(g.u, g.v);
      f.textureRectRotated && ((f = d), (d = e), (e = f));
      a.u = h.x * (1 - d) + g.x * d;
      a.v = h.y * (1 - e) + g.y * e;
    } else (a.u = 0), (a.v = 0);
  };
  a._vertexFromAlphaPoint = function (a, d, e) {
    a.x = this._bl.x * (1 - d) + this._tr.x * d;
    a.y = this._bl.y * (1 - e) + this._tr.y * e;
    a.z = this._node._vertexZ;
  };
  a._updateColor = function () {
    var a = this._node._sprite;
    if (this._vertexDataCount && a) {
      var d = this._displayedColor,
        e = a._renderCmd._displayedColor,
        f = e.r,
        g = e.g,
        e = e.b,
        h = a._renderCmd._displayedOpacity / 255;
      a._opacityModifyRGB && ((f *= h), (g *= h), (e *= h));
      d.r = f;
      d.g = g;
      d.b = e;
      d.a = a._renderCmd._displayedOpacity;
      a = this._vertexData;
      f = 0;
      for (g = this._vertexDataCount; f < g; ++f) a[f].colors = d;
      this._vertexDataDirty = !0;
    }
  };
})();
cc.SCENE_FADE = 4208917214;
cc.TRANSITION_ORIENTATION_LEFT_OVER = 0;
cc.TRANSITION_ORIENTATION_RIGHT_OVER = 1;
cc.TRANSITION_ORIENTATION_UP_OVER = 0;
cc.TRANSITION_ORIENTATION_DOWN_OVER = 1;
cc.TransitionScene = cc.Scene.extend({
  _inScene: null,
  _outScene: null,
  _duration: null,
  _isInSceneOnTop: !1,
  _isSendCleanupToScene: !1,
  _className: "TransitionScene",
  ctor: function (a, b) {
    cc.Scene.prototype.ctor.call(this);
    void 0 !== a && void 0 !== b && this.initWithDuration(a, b);
  },
  _setNewScene: function (a) {
    this.unschedule(this._setNewScene);
    a = cc.director;
    this._isSendCleanupToScene = a.isSendCleanupToScene();
    a.runScene(this._inScene);
    cc.eventManager.setEnabled(!0);
    this._outScene.visible = !0;
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !0;
  },
  visit: function () {
    this._isInSceneOnTop
      ? (this._outScene.visit(), this._inScene.visit())
      : (this._inScene.visit(), this._outScene.visit());
    cc.Node.prototype.visit.call(this);
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    cc.eventManager.setEnabled(!1);
    this._outScene._performRecursive(
      cc.Node._stateCallbackType.onExitTransitionDidStart
    );
    this._inScene._performRecursive(cc.Node._stateCallbackType.onEnter);
  },
  onExit: function () {
    cc.Node.prototype.onExit.call(this);
    cc.eventManager.setEnabled(!0);
    this._outScene._performRecursive(cc.Node._stateCallbackType.onExit);
    this._inScene._performRecursive(
      cc.Node._stateCallbackType.onEnterTransitionDidFinish
    );
  },
  cleanup: function () {
    cc.Node.prototype.cleanup.call(this);
    this._isSendCleanupToScene &&
      this._outScene._performRecursive(cc.Node._stateCallbackType.cleanup);
  },
  initWithDuration: function (a, b) {
    if (!b)
      throw Error(
        "cc.TransitionScene.initWithDuration(): Argument scene must be non-nil"
      );
    if (this.init()) {
      this._duration = a;
      this.attr({ x: 0, y: 0, anchorX: 0, anchorY: 0 });
      this._inScene = b;
      this._outScene = cc.director.getRunningScene();
      this._outScene ||
        ((this._outScene = new cc.Scene()), this._outScene.init());
      if (this._inScene === this._outScene)
        throw Error(
          "cc.TransitionScene.initWithDuration(): Incoming scene must be different from the outgoing scene"
        );
      this._sceneOrder();
      return !0;
    }
    return !1;
  },
  finish: function () {
    this._inScene.attr({ visible: !0, x: 0, y: 0, scale: 1, rotation: 0 });
    this._outScene.attr({ visible: !1, x: 0, y: 0, scale: 1, rotation: 0 });
    this.schedule(this._setNewScene, 0);
  },
  hideOutShowIn: function () {
    this._inScene.visible = !0;
    this._outScene.visible = !1;
  },
});
cc.TransitionScene.create = function (a, b) {
  return new cc.TransitionScene(a, b);
};
cc.TransitionSceneOriented = cc.TransitionScene.extend({
  _orientation: 0,
  ctor: function (a, b, d) {
    cc.TransitionScene.prototype.ctor.call(this);
    void 0 != d && this.initWithDuration(a, b, d);
  },
  initWithDuration: function (a, b, d) {
    cc.TransitionScene.prototype.initWithDuration.call(this, a, b) &&
      (this._orientation = d);
    return !0;
  },
});
cc.TransitionSceneOriented.create = function (a, b, d) {
  return new cc.TransitionSceneOriented(a, b, d);
};
cc.TransitionRotoZoom = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._inScene.attr({ scale: 0.001, anchorX: 0.5, anchorY: 0.5 });
    this._outScene.attr({ scale: 1, anchorX: 0.5, anchorY: 0.5 });
    var a = cc.sequence(
      cc.spawn(
        cc.scaleBy(this._duration / 2, 0.001),
        cc.rotateBy(this._duration / 2, 720)
      ),
      cc.delayTime(this._duration / 2)
    );
    this._outScene.runAction(a);
    this._inScene.runAction(
      cc.sequence(a.reverse(), cc.callFunc(this.finish, this))
    );
  },
});
cc.TransitionRotoZoom.create = function (a, b) {
  return new cc.TransitionRotoZoom(a, b);
};
cc.TransitionJumpZoom = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    var a = cc.director.getWinSize();
    this._inScene.attr({
      scale: 0.5,
      x: a.width,
      y: 0,
      anchorX: 0.5,
      anchorY: 0.5,
    });
    this._outScene.anchorX = 0.5;
    this._outScene.anchorY = 0.5;
    var b = cc.jumpBy(this._duration / 4, cc.p(-a.width, 0), a.width / 4, 2),
      d = cc.scaleTo(this._duration / 4, 1),
      a = cc.scaleTo(this._duration / 4, 0.5),
      a = cc.sequence(a, b),
      b = cc.sequence(b, d),
      d = cc.delayTime(this._duration / 2);
    this._outScene.runAction(a);
    this._inScene.runAction(cc.sequence(d, b, cc.callFunc(this.finish, this)));
  },
});
cc.TransitionJumpZoom.create = function (a, b) {
  return new cc.TransitionJumpZoom(a, b);
};
cc.TransitionMoveInL = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this.initScenes();
    var a = this.action();
    this._inScene.runAction(
      cc.sequence(this.easeActionWithAction(a), cc.callFunc(this.finish, this))
    );
  },
  initScenes: function () {
    this._inScene.setPosition(-cc.director.getWinSize().width, 0);
  },
  action: function () {
    return cc.moveTo(this._duration, cc.p(0, 0));
  },
  easeActionWithAction: function (a) {
    return new cc.EaseOut(a, 2);
  },
});
cc.TransitionMoveInL.create = function (a, b) {
  return new cc.TransitionMoveInL(a, b);
};
cc.TransitionMoveInR = cc.TransitionMoveInL.extend({
  ctor: function (a, b) {
    cc.TransitionMoveInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  initScenes: function () {
    this._inScene.setPosition(cc.director.getWinSize().width, 0);
  },
});
cc.TransitionMoveInR.create = function (a, b) {
  return new cc.TransitionMoveInR(a, b);
};
cc.TransitionMoveInT = cc.TransitionMoveInL.extend({
  ctor: function (a, b) {
    cc.TransitionMoveInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  initScenes: function () {
    this._inScene.setPosition(0, cc.director.getWinSize().height);
  },
});
cc.TransitionMoveInT.create = function (a, b) {
  return new cc.TransitionMoveInT(a, b);
};
cc.TransitionMoveInB = cc.TransitionMoveInL.extend({
  ctor: function (a, b) {
    cc.TransitionMoveInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  initScenes: function () {
    this._inScene.setPosition(0, -cc.director.getWinSize().height);
  },
});
cc.TransitionMoveInB.create = function (a, b) {
  return new cc.TransitionMoveInB(a, b);
};
cc.ADJUST_FACTOR = 0.5;
cc.TransitionSlideInL = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this.initScenes();
    var a = this.action(),
      b = this.action(),
      a = cc.sequence(
        this.easeActionWithAction(a),
        cc.callFunc(this.finish, this)
      ),
      b = this.easeActionWithAction(b);
    this._inScene.runAction(a);
    this._outScene.runAction(b);
  },
  initScenes: function () {
    this._inScene.setPosition(
      -cc.director.getWinSize().width + cc.ADJUST_FACTOR,
      0
    );
  },
  action: function () {
    return cc.moveBy(
      this._duration,
      cc.p(cc.director.getWinSize().width - cc.ADJUST_FACTOR, 0)
    );
  },
  easeActionWithAction: function (a) {
    return new cc.EaseInOut(a, 2);
  },
});
cc.TransitionSlideInL.create = function (a, b) {
  return new cc.TransitionSlideInL(a, b);
};
cc.TransitionSlideInR = cc.TransitionSlideInL.extend({
  ctor: function (a, b) {
    cc.TransitionSlideInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !0;
  },
  initScenes: function () {
    this._inScene.setPosition(
      cc.director.getWinSize().width - cc.ADJUST_FACTOR,
      0
    );
  },
  action: function () {
    return cc.moveBy(
      this._duration,
      cc.p(-(cc.director.getWinSize().width - cc.ADJUST_FACTOR), 0)
    );
  },
});
cc.TransitionSlideInR.create = function (a, b) {
  return new cc.TransitionSlideInR(a, b);
};
cc.TransitionSlideInB = cc.TransitionSlideInL.extend({
  ctor: function (a, b) {
    cc.TransitionSlideInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
  initScenes: function () {
    this._inScene.setPosition(
      0,
      -(cc.director.getWinSize().height - cc.ADJUST_FACTOR)
    );
  },
  action: function () {
    return cc.moveBy(
      this._duration,
      cc.p(0, cc.director.getWinSize().height - cc.ADJUST_FACTOR)
    );
  },
});
cc.TransitionSlideInB.create = function (a, b) {
  return new cc.TransitionSlideInB(a, b);
};
cc.TransitionSlideInT = cc.TransitionSlideInL.extend({
  ctor: function (a, b) {
    cc.TransitionSlideInL.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !0;
  },
  initScenes: function () {
    this._inScene.setPosition(
      0,
      cc.director.getWinSize().height - cc.ADJUST_FACTOR
    );
  },
  action: function () {
    return cc.moveBy(
      this._duration,
      cc.p(0, -(cc.director.getWinSize().height - cc.ADJUST_FACTOR))
    );
  },
});
cc.TransitionSlideInT.create = function (a, b) {
  return new cc.TransitionSlideInT(a, b);
};
cc.TransitionShrinkGrow = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._inScene.attr({ scale: 0.001, anchorX: 2 / 3, anchorY: 0.5 });
    this._outScene.attr({ scale: 1, anchorX: 1 / 3, anchorY: 0.5 });
    var a = cc.scaleTo(this._duration, 0.01),
      b = cc.scaleTo(this._duration, 1);
    this._inScene.runAction(
      cc.sequence(this.easeActionWithAction(b), cc.callFunc(this.finish, this))
    );
    this._outScene.runAction(this.easeActionWithAction(a));
  },
  easeActionWithAction: function (a) {
    return new cc.EaseOut(a, 2);
  },
});
cc.TransitionShrinkGrow.create = function (a, b) {
  return new cc.TransitionShrinkGrow(a, b);
};
cc.TransitionFade = cc.TransitionScene.extend({
  _color: null,
  ctor: function (a, b, d) {
    cc.TransitionScene.prototype.ctor.call(this);
    this._color = cc.color();
    b && this.initWithDuration(a, b, d);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    var a = new cc.LayerColor(this._color);
    this._inScene.visible = !1;
    this.addChild(a, 2, cc.SCENE_FADE);
    var a = this.getChildByTag(cc.SCENE_FADE),
      b = cc.sequence(
        cc.fadeIn(this._duration / 2),
        cc.callFunc(this.hideOutShowIn, this),
        cc.fadeOut(this._duration / 2),
        cc.callFunc(this.finish, this)
      );
    a.runAction(b);
  },
  onExit: function () {
    cc.TransitionScene.prototype.onExit.call(this);
    this.removeChildByTag(cc.SCENE_FADE, !1);
  },
  initWithDuration: function (a, b, d) {
    d = d || cc.color.BLACK;
    cc.TransitionScene.prototype.initWithDuration.call(this, a, b) &&
      ((this._color.r = d.r),
      (this._color.g = d.g),
      (this._color.b = d.b),
      (this._color.a = 0));
    return !0;
  },
});
cc.TransitionFade.create = function (a, b, d) {
  return new cc.TransitionFade(a, b, d);
};
cc.TransitionCrossFade = cc.TransitionScene.extend({
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    var a = cc.color(0, 0, 0, 0),
      b = cc.director.getWinSize(),
      a = new cc.LayerColor(a),
      d = new cc.RenderTexture(b.width, b.height);
    d.sprite.anchorX = 0.5;
    d.sprite.anchorY = 0.5;
    d.attr({ x: b.width / 2, y: b.height / 2, anchorX: 0.5, anchorY: 0.5 });
    d.begin();
    this._inScene.visit();
    d.end();
    var e = new cc.RenderTexture(b.width, b.height);
    e.setPosition(b.width / 2, b.height / 2);
    e.sprite.anchorX = e.anchorX = 0.5;
    e.sprite.anchorY = e.anchorY = 0.5;
    e.begin();
    this._outScene.visit();
    e.end();
    d.sprite.setBlendFunc(cc.ONE, cc.ONE);
    e.sprite.setBlendFunc(cc.SRC_ALPHA, cc.ONE_MINUS_SRC_ALPHA);
    a.addChild(d);
    a.addChild(e);
    d.sprite.opacity = 255;
    e.sprite.opacity = 255;
    b = cc.sequence(
      cc.fadeTo(this._duration, 0),
      cc.callFunc(this.hideOutShowIn, this),
      cc.callFunc(this.finish, this)
    );
    e.sprite.runAction(b);
    this.addChild(a, 2, cc.SCENE_FADE);
  },
  onExit: function () {
    this.removeChildByTag(cc.SCENE_FADE, !1);
    cc.TransitionScene.prototype.onExit.call(this);
  },
});
cc.TransitionCrossFade.create = function (a, b) {
  return new cc.TransitionCrossFade(a, b);
};
cc.TransitionTurnOffTiles = cc.TransitionScene.extend({
  _gridProxy: null,
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    this._gridProxy = new cc.NodeGrid();
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._gridProxy.setTarget(this._outScene);
    this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
    var a = cc.director.getWinSize(),
      a = cc.turnOffTiles(
        this._duration,
        cc.size(0 | ((a.width / a.height) * 12), 12)
      ),
      a = this.easeActionWithAction(a);
    this._gridProxy.runAction(
      cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid())
    );
  },
  visit: function () {
    this._inScene.visit();
    this._gridProxy.visit();
  },
  easeActionWithAction: function (a) {
    return a;
  },
});
cc.TransitionTurnOffTiles.create = function (a, b) {
  return new cc.TransitionTurnOffTiles(a, b);
};
cc.TransitionSplitCols = cc.TransitionScene.extend({
  _gridProxy: null,
  _switchTargetToInscene: function () {
    this._gridProxy.setTarget(this._inScene);
  },
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    this._gridProxy = new cc.NodeGrid();
    b && this.initWithDuration(a, b);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._gridProxy.setTarget(this._outScene);
    this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
    var a = this.action(),
      a = cc.sequence(
        a,
        cc.callFunc(this._switchTargetToInscene, this),
        a.reverse()
      );
    this._gridProxy.runAction(
      cc.sequence(
        this.easeActionWithAction(a),
        cc.callFunc(this.finish, this),
        cc.stopGrid()
      )
    );
  },
  onExit: function () {
    this._gridProxy.setTarget(null);
    this._gridProxy._performRecursive(cc.Node._stateCallbackType.onExit);
    cc.TransitionScene.prototype.onExit.call(this);
  },
  visit: function () {
    this._gridProxy.visit();
  },
  easeActionWithAction: function (a) {
    return new cc.EaseInOut(a, 3);
  },
  action: function () {
    return cc.splitCols(this._duration / 2, 3);
  },
});
cc.TransitionSplitCols.create = function (a, b) {
  return new cc.TransitionSplitCols(a, b);
};
cc.TransitionSplitRows = cc.TransitionSplitCols.extend({
  ctor: function (a, b) {
    cc.TransitionSplitCols.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  action: function () {
    return cc.splitRows(this._duration / 2, 3);
  },
});
cc.TransitionSplitRows.create = function (a, b) {
  return new cc.TransitionSplitRows(a, b);
};
cc.TransitionFadeTR = cc.TransitionScene.extend({
  _gridProxy: null,
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    this._gridProxy = new cc.NodeGrid();
    b && this.initWithDuration(a, b);
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._gridProxy.setTarget(this._outScene);
    this._gridProxy._performRecursive(cc.Node._stateCallbackType.onEnter);
    var a = cc.director.getWinSize(),
      a = this.actionWithSize(cc.size(0 | ((a.width / a.height) * 12), 12));
    this._gridProxy.runAction(
      cc.sequence(
        this.easeActionWithAction(a),
        cc.callFunc(this.finish, this),
        cc.stopGrid()
      )
    );
  },
  visit: function () {
    this._inScene.visit();
    this._gridProxy.visit();
  },
  easeActionWithAction: function (a) {
    return a;
  },
  actionWithSize: function (a) {
    return cc.fadeOutTRTiles(this._duration, a);
  },
});
cc.TransitionFadeTR.create = function (a, b) {
  return new cc.TransitionFadeTR(a, b);
};
cc.TransitionFadeBL = cc.TransitionFadeTR.extend({
  ctor: function (a, b) {
    cc.TransitionFadeTR.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  actionWithSize: function (a) {
    return cc.fadeOutBLTiles(this._duration, a);
  },
});
cc.TransitionFadeBL.create = function (a, b) {
  return new cc.TransitionFadeBL(a, b);
};
cc.TransitionFadeUp = cc.TransitionFadeTR.extend({
  ctor: function (a, b) {
    cc.TransitionFadeTR.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  actionWithSize: function (a) {
    return new cc.FadeOutUpTiles(this._duration, a);
  },
});
cc.TransitionFadeUp.create = function (a, b) {
  return new cc.TransitionFadeUp(a, b);
};
cc.TransitionFadeDown = cc.TransitionFadeTR.extend({
  ctor: function (a, b) {
    cc.TransitionFadeTR.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  actionWithSize: function (a) {
    return cc.fadeOutDownTiles(this._duration, a);
  },
});
cc.TransitionFadeDown.create = function (a, b) {
  return new cc.TransitionFadeDown(a, b);
};
cc.SCENE_RADIAL = 49153;
cc.TransitionProgress = cc.TransitionScene.extend({
  _to: 0,
  _from: 0,
  _sceneToBeModified: null,
  _className: "TransitionProgress",
  ctor: function (a, b) {
    cc.TransitionScene.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _setAttrs: function (a, b, d) {
    a.attr({ x: b, y: d, anchorX: 0.5, anchorY: 0.5 });
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    this._setupTransition();
    var a = cc.director.getWinSize(),
      b = new cc.RenderTexture(a.width, a.height);
    b.sprite.anchorX = 0.5;
    b.sprite.anchorY = 0.5;
    this._setAttrs(b, a.width / 2, a.height / 2);
    b.clear(0, 0, 0, 1);
    b.begin();
    this._sceneToBeModified.visit();
    b.end();
    this._sceneToBeModified === this._outScene && this.hideOutShowIn();
    a = this._progressTimerNodeWithRenderTexture(b);
    b = cc.sequence(
      cc.progressFromTo(this._duration, this._from, this._to),
      cc.callFunc(this.finish, this)
    );
    a.runAction(b);
    this.addChild(a, 2, cc.SCENE_RADIAL);
  },
  onExit: function () {
    this.removeChildByTag(cc.SCENE_RADIAL, !0);
    cc.TransitionScene.prototype.onExit.call(this);
  },
  _setupTransition: function () {
    this._sceneToBeModified = this._outScene;
    this._from = 100;
    this._to = 0;
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    cc.log(
      "cc.TransitionProgress._progressTimerNodeWithRenderTexture(): should be overridden in subclass"
    );
    return null;
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
});
cc.TransitionProgress.create = function (a, b) {
  return new cc.TransitionProgress(a, b);
};
cc.TransitionProgressRadialCCW = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_RADIAL;
    a.reverseDir = !1;
    a.percentage = 100;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
});
cc.TransitionProgressRadialCCW.create = function (a, b) {
  return new cc.TransitionProgressRadialCCW(a, b);
};
cc.TransitionProgressRadialCW = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_RADIAL;
    a.reverseDir = !0;
    a.percentage = 100;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
});
cc.TransitionProgressRadialCW.create = function (a, b) {
  var d = new cc.TransitionProgressRadialCW();
  return null !== d && d.initWithDuration(a, b)
    ? d
    : new cc.TransitionProgressRadialCW(a, b);
};
cc.TransitionProgressHorizontal = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_BAR;
    a.midPoint = cc.p(1, 0);
    a.barChangeRate = cc.p(1, 0);
    a.percentage = 100;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
});
cc.TransitionProgressHorizontal.create = function (a, b) {
  return new cc.TransitionProgressHorizontal(a, b);
};
cc.TransitionProgressVertical = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_BAR;
    a.midPoint = cc.p(0, 0);
    a.barChangeRate = cc.p(0, 1);
    a.percentage = 100;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
});
cc.TransitionProgressVertical.create = function (a, b) {
  return new cc.TransitionProgressVertical(a, b);
};
cc.TransitionProgressInOut = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_BAR;
    a.midPoint = cc.p(0.5, 0.5);
    a.barChangeRate = cc.p(1, 1);
    a.percentage = 0;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = !1;
  },
  _setupTransition: function () {
    this._sceneToBeModified = this._inScene;
    this._from = 0;
    this._to = 100;
  },
});
cc.TransitionProgressInOut.create = function (a, b) {
  return new cc.TransitionProgressInOut(a, b);
};
cc.TransitionProgressOutIn = cc.TransitionProgress.extend({
  ctor: function (a, b) {
    cc.TransitionProgress.prototype.ctor.call(this);
    b && this.initWithDuration(a, b);
  },
  _progressTimerNodeWithRenderTexture: function (a) {
    var b = cc.director.getWinSize();
    a = new cc.ProgressTimer(a.sprite);
    cc._renderType === cc.game.RENDER_TYPE_WEBGL && (a.sprite.flippedY = !0);
    a.type = cc.ProgressTimer.TYPE_BAR;
    a.midPoint = cc.p(0.5, 0.5);
    a.barChangeRate = cc.p(1, 1);
    a.percentage = 100;
    this._setAttrs(a, b.width / 2, b.height / 2);
    return a;
  },
});
cc.TransitionProgressOutIn.create = function (a, b) {
  return new cc.TransitionProgressOutIn(a, b);
};
cc.TransitionPageTurn = cc.TransitionScene.extend({
  ctor: function (a, b, d) {
    cc.TransitionScene.prototype.ctor.call(this);
    this._gridProxy = new cc.NodeGrid();
    this.initWithDuration(a, b, d);
  },
  _back: !0,
  _gridProxy: null,
  _className: "TransitionPageTurn",
  initWithDuration: function (a, b, d) {
    this._back = d;
    cc.TransitionScene.prototype.initWithDuration.call(this, a, b);
    return !0;
  },
  actionWithSize: function (a) {
    return this._back
      ? cc.reverseTime(cc.pageTurn3D(this._duration, a))
      : cc.pageTurn3D(this._duration, a);
  },
  onEnter: function () {
    cc.TransitionScene.prototype.onEnter.call(this);
    var a = cc.director.getWinSize(),
      b;
    a.width > a.height ? ((a = 16), (b = 12)) : ((a = 12), (b = 16));
    a = this.actionWithSize(cc.size(a, b));
    b = this._gridProxy;
    this._back
      ? (b.setTarget(this._inScene),
        b._performRecursive(cc.Node._stateCallbackType.onEnter),
        (this._inScene.visible = !1),
        b.runAction(
          cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid())
        ),
        this._inScene.runAction(cc.show()))
      : (b.setTarget(this._outScene),
        b._performRecursive(cc.Node._stateCallbackType.onEnter),
        b.runAction(
          cc.sequence(a, cc.callFunc(this.finish, this), cc.stopGrid())
        ));
  },
  visit: function () {
    this._back ? this._outScene.visit() : this._inScene.visit();
    this._gridProxy.visit();
  },
  _sceneOrder: function () {
    this._isInSceneOnTop = this._back;
  },
});
cc.TransitionPageTurn.create = function (a, b, d) {
  return new cc.TransitionPageTurn(a, b, d);
};
cc.Codec = { name: "Jacob__Codec" };
cc.unzip = function () {
  return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip, arguments);
};
cc.unzipBase64 = function () {
  var a = cc.Codec.Base64.decode.apply(cc.Codec.Base64, arguments);
  return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip, [a]);
};
cc.unzipBase64AsArray = function (a, b) {
  b = b || 1;
  var d = this.unzipBase64(a),
    e = [],
    f,
    g,
    h;
  f = 0;
  for (h = d.length / b; f < h; f++)
    for (e[f] = 0, g = b - 1; 0 <= g; --g)
      e[f] += d.charCodeAt(f * b + g) << (8 * g);
  return e;
};
cc.unzipAsArray = function (a, b) {
  b = b || 1;
  var d = this.unzip(a),
    e = [],
    f,
    g,
    h;
  f = 0;
  for (h = d.length / b; f < h; f++)
    for (e[f] = 0, g = b - 1; 0 <= g; --g)
      e[f] += d.charCodeAt(f * b + g) << (8 * g);
  return e;
};
cc.StringToArray = function (a) {
  a = a.split(",");
  var b = [],
    d;
  for (d = 0; d < a.length; d++) b.push(parseInt(a[d]));
  return b;
};
cc.Codec.Base64 = { name: "Jacob__Codec__Base64" };
cc.Codec.Base64._keyStr =
  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d";
cc.Codec.Base64.decode = function (a) {
  var b = [],
    d,
    e,
    f,
    g,
    h,
    k = 0;
  for (a = a.replace(/[^A-Za-z0-9\+\/\=]/g, ""); k < a.length; )
    (d = this._keyStr.indexOf(a.charAt(k++))),
      (e = this._keyStr.indexOf(a.charAt(k++))),
      (g = this._keyStr.indexOf(a.charAt(k++))),
      (h = this._keyStr.indexOf(a.charAt(k++))),
      (d = (d << 2) | (e >> 4)),
      (e = ((e & 15) << 4) | (g >> 2)),
      (f = ((g & 3) << 6) | h),
      b.push(String.fromCharCode(d)),
      64 !== g && b.push(String.fromCharCode(e)),
      64 !== h && b.push(String.fromCharCode(f));
  return (b = b.join(""));
};
cc.Codec.Base64.decodeAsArray = function (a, b) {
  var d = this.decode(a),
    e = [],
    f,
    g,
    h;
  f = 0;
  for (h = d.length / b; f < h; f++)
    for (e[f] = 0, g = b - 1; 0 <= g; --g)
      e[f] += d.charCodeAt(f * b + g) << (8 * g);
  return e;
};
cc.uint8ArrayToUint32Array = function (a) {
  if (0 !== a.length % 4) return null;
  for (
    var b = a.length / 4,
      d = window.Uint32Array ? new Uint32Array(b) : [],
      e = 0;
    e < b;
    e++
  ) {
    var f = 4 * e;
    d[e] = a[f] + 256 * a[f + 1] + 65536 * a[f + 2] + 16777216 * a[f + 3];
  }
  return d;
};
cc.PNGReader = cc.Class.extend({
  ctor: function (a) {
    var b, d, e, f;
    this.data = a;
    this.pos = 8;
    this.palette = [];
    this.imgData = [];
    this.transparency = {};
    this.animation = null;
    this.text = {};
    for (e = null; ; ) {
      b = this.readUInt32();
      f = a = void 0;
      f = [];
      for (a = 0; 4 > a; ++a)
        f.push(String.fromCharCode(this.data[this.pos++]));
      a = f.join("");
      switch (a) {
        case "IHDR":
          this.width = this.readUInt32();
          this.height = this.readUInt32();
          this.bits = this.data[this.pos++];
          this.colorType = this.data[this.pos++];
          this.compressionMethod = this.data[this.pos++];
          this.filterMethod = this.data[this.pos++];
          this.interlaceMethod = this.data[this.pos++];
          break;
        case "acTL":
          this.animation = {
            numFrames: this.readUInt32(),
            numPlays: this.readUInt32() || Infinity,
            frames: [],
          };
          break;
        case "PLTE":
          this.palette = this.read(b);
          break;
        case "fcTL":
          e && this.animation.frames.push(e);
          this.pos += 4;
          e = {
            width: this.readUInt32(),
            height: this.readUInt32(),
            xOffset: this.readUInt32(),
            yOffset: this.readUInt32(),
          };
          a = this.readUInt16();
          b = this.readUInt16() || 100;
          e.delay = (1e3 * a) / b;
          e.disposeOp = this.data[this.pos++];
          e.blendOp = this.data[this.pos++];
          e.data = [];
          break;
        case "IDAT":
        case "fdAT":
          "fdAT" === a && ((this.pos += 4), (b -= 4));
          a = (null != e ? e.data : void 0) || this.imgData;
          for (f = 0; 0 <= b ? f < b : f > b; 0 <= b ? ++f : --f)
            a.push(this.data[this.pos++]);
          break;
        case "tRNS":
          this.transparency = {};
          switch (this.colorType) {
            case 3:
              this.transparency.indexed = this.read(b);
              b = 255 - this.transparency.indexed.length;
              if (0 < b)
                for (a = 0; 0 <= b ? a < b : a > b; 0 <= b ? ++a : --a)
                  this.transparency.indexed.push(255);
              break;
            case 0:
              this.transparency.grayscale = this.read(b)[0];
              break;
            case 2:
              this.transparency.rgb = this.read(b);
          }
          break;
        case "tEXt":
          f = this.read(b);
          b = f.indexOf(0);
          a = String.fromCharCode.apply(String, f.slice(0, b));
          this.text[a] = String.fromCharCode.apply(String, f.slice(b + 1));
          break;
        case "IEND":
          e && this.animation.frames.push(e);
          a: {
            switch (this.colorType) {
              case 0:
              case 3:
              case 4:
                e = 1;
                break a;
              case 2:
              case 6:
                e = 3;
                break a;
            }
            e = void 0;
          }
          this.colors = e;
          this.hasAlphaChannel = 4 === (d = this.colorType) || 6 === d;
          d = this.colors + (this.hasAlphaChannel ? 1 : 0);
          this.pixelBitlength = this.bits * d;
          a: {
            switch (this.colors) {
              case 1:
                d = "DeviceGray";
                break a;
              case 3:
                d = "DeviceRGB";
                break a;
            }
            d = void 0;
          }
          this.colorSpace = d;
          Uint8Array != Array && (this.imgData = new Uint8Array(this.imgData));
          return;
        default:
          this.pos += b;
      }
      this.pos += 4;
      if (this.pos > this.data.length)
        throw Error("Incomplete or corrupt PNG file");
    }
  },
  read: function (a) {
    var b, d;
    d = [];
    for (b = 0; 0 <= a ? b < a : b > a; 0 <= a ? ++b : --b)
      d.push(this.data[this.pos++]);
    return d;
  },
  readUInt32: function () {
    var a, b, d, e;
    a = this.data[this.pos++] << 24;
    b = this.data[this.pos++] << 16;
    d = this.data[this.pos++] << 8;
    e = this.data[this.pos++];
    return a | b | d | e;
  },
  readUInt16: function () {
    var a, b;
    a = this.data[this.pos++] << 8;
    b = this.data[this.pos++];
    return a | b;
  },
  decodePixels: function (a) {
    var b, d, e, f, g, h, k, m, n, p, r, s, u, v, t;
    null == a && (a = this.imgData);
    if (0 === a.length) return new Uint8Array(0);
    a = new Zlib.Inflate(a, { index: 0, verify: !1 }).decompress();
    m = this.pixelBitlength / 8;
    s = m * this.width;
    n = new Uint8Array(s * this.height);
    h = a.length;
    for (d = p = r = 0; p < h; ) {
      switch (a[p++]) {
        case 0:
          for (b = 0; b < s; b += 1) n[d++] = a[p++];
          break;
        case 1:
          for (f = u = 0; u < s; f = u += 1)
            (b = a[p++]), (g = f < m ? 0 : n[d - m]), (n[d++] = (b + g) % 256);
          break;
        case 2:
          for (f = g = 0; g < s; f = g += 1)
            (b = a[p++]),
              (e = (f - (f % m)) / m),
              (u = r && n[(r - 1) * s + e * m + (f % m)]),
              (n[d++] = (u + b) % 256);
          break;
        case 3:
          for (f = t = 0; t < s; f = t += 1)
            (b = a[p++]),
              (e = (f - (f % m)) / m),
              (g = f < m ? 0 : n[d - m]),
              (u = r && n[(r - 1) * s + e * m + (f % m)]),
              (n[d++] = (b + Math.floor((g + u) / 2)) % 256);
          break;
        case 4:
          for (f = t = 0; t < s; f = t += 1)
            (b = a[p++]),
              (e = (f - (f % m)) / m),
              (g = f < m ? 0 : n[d - m]),
              0 === r
                ? (u = v = 0)
                : ((u = n[(r - 1) * s + e * m + (f % m)]),
                  (v = e && n[(r - 1) * s + (e - 1) * m + (f % m)])),
              (k = g + u - v),
              (f = Math.abs(k - g)),
              (e = Math.abs(k - u)),
              (k = Math.abs(k - v)),
              (g = f <= e && f <= k ? g : e <= k ? u : v),
              (n[d++] = (b + g) % 256);
          break;
        default:
          throw Error("Invalid filter algorithm: " + a[p - 1]);
      }
      r++;
    }
    return n;
  },
  copyToImageData: function (a, b) {
    var d, e, f, g, h, k, m, n;
    e = this.colors;
    n = null;
    d = this.hasAlphaChannel;
    this.palette.length &&
      ((n =
        null != (f = this._decodedPalette)
          ? f
          : (this._decodedPalette = this.decodePalette())),
      (e = 4),
      (d = !0));
    f = a.data || a;
    m = f.length;
    h = n || b;
    g = k = 0;
    if (1 === e)
      for (; g < m; )
        (e = n ? 4 * b[g / 4] : k),
          (k = h[e++]),
          (f[g++] = k),
          (f[g++] = k),
          (f[g++] = k),
          (f[g++] = d ? h[e++] : 255),
          (k = e);
    else
      for (; g < m; )
        (e = n ? 4 * b[g / 4] : k),
          (f[g++] = h[e++]),
          (f[g++] = h[e++]),
          (f[g++] = h[e++]),
          (f[g++] = d ? h[e++] : 255),
          (k = e);
  },
  decodePalette: function () {
    var a, b, d, e, f, g, h, k, m;
    d = this.palette;
    g = this.transparency.indexed || [];
    f = new Uint8Array((g.length || 0) + d.length);
    b = h = a = e = 0;
    for (k = d.length; h < k; b = h += 3)
      (f[e++] = d[b]),
        (f[e++] = d[b + 1]),
        (f[e++] = d[b + 2]),
        (f[e++] = null != (m = g[a++]) ? m : 255);
    return f;
  },
  render: function (a) {
    var b;
    a.width = this.width;
    a.height = this.height;
    a = a.getContext("2d");
    b = a.createImageData(this.width, this.height);
    this.copyToImageData(b, this.decodePixels());
    return a.putImageData(b, 0, 0);
  },
});
cc.tiffReader = {
  _littleEndian: !1,
  _tiffData: null,
  _fileDirectories: [],
  getUint8: function (a) {
    return this._tiffData[a];
  },
  getUint16: function (a) {
    return this._littleEndian
      ? (this._tiffData[a + 1] << 8) | this._tiffData[a]
      : (this._tiffData[a] << 8) | this._tiffData[a + 1];
  },
  getUint32: function (a) {
    var b = this._tiffData;
    return this._littleEndian
      ? (b[a + 3] << 24) | (b[a + 2] << 16) | (b[a + 1] << 8) | b[a]
      : (b[a] << 24) | (b[a + 1] << 16) | (b[a + 2] << 8) | b[a + 3];
  },
  checkLittleEndian: function () {
    var a = this.getUint16(0);
    if (18761 === a) this.littleEndian = !0;
    else if (19789 === a) this.littleEndian = !1;
    else throw (console.log(a), TypeError("Invalid byte order value."));
    return this.littleEndian;
  },
  hasTowel: function () {
    if (42 !== this.getUint16(2)) throw RangeError("You forgot your towel!");
    return !0;
  },
  getFieldTypeName: function (a) {
    var b = this.fieldTypeNames;
    return a in b ? b[a] : null;
  },
  getFieldTagName: function (a) {
    var b = this.fieldTagNames;
    if (a in b) return b[a];
    console.log("Unknown Field Tag:", a);
    return "Tag" + a;
  },
  getFieldTypeLength: function (a) {
    return -1 !== ["BYTE", "ASCII", "SBYTE", "UNDEFINED"].indexOf(a)
      ? 1
      : -1 !== ["SHORT", "SSHORT"].indexOf(a)
      ? 2
      : -1 !== ["LONG", "SLONG", "FLOAT"].indexOf(a)
      ? 4
      : -1 !== ["RATIONAL", "SRATIONAL", "DOUBLE"].indexOf(a)
      ? 8
      : null;
  },
  getFieldValues: function (a, b, d, e) {
    a = [];
    var f = this.getFieldTypeLength(b);
    if (4 >= f * d)
      !1 === this.littleEndian ? a.push(e >>> (8 * (4 - f))) : a.push(e);
    else
      for (var g = 0; g < d; g++) {
        var h = f * g;
        8 <= f
          ? -1 !== ["RATIONAL", "SRATIONAL"].indexOf(b)
            ? (a.push(this.getUint32(e + h)), a.push(this.getUint32(e + h + 4)))
            : cc.log("Can't handle this field type or size")
          : a.push(this.getBytes(f, e + h));
      }
    "ASCII" === b &&
      a.forEach(function (a, b, d) {
        d[b] = String.fromCharCode(a);
      });
    return a;
  },
  getBytes: function (a, b) {
    if (0 >= a) cc.log("No bytes requested");
    else {
      if (1 >= a) return this.getUint8(b);
      if (2 >= a) return this.getUint16(b);
      if (3 >= a) return this.getUint32(b) >>> 8;
      if (4 >= a) return this.getUint32(b);
      cc.log("Too many bytes requested");
    }
  },
  getBits: function (a, b, d) {
    d = d || 0;
    b += Math.floor(d / 8);
    var e = d + a;
    a = 32 - a;
    var f, g;
    0 >= e
      ? console.log("No bits requested")
      : 8 >= e
      ? ((f = 24 + d), (g = this.getUint8(b)))
      : 16 >= e
      ? ((f = 16 + d), (g = this.getUint16(b)))
      : 32 >= e
      ? ((f = d), (g = this.getUint32(b)))
      : console.log("Too many bits requested");
    return {
      bits: (g << f) >>> a,
      byteOffset: b + Math.floor(e / 8),
      bitOffset: e % 8,
    };
  },
  parseFileDirectory: function (a) {
    var b = this.getUint16(a),
      d = [];
    a += 2;
    for (var e = 0; e < b; a += 12, e++) {
      var f = this.getUint16(a),
        g = this.getUint16(a + 2),
        h = this.getUint32(a + 4),
        k = this.getUint32(a + 8),
        f = this.getFieldTagName(f),
        g = this.getFieldTypeName(g),
        h = this.getFieldValues(f, g, h, k);
      d[f] = { type: g, values: h };
    }
    this._fileDirectories.push(d);
    b = this.getUint32(a);
    0 !== b && this.parseFileDirectory(b);
  },
  clampColorSample: function (a, b) {
    var d = Math.pow(2, 8 - b);
    return Math.floor(a * d + (d - 1));
  },
  parseTIFF: function (a, b) {
    b = b || document.createElement("canvas");
    this._tiffData = a;
    this.canvas = b;
    this.checkLittleEndian();
    if (this.hasTowel()) {
      var d = this.getUint32(4);
      this._fileDirectories.length = 0;
      this.parseFileDirectory(d);
      var e = this._fileDirectories[0],
        d = e.ImageWidth.values[0],
        f = e.ImageLength.values[0];
      this.canvas.width = d;
      this.canvas.height = f;
      var g = [],
        h = e.Compression ? e.Compression.values[0] : 1,
        k = e.SamplesPerPixel.values[0],
        m = [],
        n = 0,
        p = !1;
      e.BitsPerSample.values.forEach(function (a, b, d) {
        m[b] = {
          bitsPerSample: a,
          hasBytesPerSample: !1,
          bytesPerSample: void 0,
        };
        0 === a % 8 &&
          ((m[b].hasBytesPerSample = !0), (m[b].bytesPerSample = a / 8));
        n += a;
      }, this);
      if (0 === n % 8)
        var p = !0,
          r = n / 8;
      var s = e.StripOffsets.values,
        u = s.length;
      if (e.StripByteCounts) var v = e.StripByteCounts.values;
      else if ((cc.log("Missing StripByteCounts!"), 1 === u))
        v = [Math.ceil((d * f * n) / 8)];
      else throw Error("Cannot recover from missing StripByteCounts");
      for (var t = 0; t < u; t++) {
        var w = s[t];
        g[t] = [];
        for (
          var x = v[t],
            y = 0,
            B = 0,
            A = 1,
            z = !0,
            C = [],
            D = 0,
            E = 0,
            J = 0;
          y < x;
          y += A
        )
          switch (h) {
            case 1:
              A = 0;
              for (C = []; A < k; A++)
                if (m[A].hasBytesPerSample)
                  C.push(
                    this.getBytes(
                      m[A].bytesPerSample,
                      w + y + m[A].bytesPerSample * A
                    )
                  );
                else {
                  var G = this.getBits(m[A].bitsPerSample, w + y, B);
                  C.push(G.bits);
                  y = G.byteOffset - w;
                  B = G.bitOffset;
                  throw RangeError("Cannot handle sub-byte bits per sample");
                }
              g[t].push(C);
              if (p) A = r;
              else
                throw (
                  ((A = 0), RangeError("Cannot handle sub-byte bits per pixel"))
                );
              break;
            case 32773:
              if (z) {
                var z = !1,
                  F = 1,
                  L = 1,
                  A = this.getInt8(w + y);
                0 <= A && 127 >= A
                  ? (F = A + 1)
                  : -127 <= A && -1 >= A
                  ? (L = -A + 1)
                  : (z = !0);
              } else {
                for (var H = this.getUint8(w + y), A = 0; A < L; A++) {
                  if (m[E].hasBytesPerSample)
                    (J = (J << (8 * D)) | H),
                      D++,
                      D === m[E].bytesPerSample &&
                        (C.push(J), (J = D = 0), E++);
                  else
                    throw RangeError("Cannot handle sub-byte bits per sample");
                  E === k && (g[t].push(C), (C = []), (E = 0));
                }
                F--;
                0 === F && (z = !0);
              }
              A = 1;
          }
      }
      if (b.getContext) {
        r = this.canvas.getContext("2d");
        r.fillStyle = "rgba(255, 255, 255, 0)";
        t = e.RowsPerStrip ? e.RowsPerStrip.values[0] : f;
        w = g.length;
        f %= t;
        f = 0 === f ? t : f;
        y = t;
        h = 0;
        C = e.PhotometricInterpretation.values[0];
        F = [];
        L = 0;
        e.ExtraSamples && ((F = e.ExtraSamples.values), (L = F.length));
        if (e.ColorMap)
          var G = e.ColorMap.values,
            I = Math.pow(2, m[0].bitsPerSample);
        for (t = 0; t < w; t++) {
          t + 1 === w && (y = f);
          e = g[t].length;
          h *= t;
          for (p = k = 0; k < y, p < e; k++)
            for (s = 0; s < d; s++, p++) {
              v = g[t][p];
              z = B = x = 0;
              u = 1;
              if (0 < L)
                for (x = 0; x < L; x++)
                  if (1 === F[x] || 2 === F[x]) {
                    u = v[3 + x] / 256;
                    break;
                  }
              switch (C) {
                case 0:
                  if (m[0].hasBytesPerSample)
                    var M = Math.pow(16, 2 * m[0].bytesPerSample);
                  v.forEach(function (a, b, d) {
                    d[b] = M - a;
                  });
                case 1:
                  x = B = z = this.clampColorSample(v[0], m[0].bitsPerSample);
                  break;
                case 2:
                  x = this.clampColorSample(v[0], m[0].bitsPerSample);
                  B = this.clampColorSample(v[1], m[1].bitsPerSample);
                  z = this.clampColorSample(v[2], m[2].bitsPerSample);
                  break;
                case 3:
                  if (void 0 === G)
                    throw Error("Palette image missing color map");
                  v = v[0];
                  x = this.clampColorSample(G[v], 16);
                  B = this.clampColorSample(G[I + v], 16);
                  z = this.clampColorSample(G[2 * I + v], 16);
                  break;
                default:
                  throw RangeError("Unknown Photometric Interpretation:", C);
              }
              r.fillStyle = "rgba(" + x + ", " + B + ", " + z + ", " + u + ")";
              r.fillRect(s, h + k, 1, 1);
            }
          h = y;
        }
      }
      return this.canvas;
    }
  },
  fieldTagNames: {
    315: "Artist",
    258: "BitsPerSample",
    265: "CellLength",
    264: "CellWidth",
    320: "ColorMap",
    259: "Compression",
    33432: "Copyright",
    306: "DateTime",
    338: "ExtraSamples",
    266: "FillOrder",
    289: "FreeByteCounts",
    288: "FreeOffsets",
    291: "GrayResponseCurve",
    290: "GrayResponseUnit",
    316: "HostComputer",
    270: "ImageDescription",
    257: "ImageLength",
    256: "ImageWidth",
    271: "Make",
    281: "MaxSampleValue",
    280: "MinSampleValue",
    272: "Model",
    254: "NewSubfileType",
    274: "Orientation",
    262: "PhotometricInterpretation",
    284: "PlanarConfiguration",
    296: "ResolutionUnit",
    278: "RowsPerStrip",
    277: "SamplesPerPixel",
    305: "Software",
    279: "StripByteCounts",
    273: "StripOffsets",
    255: "SubfileType",
    263: "Threshholding",
    282: "XResolution",
    283: "YResolution",
    326: "BadFaxLines",
    327: "CleanFaxData",
    343: "ClipPath",
    328: "ConsecutiveBadFaxLines",
    433: "Decode",
    434: "DefaultImageColor",
    269: "DocumentName",
    336: "DotRange",
    321: "HalftoneHints",
    346: "Indexed",
    347: "JPEGTables",
    285: "PageName",
    297: "PageNumber",
    317: "Predictor",
    319: "PrimaryChromaticities",
    532: "ReferenceBlackWhite",
    339: "SampleFormat",
    559: "StripRowCounts",
    330: "SubIFDs",
    292: "T4Options",
    293: "T6Options",
    325: "TileByteCounts",
    323: "TileLength",
    324: "TileOffsets",
    322: "TileWidth",
    301: "TransferFunction",
    318: "WhitePoint",
    344: "XClipPathUnits",
    286: "XPosition",
    529: "YCbCrCoefficients",
    531: "YCbCrPositioning",
    530: "YCbCrSubSampling",
    345: "YClipPathUnits",
    287: "YPosition",
    37378: "ApertureValue",
    40961: "ColorSpace",
    36868: "DateTimeDigitized",
    36867: "DateTimeOriginal",
    34665: "Exif IFD",
    36864: "ExifVersion",
    33434: "ExposureTime",
    41728: "FileSource",
    37385: "Flash",
    40960: "FlashpixVersion",
    33437: "FNumber",
    42016: "ImageUniqueID",
    37384: "LightSource",
    37500: "MakerNote",
    37377: "ShutterSpeedValue",
    37510: "UserComment",
    33723: "IPTC",
    34675: "ICC Profile",
    700: "XMP",
    42112: "GDAL_METADATA",
    42113: "GDAL_NODATA",
    34377: "Photoshop",
  },
  fieldTypeNames: {
    1: "BYTE",
    2: "ASCII",
    3: "SHORT",
    4: "LONG",
    5: "RATIONAL",
    6: "SBYTE",
    7: "UNDEFINED",
    8: "SSHORT",
    9: "SLONG",
    10: "SRATIONAL",
    11: "FLOAT",
    12: "DOUBLE",
  },
};
cc.Particle = function (a, b, d, e, f, g, h, k, m, n, p, r) {
  this.pos = a ? a : cc.p(0, 0);
  this.startPos = b ? b : cc.p(0, 0);
  this.color = d ? d : { r: 0, g: 0, b: 0, a: 255 };
  this.deltaColor = e ? e : { r: 0, g: 0, b: 0, a: 255 };
  this.size = f || 0;
  this.deltaSize = g || 0;
  this.rotation = h || 0;
  this.deltaRotation = k || 0;
  this.timeToLive = m || 0;
  this.atlasIndex = n || 0;
  this.modeA = p ? p : new cc.Particle.ModeA();
  this.modeB = r ? r : new cc.Particle.ModeB();
  this.isChangeColor = !1;
  this.drawPos = cc.p(0, 0);
};
cc.Particle.ModeA = function (a, b, d) {
  this.dir = a ? a : cc.p(0, 0);
  this.radialAccel = b || 0;
  this.tangentialAccel = d || 0;
};
cc.Particle.ModeB = function (a, b, d, e) {
  this.angle = a || 0;
  this.degreesPerSecond = b || 0;
  this.radius = d || 0;
  this.deltaRadius = e || 0;
};
cc.Particle.TemporaryPoints = [cc.p(), cc.p(), cc.p(), cc.p()];
cc.ParticleSystem = cc.Node.extend({
  _className: "ParticleSystem",
  _plistFile: "",
  _elapsed: 0,
  _dontTint: !1,
  modeA: null,
  modeB: null,
  _pointZeroForParticle: cc.p(0, 0),
  _particles: null,
  _emitCounter: 0,
  _particleIdx: 0,
  _batchNode: null,
  atlasIndex: 0,
  _transformSystemDirty: !1,
  _allocatedParticles: 0,
  _isActive: !1,
  particleCount: 0,
  duration: 0,
  _sourcePosition: null,
  _posVar: null,
  life: 0,
  lifeVar: 0,
  angle: 0,
  angleVar: 0,
  startSize: 0,
  startSizeVar: 0,
  endSize: 0,
  endSizeVar: 0,
  _startColor: null,
  _startColorVar: null,
  _endColor: null,
  _endColorVar: null,
  startSpin: 0,
  startSpinVar: 0,
  endSpin: 0,
  endSpinVar: 0,
  emissionRate: 0,
  _totalParticles: 0,
  _texture: null,
  _blendFunc: null,
  _opacityModifyRGB: !1,
  positionType: null,
  autoRemoveOnFinish: !1,
  emitterMode: 0,
  _textureLoaded: null,
  ctor: function (a) {
    cc.Node.prototype.ctor.call(this);
    this.emitterMode = cc.ParticleSystem.MODE_GRAVITY;
    this.modeA = new cc.ParticleSystem.ModeA();
    this.modeB = new cc.ParticleSystem.ModeB();
    this._blendFunc = { src: cc.BLEND_SRC, dst: cc.BLEND_DST };
    this._particles = [];
    this._sourcePosition = cc.p(0, 0);
    this._posVar = cc.p(0, 0);
    this._startColor = cc.color(255, 255, 255, 255);
    this._startColorVar = cc.color(255, 255, 255, 255);
    this._endColor = cc.color(255, 255, 255, 255);
    this._endColorVar = cc.color(255, 255, 255, 255);
    this._plistFile = "";
    this._elapsed = 0;
    this._dontTint = !1;
    this._pointZeroForParticle = cc.p(0, 0);
    this._particleIdx = this._emitCounter = 0;
    this._batchNode = null;
    this.atlasIndex = 0;
    this._transformSystemDirty = !1;
    this._allocatedParticles = 0;
    this._isActive = !1;
    this._totalParticles = this.emissionRate = this.endSpinVar = this.endSpin = this.startSpinVar = this.startSpin = this.endSizeVar = this.endSize = this.startSizeVar = this.startSize = this.angleVar = this.angle = this.lifeVar = this.life = this.duration = this.particleCount = 0;
    this._texture = null;
    this._opacityModifyRGB = !1;
    this.positionType = cc.ParticleSystem.TYPE_FREE;
    this.autoRemoveOnFinish = !1;
    this._textureLoaded = !0;
    !a || cc.isNumber(a)
      ? ((a = a || 100),
        this.setDrawMode(cc.ParticleSystem.TEXTURE_MODE),
        this.initWithTotalParticles(a))
      : cc.isString(a)
      ? this.initWithFile(a)
      : cc.isObject(a) && this.initWithDictionary(a, "");
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ParticleSystem.CanvasRenderCmd(this)
      : new cc.ParticleSystem.WebGLRenderCmd(this);
  },
  ignoreColor: function (a) {
    this._dontTint = a;
  },
  initTexCoordsWithRect: function (a) {
    this._renderCmd.initTexCoordsWithRect(a);
  },
  getBatchNode: function () {
    return this._batchNode;
  },
  setBatchNode: function (a) {
    this._renderCmd.setBatchNode(a);
  },
  getAtlasIndex: function () {
    return this.atlasIndex;
  },
  setAtlasIndex: function (a) {
    this.atlasIndex = a;
  },
  getDrawMode: function () {
    return this._renderCmd.getDrawMode();
  },
  setDrawMode: function (a) {
    this._renderCmd.setDrawMode(a);
  },
  getShapeType: function () {
    return this._renderCmd.getShapeType();
  },
  setShapeType: function (a) {
    this._renderCmd.setShapeType(a);
  },
  isActive: function () {
    return this._isActive;
  },
  getParticleCount: function () {
    return this.particleCount;
  },
  setParticleCount: function (a) {
    this.particleCount = a;
  },
  getDuration: function () {
    return this.duration;
  },
  setDuration: function (a) {
    this.duration = a;
  },
  getSourcePosition: function () {
    return { x: this._sourcePosition.x, y: this._sourcePosition.y };
  },
  setSourcePosition: function (a) {
    this._sourcePosition.x = a.x;
    this._sourcePosition.y = a.y;
  },
  getPosVar: function () {
    return { x: this._posVar.x, y: this._posVar.y };
  },
  setPosVar: function (a) {
    this._posVar.x = a.x;
    this._posVar.y = a.y;
  },
  getLife: function () {
    return this.life;
  },
  setLife: function (a) {
    this.life = a;
  },
  getLifeVar: function () {
    return this.lifeVar;
  },
  setLifeVar: function (a) {
    this.lifeVar = a;
  },
  getAngle: function () {
    return this.angle;
  },
  setAngle: function (a) {
    this.angle = a;
  },
  getAngleVar: function () {
    return this.angleVar;
  },
  setAngleVar: function (a) {
    this.angleVar = a;
  },
  getGravity: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getGravity() : Particle Mode should be Gravity"
      );
    var a = this.modeA.gravity;
    return cc.p(a.x, a.y);
  },
  setGravity: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setGravity() : Particle Mode should be Gravity"
      );
    this.modeA.gravity = a;
  },
  getSpeed: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getSpeed() : Particle Mode should be Gravity"
      );
    return this.modeA.speed;
  },
  setSpeed: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setSpeed() : Particle Mode should be Gravity"
      );
    this.modeA.speed = a;
  },
  getSpeedVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getSpeedVar() : Particle Mode should be Gravity"
      );
    return this.modeA.speedVar;
  },
  setSpeedVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setSpeedVar() : Particle Mode should be Gravity"
      );
    this.modeA.speedVar = a;
  },
  getTangentialAccel: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getTangentialAccel() : Particle Mode should be Gravity"
      );
    return this.modeA.tangentialAccel;
  },
  setTangentialAccel: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setTangentialAccel() : Particle Mode should be Gravity"
      );
    this.modeA.tangentialAccel = a;
  },
  getTangentialAccelVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getTangentialAccelVar() : Particle Mode should be Gravity"
      );
    return this.modeA.tangentialAccelVar;
  },
  setTangentialAccelVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setTangentialAccelVar() : Particle Mode should be Gravity"
      );
    this.modeA.tangentialAccelVar = a;
  },
  getRadialAccel: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getRadialAccel() : Particle Mode should be Gravity"
      );
    return this.modeA.radialAccel;
  },
  setRadialAccel: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setRadialAccel() : Particle Mode should be Gravity"
      );
    this.modeA.radialAccel = a;
  },
  getRadialAccelVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getRadialAccelVar() : Particle Mode should be Gravity"
      );
    return this.modeA.radialAccelVar;
  },
  setRadialAccelVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setRadialAccelVar() : Particle Mode should be Gravity"
      );
    this.modeA.radialAccelVar = a;
  },
  getRotationIsDir: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.getRotationIsDir() : Particle Mode should be Gravity"
      );
    return this.modeA.rotationIsDir;
  },
  setRotationIsDir: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_GRAVITY &&
      cc.log(
        "cc.ParticleBatchNode.setRotationIsDir() : Particle Mode should be Gravity"
      );
    this.modeA.rotationIsDir = a;
  },
  getStartRadius: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getStartRadius() : Particle Mode should be Radius"
      );
    return this.modeB.startRadius;
  },
  setStartRadius: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setStartRadius() : Particle Mode should be Radius"
      );
    this.modeB.startRadius = a;
  },
  getStartRadiusVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getStartRadiusVar() : Particle Mode should be Radius"
      );
    return this.modeB.startRadiusVar;
  },
  setStartRadiusVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setStartRadiusVar() : Particle Mode should be Radius"
      );
    this.modeB.startRadiusVar = a;
  },
  getEndRadius: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getEndRadius() : Particle Mode should be Radius"
      );
    return this.modeB.endRadius;
  },
  setEndRadius: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setEndRadius() : Particle Mode should be Radius"
      );
    this.modeB.endRadius = a;
  },
  getEndRadiusVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getEndRadiusVar() : Particle Mode should be Radius"
      );
    return this.modeB.endRadiusVar;
  },
  setEndRadiusVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setEndRadiusVar() : Particle Mode should be Radius"
      );
    this.modeB.endRadiusVar = a;
  },
  getRotatePerSecond: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getRotatePerSecond() : Particle Mode should be Radius"
      );
    return this.modeB.rotatePerSecond;
  },
  setRotatePerSecond: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setRotatePerSecond() : Particle Mode should be Radius"
      );
    this.modeB.rotatePerSecond = a;
  },
  getRotatePerSecondVar: function () {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.getRotatePerSecondVar() : Particle Mode should be Radius"
      );
    return this.modeB.rotatePerSecondVar;
  },
  setRotatePerSecondVar: function (a) {
    this.emitterMode !== cc.ParticleSystem.MODE_RADIUS &&
      cc.log(
        "cc.ParticleBatchNode.setRotatePerSecondVar() : Particle Mode should be Radius"
      );
    this.modeB.rotatePerSecondVar = a;
  },
  setScale: function (a, b) {
    this._transformSystemDirty = !0;
    cc.Node.prototype.setScale.call(this, a, b);
  },
  setRotation: function (a) {
    this._transformSystemDirty = !0;
    cc.Node.prototype.setRotation.call(this, a);
  },
  setScaleX: function (a) {
    this._transformSystemDirty = !0;
    cc.Node.prototype.setScaleX.call(this, a);
  },
  setScaleY: function (a) {
    this._transformSystemDirty = !0;
    cc.Node.prototype.setScaleY.call(this, a);
  },
  getStartSize: function () {
    return this.startSize;
  },
  setStartSize: function (a) {
    this.startSize = a;
  },
  getStartSizeVar: function () {
    return this.startSizeVar;
  },
  setStartSizeVar: function (a) {
    this.startSizeVar = a;
  },
  getEndSize: function () {
    return this.endSize;
  },
  setEndSize: function (a) {
    this.endSize = a;
  },
  getEndSizeVar: function () {
    return this.endSizeVar;
  },
  setEndSizeVar: function (a) {
    this.endSizeVar = a;
  },
  getStartColor: function () {
    return cc.color(
      this._startColor.r,
      this._startColor.g,
      this._startColor.b,
      this._startColor.a
    );
  },
  setStartColor: function (a) {
    this._startColor.r = a.r;
    this._startColor.g = a.g;
    this._startColor.b = a.b;
    this._startColor.a = a.a;
  },
  getStartColorVar: function () {
    return cc.color(
      this._startColorVar.r,
      this._startColorVar.g,
      this._startColorVar.b,
      this._startColorVar.a
    );
  },
  setStartColorVar: function (a) {
    this._startColorVar.r = a.r;
    this._startColorVar.g = a.g;
    this._startColorVar.b = a.b;
    this._startColorVar.a = a.a;
  },
  getEndColor: function () {
    return cc.color(
      this._endColor.r,
      this._endColor.g,
      this._endColor.b,
      this._endColor.a
    );
  },
  setEndColor: function (a) {
    this._endColor.r = a.r;
    this._endColor.g = a.g;
    this._endColor.b = a.b;
    this._endColor.a = a.a;
  },
  getEndColorVar: function () {
    return cc.color(
      this._endColorVar.r,
      this._endColorVar.g,
      this._endColorVar.b,
      this._endColorVar.a
    );
  },
  setEndColorVar: function (a) {
    this._endColorVar.r = a.r;
    this._endColorVar.g = a.g;
    this._endColorVar.b = a.b;
    this._endColorVar.a = a.a;
  },
  getStartSpin: function () {
    return this.startSpin;
  },
  setStartSpin: function (a) {
    this.startSpin = a;
  },
  getStartSpinVar: function () {
    return this.startSpinVar;
  },
  setStartSpinVar: function (a) {
    this.startSpinVar = a;
  },
  getEndSpin: function () {
    return this.endSpin;
  },
  setEndSpin: function (a) {
    this.endSpin = a;
  },
  getEndSpinVar: function () {
    return this.endSpinVar;
  },
  setEndSpinVar: function (a) {
    this.endSpinVar = a;
  },
  getEmissionRate: function () {
    return this.emissionRate;
  },
  setEmissionRate: function (a) {
    this.emissionRate = a;
  },
  getTotalParticles: function () {
    return this._totalParticles;
  },
  setTotalParticles: function (a) {
    this._renderCmd.setTotalParticles(a);
  },
  getTexture: function () {
    return this._texture;
  },
  setTexture: function (a) {
    a &&
      (a.isLoaded()
        ? this.setTextureWithRect(a, cc.rect(0, 0, a.width, a.height))
        : ((this._textureLoaded = !1),
          a.addEventListener(
            "load",
            function (a) {
              this._textureLoaded = !0;
              this.setTextureWithRect(a, cc.rect(0, 0, a.width, a.height));
            },
            this
          )));
  },
  getBlendFunc: function () {
    return this._blendFunc;
  },
  setBlendFunc: function (a, b) {
    if (void 0 === b)
      this._blendFunc !== a && ((this._blendFunc = a), this._updateBlendFunc());
    else if (this._blendFunc.src !== a || this._blendFunc.dst !== b)
      (this._blendFunc = { src: a, dst: b }), this._updateBlendFunc();
  },
  isOpacityModifyRGB: function () {
    return this._opacityModifyRGB;
  },
  setOpacityModifyRGB: function (a) {
    this._opacityModifyRGB = a;
  },
  isBlendAdditive: function () {
    return (
      (this._blendFunc.src === cc.SRC_ALPHA &&
        this._blendFunc.dst === cc.ONE) ||
      (this._blendFunc.src === cc.ONE && this._blendFunc.dst === cc.ONE)
    );
  },
  setBlendAdditive: function (a) {
    var b = this._blendFunc;
    a
      ? ((b.src = cc.SRC_ALPHA), (b.dst = cc.ONE))
      : this._renderCmd._setBlendAdditive();
  },
  getPositionType: function () {
    return this.positionType;
  },
  setPositionType: function (a) {
    this.positionType = a;
  },
  isAutoRemoveOnFinish: function () {
    return this.autoRemoveOnFinish;
  },
  setAutoRemoveOnFinish: function (a) {
    this.autoRemoveOnFinish = a;
  },
  getEmitterMode: function () {
    return this.emitterMode;
  },
  setEmitterMode: function (a) {
    this.emitterMode = a;
  },
  init: function () {
    return this.initWithTotalParticles(150);
  },
  initWithFile: function (a) {
    this._plistFile = a;
    a = cc.loader.getRes(a);
    return a
      ? this.initWithDictionary(a, "")
      : (cc.log("cc.ParticleSystem.initWithFile(): Particles: file not found"),
        !1);
  },
  getBoundingBoxToWorld: function () {
    return cc.rect(0, 0, cc._canvas.width, cc._canvas.height);
  },
  initWithDictionary: function (a, b) {
    var d = !1,
      e = null,
      e = this._valueForKey,
      f = parseInt(e("maxParticles", a));
    if (this.initWithTotalParticles(f)) {
      this.angle = parseFloat(e("angle", a));
      this.angleVar = parseFloat(e("angleVariance", a));
      this.duration = parseFloat(e("duration", a));
      this._blendFunc.src = parseInt(e("blendFuncSource", a));
      this._blendFunc.dst = parseInt(e("blendFuncDestination", a));
      d = this._startColor;
      d.r = 255 * parseFloat(e("startColorRed", a));
      d.g = 255 * parseFloat(e("startColorGreen", a));
      d.b = 255 * parseFloat(e("startColorBlue", a));
      d.a = 255 * parseFloat(e("startColorAlpha", a));
      d = this._startColorVar;
      d.r = 255 * parseFloat(e("startColorVarianceRed", a));
      d.g = 255 * parseFloat(e("startColorVarianceGreen", a));
      d.b = 255 * parseFloat(e("startColorVarianceBlue", a));
      d.a = 255 * parseFloat(e("startColorVarianceAlpha", a));
      d = this._endColor;
      d.r = 255 * parseFloat(e("finishColorRed", a));
      d.g = 255 * parseFloat(e("finishColorGreen", a));
      d.b = 255 * parseFloat(e("finishColorBlue", a));
      d.a = 255 * parseFloat(e("finishColorAlpha", a));
      d = this._endColorVar;
      d.r = 255 * parseFloat(e("finishColorVarianceRed", a));
      d.g = 255 * parseFloat(e("finishColorVarianceGreen", a));
      d.b = 255 * parseFloat(e("finishColorVarianceBlue", a));
      d.a = 255 * parseFloat(e("finishColorVarianceAlpha", a));
      this.startSize = parseFloat(e("startParticleSize", a));
      this.startSizeVar = parseFloat(e("startParticleSizeVariance", a));
      this.endSize = parseFloat(e("finishParticleSize", a));
      this.endSizeVar = parseFloat(e("finishParticleSizeVariance", a));
      this.setPosition(
        parseFloat(e("sourcePositionx", a)),
        parseFloat(e("sourcePositiony", a))
      );
      this._posVar.x = parseFloat(e("sourcePositionVariancex", a));
      this._posVar.y = parseFloat(e("sourcePositionVariancey", a));
      this.startSpin = parseFloat(e("rotationStart", a));
      this.startSpinVar = parseFloat(e("rotationStartVariance", a));
      this.endSpin = parseFloat(e("rotationEnd", a));
      this.endSpinVar = parseFloat(e("rotationEndVariance", a));
      this.emitterMode = parseInt(e("emitterType", a));
      if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY)
        (d = this.modeA),
          (d.gravity.x = parseFloat(e("gravityx", a))),
          (d.gravity.y = parseFloat(e("gravityy", a))),
          (d.speed = parseFloat(e("speed", a))),
          (d.speedVar = parseFloat(e("speedVariance", a))),
          (f = e("radialAcceleration", a)),
          (d.radialAccel = f ? parseFloat(f) : 0),
          (f = e("radialAccelVariance", a)),
          (d.radialAccelVar = f ? parseFloat(f) : 0),
          (f = e("tangentialAcceleration", a)),
          (d.tangentialAccel = f ? parseFloat(f) : 0),
          (f = e("tangentialAccelVariance", a)),
          (d.tangentialAccelVar = f ? parseFloat(f) : 0),
          (f = e("rotationIsDir", a)),
          null !== f
            ? ((f = f.toString().toLowerCase()),
              (d.rotationIsDir = "true" === f || "1" === f))
            : (d.rotationIsDir = !1);
      else if (this.emitterMode === cc.ParticleSystem.MODE_RADIUS)
        (d = this.modeB),
          (d.startRadius = parseFloat(e("maxRadius", a))),
          (d.startRadiusVar = parseFloat(e("maxRadiusVariance", a))),
          (d.endRadius = parseFloat(e("minRadius", a))),
          (d.endRadiusVar = 0),
          (d.rotatePerSecond = parseFloat(e("rotatePerSecond", a))),
          (d.rotatePerSecondVar = parseFloat(e("rotatePerSecondVariance", a)));
      else
        return (
          cc.log(
            "cc.ParticleSystem.initWithDictionary(): Invalid emitterType in config file"
          ),
          !1
        );
      this.life = parseFloat(e("particleLifespan", a));
      this.lifeVar = parseFloat(e("particleLifespanVariance", a));
      this.emissionRate = this._totalParticles / this.life;
      if (!this._batchNode)
        if (
          ((this._opacityModifyRGB = !1),
          (d = e("textureFileName", a)),
          (d = cc.path.changeBasename(this._plistFile, d)),
          (f = cc.textureCache.getTextureForKey(d)))
        )
          this.setTexture(f);
        else if ((e = e("textureImageData", a)) && 0 !== e.length) {
          e = cc.unzipBase64AsArray(e, 1);
          if (!e)
            return (
              cc.log(
                "cc.ParticleSystem: error decoding or ungzipping textureImageData"
              ),
              !1
            );
          f = cc.getImageFormatByData(e);
          if (f !== cc.FMT_TIFF && f !== cc.FMT_PNG)
            return (
              cc.log("cc.ParticleSystem: unknown image format with Data"), !1
            );
          var g = document.createElement("canvas");
          f === cc.FMT_PNG
            ? new cc.PNGReader(e).render(g)
            : cc.tiffReader.parseTIFF(e, g);
          cc.textureCache.cacheImage(d, g);
          (e = cc.textureCache.getTextureForKey(d)) ||
            cc.log(
              "cc.ParticleSystem.initWithDictionary() : error loading the texture"
            );
          this.setTexture(e);
        } else {
          f = cc.textureCache.addImage(d);
          if (!f) return !1;
          this.setTexture(f);
        }
      d = !0;
    }
    return d;
  },
  initWithTotalParticles: function (a) {
    this._totalParticles = a;
    var b,
      d = this._particles;
    for (b = d.length = 0; b < a; b++) d[b] = new cc.Particle();
    if (!d) return cc.log("Particle system: not enough memory"), !1;
    this._allocatedParticles = a;
    if (this._batchNode)
      for (b = 0; b < this._totalParticles; b++) d[b].atlasIndex = b;
    this._isActive = !0;
    this._blendFunc.src = cc.BLEND_SRC;
    this._blendFunc.dst = cc.BLEND_DST;
    this.positionType = cc.ParticleSystem.TYPE_FREE;
    this.emitterMode = cc.ParticleSystem.MODE_GRAVITY;
    this._transformSystemDirty = this.autoRemoveOnFinish = !1;
    this.scheduleUpdateWithPriority(1);
    this._renderCmd._initWithTotalParticles(a);
    return !0;
  },
  destroyParticleSystem: function () {
    this.unscheduleUpdate();
  },
  addParticle: function () {
    if (this.isFull()) return !1;
    var a = this._renderCmd.addParticle();
    this.initParticle(a);
    ++this.particleCount;
    return !0;
  },
  initParticle: function (a) {
    var b = cc.randomMinus1To1;
    a.timeToLive = this.life + this.lifeVar * b();
    a.timeToLive = Math.max(0, a.timeToLive);
    a.pos.x = this._sourcePosition.x + this._posVar.x * b();
    a.pos.y = this._sourcePosition.y + this._posVar.y * b();
    var d, e;
    d = this._startColor;
    var f = this._startColorVar,
      g = this._endColor;
    e = this._endColorVar;
    d = {
      r: cc.clampf(d.r + f.r * b(), 0, 255),
      g: cc.clampf(d.g + f.g * b(), 0, 255),
      b: cc.clampf(d.b + f.b * b(), 0, 255),
      a: cc.clampf(d.a + f.a * b(), 0, 255),
    };
    e = {
      r: cc.clampf(g.r + e.r * b(), 0, 255),
      g: cc.clampf(g.g + e.g * b(), 0, 255),
      b: cc.clampf(g.b + e.b * b(), 0, 255),
      a: cc.clampf(g.a + e.a * b(), 0, 255),
    };
    a.color = d;
    f = a.deltaColor;
    g = a.timeToLive;
    f.r = (e.r - d.r) / g;
    f.g = (e.g - d.g) / g;
    f.b = (e.b - d.b) / g;
    f.a = (e.a - d.a) / g;
    d = this.startSize + this.startSizeVar * b();
    d = Math.max(0, d);
    a.size = d;
    this.endSize === cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE
      ? (a.deltaSize = 0)
      : ((e = this.endSize + this.endSizeVar * b()),
        (e = Math.max(0, e)),
        (a.deltaSize = (e - d) / g));
    d = this.startSpin + this.startSpinVar * b();
    e = this.endSpin + this.endSpinVar * b();
    a.rotation = d;
    a.deltaRotation = (e - d) / g;
    this.positionType === cc.ParticleSystem.TYPE_FREE
      ? (a.startPos = this.convertToWorldSpace(this._pointZeroForParticle))
      : this.positionType === cc.ParticleSystem.TYPE_RELATIVE &&
        ((a.startPos.x = this._position.x), (a.startPos.y = this._position.y));
    d = cc.degreesToRadians(this.angle + this.angleVar * b());
    if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY)
      (g = this.modeA),
        (e = a.modeA),
        (f = g.speed + g.speedVar * b()),
        (e.dir.x = Math.cos(d)),
        (e.dir.y = Math.sin(d)),
        cc.pMultIn(e.dir, f),
        (e.radialAccel = g.radialAccel + g.radialAccelVar * b()),
        (e.tangentialAccel = g.tangentialAccel + g.tangentialAccelVar * b()),
        g.rotationIsDir &&
          (a.rotation = -cc.radiansToDegrees(cc.pToAngle(e.dir)));
    else {
      e = this.modeB;
      a = a.modeB;
      var f = e.startRadius + e.startRadiusVar * b(),
        h = e.endRadius + e.endRadiusVar * b();
      a.radius = f;
      a.deltaRadius =
        e.endRadius === cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS
          ? 0
          : (h - f) / g;
      a.angle = d;
      a.degreesPerSecond = cc.degreesToRadians(
        e.rotatePerSecond + e.rotatePerSecondVar * b()
      );
    }
  },
  stopSystem: function () {
    this._isActive = !1;
    this._elapsed = this.duration;
    this._emitCounter = 0;
  },
  resetSystem: function () {
    this._isActive = !0;
    this._elapsed = 0;
    var a = this._particles;
    for (
      this._particleIdx = 0;
      this._particleIdx < this.particleCount;
      ++this._particleIdx
    )
      a[this._particleIdx].timeToLive = 0;
  },
  isFull: function () {
    return this.particleCount >= this._totalParticles;
  },
  updateQuadWithParticle: function (a, b) {
    this._renderCmd.updateQuadWithParticle(a, b);
  },
  postStep: function () {
    this._renderCmd.postStep();
  },
  update: function (a) {
    if (this._isActive && this.emissionRate) {
      var b = 1 / this.emissionRate;
      this.particleCount < this._totalParticles && (this._emitCounter += a);
      for (
        ;
        this.particleCount < this._totalParticles && this._emitCounter > b;

      )
        this.addParticle(), (this._emitCounter -= b);
      this._elapsed += a;
      -1 !== this.duration &&
        this.duration < this._elapsed &&
        this.stopSystem();
    }
    this._particleIdx = 0;
    b = cc.Particle.TemporaryPoints[0];
    this.positionType === cc.ParticleSystem.TYPE_FREE
      ? cc.pIn(b, this.convertToWorldSpace(this._pointZeroForParticle))
      : this.positionType === cc.ParticleSystem.TYPE_RELATIVE &&
        ((b.x = this._position.x), (b.y = this._position.y));
    if (this._visible) {
      for (
        var d = cc.Particle.TemporaryPoints[1],
          e = cc.Particle.TemporaryPoints[2],
          f = cc.Particle.TemporaryPoints[3],
          g = this._particles;
        this._particleIdx < this.particleCount;

      ) {
        cc.pZeroIn(d);
        cc.pZeroIn(e);
        cc.pZeroIn(f);
        var h = g[this._particleIdx];
        h.timeToLive -= a;
        if (0 < h.timeToLive) {
          if (this.emitterMode === cc.ParticleSystem.MODE_GRAVITY) {
            var k = f,
              m = d,
              n = e;
            h.pos.x || h.pos.y
              ? (cc.pIn(m, h.pos), cc.pNormalizeIn(m))
              : cc.pZeroIn(m);
            cc.pIn(n, m);
            cc.pMultIn(m, h.modeA.radialAccel);
            var p = n.x;
            n.x = -n.y;
            n.y = p;
            cc.pMultIn(n, h.modeA.tangentialAccel);
            cc.pIn(k, m);
            cc.pAddIn(k, n);
            cc.pAddIn(k, this.modeA.gravity);
            cc.pMultIn(k, a);
            cc.pAddIn(h.modeA.dir, k);
            cc.pIn(k, h.modeA.dir);
            cc.pMultIn(k, a);
            cc.pAddIn(h.pos, k);
          } else
            (k = h.modeB),
              (k.angle += k.degreesPerSecond * a),
              (k.radius += k.deltaRadius * a),
              (h.pos.x = -Math.cos(k.angle) * k.radius),
              (h.pos.y = -Math.sin(k.angle) * k.radius);
          this._renderCmd._updateDeltaColor(h, a);
          h.size += h.deltaSize * a;
          h.size = Math.max(0, h.size);
          h.rotation += h.deltaRotation * a;
          k = d;
          this.positionType === cc.ParticleSystem.TYPE_FREE ||
          this.positionType === cc.ParticleSystem.TYPE_RELATIVE
            ? ((m = e),
              cc.pIn(m, b),
              cc.pSubIn(m, h.startPos),
              cc.pIn(k, h.pos),
              cc.pSubIn(k, m))
            : cc.pIn(k, h.pos);
          this._batchNode &&
            ((k.x += this._position.x), (k.y += this._position.y));
          this._renderCmd.updateParticlePosition(h, k);
          ++this._particleIdx;
        } else if (
          ((h = h.atlasIndex),
          this._particleIdx !== this.particleCount - 1 &&
            ((k = g[this._particleIdx]),
            (g[this._particleIdx] = g[this.particleCount - 1]),
            (g[this.particleCount - 1] = k)),
          this._batchNode &&
            (this._batchNode.disableParticle(this.atlasIndex + h),
            (g[this.particleCount - 1].atlasIndex = h)),
          --this.particleCount,
          0 === this.particleCount && this.autoRemoveOnFinish)
        ) {
          this.unscheduleUpdate();
          this._parent.removeChild(this, !0);
          return;
        }
      }
      this._transformSystemDirty = !1;
    }
    this._batchNode || this.postStep();
  },
  updateWithNoTime: function () {
    this.update(0);
  },
  _valueForKey: function (a, b) {
    if (b) {
      var d = b[a];
      return null != d ? d : "";
    }
    return "";
  },
  _updateBlendFunc: function () {
    if (this._batchNode)
      cc.log(
        "Can't change blending functions when the particle is being batched"
      );
    else {
      var a = this._texture;
      if (a && a instanceof cc.Texture2D) {
        this._opacityModifyRGB = !1;
        var b = this._blendFunc;
        b.src === cc.BLEND_SRC &&
          b.dst === cc.BLEND_DST &&
          (a.hasPremultipliedAlpha()
            ? (this._opacityModifyRGB = !0)
            : ((b.src = cc.SRC_ALPHA), (b.dst = cc.ONE_MINUS_SRC_ALPHA)));
      }
    }
  },
  clone: function () {
    var a = new cc.ParticleSystem();
    if (a.initWithTotalParticles(this.getTotalParticles())) {
      a.setAngle(this.getAngle());
      a.setAngleVar(this.getAngleVar());
      a.setDuration(this.getDuration());
      var b = this.getBlendFunc();
      a.setBlendFunc(b.src, b.dst);
      a.setStartColor(this.getStartColor());
      a.setStartColorVar(this.getStartColorVar());
      a.setEndColor(this.getEndColor());
      a.setEndColorVar(this.getEndColorVar());
      a.setStartSize(this.getStartSize());
      a.setStartSizeVar(this.getStartSizeVar());
      a.setEndSize(this.getEndSize());
      a.setEndSizeVar(this.getEndSizeVar());
      a.setPosition(cc.p(this.x, this.y));
      a.setPosVar(cc.p(this.getPosVar().x, this.getPosVar().y));
      a.setPositionType(this.getPositionType());
      a.setStartSpin(this.getStartSpin() || 0);
      a.setStartSpinVar(this.getStartSpinVar() || 0);
      a.setEndSpin(this.getEndSpin() || 0);
      a.setEndSpinVar(this.getEndSpinVar() || 0);
      a.setEmitterMode(this.getEmitterMode());
      this.getEmitterMode() === cc.ParticleSystem.MODE_GRAVITY
        ? ((b = this.getGravity()),
          a.setGravity(cc.p(b.x, b.y)),
          a.setSpeed(this.getSpeed()),
          a.setSpeedVar(this.getSpeedVar()),
          a.setRadialAccel(this.getRadialAccel()),
          a.setRadialAccelVar(this.getRadialAccelVar()),
          a.setTangentialAccel(this.getTangentialAccel()),
          a.setTangentialAccelVar(this.getTangentialAccelVar()))
        : this.getEmitterMode() === cc.ParticleSystem.MODE_RADIUS &&
          (a.setStartRadius(this.getStartRadius()),
          a.setStartRadiusVar(this.getStartRadiusVar()),
          a.setEndRadius(this.getEndRadius()),
          a.setEndRadiusVar(this.getEndRadiusVar()),
          a.setRotatePerSecond(this.getRotatePerSecond()),
          a.setRotatePerSecondVar(this.getRotatePerSecondVar()));
      a.setLife(this.getLife());
      a.setLifeVar(this.getLifeVar());
      a.setEmissionRate(this.getEmissionRate());
      if (
        !this.getBatchNode() &&
        (a.setOpacityModifyRGB(this.isOpacityModifyRGB()),
        (b = this.getTexture()))
      ) {
        var d = b.getContentSize();
        a.setTextureWithRect(b, cc.rect(0, 0, d.width, d.height));
      }
    }
    return a;
  },
  setDisplayFrame: function (a) {
    if (a) {
      var b = a.getOffsetInPixels();
      (0 === b.x && 0 === b.y) ||
        cc.log(
          "cc.ParticleSystem.setDisplayFrame(): QuadParticle only supports SpriteFrames with no offsets"
        );
      a = a.getTexture();
      this._texture !== a && this.setTexture(a);
    }
  },
  setTextureWithRect: function (a, b) {
    this._texture !== a && ((this._texture = a), this._updateBlendFunc());
    this.initTexCoordsWithRect(b);
  },
  listenBackToForeground: function (a) {},
});
_p = cc.ParticleSystem.prototype;
cc.defineGetterSetter(
  _p,
  "opacityModifyRGB",
  _p.isOpacityModifyRGB,
  _p.setOpacityModifyRGB
);
cc.defineGetterSetter(_p, "batchNode", _p.getBatchNode, _p.setBatchNode);
cc.defineGetterSetter(_p, "drawMode", _p.getDrawMode, _p.setDrawMode);
cc.defineGetterSetter(_p, "shapeType", _p.getShapeType, _p.setShapeType);
cc.defineGetterSetter(_p, "active", _p.isActive);
cc.defineGetterSetter(
  _p,
  "sourcePos",
  _p.getSourcePosition,
  _p.setSourcePosition
);
cc.defineGetterSetter(_p, "posVar", _p.getPosVar, _p.setPosVar);
cc.defineGetterSetter(_p, "gravity", _p.getGravity, _p.setGravity);
cc.defineGetterSetter(_p, "speed", _p.getSpeed, _p.setSpeed);
cc.defineGetterSetter(_p, "speedVar", _p.getSpeedVar, _p.setSpeedVar);
cc.defineGetterSetter(
  _p,
  "tangentialAccel",
  _p.getTangentialAccel,
  _p.setTangentialAccel
);
cc.defineGetterSetter(
  _p,
  "tangentialAccelVar",
  _p.getTangentialAccelVar,
  _p.setTangentialAccelVar
);
cc.defineGetterSetter(_p, "radialAccel", _p.getRadialAccel, _p.setRadialAccel);
cc.defineGetterSetter(
  _p,
  "radialAccelVar",
  _p.getRadialAccelVar,
  _p.setRadialAccelVar
);
cc.defineGetterSetter(
  _p,
  "rotationIsDir",
  _p.getRotationIsDir,
  _p.setRotationIsDir
);
cc.defineGetterSetter(_p, "startRadius", _p.getStartRadius, _p.setStartRadius);
cc.defineGetterSetter(
  _p,
  "startRadiusVar",
  _p.getStartRadiusVar,
  _p.setStartRadiusVar
);
cc.defineGetterSetter(_p, "endRadius", _p.getEndRadius, _p.setEndRadius);
cc.defineGetterSetter(
  _p,
  "endRadiusVar",
  _p.getEndRadiusVar,
  _p.setEndRadiusVar
);
cc.defineGetterSetter(
  _p,
  "rotatePerS",
  _p.getRotatePerSecond,
  _p.setRotatePerSecond
);
cc.defineGetterSetter(
  _p,
  "rotatePerSVar",
  _p.getRotatePerSecondVar,
  _p.setRotatePerSecondVar
);
cc.defineGetterSetter(_p, "startColor", _p.getStartColor, _p.setStartColor);
cc.defineGetterSetter(
  _p,
  "startColorVar",
  _p.getStartColorVar,
  _p.setStartColorVar
);
cc.defineGetterSetter(_p, "endColor", _p.getEndColor, _p.setEndColor);
cc.defineGetterSetter(_p, "endColorVar", _p.getEndColorVar, _p.setEndColorVar);
cc.defineGetterSetter(
  _p,
  "totalParticles",
  _p.getTotalParticles,
  _p.setTotalParticles
);
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.ParticleSystem.create = function (a) {
  return new cc.ParticleSystem(a);
};
cc.ParticleSystem.createWithTotalParticles = cc.ParticleSystem.create;
cc.ParticleSystem.ModeA = function (a, b, d, e, f, g, h, k) {
  this.gravity = a ? a : cc.p(0, 0);
  this.speed = b || 0;
  this.speedVar = d || 0;
  this.tangentialAccel = e || 0;
  this.tangentialAccelVar = f || 0;
  this.radialAccel = g || 0;
  this.radialAccelVar = h || 0;
  this.rotationIsDir = k || !1;
};
cc.ParticleSystem.ModeB = function (a, b, d, e, f, g) {
  this.startRadius = a || 0;
  this.startRadiusVar = b || 0;
  this.endRadius = d || 0;
  this.endRadiusVar = e || 0;
  this.rotatePerSecond = f || 0;
  this.rotatePerSecondVar = g || 0;
};
cc.ParticleSystem.SHAPE_MODE = 0;
cc.ParticleSystem.TEXTURE_MODE = 1;
cc.ParticleSystem.STAR_SHAPE = 0;
cc.ParticleSystem.BALL_SHAPE = 1;
cc.ParticleSystem.DURATION_INFINITY = -1;
cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE = -1;
cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS = -1;
cc.ParticleSystem.MODE_GRAVITY = 0;
cc.ParticleSystem.MODE_RADIUS = 1;
cc.ParticleSystem.TYPE_FREE = 0;
cc.ParticleSystem.TYPE_RELATIVE = 1;
cc.ParticleSystem.TYPE_GROUPED = 2;
(function () {
  cc.ParticleSystem.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._drawMode = cc.ParticleSystem.TEXTURE_MODE;
    this._shapeType = cc.ParticleSystem.BALL_SHAPE;
    this._pointRect = cc.rect(0, 0, 0, 0);
    this._tintCache = null;
  };
  var a = (cc.ParticleSystem.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ParticleSystem.CanvasRenderCmd;
  a.getDrawMode = function () {
    return this._drawMode;
  };
  a.setDrawMode = function (a) {
    this._drawMode = a;
  };
  a.getShapeType = function () {
    return this._shapeType;
  };
  a.setShapeType = function (a) {
    this._shapeType = a;
  };
  a.setBatchNode = function (a) {
    this._batchNode !== a && (this._node._batchNode = a);
  };
  a.updateQuadWithParticle = function (a, d) {};
  a.updateParticlePosition = function (a, d) {
    cc.pIn(a.drawPos, d);
  };
  a.rendering = function (a, d, e) {
    a = a || cc._renderContext;
    var f = a.getContext(),
      g = this._node,
      h = this._pointRect;
    a.setTransform(this._worldTransform, d, e);
    a.save();
    g.isBlendAdditive()
      ? (f.globalCompositeOperation = "lighter")
      : (f.globalCompositeOperation = "source-over");
    var k, m;
    e = this._node.particleCount;
    var n = this._node._particles;
    if (g.drawMode !== cc.ParticleSystem.SHAPE_MODE && g._texture) {
      if (!g._texture._textureLoaded) {
        a.restore();
        return;
      }
      var p = g._texture.getHtmlElementObj();
      if (!p.width || !p.height) {
        a.restore();
        return;
      }
      k = p;
      for (d = 0; d < e; d++)
        if (((k = n[d]), (m = k.color.a / 255), 0 !== m)) {
          f.globalAlpha = m;
          f.save();
          f.translate(0 | k.drawPos.x, -(0 | k.drawPos.y));
          var r = 4 * Math.floor(k.size / 4);
          m = h.width;
          var s = h.height;
          f.scale(Math.max((1 / m) * r, 1e-6), Math.max((1 / s) * r, 1e-6));
          k.rotation && f.rotate(cc.degreesToRadians(k.rotation));
          k = k.isChangeColor
            ? this._changeTextureColor(g._texture, k.color, this._pointRect)
            : p;
          f.drawImage(k, -(0 | (m / 2)), -(0 | (s / 2)));
          f.restore();
        }
    } else
      for (p = cc._drawingUtil, d = 0; d < e; d++)
        (k = n[d]),
          (h = 0 | (0.5 * k.size)),
          (m = k.color.a / 255),
          0 !== m &&
            ((f.globalAlpha = m),
            f.save(),
            f.translate(0 | k.drawPos.x, -(0 | k.drawPos.y)),
            g.shapeType === cc.ParticleSystem.STAR_SHAPE
              ? (k.rotation && f.rotate(cc.degreesToRadians(k.rotation)),
                p.drawStar(a, h, k.color))
              : p.drawColorBall(a, h, k.color),
            f.restore());
    a.restore();
    cc.g_NumberOfDraws++;
  };
  a._changeTextureColor = function (a, d, e) {
    this._tintCache || (this._tintCache = document.createElement("canvas"));
    var f = this._tintCache,
      g = a.getContentSize();
    f.width = g.width;
    f.height = g.height;
    return a._generateColorTexture(d.r, d.g, d.b, e, f);
  };
  a.initTexCoordsWithRect = function (a) {
    this._pointRect = a;
  };
  a.setTotalParticles = function (a) {
    this._node._totalParticles = 200 > a ? a : 200;
  };
  a.addParticle = function () {
    var a = this._node,
      d = a._particles;
    a.particleCount < d.length
      ? (a = d[a.particleCount])
      : ((a = new cc.Particle()), d.push(a));
    return a;
  };
  a._setupVBO = function () {};
  a._allocMemory = function () {
    return !0;
  };
  a.postStep = function () {};
  a._setBlendAdditive = function () {
    var a = this._node._blendFunc;
    a.src = cc.BLEND_SRC;
    a.dst = cc.BLEND_DST;
  };
  a._initWithTotalParticles = function (a) {};
  a._updateDeltaColor = function (a, d) {
    if (!this._node._dontTint) {
      var e = a.deltaColor;
      a.color.r += e.r * d;
      a.color.g += e.g * d;
      a.color.b += e.b * d;
      a.color.a += e.a * d;
      a.isChangeColor = 0 !== e.r || 0 !== e.g || 0 !== e.b;
    }
  };
})();
(function () {
  cc.ParticleSystem.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._matrix = null;
    this._buffersVBO = [0, 0];
    this._quads = [];
    this._indices = [];
    this._quadsArrayBuffer = null;
  };
  var a = (cc.ParticleSystem.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.ParticleSystem.WebGLRenderCmd;
  a.getDrawMode = function () {};
  a.setDrawMode = function (a) {};
  a.getShapeType = function () {};
  a.setShapeType = function (a) {};
  a.setBatchNode = function (a) {
    var d = this._node;
    if (d._batchNode !== a) {
      var e = d._batchNode;
      if ((d._batchNode = a))
        for (var f = d._particles, g = 0; g < d._totalParticles; g++)
          f[g].atlasIndex = g;
      a
        ? e ||
          (d._batchNode.textureAtlas._copyQuadsToTextureAtlas(
            this._quads,
            d.atlasIndex
          ),
          cc._renderContext.deleteBuffer(this._buffersVBO[1]))
        : (this._allocMemory(),
          this.initIndices(d._totalParticles),
          d.setTexture(e.getTexture()),
          this._setupVBO());
    }
  };
  a.initIndices = function (a) {
    for (var d = this._indices, e = 0; e < a; ++e) {
      var f = 6 * e,
        g = 4 * e;
      d[f + 0] = g + 0;
      d[f + 1] = g + 1;
      d[f + 2] = g + 2;
      d[f + 5] = g + 1;
      d[f + 4] = g + 2;
      d[f + 3] = g + 3;
    }
  };
  a.isDifferentTexture = function (a, d) {
    return a === d;
  };
  a.updateParticlePosition = function (a, d) {
    this.updateQuadWithParticle(a, d);
  };
  a.updateQuadWithParticle = function (a, d) {
    var e = null,
      f = this._node;
    f._batchNode
      ? ((e = f._batchNode.textureAtlas.quads[f.atlasIndex + a.atlasIndex]),
        (f._batchNode.textureAtlas.dirty = !0))
      : (e = this._quads[f._particleIdx]);
    var g, h, k;
    f._opacityModifyRGB
      ? ((f = 0 | ((a.color.r * a.color.a) / 255)),
        (g = 0 | ((a.color.g * a.color.a) / 255)),
        (h = 0 | ((a.color.b * a.color.a) / 255)))
      : ((f = 0 | a.color.r), (g = 0 | a.color.g), (h = 0 | a.color.b));
    k = 0 | a.color.a;
    var m = e.bl.colors,
      n = e.br.colors,
      p = e.tl.colors,
      r = e.tr.colors;
    m.r = n.r = p.r = r.r = f;
    m.g = n.g = p.g = r.g = g;
    m.b = n.b = p.b = r.b = h;
    m.a = n.a = p.a = r.a = k;
    f = a.size / 2;
    a.rotation
      ? ((g = -f),
        (h = -f),
        (k = d.x),
        (m = d.y),
        (p = -cc.degreesToRadians(a.rotation)),
        (n = Math.cos(p)),
        (p = Math.sin(p)),
        (e.bl.vertices.x = g * n - h * p + k),
        (e.bl.vertices.y = g * p + h * n + m),
        (e.br.vertices.x = f * n - h * p + k),
        (e.br.vertices.y = f * p + h * n + m),
        (e.tl.vertices.x = g * n - f * p + k),
        (e.tl.vertices.y = g * p + f * n + m),
        (e.tr.vertices.x = f * n - f * p + k),
        (e.tr.vertices.y = f * p + f * n + m))
      : ((e.bl.vertices.x = d.x - f),
        (e.bl.vertices.y = d.y - f),
        (e.br.vertices.x = d.x + f),
        (e.br.vertices.y = d.y - f),
        (e.tl.vertices.x = d.x - f),
        (e.tl.vertices.y = d.y + f),
        (e.tr.vertices.x = d.x + f),
        (e.tr.vertices.y = d.y + f));
  };
  a.rendering = function (a) {
    var d = this._node;
    if (d._texture) {
      a = a || cc._renderContext;
      this._matrix ||
        ((this._matrix = new cc.math.Matrix4()), this._matrix.identity());
      var e = this._worldTransform;
      this._matrix.mat[0] = e.a;
      this._matrix.mat[4] = e.c;
      this._matrix.mat[12] = e.tx;
      this._matrix.mat[1] = e.b;
      this._matrix.mat[5] = e.d;
      this._matrix.mat[13] = e.ty;
      this._glProgramState.apply(this._matrix);
      cc.glBindTexture2D(d._texture);
      cc.glBlendFuncForParticle(d._blendFunc.src, d._blendFunc.dst);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR);
      a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS);
      a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
      a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION, 3, a.FLOAT, !1, 24, 0);
      a.vertexAttribPointer(
        cc.VERTEX_ATTRIB_COLOR,
        4,
        a.UNSIGNED_BYTE,
        !0,
        24,
        12
      );
      a.vertexAttribPointer(
        cc.VERTEX_ATTRIB_TEX_COORDS,
        2,
        a.FLOAT,
        !1,
        24,
        16
      );
      a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
      a.drawElements(a.TRIANGLES, 6 * d._particleIdx, a.UNSIGNED_SHORT, 0);
    }
  };
  a.initTexCoordsWithRect = function (a) {
    var d = this._node,
      e = d.texture,
      f = cc.contentScaleFactor(),
      g = cc.rect(a.x * f, a.y * f, a.width * f, a.height * f),
      f = a.width,
      h = a.height;
    e && ((f = e.pixelsWidth), (h = e.pixelsHeight));
    cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL
      ? ((e = (2 * g.x + 1) / (2 * f)),
        (a = (2 * g.y + 1) / (2 * h)),
        (f = e + (2 * g.width - 2) / (2 * f)),
        (g = a + (2 * g.height - 2) / (2 * h)))
      : ((e = g.x / f),
        (a = g.y / h),
        (f = e + g.width / f),
        (g = a + g.height / h));
    h = g;
    g = a;
    a = h;
    var k = 0,
      m = 0;
    d._batchNode
      ? ((h = d._batchNode.textureAtlas.quads),
        (k = d.atlasIndex),
        (m = d.atlasIndex + d._totalParticles))
      : ((h = this._quads), (k = 0), (m = d._totalParticles));
    for (d = k; d < m; d++)
      h[d] || (h[d] = cc.V3F_C4B_T2F_QuadZero()),
        (k = h[d]),
        (k.bl.texCoords.u = e),
        (k.bl.texCoords.v = a),
        (k.br.texCoords.u = f),
        (k.br.texCoords.v = a),
        (k.tl.texCoords.u = e),
        (k.tl.texCoords.v = g),
        (k.tr.texCoords.u = f),
        (k.tr.texCoords.v = g);
  };
  a.setTotalParticles = function (a) {
    var d = this._node;
    if (a > d._allocatedParticles) {
      var e = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;
      this._indices = new Uint16Array(6 * a);
      var f = new ArrayBuffer(a * e),
        g = d._particles;
      g.length = 0;
      for (var h = this._quads, k = (h.length = 0); k < a; k++)
        (g[k] = new cc.Particle()),
          (h[k] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, f, k * e));
      d._allocatedParticles = a;
      d._totalParticles = a;
      if (d._batchNode) for (e = 0; e < a; e++) g[e].atlasIndex = e;
      this._quadsArrayBuffer = f;
      this.initIndices(a);
      this._setupVBO();
      d._texture &&
        this.initTexCoordsWithRect(
          cc.rect(0, 0, d._texture.width, d._texture.height)
        );
    } else d._totalParticles = a;
    d.resetSystem();
  };
  a.addParticle = function () {
    var a = this._node;
    return a._particles[a.particleCount];
  };
  a._setupVBO = function () {
    var a = cc._renderContext;
    this._buffersVBO[0] = a.createBuffer();
    a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
    a.bufferData(a.ARRAY_BUFFER, this._quadsArrayBuffer, a.DYNAMIC_DRAW);
    this._buffersVBO[1] = a.createBuffer();
    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this._buffersVBO[1]);
    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this._indices, a.STATIC_DRAW);
  };
  a._allocMemory = function () {
    var a = this._node;
    if (a._batchNode)
      return (
        cc.log(
          "cc.ParticleSystem._allocMemory(): Memory should not be allocated when not using batchNode"
        ),
        !1
      );
    var d = cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
      a = a._totalParticles,
      e = this._quads;
    e.length = 0;
    this._indices = new Uint16Array(6 * a);
    for (var f = new ArrayBuffer(d * a), g = 0; g < a; g++)
      e[g] = new cc.V3F_C4B_T2F_Quad(null, null, null, null, f, g * d);
    if (!e || !this._indices)
      return cc.log("cocos2d: Particle system: not enough memory"), !1;
    this._quadsArrayBuffer = f;
    return !0;
  };
  a.postStep = function () {
    var a = cc._renderContext;
    a.bindBuffer(a.ARRAY_BUFFER, this._buffersVBO[0]);
    a.bufferSubData(a.ARRAY_BUFFER, 0, this._quadsArrayBuffer);
  };
  a._setBlendAdditive = function () {
    var a = this._node._blendFunc;
    this._texture && !this._texture.hasPremultipliedAlpha()
      ? ((a.src = cc.SRC_ALPHA), (a.dst = cc.ONE_MINUS_SRC_ALPHA))
      : ((a.src = cc.BLEND_SRC), (a.dst = cc.BLEND_DST));
  };
  a._initWithTotalParticles = function (a) {
    if (!this._allocMemory()) return !1;
    this.initIndices(a);
    this._setupVBO();
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_POSITION_TEXTURECOLOR
    );
  };
  a._updateDeltaColor = function (a, d) {
    a.color.r += a.deltaColor.r * d;
    a.color.g += a.deltaColor.g * d;
    a.color.b += a.deltaColor.b * d;
    a.color.a += a.deltaColor.a * d;
    a.isChangeColor = !0;
  };
})();
cc.ParticleFire = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 300 : 150
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setSpeed(60),
        this.setSpeedVar(20),
        this.setAngle(90),
        this.setAngleVar(10),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, 60),
        this.setPosVar(cc.p(40, 20)),
        this.setLife(3),
        this.setLifeVar(0.25),
        this.setStartSize(54),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(194, 64, 31, 255)),
        this.setStartColorVar(cc.color(0, 0, 0, 0)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!0),
        !0)
      : !1;
  },
});
cc.ParticleFire.create = function () {
  return new cc.ParticleFire();
};
cc.ParticleFireworks = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 1500 : 150
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, -90)),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setSpeed(180),
        this.setSpeedVar(50),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setAngle(90),
        this.setAngleVar(20),
        this.setLife(3.5),
        this.setLifeVar(1),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(128, 128, 128, 255)),
        this.setStartColorVar(cc.color(128, 128, 128, 255)),
        this.setEndColor(cc.color(26, 26, 26, 51)),
        this.setEndColorVar(cc.color(26, 26, 26, 51)),
        this.setStartSize(8),
        this.setStartSizeVar(2),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleFireworks.create = function () {
  return new cc.ParticleFireworks();
};
cc.ParticleSun = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 350 : 150
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setBlendAdditive(!0),
        this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setSpeed(20),
        this.setSpeedVar(5),
        this.setAngle(90),
        this.setAngleVar(360),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(1),
        this.setLifeVar(0.5),
        this.setStartSize(30),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(194, 64, 31, 255)),
        this.setStartColorVar(cc.color(0, 0, 0, 0)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        !0)
      : !1;
  },
});
cc.ParticleSun.create = function () {
  return new cc.ParticleSun();
};
cc.ParticleGalaxy = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 200 : 100
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setSpeed(60),
        this.setSpeedVar(10),
        this.setRadialAccel(-80),
        this.setRadialAccelVar(0),
        this.setTangentialAccel(80),
        this.setTangentialAccelVar(0),
        this.setAngle(90),
        this.setAngleVar(360),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(4),
        this.setLifeVar(1),
        this.setStartSize(37),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(31, 64, 194, 255)),
        this.setStartColorVar(cc.color(0, 0, 0, 0)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!0),
        !0)
      : !1;
  },
});
cc.ParticleGalaxy.create = function () {
  return new cc.ParticleGalaxy();
};
cc.ParticleFlower = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 250 : 100
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setSpeed(80),
        this.setSpeedVar(10),
        this.setRadialAccel(-60),
        this.setRadialAccelVar(0),
        this.setTangentialAccel(15),
        this.setTangentialAccelVar(0),
        this.setAngle(90),
        this.setAngleVar(360),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(4),
        this.setLifeVar(1),
        this.setStartSize(30),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(128, 128, 128, 255)),
        this.setStartColorVar(cc.color(128, 128, 128, 128)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!0),
        !0)
      : !1;
  },
});
cc.ParticleFlower.create = function () {
  return new cc.ParticleFlower();
};
cc.ParticleMeteor = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 150 : 100
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(-200, 200)),
        this.setSpeed(15),
        this.setSpeedVar(5),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setTangentialAccel(0),
        this.setTangentialAccelVar(0),
        this.setAngle(90),
        this.setAngleVar(360),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(2),
        this.setLifeVar(1),
        this.setStartSize(60),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(51, 102, 179)),
        this.setStartColorVar(cc.color(0, 0, 51, 26)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!0),
        !0)
      : !1;
  },
});
cc.ParticleMeteor.create = function () {
  return new cc.ParticleMeteor();
};
cc.ParticleSpiral = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 500 : 100
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setSpeed(150),
        this.setSpeedVar(0),
        this.setRadialAccel(-380),
        this.setRadialAccelVar(0),
        this.setTangentialAccel(45),
        this.setTangentialAccelVar(0),
        this.setAngle(90),
        this.setAngleVar(0),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(12),
        this.setLifeVar(0),
        this.setStartSize(20),
        this.setStartSizeVar(0),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(128, 128, 128, 255)),
        this.setStartColorVar(cc.color(128, 128, 128, 0)),
        this.setEndColor(cc.color(128, 128, 128, 255)),
        this.setEndColorVar(cc.color(128, 128, 128, 0)),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleSpiral.create = function () {
  return new cc.ParticleSpiral();
};
cc.ParticleExplosion = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 700 : 300
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(0.1),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setSpeed(70),
        this.setSpeedVar(40),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setTangentialAccel(0),
        this.setTangentialAccelVar(0),
        this.setAngle(90),
        this.setAngleVar(360),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height / 2),
        this.setPosVar(cc.p(0, 0)),
        this.setLife(5),
        this.setLifeVar(2),
        this.setStartSize(15),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getDuration()),
        this.setStartColor(cc.color(179, 26, 51, 255)),
        this.setStartColorVar(cc.color(128, 128, 128, 0)),
        this.setEndColor(cc.color(128, 128, 128, 0)),
        this.setEndColorVar(cc.color(128, 128, 128, 0)),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleExplosion.create = function () {
  return new cc.ParticleExplosion();
};
cc.ParticleSmoke = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 200 : 100
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, 0)),
        this.setRadialAccel(0),
        this.setRadialAccelVar(0),
        this.setSpeed(25),
        this.setSpeedVar(10),
        this.setAngle(90),
        this.setAngleVar(5),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, 0),
        this.setPosVar(cc.p(20, 0)),
        this.setLife(4),
        this.setLifeVar(1),
        this.setStartSize(60),
        this.setStartSizeVar(10),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(this.getTotalParticles() / this.getLife()),
        this.setStartColor(cc.color(204, 204, 204, 255)),
        this.setStartColorVar(cc.color(5, 5, 5, 0)),
        this.setEndColor(cc.color(0, 0, 0, 255)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleSmoke.create = function () {
  return new cc.ParticleSmoke();
};
cc.ParticleSnow = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 700 : 250
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(0, -1)),
        this.setSpeed(5),
        this.setSpeedVar(1),
        this.setRadialAccel(0),
        this.setRadialAccelVar(1),
        this.setTangentialAccel(0),
        this.setTangentialAccelVar(1),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height + 10),
        this.setPosVar(cc.p(a.width / 2, 0)),
        this.setAngle(-90),
        this.setAngleVar(5),
        this.setLife(45),
        this.setLifeVar(15),
        this.setStartSize(10),
        this.setStartSizeVar(5),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(10),
        this.setStartColor(cc.color(255, 255, 255, 255)),
        this.setStartColorVar(cc.color(0, 0, 0, 0)),
        this.setEndColor(cc.color(255, 255, 255, 0)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleSnow.create = function () {
  return new cc.ParticleSnow();
};
cc.ParticleRain = cc.ParticleSystem.extend({
  ctor: function () {
    cc.ParticleSystem.prototype.ctor.call(
      this,
      cc._renderType === cc.game.RENDER_TYPE_WEBGL ? 1e3 : 300
    );
  },
  initWithTotalParticles: function (a) {
    return cc.ParticleSystem.prototype.initWithTotalParticles.call(this, a)
      ? (this.setDuration(cc.ParticleSystem.DURATION_INFINITY),
        this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),
        this.setGravity(cc.p(10, -10)),
        this.setRadialAccel(0),
        this.setRadialAccelVar(1),
        this.setTangentialAccel(0),
        this.setTangentialAccelVar(1),
        this.setSpeed(130),
        this.setSpeedVar(30),
        this.setAngle(-90),
        this.setAngleVar(5),
        (a = cc.director.getWinSize()),
        this.setPosition(a.width / 2, a.height),
        this.setPosVar(cc.p(a.width / 2, 0)),
        this.setLife(4.5),
        this.setLifeVar(0),
        this.setStartSize(4),
        this.setStartSizeVar(2),
        this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),
        this.setEmissionRate(20),
        this.setStartColor(cc.color(179, 204, 255, 255)),
        this.setStartColorVar(cc.color(0, 0, 0, 0)),
        this.setEndColor(cc.color(179, 204, 255, 128)),
        this.setEndColorVar(cc.color(0, 0, 0, 0)),
        this.setBlendAdditive(!1),
        !0)
      : !1;
  },
});
cc.ParticleRain.create = function () {
  return new cc.ParticleRain();
};
cc.PARTICLE_DEFAULT_CAPACITY = 500;
cc.ParticleBatchNode = cc.Node.extend({
  textureAtlas: null,
  _blendFunc: null,
  _className: "ParticleBatchNode",
  ctor: function (a, b) {
    cc.Node.prototype.ctor.call(this);
    this._blendFunc = { src: cc.BLEND_SRC, dst: cc.BLEND_DST };
    cc.isString(a)
      ? this.init(a, b)
      : a instanceof cc.Texture2D && this.initWithTexture(a, b);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ParticleBatchNode.CanvasRenderCmd(this)
      : new cc.ParticleBatchNode.WebGLRenderCmd(this);
  },
  initWithTexture: function (a, b) {
    this.textureAtlas = new cc.TextureAtlas();
    this.textureAtlas.initWithTexture(a, b);
    this._children.length = 0;
    this._renderCmd._initWithTexture();
    return !0;
  },
  initWithFile: function (a, b) {
    var d = cc.textureCache.addImage(a);
    return this.initWithTexture(d, b);
  },
  init: function (a, b) {
    var d = cc.textureCache.addImage(a);
    return this.initWithTexture(d, b);
  },
  visit: function (a) {
    var b = this._renderCmd;
    a = a ? a._renderCmd : null;
    this._visible
      ? (b.visit(a), cc.renderer.pushRenderCommand(b), (b._dirtyFlag = 0))
      : b._propagateFlagsDown(a);
  },
  addChild: function (a, b, d) {
    if (!a)
      throw Error("cc.ParticleBatchNode.addChild() : child should be non-null");
    if (!(a instanceof cc.ParticleSystem))
      throw Error(
        "cc.ParticleBatchNode.addChild() : only supports cc.ParticleSystem as children"
      );
    b = null == b ? a.zIndex : b;
    d = null == d ? a.tag : d;
    if (a.getTexture() !== this.textureAtlas.texture)
      throw Error(
        "cc.ParticleSystem.addChild() : the child is not using the same texture id"
      );
    var e = a.getBlendFunc();
    if (0 === this._children.length) this.setBlendFunc(e);
    else if (e.src !== this._blendFunc.src || e.dst !== this._blendFunc.dst) {
      cc.log(
        "cc.ParticleSystem.addChild() : Can't add a ParticleSystem that uses a different blending function"
      );
      return;
    }
    b = this._addChildHelper(a, b, d);
    d = 0;
    0 !== b
      ? ((b = this._children[b - 1]),
        (d = b.getAtlasIndex() + b.getTotalParticles()))
      : (d = 0);
    this.insertChild(a, d);
    a.setBatchNode(this);
  },
  insertChild: function (a, b) {
    var d = a.getTotalParticles(),
      e = this.textureAtlas,
      f = e.totalQuads;
    a.setAtlasIndex(b);
    f + d > e.getCapacity() &&
      (this._increaseAtlasCapacityTo(f + d),
      e.fillWithEmptyQuadsFromIndex(e.getCapacity() - d, d));
    a.getAtlasIndex() + d !== f && e.moveQuadsFromIndex(b, b + d);
    e.increaseTotalQuadsWith(d);
    this._updateAllAtlasIndexes();
  },
  removeChild: function (a, b) {
    if (null != a) {
      if (!(a instanceof cc.ParticleSystem))
        throw Error(
          "cc.ParticleBatchNode.removeChild(): only supports cc.ParticleSystem as children"
        );
      if (-1 === this._children.indexOf(a))
        cc.log(
          "cc.ParticleBatchNode.removeChild(): doesn't contain the sprite. Can't remove it"
        );
      else {
        cc.Node.prototype.removeChild.call(this, a, b);
        var d = this.textureAtlas;
        d.removeQuadsAtIndex(a.getAtlasIndex(), a.getTotalParticles());
        d.fillWithEmptyQuadsFromIndex(d.totalQuads, a.getTotalParticles());
        a.setBatchNode(null);
        this._updateAllAtlasIndexes();
      }
    }
  },
  reorderChild: function (a, b) {
    if (!a)
      throw Error(
        "cc.ParticleBatchNode.reorderChild(): child should be non-null"
      );
    if (!(a instanceof cc.ParticleSystem))
      throw Error(
        "cc.ParticleBatchNode.reorderChild(): only supports cc.QuadParticleSystems as children"
      );
    if (-1 === this._children.indexOf(a))
      cc.log(
        "cc.ParticleBatchNode.reorderChild(): Child doesn't belong to batch"
      );
    else {
      if (1 < this._children.length) {
        var d = this._getCurrentIndex(a, b);
        if (d.oldIndex !== d.newIndex) {
          this._children.splice(d.oldIndex, 1);
          this._children.splice(d.newIndex, 0, a);
          d = a.getAtlasIndex();
          this._updateAllAtlasIndexes();
          for (var e = 0, f = this._children, g = 0; g < f.length; g++)
            if (f[g] === a) {
              e = a.getAtlasIndex();
              break;
            }
          this.textureAtlas.moveQuadsFromIndex(d, a.getTotalParticles(), e);
          a.updateWithNoTime();
        }
      }
      a._setLocalZOrder(b);
    }
  },
  removeChildAtIndex: function (a, b) {
    this.removeChild(this._children[i], b);
  },
  removeAllChildren: function (a) {
    for (var b = this._children, d = 0; d < b.length; d++)
      b[d].setBatchNode(null);
    cc.Node.prototype.removeAllChildren.call(this, a);
    this.textureAtlas.removeAllQuads();
  },
  disableParticle: function (a) {
    a = this.textureAtlas.quads[a];
    a.br.vertices.x = a.br.vertices.y = a.tr.vertices.x = a.tr.vertices.y = a.tl.vertices.x = a.tl.vertices.y = a.bl.vertices.x = a.bl.vertices.y = 0;
    this.textureAtlas._setDirty(!0);
  },
  getTexture: function () {
    return this.textureAtlas.texture;
  },
  setTexture: function (a) {
    this.textureAtlas.texture = a;
    var b = this._blendFunc;
    a &&
      !a.hasPremultipliedAlpha() &&
      b.src === cc.BLEND_SRC &&
      b.dst === cc.BLEND_DST &&
      ((b.src = cc.SRC_ALPHA), (b.dst = cc.ONE_MINUS_SRC_ALPHA));
  },
  setBlendFunc: function (a, b) {
    void 0 === b
      ? ((this._blendFunc.src = a.src), (this._blendFunc.dst = a.dst))
      : ((this._blendFunc.src = a), (this._blendFunc.src = b));
  },
  getBlendFunc: function () {
    return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst);
  },
  _updateAllAtlasIndexes: function () {
    for (var a = 0, b = this._children, d = 0; d < b.length; d++) {
      var e = b[d];
      e.setAtlasIndex(a);
      a += e.getTotalParticles();
    }
  },
  _increaseAtlasCapacityTo: function (a) {
    cc.log(
      "cocos2d: cc.ParticleBatchNode: resizing TextureAtlas capacity from [" +
        this.textureAtlas.getCapacity() +
        "] to [" +
        a +
        "]."
    );
    this.textureAtlas.resizeCapacity(a) ||
      cc.log(
        "cc.ParticleBatchNode._increaseAtlasCapacityTo() : WARNING: Not enough memory to resize the atlas"
      );
  },
  _searchNewPositionInChildrenForZ: function (a) {
    for (var b = this._children, d = b.length, e = 0; e < d; e++)
      if (b[e].zIndex > a) return e;
    return d;
  },
  _getCurrentIndex: function (a, b) {
    for (
      var d = !1,
        e = !1,
        f = 0,
        g = 0,
        h = 0,
        k = this._children,
        m = k.length,
        n = 0;
      n < m;
      n++
    ) {
      var p = k[n];
      if (p.zIndex > b && !e && ((f = n), (e = !0), d && e)) break;
      if (a === p && ((g = n), (d = !0), e || (h = -1), d && e)) break;
    }
    e || (f = m);
    return { newIndex: f + h, oldIndex: g };
  },
  _addChildHelper: function (a, b, d) {
    if (!a)
      throw Error(
        "cc.ParticleBatchNode._addChildHelper(): child should be non-null"
      );
    if (a.parent)
      return (
        cc.log(
          "cc.ParticleBatchNode._addChildHelper(): child already added. It can't be added again"
        ),
        null
      );
    this._children || (this._children = []);
    var e = this._searchNewPositionInChildrenForZ(b);
    this._children.splice(e, 0, a);
    a.tag = d;
    a._setLocalZOrder(b);
    a.parent = this;
    this._running &&
      (a._performRecursive(cc.Node._stateCallbackType.onEnter),
      a._performRecursive(
        cc.Node._stateCallbackType.onEnterTransitionDidFinish
      ));
    return e;
  },
  _updateBlendFunc: function () {
    this.textureAtlas.texture.hasPremultipliedAlpha() ||
      ((this._blendFunc.src = cc.SRC_ALPHA),
      (this._blendFunc.dst = cc.ONE_MINUS_SRC_ALPHA));
  },
  getTextureAtlas: function () {
    return this.textureAtlas;
  },
  setTextureAtlas: function (a) {
    this.textureAtlas = a;
  },
});
_p = cc.ParticleBatchNode.prototype;
cc.defineGetterSetter(_p, "texture", _p.getTexture, _p.setTexture);
cc.ParticleBatchNode.create = function (a, b) {
  return new cc.ParticleBatchNode(a, b);
};
(function () {
  cc.ParticleBatchNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
  };
  var a = (cc.ParticleBatchNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ParticleBatchNode.CanvasRenderCmd;
  a._initWithTexture = function () {};
})();
(function () {
  cc.ParticleBatchNode.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
  };
  var a = (cc.ParticleBatchNode.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.ParticleBatchNode.WebGLRenderCmd;
  a.rendering = function (a) {
    a = this._node;
    if (0 !== a.textureAtlas.totalQuads) {
      var d = this._worldTransform;
      this._matrix.mat[0] = d.a;
      this._matrix.mat[4] = d.c;
      this._matrix.mat[12] = d.tx;
      this._matrix.mat[1] = d.b;
      this._matrix.mat[5] = d.d;
      this._matrix.mat[13] = d.ty;
      this._glProgramState.apply(this._matrix);
      cc.glBlendFuncForParticle(a._blendFunc.src, a._blendFunc.dst);
      a.textureAtlas.drawQuads();
    }
  };
  a._initWithTexture = function () {
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_POSITION_TEXTURECOLOR
    );
  };
})();
cc.IMEKeyboardNotificationInfo = function (a, b, d) {
  this.begin = a || cc.rect(0, 0, 0, 0);
  this.end = b || cc.rect(0, 0, 0, 0);
  this.duration = d || 0;
};
cc.IMEDelegate = cc.Class.extend({
  ctor: function () {
    cc.imeDispatcher.addDelegate(this);
  },
  removeDelegate: function () {
    cc.imeDispatcher.removeDelegate(this);
  },
  attachWithIME: function () {
    return cc.imeDispatcher.attachDelegateWithIME(this);
  },
  detachWithIME: function () {
    return cc.imeDispatcher.detachDelegateWithIME(this);
  },
  canAttachWithIME: function () {
    return !1;
  },
  didAttachWithIME: function () {},
  canDetachWithIME: function () {
    return !1;
  },
  didDetachWithIME: function () {},
  insertText: function (a, b) {},
  deleteBackward: function () {},
  getContentText: function () {
    return "";
  },
  keyboardWillShow: function (a) {},
  keyboardDidShow: function (a) {},
  keyboardWillHide: function (a) {},
  keyboardDidHide: function (a) {},
});
cc.IMEDispatcher = cc.Class.extend({
  _domInputControl: null,
  impl: null,
  _currentInputString: "",
  _lastClickPosition: null,
  ctor: function () {
    this.impl = new cc.IMEDispatcher.Impl();
    this._lastClickPosition = cc.p(0, 0);
  },
  init: function () {
    if (!cc.sys.isMobile) {
      this._domInputControl = cc.$("#imeDispatcherInput");
      this._domInputControl ||
        ((this._domInputControl = cc.$new("input")),
        this._domInputControl.setAttribute("type", "text"),
        this._domInputControl.setAttribute("id", "imeDispatcherInput"),
        this._domInputControl.resize(0, 0),
        this._domInputControl.translates(0, 0),
        (this._domInputControl.style.opacity = "0"),
        (this._domInputControl.style.fontSize = "1px"),
        this._domInputControl.setAttribute("tabindex", 2),
        (this._domInputControl.style.position = "absolute"),
        (this._domInputControl.style.top = 0),
        (this._domInputControl.style.left = 0),
        document.body.appendChild(this._domInputControl));
      var a = this;
      this._domInputControl.addEventListener(
        "input",
        function () {
          a._processDomInputString(a._domInputControl.value);
        },
        !1
      );
      this._domInputControl.addEventListener(
        "keydown",
        function (b) {
          b.keyCode === cc.KEY.tab
            ? (b.stopPropagation(), b.preventDefault())
            : b.keyCode === cc.KEY.enter &&
              (a.dispatchInsertText("\n", 1),
              b.stopPropagation(),
              b.preventDefault());
        },
        !1
      );
      /msie/i.test(navigator.userAgent) &&
        this._domInputControl.addEventListener(
          "keyup",
          function (b) {
            b.keyCode === cc.KEY.backspace &&
              a._processDomInputString(a._domInputControl.value);
          },
          !1
        );
      window.addEventListener(
        "mousedown",
        function (b) {
          var d = b.pageY || 0;
          a._lastClickPosition.x = b.pageX || 0;
          a._lastClickPosition.y = d;
        },
        !1
      );
    }
  },
  _processDomInputString: function (a) {
    var b, d;
    b =
      this._currentInputString.length < a.length
        ? this._currentInputString.length
        : a.length;
    for (d = 0; d < b && a[d] === this._currentInputString[d]; d++);
    var e = this._currentInputString.length - d,
      f = a.length - d;
    for (b = 0; b < e; b++) this.dispatchDeleteBackward();
    for (b = 0; b < f; b++) this.dispatchInsertText(a[d + b], 1);
    this._currentInputString = a;
  },
  dispatchInsertText: function (a, b) {
    !this.impl ||
      !a ||
      0 >= b ||
      (this.impl._delegateWithIme &&
        this.impl._delegateWithIme.insertText(a, b));
  },
  dispatchDeleteBackward: function () {
    this.impl &&
      this.impl._delegateWithIme &&
      this.impl._delegateWithIme.deleteBackward();
  },
  getContentText: function () {
    if (this.impl && this.impl._delegateWithIme) {
      var a = this.impl._delegateWithIme.getContentText();
      return a ? a : "";
    }
    return "";
  },
  dispatchKeyboardWillShow: function (a) {
    if (this.impl)
      for (var b = 0; b < this.impl._delegateList.length; b++) {
        var d = this.impl._delegateList[b];
        d && d.keyboardWillShow(a);
      }
  },
  dispatchKeyboardDidShow: function (a) {
    if (this.impl)
      for (var b = 0; b < this.impl._delegateList.length; b++) {
        var d = this.impl._delegateList[b];
        d && d.keyboardDidShow(a);
      }
  },
  dispatchKeyboardWillHide: function (a) {
    if (this.impl)
      for (var b = 0; b < this.impl._delegateList.length; b++) {
        var d = this.impl._delegateList[b];
        d && d.keyboardWillHide(a);
      }
  },
  dispatchKeyboardDidHide: function (a) {
    if (this.impl)
      for (var b = 0; b < this.impl._delegateList.length; b++) {
        var d = this.impl._delegateList[b];
        d && d.keyboardDidHide(a);
      }
  },
  addDelegate: function (a) {
    a &&
      this.impl &&
      (-1 < this.impl._delegateList.indexOf(a) ||
        this.impl._delegateList.splice(0, 0, a));
  },
  attachDelegateWithIME: function (a) {
    if (!this.impl || !a || -1 === this.impl._delegateList.indexOf(a))
      return !1;
    if (this.impl._delegateWithIme) {
      if (
        !this.impl._delegateWithIme.canDetachWithIME() ||
        !a.canAttachWithIME()
      )
        return !1;
      var b = this.impl._delegateWithIme;
      this.impl._delegateWithIme = null;
      b.didDetachWithIME();
      this._focusDomInput(a);
      return !0;
    }
    if (!a.canAttachWithIME()) return !1;
    this._focusDomInput(a);
    return !0;
  },
  _focusDomInput: function (a) {
    if (cc.sys.isMobile) {
      this.impl._delegateWithIme = a;
      a.didAttachWithIME();
      this._currentInputString = a.string || "";
      a = a.getTipMessage ? a.getTipMessage() : "please enter your word:";
      var b = window.Window;
      a =
        b && b.prototype.prompt && b.prototype.prompt != prompt
          ? b.prototype.prompt.call(window, a, this._currentInputString)
          : prompt(a, this._currentInputString);
      null != a && this._processDomInputString(a);
      this.dispatchInsertText("\n", 1);
    } else
      (this.impl._delegateWithIme = a),
        (this._currentInputString = a.string || ""),
        a.didAttachWithIME(),
        this._domInputControl.focus(),
        (this._domInputControl.value = this._currentInputString),
        this._domInputControlTranslate();
  },
  _domInputControlTranslate: function () {
    /msie/i.test(navigator.userAgent)
      ? ((this._domInputControl.style.left = this._lastClickPosition.x + "px"),
        (this._domInputControl.style.top = this._lastClickPosition.y + "px"))
      : this._domInputControl.translates(
          this._lastClickPosition.x,
          this._lastClickPosition.y
        );
  },
  detachDelegateWithIME: function (a) {
    if (
      !this.impl ||
      !a ||
      this.impl._delegateWithIme !== a ||
      !a.canDetachWithIME()
    )
      return !1;
    this.impl._delegateWithIme = null;
    a.didDetachWithIME();
    cc._canvas.focus();
    return !0;
  },
  removeDelegate: function (a) {
    this.impl &&
      a &&
      -1 !== this.impl._delegateList.indexOf(a) &&
      (this.impl._delegateWithIme &&
        a === this.impl._delegateWithIme &&
        (this.impl._delegateWithIme = null),
      cc.arrayRemoveObject(this.impl._delegateList, a));
  },
  processKeycode: function (a) {
    32 > a
      ? a === cc.KEY.backspace
        ? this.dispatchDeleteBackward()
        : a === cc.KEY.enter && this.dispatchInsertText("\n", 1)
      : 255 > a && this.dispatchInsertText(String.fromCharCode(a), 1);
  },
});
cc.IMEDispatcher.Impl = cc.Class.extend({
  _delegateWithIme: null,
  _delegateList: null,
  ctor: function () {
    this._delegateList = [];
  },
  findDelegate: function (a) {
    for (var b = 0; b < this._delegateList.length; b++)
      if (this._delegateList[b] === a) return b;
    return null;
  },
});
cc.imeDispatcher = new cc.IMEDispatcher();
document.body
  ? cc.imeDispatcher.init()
  : window.addEventListener(
      "load",
      function () {
        cc.imeDispatcher.init();
      },
      !1
    );
cc.TextFieldDelegate = cc.Class.extend({
  onTextFieldAttachWithIME: function (a) {
    return !1;
  },
  onTextFieldDetachWithIME: function (a) {
    return !1;
  },
  onTextFieldInsertText: function (a, b, d) {
    return !1;
  },
  onTextFieldDeleteBackward: function (a, b, d) {
    return !1;
  },
  onDraw: function (a) {
    return !1;
  },
});
cc.TextFieldTTF = cc.LabelTTF.extend({
  delegate: null,
  colorSpaceHolder: null,
  _colorText: null,
  _lens: null,
  _inputText: "",
  _placeHolder: "",
  _charCount: 0,
  _className: "TextFieldTTF",
  ctor: function (a, b, d, e, f) {
    this.colorSpaceHolder = cc.color(127, 127, 127);
    this._colorText = cc.color(255, 255, 255, 255);
    cc.LabelTTF.prototype.ctor.call(this);
    void 0 !== f
      ? (this.initWithPlaceHolder("", b, d, e, f), a && this.setPlaceHolder(a))
      : void 0 === e &&
        void 0 !== d &&
        (this.initWithString("", b, d), a && this.setPlaceHolder(a));
  },
  onEnter: function () {
    cc.LabelTTF.prototype.onEnter.call(this);
    cc.imeDispatcher.addDelegate(this);
  },
  onExit: function () {
    cc.LabelTTF.prototype.onExit.call(this);
    cc.imeDispatcher.removeDelegate(this);
  },
  getDelegate: function () {
    return this.delegate;
  },
  setDelegate: function (a) {
    this.delegate = a;
  },
  getCharCount: function () {
    return this._charCount;
  },
  getColorSpaceHolder: function () {
    return cc.color(this.colorSpaceHolder);
  },
  setColorSpaceHolder: function (a) {
    this.colorSpaceHolder.r = a.r;
    this.colorSpaceHolder.g = a.g;
    this.colorSpaceHolder.b = a.b;
    this.colorSpaceHolder.a = cc.isUndefined(a.a) ? 255 : a.a;
    this._inputText.length || this.setColor(this.colorSpaceHolder);
  },
  setTextColor: function (a) {
    this._colorText.r = a.r;
    this._colorText.g = a.g;
    this._colorText.b = a.b;
    this._colorText.a = cc.isUndefined(a.a) ? 255 : a.a;
    this._inputText.length && this.setColor(this._colorText);
  },
  initWithPlaceHolder: function (a, b, d, e, f) {
    switch (arguments.length) {
      case 5:
        return (
          a && this.setPlaceHolder(a),
          this.initWithString(this._placeHolder, e, f, b, d)
        );
      case 3:
        return (
          a && this.setPlaceHolder(a),
          this.initWithString(this._placeHolder, arguments[1], arguments[2])
        );
      default:
        throw Error("Argument must be non-nil ");
    }
  },
  setString: function (a) {
    this._inputText = (a = String(a)) || "";
    this._inputText.length
      ? (cc.LabelTTF.prototype.setString.call(this, this._inputText),
        this.setColor(this._colorText))
      : (cc.LabelTTF.prototype.setString.call(this, this._placeHolder),
        this.setColor(this.colorSpaceHolder));
    cc._renderType === cc.game.RENDER_TYPE_CANVAS &&
      this._renderCmd._updateTexture();
    this._charCount = this._inputText.length;
  },
  getString: function () {
    return this._inputText;
  },
  setPlaceHolder: function (a) {
    this._placeHolder = a || "";
    this._inputText.length ||
      (cc.LabelTTF.prototype.setString.call(this, this._placeHolder),
      this.setColor(this.colorSpaceHolder));
  },
  getPlaceHolder: function () {
    return this._placeHolder;
  },
  draw: function (a) {
    a = a || cc._renderContext;
    (this.delegate && this.delegate.onDraw(this)) ||
      cc.LabelTTF.prototype.draw.call(this, a);
  },
  attachWithIME: function () {
    return cc.imeDispatcher.attachDelegateWithIME(this);
  },
  detachWithIME: function () {
    return cc.imeDispatcher.detachDelegateWithIME(this);
  },
  canAttachWithIME: function () {
    return this.delegate ? !this.delegate.onTextFieldAttachWithIME(this) : !0;
  },
  didAttachWithIME: function () {},
  canDetachWithIME: function () {
    return this.delegate ? !this.delegate.onTextFieldDetachWithIME(this) : !0;
  },
  didDetachWithIME: function () {},
  deleteBackward: function () {
    var a = this._inputText.length;
    0 === a ||
      (this.delegate &&
        this.delegate.onTextFieldDeleteBackward(
          this,
          this._inputText[a - 1],
          1
        )) ||
      (1 >= a
        ? ((this._inputText = ""),
          (this._charCount = 0),
          cc.LabelTTF.prototype.setString.call(this, this._placeHolder),
          this.setColor(this.colorSpaceHolder))
        : (this.string = this._inputText.substring(0, a - 1)));
  },
  removeDelegate: function () {
    cc.imeDispatcher.removeDelegate(this);
  },
  _tipMessage: "please enter your word:",
  setTipMessage: function (a) {
    null != a && (this._tipMessage = a);
  },
  getTipMessage: function () {
    return this._tipMessage;
  },
  insertText: function (a, b) {
    var d = a,
      e = d.indexOf("\n");
    -1 < e && (d = d.substring(0, e));
    if (0 < d.length) {
      if (
        this.delegate &&
        this.delegate.onTextFieldInsertText(this, d, d.length)
      )
        return;
      d = this._inputText + d;
      this._charCount = d.length;
      this.string = d;
    }
    -1 !== e &&
      ((this.delegate && this.delegate.onTextFieldInsertText(this, "\n", 1)) ||
        this.detachWithIME());
  },
  getContentText: function () {
    return this._inputText;
  },
  keyboardWillShow: function (a) {},
  keyboardDidShow: function (a) {},
  keyboardWillHide: function (a) {},
  keyboardDidHide: function (a) {},
});
_p = cc.TextFieldTTF.prototype;
cc.defineGetterSetter(_p, "charCount", _p.getCharCount);
cc.defineGetterSetter(_p, "placeHolder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.TextFieldTTF.create = function (a, b, d, e, f) {
  return new cc.TextFieldTTF(a, b, d, e, f);
};
cc._globalFontSize = cc.ITEM_SIZE;
cc._globalFontName = "Arial";
cc._globalFontNameRelease = !1;
cc.MenuItem = cc.Node.extend({
  _enabled: !1,
  _target: null,
  _callback: null,
  _isSelected: !1,
  _className: "MenuItem",
  ctor: function (a, b) {
    var d = cc.Node.prototype;
    d.ctor.call(this);
    this._callback = this._target = null;
    this._enabled = this._isSelected = !1;
    d.setAnchorPoint.call(this, 0.5, 0.5);
    this._target = b || null;
    if ((this._callback = a || null)) this._enabled = !0;
  },
  isSelected: function () {
    return this._isSelected;
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  setTarget: function (a, b) {
    this._target = b;
    this._callback = a;
  },
  isEnabled: function () {
    return this._enabled;
  },
  setEnabled: function (a) {
    this._enabled = a;
  },
  initWithCallback: function (a, b) {
    this.anchorY = this.anchorX = 0.5;
    this._target = b;
    this._callback = a;
    this._enabled = !0;
    this._isSelected = !1;
    return !0;
  },
  rect: function () {
    var a = this._position,
      b = this._contentSize,
      d = this._anchorPoint;
    return cc.rect(
      a.x - b.width * d.x,
      a.y - b.height * d.y,
      b.width,
      b.height
    );
  },
  selected: function () {
    this._isSelected = !0;
  },
  unselected: function () {
    this._isSelected = !1;
  },
  setCallback: function (a, b) {
    this._target = b;
    this._callback = a;
  },
  activate: function () {
    if (this._enabled) {
      var a = this._target,
        b = this._callback;
      if (b)
        if (a && cc.isString(b)) a[b](this);
        else a && cc.isFunction(b) ? b.call(a, this) : b(this);
    }
  },
});
_p = cc.MenuItem.prototype;
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.MenuItem.create = function (a, b) {
  return new cc.MenuItem(a, b);
};
cc.MenuItemLabel = cc.MenuItem.extend({
  _disabledColor: null,
  _label: null,
  _originalScale: 0,
  _colorBackup: null,
  ctor: function (a, b, d) {
    cc.MenuItem.prototype.ctor.call(this, b, d);
    this._colorBackup = this._label = this._disabledColor = null;
    a &&
      ((this._originalScale = 1),
      (this._colorBackup = cc.color.WHITE),
      (this._disabledColor = cc.color(126, 126, 126)),
      this.setLabel(a),
      a.textureLoaded &&
        !a.textureLoaded() &&
        a.addEventListener(
          "load",
          function (a) {
            this.width = a.width;
            this.height = a.height;
            this.parent instanceof cc.Menu && this.parent.updateAlign();
          },
          this
        ),
      this.setCascadeColorEnabled(!0),
      this.setCascadeOpacityEnabled(!0));
  },
  getDisabledColor: function () {
    return this._disabledColor;
  },
  setDisabledColor: function (a) {
    this._disabledColor = a;
  },
  getLabel: function () {
    return this._label;
  },
  setLabel: function (a) {
    a &&
      (this.addChild(a),
      (a.anchorX = 0),
      (a.anchorY = 0),
      (this.width = a.width),
      (this.height = a.height),
      a.setCascadeColorEnabled(!0));
    this._label && this.removeChild(this._label, !0);
    this._label = a;
  },
  setEnabled: function (a) {
    this._enabled !== a &&
      (a
        ? this.setColor(this._colorBackup)
        : ((this._colorBackup = this.color),
          this.setColor(this._disabledColor)));
    cc.MenuItem.prototype.setEnabled.call(this, a);
  },
  initWithLabel: function (a, b, d) {
    this.initWithCallback(b, d);
    this._originalScale = 1;
    this._colorBackup = cc.color.WHITE;
    this._disabledColor = cc.color(126, 126, 126);
    this.setLabel(a);
    this.setCascadeColorEnabled(!0);
    this.setCascadeOpacityEnabled(!0);
    return !0;
  },
  setString: function (a) {
    this._label.string = a;
    this.width = this._label.width;
    this.height = this._label.height;
  },
  getString: function () {
    return this._label.string;
  },
  activate: function () {
    this._enabled &&
      (this.stopAllActions(),
      (this.scale = this._originalScale),
      cc.MenuItem.prototype.activate.call(this));
  },
  selected: function () {
    if (this._enabled) {
      cc.MenuItem.prototype.selected.call(this);
      var a = this.getActionByTag(cc.ZOOM_ACTION_TAG);
      a ? this.stopAction(a) : (this._originalScale = this.scale);
      a = cc.scaleTo(0.1, 1.2 * this._originalScale);
      a.setTag(cc.ZOOM_ACTION_TAG);
      this.runAction(a);
    }
  },
  unselected: function () {
    if (this._enabled) {
      cc.MenuItem.prototype.unselected.call(this);
      this.stopActionByTag(cc.ZOOM_ACTION_TAG);
      var a = cc.scaleTo(0.1, this._originalScale);
      a.setTag(cc.ZOOM_ACTION_TAG);
      this.runAction(a);
    }
  },
});
_p = cc.MenuItemLabel.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(
  _p,
  "disabledColor",
  _p.getDisabledColor,
  _p.setDisabledColor
);
cc.defineGetterSetter(_p, "label", _p.getLabel, _p.setLabel);
cc.MenuItemLabel.create = function (a, b, d) {
  return new cc.MenuItemLabel(a, b, d);
};
cc.MenuItemAtlasFont = cc.MenuItemLabel.extend({
  ctor: function (a, b, d, e, f, g, h) {
    var k;
    a && 0 < a.length && (k = new cc.LabelAtlas(a, b, d, e, f));
    cc.MenuItemLabel.prototype.ctor.call(this, k, g, h);
  },
  initWithString: function (a, b, d, e, f, g, h) {
    if (!a || 0 === a.length)
      throw Error(
        "cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0"
      );
    var k = new cc.LabelAtlas();
    k.initWithString(a, b, d, e, f);
    this.initWithLabel(k, g, h);
    return !0;
  },
});
cc.MenuItemAtlasFont.create = function (a, b, d, e, f, g, h) {
  return new cc.MenuItemAtlasFont(a, b, d, e, f, g, h);
};
cc.MenuItemFont = cc.MenuItemLabel.extend({
  _fontSize: null,
  _fontName: null,
  ctor: function (a, b, d) {
    var e;
    a && 0 < a.length
      ? ((this._fontName = cc._globalFontName),
        (this._fontSize = cc._globalFontSize),
        (e = new cc.LabelTTF(a, this._fontName, this._fontSize)))
      : ((this._fontSize = 0), (this._fontName = ""));
    cc.MenuItemLabel.prototype.ctor.call(this, e, b, d);
  },
  initWithString: function (a, b, d) {
    if (!a || 0 === a.length)
      throw Error(
        "Value should be non-null and its length should be greater than 0"
      );
    this._fontName = cc._globalFontName;
    this._fontSize = cc._globalFontSize;
    a = new cc.LabelTTF(a, this._fontName, this._fontSize);
    this.initWithLabel(a, b, d);
    return !0;
  },
  setFontSize: function (a) {
    this._fontSize = a;
    this._recreateLabel();
  },
  getFontSize: function () {
    return this._fontSize;
  },
  setFontName: function (a) {
    this._fontName = a;
    this._recreateLabel();
  },
  getFontName: function () {
    return this._fontName;
  },
  _recreateLabel: function () {
    var a = new cc.LabelTTF(this._label.string, this._fontName, this._fontSize);
    this.setLabel(a);
  },
});
cc.MenuItemFont.setFontSize = function (a) {
  cc._globalFontSize = a;
};
cc.MenuItemFont.fontSize = function () {
  return cc._globalFontSize;
};
cc.MenuItemFont.setFontName = function (a) {
  cc._globalFontNameRelease && (cc._globalFontName = "");
  cc._globalFontName = a;
  cc._globalFontNameRelease = !0;
};
_p = cc.MenuItemFont.prototype;
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.MenuItemFont.fontName = function () {
  return cc._globalFontName;
};
cc.MenuItemFont.create = function (a, b, d) {
  return new cc.MenuItemFont(a, b, d);
};
cc.MenuItemSprite = cc.MenuItem.extend({
  _normalImage: null,
  _selectedImage: null,
  _disabledImage: null,
  ctor: function (a, b, d, e, f) {
    cc.MenuItem.prototype.ctor.call(this);
    this._disabledImage = this._selectedImage = this._normalImage = null;
    this._loader = new cc.Sprite.LoadManager();
    if (void 0 !== a) {
      b = b || null;
      var g, h, k;
      void 0 !== f
        ? ((g = d), (k = e), (h = f))
        : void 0 !== e && cc.isFunction(e)
        ? ((g = d), (k = e))
        : void 0 !== e && cc.isFunction(d)
        ? ((h = e), (k = d), (g = null))
        : void 0 === d && (g = null);
      this._loader.clear();
      if (a.textureLoaded && !a.textureLoaded())
        return (
          this._loader.once(
            a,
            function () {
              this.initWithNormalSprite(a, b, g, k, h);
            },
            this
          ),
          !1
        );
      this.initWithNormalSprite(a, b, g, k, h);
      return !0;
    }
  },
  getNormalImage: function () {
    return this._normalImage;
  },
  setNormalImage: function (a) {
    this._normalImage !== a &&
      (a &&
        (this.addChild(a, 0, cc.NORMAL_TAG), (a.anchorX = 0), (a.anchorY = 0)),
      this._normalImage && this.removeChild(this._normalImage, !0),
      (this._normalImage = a)) &&
      ((this.width = this._normalImage.width),
      (this.height = this._normalImage.height),
      this._updateImagesVisibility(),
      a.textureLoaded &&
        !a.textureLoaded() &&
        a.addEventListener(
          "load",
          function (a) {
            this.width = a.width;
            this.height = a.height;
            this.parent instanceof cc.Menu && this.parent.updateAlign();
          },
          this
        ));
  },
  getSelectedImage: function () {
    return this._selectedImage;
  },
  setSelectedImage: function (a) {
    this._selectedImage !== a &&
      (a &&
        (this.addChild(a, 0, cc.SELECTED_TAG),
        (a.anchorX = 0),
        (a.anchorY = 0)),
      this._selectedImage && this.removeChild(this._selectedImage, !0),
      (this._selectedImage = a),
      this._updateImagesVisibility());
  },
  getDisabledImage: function () {
    return this._disabledImage;
  },
  setDisabledImage: function (a) {
    this._disabledImage !== a &&
      (a &&
        (this.addChild(a, 0, cc.DISABLE_TAG), (a.anchorX = 0), (a.anchorY = 0)),
      this._disabledImage && this.removeChild(this._disabledImage, !0),
      (this._disabledImage = a),
      this._updateImagesVisibility());
  },
  initWithNormalSprite: function (a, b, d, e, f) {
    this._loader.clear();
    if (a.textureLoaded && !a.textureLoaded())
      return (
        this._loader.once(
          a,
          function () {
            this.initWithNormalSprite(a, b, d, e, f);
          },
          this
        ),
        !1
      );
    this.initWithCallback(e, f);
    this.setNormalImage(a);
    this.setSelectedImage(b);
    this.setDisabledImage(d);
    var g = this._normalImage;
    g && ((this.width = g.width), (this.height = g.height));
    this.setCascadeColorEnabled(!0);
    this.setCascadeOpacityEnabled(!0);
    return !0;
  },
  selected: function () {
    cc.MenuItem.prototype.selected.call(this);
    this._normalImage &&
      (this._disabledImage && (this._disabledImage.visible = !1),
      this._selectedImage
        ? ((this._normalImage.visible = !1), (this._selectedImage.visible = !0))
        : (this._normalImage.visible = !0));
  },
  unselected: function () {
    cc.MenuItem.prototype.unselected.call(this);
    this._normalImage &&
      ((this._normalImage.visible = !0),
      this._selectedImage && (this._selectedImage.visible = !1),
      this._disabledImage && (this._disabledImage.visible = !1));
  },
  setEnabled: function (a) {
    this._enabled !== a &&
      (cc.MenuItem.prototype.setEnabled.call(this, a),
      this._updateImagesVisibility());
  },
  _updateImagesVisibility: function () {
    var a = this._normalImage,
      b = this._selectedImage,
      d = this._disabledImage;
    this._enabled
      ? (a && (a.visible = !0), b && (b.visible = !1), d && (d.visible = !1))
      : d
      ? (a && (a.visible = !1), b && (b.visible = !1), d && (d.visible = !0))
      : (a && (a.visible = !0), b && (b.visible = !1));
  },
});
_p = cc.MenuItemSprite.prototype;
cc.defineGetterSetter(_p, "normalImage", _p.getNormalImage, _p.setNormalImage);
cc.defineGetterSetter(
  _p,
  "selectedImage",
  _p.getSelectedImage,
  _p.setSelectedImage
);
cc.defineGetterSetter(
  _p,
  "disabledImage",
  _p.getDisabledImage,
  _p.setDisabledImage
);
cc.MenuItemSprite.create = function (a, b, d, e, f) {
  return new cc.MenuItemSprite(a, b, d, e, f || void 0);
};
cc.MenuItemImage = cc.MenuItemSprite.extend({
  ctor: function (a, b, d, e, f) {
    var g = null,
      h = null,
      k = null,
      m = null,
      n = null;
    void 0 === a || null === a
      ? cc.MenuItemSprite.prototype.ctor.call(this)
      : ((g = new cc.Sprite(a)),
        b && (h = new cc.Sprite(b)),
        void 0 === e
          ? (m = d)
          : void 0 === f
          ? ((m = d), (n = e))
          : f && ((k = new cc.Sprite(d)), (m = e), (n = f)),
        cc.MenuItemSprite.prototype.ctor.call(this, g, h, k, m, n));
  },
  setNormalSpriteFrame: function (a) {
    this.setNormalImage(new cc.Sprite(a));
  },
  setSelectedSpriteFrame: function (a) {
    this.setSelectedImage(new cc.Sprite(a));
  },
  setDisabledSpriteFrame: function (a) {
    this.setDisabledImage(new cc.Sprite(a));
  },
  initWithNormalImage: function (a, b, d, e, f) {
    var g = null,
      h = null,
      k = null;
    a && (g = new cc.Sprite(a));
    b && (h = new cc.Sprite(b));
    d && (k = new cc.Sprite(d));
    return this.initWithNormalSprite(g, h, k, e, f);
  },
});
cc.MenuItemImage.create = function (a, b, d, e, f) {
  return new cc.MenuItemImage(a, b, d, e, f);
};
cc.MenuItemToggle = cc.MenuItem.extend({
  subItems: null,
  _selectedIndex: 0,
  _opacity: null,
  _color: null,
  ctor: function () {
    cc.MenuItem.prototype.ctor.call(this);
    this._selectedIndex = 0;
    this.subItems = [];
    this._opacity = 0;
    this._color = cc.color.WHITE;
    0 < arguments.length &&
      this.initWithItems(Array.prototype.slice.apply(arguments));
  },
  getOpacity: function () {
    return this._opacity;
  },
  setOpacity: function (a) {
    this._opacity = a;
    if (this.subItems && 0 < this.subItems.length)
      for (var b = 0; b < this.subItems.length; b++)
        this.subItems[b].opacity = a;
    this._color.a = a;
  },
  getColor: function () {
    var a = this._color;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  setColor: function (a) {
    var b = this._color;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    if (this.subItems && 0 < this.subItems.length)
      for (b = 0; b < this.subItems.length; b++) this.subItems[b].setColor(a);
    void 0 === a.a || a.a_undefined || this.setOpacity(a.a);
  },
  getSelectedIndex: function () {
    return this._selectedIndex;
  },
  setSelectedIndex: function (a) {
    if (a !== this._selectedIndex) {
      this._selectedIndex = a;
      (a = this.getChildByTag(cc.CURRENT_ITEM)) && a.removeFromParent(!1);
      a = this.subItems[this._selectedIndex];
      this.addChild(a, 0, cc.CURRENT_ITEM);
      var b = a.width,
        d = a.height;
      this.width = b;
      this.height = d;
      a.setPosition(b / 2, d / 2);
    }
  },
  getSubItems: function () {
    return this.subItems;
  },
  setSubItems: function (a) {
    this.subItems = a;
  },
  initWithItems: function (a) {
    var b = a.length;
    cc.isFunction(a[a.length - 2])
      ? (this.initWithCallback(a[a.length - 2], a[a.length - 1]), (b -= 2))
      : cc.isFunction(a[a.length - 1])
      ? (this.initWithCallback(a[a.length - 1], null), (b -= 1))
      : this.initWithCallback(null, null);
    for (var d = this.subItems, e = (d.length = 0); e < b; e++)
      a[e] && d.push(a[e]);
    this._selectedIndex = cc.UINT_MAX;
    this.setSelectedIndex(0);
    this.setCascadeColorEnabled(!0);
    this.setCascadeOpacityEnabled(!0);
    return !0;
  },
  addSubItem: function (a) {
    this.subItems.push(a);
  },
  activate: function () {
    this._enabled &&
      this.setSelectedIndex((this._selectedIndex + 1) % this.subItems.length);
    cc.MenuItem.prototype.activate.call(this);
  },
  selected: function () {
    cc.MenuItem.prototype.selected.call(this);
    this.subItems[this._selectedIndex].selected();
  },
  unselected: function () {
    cc.MenuItem.prototype.unselected.call(this);
    this.subItems[this._selectedIndex].unselected();
  },
  setEnabled: function (a) {
    if (this._enabled !== a) {
      cc.MenuItem.prototype.setEnabled.call(this, a);
      var b = this.subItems;
      if (b && 0 < b.length)
        for (var d = 0; d < b.length; d++) b[d].enabled = a;
    }
  },
  selectedItem: function () {
    return this.subItems[this._selectedIndex];
  },
  getSelectedItem: function () {
    return this.subItems[this._selectedIndex];
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.setSelectedIndex(this._selectedIndex);
  },
});
_p = cc.MenuItemToggle.prototype;
cc.defineGetterSetter(
  _p,
  "selectedIndex",
  _p.getSelectedIndex,
  _p.setSelectedIndex
);
cc.MenuItemToggle.create = function () {
  0 < arguments.length &&
    null == arguments[arguments.length - 1] &&
    cc.log("parameters should not be ending with null in Javascript");
  var a = new cc.MenuItemToggle();
  a.initWithItems(Array.prototype.slice.apply(arguments));
  return a;
};
cc.MENU_STATE_WAITING = 0;
cc.MENU_STATE_TRACKING_TOUCH = 1;
cc.MENU_HANDLER_PRIORITY = -128;
cc.DEFAULT_PADDING = 5;
cc.Menu = cc.Layer.extend({
  enabled: !1,
  _selectedItem: null,
  _state: -1,
  _touchListener: null,
  _className: "Menu",
  ctor: function (a) {
    cc.Layer.prototype.ctor.call(this);
    this._color = cc.color.WHITE;
    this.enabled = !1;
    this._opacity = 255;
    this._selectedItem = null;
    this._state = -1;
    this._touchListener = cc.EventListener.create({
      event: cc.EventListener.TOUCH_ONE_BY_ONE,
      swallowTouches: !0,
      onTouchBegan: this._onTouchBegan,
      onTouchMoved: this._onTouchMoved,
      onTouchEnded: this._onTouchEnded,
      onTouchCancelled: this._onTouchCancelled,
    });
    var b = arguments.length,
      d;
    if (a instanceof Array) d = a;
    else if (0 === b) d = [];
    else if (0 < b) {
      d = [];
      for (var e = 0; e < b; e++) arguments[e] && d.push(arguments[e]);
    }
    this.initWithArray(d);
  },
  onEnter: function () {
    var a = this._touchListener;
    a._isRegistered() || cc.eventManager.addListener(a, this);
    cc.Node.prototype.onEnter.call(this);
  },
  isEnabled: function () {
    return this.enabled;
  },
  setEnabled: function (a) {
    this.enabled = a;
  },
  initWithItems: function (a) {
    var b = [];
    if (a) for (var d = 0; d < a.length; d++) a[d] && b.push(a[d]);
    return this.initWithArray(b);
  },
  initWithArray: function (a) {
    if (cc.Layer.prototype.init.call(this)) {
      this.enabled = !0;
      var b = cc.winSize;
      this.setPosition(b.width / 2, b.height / 2);
      this.setContentSize(b);
      this.setAnchorPoint(0.5, 0.5);
      this.ignoreAnchorPointForPosition(!0);
      if (a) for (b = 0; b < a.length; b++) this.addChild(a[b], b);
      this._selectedItem = null;
      this._state = cc.MENU_STATE_WAITING;
      return (this.cascadeOpacity = this.cascadeColor = !0);
    }
    return !1;
  },
  addChild: function (a, b, d) {
    if (!(a instanceof cc.MenuItem))
      throw Error(
        "cc.Menu.addChild() : Menu only supports MenuItem objects as children"
      );
    cc.Layer.prototype.addChild.call(this, a, b, d);
  },
  updateAlign: function () {
    switch (this._align) {
      case "vertically":
        this.alignItemsVertically();
        break;
      case "horizontally":
        this.alignItemsHorizontally();
    }
  },
  alignItemsVertically: function () {
    this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING);
  },
  alignItemsVerticallyWithPadding: function (a) {
    this._align = "vertically";
    var b = -a,
      d = this._children,
      e,
      f,
      g,
      h;
    if (d && 0 < d.length) {
      f = 0;
      for (e = d.length; f < e; f++) b += d[f].height * d[f].scaleY + a;
      var k = b / 2;
      f = 0;
      for (e = d.length; f < e; f++)
        (h = d[f]),
          (g = h.height),
          (b = h.scaleY),
          h.setPosition(0, k - (g * b) / 2),
          (k -= g * b + a);
    }
  },
  alignItemsHorizontally: function () {
    this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING);
  },
  alignItemsHorizontallyWithPadding: function (a) {
    this._align = "horizontally";
    var b = -a,
      d = this._children,
      e,
      f,
      g,
      h;
    if (d && 0 < d.length) {
      e = 0;
      for (f = d.length; e < f; e++) b += d[e].width * d[e].scaleX + a;
      var k = -b / 2;
      e = 0;
      for (f = d.length; e < f; e++)
        (h = d[e]),
          (b = h.scaleX),
          (g = d[e].width),
          h.setPosition(k + (g * b) / 2, 0),
          (k += g * b + a);
    }
  },
  alignItemsInColumns: function () {
    0 < arguments.length &&
      null == arguments[arguments.length - 1] &&
      cc.log("parameters should not be ending with null in Javascript");
    var a,
      b = [];
    for (a = 0; a < arguments.length; a++) b.push(arguments[a]);
    var d = -5,
      e = 0,
      f = 0,
      g = 0,
      h,
      k,
      m,
      n = this._children;
    if (n && 0 < n.length)
      for (a = 0, m = n.length; a < m; a++)
        e >= b.length ||
          !(h = b[e]) ||
          ((k = n[a].height),
          (f = f >= k || isNaN(k) ? f : k),
          ++g,
          g >= h && ((d += f + 5), (f = g = 0), ++e));
    var p = cc.director.getWinSize(),
      r = (h = f = e = 0),
      s = 0,
      d = d / 2;
    if (n && 0 < n.length)
      for (a = 0, m = n.length; a < m; a++) {
        var u = n[a];
        0 === h && ((h = b[e]), (s = r = p.width / (1 + h)));
        k = u._getHeight();
        f = f >= k || isNaN(k) ? f : k;
        u.setPosition(s - p.width / 2, d - k / 2);
        s += r;
        ++g;
        g >= h && ((d -= f + 5), (f = h = g = 0), ++e);
      }
  },
  alignItemsInRows: function () {
    0 < arguments.length &&
      null == arguments[arguments.length - 1] &&
      cc.log("parameters should not be ending with null in Javascript");
    var a,
      b = [];
    for (a = 0; a < arguments.length; a++) b.push(arguments[a]);
    var d = [],
      e = [],
      f = -10,
      g = -5,
      h = 0,
      k = 0,
      m = 0,
      n,
      p,
      r,
      s,
      u = this._children;
    if (u && 0 < u.length)
      for (a = 0, r = u.length; a < r; a++)
        ((p = u[a]), h >= b.length || !(n = b[h])) ||
          ((s = p.width),
          (k = k >= s || isNaN(s) ? k : s),
          (g += p.height + 5),
          ++m,
          m >= n &&
            (d.push(k), e.push(g), (f += k + 10), (k = m = 0), (g = -5), ++h));
    g = cc.director.getWinSize();
    n = k = h = 0;
    var f = -f / 2,
      v = 0;
    if (u && 0 < u.length)
      for (a = 0, r = u.length; a < r; a++)
        (p = u[a]),
          0 === n && ((n = b[h]), (v = e[h])),
          (s = p._getWidth()),
          (k = k >= s || isNaN(s) ? k : s),
          p.setPosition(f + d[h] / 2, v - g.height / 2),
          (v -= p.height + 10),
          ++m,
          m >= n && ((f += k + 5), (k = n = m = 0), ++h);
  },
  removeChild: function (a, b) {
    null != a &&
      (a instanceof cc.MenuItem
        ? (this._selectedItem === a && (this._selectedItem = null),
          cc.Node.prototype.removeChild.call(this, a, b))
        : cc.log(
            "cc.Menu.removeChild():Menu only supports MenuItem objects as children"
          ));
  },
  _onTouchBegan: function (a, b) {
    var d = b.getCurrentTarget();
    if (d._state !== cc.MENU_STATE_WAITING || !d._visible || !d.enabled)
      return !1;
    for (var e = d.parent; null != e; e = e.parent)
      if (!e.isVisible()) return !1;
    d._selectedItem = d._itemForTouch(a);
    return d._selectedItem
      ? ((d._state = cc.MENU_STATE_TRACKING_TOUCH),
        d._selectedItem.selected(),
        d._selectedItem.setNodeDirty(),
        !0)
      : !1;
  },
  _onTouchEnded: function (a, b) {
    var d = b.getCurrentTarget();
    d._state !== cc.MENU_STATE_TRACKING_TOUCH
      ? cc.log("cc.Menu.onTouchEnded(): invalid state")
      : (d._selectedItem &&
          (d._selectedItem.unselected(),
          d._selectedItem.setNodeDirty(),
          d._selectedItem.activate()),
        (d._state = cc.MENU_STATE_WAITING));
  },
  _onTouchCancelled: function (a, b) {
    var d = b.getCurrentTarget();
    d._state !== cc.MENU_STATE_TRACKING_TOUCH
      ? cc.log("cc.Menu.onTouchCancelled(): invalid state")
      : (d._selectedItem &&
          (d._selectedItem.unselected(), d._selectedItem.setNodeDirty()),
        (d._state = cc.MENU_STATE_WAITING));
  },
  _onTouchMoved: function (a, b) {
    var d = b.getCurrentTarget();
    if (d._state !== cc.MENU_STATE_TRACKING_TOUCH)
      cc.log("cc.Menu.onTouchMoved(): invalid state");
    else {
      var e = d._itemForTouch(a);
      e !== d._selectedItem &&
        (d._selectedItem &&
          (d._selectedItem.unselected(), d._selectedItem.setNodeDirty()),
        (d._selectedItem = e),
        d._selectedItem &&
          (d._selectedItem.selected(), d._selectedItem.setNodeDirty()));
    }
  },
  onExit: function () {
    this._state === cc.MENU_STATE_TRACKING_TOUCH &&
      (this._selectedItem &&
        (this._selectedItem.unselected(), (this._selectedItem = null)),
      (this._state = cc.MENU_STATE_WAITING));
    cc.Node.prototype.onExit.call(this);
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
  _itemForTouch: function (a) {
    a = a.getLocation();
    var b = this._children,
      d;
    if (b && 0 < b.length)
      for (var e = b.length - 1; 0 <= e; e--)
        if (((d = b[e]), d.isVisible() && d.isEnabled())) {
          var f = d.convertToNodeSpace(a),
            g = d.rect();
          g.x = 0;
          g.y = 0;
          if (cc.rectContainsPoint(g, f)) return d;
        }
    return null;
  },
});
_p = cc.Menu.prototype;
cc.Menu.create = function (a) {
  var b = arguments.length;
  0 < b &&
    null == arguments[b - 1] &&
    cc.log("parameters should not be ending with null in Javascript");
  return 0 === b
    ? new cc.Menu()
    : 1 === b
    ? new cc.Menu(a)
    : new cc.Menu(Array.prototype.slice.call(arguments, 0));
};
cc.Codec.GZip = function (a) {
  this.data = a;
  this.debug = !1;
  this.gpflags = void 0;
  this.files = 0;
  this.unzipped = [];
  this.buf32k = Array(32768);
  this.bIdx = 0;
  this.modeZIP = !1;
  this.bytepos = 0;
  this.bb = 1;
  this.bits = 0;
  this.nameBuf = [];
  this.fileout = void 0;
  this.literalTree = Array(cc.Codec.GZip.LITERALS);
  this.distanceTree = Array(32);
  this.treepos = 0;
  this.Places = null;
  this.len = 0;
  this.fpos = Array(17);
  this.fpos[0] = 0;
  this.fmax = this.flens = void 0;
};
cc.Codec.GZip.gunzip = function (a) {
  return new cc.Codec.GZip(a).gunzip()[0][0];
};
cc.Codec.GZip.HufNode = function () {
  this.b1 = this.b0 = 0;
  this.jump = null;
  this.jumppos = -1;
};
cc.Codec.GZip.LITERALS = 288;
cc.Codec.GZip.NAMEMAX = 256;
cc.Codec.GZip.bitReverse = [
  0,
  128,
  64,
  192,
  32,
  160,
  96,
  224,
  16,
  144,
  80,
  208,
  48,
  176,
  112,
  240,
  8,
  136,
  72,
  200,
  40,
  168,
  104,
  232,
  24,
  152,
  88,
  216,
  56,
  184,
  120,
  248,
  4,
  132,
  68,
  196,
  36,
  164,
  100,
  228,
  20,
  148,
  84,
  212,
  52,
  180,
  116,
  244,
  12,
  140,
  76,
  204,
  44,
  172,
  108,
  236,
  28,
  156,
  92,
  220,
  60,
  188,
  124,
  252,
  2,
  130,
  66,
  194,
  34,
  162,
  98,
  226,
  18,
  146,
  82,
  210,
  50,
  178,
  114,
  242,
  10,
  138,
  74,
  202,
  42,
  170,
  106,
  234,
  26,
  154,
  90,
  218,
  58,
  186,
  122,
  250,
  6,
  134,
  70,
  198,
  38,
  166,
  102,
  230,
  22,
  150,
  86,
  214,
  54,
  182,
  118,
  246,
  14,
  142,
  78,
  206,
  46,
  174,
  110,
  238,
  30,
  158,
  94,
  222,
  62,
  190,
  126,
  254,
  1,
  129,
  65,
  193,
  33,
  161,
  97,
  225,
  17,
  145,
  81,
  209,
  49,
  177,
  113,
  241,
  9,
  137,
  73,
  201,
  41,
  169,
  105,
  233,
  25,
  153,
  89,
  217,
  57,
  185,
  121,
  249,
  5,
  133,
  69,
  197,
  37,
  165,
  101,
  229,
  21,
  149,
  85,
  213,
  53,
  181,
  117,
  245,
  13,
  141,
  77,
  205,
  45,
  173,
  109,
  237,
  29,
  157,
  93,
  221,
  61,
  189,
  125,
  253,
  3,
  131,
  67,
  195,
  35,
  163,
  99,
  227,
  19,
  147,
  83,
  211,
  51,
  179,
  115,
  243,
  11,
  139,
  75,
  203,
  43,
  171,
  107,
  235,
  27,
  155,
  91,
  219,
  59,
  187,
  123,
  251,
  7,
  135,
  71,
  199,
  39,
  167,
  103,
  231,
  23,
  151,
  87,
  215,
  55,
  183,
  119,
  247,
  15,
  143,
  79,
  207,
  47,
  175,
  111,
  239,
  31,
  159,
  95,
  223,
  63,
  191,
  127,
  255,
];
cc.Codec.GZip.cplens = [
  3,
  4,
  5,
  6,
  7,
  8,
  9,
  10,
  11,
  13,
  15,
  17,
  19,
  23,
  27,
  31,
  35,
  43,
  51,
  59,
  67,
  83,
  99,
  115,
  131,
  163,
  195,
  227,
  258,
  0,
  0,
];
cc.Codec.GZip.cplext = [
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  1,
  1,
  1,
  1,
  2,
  2,
  2,
  2,
  3,
  3,
  3,
  3,
  4,
  4,
  4,
  4,
  5,
  5,
  5,
  5,
  0,
  99,
  99,
];
cc.Codec.GZip.cpdist = [
  1,
  2,
  3,
  4,
  5,
  7,
  9,
  13,
  17,
  25,
  33,
  49,
  65,
  97,
  129,
  193,
  257,
  385,
  513,
  769,
  1025,
  1537,
  2049,
  3073,
  4097,
  6145,
  8193,
  12289,
  16385,
  24577,
];
cc.Codec.GZip.cpdext = [
  0,
  0,
  0,
  0,
  1,
  1,
  2,
  2,
  3,
  3,
  4,
  4,
  5,
  5,
  6,
  6,
  7,
  7,
  8,
  8,
  9,
  9,
  10,
  10,
  11,
  11,
  12,
  12,
  13,
  13,
];
cc.Codec.GZip.border = [
  16,
  17,
  18,
  0,
  8,
  7,
  9,
  6,
  10,
  5,
  11,
  4,
  12,
  3,
  13,
  2,
  14,
  1,
  15,
];
cc.Codec.GZip.prototype.gunzip = function () {
  this.outputArr = [];
  this.nextFile();
  return this.unzipped;
};
cc.Codec.GZip.prototype.readByte = function () {
  this.bits += 8;
  return this.bytepos < this.data.length
    ? this.data.charCodeAt(this.bytepos++)
    : -1;
};
cc.Codec.GZip.prototype.byteAlign = function () {
  this.bb = 1;
};
cc.Codec.GZip.prototype.readBit = function () {
  var a;
  this.bits++;
  a = this.bb & 1;
  this.bb >>= 1;
  0 === this.bb &&
    ((this.bb = this.readByte()),
    (a = this.bb & 1),
    (this.bb = (this.bb >> 1) | 128));
  return a;
};
cc.Codec.GZip.prototype.readBits = function (a) {
  for (var b = 0, d = a; d--; ) b = (b << 1) | this.readBit();
  a && (b = cc.Codec.GZip.bitReverse[b] >> (8 - a));
  return b;
};
cc.Codec.GZip.prototype.flushBuffer = function () {
  this.bIdx = 0;
};
cc.Codec.GZip.prototype.addBuffer = function (a) {
  this.buf32k[this.bIdx++] = a;
  this.outputArr.push(String.fromCharCode(a));
  32768 === this.bIdx && (this.bIdx = 0);
};
cc.Codec.GZip.prototype.IsPat = function () {
  for (;;) {
    if (this.fpos[this.len] >= this.fmax) return -1;
    if (this.flens[this.fpos[this.len]] === this.len)
      return this.fpos[this.len]++;
    this.fpos[this.len]++;
  }
};
cc.Codec.GZip.prototype.Rec = function () {
  var a = this.Places[this.treepos],
    b;
  if (17 === this.len) return -1;
  this.treepos++;
  this.len++;
  b = this.IsPat();
  if (0 <= b) a.b0 = b;
  else if (((a.b0 = 32768), this.Rec())) return -1;
  b = this.IsPat();
  if (0 <= b) (a.b1 = b), (a.jump = null);
  else if (
    ((a.b1 = 32768),
    (a.jump = this.Places[this.treepos]),
    (a.jumppos = this.treepos),
    this.Rec())
  )
    return -1;
  this.len--;
  return 0;
};
cc.Codec.GZip.prototype.CreateTree = function (a, b, d, e) {
  this.Places = a;
  this.treepos = 0;
  this.flens = d;
  this.fmax = b;
  for (a = 0; 17 > a; a++) this.fpos[a] = 0;
  this.len = 0;
  return this.Rec() ? -1 : 0;
};
cc.Codec.GZip.prototype.DecodeValue = function (a) {
  for (var b, d, e = 0, f = a[e]; ; )
    if ((b = this.readBit())) {
      if (!(f.b1 & 32768)) return f.b1;
      f = f.jump;
      b = a.length;
      for (d = 0; d < b; d++)
        if (a[d] === f) {
          e = d;
          break;
        }
    } else {
      if (!(f.b0 & 32768)) return f.b0;
      e++;
      f = a[e];
    }
  return -1;
};
cc.Codec.GZip.prototype.DeflateLoop = function () {
  var a, b, d, e, f;
  do
    if (((a = this.readBit()), (d = this.readBits(2)), 0 === d))
      for (
        this.byteAlign(),
          d = this.readByte(),
          d |= this.readByte() << 8,
          b = this.readByte(),
          b |= this.readByte() << 8,
          (d ^ ~b) & 65535 && document.write("BlockLen checksum mismatch\n");
        d--;

      )
        (b = this.readByte()), this.addBuffer(b);
    else if (1 === d)
      for (;;)
        if (
          ((d = cc.Codec.GZip.bitReverse[this.readBits(7)] >> 1),
          23 < d
            ? ((d = (d << 1) | this.readBit()),
              199 < d
                ? ((d -= 128), (d = (d << 1) | this.readBit()))
                : ((d -= 48), 143 < d && (d += 136)))
            : (d += 256),
          256 > d)
        )
          this.addBuffer(d);
        else if (256 === d) break;
        else {
          var g;
          d -= 257;
          f = this.readBits(cc.Codec.GZip.cplext[d]) + cc.Codec.GZip.cplens[d];
          d = cc.Codec.GZip.bitReverse[this.readBits(5)] >> 3;
          8 < cc.Codec.GZip.cpdext[d]
            ? ((g = this.readBits(8)),
              (g |= this.readBits(cc.Codec.GZip.cpdext[d] - 8) << 8))
            : (g = this.readBits(cc.Codec.GZip.cpdext[d]));
          g += cc.Codec.GZip.cpdist[d];
          for (d = 0; d < f; d++)
            (b = this.buf32k[(this.bIdx - g) & 32767]), this.addBuffer(b);
        }
    else if (2 === d) {
      var h = Array(320);
      b = 257 + this.readBits(5);
      g = 1 + this.readBits(5);
      e = 4 + this.readBits(4);
      for (d = 0; 19 > d; d++) h[d] = 0;
      for (d = 0; d < e; d++) h[cc.Codec.GZip.border[d]] = this.readBits(3);
      f = this.distanceTree.length;
      for (e = 0; e < f; e++)
        this.distanceTree[e] = new cc.Codec.GZip.HufNode();
      if (this.CreateTree(this.distanceTree, 19, h, 0))
        return this.flushBuffer(), 1;
      f = b + g;
      e = 0;
      for (var k = -1; e < f; )
        if ((k++, (d = this.DecodeValue(this.distanceTree)), 16 > d))
          h[e++] = d;
        else if (16 === d) {
          var m;
          d = 3 + this.readBits(2);
          if (e + d > f) return this.flushBuffer(), 1;
          for (m = e ? h[e - 1] : 0; d--; ) h[e++] = m;
        } else {
          d = 17 === d ? 3 + this.readBits(3) : 11 + this.readBits(7);
          if (e + d > f) return this.flushBuffer(), 1;
          for (; d--; ) h[e++] = 0;
        }
      f = this.literalTree.length;
      for (e = 0; e < f; e++) this.literalTree[e] = new cc.Codec.GZip.HufNode();
      if (this.CreateTree(this.literalTree, b, h, 0))
        return this.flushBuffer(), 1;
      f = this.literalTree.length;
      for (e = 0; e < f; e++)
        this.distanceTree[e] = new cc.Codec.GZip.HufNode();
      d = [];
      for (e = b; e < h.length; e++) d[e - b] = h[e];
      if (this.CreateTree(this.distanceTree, g, d, 0))
        return this.flushBuffer(), 1;
      for (;;)
        if (((d = this.DecodeValue(this.literalTree)), 256 <= d)) {
          d -= 256;
          if (0 === d) break;
          d--;
          f = this.readBits(cc.Codec.GZip.cplext[d]) + cc.Codec.GZip.cplens[d];
          d = this.DecodeValue(this.distanceTree);
          8 < cc.Codec.GZip.cpdext[d]
            ? ((g = this.readBits(8)),
              (g |= this.readBits(cc.Codec.GZip.cpdext[d] - 8) << 8))
            : (g = this.readBits(cc.Codec.GZip.cpdext[d]));
          for (g += cc.Codec.GZip.cpdist[d]; f--; )
            (b = this.buf32k[(this.bIdx - g) & 32767]), this.addBuffer(b);
        } else this.addBuffer(d);
    }
  while (!a);
  this.flushBuffer();
  this.byteAlign();
  return 0;
};
cc.Codec.GZip.prototype.unzipFile = function (a) {
  var b;
  this.gunzip();
  for (b = 0; b < this.unzipped.length; b++)
    if (this.unzipped[b][1] === a) return this.unzipped[b][0];
};
cc.Codec.GZip.prototype.nextFile = function () {
  this.outputArr = [];
  this.modeZIP = !1;
  var a = [];
  a[0] = this.readByte();
  a[1] = this.readByte();
  120 === a[0] &&
    218 === a[1] &&
    (this.DeflateLoop(),
    (this.unzipped[this.files] = [this.outputArr.join(""), "geonext.gxt"]),
    this.files++);
  31 === a[0] &&
    139 === a[1] &&
    (this.skipdir(),
    (this.unzipped[this.files] = [this.outputArr.join(""), "file"]),
    this.files++);
  if (
    80 === a[0] &&
    75 === a[1] &&
    ((this.modeZIP = !0),
    (a[2] = this.readByte()),
    (a[3] = this.readByte()),
    3 === a[2] && 4 === a[3])
  ) {
    a[0] = this.readByte();
    a[1] = this.readByte();
    this.gpflags = this.readByte();
    this.gpflags |= this.readByte() << 8;
    a = this.readByte();
    a |= this.readByte() << 8;
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    this.readByte();
    var b = this.readByte(),
      b = b | (this.readByte() << 8),
      d = this.readByte(),
      d = d | (this.readByte() << 8),
      e = 0;
    for (this.nameBuf = []; b--; ) {
      var f = this.readByte();
      ("/" === f) | (":" === f)
        ? (e = 0)
        : e < cc.Codec.GZip.NAMEMAX - 1 &&
          (this.nameBuf[e++] = String.fromCharCode(f));
    }
    this.fileout || (this.fileout = this.nameBuf);
    for (var e = 0; e < d; ) this.readByte(), e++;
    8 === a &&
      (this.DeflateLoop(),
      (this.unzipped[this.files] = [
        this.outputArr.join(""),
        this.nameBuf.join(""),
      ]),
      this.files++);
    this.skipdir();
  }
};
cc.Codec.GZip.prototype.skipdir = function () {
  var a = [],
    b;
  this.gpflags & 8 &&
    ((a[0] = this.readByte()),
    (a[1] = this.readByte()),
    (a[2] = this.readByte()),
    (a[3] = this.readByte()),
    this.readByte(),
    this.readByte(),
    this.readByte(),
    this.readByte(),
    this.readByte(),
    this.readByte(),
    this.readByte(),
    this.readByte());
  this.modeZIP && this.nextFile();
  a[0] = this.readByte();
  if (8 !== a[0]) return 0;
  this.gpflags = this.readByte();
  this.readByte();
  this.readByte();
  this.readByte();
  this.readByte();
  this.readByte();
  this.readByte();
  if (this.gpflags & 4)
    for (
      a[0] = this.readByte(),
        a[2] = this.readByte(),
        this.len = a[0] + 256 * a[1],
        a = 0;
      a < this.len;
      a++
    )
      this.readByte();
  if (this.gpflags & 8)
    for (a = 0, this.nameBuf = []; (b = this.readByte()); ) {
      if ("7" === b || ":" === b) a = 0;
      a < cc.Codec.GZip.NAMEMAX - 1 && (this.nameBuf[a++] = b);
    }
  if (this.gpflags & 16) for (; this.readByte(); );
  this.gpflags & 2 && (this.readByte(), this.readByte());
  this.DeflateLoop();
  this.readByte();
  this.readByte();
  this.readByte();
  this.readByte();
  this.modeZIP && this.nextFile();
}; /*
 zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
(function () {
  function a(a) {
    throw a;
  }
  function b(a, b) {
    var d = a.split("."),
      e = A;
    d[0] in e || !e.execScript || e.execScript("var " + d[0]);
    for (var f; d.length && (f = d.shift()); )
      d.length || b === y ? (e = e[f] ? e[f] : (e[f] = {})) : (e[f] = b);
  }
  function d(a) {
    if ("string" === typeof a) {
      a = a.split("");
      var b, d;
      b = 0;
      for (d = a.length; b < d; b++) a[b] = (a[b].charCodeAt(0) & 255) >>> 0;
    }
    b = 1;
    d = 0;
    for (var e = a.length, f, g = 0; 0 < e; ) {
      f = 1024 < e ? 1024 : e;
      e -= f;
      do (b += a[g++]), (d += b);
      while (--f);
      b %= 65521;
      d %= 65521;
    }
    return ((d << 16) | b) >>> 0;
  }
  function e(b, d) {
    this.index = "number" === typeof d ? d : 0;
    this.i = 0;
    this.buffer =
      b instanceof (z ? Uint8Array : Array)
        ? b
        : new (z ? Uint8Array : Array)(32768);
    2 * this.buffer.length <= this.index && a(Error("invalid index"));
    this.buffer.length <= this.index && this.f();
  }
  function f(a) {
    this.buffer = new (z ? Uint16Array : Array)(2 * a);
    this.length = 0;
  }
  function g(a) {
    var b = a.length,
      d = 0,
      e = Number.POSITIVE_INFINITY,
      f,
      g,
      h,
      k,
      m,
      n,
      p,
      r,
      u;
    for (r = 0; r < b; ++r) a[r] > d && (d = a[r]), a[r] < e && (e = a[r]);
    f = 1 << d;
    g = new (z ? Uint32Array : Array)(f);
    h = 1;
    k = 0;
    for (m = 2; h <= d; ) {
      for (r = 0; r < b; ++r)
        if (a[r] === h) {
          n = 0;
          p = k;
          for (u = 0; u < h; ++u) (n = (n << 1) | (p & 1)), (p >>= 1);
          for (u = n; u < f; u += m) g[u] = (h << 16) | r;
          ++k;
        }
      ++h;
      k <<= 1;
      m <<= 1;
    }
    return [g, d, e];
  }
  function h(a, b) {
    this.h = L;
    this.w = 0;
    this.input = a;
    this.b = 0;
    b &&
      (b.lazy && (this.w = b.lazy),
      "number" === typeof b.compressionType && (this.h = b.compressionType),
      b.outputBuffer &&
        (this.a =
          z && b.outputBuffer instanceof Array
            ? new Uint8Array(b.outputBuffer)
            : b.outputBuffer),
      "number" === typeof b.outputIndex && (this.b = b.outputIndex));
    this.a || (this.a = new (z ? Uint8Array : Array)(32768));
  }
  function k(a, b) {
    this.length = a;
    this.G = b;
  }
  function m() {
    var b = I;
    switch (B) {
      case 3 === b:
        return [257, b - 3, 0];
      case 4 === b:
        return [258, b - 4, 0];
      case 5 === b:
        return [259, b - 5, 0];
      case 6 === b:
        return [260, b - 6, 0];
      case 7 === b:
        return [261, b - 7, 0];
      case 8 === b:
        return [262, b - 8, 0];
      case 9 === b:
        return [263, b - 9, 0];
      case 10 === b:
        return [264, b - 10, 0];
      case 12 >= b:
        return [265, b - 11, 1];
      case 14 >= b:
        return [266, b - 13, 1];
      case 16 >= b:
        return [267, b - 15, 1];
      case 18 >= b:
        return [268, b - 17, 1];
      case 22 >= b:
        return [269, b - 19, 2];
      case 26 >= b:
        return [270, b - 23, 2];
      case 30 >= b:
        return [271, b - 27, 2];
      case 34 >= b:
        return [272, b - 31, 2];
      case 42 >= b:
        return [273, b - 35, 3];
      case 50 >= b:
        return [274, b - 43, 3];
      case 58 >= b:
        return [275, b - 51, 3];
      case 66 >= b:
        return [276, b - 59, 3];
      case 82 >= b:
        return [277, b - 67, 4];
      case 98 >= b:
        return [278, b - 83, 4];
      case 114 >= b:
        return [279, b - 99, 4];
      case 130 >= b:
        return [280, b - 115, 4];
      case 162 >= b:
        return [281, b - 131, 5];
      case 194 >= b:
        return [282, b - 163, 5];
      case 226 >= b:
        return [283, b - 195, 5];
      case 257 >= b:
        return [284, b - 227, 5];
      case 258 === b:
        return [285, b - 258, 0];
      default:
        a("invalid length: " + b);
    }
  }
  function n(b, d) {
    function e(b, d) {
      var f = b.G,
        g = [],
        h = 0,
        k;
      k = M[b.length];
      g[h++] = k & 65535;
      g[h++] = (k >> 16) & 255;
      g[h++] = k >> 24;
      var m;
      switch (B) {
        case 1 === f:
          m = [0, f - 1, 0];
          break;
        case 2 === f:
          m = [1, f - 2, 0];
          break;
        case 3 === f:
          m = [2, f - 3, 0];
          break;
        case 4 === f:
          m = [3, f - 4, 0];
          break;
        case 6 >= f:
          m = [4, f - 5, 1];
          break;
        case 8 >= f:
          m = [5, f - 7, 1];
          break;
        case 12 >= f:
          m = [6, f - 9, 2];
          break;
        case 16 >= f:
          m = [7, f - 13, 2];
          break;
        case 24 >= f:
          m = [8, f - 17, 3];
          break;
        case 32 >= f:
          m = [9, f - 25, 3];
          break;
        case 48 >= f:
          m = [10, f - 33, 4];
          break;
        case 64 >= f:
          m = [11, f - 49, 4];
          break;
        case 96 >= f:
          m = [12, f - 65, 5];
          break;
        case 128 >= f:
          m = [13, f - 97, 5];
          break;
        case 192 >= f:
          m = [14, f - 129, 6];
          break;
        case 256 >= f:
          m = [15, f - 193, 6];
          break;
        case 384 >= f:
          m = [16, f - 257, 7];
          break;
        case 512 >= f:
          m = [17, f - 385, 7];
          break;
        case 768 >= f:
          m = [18, f - 513, 8];
          break;
        case 1024 >= f:
          m = [19, f - 769, 8];
          break;
        case 1536 >= f:
          m = [20, f - 1025, 9];
          break;
        case 2048 >= f:
          m = [21, f - 1537, 9];
          break;
        case 3072 >= f:
          m = [22, f - 2049, 10];
          break;
        case 4096 >= f:
          m = [23, f - 3073, 10];
          break;
        case 6144 >= f:
          m = [24, f - 4097, 11];
          break;
        case 8192 >= f:
          m = [25, f - 6145, 11];
          break;
        case 12288 >= f:
          m = [26, f - 8193, 12];
          break;
        case 16384 >= f:
          m = [27, f - 12289, 12];
          break;
        case 24576 >= f:
          m = [28, f - 16385, 13];
          break;
        case 32768 >= f:
          m = [29, f - 24577, 13];
          break;
        default:
          a("invalid distance");
      }
      k = m;
      g[h++] = k[0];
      g[h++] = k[1];
      g[h++] = k[2];
      f = 0;
      for (h = g.length; f < h; ++f) u[t++] = g[f];
      v[g[0]]++;
      w[g[3]]++;
      s = b.length + d - 1;
      r = null;
    }
    var f,
      g,
      h,
      m,
      n,
      p = {},
      r,
      u = z ? new Uint16Array(2 * d.length) : [],
      t = 0,
      s = 0,
      v = new (z ? Uint32Array : Array)(286),
      w = new (z ? Uint32Array : Array)(30),
      x = b.w,
      A;
    if (!z) {
      for (h = 0; 285 >= h; ) v[h++] = 0;
      for (h = 0; 29 >= h; ) w[h++] = 0;
    }
    v[256] = 1;
    f = 0;
    for (g = d.length; f < g; ++f) {
      h = n = 0;
      for (m = 3; h < m && f + h !== g; ++h) n = (n << 8) | d[f + h];
      p[n] === y && (p[n] = []);
      h = p[n];
      if (!(0 < s--)) {
        for (; 0 < h.length && 32768 < f - h[0]; ) h.shift();
        if (f + 3 >= g) {
          r && e(r, -1);
          h = 0;
          for (m = g - f; h < m; ++h) (A = d[f + h]), (u[t++] = A), ++v[A];
          break;
        }
        if (0 < h.length) {
          n = m = y;
          var C = 0,
            D = y,
            E = y,
            F = (D = y),
            G = d.length,
            E = 0,
            F = h.length;
          a: for (; E < F; E++) {
            m = h[F - E - 1];
            D = 3;
            if (3 < C) {
              for (D = C; 3 < D; D--)
                if (d[m + D - 1] !== d[f + D - 1]) continue a;
              D = C;
            }
            for (; 258 > D && f + D < G && d[m + D] === d[f + D]; ) ++D;
            D > C && ((n = m), (C = D));
            if (258 === D) break;
          }
          m = new k(C, f - n);
          r
            ? r.length < m.length
              ? ((A = d[f - 1]), (u[t++] = A), ++v[A], e(m, 0))
              : e(r, -1)
            : m.length < x
            ? (r = m)
            : e(m, 0);
        } else r ? e(r, -1) : ((A = d[f]), (u[t++] = A), ++v[A]);
      }
      h.push(f);
    }
    u[t++] = 256;
    v[256]++;
    b.L = v;
    b.K = w;
    return z ? u.subarray(0, t) : u;
  }
  function p(a, b) {
    function d(a) {
      var b = u[a][t[a]];
      b === p ? (d(a + 1), d(a + 1)) : --r[b];
      ++t[a];
    }
    var e = a.length,
      g = new f(572),
      h = new (z ? Uint8Array : Array)(e),
      k,
      m,
      n;
    if (!z) for (m = 0; m < e; m++) h[m] = 0;
    for (m = 0; m < e; ++m) 0 < a[m] && g.push(m, a[m]);
    e = Array(g.length / 2);
    k = new (z ? Uint32Array : Array)(g.length / 2);
    if (1 === e.length) return (h[g.pop().index] = 1), h;
    m = 0;
    for (n = g.length / 2; m < n; ++m) (e[m] = g.pop()), (k[m] = e[m].value);
    var p = k.length;
    m = new (z ? Uint16Array : Array)(b);
    var g = new (z ? Uint8Array : Array)(b),
      r = new (z ? Uint8Array : Array)(p);
    n = Array(b);
    var u = Array(b),
      t = Array(b),
      s = (1 << b) - p,
      v = 1 << (b - 1),
      w,
      x,
      y;
    m[b - 1] = p;
    for (w = 0; w < b; ++w)
      s < v ? (g[w] = 0) : ((g[w] = 1), (s -= v)),
        (s <<= 1),
        (m[b - 2 - w] = ((m[b - 1 - w] / 2) | 0) + p);
    m[0] = g[0];
    n[0] = Array(m[0]);
    u[0] = Array(m[0]);
    for (w = 1; w < b; ++w)
      m[w] > 2 * m[w - 1] + g[w] && (m[w] = 2 * m[w - 1] + g[w]),
        (n[w] = Array(m[w])),
        (u[w] = Array(m[w]));
    for (s = 0; s < p; ++s) r[s] = b;
    for (v = 0; v < m[b - 1]; ++v) (n[b - 1][v] = k[v]), (u[b - 1][v] = v);
    for (s = 0; s < b; ++s) t[s] = 0;
    1 === g[b - 1] && (--r[0], ++t[b - 1]);
    for (w = b - 2; 0 <= w; --w) {
      x = s = 0;
      y = t[w + 1];
      for (v = 0; v < m[w]; v++)
        (x = n[w + 1][y] + n[w + 1][y + 1]),
          x > k[s]
            ? ((n[w][v] = x), (u[w][v] = p), (y += 2))
            : ((n[w][v] = k[s]), (u[w][v] = s), ++s);
      t[w] = 0;
      1 === g[w] && d(w);
    }
    k = r;
    m = 0;
    for (n = e.length; m < n; ++m) h[e[m].index] = k[m];
    return h;
  }
  function r(b) {
    var d = new (z ? Uint16Array : Array)(b.length),
      e = [],
      f = [],
      g = 0,
      h,
      k,
      m;
    h = 0;
    for (k = b.length; h < k; h++) e[b[h]] = (e[b[h]] | 0) + 1;
    h = 1;
    for (k = 16; h <= k; h++)
      (f[h] = g), (g += e[h] | 0), g > 1 << h && a("overcommitted"), (g <<= 1);
    65536 > g && a("undercommitted");
    h = 0;
    for (k = b.length; h < k; h++)
      for (g = f[b[h]], f[b[h]] += 1, e = d[h] = 0, m = b[h]; e < m; e++)
        (d[h] = (d[h] << 1) | (g & 1)), (g >>>= 1);
    return d;
  }
  function s(a, b) {
    this.input = a;
    this.a = new (z ? Uint8Array : Array)(32768);
    this.h = K.j;
    var d = {},
      e;
    (!b && (b = {})) ||
      "number" !== typeof b.compressionType ||
      (this.h = b.compressionType);
    for (e in b) d[e] = b[e];
    d.outputBuffer = this.a;
    this.z = new h(this.input, d);
  }
  function u(b, d) {
    this.k = [];
    this.l = 32768;
    this.e = this.g = this.c = this.q = 0;
    this.input = z ? new Uint8Array(b) : b;
    this.s = !1;
    this.m = O;
    this.B = !1;
    if (d || !(d = {}))
      d.index && (this.c = d.index),
        d.bufferSize && (this.l = d.bufferSize),
        d.bufferType && (this.m = d.bufferType),
        d.resize && (this.B = d.resize);
    switch (this.m) {
      case N:
        this.b = 32768;
        this.a = new (z ? Uint8Array : Array)(32768 + this.l + 258);
        break;
      case O:
        this.b = 0;
        this.a = new (z ? Uint8Array : Array)(this.l);
        this.f = this.J;
        this.t = this.H;
        this.o = this.I;
        break;
      default:
        a(Error("invalid inflate mode"));
    }
  }
  function v(b, d) {
    for (var e = b.g, f = b.e, g = b.input, h = b.c, k; f < d; )
      (k = g[h++]),
        k === y && a(Error("input buffer is broken")),
        (e |= k << f),
        (f += 8);
    b.g = e >>> d;
    b.e = f - d;
    b.c = h;
    return e & ((1 << d) - 1);
  }
  function t(b, d) {
    for (
      var e = b.g, f = b.e, g = b.input, h = b.c, k = d[0], m = d[1], n;
      f < m;

    )
      (n = g[h++]),
        n === y && a(Error("input buffer is broken")),
        (e |= n << f),
        (f += 8);
    g = k[e & ((1 << m) - 1)];
    k = g >>> 16;
    b.g = e >> k;
    b.e = f - k;
    b.c = h;
    return g & 65535;
  }
  function w(a) {
    function b(a, d, e) {
      var f, g, h, k;
      for (k = 0; k < a; )
        switch (((f = t(this, d)), f)) {
          case 16:
            for (h = 3 + v(this, 2); h--; ) e[k++] = g;
            break;
          case 17:
            for (h = 3 + v(this, 3); h--; ) e[k++] = 0;
            g = 0;
            break;
          case 18:
            for (h = 11 + v(this, 7); h--; ) e[k++] = 0;
            g = 0;
            break;
          default:
            g = e[k++] = f;
        }
      return e;
    }
    var d = v(a, 5) + 257,
      e = v(a, 5) + 1,
      f = v(a, 4) + 4,
      h = new (z ? Uint8Array : Array)(P.length),
      k;
    for (k = 0; k < f; ++k) h[P[k]] = v(a, 3);
    f = g(h);
    h = new (z ? Uint8Array : Array)(d);
    k = new (z ? Uint8Array : Array)(e);
    a.o(g(b.call(a, d, f, h)), g(b.call(a, e, f, k)));
  }
  function x(b, d) {
    var e, f;
    this.input = b;
    this.c = 0;
    if (d || !(d = {}))
      d.index && (this.c = d.index), d.verify && (this.M = d.verify);
    e = b[this.c++];
    f = b[this.c++];
    switch (e & 15) {
      case W:
        this.method = W;
        break;
      default:
        a(Error("unsupported compression method"));
    }
    0 !== ((e << 8) + f) % 31 &&
      a(Error("invalid fcheck flag:" + (((e << 8) + f) % 31)));
    f & 32 && a(Error("fdict flag is not supported"));
    this.A = new u(b, {
      index: this.c,
      bufferSize: d.bufferSize,
      bufferType: d.bufferType,
      resize: d.resize,
    });
  }
  var y = void 0,
    B = !0,
    A = this,
    z =
      "undefined" !== typeof Uint8Array &&
      "undefined" !== typeof Uint16Array &&
      "undefined" !== typeof Uint32Array;
  e.prototype.f = function () {
    var a = this.buffer,
      b,
      d = a.length,
      e = new (z ? Uint8Array : Array)(d << 1);
    if (z) e.set(a);
    else for (b = 0; b < d; ++b) e[b] = a[b];
    return (this.buffer = e);
  };
  e.prototype.d = function (a, b, d) {
    var e = this.buffer,
      f = this.index,
      g = this.i,
      h = e[f];
    d &&
      1 < b &&
      (a =
        8 < b
          ? ((F[a & 255] << 24) |
              (F[(a >>> 8) & 255] << 16) |
              (F[(a >>> 16) & 255] << 8) |
              F[(a >>> 24) & 255]) >>
            (32 - b)
          : F[a] >> (8 - b));
    if (8 > b + g) (h = (h << b) | a), (g += b);
    else
      for (d = 0; d < b; ++d)
        (h = (h << 1) | ((a >> (b - d - 1)) & 1)),
          8 === ++g &&
            ((g = 0),
            (e[f++] = F[h]),
            (h = 0),
            f === e.length && (e = this.f()));
    e[f] = h;
    this.buffer = e;
    this.i = g;
    this.index = f;
  };
  e.prototype.finish = function () {
    var a = this.buffer,
      b = this.index,
      d;
    0 < this.i && ((a[b] <<= 8 - this.i), (a[b] = F[a[b]]), b++);
    z ? (d = a.subarray(0, b)) : ((a.length = b), (d = a));
    return d;
  };
  var C = new (z ? Uint8Array : Array)(256),
    D;
  for (D = 0; 256 > D; ++D) {
    for (var E = D, J = E, G = 7, E = E >>> 1; E; E >>>= 1)
      (J <<= 1), (J |= E & 1), --G;
    C[D] = ((J << G) & 255) >>> 0;
  }
  var F = C,
    C = [
      0,
      1996959894,
      3993919788,
      2567524794,
      124634137,
      1886057615,
      3915621685,
      2657392035,
      249268274,
      2044508324,
      3772115230,
      2547177864,
      162941995,
      2125561021,
      3887607047,
      2428444049,
      498536548,
      1789927666,
      4089016648,
      2227061214,
      450548861,
      1843258603,
      4107580753,
      2211677639,
      325883990,
      1684777152,
      4251122042,
      2321926636,
      335633487,
      1661365465,
      4195302755,
      2366115317,
      997073096,
      1281953886,
      3579855332,
      2724688242,
      1006888145,
      1258607687,
      3524101629,
      2768942443,
      901097722,
      1119000684,
      3686517206,
      2898065728,
      853044451,
      1172266101,
      3705015759,
      2882616665,
      651767980,
      1373503546,
      3369554304,
      3218104598,
      565507253,
      1454621731,
      3485111705,
      3099436303,
      671266974,
      1594198024,
      3322730930,
      2970347812,
      795835527,
      1483230225,
      3244367275,
      3060149565,
      1994146192,
      31158534,
      2563907772,
      4023717930,
      1907459465,
      112637215,
      2680153253,
      3904427059,
      2013776290,
      251722036,
      2517215374,
      3775830040,
      2137656763,
      141376813,
      2439277719,
      3865271297,
      1802195444,
      476864866,
      2238001368,
      4066508878,
      1812370925,
      453092731,
      2181625025,
      4111451223,
      1706088902,
      314042704,
      2344532202,
      4240017532,
      1658658271,
      366619977,
      2362670323,
      4224994405,
      1303535960,
      984961486,
      2747007092,
      3569037538,
      1256170817,
      1037604311,
      2765210733,
      3554079995,
      1131014506,
      879679996,
      2909243462,
      3663771856,
      1141124467,
      855842277,
      2852801631,
      3708648649,
      1342533948,
      654459306,
      3188396048,
      3373015174,
      1466479909,
      544179635,
      3110523913,
      3462522015,
      1591671054,
      702138776,
      2966460450,
      3352799412,
      1504918807,
      783551873,
      3082640443,
      3233442989,
      3988292384,
      2596254646,
      62317068,
      1957810842,
      3939845945,
      2647816111,
      81470997,
      1943803523,
      3814918930,
      2489596804,
      225274430,
      2053790376,
      3826175755,
      2466906013,
      167816743,
      2097651377,
      4027552580,
      2265490386,
      503444072,
      1762050814,
      4150417245,
      2154129355,
      426522225,
      1852507879,
      4275313526,
      2312317920,
      282753626,
      1742555852,
      4189708143,
      2394877945,
      397917763,
      1622183637,
      3604390888,
      2714866558,
      953729732,
      1340076626,
      3518719985,
      2797360999,
      1068828381,
      1219638859,
      3624741850,
      2936675148,
      906185462,
      1090812512,
      3747672003,
      2825379669,
      829329135,
      1181335161,
      3412177804,
      3160834842,
      628085408,
      1382605366,
      3423369109,
      3138078467,
      570562233,
      1426400815,
      3317316542,
      2998733608,
      733239954,
      1555261956,
      3268935591,
      3050360625,
      752459403,
      1541320221,
      2607071920,
      3965973030,
      1969922972,
      40735498,
      2617837225,
      3943577151,
      1913087877,
      83908371,
      2512341634,
      3803740692,
      2075208622,
      213261112,
      2463272603,
      3855990285,
      2094854071,
      198958881,
      2262029012,
      4057260610,
      1759359992,
      534414190,
      2176718541,
      4139329115,
      1873836001,
      414664567,
      2282248934,
      4279200368,
      1711684554,
      285281116,
      2405801727,
      4167216745,
      1634467795,
      376229701,
      2685067896,
      3608007406,
      1308918612,
      956543938,
      2808555105,
      3495958263,
      1231636301,
      1047427035,
      2932959818,
      3654703836,
      1088359270,
      936918e3,
      2847714899,
      3736837829,
      1202900863,
      817233897,
      3183342108,
      3401237130,
      1404277552,
      615818150,
      3134207493,
      3453421203,
      1423857449,
      601450431,
      3009837614,
      3294710456,
      1567103746,
      711928724,
      3020668471,
      3272380065,
      1510334235,
      755167117,
    ];
  z && new Uint32Array(C);
  f.prototype.getParent = function (a) {
    return 2 * (((a - 2) / 4) | 0);
  };
  f.prototype.push = function (a, b) {
    var d,
      e,
      f = this.buffer,
      g;
    d = this.length;
    f[this.length++] = b;
    for (f[this.length++] = a; 0 < d; )
      if (((e = this.getParent(d)), f[d] > f[e]))
        (g = f[d]),
          (f[d] = f[e]),
          (f[e] = g),
          (g = f[d + 1]),
          (f[d + 1] = f[e + 1]),
          (f[e + 1] = g),
          (d = e);
      else break;
    return this.length;
  };
  f.prototype.pop = function () {
    var a,
      b,
      d = this.buffer,
      e,
      f,
      g;
    b = d[0];
    a = d[1];
    this.length -= 2;
    d[0] = d[this.length];
    d[1] = d[this.length + 1];
    for (g = 0; ; ) {
      f = 2 * g + 2;
      if (f >= this.length) break;
      f + 2 < this.length && d[f + 2] > d[f] && (f += 2);
      if (d[f] > d[g])
        (e = d[g]),
          (d[g] = d[f]),
          (d[f] = e),
          (e = d[g + 1]),
          (d[g + 1] = d[f + 1]),
          (d[f + 1] = e);
      else break;
      g = f;
    }
    return { index: a, value: b, length: this.length };
  };
  var L = 2,
    C = { NONE: 0, r: 1, j: L, N: 3 },
    H = [];
  for (D = 0; 288 > D; D++)
    switch (B) {
      case 143 >= D:
        H.push([D + 48, 8]);
        break;
      case 255 >= D:
        H.push([D - 144 + 400, 9]);
        break;
      case 279 >= D:
        H.push([D - 256 + 0, 7]);
        break;
      case 287 >= D:
        H.push([D - 280 + 192, 8]);
        break;
      default:
        a("invalid literal: " + D);
    }
  h.prototype.n = function () {
    var b,
      d,
      f,
      g,
      h = this.input;
    switch (this.h) {
      case 0:
        f = 0;
        for (g = h.length; f < g; ) {
          d = z ? h.subarray(f, f + 65535) : h.slice(f, f + 65535);
          f += d.length;
          var k = f === g,
            m = y,
            u = (m = y),
            u = (m = y),
            t = this.a,
            s = this.b;
          if (z) {
            for (
              t = new Uint8Array(this.a.buffer);
              t.length <= s + d.length + 5;

            )
              t = new Uint8Array(t.length << 1);
            t.set(this.a);
          }
          m = k ? 1 : 0;
          t[s++] = m | 0;
          m = d.length;
          u = (~m + 65536) & 65535;
          t[s++] = m & 255;
          t[s++] = (m >>> 8) & 255;
          t[s++] = u & 255;
          t[s++] = (u >>> 8) & 255;
          if (z) t.set(d, s), (s += d.length), (t = t.subarray(0, s));
          else {
            m = 0;
            for (u = d.length; m < u; ++m) t[s++] = d[m];
            t.length = s;
          }
          this.b = s;
          this.a = t;
        }
        break;
      case 1:
        f = new e(new Uint8Array(this.a.buffer), this.b);
        f.d(1, 1, B);
        f.d(1, 2, B);
        h = n(this, h);
        d = 0;
        for (k = h.length; d < k; d++)
          if (((g = h[d]), e.prototype.d.apply(f, H[g]), 256 < g))
            f.d(h[++d], h[++d], B), f.d(h[++d], 5), f.d(h[++d], h[++d], B);
          else if (256 === g) break;
        this.a = f.finish();
        this.b = this.a.length;
        break;
      case L:
        g = new e(new Uint8Array(this.a), this.b);
        var v,
          w,
          x,
          A = [
            16,
            17,
            18,
            0,
            8,
            7,
            9,
            6,
            10,
            5,
            11,
            4,
            12,
            3,
            13,
            2,
            14,
            1,
            15,
          ],
          C,
          D,
          m = Array(19),
          E,
          t = L;
        g.d(1, 1, B);
        g.d(t, 2, B);
        h = n(this, h);
        u = p(this.L, 15);
        C = r(u);
        t = p(this.K, 7);
        s = r(t);
        for (v = 286; 257 < v && 0 === u[v - 1]; v--);
        for (w = 30; 1 < w && 0 === t[w - 1]; w--);
        var F = v,
          G = w;
        b = new (z ? Uint32Array : Array)(F + G);
        var I = new (z ? Uint32Array : Array)(316),
          J,
          K;
        D = new (z ? Uint8Array : Array)(19);
        for (E = x = 0; E < F; E++) b[x++] = u[E];
        for (E = 0; E < G; E++) b[x++] = t[E];
        if (!z) for (E = 0, G = D.length; E < G; ++E) D[E] = 0;
        E = J = 0;
        for (G = b.length; E < G; E += x) {
          for (x = 1; E + x < G && b[E + x] === b[E]; ++x);
          F = x;
          if (0 === b[E])
            if (3 > F) for (; 0 < F--; ) (I[J++] = 0), D[0]++;
            else
              for (; 0 < F; )
                (K = 138 > F ? F : 138),
                  K > F - 3 && K < F && (K = F - 3),
                  10 >= K
                    ? ((I[J++] = 17), (I[J++] = K - 3), D[17]++)
                    : ((I[J++] = 18), (I[J++] = K - 11), D[18]++),
                  (F -= K);
          else if (((I[J++] = b[E]), D[b[E]]++, F--, 3 > F))
            for (; 0 < F--; ) (I[J++] = b[E]), D[b[E]]++;
          else
            for (; 0 < F; )
              (K = 6 > F ? F : 6),
                K > F - 3 && K < F && (K = F - 3),
                (I[J++] = 16),
                (I[J++] = K - 3),
                D[16]++,
                (F -= K);
        }
        b = z ? I.subarray(0, J) : I.slice(0, J);
        D = p(D, 7);
        for (E = 0; 19 > E; E++) m[E] = D[A[E]];
        for (x = 19; 4 < x && 0 === m[x - 1]; x--);
        A = r(D);
        g.d(v - 257, 5, B);
        g.d(w - 1, 5, B);
        g.d(x - 4, 4, B);
        for (E = 0; E < x; E++) g.d(m[E], 3, B);
        E = 0;
        for (m = b.length; E < m; E++)
          if (((d = b[E]), g.d(A[d], D[d], B), 16 <= d)) {
            E++;
            switch (d) {
              case 16:
                k = 2;
                break;
              case 17:
                k = 3;
                break;
              case 18:
                k = 7;
                break;
              default:
                a("invalid code: " + d);
            }
            g.d(b[E], k, B);
          }
        k = [C, u];
        s = [s, t];
        d = k[0];
        k = k[1];
        t = s[0];
        C = s[1];
        s = 0;
        for (m = h.length; s < m; ++s)
          if (((f = h[s]), g.d(d[f], k[f], B), 256 < f))
            g.d(h[++s], h[++s], B),
              (u = h[++s]),
              g.d(t[u], C[u], B),
              g.d(h[++s], h[++s], B);
          else if (256 === f) break;
        this.a = g.finish();
        this.b = this.a.length;
        break;
      default:
        a("invalid compression type");
    }
    return this.a;
  };
  D = [];
  var I;
  for (I = 3; 258 >= I; I++)
    (E = m()), (D[I] = (E[2] << 24) | (E[1] << 16) | E[0]);
  var M = z ? new Uint32Array(D) : D,
    K = C;
  s.prototype.n = function () {
    var b,
      e,
      f,
      g,
      h = 0;
    g = this.a;
    b = W;
    switch (b) {
      case W:
        e = Math.LOG2E * Math.log(32768) - 8;
        break;
      default:
        a(Error("invalid compression method"));
    }
    e = (e << 4) | b;
    g[h++] = e;
    switch (b) {
      case W:
        switch (this.h) {
          case K.NONE:
            f = 0;
            break;
          case K.r:
            f = 1;
            break;
          case K.j:
            f = 2;
            break;
          default:
            a(Error("unsupported compression type"));
        }
        break;
      default:
        a(Error("invalid compression method"));
    }
    b = (f << 6) | 0;
    g[h++] = b | (31 - ((256 * e + b) % 31));
    b = d(this.input);
    this.z.b = h;
    g = this.z.n();
    h = g.length;
    z &&
      ((g = new Uint8Array(g.buffer)),
      g.length <= h + 4 &&
        ((this.a = new Uint8Array(g.length + 4)), this.a.set(g), (g = this.a)),
      (g = g.subarray(0, h + 4)));
    g[h++] = (b >> 24) & 255;
    g[h++] = (b >> 16) & 255;
    g[h++] = (b >> 8) & 255;
    g[h++] = b & 255;
    return g;
  };
  b("Zlib.Deflate", s);
  b("Zlib.Deflate.compress", function (a, b) {
    return new s(a, b).n();
  });
  b("Zlib.Deflate.CompressionType", K);
  b("Zlib.Deflate.CompressionType.NONE", K.NONE);
  b("Zlib.Deflate.CompressionType.FIXED", K.r);
  b("Zlib.Deflate.CompressionType.DYNAMIC", K.j);
  var N = 0,
    O = 1,
    C = { D: N, C: O };
  u.prototype.p = function () {
    for (; !this.s; ) {
      var b = v(this, 3);
      b & 1 && (this.s = B);
      b >>>= 1;
      switch (b) {
        case 0:
          var b = this.input,
            d = this.c,
            e = this.a,
            f = this.b,
            g = y,
            h = y,
            k = y,
            m = e.length,
            g = y;
          this.e = this.g = 0;
          g = b[d++];
          g === y &&
            a(Error("invalid uncompressed block header: LEN (first byte)"));
          h = g;
          g = b[d++];
          g === y &&
            a(Error("invalid uncompressed block header: LEN (second byte)"));
          h |= g << 8;
          g = b[d++];
          g === y &&
            a(Error("invalid uncompressed block header: NLEN (first byte)"));
          k = g;
          g = b[d++];
          g === y &&
            a(Error("invalid uncompressed block header: NLEN (second byte)"));
          k |= g << 8;
          h === ~k &&
            a(Error("invalid uncompressed block header: length verify"));
          d + h > b.length && a(Error("input buffer is broken"));
          switch (this.m) {
            case N:
              for (; f + h > e.length; ) {
                g = m - f;
                h -= g;
                if (z) e.set(b.subarray(d, d + g), f), (f += g), (d += g);
                else for (; g--; ) e[f++] = b[d++];
                this.b = f;
                e = this.f();
                f = this.b;
              }
              break;
            case O:
              for (; f + h > e.length; ) e = this.f({ v: 2 });
              break;
            default:
              a(Error("invalid inflate mode"));
          }
          if (z) e.set(b.subarray(d, d + h), f), (f += h), (d += h);
          else for (; h--; ) e[f++] = b[d++];
          this.c = d;
          this.b = f;
          this.a = e;
          break;
        case 1:
          this.o(U, X);
          break;
        case 2:
          w(this);
          break;
        default:
          a(Error("unknown BTYPE: " + b));
      }
    }
    return this.t();
  };
  D = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
  var P = z ? new Uint16Array(D) : D;
  D = [
    3,
    4,
    5,
    6,
    7,
    8,
    9,
    10,
    11,
    13,
    15,
    17,
    19,
    23,
    27,
    31,
    35,
    43,
    51,
    59,
    67,
    83,
    99,
    115,
    131,
    163,
    195,
    227,
    258,
    258,
    258,
  ];
  var R = z ? new Uint16Array(D) : D;
  D = [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    1,
    1,
    1,
    1,
    2,
    2,
    2,
    2,
    3,
    3,
    3,
    3,
    4,
    4,
    4,
    4,
    5,
    5,
    5,
    5,
    0,
    0,
    0,
  ];
  var Q = z ? new Uint8Array(D) : D;
  D = [
    1,
    2,
    3,
    4,
    5,
    7,
    9,
    13,
    17,
    25,
    33,
    49,
    65,
    97,
    129,
    193,
    257,
    385,
    513,
    769,
    1025,
    1537,
    2049,
    3073,
    4097,
    6145,
    8193,
    12289,
    16385,
    24577,
  ];
  var V = z ? new Uint16Array(D) : D;
  D = [
    0,
    0,
    0,
    0,
    1,
    1,
    2,
    2,
    3,
    3,
    4,
    4,
    5,
    5,
    6,
    6,
    7,
    7,
    8,
    8,
    9,
    9,
    10,
    10,
    11,
    11,
    12,
    12,
    13,
    13,
  ];
  var S = z ? new Uint8Array(D) : D;
  D = new (z ? Uint8Array : Array)(288);
  E = 0;
  for (J = D.length; E < J; ++E)
    D[E] = 143 >= E ? 8 : 255 >= E ? 9 : 279 >= E ? 7 : 8;
  var U = g(D);
  D = new (z ? Uint8Array : Array)(30);
  E = 0;
  for (J = D.length; E < J; ++E) D[E] = 5;
  var X = g(D);
  u.prototype.o = function (a, b) {
    var d = this.a,
      e = this.b;
    this.u = a;
    for (var f = d.length - 258, g, h, k; 256 !== (g = t(this, a)); )
      if (256 > g)
        e >= f && ((this.b = e), (d = this.f()), (e = this.b)), (d[e++] = g);
      else
        for (
          g -= 257,
            k = R[g],
            0 < Q[g] && (k += v(this, Q[g])),
            g = t(this, b),
            h = V[g],
            0 < S[g] && (h += v(this, S[g])),
            e >= f && ((this.b = e), (d = this.f()), (e = this.b));
          k--;

        )
          d[e] = d[e++ - h];
    for (; 8 <= this.e; ) (this.e -= 8), this.c--;
    this.b = e;
  };
  u.prototype.I = function (a, b) {
    var d = this.a,
      e = this.b;
    this.u = a;
    for (var f = d.length, g, h, k; 256 !== (g = t(this, a)); )
      if (256 > g) e >= f && ((d = this.f()), (f = d.length)), (d[e++] = g);
      else
        for (
          g -= 257,
            k = R[g],
            0 < Q[g] && (k += v(this, Q[g])),
            g = t(this, b),
            h = V[g],
            0 < S[g] && (h += v(this, S[g])),
            e + k > f && ((d = this.f()), (f = d.length));
          k--;

        )
          d[e] = d[e++ - h];
    for (; 8 <= this.e; ) (this.e -= 8), this.c--;
    this.b = e;
  };
  u.prototype.f = function () {
    var a = new (z ? Uint8Array : Array)(this.b - 32768),
      b = this.b - 32768,
      d,
      e,
      f = this.a;
    if (z) a.set(f.subarray(32768, a.length));
    else for (d = 0, e = a.length; d < e; ++d) a[d] = f[d + 32768];
    this.k.push(a);
    this.q += a.length;
    if (z) f.set(f.subarray(b, b + 32768));
    else for (d = 0; 32768 > d; ++d) f[d] = f[b + d];
    this.b = 32768;
    return f;
  };
  u.prototype.J = function (a) {
    var b,
      d = (this.input.length / this.c + 1) | 0,
      e,
      f,
      g,
      h = this.input,
      k = this.a;
    a &&
      ("number" === typeof a.v && (d = a.v),
      "number" === typeof a.F && (d += a.F));
    2 > d
      ? ((e = (h.length - this.c) / this.u[2]),
        (g = ((e / 2) * 258) | 0),
        (f = g < k.length ? k.length + g : k.length << 1))
      : (f = k.length * d);
    z ? ((b = new Uint8Array(f)), b.set(k)) : (b = k);
    return (this.a = b);
  };
  u.prototype.t = function () {
    var a = 0,
      b = this.a,
      d = this.k,
      e,
      f = new (z ? Uint8Array : Array)(this.q + (this.b - 32768)),
      g,
      h,
      k,
      m;
    if (0 === d.length)
      return z ? this.a.subarray(32768, this.b) : this.a.slice(32768, this.b);
    g = 0;
    for (h = d.length; g < h; ++g)
      for (e = d[g], k = 0, m = e.length; k < m; ++k) f[a++] = e[k];
    g = 32768;
    for (h = this.b; g < h; ++g) f[a++] = b[g];
    this.k = [];
    return (this.buffer = f);
  };
  u.prototype.H = function () {
    var a,
      b = this.b;
    z
      ? this.B
        ? ((a = new Uint8Array(b)), a.set(this.a.subarray(0, b)))
        : (a = this.a.subarray(0, b))
      : (this.a.length > b && (this.a.length = b), (a = this.a));
    return (this.buffer = a);
  };
  x.prototype.p = function () {
    var b = this.input,
      e,
      f;
    e = this.A.p();
    this.c = this.A.c;
    this.M &&
      ((f =
        ((b[this.c++] << 24) |
          (b[this.c++] << 16) |
          (b[this.c++] << 8) |
          b[this.c++]) >>>
        0),
      f !== d(e) && a(Error("invalid adler-32 checksum")));
    return e;
  };
  b("Zlib.Inflate", x);
  b("Zlib.Inflate.BufferType", C);
  C.ADAPTIVE = C.C;
  C.BLOCK = C.D;
  b("Zlib.Inflate.prototype.decompress", x.prototype.p);
  C = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
  z && new Uint16Array(C);
  C = [
    3,
    4,
    5,
    6,
    7,
    8,
    9,
    10,
    11,
    13,
    15,
    17,
    19,
    23,
    27,
    31,
    35,
    43,
    51,
    59,
    67,
    83,
    99,
    115,
    131,
    163,
    195,
    227,
    258,
    258,
    258,
  ];
  z && new Uint16Array(C);
  C = [
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    1,
    1,
    1,
    1,
    2,
    2,
    2,
    2,
    3,
    3,
    3,
    3,
    4,
    4,
    4,
    4,
    5,
    5,
    5,
    5,
    0,
    0,
    0,
  ];
  z && new Uint8Array(C);
  C = [
    1,
    2,
    3,
    4,
    5,
    7,
    9,
    13,
    17,
    25,
    33,
    49,
    65,
    97,
    129,
    193,
    257,
    385,
    513,
    769,
    1025,
    1537,
    2049,
    3073,
    4097,
    6145,
    8193,
    12289,
    16385,
    24577,
  ];
  z && new Uint16Array(C);
  C = [
    0,
    0,
    0,
    0,
    1,
    1,
    2,
    2,
    3,
    3,
    4,
    4,
    5,
    5,
    6,
    6,
    7,
    7,
    8,
    8,
    9,
    9,
    10,
    10,
    11,
    11,
    12,
    12,
    13,
    13,
  ];
  z && new Uint8Array(C);
  C = new (z ? Uint8Array : Array)(288);
  D = 0;
  for (E = C.length; D < E; ++D)
    C[D] = 143 >= D ? 8 : 255 >= D ? 9 : 279 >= D ? 7 : 8;
  g(C);
  C = new (z ? Uint8Array : Array)(30);
  D = 0;
  for (E = C.length; D < E; ++D) C[D] = 5;
  g(C);
  var W = 8;
}.call(this));
_p = window;
_p = _p.Zlib = _p.Zlib;
_p.Deflate = _p.Deflate;
_p.Deflate.compress = _p.Deflate.compress;
_p.Inflate = _p.Inflate;
_p.Inflate.BufferType = _p.Inflate.BufferType;
_p.Inflate.prototype.decompress = _p.Inflate.prototype.decompress;
cc.TGA_OK = 0;
cc.TGA_ERROR_FILE_OPEN = 1;
cc.TGA_ERROR_READING_FILE = 2;
cc.TGA_ERROR_INDEXED_COLOR = 3;
cc.TGA_ERROR_MEMORY = 4;
cc.TGA_ERROR_COMPRESSED_FILE = 5;
cc.ImageTGA = function (a, b, d, e, f, g, h) {
  this.status = a || 0;
  this.type = b || 0;
  this.pixelDepth = d || 0;
  this.width = e || 0;
  this.height = f || 0;
  this.imageData = g || [];
  this.flipped = h || 0;
};
cc.tgaLoadHeader = function (a, b, d) {
  var e = 2;
  if (e + 1 > b) return !1;
  a = new cc.BinaryStreamReader(a);
  a.setOffset(e);
  d.type = a.readByte();
  e += 10;
  if (e + 4 + 1 > b) return !1;
  a.setOffset(e);
  d.width = a.readUnsignedShort();
  d.height = a.readUnsignedInteger();
  d.pixelDepth = a.readByte();
  if (e + 5 + 1 > b) return !1;
  b = a.readByte();
  d.flipped = 0;
  b & 32 && (d.flipped = 1);
  return !0;
};
cc.tgaLoadImageData = function (a, b, d) {
  var e, f;
  e = 0 | (d.pixelDepth / 2);
  f = d.height * d.width * e;
  if (18 + f > b) return !1;
  d.imageData = cc.__getSubArray(a, 18, 18 + f);
  if (3 <= e)
    for (a = 0; a < f; a += e)
      (b = d.imageData[a]),
        (d.imageData[a] = d.imageData[a + 2]),
        (d.imageData[a + 2] = b);
  return !0;
};
cc.tgaRGBtogreyscale = function (a) {
  var b, d;
  if (8 !== a.pixelDepth) {
    var e = a.pixelDepth / 8,
      f = new Uint8Array(a.height * a.width);
    if (null !== f) {
      for (d = b = 0; d < a.width * a.height; b += e, d++)
        f[d] =
          0.3 * a.imageData[b] +
          0.59 * a.imageData[b + 1] +
          0.11 * a.imageData[b + 2];
      a.pixelDepth = 8;
      a.type = 3;
      a.imageData = f;
    }
  }
};
cc.tgaDestroy = function (a) {
  a && (a.imageData = null);
};
cc.tgaLoadRLEImageData = function (a, b, d) {
  var e,
    f,
    g,
    h = 0,
    k = 0,
    m = 0,
    n = [],
    p = 0,
    r = 18;
  e = d.pixelDepth / 8;
  f = d.height * d.width;
  for (g = 0; g < f; g++) {
    if (0 !== p) p--, (k = 0 !== m);
    else {
      if (r + 1 > b) break;
      p = a[r];
      r += 1;
      (m = p & 128) && (p -= 128);
      k = 0;
    }
    if (!k) {
      if (r + e > b) break;
      n = cc.__getSubArray(a, r, r + e);
      r += e;
      3 <= e && ((k = n[0]), (n[0] = n[2]), (n[2] = k));
    }
    for (k = 0; k < e; k++) d.imageData[h + k] = n[k];
    h += e;
  }
  return !0;
};
cc.tgaFlipImage = function (a) {
  for (var b = (a.pixelDepth / 8) * a.width, d = 0; d < a.height / 2; d++) {
    var e = cc.__getSubArray(a.imageData, d * b, d * b + b);
    cc.__setDataToArray(
      cc.__getSubArray(a.imageData, (a.height - (d + 1)) * b, b),
      a.imageData,
      d * b
    );
    cc.__setDataToArray(e, a.imageData, (a.height - (d + 1)) * b);
  }
  a.flipped = 0;
};
cc.__getSubArray = function (a, b, d) {
  return a instanceof Array ? a.slice(b, d) : a.subarray(b, d);
};
cc.__setDataToArray = function (a, b, d) {
  for (var e = 0; e < a.length; e++) b[d + e] = a[e];
};
cc.BinaryStreamReader = cc.Class.extend({
  _binaryData: null,
  _offset: 0,
  ctor: function (a) {
    this._binaryData = a;
  },
  setBinaryData: function (a) {
    this._binaryData = a;
    this._offset = 0;
  },
  getBinaryData: function () {
    return this._binaryData;
  },
  _checkSize: function (a) {
    if (!(this._offset + Math.ceil(a / 8) < this._data.length))
      throw Error("Index out of bound");
  },
  _decodeFloat: function (a, b) {
    var d = a + b + 1,
      e = d >> 3;
    this._checkSize(d);
    var d = Math.pow(2, b - 1) - 1,
      f = this._readBits(a + b, 1, e),
      g = this._readBits(a, b, e),
      h = 0,
      k = 2,
      m = 0;
    do
      for (
        var n = this._readByte(++m, e), p = a % 8 || 8, r = 1 << p;
        (r >>= 1);

      )
        n & r && (h += 1 / k), (k *= 2);
    while ((a -= p));
    this._offset += e;
    return g === (d << 1) + 1
      ? h
        ? NaN
        : f
        ? -Infinity
        : Infinity
      : (1 + -2 * f) *
          (g || h
            ? g
              ? Math.pow(2, g - d) * (1 + h)
              : Math.pow(2, -d + 1) * h
            : 0);
  },
  _readByte: function (a, b) {
    return this._data[this._offset + b - a - 1];
  },
  _decodeInt: function (a, b) {
    var d = this._readBits(0, a, a / 8),
      e = Math.pow(2, a);
    this._offset += a / 8;
    return b && d >= e / 2 ? d - e : d;
  },
  _shl: function (a, b) {
    for (
      ++b;
      --b;
      a =
        1073741824 === ((a %= 2147483648) & 1073741824)
          ? 2 * a
          : 2 * (a - 1073741824) + 2147483648
    );
    return a;
  },
  _readBits: function (a, b, d) {
    var e = (a + b) % 8,
      f = a % 8,
      g = d - (a >> 3) - 1;
    a = d + (-(a + b) >> 3);
    var h = g - a;
    b = (this._readByte(g, d) >> f) & ((1 << (h ? 8 - f : b)) - 1);
    for (
      h &&
      e &&
      (b += (this._readByte(a++, d) & ((1 << e) - 1)) << ((h-- << 3) - f));
      h;

    )
      b += this._shl(this._readByte(a++, d), (h-- << 3) - f);
    return b;
  },
  readInteger: function () {
    return this._decodeInt(32, !0);
  },
  readUnsignedInteger: function () {
    return this._decodeInt(32, !1);
  },
  readSingle: function () {
    return this._decodeFloat(23, 8);
  },
  readShort: function () {
    return this._decodeInt(16, !0);
  },
  readUnsignedShort: function () {
    return this._decodeInt(16, !1);
  },
  readByte: function () {
    var a = this._data[this._offset];
    this._offset += 1;
    return a;
  },
  readData: function (a, b) {
    return this._binaryData instanceof Array
      ? this._binaryData.slice(a, b)
      : this._binaryData.subarray(a, b);
  },
  setOffset: function (a) {
    this._offset = a;
  },
  getOffset: function () {
    return this._offset;
  },
});
cc.TMX_ORIENTATION_ORTHO = 0;
cc.TMX_ORIENTATION_HEX = 1;
cc.TMX_ORIENTATION_ISO = 2;
cc.TMXTiledMap = cc.Node.extend({
  properties: null,
  mapOrientation: null,
  objectGroups: null,
  _mapSize: null,
  _tileSize: null,
  _tileProperties: null,
  _className: "TMXTiledMap",
  ctor: function (a, b) {
    cc.Node.prototype.ctor.call(this);
    this._mapSize = cc.size(0, 0);
    this._tileSize = cc.size(0, 0);
    void 0 !== b
      ? this.initWithXML(a, b)
      : void 0 !== a && this.initWithTMXFile(a);
  },
  getMapSize: function () {
    return cc.size(this._mapSize.width, this._mapSize.height);
  },
  setMapSize: function (a) {
    this._mapSize.width = a.width;
    this._mapSize.height = a.height;
  },
  _getMapWidth: function () {
    return this._mapSize.width;
  },
  _setMapWidth: function (a) {
    this._mapSize.width = a;
  },
  _getMapHeight: function () {
    return this._mapSize.height;
  },
  _setMapHeight: function (a) {
    this._mapSize.height = a;
  },
  getTileSize: function () {
    return cc.size(this._tileSize.width, this._tileSize.height);
  },
  setTileSize: function (a) {
    this._tileSize.width = a.width;
    this._tileSize.height = a.height;
  },
  _getTileWidth: function () {
    return this._tileSize.width;
  },
  _setTileWidth: function (a) {
    this._tileSize.width = a;
  },
  _getTileHeight: function () {
    return this._tileSize.height;
  },
  _setTileHeight: function (a) {
    this._tileSize.height = a;
  },
  getMapOrientation: function () {
    return this.mapOrientation;
  },
  setMapOrientation: function (a) {
    this.mapOrientation = a;
  },
  getObjectGroups: function () {
    return this.objectGroups;
  },
  setObjectGroups: function (a) {
    this.objectGroups = a;
  },
  getProperties: function () {
    return this.properties;
  },
  setProperties: function (a) {
    this.properties = a;
  },
  initWithTMXFile: function (a) {
    if (!a || 0 === a.length)
      throw Error(
        "cc.TMXTiledMap.initWithTMXFile(): tmxFile should be non-null or non-empty string."
      );
    this.height = this.width = 0;
    a = new cc.TMXMapInfo(a);
    if (!a) return !1;
    var b = a.getTilesets();
    (b && 0 !== b.length) ||
      cc.log(
        "cc.TMXTiledMap.initWithTMXFile(): Map not found. Please check the filename."
      );
    this._buildWithMapInfo(a);
    return !0;
  },
  initWithXML: function (a, b) {
    this.height = this.width = 0;
    var d = new cc.TMXMapInfo(a, b),
      e = d.getTilesets();
    (e && 0 !== e.length) ||
      cc.log(
        "cc.TMXTiledMap.initWithXML(): Map not found. Please check the filename."
      );
    this._buildWithMapInfo(d);
    return !0;
  },
  _buildWithMapInfo: function (a) {
    this._mapSize = a.getMapSize();
    this._tileSize = a.getTileSize();
    this.mapOrientation = a.orientation;
    this.objectGroups = a.getObjectGroups();
    this.properties = a.properties;
    this._tileProperties = a.getTileProperties();
    var b = 0,
      d = a.getLayers();
    if (d)
      for (var e = null, f = 0, g = d.length; f < g; f++)
        (e = d[f]) &&
          e.visible &&
          ((e = this._parseLayer(e, a)),
          this.addChild(e, b, b),
          (this.width = Math.max(this.width, e.width)),
          (this.height = Math.max(this.height, e.height)),
          b++);
  },
  allLayers: function () {
    for (var a = [], b = this._children, d = 0, e = b.length; d < e; d++) {
      var f = b[d];
      f && f instanceof cc.TMXLayer && a.push(f);
    }
    return a;
  },
  getLayer: function (a) {
    if (!a || 0 === a.length)
      throw Error(
        "cc.TMXTiledMap.getLayer(): layerName should be non-null or non-empty string."
      );
    for (var b = this._children, d = 0; d < b.length; d++) {
      var e = b[d];
      if (e && e.layerName === a) return e;
    }
    return null;
  },
  getObjectGroup: function (a) {
    if (!a || 0 === a.length)
      throw Error(
        "cc.TMXTiledMap.getObjectGroup(): groupName should be non-null or non-empty string."
      );
    if (this.objectGroups)
      for (var b = 0; b < this.objectGroups.length; b++) {
        var d = this.objectGroups[b];
        if (d && d.groupName === a) return d;
      }
    return null;
  },
  getProperty: function (a) {
    return this.properties[a.toString()];
  },
  propertiesForGID: function (a) {
    cc.log(
      "propertiesForGID is deprecated. Please use getPropertiesForGID instead."
    );
    return this.getPropertiesForGID[a];
  },
  getPropertiesForGID: function (a) {
    return this._tileProperties[a];
  },
  _parseLayer: function (a, b) {
    var d = this._tilesetForLayer(a, b),
      d = new cc.TMXLayer(d, a, b);
    a.ownTiles = !1;
    return d;
  },
  _tilesetForLayer: function (a, b) {
    var d = a._layerSize,
      e = b.getTilesets();
    if (e)
      for (var f = e.length - 1; 0 <= f; f--) {
        var g = e[f];
        if (g)
          for (var h = 0; h < d.height; h++)
            for (var k = 0; k < d.width; k++) {
              var m = a._tiles[k + d.width * h];
              if (0 !== m && (m & cc.TMX_TILE_FLIPPED_MASK) >>> 0 >= g.firstGid)
                return g;
            }
      }
    cc.log("cocos2d: Warning: TMX Layer " + a.name + " has no tiles");
    return null;
  },
});
_p = cc.TMXTiledMap.prototype;
cc.defineGetterSetter(_p, "mapWidth", _p._getMapWidth, _p._setMapWidth);
cc.defineGetterSetter(_p, "mapHeight", _p._getMapHeight, _p._setMapHeight);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXTiledMap.create = function (a, b) {
  return new cc.TMXTiledMap(a, b);
};
cc.TMX_PROPERTY_NONE = 0;
cc.TMX_PROPERTY_MAP = 1;
cc.TMX_PROPERTY_LAYER = 2;
cc.TMX_PROPERTY_OBJECTGROUP = 3;
cc.TMX_PROPERTY_OBJECT = 4;
cc.TMX_PROPERTY_TILE = 5;
cc.TMX_TILE_HORIZONTAL_FLAG = 2147483648;
cc.TMX_TILE_VERTICAL_FLAG = 1073741824;
cc.TMX_TILE_DIAGONAL_FLAG = 536870912;
cc.TMX_TILE_FLIPPED_ALL =
  (cc.TMX_TILE_HORIZONTAL_FLAG |
    cc.TMX_TILE_VERTICAL_FLAG |
    cc.TMX_TILE_DIAGONAL_FLAG) >>>
  0;
cc.TMX_TILE_FLIPPED_MASK = ~cc.TMX_TILE_FLIPPED_ALL >>> 0;
cc.TMXLayerInfo = cc.Class.extend({
  properties: null,
  name: "",
  _layerSize: null,
  _tiles: null,
  visible: null,
  _opacity: null,
  ownTiles: !0,
  _minGID: 1e5,
  _maxGID: 0,
  offset: null,
  ctor: function () {
    this.properties = [];
    this.name = "";
    this._tiles = this._layerSize = null;
    this.visible = !0;
    this._opacity = 0;
    this.ownTiles = !0;
    this._minGID = 1e5;
    this._maxGID = 0;
    this.offset = cc.p(0, 0);
  },
  getProperties: function () {
    return this.properties;
  },
  setProperties: function (a) {
    this.properties = a;
  },
});
cc.TMXTilesetInfo = cc.Class.extend({
  name: "",
  firstGid: 0,
  _tileSize: null,
  spacing: 0,
  margin: 0,
  sourceImage: "",
  imageSize: null,
  ctor: function () {
    this._tileSize = cc.size(0, 0);
    this.imageSize = cc.size(0, 0);
  },
  rectForGID: function (a, b) {
    var d = b || cc.rect(0, 0, 0, 0);
    d.width = this._tileSize.width;
    d.height = this._tileSize.height;
    a &= cc.TMX_TILE_FLIPPED_MASK;
    a -= parseInt(this.firstGid, 10);
    var e = parseInt(
      (this.imageSize.width - 2 * this.margin + this.spacing) /
        (this._tileSize.width + this.spacing),
      10
    );
    d.x = parseInt(
      (a % e) * (this._tileSize.width + this.spacing) + this.margin,
      10
    );
    d.y = parseInt(
      parseInt(a / e, 10) * (this._tileSize.height + this.spacing) +
        this.margin,
      10
    );
    return d;
  },
});
cc.TMXMapInfo = cc.SAXParser.extend({
  properties: null,
  orientation: null,
  parentElement: null,
  parentGID: null,
  layerAttrs: 0,
  storingCharacters: !1,
  tmxFileName: null,
  currentString: null,
  _objectGroups: null,
  _mapSize: null,
  _tileSize: null,
  _layers: null,
  _tilesets: null,
  _tileProperties: null,
  _resources: "",
  _currentFirstGID: 0,
  ctor: function (a, b) {
    cc.SAXParser.prototype.ctor.apply(this);
    this._mapSize = cc.size(0, 0);
    this._tileSize = cc.size(0, 0);
    this._layers = [];
    this._tilesets = [];
    this._objectGroups = [];
    this.properties = [];
    this._tileProperties = {};
    this._currentFirstGID = 0;
    void 0 !== b
      ? this.initWithXML(a, b)
      : void 0 !== a && this.initWithTMXFile(a);
  },
  getOrientation: function () {
    return this.orientation;
  },
  setOrientation: function (a) {
    this.orientation = a;
  },
  getMapSize: function () {
    return cc.size(this._mapSize.width, this._mapSize.height);
  },
  setMapSize: function (a) {
    this._mapSize.width = a.width;
    this._mapSize.height = a.height;
  },
  _getMapWidth: function () {
    return this._mapSize.width;
  },
  _setMapWidth: function (a) {
    this._mapSize.width = a;
  },
  _getMapHeight: function () {
    return this._mapSize.height;
  },
  _setMapHeight: function (a) {
    this._mapSize.height = a;
  },
  getTileSize: function () {
    return cc.size(this._tileSize.width, this._tileSize.height);
  },
  setTileSize: function (a) {
    this._tileSize.width = a.width;
    this._tileSize.height = a.height;
  },
  _getTileWidth: function () {
    return this._tileSize.width;
  },
  _setTileWidth: function (a) {
    this._tileSize.width = a;
  },
  _getTileHeight: function () {
    return this._tileSize.height;
  },
  _setTileHeight: function (a) {
    this._tileSize.height = a;
  },
  getLayers: function () {
    return this._layers;
  },
  setLayers: function (a) {
    this._layers.push(a);
  },
  getTilesets: function () {
    return this._tilesets;
  },
  setTilesets: function (a) {
    this._tilesets.push(a);
  },
  getObjectGroups: function () {
    return this._objectGroups;
  },
  setObjectGroups: function (a) {
    this._objectGroups.push(a);
  },
  getParentElement: function () {
    return this.parentElement;
  },
  setParentElement: function (a) {
    this.parentElement = a;
  },
  getParentGID: function () {
    return this.parentGID;
  },
  setParentGID: function (a) {
    this.parentGID = a;
  },
  getLayerAttribs: function () {
    return this.layerAttrs;
  },
  setLayerAttribs: function (a) {
    this.layerAttrs = a;
  },
  getStoringCharacters: function () {
    return this.storingCharacters;
  },
  setStoringCharacters: function (a) {
    this.storingCharacters = a;
  },
  getProperties: function () {
    return this.properties;
  },
  setProperties: function (a) {
    this.properties = a;
  },
  initWithTMXFile: function (a) {
    this._internalInit(a, null);
    return this.parseXMLFile(a);
  },
  initWithXML: function (a, b) {
    this._internalInit(null, b);
    return this.parseXMLString(a);
  },
  parseXMLFile: function (a, b) {
    var d = (b = b || !1) ? a : cc.loader.getRes(a);
    if (!d) throw Error("Please load the resource first : " + a);
    var e,
      f,
      d = this._parseXML(d).documentElement;
    e = d.getAttribute("version");
    f = d.getAttribute("orientation");
    if (
      "map" === d.nodeName &&
      ("1.0" !== e &&
        null !== e &&
        cc.log("cocos2d: TMXFormat: Unsupported TMX version:" + e),
      "orthogonal" === f
        ? (this.orientation = cc.TMX_ORIENTATION_ORTHO)
        : "isometric" === f
        ? (this.orientation = cc.TMX_ORIENTATION_ISO)
        : "hexagonal" === f
        ? (this.orientation = cc.TMX_ORIENTATION_HEX)
        : null !== f &&
          cc.log("cocos2d: TMXFomat: Unsupported orientation:" + f),
      (e = cc.size(0, 0)),
      (e.width = parseFloat(d.getAttribute("width"))),
      (e.height = parseFloat(d.getAttribute("height"))),
      this.setMapSize(e),
      (e = cc.size(0, 0)),
      (e.width = parseFloat(d.getAttribute("tilewidth"))),
      (e.height = parseFloat(d.getAttribute("tileheight"))),
      this.setTileSize(e),
      (f = d.querySelectorAll("map \x3e properties \x3e  property")))
    ) {
      var g = {};
      for (e = 0; e < f.length; e++)
        g[f[e].getAttribute("name")] = f[e].getAttribute("value");
      this.properties = g;
    }
    g = d.getElementsByTagName("tileset");
    "map" !== d.nodeName && ((g = []), g.push(d));
    for (e = 0; e < g.length; e++) {
      f = g[e];
      var h = f.getAttribute("source");
      if (h)
        (f = b
          ? cc.path.join(this._resources, h)
          : cc.path.changeBasename(a, h)),
          this.parseXMLFile(f);
      else {
        h = new cc.TMXTilesetInfo();
        h.name = f.getAttribute("name") || "";
        h.firstGid = parseInt(f.getAttribute("firstgid")) || 0;
        h.spacing = parseInt(f.getAttribute("spacing")) || 0;
        h.margin = parseInt(f.getAttribute("margin")) || 0;
        var k = cc.size(0, 0);
        k.width = parseFloat(f.getAttribute("tilewidth"));
        k.height = parseFloat(f.getAttribute("tileheight"));
        h._tileSize = k;
        var k = f.getElementsByTagName("image")[0].getAttribute("source"),
          m = -1;
        this.tmxFileName && (m = this.tmxFileName.lastIndexOf("/"));
        -1 !== m
          ? ((m = this.tmxFileName.substr(0, m + 1)), (h.sourceImage = m + k))
          : (h.sourceImage =
              this._resources + (this._resources ? "/" : "") + k);
        this.setTilesets(h);
        if ((k = f.getElementsByTagName("tile")))
          for (m = 0; m < k.length; m++) {
            f = k[m];
            this.parentGID =
              parseInt(h.firstGid) + parseInt(f.getAttribute("id") || 0);
            var n = f.querySelectorAll("properties \x3e property");
            if (n) {
              var p = {};
              for (f = 0; f < n.length; f++) {
                var r = n[f].getAttribute("name");
                p[r] = n[f].getAttribute("value");
              }
              this._tileProperties[this.parentGID] = p;
            }
          }
      }
    }
    if ((g = d.getElementsByTagName("layer")))
      for (e = 0; e < g.length; e++) {
        m = g[e];
        n = m.getElementsByTagName("data")[0];
        h = new cc.TMXLayerInfo();
        h.name = m.getAttribute("name");
        f = cc.size(0, 0);
        f.width = parseFloat(m.getAttribute("width"));
        f.height = parseFloat(m.getAttribute("height"));
        h._layerSize = f;
        f = m.getAttribute("visible");
        h.visible = "0" != f;
        f = m.getAttribute("opacity") || 1;
        h._opacity = f ? parseInt(255 * parseFloat(f)) : 255;
        h.offset = cc.p(
          parseFloat(m.getAttribute("x")) || 0,
          parseFloat(m.getAttribute("y")) || 0
        );
        p = "";
        for (f = 0; f < n.childNodes.length; f++)
          p += n.childNodes[f].nodeValue;
        p = p.trim();
        f = n.getAttribute("compression");
        r = n.getAttribute("encoding");
        if (f && "gzip" !== f && "zlib" !== f)
          return (
            cc.log(
              "cc.TMXMapInfo.parseXMLFile(): unsupported compression method"
            ),
            null
          );
        switch (f) {
          case "gzip":
            k = cc.unzipBase64AsArray(p, 4);
            break;
          case "zlib":
            k = new Zlib.Inflate(cc.Codec.Base64.decodeAsArray(p, 1));
            k = cc.uint8ArrayToUint32Array(k.decompress());
            break;
          case null:
          case "":
            if ("base64" === r) k = cc.Codec.Base64.decodeAsArray(p, 4);
            else if ("csv" === r)
              for (k = [], f = p.split(","), n = 0; n < f.length; n++)
                k.push(parseInt(f[n]));
            else
              for (
                f = n.getElementsByTagName("tile"), k = [], n = 0;
                n < f.length;
                n++
              )
                k.push(parseInt(f[n].getAttribute("gid")));
            break;
          default:
            this.layerAttrs === cc.TMXLayerInfo.ATTRIB_NONE &&
              cc.log(
                "cc.TMXMapInfo.parseXMLFile(): Only base64 and/or gzip/zlib maps are supported"
              );
        }
        k && (h._tiles = new Uint32Array(k));
        if ((m = m.querySelectorAll("properties \x3e property"))) {
          n = {};
          for (f = 0; f < m.length; f++)
            n[m[f].getAttribute("name")] = m[f].getAttribute("value");
          h.properties = n;
        }
        this.setLayers(h);
      }
    if ((k = d.getElementsByTagName("objectgroup")))
      for (e = 0; e < k.length; e++) {
        h = k[e];
        g = new cc.TMXObjectGroup();
        g.groupName = h.getAttribute("name");
        g.setPositionOffset(
          cc.p(
            parseFloat(h.getAttribute("x")) * this.getTileSize().width || 0,
            parseFloat(h.getAttribute("y")) * this.getTileSize().height || 0
          )
        );
        if (
          (m = h.querySelectorAll("objectgroup \x3e properties \x3e property"))
        )
          for (f = 0; f < m.length; f++)
            (n = {}),
              (n[m[f].getAttribute("name")] = m[f].getAttribute("value")),
              (g.properties = n);
        h = h.querySelectorAll("object");
        m = cc.director.getContentScaleFactor();
        if (h)
          for (f = 0; f < h.length; f++) {
            p = h[f];
            n = {};
            n.name = p.getAttribute("name") || "";
            n.type = p.getAttribute("type") || "";
            n.width = parseInt(p.getAttribute("width")) || 0;
            n.height = parseInt(p.getAttribute("height")) || 0;
            n.x =
              (((p.getAttribute("x") || 0) | 0) + g.getPositionOffset().x) / m;
            r = ((p.getAttribute("y") || 0) | 0) + g.getPositionOffset().y / m;
            n.y =
              (parseInt(this.getMapSize().height * this.getTileSize().height) -
                r -
                n.height) /
              cc.director.getContentScaleFactor();
            n.rotation = parseInt(p.getAttribute("rotation")) || 0;
            if ((r = p.querySelectorAll("properties \x3e property")))
              for (var s = 0; s < r.length; s++)
                n[r[s].getAttribute("name")] = r[s].getAttribute("value");
            (r = p.querySelectorAll("polygon")) &&
              0 < r.length &&
              (r = r[0].getAttribute("points")) &&
              (n.points = this._parsePointsString(r));
            (p = p.querySelectorAll("polyline")) &&
              0 < p.length &&
              (p = p[0].getAttribute("points")) &&
              (n.polylinePoints = this._parsePointsString(p));
            g.setObjects(n);
          }
        this.setObjectGroups(g);
      }
    return d;
  },
  _parsePointsString: function (a) {
    if (!a) return null;
    var b = [];
    a = a.split(" ");
    for (var d = 0; d < a.length; d++) {
      var e = a[d].split(",");
      b.push({ x: e[0], y: e[1] });
    }
    return b;
  },
  parseXMLString: function (a) {
    return this.parseXMLFile(a, !0);
  },
  getTileProperties: function () {
    return this._tileProperties;
  },
  setTileProperties: function (a) {
    this._tileProperties.push(a);
  },
  getCurrentString: function () {
    return this.currentString;
  },
  setCurrentString: function (a) {
    this.currentString = a;
  },
  getTMXFileName: function () {
    return this.tmxFileName;
  },
  setTMXFileName: function (a) {
    this.tmxFileName = a;
  },
  _internalInit: function (a, b) {
    this._tilesets.length = 0;
    this._layers.length = 0;
    this.tmxFileName = a;
    b && (this._resources = b);
    this._objectGroups.length = 0;
    this.properties.length = 0;
    this._tileProperties.length = 0;
    this.currentString = "";
    this.storingCharacters = !1;
    this.layerAttrs = cc.TMXLayerInfo.ATTRIB_NONE;
    this.parentElement = cc.TMX_PROPERTY_NONE;
    this._currentFirstGID = 0;
  },
});
_p = cc.TMXMapInfo.prototype;
cc.defineGetterSetter(_p, "mapWidth", _p._getMapWidth, _p._setMapWidth);
cc.defineGetterSetter(_p, "mapHeight", _p._getMapHeight, _p._setMapHeight);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXMapInfo.create = function (a, b) {
  return new cc.TMXMapInfo(a, b);
};
cc.loader.register(["tmx", "tsx"], cc._txtLoader);
cc.TMXLayerInfo.ATTRIB_NONE = 1;
cc.TMXLayerInfo.ATTRIB_BASE64 = 2;
cc.TMXLayerInfo.ATTRIB_GZIP = 4;
cc.TMXLayerInfo.ATTRIB_ZLIB = 8;
cc.TMXObjectGroup = cc.Class.extend({
  properties: null,
  groupName: "",
  _positionOffset: null,
  _objects: null,
  ctor: function () {
    this.groupName = "";
    this._positionOffset = cc.p(0, 0);
    this.properties = [];
    this._objects = [];
  },
  getPositionOffset: function () {
    return cc.p(this._positionOffset);
  },
  setPositionOffset: function (a) {
    this._positionOffset.x = a.x;
    this._positionOffset.y = a.y;
  },
  getProperties: function () {
    return this.properties;
  },
  setProperties: function (a) {
    this.properties.push(a);
  },
  getGroupName: function () {
    return this.groupName.toString();
  },
  setGroupName: function (a) {
    this.groupName = a;
  },
  propertyNamed: function (a) {
    return this.properties[a];
  },
  objectNamed: function (a) {
    return this.getObject(a);
  },
  getObject: function (a) {
    if (this._objects && 0 < this._objects.length)
      for (var b = this._objects, d = 0, e = b.length; d < e; d++) {
        var f = b[d].name;
        if (f && f === a) return b[d];
      }
    return null;
  },
  getObjects: function () {
    return this._objects;
  },
  setObjects: function (a) {
    this._objects.push(a);
  },
});
cc.TMXLayer = cc.SpriteBatchNode.extend({
  tiles: null,
  tileset: null,
  layerOrientation: null,
  properties: null,
  layerName: "",
  _textures: null,
  _texGrids: null,
  _spriteTiles: null,
  _layerSize: null,
  _mapTileSize: null,
  _opacity: 255,
  _minGID: null,
  _maxGID: null,
  _vertexZvalue: null,
  _useAutomaticVertexZ: null,
  _reusedTile: null,
  _atlasIndexArray: null,
  _contentScaleFactor: null,
  _className: "TMXLayer",
  ctor: function (a, b, d) {
    cc.SpriteBatchNode.prototype.ctor.call(this);
    this._descendants = [];
    this._layerSize = cc.size(0, 0);
    this._mapTileSize = cc.size(0, 0);
    this._spriteTiles = {};
    void 0 !== d && this.initWithTilesetInfo(a, b, d);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.TMXLayer.CanvasRenderCmd(this)
      : new cc.TMXLayer.WebGLRenderCmd(this);
  },
  _fillTextureGrids: function (a, b) {
    var d = this._textures[b];
    if (d.isLoaded()) {
      (a.imageSize.width && a.imageSize.height) ||
        ((a.imageSize.width = d.width), (a.imageSize.height = d.height));
      for (
        var e = a._tileSize.width,
          f = a._tileSize.height,
          g = d._contentSize.width,
          d = d._contentSize.height,
          h = a.spacing,
          k = a.margin,
          m = a.firstGid,
          h =
            a.firstGid +
            Math.floor((d - 2 * k + h) / (f + h)) *
              Math.floor((g - 2 * k + h) / (e + h)),
          k = this._texGrids,
          n = null,
          p = k[m] ? !0 : !1;
        m < h;
        ++m
      ) {
        p && !k[m] && (p = !1);
        if (!p && k[m]) break;
        n = {
          texId: b,
          x: 0,
          y: 0,
          width: e,
          height: f,
          t: 0,
          l: 0,
          r: 0,
          b: 0,
        };
        a.rectForGID(m, n);
        n.t = n.y / d;
        n.l = n.x / g;
        n.r = (n.x + n.width) / g;
        n.b = (n.y + n.height) / d;
        k[m] = n;
      }
    } else
      d.addEventListener(
        "load",
        function () {
          this._fillTextureGrids(a, b);
        },
        this
      );
  },
  initWithTilesetInfo: function (a, b, d) {
    var e = b._layerSize;
    parseInt(e.width * e.height);
    this.layerName = b.name;
    this.tiles = b._tiles;
    this.properties = b.properties;
    this._layerSize = e;
    this._minGID = b._minGID;
    this._maxGID = b._maxGID;
    this._opacity = b._opacity;
    this.tileset = a;
    this.layerOrientation = d.orientation;
    this._mapTileSize = d.getTileSize();
    if ((d = d._tilesets)) {
      this._textures = [];
      this._texGrids = [];
      for (var f = d.length, g, h, e = 0; e < f; ++e)
        (g = d[e]),
          (h = cc.textureCache.addImage(g.sourceImage)),
          this._textures.push(h),
          this._fillTextureGrids(g, e),
          g === a && (this._texture = h);
    }
    a = this._calculateLayerOffset(b.offset);
    this.setPosition(cc.pointPixelsToPoints(a));
    this._parseInternalProperties();
    this.setContentSize(
      cc.sizePixelsToPoints(
        cc.size(
          this._layerSize.width * this._mapTileSize.width,
          this._layerSize.height * this._mapTileSize.height
        )
      )
    );
    this._useAutomaticVertexZ = !1;
    this._vertexZvalue = 0;
    return !0;
  },
  getLayerSize: function () {
    return cc.size(this._layerSize.width, this._layerSize.height);
  },
  setLayerSize: function (a) {
    this._layerSize.width = a.width;
    this._layerSize.height = a.height;
  },
  _getLayerWidth: function () {
    return this._layerSize.width;
  },
  _setLayerWidth: function (a) {
    this._layerSize.width = a;
  },
  _getLayerHeight: function () {
    return this._layerSize.height;
  },
  _setLayerHeight: function (a) {
    this._layerSize.height = a;
  },
  getMapTileSize: function () {
    return cc.size(this._mapTileSize.width, this._mapTileSize.height);
  },
  setMapTileSize: function (a) {
    this._mapTileSize.width = a.width;
    this._mapTileSize.height = a.height;
  },
  _getTileWidth: function () {
    return this._mapTileSize.width;
  },
  _setTileWidth: function (a) {
    this._mapTileSize.width = a;
  },
  _getTileHeight: function () {
    return this._mapTileSize.height;
  },
  _setTileHeight: function (a) {
    this._mapTileSize.height = a;
  },
  getTiles: function () {
    return this.tiles;
  },
  setTiles: function (a) {
    this.tiles = a;
  },
  getTileset: function () {
    return this.tileset;
  },
  setTileset: function (a) {
    this.tileset = a;
  },
  getLayerOrientation: function () {
    return this.layerOrientation;
  },
  setLayerOrientation: function (a) {
    this.layerOrientation = a;
  },
  getProperties: function () {
    return this.properties;
  },
  setProperties: function (a) {
    this.properties = a;
  },
  getProperty: function (a) {
    return this.properties[a];
  },
  getLayerName: function () {
    return this.layerName;
  },
  setLayerName: function (a) {
    this.layerName = a;
  },
  releaseMap: function () {
    this._spriteTiles = {};
  },
  getTileAt: function (a, b) {
    if (void 0 === a)
      throw Error("cc.TMXLayer.getTileAt(): pos should be non-null");
    var d = a;
    void 0 === b && ((d = a.x), (b = a.y));
    if (
      d >= this._layerSize.width ||
      b >= this._layerSize.height ||
      0 > d ||
      0 > b
    )
      throw Error("cc.TMXLayer.getTileAt(): invalid position");
    if (!this.tiles)
      return (
        cc.log(
          "cc.TMXLayer.getTileAt(): TMXLayer: the tiles map has been released"
        ),
        null
      );
    var e = null,
      f = this.getTileGIDAt(d, b);
    if (0 === f) return e;
    var g = 0 | (d + b * this._layerSize.width),
      e = this._spriteTiles[g];
    e ||
      ((e = this._texGrids[f]),
      (f = this._textures[e.texId]),
      (e = cc.rectPixelsToPoints(e)),
      (e = new cc.Sprite(f, e)),
      e.setPosition(this.getPositionAt(d, b)),
      (d = this._vertexZForPos(d, b)),
      e.setVertexZ(d),
      e.setAnchorPoint(0, 0),
      e.setOpacity(this._opacity),
      this.addChild(e, d, g));
    return e;
  },
  getTileGIDAt: function (a, b) {
    if (void 0 === a)
      throw Error("cc.TMXLayer.getTileGIDAt(): pos should be non-null");
    var d = a;
    void 0 === b && ((d = a.x), (b = a.y));
    if (
      d >= this._layerSize.width ||
      b >= this._layerSize.height ||
      0 > d ||
      0 > b
    )
      throw Error("cc.TMXLayer.getTileGIDAt(): invalid position");
    return this.tiles
      ? (this.tiles[0 | (d + b * this._layerSize.width)] &
          cc.TMX_TILE_FLIPPED_MASK) >>>
          0
      : (cc.log(
          "cc.TMXLayer.getTileGIDAt(): TMXLayer: the tiles map has been released"
        ),
        null);
  },
  setTileGID: function (a, b, d, e) {
    if (void 0 === b)
      throw Error("cc.TMXLayer.setTileGID(): pos should be non-null");
    void 0 !== e ? (b = cc.p(b, d)) : (e = d);
    if (
      b.x >= this._layerSize.width ||
      b.y >= this._layerSize.height ||
      0 > b.x ||
      0 > b.y
    )
      throw Error("cc.TMXLayer.setTileGID(): invalid position");
    if (this.tiles)
      if (0 !== a && a < this.tileset.firstGid)
        cc.log("cc.TMXLayer.setTileGID(): invalid gid:" + a);
      else {
        e = e || 0;
        d = this.getTileFlagsAt(b);
        var f = this.getTileGIDAt(b);
        if (f !== a || d !== e)
          if (((d = (a | e) >>> 0), 0 === a)) this.removeTileAt(b);
          else if (0 === f) this._updateTileForGID(d, b);
          else {
            var f = b.x + b.y * this._layerSize.width,
              g = this.getChildByTag(f);
            if (g) {
              a = this._texGrids[a];
              var h = this._textures[a.texId];
              a = cc.rectPixelsToPoints(a);
              g.setTexture(h);
              g.setTextureRect(a, !1);
              null != e && this._setupTileSprite(g, b, d);
              this.tiles[f] = d;
            } else this._updateTileForGID(d, b);
          }
      }
    else
      cc.log(
        "cc.TMXLayer.setTileGID(): TMXLayer: the tiles map has been released"
      );
  },
  addChild: function (a, b, d) {
    cc.Node.prototype.addChild.call(this, a, b, d);
    void 0 !== d &&
      ((this._spriteTiles[d] = a),
      (a._vertexZ =
        this._vertexZ + (cc.renderer.assignedZStep * d) / this.tiles.length));
  },
  removeChild: function (a, b) {
    this._spriteTiles[a.tag] && (this._spriteTiles[a.tag] = null);
    cc.Node.prototype.removeChild.call(this, a, b);
  },
  getTileFlagsAt: function (a, b) {
    if (!a) throw Error("cc.TMXLayer.getTileFlagsAt(): pos should be non-null");
    void 0 !== b && (a = cc.p(a, b));
    if (
      a.x >= this._layerSize.width ||
      a.y >= this._layerSize.height ||
      0 > a.x ||
      0 > a.y
    )
      throw Error("cc.TMXLayer.getTileFlagsAt(): invalid position");
    return this.tiles
      ? (this.tiles[0 | (a.x + a.y * this._layerSize.width)] &
          cc.TMX_TILE_FLIPPED_ALL) >>>
          0
      : (cc.log(
          "cc.TMXLayer.getTileFlagsAt(): TMXLayer: the tiles map has been released"
        ),
        null);
  },
  removeTileAt: function (a, b) {
    if (!a) throw Error("cc.TMXLayer.removeTileAt(): pos should be non-null");
    void 0 !== b && (a = cc.p(a, b));
    if (
      a.x >= this._layerSize.width ||
      a.y >= this._layerSize.height ||
      0 > a.x ||
      0 > a.y
    )
      throw Error("cc.TMXLayer.removeTileAt(): invalid position");
    if (!this.tiles)
      cc.log(
        "cc.TMXLayer.removeTileAt(): TMXLayer: the tiles map has been released"
      );
    else if (0 !== this.getTileGIDAt(a)) {
      var d = 0 | (a.x + a.y * this._layerSize.width);
      this.tiles[d] = 0;
      (d = this._spriteTiles[d]) && this.removeChild(d, !0);
    }
  },
  getPositionAt: function (a, b) {
    void 0 !== b && (a = cc.p(a, b));
    var d = cc.p(0, 0);
    switch (this.layerOrientation) {
      case cc.TMX_ORIENTATION_ORTHO:
        d = this._positionForOrthoAt(a);
        break;
      case cc.TMX_ORIENTATION_ISO:
        d = this._positionForIsoAt(a);
        break;
      case cc.TMX_ORIENTATION_HEX:
        d = this._positionForHexAt(a);
    }
    return cc.pointPixelsToPoints(d);
  },
  _positionForIsoAt: function (a) {
    return cc.p(
      (this._mapTileSize.width / 2) * (this._layerSize.width + a.x - a.y - 1),
      (this._mapTileSize.height / 2) *
        (2 * this._layerSize.height - a.x - a.y - 2)
    );
  },
  _positionForOrthoAt: function (a) {
    return cc.p(
      a.x * this._mapTileSize.width,
      (this._layerSize.height - a.y - 1) * this._mapTileSize.height
    );
  },
  _positionForHexAt: function (a) {
    return cc.p(
      (a.x * this._mapTileSize.width * 3) / 4,
      (this._layerSize.height - a.y - 1) * this._mapTileSize.height +
        (1 === a.x % 2 ? -this._mapTileSize.height / 2 : 0)
    );
  },
  _calculateLayerOffset: function (a) {
    var b = cc.p(0, 0);
    switch (this.layerOrientation) {
      case cc.TMX_ORIENTATION_ORTHO:
        b = cc.p(
          a.x * this._mapTileSize.width,
          -a.y * this._mapTileSize.height
        );
        break;
      case cc.TMX_ORIENTATION_ISO:
        b = cc.p(
          (this._mapTileSize.width / 2) * (a.x - a.y),
          (this._mapTileSize.height / 2) * (-a.x - a.y)
        );
        break;
      case cc.TMX_ORIENTATION_HEX:
        (0 === a.x && 0 === a.y) ||
          cc.log("offset for hexagonal map not implemented yet");
    }
    return b;
  },
  _updateTileForGID: function (a, b) {
    if (this._texGrids[a]) {
      var d = 0 | (b.x + b.y * this._layerSize.width);
      d < this.tiles.length && (this.tiles[d] = a);
    }
  },
  _parseInternalProperties: function () {
    var a = this.getProperty("cc_vertexz");
    if (a)
      if ("automatic" === a) {
        this._useAutomaticVertexZ = !0;
        var a = this.getProperty("cc_alpha_func"),
          b = 0;
        a && (b = parseFloat(a));
        cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
          ((this.shaderProgram = cc.shaderCache.programForKey(
            cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST
          )),
          this.shaderProgram.use(),
          this.shaderProgram.setUniformLocationWith1f(
            cc.UNIFORM_ALPHA_TEST_VALUE_S,
            b
          ));
      } else this._vertexZvalue = parseInt(a, 10);
  },
  _setupTileSprite: function (a, b, d) {
    var e = this.getPositionAt(b);
    a.setPosition(e);
    a.setVertexZ(this._vertexZForPos(b));
    a.setAnchorPoint(0, 0);
    a.setOpacity(this._opacity);
    a.setFlippedX(!1);
    a.setFlippedY(!1);
    a.setRotation(0);
    (d & cc.TMX_TILE_DIAGONAL_FLAG) >>> 0
      ? (a.setAnchorPoint(0.5, 0.5),
        a.setPosition(e.x + a.width / 2, e.y + a.height / 2),
        (b =
          (d &
            ((cc.TMX_TILE_HORIZONTAL_FLAG | cc.TMX_TILE_VERTICAL_FLAG) >>>
              0)) >>>
          0),
        b === cc.TMX_TILE_HORIZONTAL_FLAG
          ? a.setRotation(90)
          : b === cc.TMX_TILE_VERTICAL_FLAG
          ? a.setRotation(270)
          : (b ===
            (cc.TMX_TILE_VERTICAL_FLAG | cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0
              ? a.setRotation(90)
              : a.setRotation(270),
            a.setFlippedX(!0)))
      : ((d & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0 && a.setFlippedX(!0),
        (d & cc.TMX_TILE_VERTICAL_FLAG) >>> 0 && a.setFlippedY(!0));
  },
  _vertexZForPos: function (a, b) {
    void 0 === b && ((b = a.y), (a = a.x));
    var d = 0,
      e = 0;
    if (this._useAutomaticVertexZ)
      switch (this.layerOrientation) {
        case cc.TMX_ORIENTATION_ISO:
          e = this._layerSize.width + this._layerSize.height;
          d = -(e - (a + b));
          break;
        case cc.TMX_ORIENTATION_ORTHO:
          d = -(this._layerSize.height - b);
          break;
        case cc.TMX_ORIENTATION_HEX:
          cc.log("TMX Hexa zOrder not supported");
          break;
        default:
          cc.log("TMX invalid value");
      }
    else d = this._vertexZvalue;
    return d;
  },
});
_p = cc.TMXLayer.prototype;
cc.defineGetterSetter(_p, "layerWidth", _p._getLayerWidth, _p._setLayerWidth);
cc.defineGetterSetter(
  _p,
  "layerHeight",
  _p._getLayerHeight,
  _p._setLayerHeight
);
cc.defineGetterSetter(_p, "tileWidth", _p._getTileWidth, _p._setTileWidth);
cc.defineGetterSetter(_p, "tileHeight", _p._getTileHeight, _p._setTileHeight);
cc.TMXLayer.create = function (a, b, d) {
  return new cc.TMXLayer(a, b, d);
};
(function () {
  cc.TMXLayer.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
  };
  var a = (cc.TMXLayer.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.TMXLayer.CanvasRenderCmd;
  a.visit = function (a) {
    var d = this._node,
      e = cc.renderer;
    if ((a = a || this.getParentRenderCmd())) this._curLevel = a._curLevel + 1;
    if (d._visible) {
      isNaN(d._customZ) &&
        ((d._vertexZ = e.assignedZ), (e.assignedZ += e.assignedZStep));
      this._syncStatus(a);
      a = d._children;
      var f = d._spriteTiles,
        g,
        h = a.length;
      if (0 < h) {
        d.sortAllChildren();
        for (g = 0; g < h; g++)
          if (((d = a[g]), 0 > d._localZOrder)) d._renderCmd.visit(this);
          else break;
        for (e.pushRenderCommand(this); g < h; g++)
          (d = a[g]),
            0 === d._localZOrder && f[d.tag]
              ? (isNaN(d._customZ) &&
                  ((d._vertexZ = e.assignedZ),
                  (e.assignedZ += e.assignedZStep)),
                d._renderCmd.updateStatus())
              : d._renderCmd.visit(this);
      } else e.pushRenderCommand(this);
      this._dirtyFlag = 0;
    }
  };
  a.rendering = function (a, d, e) {
    var f = this._node,
      g = f._rotationX || f._rotationY,
      h = f.layerOrientation,
      k = f._opacity / 255;
    if (f.tiles && !(0 >= k)) {
      var m = f._mapTileSize.width,
        n = f._mapTileSize.height,
        p = f.tileset._tileSize.width / cc.director._contentScaleFactor,
        r = f.tileset._tileSize.height / cc.director._contentScaleFactor,
        s = p - m,
        u = r - n,
        v = cc.winSize.width,
        t = cc.winSize.height,
        w = f._layerSize.height,
        x = f._layerSize.width,
        y = f._texGrids,
        B = f._spriteTiles,
        A = this._worldTransform,
        z = -f._contentSize.width * f._anchorPoint.x,
        C = -f._contentSize.height * f._anchorPoint.y,
        D = A.a,
        E = A.d,
        J = z * D + C * A.c + A.tx,
        z = z * A.b + C * E + A.ty,
        C = a || cc._renderContext,
        G = C.getContext(),
        F = 0,
        L = 0,
        H = x,
        I = w;
      g ||
        h !== cc.TMX_ORIENTATION_ORTHO ||
        ((F = Math.floor(-(J - s * D) / (m * D))),
        (L = Math.floor((z - u * E + n * w * E - t) / (n * E))),
        (H = Math.ceil((v - J + s * D) / (m * D))),
        (I = w - Math.floor(-(z + u * E) / (n * E))),
        0 > F && (F = 0),
        0 > L && (L = 0),
        H > x && (H = x),
        I > w && (I = w));
      var M,
        K,
        s = L * x,
        N,
        O,
        P,
        R = cc.TMX_TILE_FLIPPED_MASK,
        Q,
        V,
        S,
        U,
        X = p * D,
        W = r * E,
        T,
        da,
        Z = !1,
        aa = !1,
        u = s + F;
      for (M in B)
        if (M < u && B[M])
          (N = B[M]._renderCmd),
            0 === B[M]._localZOrder && N.rendering && N.rendering(a, d, e);
        else if (M >= u) break;
      C.setTransform(A, d, e);
      for (C.setGlobalAlpha(k); L < I; ++L) {
        for (K = F; K < H; ++K)
          if (((u = s + K), B[u]))
            (N = B[u]._renderCmd),
              0 === B[u]._localZOrder &&
                N.rendering &&
                (N.rendering(a, d, e),
                C.setTransform(A, d, e),
                C.setGlobalAlpha(k));
          else if (
            ((N = f.tiles[u]),
            (O = y[(N & R) >>> 0]) &&
              (P = f._textures[O.texId]) &&
              P._htmlElementObj)
          ) {
            switch (h) {
              case cc.TMX_ORIENTATION_ORTHO:
                V = K * m;
                S = -(w - L - 1) * n;
                break;
              case cc.TMX_ORIENTATION_ISO:
                V = (m / 2) * (x + K - L - 1);
                S = (-n / 2) * (2 * w - K - L - 2);
                break;
              case cc.TMX_ORIENTATION_HEX:
                (V = (K * m * 3) / 4),
                  (S = -(w - L - 1) * n + (1 === K % 2 ? -n / 2 : 0));
            }
            U = V + p;
            Q = S - r;
            if (!g && h === cc.TMX_ORIENTATION_ISO) {
              T = -z + S * E;
              if (T < -t - W) {
                K += Math.floor((2 * (-t - T)) / W) - 1;
                continue;
              }
              T = J + U * D;
              if (T < -X) {
                K += Math.floor((2 * -T) / X) - 1;
                continue;
              }
              da = J + V * D;
              T = -z + Q * E;
              if (da > v || 0 < T) {
                K = H;
                continue;
              }
            }
            N > cc.TMX_TILE_DIAGONAL_FLAG &&
              ((Z = (N & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0),
              (aa = (N & cc.TMX_TILE_VERTICAL_FLAG) >>> 0));
            Z && ((V = -U), G.scale(-1, 1));
            aa && ((Q = -S), G.scale(1, -1));
            G.drawImage(
              P._htmlElementObj,
              O.x,
              O.y,
              O.width,
              O.height,
              V,
              Q,
              p,
              r
            );
            Z && G.scale(-1, 1);
            aa && G.scale(1, -1);
            cc.g_NumberOfDraws++;
          }
        s += x;
      }
      for (M in B)
        M > u &&
          B[M] &&
          ((N = B[M]._renderCmd),
          0 === B[M]._localZOrder && N.rendering && N.rendering(a, d, e));
    }
  };
})();
(function () {
  cc.TMXLayer.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._vertices = [
      { x: 0, y: 0 },
      { x: 0, y: 0 },
      { x: 0, y: 0 },
      { x: 0, y: 0 },
    ];
    this._color = new Uint32Array(1);
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST
    );
    a = (90 * Math.PI) / 180;
    this._sin90 = Math.sin(a);
    this._cos90 = Math.cos(a);
    a *= 3;
    this._sin270 = Math.sin(a);
    this._cos270 = Math.cos(a);
  };
  var a = (cc.TMXLayer.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.TMXLayer.WebGLRenderCmd;
  a.uploadData = function (a, d, e) {
    var f = this._node,
      g = f._rotationX || f._rotationY,
      h = f.layerOrientation,
      k = f.tiles;
    if (!k) return 0;
    var m = f._mapTileSize.width,
      n = f._mapTileSize.height,
      p = f.tileset._tileSize.width / cc.director._contentScaleFactor,
      r = f.tileset._tileSize.height / cc.director._contentScaleFactor,
      s = p - m,
      u = r - n,
      v = cc.winSize.width,
      t = cc.winSize.height,
      w = f._layerSize.height,
      x = f._layerSize.width,
      y = f._texGrids,
      B = f._spriteTiles,
      A = this._worldTransform,
      z = A.a,
      C = A.b,
      D = A.c,
      E = A.d,
      J = A.tx,
      A = A.ty,
      G = -f._contentSize.width * f._anchorPoint.x,
      F = -f._contentSize.height * f._anchorPoint.y,
      L = G * z + F * D + J,
      G = G * C + F * E + A,
      F = f._opacity,
      H = this._displayedColor.r,
      I = this._displayedColor.g,
      M = this._displayedColor.b;
    if (f._opacityModifyRGB)
      var K = F / 255,
        H = H * K,
        I = I * K,
        M = M * K;
    this._color[0] = (F << 24) | (M << 16) | (I << 8) | H;
    var N = (F = 0),
      H = x,
      I = w;
    g ||
      h !== cc.TMX_ORIENTATION_ORTHO ||
      ((F = Math.floor(-(L - s * z) / (m * z))),
      (N = Math.floor((G - u * E + n * w * E - t) / (n * E))),
      (H = Math.ceil((v - L + s * z) / (m * z))),
      (I = w - Math.floor(-(G + u * E) / (n * E))),
      0 > F && (F = 0),
      0 > N && (N = 0),
      H > x && (H = x),
      I > w && (I = w));
    for (
      var O,
        s = e,
        u = N * x,
        P,
        R,
        Q,
        M = cc.TMX_TILE_FLIPPED_MASK,
        V,
        S,
        U,
        X,
        K = p * z,
        W = r * E,
        T,
        da,
        Z = z,
        aa = C,
        ea = D,
        fa = E,
        ga = J,
        ha = A,
        ia = !1,
        ba = !1,
        ca = !1,
        Y = this._vertices;
      N < I;
      ++N
    ) {
      for (O = F; O < H; ++O)
        if (
          (s + 24 > a.length &&
            (cc.renderer._increaseBatchingSize((s - e) / 6),
            cc.renderer._batchRendering(),
            (s = e = 0)),
          (P = u + O),
          !B[P] && ((R = f.tiles[P]), (Q = y[(R & M) >>> 0])))
        ) {
          switch (h) {
            case cc.TMX_ORIENTATION_ORTHO:
              S = O * m;
              U = (w - N - 1) * n;
              P = f._vertexZ + (cc.renderer.assignedZStep * P) / k.length;
              break;
            case cc.TMX_ORIENTATION_ISO:
              S = (m / 2) * (x + O - N - 1);
              U = (n / 2) * (2 * w - O - N - 2);
              P =
                f._vertexZ +
                (cc.renderer.assignedZStep * (f.height - U)) / f.height;
              break;
            case cc.TMX_ORIENTATION_HEX:
              (S = (O * m * 3) / 4),
                (U = (w - N - 1) * n + (1 === O % 2 ? -n / 2 : 0)),
                (P =
                  f._vertexZ +
                  (cc.renderer.assignedZStep * (f.height - U)) / f.height);
          }
          X = S + p;
          V = U + r;
          if (!g && h === cc.TMX_ORIENTATION_ISO) {
            T = G + U * E;
            if (T > t + W) {
              O += Math.floor((2 * (T - t)) / W) - 1;
              continue;
            }
            T = L + X * z;
            if (T < -K) {
              O += Math.floor((2 * -T) / K) - 1;
              continue;
            }
            da = L + S * z;
            T = G + V * E;
            if (da > v || 0 > T) {
              O = H;
              continue;
            }
          }
          R > cc.TMX_TILE_DIAGONAL_FLAG &&
            ((ia = !0),
            (ba = (R & cc.TMX_TILE_HORIZONTAL_FLAG) >>> 0),
            (ca = (R & cc.TMX_TILE_VERTICAL_FLAG) >>> 0));
          Y[0].x = S * Z + V * ea + ga;
          Y[0].y = S * aa + V * fa + ha;
          Y[1].x = S * Z + U * ea + ga;
          Y[1].y = S * aa + U * fa + ha;
          Y[2].x = X * Z + V * ea + ga;
          Y[2].y = X * aa + V * fa + ha;
          Y[3].x = X * Z + U * ea + ga;
          Y[3].y = X * aa + U * fa + ha;
          for (R = 0; 4 > R; ++R) {
            a[s] = Y[R].x;
            a[s + 1] = Y[R].y;
            a[s + 2] = P;
            d[s + 3] = this._color[0];
            switch (R) {
              case 0:
                a[s + 4] = ba ? Q.r : Q.l;
                a[s + 5] = ca ? Q.b : Q.t;
                break;
              case 1:
                a[s + 4] = ba ? Q.r : Q.l;
                a[s + 5] = ca ? Q.t : Q.b;
                break;
              case 2:
                a[s + 4] = ba ? Q.l : Q.r;
                a[s + 5] = ca ? Q.b : Q.t;
                break;
              case 3:
                (a[s + 4] = ba ? Q.l : Q.r), (a[s + 5] = ca ? Q.t : Q.b);
            }
            s += 6;
          }
          ia &&
            ((Z = z),
            (aa = C),
            (ea = D),
            (fa = E),
            (ga = J),
            (ha = A),
            (ia = ca = ba = !1));
        }
      u += x;
    }
    return (s - e) / 6;
  };
})();
cc.PointObject = cc.Class.extend({
  _ratio: null,
  _offset: null,
  _child: null,
  ctor: function (a, b) {
    this.initWithCCPoint(a, b);
  },
  getRatio: function () {
    return this._ratio;
  },
  setRatio: function (a) {
    this._ratio = a;
  },
  getOffset: function () {
    return this._offset;
  },
  setOffset: function (a) {
    this._offset = a;
  },
  getChild: function () {
    return this._child;
  },
  setChild: function (a) {
    this._child = a;
  },
  initWithCCPoint: function (a, b) {
    this._ratio = a;
    this._offset = b;
    this._child = null;
    return !0;
  },
});
cc.PointObject.create = function (a, b) {
  return new cc.PointObject(a, b);
};
cc.ParallaxNode = cc.Node.extend({
  parallaxArray: null,
  _lastPosition: null,
  _className: "ParallaxNode",
  getParallaxArray: function () {
    return this.parallaxArray;
  },
  setParallaxArray: function (a) {
    this.parallaxArray = a;
  },
  ctor: function () {
    cc.Node.prototype.ctor.call(this);
    this.parallaxArray = [];
    this._lastPosition = cc.p(-100, -100);
  },
  addChild: function (a, b, d, e) {
    if (3 === arguments.length)
      cc.log("ParallaxNode: use addChild(child, z, ratio, offset) instead");
    else {
      if (!a)
        throw Error("cc.ParallaxNode.addChild(): child should be non-null");
      var f = new cc.PointObject(d, e);
      f.setChild(a);
      this.parallaxArray.push(f);
      a.setPosition(this._position.x * d.x + e.x, this._position.y * d.y + e.y);
      cc.Node.prototype.addChild.call(this, a, b, a.tag);
    }
  },
  removeChild: function (a, b) {
    for (var d = this.parallaxArray, e = 0; e < d.length; e++)
      if (d[e].getChild() === a) {
        d.splice(e, 1);
        break;
      }
    cc.Node.prototype.removeChild.call(this, a, b);
  },
  removeAllChildren: function (a) {
    this.parallaxArray.length = 0;
    cc.Node.prototype.removeAllChildren.call(this, a);
  },
  _updateParallaxPosition: function () {
    var a = this._absolutePosition();
    if (!cc.pointEqualToPoint(a, this._lastPosition)) {
      for (var b = this.parallaxArray, d = 0, e = b.length; d < e; d++) {
        var f = b[d];
        f.getChild().setPosition(
          -a.x + a.x * f.getRatio().x + f.getOffset().x,
          -a.y + a.y * f.getRatio().y + f.getOffset().y
        );
      }
      this._lastPosition = a;
    }
  },
  _absolutePosition: function () {
    for (var a = this._position, b = this; null !== b.parent; )
      (b = b.parent), (a = cc.pAdd(a, b.getPosition()));
    return a;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ParallaxNode.CanvasRenderCmd(this)
      : new cc.ParallaxNode.WebGLRenderCmd(this);
  },
});
cc.ParallaxNode.create = function () {
  return new cc.ParallaxNode();
};
(function () {
  cc.ParallaxNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
  };
  var a = (cc.ParallaxNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ParallaxNode.CanvasRenderCmd;
  a.updateStatus = function () {
    this._node._updateParallaxPosition();
    this.originUpdateStatus();
  };
  a._syncStatus = function (a) {
    this._node._updateParallaxPosition();
    this._originSyncStatus(a);
  };
})();
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
    cc.ParallaxNode.WebGLRenderCmd = function (a) {
      this._rootCtor(a);
      this._needDraw = !1;
    };
    var a = (cc.ParallaxNode.WebGLRenderCmd.prototype = Object.create(
      cc.Node.WebGLRenderCmd.prototype
    ));
    a.constructor = cc.ParallaxNode.WebGLRenderCmd;
    a.updateStatus = function () {
      this._node._updateParallaxPosition();
      this.originUpdateStatus();
    };
    a._syncStatus = function (a) {
      this._node._updateParallaxPosition();
      this._originSyncStatus(a);
    };
  }
});
(function () {
  var a = cc.sys,
    b = {
      ONLY_ONE: !1,
      WEB_AUDIO: !!(
        window.AudioContext ||
        window.webkitAudioContext ||
        window.mozAudioContext
      ),
      DELAY_CREATE_CTX: !1,
      ONE_SOURCE: !1,
    };
  a.browserType === a.BROWSER_TYPE_FIREFOX &&
    ((b.DELAY_CREATE_CTX = !0), (b.USE_LOADER_EVENT = "canplay"));
  a.os === a.OS_IOS && (b.USE_LOADER_EVENT = "loadedmetadata");
  a.os === a.OS_ANDROID &&
    a.browserType === a.BROWSER_TYPE_UC &&
    (b.ONE_SOURCE = !0);
  window.__audioSupport = b;
})();
cc.Audio = cc.Class.extend({
  interruptPlay: !1,
  src: null,
  _element: null,
  _AUDIO_TYPE: "AUDIO",
  ctor: function (a) {
    this.src = a;
  },
  setBuffer: function (a) {
    this._AUDIO_TYPE = "WEBAUDIO";
    this._element = new cc.Audio.WebAudio(a);
  },
  setElement: function (a) {
    this._AUDIO_TYPE = "AUDIO";
    this._element = a;
    a.addEventListener("ended", function () {
      a.loop || (a.paused = !0);
    });
  },
  play: function (a, b) {
    this._element
      ? ((this._element.loop = b),
        this._element.play(),
        "AUDIO" === this._AUDIO_TYPE &&
          this._element.paused &&
          (this.stop(),
          cc.Audio.touchPlayList.push({
            loop: b,
            offset: a,
            audio: this._element,
          })),
        !1 === cc.Audio.bindTouch &&
          ((cc.Audio.bindTouch = !0),
          cc.game.canvas.addEventListener("touchstart", cc.Audio.touchStart)))
      : (this.interruptPlay = !1);
  },
  getPlaying: function () {
    return this._element ? !this._element.paused : !0;
  },
  stop: function () {
    if (this._element) {
      this._element.pause();
      try {
        this._element.currentTime = 0;
      } catch (a) {}
    } else this.interruptPlay = !0;
  },
  pause: function () {
    this._element ? this._element.pause() : (this.interruptPlay = !0);
  },
  resume: function () {
    this._element ? this._element.play() : (this.interruptPlay = !1);
  },
  setVolume: function (a) {
    this._element && (this._element.volume = a);
  },
  getVolume: function () {
    if (this._element) return this._element.volume;
  },
  cloneNode: function () {
    var a = new cc.Audio(this.src);
    if ("AUDIO" === this._AUDIO_TYPE) {
      for (
        var b = document.createElement("audio"),
          d = b.getElementsByTagName("source"),
          e = 0;
        e < d.length;
        e++
      )
        b.appendChild(d[e]);
      b.src = this.src;
      a.setElement(b);
    } else a.setBuffer(this._element.buffer);
    return a;
  },
});
cc.Audio.touchPlayList = [];
cc.Audio.bindTouch = !1;
cc.Audio.touchStart = function () {
  for (var a = cc.Audio.touchPlayList, b = null; (b = a.pop()); )
    (b.audio.loop = !!b.loop), b.audio.play(b.offset);
};
cc.Audio.WebAudio = function (a) {
  this.buffer = a;
  this.context = cc.Audio._context;
  a = this.context.createGain();
  a.gain.value = 1;
  a.connect(this.context.destination);
  this._volume = a;
  this._loop = !1;
  this._startTime = -1;
  this._currentSource = null;
  this.playedLength = 0;
  this._currextTimer = null;
};
cc.Audio.WebAudio.prototype = {
  constructor: cc.Audio.WebAudio,
  get paused() {
    return this._currentSource && this._currentSource.loop
      ? !1
      : -1 === this._startTime
      ? !0
      : this.context.currentTime - this._startTime > this.buffer.duration;
  },
  set paused(a) {},
  get loop() {
    return this._loop;
  },
  set loop(a) {
    return (this._loop = a);
  },
  get volume() {
    return this._volume.gain.value;
  },
  set volume(a) {
    return (this._volume.gain.value = a);
  },
  get currentTime() {
    return this.playedLength;
  },
  set currentTime(a) {
    return (this.playedLength = a);
  },
  play: function (a) {
    this._currentSource &&
      !this.paused &&
      (this._currentSource.stop(0), (this.playedLength = 0));
    var b = this.context.createBufferSource();
    b.buffer = this.buffer;
    b.connect(this._volume);
    b.loop = this._loop;
    this._startTime = this.context.currentTime;
    a = a || this.playedLength;
    var d = this.buffer.duration;
    this._loop
      ? b.start
        ? b.start(0)
        : b.notoGrainOn
        ? b.noteGrainOn(0)
        : b.noteOn(0)
      : b.start
      ? b.start(0, a, d - a)
      : b.notoGrainOn
      ? b.noteGrainOn(0, a, d - a)
      : b.noteOn(0, a, d - a);
    this._currentSource = b;
    if (0 === this.context.currentTime) {
      var e = this;
      clearTimeout(this._currextTimer);
      this._currextTimer = setTimeout(function () {
        0 === e.context.currentTime &&
          cc.Audio.touchPlayList.push({ offset: a, audio: e });
      }, 10);
    }
  },
  pause: function () {
    this.playedLength = this.context.currentTime - this._startTime;
    this.playedLength %= this.buffer.duration;
    var a = this._currentSource;
    this._currentSource = null;
    this._startTime = -1;
    a && a.stop(0);
  },
};
(function (a) {
  var b = a.WEB_AUDIO,
    d = a.ONLY_ONE,
    e = [];
  (function () {
    var a = document.createElement("audio");
    if (a.canPlayType) {
      var b = a.canPlayType('audio/ogg; codecs\x3d"vorbis"');
      b && "" !== b && e.push(".ogg");
      (b = a.canPlayType("audio/mpeg")) && "" !== b && e.push(".mp3");
      (b = a.canPlayType('audio/wav; codecs\x3d"1"')) &&
        "" !== b &&
        e.push(".wav");
      (b = a.canPlayType("audio/mp4")) && "" !== b && e.push(".mp4");
      (a = a.canPlayType("audio/x-m4a")) && "" !== a && e.push(".m4a");
    }
  })();
  try {
    if (b) {
      var f = new (window.AudioContext ||
        window.webkitAudioContext ||
        window.mozAudioContext)();
      cc.Audio._context = f;
      if (
        !(
          f.createBufferSource &&
          f.createGain &&
          f.destination &&
          f.decodeAudioData
        )
      )
        throw "context is incomplete";
      a.DELAY_CREATE_CTX &&
        setTimeout(function () {
          f = new (window.AudioContext ||
            window.webkitAudioContext ||
            window.mozAudioContext)();
          cc.Audio._context = f;
        }, 0);
    }
  } catch (g) {
    (b = !1), cc.log("browser don't support web audio");
  }
  var h = {
    cache: {},
    useWebAudio: !0,
    loadBuffer: function (a, d) {
      if (b) {
        var e = cc.loader.getXMLHttpRequest();
        e.open("GET", a, !0);
        e.responseType = "arraybuffer";
        e.onload = function () {
          0 <= e._timeoutId && clearTimeout(e._timeoutId);
          f.decodeAudioData(
            e.response,
            function (a) {
              d(null, a);
            },
            function () {
              d("decode error - " + a);
            }
          );
        };
        e.onerror = function () {
          d("request error - " + a);
        };
        void 0 === e.ontimeout &&
          (e._timeoutId = setTimeout(function () {
            e.ontimeout();
          }, e.timeout));
        e.ontimeout = function () {
          d("request timeout - " + a);
        };
        e.send();
      }
    },
    load: function (a, b, d, f) {
      if (0 === e.length) return f("can not support audio!");
      var g = cc.loader.getRes(b);
      if (g) return f(null, g);
      cc.loader.audioPath && (a = cc.path.join(cc.loader.audioPath, a));
      g = cc.path.extname(a);
      d = [g];
      for (var h = 0; h < e.length; h++) g !== e[h] && d.push(e[h]);
      g = new cc.Audio(a);
      cc.loader.cache[b] = g;
      this.loadAudioFromExtList(a, d, g, f);
      return g;
    },
    loadAudioFromExtList: function (d, f, g, h) {
      if (0 === f.length) {
        var r = "can not found the resource of audio! Last match url is : ",
          r = r + d.replace(/\.(.*)?$/, "(");
        e.forEach(function (a) {
          r += a + "|";
        });
        r = r.replace(/\|$/, ")");
        return h({ status: 520, errorMessage: r }, null);
      }
      if (b && this.useWebAudio)
        this.loadBuffer(d, function (a, b) {
          a && cc.log(a);
          b && g.setBuffer(b);
          h(null, g);
        });
      else {
        for (
          var s = a.ONE_SOURCE ? 1 : f.length,
            u = document.createElement("audio"),
            v = 0;
          v < s;
          v++
        ) {
          var t = document.createElement("source");
          t.src = cc.path.changeExtname(d, f[v]);
          u.appendChild(t);
        }
        g.setElement(u);
        var w = setTimeout(function () {
            0 === u.readyState ? y() : x();
          }, 8e3),
          x = function () {
            u.removeEventListener("canplaythrough", x, !1);
            u.removeEventListener("error", y, !1);
            u.removeEventListener("emptied", x, !1);
            a.USE_LOADER_EVENT &&
              u.removeEventListener(a.USE_LOADER_EVENT, x, !1);
            clearTimeout(w);
            h(null, g);
          },
          y = function () {
            cc.log("load audio failure - " + d);
            x();
          };
        u.addEventListener("canplaythrough", x, !1);
        u.addEventListener("error", y, !1);
        a.USE_LOADER_EVENT && u.addEventListener(a.USE_LOADER_EVENT, x, !1);
      }
    },
  };
  cc.loader.register(["mp3", "ogg", "wav", "mp4", "m4a"], h);
  cc.audioEngine = {
    _currMusic: null,
    _musicVolume: 1,
    features: a,
    willPlayMusic: function () {
      return !1;
    },
    playMusic: function (a, b) {
      var d = this._currMusic;
      d && d.getPlaying() && d.stop();
      var e = this._musicVolume,
        f = cc.loader.getRes(a);
      f ||
        (cc.loader.load(a, function () {
          f.getPlaying() ||
            f.interruptPlay ||
            (f.setVolume(e), f.play(0, b || !1));
        }),
        (f = cc.loader.getRes(a)));
      f.setVolume(e);
      f.play(0, b || !1);
      this._currMusic = f;
    },
    stopMusic: function (a) {
      var b = this._currMusic;
      if (b) {
        for (var d = cc.Audio.touchPlayList, e = d.length - 1; 0 <= e; --e)
          this[e] && this[e].audio === b._element && d.splice(e, 1);
        b.stop();
        this._currMusic = null;
        a && cc.loader.release(b.src);
      }
    },
    pauseMusic: function () {
      var a = this._currMusic;
      a && a.pause();
    },
    resumeMusic: function () {
      var a = this._currMusic;
      a && a.resume();
    },
    rewindMusic: function () {
      var a = this._currMusic;
      a && (a.stop(), a.play());
    },
    getMusicVolume: function () {
      return this._musicVolume;
    },
    setMusicVolume: function (a) {
      a -= 0;
      isNaN(a) && (a = 1);
      1 < a && (a = 1);
      0 > a && (a = 0);
      this._musicVolume = a;
      var b = this._currMusic;
      b && b.setVolume(a);
    },
    isMusicPlaying: function () {
      var a = this._currMusic;
      return a ? a.getPlaying() : !1;
    },
    _audioPool: {},
    _maxAudioInstance: 10,
    _effectVolume: 1,
    playEffect: function (a, e) {
      if (d && this._currMusic && this._currMusic.getPlaying())
        return cc.log("Browser is only allowed to play one audio"), null;
      var f = this._audioPool[a];
      f || (f = this._audioPool[a] = []);
      for (var g = 0; g < f.length && f[g].getPlaying(); g++);
      !b &&
        g > this._maxAudioInstance &&
        ((g = f.shift()), g.stop(), f.push(g), (g = f.length - 1));
      var r;
      if (f[g])
        return (
          (r = f[g]), r.setVolume(this._effectVolume), r.play(0, e || !1), r
        );
      (r = cc.loader.getRes(a)) &&
        b &&
        "AUDIO" === r._AUDIO_TYPE &&
        (cc.loader.release(a), (r = null));
      if (r)
        if (b && "AUDIO" === r._AUDIO_TYPE)
          h.loadBuffer(a, function (a, b) {
            r.setBuffer(b);
            r.setVolume(cc.audioEngine._effectVolume);
            r.getPlaying() || r.play(0, e || !1);
          });
        else
          return (
            (r = r.cloneNode()),
            r.setVolume(this._effectVolume),
            r.play(0, e || !1),
            f.push(r),
            r
          );
      g = h.useWebAudio;
      h.useWebAudio = !0;
      cc.loader.load(a, function (b) {
        b = cc.loader.getRes(a);
        b = b.cloneNode();
        b.setVolume(cc.audioEngine._effectVolume);
        b.play(0, e || !1);
        f.push(b);
      });
      h.useWebAudio = g;
      return r;
    },
    setEffectsVolume: function (a) {
      a -= 0;
      isNaN(a) && (a = 1);
      1 < a && (a = 1);
      0 > a && (a = 0);
      this._effectVolume = a;
      var b = this._audioPool,
        d;
      for (d in b) {
        var e = b[d];
        if (Array.isArray(e))
          for (var f = 0; f < e.length; f++) e[f].setVolume(a);
      }
    },
    getEffectsVolume: function () {
      return this._effectVolume;
    },
    pauseEffect: function (a) {
      a && a.pause();
    },
    pauseAllEffects: function () {
      var a = this._audioPool,
        b;
      for (b in a)
        for (var d = a[b], e = 0; e < a[b].length; e++)
          d[e].getPlaying() && d[e].pause();
    },
    resumeEffect: function (a) {
      a && a.resume();
    },
    resumeAllEffects: function () {
      var a = this._audioPool,
        b;
      for (b in a)
        for (var d = a[b], e = 0; e < a[b].length; e++) d[e].resume();
    },
    stopEffect: function (a) {
      a && a.stop();
    },
    stopAllEffects: function () {
      var a = this._audioPool,
        b;
      for (b in a) {
        for (var d = a[b], e = 0; e < d.length; e++) d[e].stop();
        d.length = 0;
      }
      a.length = 0;
    },
    unloadEffect: function (a) {
      if (a) {
        cc.loader.release(a);
        var b = this._audioPool[a];
        if (b) {
          for (var d = 0; d < b.length; d++) b[d].stop();
          b.length = 0;
        }
        delete this._audioPool[a];
      }
    },
    end: function () {
      this.stopMusic();
      this.stopAllEffects();
    },
    _pauseCache: [],
    _pausePlaying: function () {
      var a = this._currMusic;
      a && a.getPlaying() && (a.pause(), this._pauseCache.push(a));
      var a = this._audioPool,
        b;
      for (b in a)
        for (var d = a[b], e = 0; e < a[b].length; e++)
          d[e].getPlaying() && (d[e].pause(), this._pauseCache.push(d[e]));
    },
    _resumePlaying: function () {
      for (var a = this._pauseCache, b = 0; b < a.length; b++) a[b].resume();
      a.length = 0;
    },
  };
})(window.__audioSupport);
cc.CONTROL_EVENT_TOTAL_NUMBER = 9;
cc.CONTROL_EVENT_TOUCH_DOWN = 1;
cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE = 2;
cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE = 4;
cc.CONTROL_EVENT_TOUCH_DRAG_ENTER = 8;
cc.CONTROL_EVENT_TOUCH_DRAG_EXIT = 16;
cc.CONTROL_EVENT_TOUCH_UP_INSIDE = 32;
cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE = 64;
cc.CONTROL_EVENT_TOUCH_CANCEL = 128;
cc.CONTROL_EVENT_VALUECHANGED = 256;
cc.CONTROL_STATE_NORMAL = 1;
cc.CONTROL_STATE_HIGHLIGHTED = 2;
cc.CONTROL_STATE_DISABLED = 4;
cc.CONTROL_STATE_SELECTED = 8;
cc.CONTROL_STATE_INITIAL = 8;
cc.Control = cc.Layer.extend({
  _isOpacityModifyRGB: !1,
  _hasVisibleParents: !1,
  _touchListener: null,
  _className: "Control",
  isOpacityModifyRGB: function () {
    return this._isOpacityModifyRGB;
  },
  setOpacityModifyRGB: function (a) {
    this._isOpacityModifyRGB = a;
    for (var b = this.getChildren(), d = 0, e = b.length; d < e; d++) {
      var f = b[d];
      f && f.setOpacityModifyRGB(a);
    }
  },
  _state: cc.CONTROL_STATE_NORMAL,
  getState: function () {
    return this._state;
  },
  _enabled: !1,
  _selected: !1,
  _highlighted: !1,
  _dispatchTable: null,
  setEnabled: function (a) {
    this._state = (this._enabled = a)
      ? cc.CONTROL_STATE_NORMAL
      : cc.CONTROL_STATE_DISABLED;
    this.needsLayout();
  },
  isEnabled: function () {
    return this._enabled;
  },
  setSelected: function (a) {
    this._selected = a;
    this.needsLayout();
  },
  isSelected: function () {
    return this._selected;
  },
  setHighlighted: function (a) {
    this._highlighted = a;
    this.needsLayout();
  },
  isHighlighted: function () {
    return this._highlighted;
  },
  hasVisibleParents: function () {
    for (var a = this.getParent(); null != a; a = a.getParent())
      if (!a.isVisible()) return !1;
    return !0;
  },
  ctor: function () {
    cc.Layer.prototype.ctor.call(this);
    this._dispatchTable = {};
    this._color = cc.color.WHITE;
  },
  init: function () {
    this._state = cc.CONTROL_STATE_NORMAL;
    this._enabled = !0;
    this._highlighted = this._selected = !1;
    var a = cc.EventListener.create({
      event: cc.EventListener.TOUCH_ONE_BY_ONE,
      swallowTouches: !0,
    });
    this.onTouchBegan && (a.onTouchBegan = this.onTouchBegan.bind(this));
    this.onTouchMoved && (a.onTouchMoved = this.onTouchMoved.bind(this));
    this.onTouchEnded && (a.onTouchEnded = this.onTouchEnded.bind(this));
    this.onTouchCancelled &&
      (a.onTouchCancelled = this.onTouchCancelled.bind(this));
    this._touchListener = a;
    return !0;
  },
  onEnter: function () {
    var a = this._touchListener;
    a._isRegistered() || cc.eventManager.addListener(a, this);
    cc.Node.prototype.onEnter.call(this);
  },
  sendActionsForControlEvents: function (a) {
    for (var b = 0, d = cc.CONTROL_EVENT_TOTAL_NUMBER; b < d; b++)
      if (a & (1 << b))
        for (
          var e = this._dispatchListforControlEvent(1 << b),
            f = 0,
            g = e.length;
          f < g;
          f++
        )
          e[f].invoke(this);
  },
  addTargetWithActionForControlEvents: function (a, b, d) {
    for (var e = 0, f = cc.CONTROL_EVENT_TOTAL_NUMBER; e < f; e++)
      d & (1 << e) && this._addTargetWithActionForControlEvent(a, b, 1 << e);
  },
  removeTargetWithActionForControlEvents: function (a, b, d) {
    for (var e = 0, f = cc.CONTROL_EVENT_TOTAL_NUMBER; e < f; e++)
      d & (1 << e) && this._removeTargetWithActionForControlEvent(a, b, 1 << e);
  },
  getTouchLocation: function (a) {
    a = a.getLocation();
    return this.convertToNodeSpace(a);
  },
  isTouchInside: function (a) {
    a = a.getLocation();
    a = this.getParent().convertToNodeSpace(a);
    return cc.rectContainsPoint(this.getBoundingBox(), a);
  },
  _invocationWithTargetAndActionForControlEvent: function (a, b, d) {
    return null;
  },
  _dispatchListforControlEvent: function (a) {
    a = a.toString();
    this._dispatchTable[a] || (this._dispatchTable[a] = []);
    return this._dispatchTable[a];
  },
  _addTargetWithActionForControlEvent: function (a, b, d) {
    a = new cc.Invocation(a, b, d);
    this._dispatchListforControlEvent(d).push(a);
  },
  _removeTargetWithActionForControlEvent: function (a, b, d) {
    d = this._dispatchListforControlEvent(d);
    if (a || b)
      for (var e = 0; e < d.length; ) {
        var f = d[e],
          g = !0;
        a && (g = a === f.getTarget());
        b && (g = g && b === f.getAction());
        g ? cc.arrayRemoveObject(d, f) : e++;
      }
    else d.length = 0;
  },
  needsLayout: function () {},
});
_p = cc.Control.prototype;
cc.defineGetterSetter(_p, "state", _p.getState);
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.defineGetterSetter(_p, "selected", _p.isSelected, _p.setSelected);
cc.defineGetterSetter(_p, "highlighted", _p.isHighlighted, _p.setHighlighted);
_p = null;
cc.Control.create = function () {
  var a = new cc.Control();
  return a && a.init() ? a : null;
};
cc.CONTROL_ZOOM_ACTION_TAG = 3435855873;
cc.ControlButton = cc.Control.extend({
  _doesAdjustBackgroundImage: !1,
  zoomOnTouchDown: !1,
  _preferredSize: null,
  _labelAnchorPoint: null,
  _currentTitle: null,
  _currentTitleColor: null,
  _titleLabel: null,
  _backgroundSprite: null,
  _opacity: 0,
  _isPushed: !1,
  _titleDispatchTable: null,
  _titleColorDispatchTable: null,
  _titleLabelDispatchTable: null,
  _backgroundSpriteDispatchTable: null,
  _parentInited: !1,
  _marginV: 0,
  _marginH: 0,
  _className: "ControlButton",
  ctor: function (a, b, d) {
    cc.Control.prototype.ctor.call(this);
    this._preferredSize = cc.size(0, 0);
    this._labelAnchorPoint = cc.p(0, 0);
    this._currentTitle = "";
    this._currentTitleColor = cc.color.WHITE;
    this._titleDispatchTable = {};
    this._titleColorDispatchTable = {};
    this._titleLabelDispatchTable = {};
    this._backgroundSpriteDispatchTable = {};
    void 0 != d
      ? this.initWithTitleAndFontNameAndFontSize(a, b, d)
      : void 0 != b
      ? this.initWithLabelAndBackgroundSprite(a, b)
      : void 0 != a
      ? this.initWithBackgroundSprite(a)
      : this.init();
  },
  init: function () {
    return this.initWithLabelAndBackgroundSprite(
      new cc.LabelTTF("", "Arial", 12),
      new cc.Scale9Sprite()
    );
  },
  needsLayout: function () {
    if (this._parentInited) {
      this._titleLabel && this._titleLabel.setVisible(!1);
      this._backgroundSprite && this._backgroundSprite.setVisible(!1);
      this.setLabelAnchorPoint(this._labelAnchorPoint);
      var a = this._state;
      this._currentTitle = this.getTitleForState(a);
      this._currentTitleColor = this.getTitleColorForState(a);
      var b = (this._titleLabel = this.getTitleLabelForState(a));
      b && b.setString && b.setString(this._currentTitle);
      b && b.setColor(this._currentTitleColor);
      var d = this.getContentSize();
      b && b.setPosition(d.width / 2, d.height / 2);
      (a = this._backgroundSprite = this.getBackgroundSpriteForState(a)) &&
        a.setPosition(d.width / 2, d.height / 2);
      d = cc.size(0, 0);
      if (b) {
        var e = b.getBoundingBox();
        d.width = e.width;
        d.height = e.height;
      }
      this._doesAdjustBackgroundImage
        ? a &&
          a.setContentSize(
            d.width + 2 * this._marginH,
            d.height + 2 * this._marginV
          )
        : a &&
          ((e = a.getPreferredSize()),
          (e = cc.size(e.width, e.height)),
          0 >= e.width && (e.width = d.width),
          0 >= e.height && (e.height = d.height),
          a.setContentSize(e));
      d = b ? b.getBoundingBox() : cc.rect(0, 0, 0, 0);
      e = a ? a.getBoundingBox() : cc.rect(0, 0, 0, 0);
      d = cc.rectUnion(d, e);
      this.setContentSize(d.width, d.height);
      d = this.getContentSize();
      b && (b.setPosition(d.width / 2, d.height / 2), b.setVisible(!0));
      a && (a.setPosition(d.width / 2, d.height / 2), a.setVisible(!0));
    }
  },
  initWithLabelAndBackgroundSprite: function (a, b) {
    if (!a)
      throw Error(
        "cc.ControlButton.initWithLabelAndBackgroundSprite(): label should be non-null"
      );
    if (!b)
      throw Error(
        "cc.ControlButton.initWithLabelAndBackgroundSprite(): backgroundSprite should be non-null"
      );
    if (cc.Control.prototype.init.call(this, !0)) {
      this._parentInited = !0;
      this._titleDispatchTable = {};
      this._titleColorDispatchTable = {};
      this._titleLabelDispatchTable = {};
      this._backgroundSpriteDispatchTable = {};
      this._isPushed = !1;
      this.zoomOnTouchDown = !0;
      this._currentTitle = null;
      this.setAdjustBackgroundImage(!0);
      this.setPreferredSize(cc.size(0, 0));
      this.zoomOnTouchDown = !0;
      this.ignoreAnchorPointForPosition(!1);
      this.setAnchorPoint(0.5, 0.5);
      this._titleLabel = a;
      this._backgroundSprite = b;
      this.setOpacity(255);
      this.setOpacityModifyRGB(!0);
      var d = a.getString();
      this.setTitleForState(d, cc.CONTROL_STATE_NORMAL);
      this.setTitleColorForState(a.getColor(), cc.CONTROL_STATE_NORMAL);
      this.setTitleLabelForState(a, cc.CONTROL_STATE_NORMAL);
      this.setBackgroundSpriteForState(b, cc.CONTROL_STATE_NORMAL);
      this._state = cc.CONTROL_STATE_NORMAL;
      this._marginH = 24;
      this._marginV = 12;
      this._labelAnchorPoint = cc.p(0.5, 0.5);
      this.setPreferredSize(cc.size(0, 0));
      this.needsLayout();
      return !0;
    }
    return !1;
  },
  initWithTitleAndFontNameAndFontSize: function (a, b, d) {
    a = new cc.LabelTTF(a, b, d);
    return this.initWithLabelAndBackgroundSprite(a, new cc.Scale9Sprite());
  },
  initWithBackgroundSprite: function (a) {
    var b = new cc.LabelTTF("", "Arial", 30);
    return this.initWithLabelAndBackgroundSprite(b, a);
  },
  doesAdjustBackgroundImage: function () {
    return this._doesAdjustBackgroundImage;
  },
  setAdjustBackgroundImage: function (a) {
    this._doesAdjustBackgroundImage = a;
    this.needsLayout();
  },
  getZoomOnTouchDown: function () {
    return this.zoomOnTouchDown;
  },
  setZoomOnTouchDown: function (a) {
    return (this.zoomOnTouchDown = a);
  },
  getPreferredSize: function () {
    return this._preferredSize;
  },
  setPreferredSize: function (a) {
    if (0 === a.width && 0 === a.height) this._doesAdjustBackgroundImage = !0;
    else {
      this._doesAdjustBackgroundImage = !1;
      var b = this._backgroundSpriteDispatchTable,
        d;
      for (d in b) b[d].setPreferredSize(a);
    }
    this._preferredSize = a;
    this.needsLayout();
  },
  getLabelAnchorPoint: function () {
    return this._labelAnchorPoint;
  },
  setLabelAnchorPoint: function (a) {
    this._labelAnchorPoint = a;
    this._titleLabel && this._titleLabel.setAnchorPoint(a);
  },
  _getCurrentTitle: function () {
    return this._currentTitle;
  },
  _getCurrentTitleColor: function () {
    return this._currentTitleColor;
  },
  getOpacity: function () {
    return this._opacity;
  },
  setOpacity: function (a) {
    cc.Control.prototype.setOpacity.call(this, a);
    var b = this._backgroundSpriteDispatchTable,
      d;
    for (d in b) b[d].setOpacity(a);
  },
  setColor: function (a) {
    cc.Control.prototype.setColor.call(this, a);
    var b = this._backgroundSpriteDispatchTable,
      d;
    for (d in b) b[d].setColor(a);
  },
  getColor: function () {
    var a = this._realColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  isPushed: function () {
    return this._isPushed;
  },
  _getVerticalMargin: function () {
    return this._marginV;
  },
  _getHorizontalOrigin: function () {
    return this._marginH;
  },
  setMargins: function (a, b) {
    this._marginV = b;
    this._marginH = a;
    this.needsLayout();
  },
  setEnabled: function (a) {
    cc.Control.prototype.setEnabled.call(this, a);
    this.needsLayout();
  },
  setSelected: function (a) {
    cc.Control.prototype.setSelected.call(this, a);
    this.needsLayout();
  },
  setHighlighted: function (a) {
    this._state = a ? cc.CONTROL_STATE_HIGHLIGHTED : cc.CONTROL_STATE_NORMAL;
    cc.Control.prototype.setHighlighted.call(this, a);
    (a = this.getActionByTag(cc.CONTROL_ZOOM_ACTION_TAG)) && this.stopAction(a);
    this.zoomOnTouchDown &&
      ((a =
        this.isHighlighted() && this.isEnabled() && !this.isSelected()
          ? 1.1
          : 1),
      (a = cc.scaleTo(0.05, a)),
      a.setTag(cc.CONTROL_ZOOM_ACTION_TAG),
      this.runAction(a));
  },
  onTouchBegan: function (a, b) {
    if (
      !(
        this.isTouchInside(a) &&
        this.isEnabled() &&
        this.isVisible() &&
        this.hasVisibleParents()
      )
    )
      return !1;
    this._isPushed = !0;
    this.setHighlighted(!0);
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DOWN);
    return !0;
  },
  onTouchMoved: function (a, b) {
    if (this._enabled && this._isPushed && !this._selected) {
      var d = this.isTouchInside(a);
      d && !this._highlighted
        ? (this.setHighlighted(!0),
          this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_ENTER))
        : d && this._highlighted
        ? this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE)
        : !d && this._highlighted
        ? (this.setHighlighted(!1),
          this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_EXIT))
        : d ||
          this._highlighted ||
          this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE);
    } else this._highlighted && this.setHighlighted(!1);
  },
  onTouchEnded: function (a, b) {
    this._isPushed = !1;
    this.setHighlighted(!1);
    this.isTouchInside(a)
      ? this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_INSIDE)
      : this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE);
  },
  onTouchCancelled: function (a, b) {
    this._isPushed = !1;
    this.setHighlighted(!1);
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_CANCEL);
  },
  getTitleForState: function (a) {
    var b = this._titleDispatchTable;
    return b ? (b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL]) : "";
  },
  setTitleForState: function (a, b) {
    this._titleDispatchTable[b] = a || "";
    this.getState() === b && this.needsLayout();
  },
  getTitleColorForState: function (a) {
    return (a = this._titleColorDispatchTable[a])
      ? a
      : (a = this._titleColorDispatchTable[cc.CONTROL_STATE_NORMAL])
      ? a
      : cc.color.WHITE;
  },
  setTitleColorForState: function (a, b) {
    this._titleColorDispatchTable[b] = a;
    this.getState() === b && this.needsLayout();
  },
  getTitleLabelForState: function (a) {
    var b = this._titleLabelDispatchTable;
    return b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL];
  },
  setTitleLabelForState: function (a, b) {
    var d = this._titleLabelDispatchTable;
    if (d[b]) {
      var e = d[b];
      e && this.removeChild(e, !0);
    }
    d[b] = a;
    a.setVisible(!1);
    a.setAnchorPoint(0.5, 0.5);
    this.addChild(a, 1);
    this.getState() === b && this.needsLayout();
  },
  setTitleTTFForState: function (a, b) {
    var d = this.getTitleForState(b);
    d || (d = "");
    this.setTitleLabelForState(new cc.LabelTTF(d, a, 12), b);
  },
  getTitleTTFForState: function (a) {
    a = this.getTitleLabelForState(a);
    return null != a && a instanceof cc.LabelTTF ? a.getFontName() : "";
  },
  setTitleTTFSizeForState: function (a, b) {
    var d = this.getTitleLabelForState(b);
    null != d && d instanceof cc.LabelTTF && d.setFontSize(a);
  },
  getTitleTTFSizeForState: function (a) {
    a = this.getTitleLabelForState(a);
    return null != a && a instanceof cc.LabelTTF ? a.getFontSize() : 0;
  },
  setTitleBMFontForState: function (a, b) {
    var d = this.getTitleForState(b);
    d || (d = "");
    this.setTitleLabelForState(new cc.LabelBMFont(d, a), b);
  },
  getTitleBMFontForState: function (a) {
    a = this.getTitleLabelForState(a);
    return null != a && a instanceof cc.LabelBMFont ? a.getFntFile() : "";
  },
  getBackgroundSpriteForState: function (a) {
    var b = this._backgroundSpriteDispatchTable;
    return b[a] ? b[a] : b[cc.CONTROL_STATE_NORMAL];
  },
  setBackgroundSpriteForState: function (a, b) {
    var d = this._backgroundSpriteDispatchTable;
    if (d[b]) {
      var e = d[b];
      e && this.removeChild(e, !0);
    }
    d[b] = a;
    a.setVisible(!1);
    a.setAnchorPoint(0.5, 0.5);
    this.addChild(a);
    d = this._preferredSize;
    (0 === d.width && 0 === d.height) || a.setPreferredSize(d);
    this._state === b && this.needsLayout();
  },
  setBackgroundSpriteFrameForState: function (a, b) {
    var d = cc.Scale9Sprite.createWithSpriteFrame(a);
    this.setBackgroundSpriteForState(d, b);
  },
});
_p = cc.ControlButton.prototype;
cc.defineGetterSetter(
  _p,
  "adjustBackground",
  _p.getAdjustBackgroundImage,
  _p.setAdjustBackgroundImage
);
cc.defineGetterSetter(
  _p,
  "preferredSize",
  _p.getPreferredSize,
  _p.setPreferredSize
);
cc.defineGetterSetter(
  _p,
  "labelAnchor",
  _p.getLabelAnchorPoint,
  _p.setLabelAnchorPoint
);
_p = null;
cc.ControlButton.create = function (a, b, d) {
  return new cc.ControlButton(a, b, d);
};
cc.RGBA = function (a, b, d, e) {
  this.r = a;
  this.g = b;
  this.b = d;
  this.a = e;
};
cc.HSV = function (a, b, d) {
  this.h = a;
  this.s = b;
  this.v = d;
};
cc.ControlUtils = {};
cc.ControlUtils.addSpriteToTargetWithPosAndAnchor = function (a, b, d, e) {
  a = new cc.Sprite("#" + a);
  if (!a) return null;
  a.setPosition(d);
  a.setAnchorPoint(e);
  b.addChild(a);
  return a;
};
cc.ControlUtils.HSVfromRGB = function (a) {
  var b = new cc.HSV(),
    d,
    e;
  d = a.r < a.g ? a.r : a.g;
  d = d < a.b ? d : a.b;
  e = a.r > a.g ? a.r : a.g;
  e = e > a.b ? e : a.b;
  b.v = e;
  d = e - d;
  if (0 < e) b.s = d / e;
  else return (b.s = 0), (b.h = -1), b;
  b.h =
    a.r >= e
      ? (a.g - a.b) / d
      : a.g >= e
      ? 2 + (a.b - a.r) / d
      : 4 + (a.r - a.g) / d;
  b.h *= 60;
  0 > b.h && (b.h += 360);
  return b;
};
cc.ControlUtils.RGBfromHSV = function (a) {
  var b,
    d,
    e,
    f,
    g = new cc.RGBA();
  g.a = 1;
  if (0 >= a.s) {
    if (!a.h) return (g.r = a.v), (g.g = a.v), (g.b = a.v), g;
    g.r = 0;
    g.g = 0;
    g.b = 0;
    return g;
  }
  b = a.h;
  360 <= b && (b = 0);
  b /= 60;
  f = 0 | b;
  e = b - f;
  b = a.v * (1 - a.s);
  d = a.v * (1 - a.s * e);
  e = a.v * (1 - a.s * (1 - e));
  switch (f) {
    case 0:
      g.r = a.v;
      g.g = e;
      g.b = b;
      break;
    case 1:
      g.r = d;
      g.g = a.v;
      g.b = b;
      break;
    case 2:
      g.r = b;
      g.g = a.v;
      g.b = e;
      break;
    case 3:
      g.r = b;
      g.g = d;
      g.b = a.v;
      break;
    case 4:
      g.r = e;
      g.g = b;
      g.b = a.v;
      break;
    default:
      (g.r = a.v), (g.g = b), (g.b = d);
  }
  return g;
};
cc.ControlUtils.CCRectUnion = function (a, b) {
  return cc.rectUnion(a, b);
};
cc.Invocation = cc.Class.extend({
  _action: null,
  _target: null,
  _controlEvent: null,
  ctor: function (a, b, d) {
    this._target = a;
    this._action = b;
    this._controlEvent = d;
  },
  getAction: function () {
    return this._action;
  },
  getTarget: function () {
    return this._target;
  },
  getControlEvent: function () {
    return this._controlEvent;
  },
  invoke: function (a) {
    if (this._target && this._action)
      if (cc.isString(this._action))
        this._target[this._action](a, this._controlEvent);
      else this._action.call(this._target, a, this._controlEvent);
  },
});
cc.Spacer = cc.Layer.extend({});
cc.Spacer.verticalSpacer = function (a) {
  var b = new cc.Spacer();
  b.init();
  b.setContentSize(0, a);
  return b;
};
cc.Spacer.horizontalSpacer = function (a) {
  var b = new cc.Spacer();
  b.init();
  b.setContentSize(a, 0);
  return b;
};
cc.MenuPassive = cc.Layer.extend({
  _color: null,
  _opacity: 0,
  _className: "MenuPassive",
  ctor: function () {},
  getColor: function () {
    var a = this._color;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  setColor: function (a) {
    var b = this._color;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
    if (this._children && 0 < this._children.length)
      for (b = 0; b < this._children.length; b++)
        this._children[b] && this._children[b].setColor(a);
    void 0 === a.a || a.a_undefined || this.setOpacity(a.a);
  },
  getOpacity: function () {
    return this._opacity;
  },
  setOpacity: function (a) {
    this._opacity = a;
    if (this._children && 0 < this._children.length)
      for (var b = 0; b < this._children.length; b++)
        this._children[b] && this._children[b].setOpacity(a);
    this._color.a = a;
  },
  initWithItems: function (a, b) {
    if (this.init()) {
      var d = cc.director.getWinSize();
      this.ignoreAnchorPointForPosition(!0);
      this.setAnchorPoint(0.5, 0.5);
      this.setContentSize(d);
      this.setPosition(d.width / 2, d.height / 2);
      d = 0;
      if (a) {
        this.addChild(a, d);
        for (var e = 0; e < b.length; e++)
          b[e] && (d++, this.addChild(b[e], d));
      }
      return !0;
    }
    return !1;
  },
  alignItemsVertically: function () {
    this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING);
  },
  alignItemsVerticallyWithPadding: function (a) {
    var b = -a,
      d;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (b +=
            this._children[d].getContentSize().height *
              this._children[d].getScaleY() +
            a);
    var e = 0,
      f = b / 2;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          ((e = Math.max(e, this._children[d].getContentSize().width)),
          this._children[d].setPosition(
            0,
            f -
              (this._children[d].getContentSize().height *
                this._children[d].getScaleY()) /
                2
          ),
          (f -=
            this._children[d].getContentSize().height *
              this._children[d].getScaleY() +
            a));
    this.setContentSize(e, b);
  },
  alignItemsHorizontally: function () {
    this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING);
  },
  alignItemsHorizontallyWithPadding: function (a) {
    var b = -a,
      d;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (b +=
            this._children[d].getContentSize().width *
              this._children[d].getScaleX() +
            a);
    var e = 0,
      f = -b / 2;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          ((e = Math.max(e, this._children[d].getContentSize().height)),
          this._children[d].setPosition(
            f +
              (this._children[d].getContentSize().width *
                this._children[d].getScaleX()) /
                2,
            0
          ),
          (f +=
            this._children[d].getContentSize().width *
              this._children[d].getScaleX() +
            a));
    this.setContentSize(b, e);
  },
  alignItemsInColumns: function (a) {
    var b = [],
      d;
    for (d = 1; d < arguments.length; d++) b.push(arguments[d]);
    var e = -5,
      f = 0,
      g = 0,
      h = 0,
      k,
      m;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (f >= b.length
            ? cc.log("cc.MenuPassive.alignItemsInColumns(): invalid row index")
            : (k = b[f])
            ? ((m = this._children[d].getContentSize().height),
              (g = 0 | (g >= m || null == m ? g : m)),
              ++h,
              h >= k && ((e += g + 5), (g = h = 0), ++f))
            : cc.log(
                "cc.MenuPassive.alignItemsInColumns(): can not have zero columns on a row"
              ));
    var n = cc.director.getWinSize(),
      p = (k = g = f = 0),
      r = 0,
      e = e / 2;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (0 === k && ((k = b[f]), (r = p = n.width / (1 + k))),
          (m = this._children[d].getContentSize().height),
          (g = 0 | (g >= m || null == m ? g : m)),
          this._children[d].setPosition(
            r - n.width / 2,
            e - this._children[d].getContentSize().height / 2
          ),
          (r += p),
          ++h,
          h >= k && ((e -= g + 5), (g = k = h = 0), ++f));
  },
  alignItemsInRows: function (a) {
    var b = [],
      d;
    for (d = 1; d < arguments.length; d++) b.push(arguments[d]);
    var e = [],
      f = [],
      g = -10,
      h = -5,
      k = 0,
      m = 0,
      n = 0,
      p,
      r;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (k >= b.length
            ? cc.log("cc.MenuPassive.alignItemsInRows(): invalid row index")
            : (p = b[k])
            ? ((r = this._children[d].getContentSize().width),
              (m = 0 | (m >= r || null == r ? m : r)),
              (h += 0 | (this._children[d].getContentSize().height + 5)),
              ++n,
              n >= p &&
                (e.push(m),
                f.push(h),
                (g += m + 10),
                (m = n = 0),
                (h = -5),
                ++k))
            : cc.log(
                "cc.MenuPassive.alignItemsInColumns(): can't have zero rows on a column"
              ));
    h = cc.director.getWinSize();
    m = k = 0;
    p = null;
    var g = -g / 2,
      s = 0;
    if (this._children && 0 < this._children.length)
      for (d = 0; d < this._children.length; d++)
        this._children[d] &&
          (null == p && ((p = b[k]), (s = f[k])),
          (r = this._children[d].getContentSize().width),
          (m = 0 | (m >= r || null == r ? m : r)),
          this._children[d].setPosition(g + e[k] / 2, s - h.height / 2),
          (s -= this._children[d].getContentSize().height + 10),
          ++n,
          n >= p && ((g += m + 5), (m = p = n = 0), ++k));
  },
  setOpacityModifyRGB: function (a) {},
  isOpacityModifyRGB: function () {
    return !1;
  },
});
cc.MenuPassive.create = function (a) {
  a || (a = null);
  for (var b = [], d = 1; d < arguments.length; d++) b.push(arguments[d]);
  return (d = new cc.MenuPassive()) && d.initWithItems(a, b) ? d : null;
};
cc.MenuPassive.createWithItem = function (a) {
  return cc.MenuPassive.create(a, null);
};
cc.ControlSaturationBrightnessPicker = cc.Control.extend({
  _saturation: 0,
  _brightness: 0,
  _background: null,
  _overlay: null,
  _shadow: null,
  _slider: null,
  _startPos: null,
  _boxPos: 0,
  _boxSize: 0,
  _className: "ControlSaturationBrightnessPicker",
  ctor: function (a, b) {
    cc.Control.prototype.ctor.call(this);
    b && this.initWithTargetAndPos(a, b);
  },
  getSaturation: function () {
    return this._saturation;
  },
  getBrightness: function () {
    return this._brightness;
  },
  getBackground: function () {
    return this._background;
  },
  getOverlay: function () {
    return this._brightness;
  },
  getShadow: function () {
    return this._shadow;
  },
  getSlider: function () {
    return this._slider;
  },
  getStartPos: function () {
    return this._startPos;
  },
  initWithTargetAndPos: function (a, b) {
    return cc.Control.prototype.init.call(this)
      ? ((this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "colourPickerBackground.png",
          a,
          b,
          cc.p(0, 0)
        )),
        (this._overlay = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "colourPickerOverlay.png",
          a,
          b,
          cc.p(0, 0)
        )),
        (this._shadow = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "colourPickerShadow.png",
          a,
          b,
          cc.p(0, 0)
        )),
        (this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "colourPicker.png",
          a,
          b,
          cc.p(0.5, 0.5)
        )),
        (this._startPos = b),
        (this._boxPos = 35),
        (this._boxSize = this._background.getContentSize().width / 2),
        !0)
      : !1;
  },
  setEnabled: function (a) {
    cc.Control.prototype.setEnabled.call(this, a);
    this._slider && this._slider.setOpacity(a ? 255 : 128);
  },
  updateWithHSV: function (a) {
    var b = new cc.HSV();
    b.s = 1;
    b.h = a.h;
    b.v = 1;
    a = cc.ControlUtils.RGBfromHSV(b);
    this._background.setColor(
      cc.color(0 | (255 * a.r), 0 | (255 * a.g), 0 | (255 * a.b))
    );
  },
  updateDraggerWithHSV: function (a) {
    a = cc.p(
      this._startPos.x + this._boxPos + this._boxSize * (1 - a.s),
      this._startPos.y + this._boxPos + this._boxSize * a.v
    );
    this._updateSliderPosition(a);
  },
  _updateSliderPosition: function (a) {
    var b = this._startPos.x + 0.5 * this._background.getBoundingBox().width,
      d = this._startPos.y + 0.5 * this._background.getBoundingBox().height,
      e = a.x - b,
      f = a.y - d,
      g = Math.sqrt(e * e + f * f),
      e = Math.atan2(f, e),
      f = 0.5 * this._background.getBoundingBox().width;
    g > f && ((a.x = b + f * Math.cos(e)), (a.y = d + f * Math.sin(e)));
    this._slider.setPosition(a);
    a.x < this._startPos.x + this._boxPos
      ? (a.x = this._startPos.x + this._boxPos)
      : a.x > this._startPos.x + this._boxPos + this._boxSize - 1 &&
        (a.x = this._startPos.x + this._boxPos + this._boxSize - 1);
    a.y < this._startPos.y + this._boxPos
      ? (a.y = this._startPos.y + this._boxPos)
      : a.y > this._startPos.y + this._boxPos + this._boxSize &&
        (a.y = this._startPos.y + this._boxPos + this._boxSize);
    this._saturation =
      1 - Math.abs((this._startPos.x + this._boxPos - a.x) / this._boxSize);
    this._brightness = Math.abs(
      (this._startPos.y + this._boxPos - a.y) / this._boxSize
    );
  },
  _checkSliderPosition: function (a) {
    var b = this._startPos.x + 0.5 * this._background.getBoundingBox().width,
      d = this._startPos.y + 0.5 * this._background.getBoundingBox().height,
      b = a.x - b,
      d = a.y - d;
    return Math.sqrt(b * b + d * d) <=
      0.5 * this._background.getBoundingBox().width
      ? (this._updateSliderPosition(a),
        this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED),
        !0)
      : !1;
  },
  onTouchBegan: function (a, b) {
    if (!this.isEnabled() || !this.isVisible()) return !1;
    var d = this.getTouchLocation(a);
    return this._checkSliderPosition(d);
  },
  onTouchMoved: function (a, b) {
    var d = this.getTouchLocation(a);
    this._checkSliderPosition(d);
  },
});
_p = cc.ControlSaturationBrightnessPicker.prototype;
cc.defineGetterSetter(_p, "saturation", _p.getSaturation);
cc.defineGetterSetter(_p, "brightness", _p.getBrightness);
cc.defineGetterSetter(_p, "background", _p.getBackground);
cc.defineGetterSetter(_p, "overlay", _p.getOverlay);
cc.defineGetterSetter(_p, "shadow", _p.getShadow);
cc.defineGetterSetter(_p, "slider", _p.getSlider);
cc.defineGetterSetter(_p, "startPos", _p.getStartPos);
_p = null;
cc.ControlSaturationBrightnessPicker.create = function (a, b) {
  return new cc.ControlSaturationBrightnessPicker(a, b);
};
cc.ControlHuePicker = cc.Control.extend({
  _hue: 0,
  _huePercentage: 0,
  _background: null,
  _slider: null,
  _startPos: null,
  _className: "ControlHuePicker",
  ctor: function (a, b) {
    cc.Control.prototype.ctor.call(this);
    b && this.initWithTargetAndPos(a, b);
  },
  getHue: function () {
    return this._hue;
  },
  setHue: function (a) {
    this._hue = a;
    this.setHuePercentage(this._hue / 360);
  },
  getHuePercentage: function () {
    return this._huePercentage;
  },
  setHuePercentage: function (a) {
    this._huePercentage = a;
    this._hue = 360 * this._huePercentage;
    var b = this._background.getBoundingBox(),
      d = this._startPos.x + 0.5 * b.width;
    a = this._startPos.y + 0.5 * b.height;
    var b = 0.5 * b.width - 15,
      e = cc.degreesToRadians(360 * this._huePercentage - 180),
      d = d + b * Math.cos(e);
    a += b * Math.sin(e);
    this._slider.setPosition(d, a);
  },
  setEnabled: function (a) {
    cc.Control.prototype.setEnabled.call(this, a);
    this._slider && this._slider.setOpacity(a ? 255 : 128);
  },
  getBackground: function () {
    return this._background;
  },
  getSlider: function () {
    return this._slider;
  },
  getStartPos: function () {
    return this._startPos;
  },
  initWithTargetAndPos: function (a, b) {
    return cc.Control.prototype.init.call(this)
      ? ((this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "huePickerBackground.png",
          a,
          b,
          cc.p(0, 0)
        )),
        (this._slider = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
          "colourPicker.png",
          a,
          b,
          cc.p(0.5, 0.5)
        )),
        this._slider.setPosition(
          b.x,
          b.y + 0.5 * this._background.getBoundingBox().height
        ),
        (this._startPos = b),
        (this._huePercentage = this._hue = 0),
        !0)
      : !1;
  },
  _updateSliderPosition: function (a) {
    var b = this._background.getBoundingBox();
    a = Math.atan2(
      a.y - (this._startPos.y + 0.5 * b.height),
      a.x - (this._startPos.x + 0.5 * b.width)
    );
    a = cc.radiansToDegrees(a) + 180;
    this.setHue(a);
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  _checkSliderPosition: function (a) {
    var b = Math.sqrt(Math.pow(a.x + 10, 2) + Math.pow(a.y, 2));
    return 80 > b && 59 < b ? (this._updateSliderPosition(a), !0) : !1;
  },
  onTouchBegan: function (a, b) {
    if (!this.isEnabled() || !this.isVisible()) return !1;
    var d = this.getTouchLocation(a);
    return this._checkSliderPosition(d);
  },
  onTouchMoved: function (a, b) {
    var d = this.getTouchLocation(a);
    this._checkSliderPosition(d);
  },
});
_p = cc.ControlHuePicker.prototype;
cc.defineGetterSetter(_p, "hue", _p.getHue, _p.setHue);
cc.defineGetterSetter(
  _p,
  "huePercent",
  _p.getHuePercentage,
  _p.setHuePercentage
);
cc.defineGetterSetter(_p, "background", _p.getBackground);
cc.defineGetterSetter(_p, "slider", _p.getSlider);
cc.defineGetterSetter(_p, "startPos", _p.getStartPos);
_p = null;
cc.ControlHuePicker.create = function (a, b) {
  return new cc.ControlHuePicker(a, b);
};
cc.ControlColourPicker = cc.Control.extend({
  _hsv: null,
  _colourPicker: null,
  _huePicker: null,
  _background: null,
  _className: "ControlColourPicker",
  ctor: function () {
    cc.Control.prototype.ctor.call(this);
    this.init();
  },
  hueSliderValueChanged: function (a, b) {
    this._hsv.h = a.getHue();
    var d = cc.ControlUtils.RGBfromHSV(this._hsv);
    cc.Control.prototype.setColor.call(
      this,
      cc.color(0 | (255 * d.r), 0 | (255 * d.g), 0 | (255 * d.b))
    );
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
    this._updateControlPicker();
  },
  colourSliderValueChanged: function (a, b) {
    this._hsv.s = a.getSaturation();
    this._hsv.v = a.getBrightness();
    var d = cc.ControlUtils.RGBfromHSV(this._hsv);
    cc.Control.prototype.setColor.call(
      this,
      cc.color(0 | (255 * d.r), 0 | (255 * d.g), 0 | (255 * d.b))
    );
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  setColor: function (a) {
    cc.Control.prototype.setColor.call(this, a);
    var b = new cc.RGBA();
    b.r = a.r / 255;
    b.g = a.g / 255;
    b.b = a.b / 255;
    b.a = 1;
    this._hsv = cc.ControlUtils.HSVfromRGB(b);
    this._updateHueAndControlPicker();
  },
  getBackground: function () {
    return this._background;
  },
  init: function () {
    if (cc.Control.prototype.init.call(this)) {
      cc.spriteFrameCache.addSpriteFrames(
        res.CCControlColourPickerSpriteSheet_plist
      );
      var a = new cc.SpriteBatchNode(res.CCControlColourPickerSpriteSheet_png);
      this.addChild(a);
      this._hsv = new cc.HSV(0, 0, 0);
      this._background = cc.ControlUtils.addSpriteToTargetWithPosAndAnchor(
        "menuColourPanelBackground.png",
        a,
        cc.p(0, 0),
        cc.p(0.5, 0.5)
      );
      var b = cc.pSub(
        this._background.getPosition(),
        cc.p(
          this._background.getContentSize().width / 2,
          this._background.getContentSize().height / 2
        )
      );
      this._huePicker = new cc.ControlHuePicker(a, cc.p(b.x + 8, b.y + 8));
      this._colourPicker = new cc.ControlSaturationBrightnessPicker(
        a,
        cc.p(b.x + 28, b.y + 28)
      );
      this._huePicker.addTargetWithActionForControlEvents(
        this,
        this.hueSliderValueChanged,
        cc.CONTROL_EVENT_VALUECHANGED
      );
      this._colourPicker.addTargetWithActionForControlEvents(
        this,
        this.colourSliderValueChanged,
        cc.CONTROL_EVENT_VALUECHANGED
      );
      this._updateHueAndControlPicker();
      this.addChild(this._huePicker);
      this.addChild(this._colourPicker);
      this.setContentSize(this._background.getContentSize());
      return !0;
    }
    return !1;
  },
  _updateControlPicker: function () {
    this._huePicker.setHue(this._hsv.h);
    this._colourPicker.updateWithHSV(this._hsv);
  },
  _updateHueAndControlPicker: function () {
    this._huePicker.setHue(this._hsv.h);
    this._colourPicker.updateWithHSV(this._hsv);
    this._colourPicker.updateDraggerWithHSV(this._hsv);
  },
  setEnabled: function (a) {
    cc.Control.prototype.setEnabled.call(this, a);
    null !== this._huePicker && this._huePicker.setEnabled(a);
    this._colourPicker && this._colourPicker.setEnabled(a);
  },
  onTouchBegan: function () {
    return !1;
  },
});
_p = cc.ControlColourPicker.prototype;
cc.defineGetterSetter(_p, "background", _p.getBackground);
_p = null;
cc.ControlColourPicker.create = function () {
  return new cc.ControlColourPicker();
};
var res = res || {};
res.CCControlColourPickerSpriteSheet_plist =
  res.CCControlColourPickerSpriteSheet_plist ||
  "res/extensions/CCControlColourPickerSpriteSheet.plist";
res.CCControlColourPickerSpriteSheet_png =
  res.CCControlColourPickerSpriteSheet_png ||
  "res/extensions/CCControlColourPickerSpriteSheet.png";
cc.SLIDER_MARGIN_H = 24;
cc.SLIDER_MARGIN_V = 8;
cc.ControlSlider = cc.Control.extend({
  _value: 0,
  _minimumValue: 0,
  _maximumValue: 0,
  _minimumAllowedValue: 0,
  _maximumAllowedValue: 0,
  _thumbSprite: null,
  _progressSprite: null,
  _backgroundSprite: null,
  _className: "ControlSlider",
  ctor: function (a, b, d) {
    cc.Control.prototype.ctor.call(this);
    void 0 != d &&
      ((a = new cc.Sprite(a)),
      (b = new cc.Sprite(b)),
      (d = new cc.Sprite(d)),
      this.initWithSprites(a, b, d));
  },
  getValue: function () {
    return this._value;
  },
  setValue: function (a) {
    a = Math.max(a, this._minimumValue);
    this._value = a = Math.min(a, this._maximumValue);
    this.needsLayout();
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  getMinimumValue: function () {
    return this._minimumValue;
  },
  setMinimumValue: function (a) {
    this._minimumAllowedValue = this._minimumValue = a;
    this._minimumValue >= this._maximumValue &&
      (this._maximumValue = this._minimumValue + 1);
    this.setValue(this._value);
  },
  getMaximumValue: function () {
    return this._maximumValue;
  },
  setMaximumValue: function (a) {
    this._maximumAllowedValue = this._maximumValue = a;
    this._maximumValue <= this._minimumValue &&
      (this._minimumValue = this._maximumValue - 1);
    this.setValue(this._value);
  },
  isTouchInside: function (a) {
    a = a.getLocation();
    a = this.getParent().convertToNodeSpace(a);
    var b = this.getBoundingBox();
    b.width += this._thumbSprite.getContentSize().width;
    b.x -= this._thumbSprite.getContentSize().width / 2;
    return cc.rectContainsPoint(b, a);
  },
  locationFromTouch: function (a) {
    a = a.getLocation();
    a = this.convertToNodeSpace(a);
    0 > a.x
      ? (a.x = 0)
      : a.x > this._backgroundSprite.getContentSize().width &&
        (a.x = this._backgroundSprite.getContentSize().width);
    return a;
  },
  getMinimumAllowedValue: function () {
    return this._minimumAllowedValue;
  },
  setMinimumAllowedValue: function (a) {
    this._minimumAllowedValue = a;
  },
  getMaximumAllowedValue: function () {
    return this._maximumAllowedValue;
  },
  setMaximumAllowedValue: function (a) {
    this._maximumAllowedValue = a;
  },
  getThumbSprite: function () {
    return this._thumbSprite;
  },
  getProgressSprite: function () {
    return this._progressSprite;
  },
  getBackgroundSprite: function () {
    return this._backgroundSprite;
  },
  initWithSprites: function (a, b, d) {
    return cc.Control.prototype.init.call(this)
      ? (this.ignoreAnchorPointForPosition(!1),
        (this._backgroundSprite = a),
        (this._progressSprite = b),
        (this._thumbSprite = d),
        (a = cc.ControlUtils.CCRectUnion(
          a.getBoundingBox(),
          d.getBoundingBox()
        )),
        this.setContentSize(a.width, a.height),
        this._backgroundSprite.setAnchorPoint(0.5, 0.5),
        this._backgroundSprite.setPosition(a.width / 2, a.height / 2),
        this.addChild(this._backgroundSprite),
        this._progressSprite.setAnchorPoint(0, 0.5),
        this._progressSprite.setPosition(0, a.height / 2),
        this.addChild(this._progressSprite),
        this._thumbSprite.setPosition(0, a.height / 2),
        this.addChild(this._thumbSprite),
        (this._minimumValue = 0),
        (this._maximumValue = 1),
        this.setValue(this._minimumValue),
        !0)
      : !1;
  },
  setEnabled: function (a) {
    cc.Control.prototype.setEnabled.call(this, a);
    this._thumbSprite && this._thumbSprite.setOpacity(a ? 255 : 128);
  },
  sliderBegan: function (a) {
    this.setSelected(!0);
    this._thumbSprite.setColor(cc.color.GRAY);
    this.setValue(this.valueForLocation(a));
  },
  sliderMoved: function (a) {
    this.setValue(this.valueForLocation(a));
  },
  sliderEnded: function (a) {
    this.isSelected() &&
      this.setValue(this.valueForLocation(this._thumbSprite.getPosition()));
    this._thumbSprite.setColor(cc.color.WHITE);
    this.setSelected(!1);
  },
  getTouchLocationInControl: function (a) {
    a = a.getLocation();
    a = this.convertToNodeSpace(a);
    0 > a.x
      ? (a.x = 0)
      : a.x >
          this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H &&
        (a.x =
          this._backgroundSprite.getContentSize().width + cc.SLIDER_MARGIN_H);
    return a;
  },
  onTouchBegan: function (a, b) {
    if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible())
      return !1;
    var d = this.locationFromTouch(a);
    this.sliderBegan(d);
    return !0;
  },
  onTouchMoved: function (a, b) {
    var d = this.locationFromTouch(a);
    this.sliderMoved(d);
  },
  onTouchEnded: function (a, b) {
    this.sliderEnded(cc.p(0, 0));
  },
  needsLayout: function () {
    this._thumbSprite.setPositionX(
      ((this._value - this._minimumValue) /
        (this._maximumValue - this._minimumValue)) *
        this._backgroundSprite.getContentSize().width
    );
    var a = this._progressSprite.getTextureRect(),
      a = cc.rect(a.x, a.y, this._thumbSprite.getPositionX(), a.height);
    this._progressSprite.setTextureRect(
      a,
      this._progressSprite.isTextureRectRotated()
    );
    this._thumbSprite._renderCmd.transform(this._renderCmd);
  },
  valueForLocation: function (a) {
    a = a.x / this._backgroundSprite.getContentSize().width;
    return Math.max(
      Math.min(
        this._minimumValue + a * (this._maximumValue - this._minimumValue),
        this._maximumAllowedValue
      ),
      this._minimumAllowedValue
    );
  },
});
_p = cc.ControlSlider.prototype;
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(
  _p,
  "minAllowedValue",
  _p.getMinimumAllowedValue,
  _p.setMinimumAllowedValue
);
cc.defineGetterSetter(
  _p,
  "maxAllowedValue",
  _p.getMaximumAllowedValue,
  _p.setMaximumAllowedValue
);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite);
cc.defineGetterSetter(_p, "progressSprite", _p.getProgressSprite);
cc.defineGetterSetter(_p, "backgroundSprite", _p.getBackgroundSprite);
_p = null;
cc.ControlSlider.create = function (a, b, d) {
  return new cc.ControlSlider(a, b, d);
};
cc.ControlSwitch = cc.Control.extend({
  _switchSprite: null,
  _initialTouchXPosition: 0,
  _moved: !1,
  _on: !1,
  _className: "ControlSwitch",
  ctor: function (a, b, d, e, f, g) {
    cc.Control.prototype.ctor.call(this);
    g && this.initWithMaskSprite(a, b, d, e, f, g);
  },
  initWithMaskSprite: function (a, b, d, e, f, g) {
    if (!a)
      throw Error(
        "cc.ControlSwitch.initWithMaskSprite(): maskSprite should be non-null."
      );
    if (!b)
      throw Error(
        "cc.ControlSwitch.initWithMaskSprite(): onSprite should be non-null."
      );
    if (!d)
      throw Error(
        "cc.ControlSwitch.initWithMaskSprite(): offSprite should be non-null."
      );
    if (!e)
      throw Error(
        "cc.ControlSwitch.initWithMaskSprite(): thumbSprite should be non-null."
      );
    return this.init()
      ? ((this._on = !0),
        (this._switchSprite = new cc.ControlSwitchSprite()),
        this._switchSprite.initWithMaskSprite(a, b, d, e, f, g),
        this._switchSprite.setPosition(
          this._switchSprite.getContentSize().width / 2,
          this._switchSprite.getContentSize().height / 2
        ),
        this.addChild(this._switchSprite),
        this.ignoreAnchorPointForPosition(!1),
        this.setAnchorPoint(0.5, 0.5),
        this.setContentSize(this._switchSprite.getContentSize()),
        !0)
      : !1;
  },
  setOn: function (a, b) {
    b = b || !1;
    var d = (this._on = a)
      ? this._switchSprite.getOnPosition()
      : this._switchSprite.getOffPosition();
    b
      ? this._switchSprite.runAction(
          new cc.ActionTween(
            0.2,
            "sliderXPosition",
            this._switchSprite.getSliderXPosition(),
            d
          )
        )
      : this._switchSprite.setSliderXPosition(d);
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  isOn: function () {
    return this._on;
  },
  hasMoved: function () {
    return this._moved;
  },
  setEnabled: function (a) {
    this._enabled = a;
    this._switchSprite.setOpacity(a ? 255 : 128);
  },
  locationFromTouch: function (a) {
    a = a.getLocation();
    return (a = this.convertToNodeSpace(a));
  },
  onTouchBegan: function (a, b) {
    if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible())
      return !1;
    this._moved = !1;
    this._initialTouchXPosition =
      this.locationFromTouch(a).x - this._switchSprite.getSliderXPosition();
    this._switchSprite.getThumbSprite().setColor(cc.color.GRAY);
    this._switchSprite.needsLayout();
    return !0;
  },
  onTouchMoved: function (a, b) {
    var d = this.locationFromTouch(a),
      d = cc.p(d.x - this._initialTouchXPosition, 0);
    this._moved = !0;
    this._switchSprite.setSliderXPosition(d.x);
  },
  onTouchEnded: function (a, b) {
    var d = this.locationFromTouch(a);
    this._switchSprite.getThumbSprite().setColor(cc.color.WHITE);
    this.hasMoved()
      ? this.setOn(!(d.x < this._switchSprite.getContentSize().width / 2), !0)
      : this.setOn(!this._on, !0);
  },
  onTouchCancelled: function (a, b) {
    var d = this.locationFromTouch(a);
    this._switchSprite.getThumbSprite().setColor(cc.color.WHITE);
    this.hasMoved()
      ? this.setOn(!(d.x < this._switchSprite.getContentSize().width / 2), !0)
      : this.setOn(!this._on, !0);
  },
});
cc.ControlSwitch.create = function (a, b, d, e, f, g) {
  return new cc.ControlSwitch(a, b, d, e, f, g);
};
cc.ControlSwitchSprite = cc.Sprite.extend({
  _sliderXPosition: 0,
  _onPosition: 0,
  _offPosition: 0,
  _textureLocation: 0,
  _maskLocation: 0,
  _maskSize: null,
  _onSprite: null,
  _offSprite: null,
  _thumbSprite: null,
  _onLabel: null,
  _offLabel: null,
  _clipper: null,
  _stencil: null,
  _backRT: null,
  ctor: function () {
    cc.Sprite.prototype.ctor.call(this);
    this._maskLocation = this._offPosition = this._onPosition = this._sliderXPosition = 0;
    this._maskSize = cc.size(0, 0);
    this._offLabel = this._onLabel = this._thumbSprite = this._offSprite = this._onSprite = null;
  },
  initWithMaskSprite: function (a, b, d, e, f, g) {
    return cc.Sprite.prototype.init.call(this)
      ? (this.setSpriteFrame(a.displayFrame()),
        (this._onPosition = 0),
        (this._offPosition =
          -b.getContentSize().width + e.getContentSize().width / 2),
        (this._sliderXPosition = this._onPosition),
        this.setOnSprite(b),
        this.setOffSprite(d),
        this.setThumbSprite(e),
        this.setOnLabel(f),
        this.setOffLabel(g),
        (this._stencil = a),
        (a = this._maskSize = this._stencil.getContentSize()),
        this._stencil.setPosition(0, 0),
        (this._clipper = new cc.ClippingNode()),
        this._clipper.setAnchorPoint(0.5, 0.5),
        this._clipper.setPosition(a.width / 2, a.height / 2),
        this._clipper.setStencil(this._stencil),
        this.addChild(this._clipper),
        this._clipper.addChild(b),
        this._clipper.addChild(d),
        this._clipper.addChild(f),
        this._clipper.addChild(g),
        this.addChild(this._thumbSprite),
        this.needsLayout(),
        !0)
      : !1;
  },
  needsLayout: function () {
    var a = this._maskSize;
    this._onSprite.setPosition(
      this._onSprite.getContentSize().width / 2 +
        this._sliderXPosition -
        a.width / 2,
      this._onSprite.getContentSize().height / 2 - a.height / 2
    );
    this._offSprite.setPosition(
      this._onSprite.getContentSize().width +
        this._offSprite.getContentSize().width / 2 +
        this._sliderXPosition -
        a.width / 2,
      this._offSprite.getContentSize().height / 2 - a.height / 2
    );
    this._onLabel &&
      this._onLabel.setPosition(
        this._onSprite.getPositionX() -
          this._thumbSprite.getContentSize().width / 6,
        this._onSprite.getContentSize().height / 2 - a.height / 2
      );
    this._offLabel &&
      this._offLabel.setPosition(
        this._offSprite.getPositionX() +
          this._thumbSprite.getContentSize().width / 6,
        this._offSprite.getContentSize().height / 2 - a.height / 2
      );
    this._thumbSprite.setPosition(
      this._onSprite.getContentSize().width + this._sliderXPosition,
      this._maskSize.height / 2
    );
  },
  setSliderXPosition: function (a) {
    a <= this._offPosition
      ? (a = this._offPosition)
      : a >= this._onPosition && (a = this._onPosition);
    this._sliderXPosition = a;
    this.needsLayout();
  },
  getSliderXPosition: function () {
    return this._sliderXPosition;
  },
  _getOnSideWidth: function () {
    return this._onSprite.getContentSize().width;
  },
  _getOffSideWidth: function () {
    return this._offSprite.getContentSize().height;
  },
  updateTweenAction: function (a, b) {
    "sliderXPosition" === b && this.setSliderXPosition(a);
  },
  setOnPosition: function (a) {
    this._onPosition = a;
  },
  getOnPosition: function () {
    return this._onPosition;
  },
  setOffPosition: function (a) {
    this._offPosition = a;
  },
  getOffPosition: function () {
    return this._offPosition;
  },
  setMaskTexture: function (a) {
    this._stencil.setTexture(a);
  },
  getMaskTexture: function () {
    return this._stencil.getTexture();
  },
  setTextureLocation: function (a) {
    this._textureLocation = a;
  },
  getTextureLocation: function () {
    return this._textureLocation;
  },
  setMaskLocation: function (a) {
    this._maskLocation = a;
  },
  getMaskLocation: function () {
    return this._maskLocation;
  },
  setOnSprite: function (a) {
    this._onSprite = a;
  },
  getOnSprite: function () {
    return this._onSprite;
  },
  setOffSprite: function (a) {
    this._offSprite = a;
  },
  getOffSprite: function () {
    return this._offSprite;
  },
  setThumbSprite: function (a) {
    this._thumbSprite = a;
  },
  getThumbSprite: function () {
    return this._thumbSprite;
  },
  setOnLabel: function (a) {
    this._onLabel = a;
  },
  getOnLabel: function () {
    return this._onLabel;
  },
  setOffLabel: function (a) {
    this._offLabel = a;
  },
  getOffLabel: function () {
    return this._offLabel;
  },
});
_p = cc.ControlSwitchSprite.prototype;
cc.defineGetterSetter(
  _p,
  "sliderX",
  _p.getSliderXPosition,
  _p.setSliderXPosition
);
cc.defineGetterSetter(_p, "onPos", _p.getOnPosition, _p.setOnPosition);
cc.defineGetterSetter(_p, "offPos", _p.getOffPosition, _p.setOffPosition);
cc.defineGetterSetter(_p, "maskTexture", _p.getMaskTexture, _p.setMaskTexture);
cc.defineGetterSetter(_p, "maskPos", _p.getMaskLocation, _p.setMaskLocation);
cc.defineGetterSetter(_p, "onSprite", _p.getOnSprite, _p.setOnSprite);
cc.defineGetterSetter(_p, "offSprite", _p.getOffSprite, _p.setOffSprite);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite, _p.setThumbSprite);
cc.defineGetterSetter(_p, "onLabel", _p.getOnLabel, _p.setOnLabel);
cc.defineGetterSetter(_p, "offLabel", _p.getOffLabel, _p.setOffLabel);
cc.defineGetterSetter(_p, "onSideWidth", _p._getOnSideWidth);
cc.defineGetterSetter(_p, "offSideWidth", _p._getOffSideWidth);
_p = null;
cc.CONTROL_STEPPER_PARTMINUS = 0;
cc.CONTROL_STEPPER_PARTPLUS = 1;
cc.CONTROL_STEPPER_PARTNONE = 2;
cc.CONTROL_STEPPER_LABELCOLOR_ENABLED = cc.color(55, 55, 55);
cc.CONTROL_STEPPER_LABELCOLOR_DISABLED = cc.color(147, 147, 147);
cc.CONTROL_STEPPER_LABELFONT = "CourierNewPSMT";
cc.AUTOREPEAT_DELTATIME = 0.15;
cc.AUTOREPEAT_INCREASETIME_INCREMENT = 12;
cc.ControlStepper = cc.Control.extend({
  _minusSprite: null,
  _plusSprite: null,
  _minusLabel: null,
  _plusLabel: null,
  _value: 0,
  _continuous: !1,
  _autorepeat: !1,
  _wraps: !1,
  _minimumValue: 0,
  _maximumValue: 0,
  _stepValue: 0,
  _touchInsideFlag: !1,
  _touchedPart: cc.CONTROL_STEPPER_PARTNONE,
  _autorepeatCount: 0,
  _className: "ControlStepper",
  ctor: function (a, b) {
    cc.Control.prototype.ctor.call(this);
    this._plusLabel = this._minusLabel = this._plusSprite = this._minusSprite = null;
    this._value = 0;
    this._wraps = this._autorepeat = this._continuous = !1;
    this._stepValue = this._maximumValue = this._minimumValue = 0;
    this._touchInsideFlag = !1;
    this._touchedPart = cc.CONTROL_STEPPER_PARTNONE;
    this._autorepeatCount = 0;
    b && this.initWithMinusSpriteAndPlusSprite(a, b);
  },
  initWithMinusSpriteAndPlusSprite: function (a, b) {
    if (!a)
      throw Error(
        "cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Minus sprite should be non-null."
      );
    if (!b)
      throw Error(
        "cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Plus sprite should be non-null."
      );
    if (this.init()) {
      this._continuous = this._autorepeat = !0;
      this._minimumValue = 0;
      this._maximumValue = 100;
      this._value = 0;
      this._stepValue = 1;
      this._wraps = !1;
      this.ignoreAnchorPointForPosition(!1);
      this.setMinusSprite(a);
      this._minusSprite.setPosition(
        a.getContentSize().width / 2,
        a.getContentSize().height / 2
      );
      this.addChild(this._minusSprite);
      this.setMinusLabel(
        new cc.LabelTTF(
          "-",
          cc.CONTROL_STEPPER_LABELFONT,
          40,
          cc.size(40, 40),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_CENTER
        )
      );
      this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_DISABLED);
      this._minusLabel.setPosition(
        this._minusSprite.getContentSize().width / 2,
        this._minusSprite.getContentSize().height / 2
      );
      this._minusSprite.addChild(this._minusLabel);
      this.setPlusSprite(b);
      this._plusSprite.setPosition(
        a.getContentSize().width + b.getContentSize().width / 2,
        a.getContentSize().height / 2
      );
      this.addChild(this._plusSprite);
      this.setPlusLabel(
        new cc.LabelTTF(
          "+",
          cc.CONTROL_STEPPER_LABELFONT,
          40,
          cc.size(40, 40),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_CENTER
        )
      );
      this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED);
      this._plusLabel.setPosition(
        this._plusSprite.getContentSize().width / 2,
        this._plusSprite.getContentSize().height / 2
      );
      this._plusSprite.addChild(this._plusLabel);
      var d = cc.ControlUtils.CCRectUnion(
        this._minusSprite.getBoundingBox(),
        this._plusSprite.getBoundingBox()
      );
      this.setContentSize(
        this._minusSprite.getContentSize().width +
          this._plusSprite.getContentSize().height,
        d.height
      );
      return !0;
    }
    return !1;
  },
  setWraps: function (a) {
    if ((this._wraps = a))
      this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),
        this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED);
    this.setValue(this._value);
  },
  getWraps: function () {
    return this._wraps;
  },
  setMinimumValue: function (a) {
    if (a >= this._maximumValue)
      throw Error(
        "cc.ControlStepper.setMinimumValue(): minimumValue should be numerically less than maximumValue."
      );
    this._minimumValue = a;
    this.setValue(this._value);
  },
  getMinimumValue: function () {
    return this._minimumValue;
  },
  setMaximumValue: function (a) {
    if (a <= this._minimumValue)
      throw Error(
        "cc.ControlStepper.setMaximumValue(): maximumValue should be numerically less than maximumValue."
      );
    this._maximumValue = a;
    this.setValue(this._value);
  },
  getMaximumValue: function () {
    return this._maximumValue;
  },
  setValue: function (a) {
    this.setValueWithSendingEvent(a, !0);
  },
  getValue: function () {
    return this._value;
  },
  setStepValue: function (a) {
    if (0 >= a)
      throw Error(
        "cc.ControlStepper.setMaximumValue(): stepValue should be numerically greater than 0."
      );
    this._stepValue = a;
  },
  getStepValue: function () {
    return this._stepValue;
  },
  isContinuous: function () {
    return this._continuous;
  },
  setValueWithSendingEvent: function (a, b) {
    a < this._minimumValue
      ? (a = this._wraps ? this._maximumValue : this._minimumValue)
      : a > this._maximumValue &&
        (a = this._wraps ? this._minimumValue : this._maximumValue);
    this._value = a;
    this._wraps ||
      (this._minusLabel.setColor(
        a === this._minimumValue
          ? cc.CONTROL_STEPPER_LABELCOLOR_DISABLED
          : cc.CONTROL_STEPPER_LABELCOLOR_ENABLED
      ),
      this._plusLabel.setColor(
        a === this._maximumValue
          ? cc.CONTROL_STEPPER_LABELCOLOR_DISABLED
          : cc.CONTROL_STEPPER_LABELCOLOR_ENABLED
      ));
    b && this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  startAutorepeat: function () {
    this._autorepeatCount = -1;
    this.schedule(
      this.update,
      cc.AUTOREPEAT_DELTATIME,
      cc.REPEAT_FOREVER,
      3 * cc.AUTOREPEAT_DELTATIME
    );
  },
  stopAutorepeat: function () {
    this.unschedule(this.update);
  },
  update: function (a) {
    this._autorepeatCount++;
    (this._autorepeatCount < cc.AUTOREPEAT_INCREASETIME_INCREMENT &&
      0 !== this._autorepeatCount % 3) ||
      (this._touchedPart === cc.CONTROL_STEPPER_PARTMINUS
        ? this.setValueWithSendingEvent(
            this._value - this._stepValue,
            this._continuous
          )
        : this._touchedPart === cc.CONTROL_STEPPER_PARTPLUS &&
          this.setValueWithSendingEvent(
            this._value + this._stepValue,
            this._continuous
          ));
  },
  updateLayoutUsingTouchLocation: function (a) {
    a.x < this._minusSprite.getContentSize().width &&
    this._value > this._minimumValue
      ? ((this._touchedPart = cc.CONTROL_STEPPER_PARTMINUS),
        this._minusSprite.setColor(cc.color.GRAY),
        this._plusSprite.setColor(cc.color.WHITE))
      : a.x >= this._minusSprite.getContentSize().width &&
        this._value < this._maximumValue
      ? ((this._touchedPart = cc.CONTROL_STEPPER_PARTPLUS),
        this._minusSprite.setColor(cc.color.WHITE),
        this._plusSprite.setColor(cc.color.GRAY))
      : ((this._touchedPart = cc.CONTROL_STEPPER_PARTNONE),
        this._minusSprite.setColor(cc.color.WHITE),
        this._plusSprite.setColor(cc.color.WHITE));
  },
  onTouchBegan: function (a, b) {
    if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible())
      return !1;
    var d = this.getTouchLocation(a);
    this.updateLayoutUsingTouchLocation(d);
    this._touchInsideFlag = !0;
    this._autorepeat && this.startAutorepeat();
    return !0;
  },
  onTouchMoved: function (a, b) {
    if (this.isTouchInside(a)) {
      var d = this.getTouchLocation(a);
      this.updateLayoutUsingTouchLocation(d);
      this._touchInsideFlag ||
        ((this._touchInsideFlag = !0),
        this._autorepeat && this.startAutorepeat());
    } else
      (this._touchInsideFlag = !1),
        (this._touchedPart = cc.CONTROL_STEPPER_PARTNONE),
        this._minusSprite.setColor(cc.color.WHITE),
        this._plusSprite.setColor(cc.color.WHITE),
        this._autorepeat && this.stopAutorepeat();
  },
  onTouchEnded: function (a, b) {
    this._minusSprite.setColor(cc.color.WHITE);
    this._plusSprite.setColor(cc.color.WHITE);
    this._autorepeat && this.stopAutorepeat();
    if (this.isTouchInside(a)) {
      var d = this.getTouchLocation(a);
      this.setValue(
        this._value +
          (d.x < this._minusSprite.getContentSize().width
            ? 0 - this._stepValue
            : this._stepValue)
      );
    }
  },
  setMinusSprite: function (a) {
    this._minusSprite = a;
  },
  getMinusSprite: function () {
    return this._minusSprite;
  },
  setPlusSprite: function (a) {
    this._plusSprite = a;
  },
  getPlusSprite: function () {
    return this._plusSprite;
  },
  setMinusLabel: function (a) {
    this._minusLabel = a;
  },
  getMinusLabel: function () {
    return this._minusLabel;
  },
  setPlusLabel: function (a) {
    this._plusLabel = a;
  },
  getPlusLabel: function () {
    return this._plusLabel;
  },
});
_p = cc.ControlStepper.prototype;
cc.defineGetterSetter(_p, "wraps", _p.getWraps, _p.setWraps);
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(_p, "stepValue", _p.getStepValue, _p.setStepValue);
cc.defineGetterSetter(_p, "continuous", _p.isContinuous);
cc.defineGetterSetter(_p, "minusSprite", _p.getMinusSprite, _p.setMinusSprite);
cc.defineGetterSetter(_p, "plusSprite", _p.getPlusSprite, _p.setPlusSprite);
cc.defineGetterSetter(_p, "minusLabel", _p.getMinusLabel, _p.setMinusLabel);
cc.defineGetterSetter(_p, "plusLabel", _p.getPlusLabel, _p.setPlusLabel);
_p = null;
cc.ControlStepper.create = function (a, b) {
  return new cc.ControlStepper(a, b);
};
cc.ControlPotentiometer = cc.Control.extend({
  _thumbSprite: null,
  _progressTimer: null,
  _previousLocation: null,
  _value: 0,
  _minimumValue: 0,
  _maximumValue: 1,
  _className: "ControlPotentiometer",
  ctor: function (a, b, d) {
    cc.Control.prototype.ctor.call(this);
    void 0 != d &&
      ((a = new cc.Sprite(a)),
      (d = new cc.Sprite(d)),
      (b = new cc.ProgressTimer(new cc.Sprite(b))),
      this.initWithTrackSprite_ProgressTimer_ThumbSprite(a, b, d));
  },
  initWithTrackSprite_ProgressTimer_ThumbSprite: function (a, b, d) {
    return this.init()
      ? (this.setProgressTimer(b),
        this.setThumbSprite(d),
        this._thumbSprite.setPosition(b.getPosition()),
        this.addChild(d, 2),
        this.addChild(b, 1),
        this.addChild(a),
        this.setContentSize(a.getContentSize()),
        (this._minimumValue = 0),
        (this._maximumValue = 1),
        this.setValue(this._minimumValue),
        !0)
      : !1;
  },
  setEnabled: function (a) {
    this.setEnabled(a);
    null !== this._thumbSprite && this._thumbSprite.setOpacity(a ? 255 : 128);
  },
  setValue: function (a) {
    a < this._minimumValue && (a = this._minimumValue);
    a > this._maximumValue && (a = this._maximumValue);
    this._value = a;
    a = (a - this._minimumValue) / (this._maximumValue - this._minimumValue);
    this._progressTimer.setPercentage(100 * a);
    this._thumbSprite.setRotation(360 * a);
    this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED);
  },
  getValue: function () {
    return this._value;
  },
  setMinimumValue: function (a) {
    this._minimumValue = a;
    this._minimumValue >= this._maximumValue &&
      (this._maximumValue = this._minimumValue + 1);
    this.setValue(this._maximumValue);
  },
  getMinimumValue: function () {
    return this._minimumValue;
  },
  setMaximumValue: function (a) {
    this._maximumValue = a;
    this._maximumValue <= this._minimumValue &&
      (this._minimumValue = this._maximumValue - 1);
    this.setValue(this._minimumValue);
  },
  getMaximumValue: function () {
    return this._maximumValue;
  },
  isTouchInside: function (a) {
    a = this.getTouchLocation(a);
    return (
      this.distanceBetweenPointAndPoint(this._progressTimer.getPosition(), a) <
      Math.min(
        this.getContentSize().width / 2,
        this.getContentSize().height / 2
      )
    );
  },
  onTouchBegan: function (a, b) {
    if (!this.isTouchInside(a) || !this.isEnabled() || !this.isVisible())
      return !1;
    this._previousLocation = this.getTouchLocation(a);
    this.potentiometerBegan(this._previousLocation);
    return !0;
  },
  onTouchMoved: function (a, b) {
    var d = this.getTouchLocation(a);
    this.potentiometerMoved(d);
  },
  onTouchEnded: function (a, b) {
    this.potentiometerEnded(cc.p(0, 0));
  },
  distanceBetweenPointAndPoint: function (a, b) {
    var d = a.x - b.x,
      e = a.y - b.y;
    return Math.sqrt(d * d + e * e);
  },
  angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint: function (
    a,
    b,
    d,
    e
  ) {
    var f = e.x - d.x;
    d = e.y - d.y;
    a = Math.atan2(b.x - a.x, b.y - a.y);
    f = Math.atan2(f, d);
    return (180 * (a - f)) / Math.PI;
  },
  potentiometerBegan: function (a) {
    this.setSelected(!0);
    this.getThumbSprite().setColor(cc.color.GRAY);
  },
  potentiometerMoved: function (a) {
    var b = this.angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint(
      this._progressTimer.getPosition(),
      a,
      this._progressTimer.getPosition(),
      this._previousLocation
    );
    180 < b ? (b -= 360) : -180 > b && (b += 360);
    this.setValue(
      this._value + (b / 360) * (this._maximumValue - this._minimumValue)
    );
    this._previousLocation = a;
  },
  potentiometerEnded: function (a) {
    this.getThumbSprite().setColor(cc.color.WHITE);
    this.setSelected(!1);
  },
  setThumbSprite: function (a) {
    this._thumbSprite = a;
  },
  getThumbSprite: function () {
    return this._thumbSprite;
  },
  setProgressTimer: function (a) {
    this._progressTimer = a;
  },
  getProgressTimer: function () {
    return this._progressTimer;
  },
  setPreviousLocation: function (a) {
    this._previousLocation = a;
  },
  getPreviousLocation: function () {
    return this._previousLocation;
  },
});
_p = cc.ControlPotentiometer.prototype;
cc.defineGetterSetter(_p, "value", _p.getValue, _p.setValue);
cc.defineGetterSetter(_p, "minValue", _p.getMinimumValue, _p.setMinimumValue);
cc.defineGetterSetter(_p, "maxValue", _p.getMaximumValue, _p.setMaximumValue);
cc.defineGetterSetter(
  _p,
  "progressTimer",
  _p.getProgressTimer,
  _p.setProgressTimer
);
cc.defineGetterSetter(_p, "thumbSprite", _p.getThumbSprite, _p.setThumbSprite);
cc.defineGetterSetter(
  _p,
  "prevLocation",
  _p.getPreviousLocation,
  _p.setPreviousLocation
);
_p = null;
cc.ControlPotentiometer.create = function (a, b, d) {
  return new cc.ControlPotentiometer(a, b, d);
};
cc.SCROLLVIEW_DIRECTION_NONE = -1;
cc.SCROLLVIEW_DIRECTION_HORIZONTAL = 0;
cc.SCROLLVIEW_DIRECTION_VERTICAL = 1;
cc.SCROLLVIEW_DIRECTION_BOTH = 2;
var SCROLL_DEACCEL_RATE = 0.95,
  SCROLL_DEACCEL_DIST = 1,
  BOUNCE_DURATION = 0.15,
  INSET_RATIO = 0.2,
  MOVE_INCH = 0.04375,
  BOUNCE_BACK_FACTOR = 0.35;
cc.convertDistanceFromPointToInch = function (a) {
  var b = cc.view,
    b = (b.getScaleX() + b.getScaleY()) / 2;
  return (a * b) / 160;
};
cc.ScrollViewDelegate = cc.Class.extend({
  scrollViewDidScroll: function (a) {},
  scrollViewDidZoom: function (a) {},
});
cc.ScrollView = cc.Layer.extend({
  _zoomScale: 0,
  _minZoomScale: 0,
  _maxZoomScale: 0,
  _delegate: null,
  _direction: cc.SCROLLVIEW_DIRECTION_BOTH,
  _dragging: !1,
  _contentOffset: null,
  _container: null,
  _touchMoved: !1,
  _maxInset: null,
  _minInset: null,
  _bounceable: !1,
  _clippingToBounds: !1,
  _scrollDistance: null,
  _touchPoint: null,
  _touchLength: 0,
  _touches: null,
  _viewSize: null,
  _minScale: 0,
  _maxScale: 0,
  _parentScissorRect: null,
  _scissorRestored: !1,
  _tmpViewRect: null,
  _touchListener: null,
  _className: "ScrollView",
  ctor: function (a, b) {
    cc.Layer.prototype.ctor.call(this);
    this._contentOffset = cc.p(0, 0);
    this._maxInset = cc.p(0, 0);
    this._minInset = cc.p(0, 0);
    this._scrollDistance = cc.p(0, 0);
    this._touchPoint = cc.p(0, 0);
    this._touches = [];
    this._viewSize = cc.size(0, 0);
    this._parentScissorRect = new cc.Rect(0, 0, 0, 0);
    this._tmpViewRect = new cc.Rect(0, 0, 0, 0);
    void 0 != b
      ? this.initWithViewSize(a, b)
      : this.initWithViewSize(cc.size(200, 200), null);
  },
  init: function () {
    return this.initWithViewSize(cc.size(200, 200), null);
  },
  initWithViewSize: function (a, b) {
    var d = cc.p(0, 0);
    return cc.Layer.prototype.init.call(this)
      ? (b || this._container || (b = new cc.Layer()),
        b && this.setContainer(b),
        this.setViewSize(a),
        this.setTouchEnabled(!0),
        (this._touches.length = 0),
        (this._delegate = null),
        (this._clippingToBounds = this._bounceable = !0),
        (this._direction = cc.SCROLLVIEW_DIRECTION_BOTH),
        this._container.setPosition(d),
        (this._touchLength = 0),
        (this._minScale = this._maxScale = 1),
        !0)
      : !1;
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      a = cc.renderer;
      b.visit(d);
      this._clippingToBounds && a.pushRenderCommand(b.startCmd);
      var e = this._children,
        f = e.length;
      if (0 < f)
        for (
          this._reorderChildDirty && this.sortAllChildren(), d = 0;
          d < f;
          d++
        )
          e[d].visit(this);
      this._clippingToBounds && a.pushRenderCommand(b.endCmd);
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  setContentOffset: function (a, b) {
    if (b) this.setContentOffsetInDuration(a, BOUNCE_DURATION);
    else {
      if (!this._bounceable) {
        var d = this.minContainerOffset(),
          e = this.maxContainerOffset();
        a.x = Math.max(d.x, Math.min(e.x, a.x));
        a.y = Math.max(d.y, Math.min(e.y, a.y));
      }
      this._container.setPosition(a);
      d = this._delegate;
      null != d && d.scrollViewDidScroll && d.scrollViewDidScroll(this);
    }
  },
  getContentOffset: function () {
    var a = this._container.getPosition();
    return cc.p(a.x, a.y);
  },
  setContentOffsetInDuration: function (a, b) {
    var d = cc.moveTo(b, a),
      e = cc.callFunc(this._stoppedAnimatedScroll, this);
    this._container.runAction(cc.sequence(d, e));
    this.schedule(this._performedAnimatedScroll);
  },
  setZoomScale: function (a, b) {
    if (b) this.setZoomScaleInDuration(a, BOUNCE_DURATION);
    else {
      var d = this._container;
      if (d.getScale() !== a) {
        var e, f;
        0 === this._touchLength
          ? ((f = this._viewSize),
            (f = cc.p(0.5 * f.width, 0.5 * f.height)),
            (f = this.convertToWorldSpace(f)))
          : (f = this._touchPoint);
        e = d.convertToNodeSpace(f);
        d.setScale(Math.max(this._minScale, Math.min(this._maxScale, a)));
        e = d.convertToWorldSpace(e);
        f = cc.pSub(f, e);
        this._delegate &&
          this._delegate.scrollViewDidZoom &&
          this._delegate.scrollViewDidZoom(this);
        this.setContentOffset(cc.pAdd(d.getPosition(), f));
      }
    }
  },
  getZoomScale: function () {
    return this._container.getScale();
  },
  setZoomScaleInDuration: function (a, b) {
    if (0 < b) {
      var d = this._container.getScale();
      d !== a &&
        ((d = cc.actionTween(b, "zoomScale", d, a)), this.runAction(d));
    } else this.setZoomScale(a);
  },
  minContainerOffset: function () {
    var a = this._container,
      b = a.getContentSize(),
      d = this._viewSize;
    return cc.p(
      d.width - b.width * a.getScaleX(),
      d.height - b.height * a.getScaleY()
    );
  },
  maxContainerOffset: function () {
    return cc.p(0, 0);
  },
  isNodeVisible: function (a) {
    var b = this.getContentOffset(),
      d = this.getViewSize(),
      e = this.getZoomScale(),
      b = cc.rect(-b.x / e, -b.y / e, d.width / e, d.height / e);
    return cc.rectIntersectsRect(b, a.getBoundingBox());
  },
  pause: function (a) {
    this._container.pause();
    a = this._container.getChildren();
    for (var b = 0; b < a.length; b++) a[b].pause();
    this._super();
  },
  resume: function (a) {
    a = this._container.getChildren();
    for (var b = 0, d = a.length; b < d; b++) a[b].resume();
    this._container.resume();
    this._super();
  },
  isDragging: function () {
    return this._dragging;
  },
  isTouchMoved: function () {
    return this._touchMoved;
  },
  isBounceable: function () {
    return this._bounceable;
  },
  setBounceable: function (a) {
    this._bounceable = a;
  },
  getViewSize: function () {
    return this._viewSize;
  },
  setViewSize: function (a) {
    this._viewSize = a;
    cc.Node.prototype.setContentSize.call(this, a);
  },
  getContainer: function () {
    return this._container;
  },
  setContainer: function (a) {
    a &&
      (this.removeAllChildren(!0),
      (this._container = a),
      a.ignoreAnchorPointForPosition(!1),
      a.setAnchorPoint(0, 0),
      this.addChild(a),
      this.setViewSize(this._viewSize));
  },
  getDirection: function () {
    return this._direction;
  },
  setDirection: function (a) {
    this._direction = a;
  },
  getDelegate: function () {
    return this._delegate;
  },
  setDelegate: function (a) {
    this._delegate = a;
  },
  onTouchBegan: function (a, b) {
    for (var d = this; null != d; d = d.parent) if (!d.isVisible()) return !1;
    var d = this._getViewRect(),
      e = this._container,
      f = e.convertToWorldSpace(e.convertTouchToNodeSpace(a)),
      g = this._touches;
    if (2 < g.length || this._touchMoved || !cc.rectContainsPoint(d, f))
      return !1;
    g.push(a);
    1 === g.length
      ? ((this._touchPoint = this.convertTouchToNodeSpace(a)),
        (this._touchMoved = !1),
        (this._dragging = !0),
        (this._scrollDistance.x = 0),
        (this._touchLength = this._scrollDistance.y = 0))
      : 2 === g.length &&
        ((this._touchPoint = cc.pMidpoint(
          this.convertTouchToNodeSpace(g[0]),
          this.convertTouchToNodeSpace(g[1])
        )),
        (this._touchLength = cc.pDistance(
          e.convertTouchToNodeSpace(g[0]),
          e.convertTouchToNodeSpace(g[1])
        )),
        (this._dragging = !1));
    return !0;
  },
  onTouchMoved: function (a, b) {
    if (this.isVisible())
      if ((this.setNodeDirty(), 1 === this._touches.length && this._dragging)) {
        this._touchMoved = !0;
        this._getViewRect();
        var d = this.convertTouchToNodeSpace(a),
          e = cc.pSub(d, this._touchPoint),
          f = 0,
          g = this._direction,
          h;
        if (g === cc.SCROLLVIEW_DIRECTION_VERTICAL)
          (f = e.y),
            (h = this._container.getPositionY()),
            (this.minContainerOffset().y <= h &&
              h <= this.maxContainerOffset().y) ||
              (e.y *= BOUNCE_BACK_FACTOR);
        else if (g === cc.SCROLLVIEW_DIRECTION_HORIZONTAL)
          (f = e.x),
            (h = this._container.getPositionX()),
            (this.minContainerOffset().x <= h &&
              h <= this.maxContainerOffset().x) ||
              (e.x *= BOUNCE_BACK_FACTOR);
        else {
          f = Math.sqrt(e.x * e.x + e.y * e.y);
          h = this._container.getPositionY();
          var k = this.minContainerOffset(),
            m = this.maxContainerOffset();
          (k.y <= h && h <= m.y) || (e.y *= BOUNCE_BACK_FACTOR);
          h = this._container.getPositionX();
          (k.x <= h && h <= m.x) || (e.x *= BOUNCE_BACK_FACTOR);
        }
        if (
          this._touchMoved ||
          !(Math.abs(cc.convertDistanceFromPointToInch(f)) < MOVE_INCH)
        )
          if (
            (this._touchMoved || ((e.x = 0), (e.y = 0)),
            (this._touchPoint = d),
            (this._touchMoved = !0),
            this._dragging)
          ) {
            switch (g) {
              case cc.SCROLLVIEW_DIRECTION_VERTICAL:
                e.x = 0;
                break;
              case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
                e.y = 0;
            }
            f = this._container.getPosition();
            d = f.x + e.x;
            f = f.y + e.y;
            this._scrollDistance = e;
            this.setContentOffset(cc.p(d, f));
          }
      } else
        2 !== this._touches.length ||
          this._dragging ||
          ((e = cc.pDistance(
            this._container.convertTouchToNodeSpace(this._touches[0]),
            this._container.convertTouchToNodeSpace(this._touches[1])
          )),
          this.setZoomScale((this.getZoomScale() * e) / this._touchLength));
  },
  onTouchEnded: function (a, b) {
    this.isVisible() &&
      (1 === this._touches.length &&
        this._touchMoved &&
        this.schedule(this._deaccelerateScrolling),
      (this._touches.length = 0),
      (this._touchMoved = this._dragging = !1));
  },
  onTouchCancelled: function (a, b) {
    this.isVisible() &&
      ((this._touches.length = 0), (this._touchMoved = this._dragging = !1));
  },
  setContentSize: function (a, b) {
    null !== this.getContainer() &&
      (void 0 === b
        ? this.getContainer().setContentSize(a)
        : this.getContainer().setContentSize(a, b),
      this.updateInset());
  },
  _setWidth: function (a) {
    var b = this.getContainer();
    null !== b && (b._setWidth(a), this.updateInset());
  },
  _setHeight: function (a) {
    var b = this.getContainer();
    null !== b && (b._setHeight(a), this.updateInset());
  },
  getContentSize: function () {
    return this._container.getContentSize();
  },
  updateInset: function () {
    if (null !== this.getContainer()) {
      var a = this._viewSize,
        b = this.maxContainerOffset();
      this._maxInset.x = b.x + a.width * INSET_RATIO;
      this._maxInset.y = b.y + a.height * INSET_RATIO;
      b = this.minContainerOffset();
      this._minInset.x = b.x - a.width * INSET_RATIO;
      this._minInset.y = b.y - a.height * INSET_RATIO;
    }
  },
  isClippingToBounds: function () {
    return this._clippingToBounds;
  },
  setClippingToBounds: function (a) {
    this._clippingToBounds = a;
  },
  addChild: function (a, b, d) {
    if (!a) throw Error("child must not nil!");
    b = b || a.getLocalZOrder();
    d = d || a.getTag();
    this._container !== a
      ? this._container.addChild(a, b, d)
      : cc.Layer.prototype.addChild.call(this, a, b, d);
  },
  isTouchEnabled: function () {
    return null !== this._touchListener;
  },
  setTouchEnabled: function (a) {
    this._touchListener && cc.eventManager.removeListener(this._touchListener);
    this._touchListener = null;
    a
      ? ((a = cc.EventListener.create({
          event: cc.EventListener.TOUCH_ONE_BY_ONE,
        })),
        this.onTouchBegan && (a.onTouchBegan = this.onTouchBegan.bind(this)),
        this.onTouchMoved && (a.onTouchMoved = this.onTouchMoved.bind(this)),
        this.onTouchEnded && (a.onTouchEnded = this.onTouchEnded.bind(this)),
        this.onTouchCancelled &&
          (a.onTouchCancelled = this.onTouchCancelled.bind(this)),
        (this._touchListener = a),
        cc.eventManager.addListener(a, this))
      : ((this._touchMoved = this._dragging = !1), (this._touches.length = 0));
  },
  _initWithViewSize: function (a) {
    return null;
  },
  _relocateContainer: function (a) {
    var b = this.minContainerOffset(),
      d = this.maxContainerOffset(),
      e = this._direction,
      f = this._container.getPosition(),
      g = f.x,
      h = f.y;
    if (
      e === cc.SCROLLVIEW_DIRECTION_BOTH ||
      e === cc.SCROLLVIEW_DIRECTION_HORIZONTAL
    )
      (g = Math.max(g, b.x)), (g = Math.min(g, d.x));
    if (
      e === cc.SCROLLVIEW_DIRECTION_BOTH ||
      e === cc.SCROLLVIEW_DIRECTION_VERTICAL
    )
      (h = Math.min(h, d.y)), (h = Math.max(h, b.y));
    (h === f.y && g === f.x) || this.setContentOffset(cc.p(g, h), a);
  },
  _deaccelerateScrolling: function (a) {
    if (this._dragging) this.unschedule(this._deaccelerateScrolling);
    else {
      var b, d;
      b = this._container.getPosition();
      a = this._scrollDistance;
      this._container.setPosition(b.x + a.x, b.y + a.y);
      this._bounceable
        ? ((b = this._maxInset), (d = this._minInset))
        : ((b = this.maxContainerOffset()), (d = this.minContainerOffset()));
      var e = this._container.getPositionX(),
        f = this._container.getPositionY();
      a.x *= SCROLL_DEACCEL_RATE;
      a.y *= SCROLL_DEACCEL_RATE;
      this.setContentOffset(cc.p(e, f));
      if (
        (Math.abs(a.x) <= SCROLL_DEACCEL_DIST &&
          Math.abs(a.y) <= SCROLL_DEACCEL_DIST) ||
        f > b.y ||
        f < d.y ||
        e > b.x ||
        e < d.x ||
        e === b.x ||
        e === d.x ||
        f === b.y ||
        f === d.y
      )
        this.unschedule(this._deaccelerateScrolling),
          this._relocateContainer(!0);
    }
  },
  _performedAnimatedScroll: function (a) {
    this._dragging
      ? this.unschedule(this._performedAnimatedScroll)
      : this._delegate &&
        this._delegate.scrollViewDidScroll &&
        this._delegate.scrollViewDidScroll(this);
  },
  _stoppedAnimatedScroll: function (a) {
    this.unschedule(this._performedAnimatedScroll);
    this._delegate &&
      this._delegate.scrollViewDidScroll &&
      this._delegate.scrollViewDidScroll(this);
  },
  _handleZoom: function () {},
  _getViewRect: function () {
    for (
      var a = this.convertToWorldSpace(cc.p(0, 0)),
        b = this._viewSize,
        d = this.getScaleX(),
        e = this.getScaleY(),
        f = this._parent;
      null != f;
      f = f.getParent()
    )
      (d *= f.getScaleX()), (e *= f.getScaleY());
    0 > d && ((a.x += b.width * d), (d = -d));
    0 > e && ((a.y += b.height * e), (e = -e));
    f = this._tmpViewRect;
    f.x = a.x;
    f.y = a.y;
    f.width = b.width * d;
    f.height = b.height * e;
    return f;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ScrollView.CanvasRenderCmd(this)
      : new cc.ScrollView.WebGLRenderCmd(this);
  },
});
_p = cc.ScrollView.prototype;
cc.defineGetterSetter(_p, "minOffset", _p.minContainerOffset);
cc.defineGetterSetter(_p, "maxOffset", _p.maxContainerOffset);
cc.defineGetterSetter(_p, "bounceable", _p.isBounceable, _p.setBounceable);
cc.defineGetterSetter(_p, "viewSize", _p.getViewSize, _p.setViewSize);
cc.defineGetterSetter(_p, "container", _p.getContainer, _p.setContainer);
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(_p, "delegate", _p.getDelegate, _p.setDelegate);
cc.defineGetterSetter(
  _p,
  "clippingToBounds",
  _p.isClippingToBounds,
  _p.setClippingToBounds
);
_p = null;
cc.ScrollView.create = function (a, b) {
  return new cc.ScrollView(a, b);
};
(function () {
  cc.ScrollView.CanvasRenderCmd = function (a) {
    this._layerCmdCtor(a);
    this._needDraw = !1;
    this.startCmd = new cc.CustomRenderCmd(this, this._startCmd);
    this.startCmd._canUseDirtyRegion = !0;
    this.endCmd = new cc.CustomRenderCmd(this, this._endCmd);
    this.endCmd._canUseDirtyRegion = !0;
  };
  var a = (cc.ScrollView.CanvasRenderCmd.prototype = Object.create(
    cc.Layer.CanvasRenderCmd.prototype
  ));
  a.constructor = cc.ScrollView.CanvasRenderCmd;
  a._startCmd = function (a, d, e) {
    var f = this._node,
      g = a || cc._renderContext;
    a = g.getContext();
    g.save();
    f._clippingToBounds &&
      ((this._scissorRestored = !1),
      g.setTransform(this._worldTransform, d, e),
      (e = f.getScaleX()),
      (d = f.getScaleY()),
      (e *= f._viewSize.width),
      (f = f._viewSize.height * d),
      a.beginPath(),
      a.rect(0, 0, e, -f),
      a.closePath(),
      a.clip());
  };
  a._endCmd = function (a) {
    a = a || cc._renderContext;
    a.restore();
  };
})();
(function () {
  cc.ScrollView.WebGLRenderCmd = function (a) {
    this._layerCmdCtor(a);
    this._needDraw = !1;
    this.startCmd = new cc.CustomRenderCmd(this, this._startCmd);
    this.endCmd = new cc.CustomRenderCmd(this, this._endCmd);
  };
  var a = (cc.ScrollView.WebGLRenderCmd.prototype = Object.create(
    cc.Layer.WebGLRenderCmd.prototype
  ));
  a.constructor = cc.ScrollView.WebGLRenderCmd;
  a._startCmd = function () {
    var a = this._node,
      d = cc.view,
      e = a._getViewRect();
    if (d.isScissorEnabled()) {
      if (
        ((a._scissorRestored = !0),
        (a._parentScissorRect = d.getScissorRect()),
        cc.rectIntersection(e, a._parentScissorRect))
      ) {
        var f = a._parentScissorRect,
          a = Math.max(e.x, f.x),
          g = Math.max(e.y, f.y),
          h = Math.min(e.x + e.width, f.x + f.width),
          e = Math.min(e.y + e.height, f.y + f.height);
        d.setScissorInPoints(a, g, h - a, e - g);
      }
    } else
      (a = cc._renderContext),
        a.enable(a.SCISSOR_TEST),
        d.setScissorInPoints(e.x, e.y, e.width, e.height);
  };
  a._endCmd = function () {
    var a = this._node;
    a._scissorRestored
      ? ((a = a._parentScissorRect),
        cc.view.setScissorInPoints(a.x, a.y, a.width, a.height))
      : ((a = cc._renderContext), a.disable(a.SCISSOR_TEST));
  };
})();
cc.SortableObject = cc.Class.extend({
  setObjectID: function (a) {},
  getObjectID: function () {
    return 0;
  },
});
cc.SortedObject = cc.SortableObject.extend({
  _objectID: 0,
  ctor: function () {
    this._objectID = 0;
  },
  setObjectID: function (a) {
    this._objectID = a;
  },
  getObjectID: function () {
    return this._objectID;
  },
});
var _compareObject = function (a, b) {
  return a.getObjectID() - b.getObjectID();
};
cc.ArrayForObjectSorting = cc.Class.extend({
  _saveObjectArr: null,
  ctor: function () {
    this._saveObjectArr = [];
  },
  insertSortedObject: function (a) {
    if (!a)
      throw Error(
        "cc.ArrayForObjectSorting.insertSortedObject(): addObject should be non-null."
      );
    var b = this.indexOfSortedObject(a);
    this.insertObject(a, b);
  },
  removeSortedObject: function (a) {
    if (0 !== this.count()) {
      var b = this.indexOfSortedObject(a);
      b < this.count() &&
        b !== cc.INVALID_INDEX &&
        this.objectAtIndex(b).getObjectID() === a.getObjectID() &&
        this.removeObjectAtIndex(b);
    }
  },
  setObjectID_ofSortedObject: function (a, b) {
    var d = this.indexOfSortedObject(b);
    if (d < this.count() && d !== cc.INVALID_INDEX) {
      var e = this.objectAtIndex(d);
      e.getObjectID() === b.getObjectID() &&
        (this.removeObjectAtIndex(d),
        e.setObjectID(a),
        this.insertSortedObject(e));
    }
  },
  objectWithObjectID: function (a) {
    if (0 === this.count()) return null;
    var b = new cc.SortedObject();
    b.setObjectID(a);
    var d = this.indexOfSortedObject(b);
    d < this.count() &&
      d !== cc.INVALID_INDEX &&
      ((b = this.objectAtIndex(d)), b.getObjectID() !== a && (b = null));
    return b;
  },
  getObjectWithObjectID: function (a) {
    return null;
  },
  indexOfSortedObject: function (a) {
    var b = 0;
    if (a) {
      var d = 0;
      a = a.getObjectID();
      for (var e = this._saveObjectArr, f = 0; f < e.length; f++) {
        var g = e[f].getObjectID();
        if (a === g || (a >= d && a < g)) break;
        d = g;
        b++;
      }
    } else b = cc.INVALID_INDEX;
    return b;
  },
  count: function () {
    return this._saveObjectArr.length;
  },
  lastObject: function () {
    var a = this._saveObjectArr;
    return 0 === a.length ? null : a[a.length - 1];
  },
  objectAtIndex: function (a) {
    return this._saveObjectArr[a];
  },
  addObject: function (a) {
    this._saveObjectArr.push(a);
    this._saveObjectArr.sort(_compareObject);
  },
  removeObjectAtIndex: function (a) {
    this._saveObjectArr.splice(a, 1);
    this._saveObjectArr.sort(_compareObject);
  },
  insertObject: function (a, b) {
    this._saveObjectArr.splice(b, 0, a);
    this._saveObjectArr.sort(_compareObject);
  },
});
cc.TABLEVIEW_FILL_TOPDOWN = 0;
cc.TABLEVIEW_FILL_BOTTOMUP = 1;
cc.TableViewCell = cc.Node.extend({
  _idx: 0,
  _className: "TableViewCell",
  getIdx: function () {
    return this._idx;
  },
  setIdx: function (a) {
    this._idx = a;
  },
  reset: function () {
    this._idx = cc.INVALID_INDEX;
  },
  setObjectID: function (a) {
    this._idx = a;
  },
  getObjectID: function () {
    return this._idx;
  },
});
_p = cc.TableViewCell.prototype;
cc.defineGetterSetter(_p, "objectId", _p.getObjectID, _p.setObjectID);
_p = null;
cc.TableViewDelegate = cc.ScrollViewDelegate.extend({
  tableCellTouched: function (a, b) {},
  tableCellHighlight: function (a, b) {},
  tableCellUnhighlight: function (a, b) {},
  tableCellWillRecycle: function (a, b) {},
});
cc.TableViewDataSource = cc.Class.extend({
  tableCellSizeForIndex: function (a, b) {
    return this.cellSizeForTable(a);
  },
  cellSizeForTable: function (a) {
    return cc.size(0, 0);
  },
  tableCellAtIndex: function (a, b) {
    return null;
  },
  numberOfCellsInTableView: function (a) {
    return 0;
  },
});
cc.TableView = cc.ScrollView.extend({
  _vOrdering: null,
  _indices: null,
  _cellsFreed: null,
  _dataSource: null,
  _tableViewDelegate: null,
  _oldDirection: null,
  _cellsPositions: null,
  _touchedCell: null,
  ctor: function (a, b, d) {
    cc.ScrollView.prototype.ctor.call(this);
    this._oldDirection = cc.SCROLLVIEW_DIRECTION_NONE;
    this._cellsPositions = [];
    this.initWithViewSize(b, d);
    this.setDataSource(a);
    this._updateCellPositions();
    this._updateContentSize();
  },
  __indexFromOffset: function (a) {
    var b = 0,
      d = this._dataSource.numberOfCellsInTableView(this) - 1;
    switch (this.getDirection()) {
      case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
        a = a.x;
        break;
      default:
        a = a.y;
    }
    for (var e = this._cellsPositions; d >= b; ) {
      var f = 0 | (b + (d - b) / 2),
        g = e[f],
        h = e[f + 1];
      if (a >= g && a <= h) return f;
      a < g ? (d = f - 1) : (b = f + 1);
    }
    return 0 >= b ? 0 : -1;
  },
  _indexFromOffset: function (a) {
    var b = { x: a.x, y: a.y };
    a = this._dataSource.numberOfCellsInTableView(this) - 1;
    this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN &&
      (b.y = this.getContainer().getContentSize().height - b.y);
    b = this.__indexFromOffset(b);
    -1 !== b && ((b = Math.max(0, b)), b > a && (b = cc.INVALID_INDEX));
    return b;
  },
  __offsetFromIndex: function (a) {
    switch (this.getDirection()) {
      case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
        a = cc.p(this._cellsPositions[a], 0);
        break;
      default:
        a = cc.p(0, this._cellsPositions[a]);
    }
    return a;
  },
  _offsetFromIndex: function (a) {
    var b = this.__offsetFromIndex(a);
    a = this._dataSource.tableCellSizeForIndex(this, a);
    this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN &&
      (b.y = this.getContainer().getContentSize().height - b.y - a.height);
    return b;
  },
  _updateCellPositions: function () {
    var a = this._dataSource.numberOfCellsInTableView(this),
      b = this._cellsPositions;
    if (0 < a) {
      for (var d = 0, e, f = this._dataSource, g = 0; g < a; g++)
        switch (
          ((b[g] = d),
          (e = f.tableCellSizeForIndex(this, g)),
          this.getDirection())
        ) {
          case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
            d += e.width;
            break;
          default:
            d += e.height;
        }
      this._cellsPositions[a] = d;
    }
  },
  _updateContentSize: function () {
    var a = cc.size(0, 0),
      b = this._dataSource.numberOfCellsInTableView(this);
    if (0 < b)
      switch (((a = this._cellsPositions[b]), this.getDirection())) {
        case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:
          a = cc.size(a, this._viewSize.height);
          break;
        default:
          a = cc.size(this._viewSize.width, a);
      }
    this.setContentSize(a);
    this._oldDirection !== this._direction &&
      (this._direction === cc.SCROLLVIEW_DIRECTION_HORIZONTAL
        ? this.setContentOffset(cc.p(0, 0))
        : this.setContentOffset(cc.p(0, this.minContainerOffset().y)),
      (this._oldDirection = this._direction));
  },
  _moveCellOutOfSight: function (a) {
    this._tableViewDelegate &&
      this._tableViewDelegate.tableCellWillRecycle &&
      this._tableViewDelegate.tableCellWillRecycle(this, a);
    this._cellsFreed.addObject(a);
    this._cellsUsed.removeSortedObject(a);
    cc.arrayRemoveObject(this._indices, a.getIdx());
    a.reset();
    a.getParent() === this.getContainer() &&
      this.getContainer().removeChild(a, !0);
  },
  _setIndexForCell: function (a, b) {
    b.setAnchorPoint(0, 0);
    b.setPosition(this._offsetFromIndex(a));
    b.setIdx(a);
  },
  _addCellIfNecessary: function (a) {
    a.getParent() !== this.getContainer() && this.getContainer().addChild(a);
    this._cellsUsed.insertSortedObject(a);
    var b = this._indices;
    a = a.getIdx();
    -1 === b.indexOf(a) &&
      (b.push(a),
      b.sort(function (a, b) {
        return a - b;
      }));
  },
  getDataSource: function () {
    return this._dataSource;
  },
  setDataSource: function (a) {
    this._dataSource = a;
  },
  getDelegate: function () {
    return this._tableViewDelegate;
  },
  setDelegate: function (a) {
    this._tableViewDelegate = a;
  },
  setVerticalFillOrder: function (a) {
    this._vOrdering !== a &&
      ((this._vOrdering = a), 0 < this._cellsUsed.count() && this.reloadData());
  },
  getVerticalFillOrder: function () {
    return this._vOrdering;
  },
  initWithViewSize: function (a, b) {
    return cc.ScrollView.prototype.initWithViewSize.call(this, a, b)
      ? ((this._cellsUsed = new cc.ArrayForObjectSorting()),
        (this._cellsFreed = new cc.ArrayForObjectSorting()),
        (this._indices = []),
        (this._tableViewDelegate = null),
        (this._vOrdering = cc.TABLEVIEW_FILL_BOTTOMUP),
        this.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL),
        cc.ScrollView.prototype.setDelegate.call(this, this),
        !0)
      : !1;
  },
  updateCellAtIndex: function (a) {
    if (
      !(
        a === cc.INVALID_INDEX ||
        a > this._dataSource.numberOfCellsInTableView(this) - 1
      )
    ) {
      var b = this.cellAtIndex(a);
      b && this._moveCellOutOfSight(b);
      b = this._dataSource.tableCellAtIndex(this, a);
      this._setIndexForCell(a, b);
      this._addCellIfNecessary(b);
    }
  },
  insertCellAtIndex: function (a) {
    if (
      !(
        a === cc.INVALID_INDEX ||
        a > this._dataSource.numberOfCellsInTableView(this) - 1
      )
    ) {
      var b,
        d = this._cellsUsed;
      if ((b = d.objectWithObjectID(a)))
        for (var e = (b = d.indexOfSortedObject(b)); e < d.count(); e++)
          (b = d.objectAtIndex(e)), this._setIndexForCell(b.getIdx() + 1, b);
      b = this._dataSource.tableCellAtIndex(this, a);
      this._setIndexForCell(a, b);
      this._addCellIfNecessary(b);
      this._updateCellPositions();
      this._updateContentSize();
    }
  },
  removeCellAtIndex: function (a) {
    if (
      !(
        a === cc.INVALID_INDEX ||
        a > this._dataSource.numberOfCellsInTableView(this) - 1
      )
    ) {
      var b = this.cellAtIndex(a);
      if (b) {
        var d = this._cellsUsed,
          e = d.indexOfSortedObject(b);
        this._moveCellOutOfSight(b);
        cc.arrayRemoveObject(this._indices, a);
        this._updateCellPositions();
        for (a = d.count() - 1; a > e; a--)
          (b = d.objectAtIndex(a)), this._setIndexForCell(b.getIdx() - 1, b);
      }
    }
  },
  reloadData: function () {
    this._oldDirection = cc.SCROLLVIEW_DIRECTION_NONE;
    for (
      var a = this._cellsUsed,
        b = this._cellsFreed,
        d = this.getContainer(),
        e = 0,
        f = a.count();
      e < f;
      e++
    ) {
      var g = a.objectAtIndex(e);
      this._tableViewDelegate &&
        this._tableViewDelegate.tableCellWillRecycle &&
        this._tableViewDelegate.tableCellWillRecycle(this, g);
      b.addObject(g);
      g.reset();
      g.getParent() === d && d.removeChild(g, !0);
    }
    this._indices = [];
    this._cellsUsed = new cc.ArrayForObjectSorting();
    this._updateCellPositions();
    this._updateContentSize();
    0 < this._dataSource.numberOfCellsInTableView(this) &&
      this.scrollViewDidScroll(this);
    this.setNodeDirty();
  },
  dequeueCell: function () {
    if (0 === this._cellsFreed.count()) return null;
    var a = this._cellsFreed.objectAtIndex(0);
    this._cellsFreed.removeObjectAtIndex(0);
    return a;
  },
  cellAtIndex: function (a) {
    return -1 === this._indices.indexOf(a)
      ? null
      : this._cellsUsed.objectWithObjectID(a);
  },
  scrollViewDidScroll: function (a) {
    var b = this._dataSource.numberOfCellsInTableView(this);
    if (0 !== b) {
      null !== this._tableViewDelegate &&
        this._tableViewDelegate.scrollViewDidScroll &&
        this._tableViewDelegate.scrollViewDidScroll(this);
      var d = 0,
        e = this._viewSize,
        d = this.getContainer(),
        f = this.getContentOffset();
      f.x *= -1;
      f.y *= -1;
      var g = Math.max(b - 1, 0);
      this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN &&
        (f.y += e.height / d.getScaleY());
      a = this._indexFromOffset(f);
      a === cc.INVALID_INDEX && (a = b - 1);
      f.y =
        this._vOrdering === cc.TABLEVIEW_FILL_TOPDOWN
          ? f.y - e.height / d.getScaleY()
          : f.y + e.height / d.getScaleY();
      f.x += e.width / d.getScaleX();
      e = this._indexFromOffset(f);
      e === cc.INVALID_INDEX && (e = b - 1);
      f = this._cellsUsed;
      if (0 < f.count())
        for (b = f.objectAtIndex(0), d = b.getIdx(); d < a; )
          if ((this._moveCellOutOfSight(b), 0 < f.count()))
            (b = f.objectAtIndex(0)), (d = b.getIdx());
          else break;
      if (0 < f.count())
        for (b = f.lastObject(), d = b.getIdx(); d <= g && d > e; )
          if ((this._moveCellOutOfSight(b), 0 < f.count()))
            (b = f.lastObject()), (d = b.getIdx());
          else break;
      for (g = this._indices; a <= e; a++)
        -1 === g.indexOf(a) && this.updateCellAtIndex(a);
    }
  },
  scrollViewDidZoom: function (a) {},
  onTouchEnded: function (a, b) {
    if (this.isVisible()) {
      if (this._touchedCell) {
        var d = this.getBoundingBox(),
          e = cc.p(d.x, d.y),
          e = this._parent.convertToWorldSpace(e);
        d.x = e.x;
        d.y = e.y;
        e = this._tableViewDelegate;
        cc.rectContainsPoint(d, a.getLocation()) &&
          null !== e &&
          (e.tableCellUnhighlight &&
            e.tableCellUnhighlight(this, this._touchedCell),
          e.tableCellTouched && e.tableCellTouched(this, this._touchedCell));
        this._touchedCell = null;
      }
      cc.ScrollView.prototype.onTouchEnded.call(this, a, b);
    }
  },
  onTouchBegan: function (a, b) {
    for (var d = this; null != d; d = d.parent) if (!d.isVisible()) return !1;
    d = cc.ScrollView.prototype.onTouchBegan.call(this, a, b);
    if (1 === this._touches.length) {
      var e;
      e = this.getContainer().convertTouchToNodeSpace(a);
      e = this._indexFromOffset(e);
      (this._touchedCell =
        e === cc.INVALID_INDEX ? null : this.cellAtIndex(e)) &&
        null !== this._tableViewDelegate &&
        this._tableViewDelegate.tableCellHighlight &&
        this._tableViewDelegate.tableCellHighlight(this, this._touchedCell);
    } else
      this._touchedCell &&
        (null !== this._tableViewDelegate &&
          this._tableViewDelegate.tableCellUnhighlight &&
          this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell),
        (this._touchedCell = null));
    return d;
  },
  onTouchMoved: function (a, b) {
    cc.ScrollView.prototype.onTouchMoved.call(this, a, b);
    this._touchedCell &&
      this.isTouchMoved() &&
      null !== this._tableViewDelegate &&
      this._tableViewDelegate.tableCellUnhighlight &&
      this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell);
  },
  onTouchCancelled: function (a, b) {
    cc.ScrollView.prototype.onTouchCancelled.call(this, a, b);
    this._touchedCell &&
      (null !== this._tableViewDelegate &&
        this._tableViewDelegate.tableCellUnhighlight &&
        this._tableViewDelegate.tableCellUnhighlight(this, this._touchedCell),
      (this._touchedCell = null));
  },
});
_p = cc.TableView.prototype;
cc.defineGetterSetter(_p, "dataSource", _p.getDataSource, _p.setDataSource);
cc.defineGetterSetter(_p, "delegate", _p.getDelegate, _p.setDelegate);
cc.defineGetterSetter(
  _p,
  "verticalFillOrder",
  _p.getVerticalFillOrder,
  _p.setVerticalFillOrder
);
_p = null;
cc.TableView.create = function (a, b, d) {
  return new cc.TableView(a, b, d);
};
var PROPERTY_POSITION = "position",
  PROPERTY_CONTENTSIZE = "contentSize",
  PROPERTY_SKEW = "skew",
  PROPERTY_ANCHORPOINT = "anchorPoint",
  PROPERTY_SCALE = "scale",
  PROPERTY_ROTATION = "rotation",
  PROPERTY_TAG = "tag",
  PROPERTY_IGNOREANCHORPOINTFORPOSITION = "ignoreAnchorPointForPosition",
  PROPERTY_VISIBLE = "visible",
  ASSERT_FAIL_UNEXPECTED_PROPERTY = function (a) {
    cc.log("Unexpected property: '" + a + "'!");
  },
  ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE = function (a) {
    cc.log("Unexpected property type: '" + a + "'!");
  };
function BlockData(a, b) {
  this.selMenuHander = a;
  this.target = b;
}
function BlockCCControlData(a, b, d) {
  this.selCCControlHandler = a;
  this.target = b;
  this.controlEvents = d;
}
cc.NodeLoader = cc.Class.extend({
  _customProperties: null,
  _pt: null,
  _size: null,
  _arr2: null,
  ctor: function () {
    this._customProperties = new cc._Dictionary();
    this._pt = cc.p();
    this._size = cc.size();
    this._arr2 = Array(2);
    this._blockControlData = {
      selCCControlHandler: null,
      target: null,
      controlEvents: null,
    };
  },
  loadCCNode: function (a, b) {
    return this._createCCNode(a, b);
  },
  parseProperties: function (a, b, d) {
    for (
      var e = d.readInt(!1), f = d.readInt(!1), f = e + f, g = 0;
      g < f;
      g++
    ) {
      var h = g >= e,
        k = d.readInt(!1),
        m = d.readCachedString(),
        n = !1,
        p = d._data[d._currentByte++];
      if (
        p === CCB_PLATFORM_ALL ||
        p === CCB_PLATFORM_IOS ||
        p === CCB_PLATFORM_MAC
      )
        n = !0;
      h &&
        (a.ccbFileNode
          ? ((a = a.ccbFileNode), (n = -1 !== a.userObject.indexOf(m)))
          : a === d._animationManager.getRootNode() &&
            ((h = a.userObject),
            h || ((h = []), (a.userObject = h)),
            h.push(m)));
      switch (k) {
        case CCB_PROPTYPE_POSITION:
          k = this.parsePropTypePosition(a, b, d, m);
          if (n) this.onHandlePropTypePosition(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_POINT:
          k = this.parsePropTypePoint(a, b, d);
          if (n) this.onHandlePropTypePoint(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_POINTLOCK:
          k = this.parsePropTypePointLock(a, b, d);
          if (n) this.onHandlePropTypePointLock(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_SIZE:
          k = this.parsePropTypeSize(a, b, d);
          if (n) this.onHandlePropTypeSize(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_SCALELOCK:
          k = this.parsePropTypeScaleLock(a, b, d, m);
          if (n) this.onHandlePropTypeScaleLock(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FLOATXY:
          k = this.parsePropTypeFloatXY(a, b, d);
          if (n) this.onHandlePropTypeFloatXY(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FLOAT:
          k = this.parsePropTypeFloat(a, b, d);
          if (n) this.onHandlePropTypeFloat(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_DEGREES:
          k = this.parsePropTypeDegrees(a, b, d, m);
          if (n) this.onHandlePropTypeDegrees(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FLOATSCALE:
          k = this.parsePropTypeFloatScale(a, b, d);
          if (n) this.onHandlePropTypeFloatScale(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_INTEGER:
          k = this.parsePropTypeInteger(a, b, d);
          if (n) this.onHandlePropTypeInteger(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_INTEGERLABELED:
          k = this.parsePropTypeIntegerLabeled(a, b, d);
          if (n) this.onHandlePropTypeIntegerLabeled(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FLOATVAR:
          k = this.parsePropTypeFloatVar(a, b, d);
          if (n) this.onHandlePropTypeFloatVar(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_CHECK:
          k = this.parsePropTypeCheck(a, b, d, m);
          if (n) this.onHandlePropTypeCheck(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_SPRITEFRAME:
          k = this.parsePropTypeSpriteFrame(a, b, d, m);
          if (n) this.onHandlePropTypeSpriteFrame(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_ANIMATION:
          k = this.parsePropTypeAnimation(a, b, d);
          if (n) this.onHandlePropTypeAnimation(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_TEXTURE:
          k = this.parsePropTypeTexture(a, b, d);
          if (n) this.onHandlePropTypeTexture(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_BYTE:
          k = this.parsePropTypeByte(a, b, d, m);
          if (n) this.onHandlePropTypeByte(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_COLOR3:
          k = this.parsePropTypeColor3(a, b, d, m);
          if (n) this.onHandlePropTypeColor3(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_COLOR4VAR:
          k = this.parsePropTypeColor4FVar(a, b, d);
          if (n) this.onHandlePropTypeColor4FVar(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FLIP:
          k = this.parsePropTypeFlip(a, b, d);
          if (n) this.onHandlePropTypeFlip(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_BLENDMODE:
          k = this.parsePropTypeBlendFunc(a, b, d);
          if (n) this.onHandlePropTypeBlendFunc(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FNTFILE:
          k = d.getCCBRootPath() + this.parsePropTypeFntFile(a, b, d);
          if (n) this.onHandlePropTypeFntFile(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_FONTTTF:
          k = this.parsePropTypeFontTTF(a, b, d);
          if (n) this.onHandlePropTypeFontTTF(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_STRING:
          k = this.parsePropTypeString(a, b, d);
          if (n) this.onHandlePropTypeString(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_TEXT:
          k = this.parsePropTypeText(a, b, d);
          if (n) this.onHandlePropTypeText(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_BLOCK:
          k = this.parsePropTypeBlock(a, b, d);
          if (n) this.onHandlePropTypeBlock(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_BLOCKCCCONTROL:
          k = this.parsePropTypeBlockCCControl(a, b, d);
          if (n && null != k)
            this.onHandlePropTypeBlockCCControl(a, b, m, k, d);
          break;
        case CCB_PROPTYPE_CCBFILE:
          k = this.parsePropTypeCCBFile(a, b, d);
          if (n) this.onHandlePropTypeCCBFile(a, b, m, k, d);
          break;
        default:
          ASSERT_FAIL_UNEXPECTED_PROPERTYTYPE(k);
      }
    }
  },
  getCustomProperties: function () {
    return this._customProperties;
  },
  _createCCNode: function (a, b) {
    return new cc.Node();
  },
  parsePropTypePosition: function (a, b, d, e) {
    var f = d.readFloat(),
      g = d.readFloat(),
      h = d.readInt(!1);
    cc.getAbsolutePosition(
      f,
      g,
      h,
      b ? b._contentSize : d._animationManager._rootContainerSize,
      e,
      this._pt
    );
    a.setPosition(this._pt);
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue([f, g, h], a, e);
    return this._pt;
  },
  parsePropTypePoint: function (a, b, d) {
    this._pt.x = d.readFloat();
    this._pt.y = d.readFloat();
    return this._pt;
  },
  parsePropTypePointLock: function (a, b, d) {
    this._pt.x = d.readFloat();
    this._pt.y = d.readFloat();
    return this._pt;
  },
  parsePropTypeSize: function (a, b, d) {
    a = d.readFloat();
    var e = d.readFloat(),
      f = d.readInt(!1);
    b = b ? b._contentSize : d._animationManager._rootContainerSize;
    switch (f) {
      case CCB_SIZETYPE_ABSOLUTE:
        break;
      case CCB_SIZETYPE_RELATIVE_CONTAINER:
        a = b.width - a;
        e = b.height - e;
        break;
      case CCB_SIZETYPE_PERCENT:
        a = (b.width * a) / 100;
        e = (b.height * e) / 100;
        break;
      case CCB_SIZETYPE_HORIZONTAL_PERCENT:
        a = (b.width * a) / 100;
        break;
      case CCB_SIZETYPE_VERTICAL_PERCENT:
        e = (b.height * e) / 100;
        break;
      case CCB_SIZETYPE_MULTIPLY_RESOLUTION:
        b = cc.BuilderReader.getResolutionScale();
        a *= b;
        e *= b;
        break;
      default:
        cc.log("Unknown CCB type.");
    }
    this._size.width = a;
    this._size.height = e;
    return this._size;
  },
  parsePropTypeScaleLock: function (a, b, d, e) {
    b = d.readFloat();
    var f = d.readFloat(),
      g = d.readInt(!1);
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue([b, f, g], a, e);
    g === CCB_SCALETYPE_MULTIPLY_RESOLUTION &&
      ((a = cc.BuilderReader.getResolutionScale()), (b *= a), (f *= a));
    this._pt.x = b;
    this._pt.y = f;
    return this._pt;
  },
  parsePropTypeFloat: function (a, b, d) {
    return d.readFloat();
  },
  parsePropTypeDegrees: function (a, b, d, e) {
    b = d.readFloat();
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue(b, a, e);
    return b;
  },
  parsePropTypeFloatScale: function (a, b, d) {
    a = d.readFloat();
    d.readInt(!1) === CCB_SCALETYPE_MULTIPLY_RESOLUTION &&
      (a *= cc.BuilderReader.getResolutionScale());
    return a;
  },
  parsePropTypeInteger: function (a, b, d) {
    return d.readInt(!0);
  },
  parsePropTypeIntegerLabeled: function (a, b, d) {
    return d.readInt(!0);
  },
  parsePropTypeFloatVar: function (a, b, d) {
    this._arr2[0] = d.readFloat();
    this._arr2[1] = d.readFloat();
    return this._arr2;
  },
  parsePropTypeCheck: function (a, b, d, e) {
    b = !!d._data[d._currentByte++];
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue(b, a, e);
    return b;
  },
  parsePropTypeSpriteFrame: function (a, b, d, e) {
    b = d.readCachedString();
    var f = d.readCachedString(),
      g;
    f &&
      (0 === b.length
        ? ((f = d._ccbRootPath + f),
          (b = cc.textureCache.addImage(f)),
          (f = b.getContentSize()),
          (f = cc.rect(0, 0, f.width, f.height)),
          (g = new cc.SpriteFrame(b, f)))
        : ((g = cc.spriteFrameCache),
          (b = d._ccbRootPath + b),
          -1 === d._loadedSpriteSheets.indexOf(b) &&
            (g.addSpriteFrames(b), d._loadedSpriteSheets.push(b)),
          (g = g.getSpriteFrame(f))),
      -1 < d._animatedProps.indexOf(e) &&
        d._animationManager.setBaseValue(g, a, e));
    return g;
  },
  parsePropTypeAnimation: function (a, b, d) {
    a = d._ccbRootPath + d.readCachedString();
    d = d.readCachedString();
    b = null;
    d = cc.BuilderReader.lastPathComponent(d);
    a = cc.BuilderReader.lastPathComponent(a);
    d && ((b = cc.animationCache), b.addAnimations(a), (b = b.getAnimation(d)));
    return b;
  },
  parsePropTypeTexture: function (a, b, d) {
    return (a = d._ccbRootPath + d.readCachedString())
      ? cc.textureCache.addImage(a)
      : null;
  },
  parsePropTypeByte: function (a, b, d, e) {
    b = d._data[d._currentByte++];
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue(b, a, e);
    return b;
  },
  parsePropTypeColor3: function (a, b, d, e) {
    b = d._data[d._currentByte++];
    var f = d._data[d._currentByte++],
      g = d._data[d._currentByte++];
    b = cc.color(b, f, g);
    -1 < d._animatedProps.indexOf(e) &&
      d._animationManager.setBaseValue(b, a, e);
    return b;
  },
  parsePropTypeColor4FVar: function (a, b, d) {
    a = 0 | (255 * d.readFloat());
    b = 0 | (255 * d.readFloat());
    var e = 0 | (255 * d.readFloat()),
      f = d.readFloat(),
      f = 1 >= f ? 0 | (255 * f) : f,
      g = 0 | (255 * d.readFloat()),
      h = 0 | (255 * d.readFloat()),
      k = 0 | (255 * d.readFloat());
    d = d.readFloat();
    this._arr2[0] = { r: a, g: b, b: e, a: f };
    this._arr2[1] = { r: g, g: h, b: k, a: 1 >= d ? 0 | (255 * d) : d };
    return this._arr2;
  },
  parsePropTypeFlip: function (a, b, d) {
    this._arr2[0] = !!d._data[d._currentByte++];
    this._arr2[1] = !!d._data[d._currentByte++];
    return this._arr2;
  },
  parsePropTypeBlendFunc: function (a, b, d) {
    a = d.readInt(!1);
    d = d.readInt(!1);
    return new cc.BlendFunc(a, d);
  },
  parsePropTypeFntFile: function (a, b, d) {
    return d.readCachedString();
  },
  parsePropTypeString: function (a, b, d) {
    return d.readCachedString();
  },
  parsePropTypeText: function (a, b, d) {
    return d.readCachedString();
  },
  parsePropTypeFontTTF: function (a, b, d) {
    return d.readCachedString();
  },
  parsePropTypeBlock: function (a, b, d) {
    b = d.readCachedString();
    var e = d.readInt(!1);
    if (e !== CCB_TARGETTYPE_NONE) {
      var f = null;
      if (d._jsControlled)
        e === CCB_TARGETTYPE_DOCUMENTROOT
          ? (d.addDocumentCallbackNode(a),
            d.addDocumentCallbackName(b),
            d.addDocumentCallbackControlEvents(0))
          : (d.addOwnerCallbackNode(a),
            d.addOwnerCallbackName(b),
            d.addOwnerCallbackControlEvents(0));
      else if (
        (e === CCB_TARGETTYPE_DOCUMENTROOT
          ? (f = d._animationManager._rootNode)
          : e === CCB_TARGETTYPE_OWNER && (f = d._owner),
        null !== f)
      )
        if (0 < b.length)
          if (
            ((a = 0),
            f.onResolveCCBCCMenuItemSelector &&
              (a = f.onResolveCCBCCMenuItemSelector(f, b)),
            0 === a &&
              (d = d._ccbSelectorResolver) &&
              (a = d.onResolveCCBCCMenuItemSelector(f, b)),
            0 === a)
          )
            cc.log(
              "Skipping selector '" +
                b +
                "' since no CCBSelectorResolver is present."
            );
          else return new BlockData(a, f);
        else cc.log("Unexpected empty selector.");
      else cc.log("Unexpected NULL target for selector.");
    }
    return null;
  },
  parsePropTypeBlockCCControl: function (a, b, d) {
    b = d.readCachedString();
    var e = d.readInt(!1),
      f = d.readInt(!1);
    if (e !== CCB_TARGETTYPE_NONE)
      if (d._jsControlled)
        e === CCB_TARGETTYPE_DOCUMENTROOT
          ? (d.addDocumentCallbackNode(a),
            d.addDocumentCallbackName(b),
            d.addDocumentCallbackControlEvents(f))
          : (d.addOwnerCallbackNode(a),
            d.addOwnerCallbackName(b),
            d.addOwnerCallbackControlEvents(f));
      else if (
        ((a = null),
        e === CCB_TARGETTYPE_DOCUMENTROOT
          ? (a = d._animationManager._rootNode)
          : e === CCB_TARGETTYPE_OWNER && (a = d._owner),
        null !== a)
      )
        if (0 < b.length)
          if (
            ((e = 0),
            a.onResolveCCBCCControlSelector &&
              (e = a.onResolveCCBCCControlSelector(a, b)),
            0 === e &&
              ((d = d._ccbSelectorResolver),
              null != d && (e = d.onResolveCCBCCControlSelector(a, b))),
            0 === e)
          )
            cc.log(
              "Skipping selector '" +
                b +
                "' since no CCBSelectorResolver is present."
            );
          else
            return (
              (this._blockControlData.selCCControlHandler = e),
              (this._blockControlData.target = a),
              (this._blockControlData.controlEvents = f),
              this._blockControlData
            );
        else cc.log("Unexpected empty selector.");
      else cc.log("Unexpected NULL target for selector.");
    return null;
  },
  parsePropTypeCCBFile: function (a, b, d) {
    var e = d._ccbRootPath + d.readCachedString(),
      e = cc.BuilderReader.deletePathExtension(e) + ".ccbi";
    a = new cc.BuilderReader(d);
    var f = cc.loader.getRes(e);
    f ||
      ((f = cc.loader.getUrl(e)),
      (f = hlddz.convertToDownloadURL(f)),
      (f = cc.loader.loadBinarySync(f)),
      (cc.loader.cache[e] = f));
    a.initWithData(f, d._owner);
    a._animationManager.setRootContainerSize(b._contentSize);
    a.setAnimationManagers(d._animationManagers);
    a._animationManager.setOwner(d._owner);
    b = a.readFileWithCleanUp(!1);
    d.setAnimationManagers(a._animationManagers);
    b &&
      -1 !== a._animationManager._autoPlaySequenceId &&
      a._animationManager.runAnimations(
        a._animationManager._autoPlaySequenceId,
        0
      );
    return b;
  },
  parsePropTypeFloatXY: function (a, b, d) {
    this._pt.x = d.readFloat();
    this._pt.y = d.readFloat();
    return this._pt;
  },
  onHandlePropTypePosition: function (a, b, d, e, f) {
    d === PROPERTY_POSITION
      ? a.setPosition(e)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypePoint: function (a, b, d, e, f) {
    d === PROPERTY_ANCHORPOINT
      ? a.setAnchorPoint(e)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypePointLock: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeSize: function (a, b, d, e, f) {
    d === PROPERTY_CONTENTSIZE
      ? a.setContentSize(e)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeScaleLock: function (a, b, d, e, f) {
    d === PROPERTY_SCALE
      ? a.setScale(e.x, e.y)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFloatXY: function (a, b, d, e, f) {
    d === PROPERTY_SKEW
      ? ((a._skewX = e.x), (a._skewY = e.y))
      : ((b = d + "X"),
        (f = d + "Y"),
        (a[b] && a[f]) || ASSERT_FAIL_UNEXPECTED_PROPERTY(d),
        a[b](e.x),
        a[f](e.y));
  },
  onHandlePropTypeFloat: function (a, b, d, e, f) {
    this._customProperties.setObject(e, d);
  },
  onHandlePropTypeDegrees: function (a, b, d, e, f) {
    d === PROPERTY_ROTATION
      ? a.setRotation(e)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFloatScale: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeInteger: function (a, b, d, e, f) {
    d === PROPERTY_TAG ? (a.tag = e) : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeIntegerLabeled: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFloatVar: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d === PROPERTY_VISIBLE
      ? (a._visible = e)
      : d === PROPERTY_IGNOREANCHORPOINTFORPOSITION
      ? (a._ignoreAnchorPointForPosition = e)
      : ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeSpriteFrame: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeAnimation: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeTexture: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeColor4FVar: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFlip: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFntFile: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeString: function (a, b, d, e, f) {
    this._customProperties.setObject(e, d);
  },
  onHandlePropTypeText: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeFontTTF: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeBlock: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeBlockCCControl: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
  onHandlePropTypeCCBFile: function (a, b, d, e, f) {
    ASSERT_FAIL_UNEXPECTED_PROPERTY(d);
  },
});
cc.NodeLoader.loader = function () {
  return new cc.NodeLoader();
};
cc.NodeLoaderListener = cc.Class.extend({ onNodeLoaded: function (a, b) {} });
cc.BuilderSelectorResolver = cc.Class.extend({
  onResolveCCBCCMenuItemSelector: function (a, b) {},
  onResolveCCBCCCallFuncSelector: function (a, b) {},
  onResolveCCBCCControlSelector: function (a, b) {},
});
cc.BuilderScriptOwnerProtocol = cc.Class.extend({ createNew: function () {} });
cc.BuilderMemberVariableAssigner = cc.Class.extend({
  onAssignCCBMemberVariable: function (a, b, d) {
    return !1;
  },
  onAssignCCBCustomProperty: function (a, b, d) {
    return !1;
  },
});
var PROPERTY_CCBFILE = "ccbFile";
cc.BuilderFileLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    var d = new cc.Node();
    d.ccbFileNode = null;
    return d;
  },
  onHandlePropTypeCCBFile: function (a, b, d, e, f) {
    d === PROPERTY_CCBFILE
      ? (a.ccbFileNode = e)
      : cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.BuilderFileLoader.loader = function () {
  return new cc.BuilderFileLoader();
};
var PROPERTY_ENABLED = "enabled",
  PROPERTY_SELECTED = "selected",
  PROPERTY_CCCONTROL = "ccControl";
cc.ControlLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {},
  onHandlePropTypeBlockCCControl: function (a, b, d, e, f) {
    d === PROPERTY_CCCONTROL
      ? a.addTargetWithActionForControlEvents(
          e.target,
          e.selCCControlHandler,
          e.controlEvents
        )
      : cc.NodeLoader.prototype.onHandlePropTypeBlockCCControl.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d === PROPERTY_ENABLED
      ? a.setEnabled(e)
      : d === PROPERTY_SELECTED
      ? a.setSelected(e)
      : cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this, a, b, d, e, f);
  },
});
var PROPERTY_ZOOMONTOUCHDOWN = "zoomOnTouchDown",
  PROPERTY_TITLE_NORMAL = "title|1",
  PROPERTY_TITLE_HIGHLIGHTED = "title|2",
  PROPERTY_TITLE_DISABLED = "title|3",
  PROPERTY_TITLECOLOR_NORMAL = "titleColor|1",
  PROPERTY_TITLECOLOR_HIGHLIGHTED = "titleColor|2",
  PROPERTY_TITLECOLOR_DISABLED = "titleColor|3",
  PROPERTY_TITLETTF_NORMAL = "titleTTF|1",
  PROPERTY_TITLETTF_HIGHLIGHTED = "titleTTF|2",
  PROPERTY_TITLETTF_DISABLED = "titleTTF|3",
  PROPERTY_TITLETTFSIZE_NORMAL = "titleTTFSize|1",
  PROPERTY_TITLETTFSIZE_HIGHLIGHTED = "titleTTFSize|2",
  PROPERTY_TITLETTFSIZE_DISABLED = "titleTTFSize|4",
  PROPERTY_LABELANCHORPOINT = "labelAnchorPoint",
  PROPERTY_PREFEREDSIZE = "preferedSize",
  PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL = "backgroundSpriteFrame|1",
  PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED = "backgroundSpriteFrame|2",
  PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED = "backgroundSpriteFrame|3";
cc.ControlButtonLoader = cc.ControlLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.ControlButton();
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d === PROPERTY_ZOOMONTOUCHDOWN
      ? (a.zoomOnTouchDown = e)
      : cc.ControlLoader.prototype.onHandlePropTypeCheck.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeString: function (a, b, d, e, f) {
    d === PROPERTY_TITLE_NORMAL
      ? a.setTitleForState(e, cc.CONTROL_STATE_NORMAL)
      : d === PROPERTY_TITLE_HIGHLIGHTED
      ? a.setTitleForState(e, cc.CONTROL_STATE_HIGHLIGHTED)
      : d === PROPERTY_TITLE_DISABLED
      ? a.setTitleForState(e, cc.CONTROL_STATE_DISABLED)
      : cc.ControlLoader.prototype.onHandlePropTypeString.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFontTTF: function (a, b, d, e, f) {
    d === PROPERTY_TITLETTF_NORMAL
      ? a.setTitleTTFForState(e, cc.CONTROL_STATE_NORMAL)
      : d === PROPERTY_TITLETTF_HIGHLIGHTED
      ? a.setTitleTTFForState(e, cc.CONTROL_STATE_HIGHLIGHTED)
      : d === PROPERTY_TITLETTF_DISABLED
      ? a.setTitleTTFForState(e, cc.CONTROL_STATE_DISABLED)
      : cc.ControlLoader.prototype.onHandlePropTypeFontTTF.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFloatScale: function (a, b, d, e, f) {
    d === PROPERTY_TITLETTFSIZE_NORMAL
      ? a.setTitleTTFSizeForState(e, cc.CONTROL_STATE_NORMAL)
      : d === PROPERTY_TITLETTFSIZE_HIGHLIGHTED
      ? a.setTitleTTFSizeForState(e, cc.CONTROL_STATE_HIGHLIGHTED)
      : d === PROPERTY_TITLETTFSIZE_DISABLED
      ? a.setTitleTTFSizeForState(e, cc.CONTROL_STATE_DISABLED)
      : cc.ControlLoader.prototype.onHandlePropTypeFloatScale.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypePoint: function (a, b, d, e, f) {
    d === PROPERTY_LABELANCHORPOINT
      ? a.setLabelAnchorPoint(e)
      : cc.ControlLoader.prototype.onHandlePropTypePoint.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeSize: function (a, b, d, e, f) {
    d === PROPERTY_PREFEREDSIZE
      ? a.setPreferredSize(e)
      : cc.ControlLoader.prototype.onHandlePropTypeSize.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeSpriteFrame: function (a, b, d, e, f) {
    d === PROPERTY_BACKGROUNDSPRITEFRAME_NORMAL
      ? null != e &&
        a.setBackgroundSpriteFrameForState(e, cc.CONTROL_STATE_NORMAL)
      : d === PROPERTY_BACKGROUNDSPRITEFRAME_HIGHLIGHTED
      ? null != e &&
        a.setBackgroundSpriteFrameForState(e, cc.CONTROL_STATE_HIGHLIGHTED)
      : d === PROPERTY_BACKGROUNDSPRITEFRAME_DISABLED
      ? null != e &&
        a.setBackgroundSpriteFrameForState(e, cc.CONTROL_STATE_DISABLED)
      : cc.ControlLoader.prototype.onHandlePropTypeSpriteFrame.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_TITLECOLOR_NORMAL
      ? a.setTitleColorForState(e, cc.CONTROL_STATE_NORMAL)
      : d === PROPERTY_TITLECOLOR_HIGHLIGHTED
      ? a.setTitleColorForState(e, cc.CONTROL_STATE_HIGHLIGHTED)
      : d === PROPERTY_TITLECOLOR_DISABLED
      ? a.setTitleColorForState(e, cc.CONTROL_STATE_DISABLED)
      : cc.ControlLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.ControlButtonLoader.loader = function () {
  return new cc.ControlButtonLoader();
};
var PROPERTY_CONTAINER = "container",
  PROPERTY_DIRECTION = "direction",
  PROPERTY_CLIPSTOBOUNDS = "clipsToBounds",
  PROPERTY_BOUNCES = "bounces",
  PROPERTY_SCALE = "scale";
cc.ScrollViewLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.ScrollView();
  },
  onHandlePropTypeSize: function (a, b, d, e, f) {
    d === PROPERTY_CONTENTSIZE
      ? a.setViewSize(e)
      : cc.NodeLoader.prototype.onHandlePropTypeSize.call(this, a, b, d, e, f);
  },
  onHandlePropTypeCCBFile: function (a, b, d, e, f) {
    d === PROPERTY_CONTAINER
      ? (a.setContainer(e), a.updateInset())
      : cc.NodeLoader.prototype.onHandlePropTypeCCBFile.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d === PROPERTY_CLIPSTOBOUNDS
      ? a.setClippingToBounds(e)
      : d === PROPERTY_BOUNCES
      ? a.setBounceable(e)
      : cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this, a, b, d, e, f);
  },
  onHandlePropTypeFloat: function (a, b, d, e, f) {
    d === PROPERTY_SCALE
      ? a.setScale(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this, a, b, d, e, f);
  },
  onHandlePropTypeIntegerLabeled: function (a, b, d, e, f) {
    d === PROPERTY_DIRECTION
      ? a.setDirection(e)
      : cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.ScrollViewLoader.loader = function () {
  return new cc.ScrollViewLoader();
};
var PROPERTY_CONTENTSIZE = "contentSize",
  PROPERTY_SPRITEFRAME = "spriteFrame",
  PROPERTY_COLOR = "color",
  PROPERTY_OPACITY = "opacity",
  PROPERTY_BLENDFUNC = "blendFunc",
  PROPERTY_INSETLEFT = "insetLeft",
  PROPERTY_INSETTOP = "insetTop",
  PROPERTY_INSETRIGHT = "insetRight",
  PROPERTY_INSETBOTTOM = "insetBottom";
cc.Scale9SpriteLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    var d = new cc.Scale9Sprite();
    d.setAnchorPoint(0, 0);
    return d;
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_COLOR
      ? (255 === e.r && 255 === e.g && 255 === e.b) || a.setColor(e)
      : cc.NodeLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_OPACITY
      ? a.setOpacity(e)
      : cc.NodeLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d !== PROPERTY_BLENDFUNC &&
      cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(
        this,
        a,
        b,
        d,
        e,
        f
      );
  },
  onHandlePropTypeSpriteFrame: function (a, b, d, e, f) {
    d === PROPERTY_SPRITEFRAME
      ? a.setSpriteFrame(e)
      : cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeSize: function (a, b, d, e, f) {
    d !== PROPERTY_CONTENTSIZE &&
      (d === PROPERTY_PREFEREDSIZE
        ? a.setPreferredSize(e)
        : cc.NodeLoader.prototype.onHandlePropTypeSize.call(
            this,
            a,
            b,
            d,
            e,
            f
          ));
  },
  onHandlePropTypeFloat: function (a, b, d, e, f) {
    d === PROPERTY_INSETLEFT
      ? a.setInsetLeft(e)
      : d === PROPERTY_INSETTOP
      ? a.setInsetTop(e)
      : d === PROPERTY_INSETRIGHT
      ? a.setInsetRight(e)
      : d === PROPERTY_INSETBOTTOM
      ? a.setInsetBottom(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this, a, b, d, e, f);
  },
});
cc.Scale9SpriteLoader.loader = function () {
  return new cc.Scale9SpriteLoader();
};
var PROPERTY_FLIP = "flip",
  PROPERTY_DISPLAYFRAME = "displayFrame",
  PROPERTY_COLOR = "color",
  PROPERTY_OPACITY = "opacity",
  PROPERTY_BLENDFUNC = "blendFunc";
cc.SpriteLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.Sprite();
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_COLOR
      ? (255 === e.r && 255 === e.g && 255 === e.b) || a.setColor(e)
      : cc.NodeLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_OPACITY
      ? a.setOpacity(e)
      : cc.NodeLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeSpriteFrame: function (a, b, d, e, f) {
    d === PROPERTY_DISPLAYFRAME
      ? e
        ? a.setSpriteFrame(e)
        : cc.log("ERROR: SpriteFrame is null")
      : cc.NodeLoader.prototype.onHandlePropTypeSpriteFrame.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFlip: function (a, b, d, e, f) {
    d === PROPERTY_FLIP
      ? (a.setFlippedX(e[0]), a.setFlippedY(e[1]))
      : cc.NodeLoader.prototype.onHandlePropTypeFlip.call(this, a, b, d, e, f);
  },
});
cc.SpriteLoader.loader = function () {
  return new cc.SpriteLoader();
};
var PROPERTY_TOUCH_ENABLED = "touchEnabled",
  PROPERTY_IS_TOUCH_ENABLED = "isTouchEnabled",
  PROPERTY_ACCELEROMETER_ENABLED = "accelerometerEnabled",
  PROPERTY_IS_ACCELEROMETER_ENABLED = "isAccelerometerEnabled",
  PROPERTY_IS_MOUSE_ENABLED = "isMouseEnabled",
  PROPERTY_MOUSE_ENABLED = "mouseEnabled",
  PROPERTY_KEYBOARD_ENABLED = "keyboardEnabled",
  PROPERTY_IS_KEYBOARD_ENABLED = "isKeyboardEnabled";
cc.LayerLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    var d = new cc.Layer();
    d.setContentSize(0, 0);
    return d;
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d !== PROPERTY_TOUCH_ENABLED &&
      d !== PROPERTY_IS_TOUCH_ENABLED &&
      d !== PROPERTY_ACCELEROMETER_ENABLED &&
      d !== PROPERTY_IS_ACCELEROMETER_ENABLED &&
      d !== PROPERTY_MOUSE_ENABLED &&
      d !== PROPERTY_IS_MOUSE_ENABLED &&
      (d === PROPERTY_KEYBOARD_ENABLED || d === PROPERTY_IS_KEYBOARD_ENABLED
        ? a.setKeyboardEnabled && !cc.sys.isNative
          ? a.setKeyboardEnabled(e)
          : cc.log(
              "The property '" +
                PROPERTY_IS_KEYBOARD_ENABLED +
                "' is not supported!"
            )
        : cc.NodeLoader.prototype.onHandlePropTypeCheck.call(
            this,
            a,
            b,
            d,
            e,
            f
          ));
  },
});
cc.LayerLoader.loader = function () {
  return new cc.LayerLoader();
};
cc.LayerColorLoader = cc.LayerLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.LayerColor();
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_COLOR
      ? a.setColor(e)
      : cc.LayerLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_OPACITY
      ? a.setOpacity(e)
      : cc.LayerLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.LayerColorLoader.loader = function () {
  return new cc.LayerColorLoader();
};
var PROPERTY_STARTCOLOR = "startColor",
  PROPERTY_ENDCOLOR = "endColor",
  PROPERTY_STARTOPACITY = "startOpacity",
  PROPERTY_ENDOPACITY = "endOpacity",
  PROPERTY_VECTOR = "vector";
cc.LayerGradientLoader = cc.LayerLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.LayerGradient();
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_STARTCOLOR
      ? a.setStartColor(e)
      : d === PROPERTY_ENDCOLOR
      ? a.setEndColor(e)
      : cc.LayerLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_STARTOPACITY
      ? a.setStartOpacity(e)
      : d === PROPERTY_ENDOPACITY
      ? a.setEndOpacity(e)
      : cc.LayerLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypePoint: function (a, b, d, e, f) {
    d === PROPERTY_VECTOR
      ? a.setVector(e)
      : cc.LayerLoader.prototype.onHandlePropTypePoint.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.LayerLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.LayerGradientLoader.loader = function () {
  return new cc.LayerGradientLoader();
};
cc.MenuLoader = cc.LayerLoader.extend({
  _createCCNode: function (a, b) {
    var d = new cc.Menu();
    d.setContentSize(0, 0);
    return d;
  },
});
cc.MenuLoader.loader = function () {
  return new cc.MenuLoader();
};
var PROPERTY_BLOCK = "block",
  PROPERTY_ISENABLED = "isEnabled";
cc.MenuItemLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return null;
  },
  onHandlePropTypeBlock: function (a, b, d, e, f) {
    d === PROPERTY_BLOCK
      ? null != e && a.setTarget(e.selMenuHander, e.target)
      : cc.NodeLoader.prototype.onHandlePropTypeBlock.call(this, a, b, d, e, f);
  },
  onHandlePropTypeCheck: function (a, b, d, e, f) {
    d === PROPERTY_ISENABLED
      ? a.setEnabled(e)
      : cc.NodeLoader.prototype.onHandlePropTypeCheck.call(this, a, b, d, e, f);
  },
});
var PROPERTY_NORMALDISPLAYFRAME = "normalSpriteFrame",
  PROPERTY_SELECTEDDISPLAYFRAME = "selectedSpriteFrame",
  PROPERTY_DISABLEDDISPLAYFRAME = "disabledSpriteFrame";
cc.MenuItemImageLoader = cc.MenuItemLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.MenuItemImage();
  },
  onHandlePropTypeSpriteFrame: function (a, b, d, e, f) {
    d === PROPERTY_NORMALDISPLAYFRAME
      ? null != e && a.setNormalSpriteFrame(e)
      : d === PROPERTY_SELECTEDDISPLAYFRAME
      ? null != e && a.setSelectedSpriteFrame(e)
      : d === PROPERTY_DISABLEDDISPLAYFRAME
      ? null != e && a.setDisabledSpriteFrame(e)
      : cc.MenuItemLoader.prototype.onHandlePropTypeSpriteFrame.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.MenuItemImageLoader.loader = function () {
  return new cc.MenuItemImageLoader();
};
var PROPERTY_FONTNAME = "fontName",
  PROPERTY_FONTSIZE = "fontSize",
  PROPERTY_HORIZONTALALIGNMENT = "horizontalAlignment",
  PROPERTY_VERTICALALIGNMENT = "verticalAlignment",
  PROPERTY_STRING = "string",
  PROPERTY_DIMENSIONS = "dimensions";
cc.LabelTTFLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.LabelTTF();
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_COLOR
      ? (255 === e.r && 255 === e.g && 255 === e.b) || a.setColor(e)
      : cc.NodeLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_OPACITY
      ? a.setOpacity(e)
      : cc.NodeLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFontTTF: function (a, b, d, e, f) {
    d === PROPERTY_FONTNAME
      ? a.setFontName(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFontTTF.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeText: function (a, b, d, e, f) {
    d === PROPERTY_STRING
      ? a.setString(e)
      : cc.NodeLoader.prototype.onHandlePropTypeText.call(this, a, b, d, e, f);
  },
  onHandlePropTypeFloatScale: function (a, b, d, e, f) {
    d === PROPERTY_FONTSIZE
      ? a.setFontSize(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFloatScale.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeIntegerLabeled: function (a, b, d, e, f) {
    d === PROPERTY_HORIZONTALALIGNMENT
      ? a.setHorizontalAlignment(e)
      : d === PROPERTY_VERTICALALIGNMENT
      ? a.setVerticalAlignment(e)
      : cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeSize: function (a, b, d, e, f) {
    d === PROPERTY_DIMENSIONS
      ? a.setDimensions(e)
      : cc.NodeLoader.prototype.onHandlePropTypeSize.call(this, a, b, d, e, f);
  },
});
cc.LabelTTFLoader.loader = function () {
  return new cc.LabelTTFLoader();
};
var PROPERTY_FNTFILE = "fntFile";
cc.LabelBMFontLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.LabelBMFont();
  },
  onHandlePropTypeColor3: function (a, b, d, e, f) {
    d === PROPERTY_COLOR
      ? (255 === e.r && 255 === e.g && 255 === e.b) || a.setColor(e)
      : cc.NodeLoader.prototype.onHandlePropTypeColor3.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeByte: function (a, b, d, e, f) {
    d === PROPERTY_OPACITY
      ? a.setOpacity(e)
      : cc.NodeLoader.prototype.onHandlePropTypeByte.call(this, a, b, d, e, f);
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFntFile: function (a, b, d, e, f) {
    d === PROPERTY_FNTFILE
      ? a.setFntFile(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFntFile.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeText: function (a, b, d, e, f) {
    d === PROPERTY_STRING
      ? a.setString(e)
      : cc.NodeLoader.prototype.onHandlePropTypeText.call(this, a, b, d, e, f);
  },
});
cc.LabelBMFontLoader.loader = function () {
  return new cc.LabelBMFontLoader();
};
var PROPERTY_EMITERMODE = "emitterMode",
  PROPERTY_POSVAR = "posVar",
  PROPERTY_EMISSIONRATE = "emissionRate",
  PROPERTY_DURATION = "duration",
  PROPERTY_TOTALPARTICLES = "totalParticles",
  PROPERTY_LIFE = "life",
  PROPERTY_STARTSIZE = "startSize",
  PROPERTY_ENDSIZE = "endSize",
  PROPERTY_STARTSPIN = "startSpin",
  PROPERTY_ENDSPIN = "endSpin",
  PROPERTY_ANGLE = "angle",
  PROPERTY_GRAVITY = "gravity",
  PROPERTY_SPEED = "speed",
  PROPERTY_TANGENTIALACCEL = "tangentialAccel",
  PROPERTY_RADIALACCEL = "radialAccel",
  PROPERTY_TEXTURE = "texture",
  PROPERTY_STARTRADIUS = "startRadius",
  PROPERTY_ENDRADIUS = "endRadius",
  PROPERTY_ROTATEPERSECOND = "rotatePerSecond";
cc.ParticleSystemLoader = cc.NodeLoader.extend({
  _createCCNode: function (a, b) {
    return new cc.ParticleSystem();
  },
  onHandlePropTypeIntegerLabeled: function (a, b, d, e, f) {
    d === PROPERTY_EMITERMODE
      ? a.setEmitterMode(e)
      : cc.NodeLoader.prototype.onHandlePropTypeIntegerLabeled.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypePoint: function (a, b, d, e, f) {
    d === PROPERTY_POSVAR
      ? a.setPosVar(e)
      : d === PROPERTY_GRAVITY
      ? a.setGravity(e)
      : cc.NodeLoader.prototype.onHandlePropTypePoint.call(this, a, b, d, e, f);
  },
  onHandlePropTypeFloat: function (a, b, d, e, f) {
    d === PROPERTY_EMISSIONRATE
      ? a.setEmissionRate(e)
      : d === PROPERTY_DURATION
      ? a.setDuration(e)
      : cc.NodeLoader.prototype.onHandlePropTypeFloat.call(this, a, b, d, e, f);
  },
  onHandlePropTypeInteger: function (a, b, d, e, f) {
    d === PROPERTY_TOTALPARTICLES
      ? a.setTotalParticles(e)
      : cc.NodeLoader.prototype.onHandlePropTypeInteger.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeFloatVar: function (a, b, d, e, f) {
    d === PROPERTY_LIFE
      ? (a.setLife(e[0]), a.setLifeVar(e[1]))
      : d === PROPERTY_STARTSIZE
      ? (a.setStartSize(e[0]), a.setStartSizeVar(e[1]))
      : d === PROPERTY_ENDSIZE
      ? (a.setEndSize(e[0]), a.setEndSizeVar(e[1]))
      : d === PROPERTY_STARTSPIN
      ? (a.setStartSpin(e[0]), a.setStartSpinVar(e[1]))
      : d === PROPERTY_ENDSPIN
      ? (a.setEndSpin(e[0]), a.setEndSpinVar(e[1]))
      : d === PROPERTY_ANGLE
      ? (a.setAngle(e[0]), a.setAngleVar(e[1]))
      : d === PROPERTY_SPEED
      ? (a.setSpeed(e[0]), a.setSpeedVar(e[1]))
      : d === PROPERTY_TANGENTIALACCEL
      ? (a.setTangentialAccel(e[0]), a.setTangentialAccelVar(e[1]))
      : d === PROPERTY_RADIALACCEL
      ? (a.setRadialAccel(e[0]), a.setRadialAccelVar(e[1]))
      : d === PROPERTY_STARTRADIUS
      ? (a.setStartRadius(e[0]), a.setStartRadiusVar(e[1]))
      : d === PROPERTY_ENDRADIUS
      ? (a.setEndRadius(e[0]), a.setEndRadiusVar(e[1]))
      : d === PROPERTY_ROTATEPERSECOND
      ? (a.setRotatePerSecond(e[0]), a.setRotatePerSecondVar(e[1]))
      : cc.NodeLoader.prototype.onHandlePropTypeFloatVar.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeColor4FVar: function (a, b, d, e, f) {
    d === PROPERTY_STARTCOLOR
      ? (a.setStartColor(e[0]), a.setStartColorVar(e[1]))
      : d === PROPERTY_ENDCOLOR
      ? (a.setEndColor(e[0]), a.setEndColorVar(e[1]))
      : cc.NodeLoader.prototype.onHandlePropTypeColor4FVar.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeBlendFunc: function (a, b, d, e, f) {
    d === PROPERTY_BLENDFUNC
      ? a.setBlendFunc(e)
      : cc.NodeLoader.prototype.onHandlePropTypeBlendFunc.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
  onHandlePropTypeTexture: function (a, b, d, e, f) {
    d === PROPERTY_TEXTURE
      ? a.setTexture(e)
      : cc.NodeLoader.prototype.onHandlePropTypeTexture.call(
          this,
          a,
          b,
          d,
          e,
          f
        );
  },
});
cc.ParticleSystemLoader.loader = function () {
  return new cc.ParticleSystemLoader();
};
cc.NodeLoaderLibrary = cc.Class.extend({
  _ccNodeLoaders: null,
  ctor: function () {
    this._ccNodeLoaders = {};
  },
  registerDefaultCCNodeLoaders: function () {
    this.registerCCNodeLoader("CCNode", cc.NodeLoader.loader());
    this.registerCCNodeLoader("CCLayer", cc.LayerLoader.loader());
    this.registerCCNodeLoader("CCLayerColor", cc.LayerColorLoader.loader());
    this.registerCCNodeLoader(
      "CCLayerGradient",
      cc.LayerGradientLoader.loader()
    );
    this.registerCCNodeLoader("CCSprite", cc.SpriteLoader.loader());
    this.registerCCNodeLoader("CCLabelBMFont", cc.LabelBMFontLoader.loader());
    this.registerCCNodeLoader("CCLabelTTF", cc.LabelTTFLoader.loader());
    this.registerCCNodeLoader("CCScale9Sprite", cc.Scale9SpriteLoader.loader());
    this.registerCCNodeLoader("CCScrollView", cc.ScrollViewLoader.loader());
    this.registerCCNodeLoader("CCBFile", cc.BuilderFileLoader.loader());
    this.registerCCNodeLoader("CCMenu", cc.MenuLoader.loader());
    this.registerCCNodeLoader(
      "CCMenuItemImage",
      cc.MenuItemImageLoader.loader()
    );
    this.registerCCNodeLoader(
      "CCControlButton",
      cc.ControlButtonLoader.loader()
    );
    this.registerCCNodeLoader(
      "CCParticleSystemQuad",
      cc.ParticleSystemLoader.loader()
    );
  },
  registerCCNodeLoader: function (a, b) {
    this._ccNodeLoaders[a] = b;
  },
  unregisterCCNodeLoader: function (a) {
    this._ccNodeLoaders[a] && delete this._ccNodeLoaders[a];
  },
  getCCNodeLoader: function (a) {
    return this._ccNodeLoaders[a] ? this._ccNodeLoaders[a] : null;
  },
  purge: function (a) {
    if (a) for (var b in this._ccNodeLoaders) delete this._ccNodeLoaders[b];
    this._ccNodeLoaders = {};
  },
});
cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary = null;
cc.NodeLoaderLibrary.library = function () {
  return new cc.NodeLoaderLibrary();
};
cc.NodeLoaderLibrary.sharedCCNodeLoaderLibrary = function () {
  null == cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary &&
    ((cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary = new cc.NodeLoaderLibrary()),
    cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary.registerDefaultCCNodeLoaders());
  return cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary;
};
cc.NodeLoaderLibrary.purgeSharedCCNodeLoaderLibrary = function () {
  cc.NodeLoaderLibrary.sSharedCCNodeLoaderLibrary = null;
};
cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary = function () {
  var a = cc.NodeLoaderLibrary.library();
  a.registerDefaultCCNodeLoaders();
  return a;
};
var CCB_VERSION = 5,
  CCB_PROPTYPE_POSITION = 0,
  CCB_PROPTYPE_SIZE = 1,
  CCB_PROPTYPE_POINT = 2,
  CCB_PROPTYPE_POINTLOCK = 3,
  CCB_PROPTYPE_SCALELOCK = 4,
  CCB_PROPTYPE_DEGREES = 5,
  CCB_PROPTYPE_INTEGER = 6,
  CCB_PROPTYPE_FLOAT = 7,
  CCB_PROPTYPE_FLOATVAR = 8,
  CCB_PROPTYPE_CHECK = 9,
  CCB_PROPTYPE_SPRITEFRAME = 10,
  CCB_PROPTYPE_TEXTURE = 11,
  CCB_PROPTYPE_BYTE = 12,
  CCB_PROPTYPE_COLOR3 = 13,
  CCB_PROPTYPE_COLOR4VAR = 14,
  CCB_PROPTYPE_FLIP = 15,
  CCB_PROPTYPE_BLENDMODE = 16,
  CCB_PROPTYPE_FNTFILE = 17,
  CCB_PROPTYPE_TEXT = 18,
  CCB_PROPTYPE_FONTTTF = 19,
  CCB_PROPTYPE_INTEGERLABELED = 20,
  CCB_PROPTYPE_BLOCK = 21,
  CCB_PROPTYPE_ANIMATION = 22,
  CCB_PROPTYPE_CCBFILE = 23,
  CCB_PROPTYPE_STRING = 24,
  CCB_PROPTYPE_BLOCKCCCONTROL = 25,
  CCB_PROPTYPE_FLOATSCALE = 26,
  CCB_PROPTYPE_FLOATXY = 27,
  CCB_FLOAT0 = 0,
  CCB_FLOAT1 = 1,
  CCB_FLOAT_MINUS1 = 2,
  CCB_FLOAT05 = 3,
  CCB_FLOAT_INTEGER = 4,
  CCB_FLOAT_FULL = 5,
  CCB_PLATFORM_ALL = 0,
  CCB_PLATFORM_IOS = 1,
  CCB_PLATFORM_MAC = 2,
  CCB_TARGETTYPE_NONE = 0,
  CCB_TARGETTYPE_DOCUMENTROOT = 1,
  CCB_TARGETTYPE_OWNER = 2,
  CCB_KEYFRAME_EASING_INSTANT = 0,
  CCB_KEYFRAME_EASING_LINEAR = 1,
  CCB_KEYFRAME_EASING_CUBIC_IN = 2,
  CCB_KEYFRAME_EASING_CUBIC_OUT = 3,
  CCB_KEYFRAME_EASING_CUBIC_INOUT = 4,
  CCB_KEYFRAME_EASING_ELASTIC_IN = 5,
  CCB_KEYFRAME_EASING_ELASTIC_OUT = 6,
  CCB_KEYFRAME_EASING_ELASTIC_INOUT = 7,
  CCB_KEYFRAME_EASING_BOUNCE_IN = 8,
  CCB_KEYFRAME_EASING_BOUNCE_OUT = 9,
  CCB_KEYFRAME_EASING_BOUNCE_INOUT = 10,
  CCB_KEYFRAME_EASING_BACK_IN = 11,
  CCB_KEYFRAME_EASING_BACK_OUT = 12,
  CCB_KEYFRAME_EASING_BACK_INOUT = 13,
  CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT = 0,
  CCB_POSITIONTYPE_RELATIVE_TOP_LEFT = 1,
  CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT = 2,
  CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT = 3,
  CCB_POSITIONTYPE_PERCENT = 4,
  CCB_POSITIONTYPE_MULTIPLY_RESOLUTION = 5,
  CCB_SIZETYPE_ABSOLUTE = 0,
  CCB_SIZETYPE_PERCENT = 1,
  CCB_SIZETYPE_RELATIVE_CONTAINER = 2,
  CCB_SIZETYPE_HORIZONTAL_PERCENT = 3,
  CCB_SIZETYPE_VERTICAL_PERCENT = 4,
  CCB_SIZETYPE_MULTIPLY_RESOLUTION = 5,
  CCB_SCALETYPE_ABSOLUTE = 0,
  CCB_SCALETYPE_MULTIPLY_RESOLUTION = 1;
cc.BuilderReader = cc.Class.extend({
  _jsControlled: !1,
  _data: null,
  _ccbRootPath: "",
  _bytes: 0,
  _currentByte: 0,
  _currentBit: 0,
  _stringCache: null,
  _loadedSpriteSheets: null,
  _owner: null,
  _animationManager: null,
  _animationManagers: null,
  _animatedProps: null,
  _ccNodeLoaderLibrary: null,
  _ccNodeLoaderListener: null,
  _ccbMemberVariableAssigner: null,
  _ccbSelectorResolver: null,
  _ownerOutletNames: null,
  _ownerOutletNodes: null,
  _nodesWithAnimationManagers: null,
  _animationManagerForNodes: null,
  _ownerCallbackNames: null,
  _ownerCallbackNodes: null,
  _ownerCallbackEvents: null,
  _readNodeGraphFromData: !1,
  ctor: function (a, b, d, e) {
    this._stringCache = [];
    this._loadedSpriteSheets = [];
    this._currentByte = this._currentBit = -1;
    0 !== arguments.length &&
      (a instanceof cc.BuilderReader
        ? ((this._loadedSpriteSheets = a._loadedSpriteSheets),
          (this._ccNodeLoaderLibrary = a._ccNodeLoaderLibrary),
          (this._ccbMemberVariableAssigner = a._ccbMemberVariableAssigner),
          (this._ccbSelectorResolver = a._ccbSelectorResolver),
          (this._ccNodeLoaderListener = a._ccNodeLoaderListener),
          (this._ownerCallbackNames = a._ownerCallbackNames),
          (this._ownerCallbackNodes = a._ownerCallbackNodes),
          (this._ownerCallbackEvents = a._ownerCallbackEvents),
          (this._ownerOutletNames = a._ownerOutletNames),
          (this._ownerOutletNodes = a._ownerOutletNodes),
          (this._ccbRootPath = a._ccbRootPath))
        : ((this._ccNodeLoaderLibrary = a),
          (this._ccbMemberVariableAssigner = b),
          (this._ccbSelectorResolver = d),
          (this._ccNodeLoaderListener = e)));
  },
  getCCBRootPath: function () {
    return this._ccbRootPath;
  },
  setCCBRootPath: function (a) {
    this._ccbRootPath = a;
  },
  initWithData: function (a, b) {
    this._animationManager = new cc.BuilderAnimationManager();
    this._data = a;
    this._bytes = a.length;
    this._currentByte = this._currentBit = 0;
    this._owner = b;
    this._animationManager.setRootContainerSize(cc.director.getWinSize());
    return !0;
  },
  _loadBinarySync: function (a) {
    var b = this.getXMLHttpRequest(),
      d = "load " + a + " failed!";
    b.open("GET", a, !1);
    var e = null;
    if (
      /msie/i.test(navigator.userAgent) &&
      !/opera/i.test(navigator.userAgent)
    ) {
      b.setRequestHeader("Accept-Charset", "x-user-defined");
      b.send(null);
      if (200 !== b.status) return cc.log(d), null;
      if ((b = cc._convertResponseBodyToText(b.responseBody)))
        (e = this._stringConvertToArray(b)), (this._fileDataCache[a] = e);
    } else {
      b.overrideMimeType &&
        b.overrideMimeType("text/plain; charset\x3dx-user-defined");
      b.send(null);
      if (200 !== b.status) return cc.log(d), null;
      e = this._stringConvertToArray(b.responseText);
      this._fileDataCache[a] = e;
    }
    return e;
  },
  readNodeGraphFromFile: function (a, b, d, e) {
    null == d
      ? (d = cc.director.getWinSize())
      : d instanceof cc.BuilderAnimationManager &&
        ((e = d), (d = cc.director.getWinSize()));
    var f = cc.loader.getRes(a);
    f ||
      ((f = cc.loader.getUrl(a)),
      (f = cc.loader.loadBinarySync(f)),
      (cc.loader.cache[a] = f));
    return this.readNodeGraphFromData(f, b, d, e);
  },
  readNodeGraphFromData: function (a, b, d) {
    this.initWithData(a, b);
    a = this._animationManager;
    a.setRootContainerSize(d);
    a.setOwner(b);
    this._ownerOutletNames = [];
    this._ownerOutletNodes = [];
    this._ownerCallbackNames = [];
    this._ownerCallbackNodes = [];
    this._ownerCallbackEvents = [];
    this._animationManagers = new cc._Dictionary();
    (b = this.readFileWithCleanUp(!0)) &&
      -1 !== a.getAutoPlaySequenceId() &&
      a.runAnimations(a.getAutoPlaySequenceId(), 0);
    if (this._jsControlled) {
      d = [];
      a = [];
      for (
        var e = this._animationManagers, f = e.allKeys(), g = 0;
        g < f.length;
        g++
      )
        d.push(f[g]), a.push(e.objectForKey(f[g]));
      this._nodesWithAnimationManagers = d;
      this._animationManagerForNodes = a;
    }
    return b;
  },
  createSceneWithNodeGraphFromFile: function (a, b, d, e) {
    a = this.readNodeGraphFromFile(a, b, d, e);
    b = new cc.Scene();
    b.addChild(a);
    return b;
  },
  getCCBMemberVariableAssigner: function () {
    return this._ccbMemberVariableAssigner;
  },
  getCCBSelectorResolver: function () {
    return this._ccbSelectorResolver;
  },
  getAnimationManager: function () {
    return this._animationManager;
  },
  setAnimationManager: function (a) {
    this._animationManager = a;
  },
  getAnimatedProperties: function () {
    return this._animatedProps;
  },
  getLoadedSpriteSheet: function () {
    return this._loadedSpriteSheets;
  },
  getOwner: function () {
    return this._owner;
  },
  readInt: function (a) {
    for (
      var b = 0,
        d = this._data[this._currentByte],
        e = !!(d & (1 << this._currentBit++));
      !e;

    )
      if (
        (b++,
        (e = !!(d & (1 << this._currentBit++))),
        8 <= this._currentBit &&
          ((this._currentBit = 0),
          this._currentByte++,
          (d = this._data[this._currentByte]),
          this._currentByte > this._data.length))
      )
        throw Error("out of the data bound");
    for (var f = 0, g = b - 1; 0 <= g; g--) {
      e = !!(d & (1 << this._currentBit++));
      if (
        8 <= this._currentBit &&
        ((this._currentBit = 0),
        this._currentByte++,
        (d = this._data[this._currentByte]),
        this._currentByte > this._data.length)
      )
        throw Error("out of the data bound");
      e && (f |= 1 << g);
    }
    f |= 1 << b;
    this._currentBit && ((this._currentBit = 0), this._currentByte++);
    return a ? (f % 2 ? 0 | (f / 2) : 0 | (-f / 2)) : f - 1;
  },
  readByte: function () {
    var a = this._data[this._currentByte];
    this._currentByte++;
    return a;
  },
  readBool: function () {
    return !!this._data[this._currentByte++];
  },
  readFloat: function () {
    switch (this._data[this._currentByte++]) {
      case CCB_FLOAT0:
        return 0;
      case CCB_FLOAT1:
        return 1;
      case CCB_FLOAT_MINUS1:
        return -1;
      case CCB_FLOAT05:
        return 0.5;
      case CCB_FLOAT_INTEGER:
        return this.readInt(!0);
      default:
        return this._decodeFloat(23, 8);
    }
  },
  _decodeFloat: function (a, b) {
    var d = (a + b + 1) >> 3;
    if (this._currentByte + d >= this._data.length)
      throw Error("Index out of bound");
    var e = Math.pow(2, b - 1) - 1,
      f = this._readBitsOnly(a + b, 1, d),
      g = this._readBitsOnly(a, b, d),
      h = 0,
      k = 2,
      m = 0;
    do
      for (
        var n = this._data[this._currentByte + d - ++m - 1],
          p = a % 8 || 8,
          r = 1 << p;
        (r >>= 1);

      )
        n & r && (h += 1 / k), (k *= 2);
    while ((a -= p));
    this._currentByte += d;
    return g === (e << 1) + 1
      ? h
        ? NaN
        : f
        ? -Infinity
        : Infinity
      : (1 + -2 * f) *
          (g || h
            ? g
              ? Math.pow(2, g - e) * (1 + h)
              : Math.pow(2, -e + 1) * h
            : 0);
  },
  _readBitsOnly: function (a, b, d) {
    var e = (a + b) % 8,
      f = a % 8,
      g = d - (a >> 3) - 1;
    a = d + (-(a + b) >> 3);
    var h = g - a;
    b =
      (this._data[this._currentByte + d - g - 1] >> f) &
      ((1 << (h ? 8 - f : b)) - 1);
    h &&
      e &&
      ((b +=
        (this._data[this._currentByte + d - a - 1] & ((1 << e) - 1)) <<
        ((h-- << 3) - f)),
      a++);
    for (; h; )
      (b += this._shl(
        this._data[this._currentByte + d - a - 1],
        (h-- << 3) - f
      )),
        a++;
    return b;
  },
  _shl: function (a, b) {
    for (
      ++b;
      --b;
      a =
        1073741824 === ((a %= 2147483648) & 1073741824)
          ? 2 * a
          : 2 * (a - 1073741824) + 2147483648
    );
    return a;
  },
  readCachedString: function () {
    return this._stringCache[this.readInt(!1)];
  },
  isJSControlled: function () {
    return this._jsControlled;
  },
  getOwnerCallbackNames: function () {
    return this._ownerCallbackNames;
  },
  getOwnerCallbackNodes: function () {
    return this._ownerCallbackNodes;
  },
  getOwnerCallbackControlEvents: function () {
    return this._ownerCallbackEvents;
  },
  getOwnerOutletNames: function () {
    return this._ownerOutletNames;
  },
  getOwnerOutletNodes: function () {
    return this._ownerOutletNodes;
  },
  getNodesWithAnimationManagers: function () {
    return this._nodesWithAnimationManagers;
  },
  getAnimationManagersForNodes: function () {
    return this._animationManagerForNodes;
  },
  getAnimationManagers: function () {
    return this._animationManagers;
  },
  setAnimationManagers: function (a) {
    this._animationManagers = a;
  },
  addOwnerCallbackName: function (a) {
    this._ownerCallbackNames.push(a);
  },
  addOwnerCallbackNode: function (a) {
    this._ownerCallbackNodes.push(a);
  },
  addOwnerCallbackControlEvents: function (a) {
    this._ownerCallbackEvents.push(a);
  },
  addDocumentCallbackName: function (a) {
    this._animationManager.addDocumentCallbackName(a);
  },
  addDocumentCallbackNode: function (a) {
    this._animationManager.addDocumentCallbackNode(a);
  },
  addDocumentCallbackControlEvents: function (a) {
    this._animationManager.addDocumentCallbackControlEvents(a);
  },
  readFileWithCleanUp: function (a) {
    if (
      !this._readHeader() ||
      !this._readStringCache() ||
      !this._readSequences()
    )
      return null;
    var b = this._readNodeGraph();
    this._animationManagers.setObject(this._animationManager, b);
    a && this._cleanUpNodeGraph(b);
    return b;
  },
  addOwnerOutletName: function (a) {
    this._ownerOutletNames.push(a);
  },
  addOwnerOutletNode: function (a) {
    null != a && this._ownerOutletNodes.push(a);
  },
  _cleanUpNodeGraph: function (a) {
    a.userObject = null;
    a = a.getChildren();
    for (var b = 0, d = a.length; b < d; b++) this._cleanUpNodeGraph(a[b]);
  },
  _readCallbackKeyframesForSeq: function (a) {
    var b = this.readInt(!1);
    if (!b) return !0;
    for (
      var d = new cc.BuilderSequenceProperty(),
        e = this._jsControlled,
        f = this._animationManager,
        g = d.getKeyframes(),
        h = 0;
      h < b;
      h++
    ) {
      var k = this.readFloat(),
        m = this.readCachedString(),
        n = this.readInt(!1),
        p = [m, n],
        r = new cc.BuilderKeyframe();
      r.setTime(k);
      r.setValue(p);
      e && f.getKeyframeCallbacks().push(n + ":" + m);
      g.push(r);
    }
    a.setCallbackChannel(d);
    return !0;
  },
  _readSoundKeyframesForSeq: function (a) {
    var b = this.readInt(!1);
    if (!b) return !0;
    for (
      var d = new cc.BuilderSequenceProperty(), e = d.getKeyframes(), f = 0;
      f < b;
      f++
    ) {
      var g = this.readFloat(),
        h = this.readCachedString(),
        k = this.readFloat(),
        m = this.readFloat(),
        n = this.readFloat(),
        h = [h, k, m, n],
        k = new cc.BuilderKeyframe();
      k.setTime(g);
      k.setValue(h);
      e.push(k);
    }
    a.setSoundChannel(d);
    return !0;
  },
  _readSequences: function () {
    for (
      var a = this._animationManager.getSequences(),
        b = this.readInt(!1),
        d = 0;
      d < b;
      d++
    ) {
      var e = new cc.BuilderSequence();
      e.setDuration(this.readFloat());
      e.setName(this.readCachedString());
      e.setSequenceId(this.readInt(!1));
      e.setChainedSequenceId(this.readInt(!0));
      if (
        !this._readCallbackKeyframesForSeq(e) ||
        !this._readSoundKeyframesForSeq(e)
      )
        return !1;
      a.push(e);
    }
    this._animationManager.setAutoPlaySequenceId(this.readInt(!0));
    return !0;
  },
  readKeyframe: function (a) {
    var b = new cc.BuilderKeyframe();
    b.setTime(this.readFloat());
    var d = this.readInt(!1),
      e = 0,
      f = null;
    if (
      d === CCB_KEYFRAME_EASING_CUBIC_IN ||
      d === CCB_KEYFRAME_EASING_CUBIC_OUT ||
      d === CCB_KEYFRAME_EASING_CUBIC_INOUT ||
      d === CCB_KEYFRAME_EASING_ELASTIC_IN ||
      d === CCB_KEYFRAME_EASING_ELASTIC_OUT ||
      d === CCB_KEYFRAME_EASING_ELASTIC_INOUT
    )
      e = this.readFloat();
    b.setEasingType(d);
    b.setEasingOpt(e);
    a === CCB_PROPTYPE_CHECK
      ? (f = !!this._data[this._currentByte++])
      : a === CCB_PROPTYPE_BYTE
      ? (f = this._data[this._currentByte++])
      : a === CCB_PROPTYPE_COLOR3
      ? (f = cc.color(
          this._data[this._currentByte++],
          this._data[this._currentByte++],
          this._data[this._currentByte++]
        ))
      : a === CCB_PROPTYPE_FLOATXY
      ? (f = [this.readFloat(), this.readFloat()])
      : a === CCB_PROPTYPE_DEGREES
      ? (f = this.readFloat())
      : a === CCB_PROPTYPE_SCALELOCK ||
        a === CCB_PROPTYPE_POSITION ||
        a === CCB_PROPTYPE_FLOATXY
      ? (f = [this.readFloat(), this.readFloat()])
      : a === CCB_PROPTYPE_SPRITEFRAME &&
        ((a = this.readCachedString()),
        (d = this.readCachedString()),
        "" === a
          ? ((d = this._ccbRootPath + d),
            (a = cc.textureCache.addImage(d)),
            (d = a.getContentSize()),
            (d = cc.rect(0, 0, d.width, d.height)),
            (f = new cc.SpriteFrame(a, d)))
          : ((a = this._ccbRootPath + a),
            (e = cc.spriteFrameCache),
            -1 === this._loadedSpriteSheets.indexOf(a) &&
              (e.addSpriteFrames(a), this._loadedSpriteSheets.push(a)),
            (f = e.getSpriteFrame(d))));
    b.setValue(f);
    return b;
  },
  _readHeader: function () {
    if (!this._data) return !1;
    var a = this._readStringFromBytes(this._currentByte, 4, !0);
    this._currentByte += 4;
    if ("ccbi" !== a) return !1;
    a = this.readInt(!1);
    if (a !== CCB_VERSION)
      return (
        cc.log(
          "WARNING! Incompatible ccbi file version (file: " +
            a +
            " reader: " +
            CCB_VERSION +
            ")"
        ),
        !1
      );
    this._jsControlled = !!this._data[this._currentByte++];
    this._animationManager._jsControlled = this._jsControlled;
    return !0;
  },
  _readStringFromBytes: function (a, b, d) {
    var e = "",
      f = this._data;
    if (d) for (d = b - 1; 0 <= d; d--) e += String.fromCharCode(f[a + d]);
    else for (d = 0; d < b; d++) e += String.fromCharCode(f[a + d]);
    return e;
  },
  _readStringCache: function () {
    for (var a = this.readInt(!1), b = 0; b < a; b++)
      this._readStringCacheEntry();
    return !0;
  },
  _readStringCacheEntry: function () {
    for (
      var a = this._data[this._currentByte++],
        b = this._data[this._currentByte++],
        a = (a << 8) | b,
        b = "",
        d = this._data,
        e = this._currentByte,
        f = 0;
      f < a;
      f++
    )
      var g = d[e + f].toString("16").toUpperCase(),
        g = 1 < g.length ? g : "0" + g,
        b = b + ("%" + g);
    b = decodeURIComponent(b);
    this._currentByte += a;
    this._stringCache.push(b);
  },
  _readNodeGraph: function (a) {
    var b = this.readCachedString(),
      d,
      e = this._jsControlled,
      f = this._animationManager;
    e && (d = this.readCachedString());
    var g = this.readInt(!1),
      h;
    g !== CCB_TARGETTYPE_NONE && (h = this.readCachedString());
    (b = this._ccNodeLoaderLibrary.getCCNodeLoader(b)) ||
      (b = this._ccNodeLoaderLibrary.getCCNodeLoader("CCNode"));
    var k = b.loadCCNode(a, this);
    f.getRootNode() || f.setRootNode(k);
    e && k === f.getRootNode() && f.setDocumentControllerName(d);
    var m = new cc._Dictionary(),
      n = (this._animatedProps = []),
      p = this.readInt(!1);
    for (d = 0; d < p; ++d) {
      for (
        var r = this.readInt(!1),
          s = new cc._Dictionary(),
          u = this.readInt(!1),
          v = 0;
        v < u;
        ++v
      ) {
        var t = new cc.BuilderSequenceProperty();
        t.setName(this.readCachedString());
        t.setType(this.readInt(!1));
        n.push(t.getName());
        for (
          var w = this.readInt(!1), x = t.getKeyframes(), y = 0;
          y < w;
          ++y
        ) {
          var B = this.readKeyframe(t.getType());
          x.push(B);
        }
        s.setObject(t, t.getName());
      }
      m.setObject(s, r);
    }
    0 < m.count() && f.addNode(k, m);
    b.parseProperties(k, a, this);
    if ((a = !!k.ccbFileNode))
      (d = k.ccbFileNode),
        d.setPosition(k.getPosition()),
        d.setRotation(k.getRotation()),
        d.setScaleX(k.getScaleX()),
        d.setScaleY(k.getScaleY()),
        d.setTag(k.getTag()),
        d.setVisible(!0),
        f.moveAnimationsFromNode(k, d),
        (k.ccbFileNode = null),
        (k = d);
    n = m = null;
    if (g !== CCB_TARGETTYPE_NONE)
      if (e)
        g === CCB_TARGETTYPE_DOCUMENTROOT
          ? (f.addDocumentOutletName(h), f.addDocumentOutletNode(k))
          : (this._ownerOutletNames.push(h), this._ownerOutletNodes.push(k));
      else if (
        (g === CCB_TARGETTYPE_DOCUMENTROOT
          ? (m = f.getRootNode())
          : g === CCB_TARGETTYPE_OWNER && (m = this._owner),
        !m &&
          ((d = !1),
          m.onAssignCCBMemberVariable &&
            (d = m.onAssignCCBMemberVariable(m, h, k)),
          (n = this._ccbMemberVariableAssigner),
          !d && null != n && n.onAssignCCBMemberVariable))
      )
        n.onAssignCCBMemberVariable(m, h, k);
    if (
      0 < b.getCustomProperties().length &&
      ((h = !1),
      !e && ((m = k), null != m && null != m.onAssignCCBCustomProperty))
    )
      for (
        e = b.getCustomProperties(), f = e.allKeys(), d = 0;
        d < f.length;
        d++
      )
        if (
          ((g = e.objectForKey(f[d])),
          (h = m.onAssignCCBCustomProperty(m, f[d], g)),
          (n = this._ccbMemberVariableAssigner),
          !h && null != n && null != n.onAssignCCBCustomProperty)
        )
          n.onAssignCCBCustomProperty(m, f[d], g);
    this._animatedProps = null;
    e = this.readInt(!1);
    for (d = 0; d < e; d++) (h = this._readNodeGraph(k)), k.addChild(h);
    if (!a)
      if (null != k && k.onNodeLoaded) k.onNodeLoaded(k, b);
      else if (null != this._ccNodeLoaderListener)
        this._ccNodeLoaderListener.onNodeLoaded(k, b);
    return k;
  },
  _readUTF8: function () {},
});
cc.BuilderReader._ccbResolutionScale = 1;
cc.BuilderReader.setResolutionScale = function (a) {
  cc.BuilderReader._ccbResolutionScale = a;
};
cc.BuilderReader.getResolutionScale = function () {
  return cc.BuilderReader._ccbResolutionScale;
};
cc.BuilderReader.loadAsScene = function (a, b, d, e) {
  e = e || cc.BuilderReader.getResourcePath();
  a = cc.BuilderReader.load(a, b, d, e);
  b = new cc.Scene();
  b.addChild(a);
  return b;
};
cc.BuilderReader._controllerClassCache = {};
cc.BuilderReader.registerController = function (a, b) {
  cc.BuilderReader._controllerClassCache[a] = cc.Class.extend(b);
};
cc.BuilderReader.load = function (a, b, d, e) {
  e = e || cc.BuilderReader.getResourcePath();
  var f = new cc.BuilderReader(
    cc.NodeLoaderLibrary.newDefaultCCNodeLoaderLibrary()
  );
  f.setCCBRootPath(e);
  if (5 > a.length || a.toLowerCase().lastIndexOf(".ccbi") !== a.length - 5)
    a += ".ccbi";
  a = f.readNodeGraphFromFile(a, b, d);
  var g, h, k;
  if (b) {
    e = f.getOwnerCallbackNames();
    var m = f.getOwnerCallbackNodes(),
      n = f.getOwnerCallbackControlEvents();
    for (d = 0; d < e.length; d++)
      (g = e[d]),
        (h = m[d]),
        (k = n[d]),
        h instanceof cc.ControlButton
          ? h.addTargetWithActionForControlEvents(b, b[g], k)
          : h.setCallback(b[g], b);
    e = f.getOwnerOutletNames();
    m = f.getOwnerOutletNodes();
    for (d = 0; d < e.length; d++) (g = e[d]), (h = m[d]), (b[g] = h);
  }
  e = f.getNodesWithAnimationManagers();
  f = f.getAnimationManagersForNodes();
  if (!e || !f) return a;
  m = cc.BuilderReader._controllerClassCache;
  for (d = 0; d < e.length; d++) {
    var p = e[d],
      r = f[d];
    p.animationManager = r;
    if ((g = r.getDocumentControllerName())) {
      n = m[g];
      if (!n) throw Error("Can not find controller : " + g);
      n = new n();
      n.controllerName = g;
      p.controller = n;
      n.rootNode = p;
      for (
        var s = r.getDocumentCallbackNames(),
          u = r.getDocumentCallbackNodes(),
          v = r.getDocumentCallbackControlEvents(),
          p = 0;
        p < s.length;
        p++
      )
        (g = s[p]),
          (h = u[p]),
          (k = v[p]),
          h instanceof cc.ControlButton
            ? h.addTargetWithActionForControlEvents(n, n[g], k)
            : h.setCallback(n[g], n);
      k = r.getDocumentOutletNames();
      s = r.getDocumentOutletNodes();
      for (p = 0; p < k.length; p++) (g = k[p]), (h = s[p]), (n[g] = h);
      if (n.onDidLoadFromCCB && cc.isFunction(n.onDidLoadFromCCB))
        n.onDidLoadFromCCB();
      g = r.getKeyframeCallbacks();
      for (p = 0; p < g.length; p++)
        (k = g[p].split(":")),
          (h = k[0]),
          (k = k[1]),
          1 == h
            ? r.setCallFunc(cc.callFunc(n[k], n), g[p])
            : 2 == h && b && r.setCallFunc(cc.callFunc(b[k], b), g[p]);
    }
  }
  r.runAnimations(r.getAutoPlaySequenceId(), 0);
  return a;
};
cc.BuilderReader._resourcePath = "";
cc.BuilderReader.setResourcePath = function (a) {
  cc.BuilderReader._resourcePath = a;
};
cc.BuilderReader.getResourcePath = function () {
  return cc.BuilderReader._resourcePath;
};
cc.BuilderReader.lastPathComponent = function (a) {
  var b = a.lastIndexOf("/");
  return -1 !== b ? a.substring(b + 1, a.length - b) : a;
};
cc.BuilderReader.deletePathExtension = function (a) {
  var b = a.lastIndexOf(".");
  return -1 !== b ? a.substring(0, b) : a;
};
cc.BuilderReader.toLowerCase = function (a) {
  return a.toLowerCase();
};
cc.BuilderReader.endsWith = function (a, b) {
  return a.length >= b.length ? 0 === a.lastIndexOf(b) : !1;
};
cc.BuilderReader.concat = function (a, b) {
  return a + b;
};
cc.loader.register(["ccbi"], cc._binaryLoader);
cc.INT_VALUE = 0;
cc.FLOAT_VALUE = 1;
cc.POINTER_VALUE = 2;
cc.BOOL_VALUE = 3;
cc.UNSIGNEDCHAR_VALUE = 4;
cc.BuilderValue = cc.Class.extend({
  _value: null,
  _type: 0,
  getIntValue: function () {},
  getFloatValue: function () {},
  getBoolValue: function () {},
  getByteValue: function () {},
  getPointer: function () {},
  getValue: function () {
    return this._value;
  },
});
cc.BuilderValue.create = function (a) {
  return new cc.BuilderValue();
};
cc.BuilderKeyframe = cc.Class.extend({
  _value: null,
  _time: 0,
  _easingType: 0,
  _easingOpt: 0,
  getValue: function () {
    return this._value;
  },
  setValue: function (a) {
    this._value = a;
  },
  getTime: function () {
    return this._time;
  },
  setTime: function (a) {
    this._time = a;
  },
  getEasingType: function () {
    return this._easingType;
  },
  setEasingType: function (a) {
    this._easingType = a;
  },
  getEasingOpt: function () {
    return this._easingOpt;
  },
  setEasingOpt: function (a) {
    this._easingOpt = a;
  },
});
cc.BuilderSequence = cc.Class.extend({
  _duration: 0,
  _name: "",
  _sequenceId: 0,
  _chainedSequenceId: 0,
  _callbackChannel: null,
  _soundChannel: null,
  ctor: function () {
    this._name = "";
  },
  getDuration: function () {
    return this._duration;
  },
  setDuration: function (a) {
    this._duration = a;
  },
  getName: function () {
    return this._name;
  },
  setName: function (a) {
    this._name = a;
  },
  getSequenceId: function () {
    return this._sequenceId;
  },
  setSequenceId: function (a) {
    this._sequenceId = a;
  },
  getChainedSequenceId: function () {
    return this._chainedSequenceId;
  },
  setChainedSequenceId: function (a) {
    this._chainedSequenceId = a;
  },
  getCallbackChannel: function () {
    return this._callbackChannel;
  },
  setCallbackChannel: function (a) {
    this._callbackChannel = a;
  },
  getSoundChannel: function () {
    return this._soundChannel;
  },
  setSoundChannel: function (a) {
    this._soundChannel = a;
  },
});
cc.BuilderSequenceProperty = cc.Class.extend({
  _name: null,
  _type: 0,
  _keyFrames: null,
  ctor: function () {
    this.init();
  },
  init: function () {
    this._keyFrames = [];
    this._name = "";
  },
  getName: function () {
    return this._name;
  },
  setName: function (a) {
    this._name = a;
  },
  getType: function () {
    return this._type;
  },
  setType: function (a) {
    this._type = a;
  },
  getKeyframes: function () {
    return this._keyFrames;
  },
});
cc.getAbsolutePosition = function (a, b, d, e, f, g) {
  f = g || cc.p(0, 0);
  d === CCB_POSITIONTYPE_RELATIVE_BOTTOM_LEFT
    ? ((f.x = a), (f.y = b))
    : d === CCB_POSITIONTYPE_RELATIVE_TOP_LEFT
    ? ((f.x = a), (f.y = e.height - b))
    : d === CCB_POSITIONTYPE_RELATIVE_TOP_RIGHT
    ? ((f.x = e.width - a), (f.y = e.height - b))
    : d === CCB_POSITIONTYPE_RELATIVE_BOTTOM_RIGHT
    ? ((f.x = e.width - a), (f.y = b))
    : d === CCB_POSITIONTYPE_PERCENT
    ? ((f.x = (e.width * a) / 100), (f.y = (e.height * b) / 100))
    : d === CCB_POSITIONTYPE_MULTIPLY_RESOLUTION &&
      ((d = cc.BuilderReader.getResolutionScale()),
      (f.x = a * d),
      (f.y = b * d));
  return f;
};
cc.setRelativeScale = function (a, b, d, e, f) {
  if (!a) throw Error("cc.setRelativeScale(): node should be non-null");
  e === CCB_POSITIONTYPE_MULTIPLY_RESOLUTION &&
    ((e = cc.BuilderReader.getResolutionScale()), (b *= e), (d *= e));
  a.setScale(b, d);
};
(function () {
  var a = cc.p();
  cc.BuilderAnimationManagerDelegate = cc.Class.extend({
    completedAnimationSequenceNamed: function (a) {},
  });
  cc.BuilderAnimationManager = cc.Class.extend({
    _sequences: null,
    _nodeSequences: null,
    _baseValues: null,
    _autoPlaySequenceId: 0,
    _rootNode: null,
    _owner: null,
    _rootContainerSize: null,
    _delegate: null,
    _runningSequence: null,
    _documentOutletNames: null,
    _documentOutletNodes: null,
    _documentCallbackNames: null,
    _documentCallbackNodes: null,
    _documentCallbackControlEvents: null,
    _documentControllerName: "",
    _lastCompletedSequenceName: "",
    _keyframeCallbacks: null,
    _keyframeCallFuncs: null,
    _animationCompleteCallbackFunc: null,
    _target: null,
    _jsControlled: !1,
    ctor: function () {
      this._rootContainerSize = cc.size(0, 0);
      this.init();
    },
    init: function () {
      this._sequences = [];
      this._nodeSequences = new cc._Dictionary();
      this._baseValues = new cc._Dictionary();
      this._documentOutletNames = [];
      this._documentOutletNodes = [];
      this._documentCallbackNames = [];
      this._documentCallbackNodes = [];
      this._documentCallbackControlEvents = [];
      this._keyframeCallbacks = [];
      this._keyframeCallFuncs = {};
      return !0;
    },
    getSequences: function () {
      return this._sequences;
    },
    setSequences: function (a) {
      this._sequences = a;
    },
    getAutoPlaySequenceId: function () {
      return this._autoPlaySequenceId;
    },
    setAutoPlaySequenceId: function (a) {
      this._autoPlaySequenceId = a;
    },
    getRootNode: function () {
      return this._rootNode;
    },
    setRootNode: function (a) {
      this._rootNode = a;
    },
    getOwner: function () {
      return this._owner;
    },
    setOwner: function (a) {
      this._owner = a;
    },
    addDocumentCallbackNode: function (a) {
      this._documentCallbackNodes.push(a);
    },
    addDocumentCallbackName: function (a) {
      this._documentCallbackNames.push(a);
    },
    addDocumentCallbackControlEvents: function (a) {
      this._documentCallbackControlEvents.push(a);
    },
    addDocumentOutletNode: function (a) {
      this._documentOutletNodes.push(a);
    },
    addDocumentOutletName: function (a) {
      this._documentOutletNames.push(a);
    },
    setDocumentControllerName: function (a) {
      this._documentControllerName = a;
    },
    getDocumentControllerName: function () {
      return this._documentControllerName;
    },
    getDocumentCallbackNames: function () {
      return this._documentCallbackNames;
    },
    getDocumentCallbackNodes: function () {
      return this._documentCallbackNodes;
    },
    getDocumentCallbackControlEvents: function () {
      return this._documentCallbackControlEvents;
    },
    getDocumentOutletNames: function () {
      return this._documentOutletNames;
    },
    getDocumentOutletNodes: function () {
      return this._documentOutletNodes;
    },
    getLastCompletedSequenceName: function () {
      return this._lastCompletedSequenceName;
    },
    getKeyframeCallbacks: function () {
      return this._keyframeCallbacks;
    },
    getRootContainerSize: function () {
      return this._rootContainerSize;
    },
    setRootContainerSize: function (a) {
      this._rootContainerSize = cc.size(a.width, a.height);
    },
    getDelegate: function () {
      return this._delegate;
    },
    setDelegate: function (a) {
      this._delegate = a;
    },
    getRunningSequenceName: function () {
      return this._runningSequence ? this._runningSequence.getName() : null;
    },
    getContainerSize: function (a) {
      return a ? a.getContentSize() : this._rootContainerSize;
    },
    addNode: function (a, d) {
      this._nodeSequences.setObject(d, a);
    },
    setBaseValue: function (a, d, e) {
      var f = this._baseValues.objectForKey(d);
      f || ((f = new cc._Dictionary()), this._baseValues.setObject(f, d));
      f.setObject(a, e);
    },
    moveAnimationsFromNode: function (a, d) {
      var e = this._baseValues,
        f = e.objectForKey(a);
      null !== f && (e.setObject(f, d), e.removeObjectForKey(a));
      e = this._nodeSequences;
      f = e.objectForKey(a);
      null != f && (e.setObject(f, d), e.removeObjectForKey(a));
    },
    getActionForCallbackChannel: function (a) {
      var d = 0,
        e = [];
      a = a.getKeyframes();
      for (var f = a.length, g = 0; g < f; ++g) {
        var h = a[g],
          k = h.getTime() - d,
          d = h.getTime();
        0 < k && e.push(cc.delayTime(k));
        k = h.getValue();
        h = k[0];
        k = k[1];
        if (this._jsControlled)
          (h = this._keyframeCallFuncs[k + ":" + h]), null != h && e.push(h);
        else {
          var m;
          k === CCB_TARGETTYPE_DOCUMENTROOT
            ? (m = this._rootNode)
            : k === CCB_TARGETTYPE_OWNER && (m = this._owner);
          null != m &&
            (0 < h.length
              ? ((k = 0),
                null != m.onResolveCCBCCCallFuncSelector &&
                  (k = m.onResolveCCBCCCallFuncSelector(m, h)),
                0 === k
                  ? cc.log(
                      "Skipping selector '" +
                        h +
                        "' since no CCBSelectorResolver is present."
                    )
                  : e.push(cc.callFunc(k, m)))
              : cc.log("Unexpected empty selector."));
        }
      }
      return 1 > e.length ? null : cc.sequence(e);
    },
    getActionForSoundChannel: function (a) {
      var d = 0,
        e = [];
      a = a.getKeyframes();
      for (var f = a.length, g = 0; g < f; ++g) {
        var h = a[g],
          k = h.getTime() - d,
          d = h.getTime();
        0 < k && e.push(cc.delayTime(k));
        var m = h.getValue(),
          h = cc.BuilderReader.getResourcePath() + m[0],
          k = parseFloat(m[1]),
          n = parseFloat(m[2]),
          m = parseFloat(m[3]);
        e.push(cc.BuilderSoundEffect.create(h, k, n, m));
      }
      return 1 > e.length ? null : cc.sequence(e);
    },
    runAnimationsForSequenceNamed: function (a) {
      this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(a), 0);
    },
    runAnimationsForSequenceNamedTweenDuration: function (a, d) {
      this.runAnimationsForSequenceIdTweenDuration(this._getSequenceId(a), d);
    },
    runAnimationsForSequenceIdTweenDuration: function (a, d) {
      if (-1 === a)
        throw Error(
          "cc.BuilderAnimationManager.runAnimationsForSequenceIdTweenDuration(): Sequence id should not be -1"
        );
      d = d || 0;
      this._rootNode.stopAllActions();
      for (
        var e = this._nodeSequences.allKeys(), f = 0, g = e.length;
        f < g;
        f++
      ) {
        var h = e[f];
        h.stopAllActions();
        var k = this._nodeSequences.objectForKey(h).objectForKey(a),
          m,
          n = [];
        if (k) {
          var p = k.allKeys();
          for (m = 0; m < p.length; m++) {
            var r = p[m],
              s = k.objectForKey(r);
            n.push(r);
            this._setFirstFrame(h, s, d);
            this._runAction(h, s, d);
          }
        }
        if ((k = this._baseValues.objectForKey(h)))
          for (p = k.allKeys(), m = 0; m < p.length; m++)
            (r = p[m]),
              -1 === n.indexOf(r) &&
                ((s = k.objectForKey(r)),
                null != s && this._setAnimatedProperty(r, h, s, d));
      }
      e = this._getSequence(a);
      f = cc.sequence(
        cc.delayTime(e.getDuration() + d),
        cc.callFunc(this._sequenceCompleted, this)
      );
      this._rootNode.runAction(f);
      e.getCallbackChannel() &&
        (f = this.getActionForCallbackChannel(e.getCallbackChannel())) &&
        this._rootNode.runAction(f);
      e.getSoundChannel() &&
        (f = this.getActionForSoundChannel(e.getSoundChannel())) &&
        this._rootNode.runAction(f);
      this._runningSequence = this._getSequence(a);
    },
    runAnimations: function (a, d) {
      d = d || 0;
      var e;
      e = cc.isString(a) ? this._getSequenceId(a) : a;
      this.runAnimationsForSequenceIdTweenDuration(e, d);
    },
    setAnimationCompletedCallback: function (a, d) {
      this._target = a;
      this._animationCompleteCallbackFunc = d;
    },
    setCompletedAnimationCallback: function (a, d) {
      this.setAnimationCompletedCallback(a, d);
    },
    setCallFunc: function (a, d) {
      this._keyframeCallFuncs[d] = a;
    },
    debug: function () {},
    _getBaseValue: function (a, d) {
      var e = this._baseValues.objectForKey(a);
      return e ? e.objectForKey(d) : null;
    },
    _getSequenceId: function (a) {
      for (var d = null, e = this._sequences, f = 0, g = e.length; f < g; f++)
        if ((d = e[f]) && d.getName() === a) return d.getSequenceId();
      return -1;
    },
    _getSequence: function (a) {
      for (var d = null, e = this._sequences, f = 0, g = e.length; f < g; f++)
        if ((d = e[f]) && d.getSequenceId() === a) return d;
      return null;
    },
    _getAction: function (a, d, e, f) {
      a = d.getTime() - (a ? a.getTime() : 0);
      var g, h;
      if ("rotation" === e) return cc.BuilderRotateTo.create(a, d.getValue());
      if ("rotationX" === e) return cc.BuilderRotateXTo.create(a, d.getValue());
      if ("rotationY" === e) return cc.BuilderRotateYTo.create(a, d.getValue());
      if ("opacity" === e) return cc.fadeTo(a, d.getValue());
      if ("color" === e) return (e = d.getValue()), cc.tintTo(a, e.r, e.g, e.b);
      if ("visible" === e)
        return d.getValue()
          ? cc.sequence(cc.delayTime(a), cc.show())
          : cc.sequence(cc.delayTime(a), cc.hide());
      if ("displayFrame" === e)
        return cc.sequence(
          cc.delayTime(a),
          cc.BuilderSetSpriteFrame.create(d.getValue())
        );
      if ("position" === e)
        return (
          (g = this._getBaseValue(f, e)),
          (g = g[2]),
          (h = d.getValue()),
          (d = h[0]),
          (h = h[1]),
          (f = this.getContainerSize(f.getParent())),
          (e = cc.getAbsolutePosition(d, h, g, f, e)),
          cc.moveTo(a, e)
        );
      if ("scale" === e)
        return (
          (g = this._getBaseValue(f, e)),
          (g = g[2]),
          (h = d.getValue()),
          (d = h[0]),
          (h = h[1]),
          g === CCB_SCALETYPE_MULTIPLY_RESOLUTION &&
            ((e = cc.BuilderReader.getResolutionScale()), (d *= e), (h *= e)),
          cc.scaleTo(a, d, h)
        );
      if ("skew" === e)
        return (h = d.getValue()), (d = h[0]), (h = h[1]), cc.skewTo(a, d, h);
      cc.log("BuilderReader: Failed to create animation for property: " + e);
      return null;
    },
    _setAnimatedProperty: function (b, d, e, f) {
      if (0 < f) {
        var g = new cc.BuilderKeyframe();
        g.setValue(e);
        g.setTime(f);
        g.setEasingType(CCB_KEYFRAME_EASING_LINEAR);
        b = this._getAction(null, g, b, d);
        d.runAction(b);
      } else {
        if ("position" === b)
          (f = this._getBaseValue(d, b)),
            (f = f[2]),
            (g = e[0]),
            (e = e[1]),
            cc.getAbsolutePosition(
              g,
              e,
              f,
              this.getContainerSize(d.getParent()),
              b,
              a
            ),
            (d._position.x = a.x),
            (d._position.y = a.y);
        else if ("scale" === b)
          (f = this._getBaseValue(d, b)),
            (f = f[2]),
            (g = e[0]),
            (e = e[1]),
            cc.setRelativeScale(d, g, e, f, b);
        else if ("skew" === b)
          (g = e[0]), (e = e[1]), (d._skewX = g), (d._skewY = e);
        else if ("rotation" === b) d.setRotation(e);
        else if ("rotationX" === b) d._rotationX = e;
        else if ("rotationY" === b) d._rotationY = e;
        else if ("opacity" === b) d._realOpacity = e;
        else if ("displayFrame" === b) d.setSpriteFrame(e);
        else if ("color" === b)
          (255 === e.r && 255 === e.g && 255 === e.b) || d.setColor(e);
        else if ("visible" === b) d.setVisible(e || !1);
        else {
          cc.log("unsupported property name is " + b);
          return;
        }
        d.setNodeDirty();
      }
    },
    _setFirstFrame: function (a, d, e) {
      var f = d.getKeyframes();
      0 === f.length
        ? ((f = this._getBaseValue(a, d.getName())) ||
            cc.log(
              "cc.BuilderAnimationManager._setFirstFrame(): No baseValue found for property"
            ),
          this._setAnimatedProperty(d.getName(), a, f, e))
        : ((f = f[0]),
          this._setAnimatedProperty(d.getName(), a, f.getValue(), e));
    },
    _getEaseAction: function (a, d, e) {
      if (d === CCB_KEYFRAME_EASING_LINEAR || d === CCB_KEYFRAME_EASING_INSTANT)
        return a;
      if (d === CCB_KEYFRAME_EASING_CUBIC_IN) return a.easing(cc.easeIn(e));
      if (d === CCB_KEYFRAME_EASING_CUBIC_OUT) return a.easing(cc.easeOut(e));
      if (d === CCB_KEYFRAME_EASING_CUBIC_INOUT)
        return a.easing(cc.easeInOut(e));
      if (d === CCB_KEYFRAME_EASING_BACK_IN) return a.easing(cc.easeBackIn());
      if (d === CCB_KEYFRAME_EASING_BACK_OUT) return a.easing(cc.easeBackOut());
      if (d === CCB_KEYFRAME_EASING_BACK_INOUT)
        return a.easing(cc.easeBackInOut());
      if (d === CCB_KEYFRAME_EASING_BOUNCE_IN)
        return a.easing(cc.easeBounceIn());
      if (d === CCB_KEYFRAME_EASING_BOUNCE_OUT)
        return a.easing(cc.easeBounceOut());
      if (d === CCB_KEYFRAME_EASING_BOUNCE_INOUT)
        return a.easing(cc.easeBounceInOut());
      if (d === CCB_KEYFRAME_EASING_ELASTIC_IN)
        return a.easing(cc.easeElasticIn(e));
      if (d === CCB_KEYFRAME_EASING_ELASTIC_OUT)
        return a.easing(cc.easeElasticOut(e));
      if (d === CCB_KEYFRAME_EASING_ELASTIC_INOUT)
        return a.easing(cc.easeElasticInOut(e));
      cc.log("BuilderReader: Unknown easing type " + d);
      return a;
    },
    _runAction: function (a, d, e) {
      var f = d.getKeyframes(),
        g = f.length;
      if (1 < g) {
        var h = [];
        e = f[0].getTime() + e;
        0 < e && h.push(cc.delayTime(e));
        for (e = 0; e < g - 1; ++e) {
          var k = f[e],
            m = this._getAction(k, f[e + 1], d.getName(), a);
          m &&
            ((m = this._getEaseAction(m, k.getEasingType(), k.getEasingOpt())),
            h.push(m));
        }
        a.runAction(cc.sequence(h));
      }
    },
    _sequenceCompleted: function () {
      var a = this._runningSequence,
        d = a.getName();
      this._lastCompletedSequenceName != a.getName() &&
        (this._lastCompletedSequenceName = a.getName());
      a = a.getChainedSequenceId();
      this._runningSequence = null;
      -1 !== a && this.runAnimations(a, 0);
      this._delegate && this._delegate.completedAnimationSequenceNamed(d);
      this._target &&
        this._animationCompleteCallbackFunc &&
        this._animationCompleteCallbackFunc.call(this._target);
    },
  });
  cc.BuilderSetSpriteFrame = cc.ActionInstant.extend({
    _spriteFrame: null,
    initWithSpriteFrame: function (a) {
      this._spriteFrame = a;
      return !0;
    },
    update: function (a) {
      this.target.setSpriteFrame(this._spriteFrame);
    },
  });
  cc.BuilderSetSpriteFrame.create = function (a) {
    var d = new cc.BuilderSetSpriteFrame();
    return d && d.initWithSpriteFrame(a) ? d : null;
  };
  cc.BuilderRotateTo = cc.ActionInterval.extend({
    _startAngle: 0,
    _dstAngle: 0,
    _diffAngle: 0,
    initWithDuration: function (a, d) {
      return cc.ActionInterval.prototype.initWithDuration.call(this, a)
        ? ((this._dstAngle = d), !0)
        : !1;
    },
    update: function (a) {
      this.target.setRotation(this._startAngle + this._diffAngle * a);
    },
    startWithTarget: function (a) {
      cc.ActionInterval.prototype.startWithTarget.call(this, a);
      this._startAngle = this.target.getRotation();
      this._diffAngle = this._dstAngle - this._startAngle;
    },
  });
  cc.BuilderRotateTo.create = function (a, d) {
    var e = new cc.BuilderRotateTo();
    return e && e.initWithDuration(a, d) ? e : null;
  };
  cc.BuilderRotateXTo = cc.ActionInterval.extend({});
  cc.BuilderRotateXTo.create = function (a, d) {
    throw Error("rotationX has not been implemented in cocos2d-html5");
  };
  cc.BuilderRotateYTo = cc.ActionInterval.extend({});
  cc.BuilderRotateYTo.create = function (a, d) {
    throw Error("rotationY has not been implemented in cocos2d-html5");
  };
  cc.BuilderSoundEffect = cc.ActionInstant.extend({
    init: function (a) {
      this._file = a;
      return !0;
    },
    update: function (a) {
      cc.audioEngine.playEffect(this._file);
    },
  });
  cc.BuilderSoundEffect.create = function (a, d, e, f) {
    return (d = new cc.BuilderSoundEffect()) && d.init(a) ? d : null;
  };
})();
cc.KEYBOARD_RETURNTYPE_DEFAULT = 0;
cc.KEYBOARD_RETURNTYPE_DONE = 1;
cc.KEYBOARD_RETURNTYPE_SEND = 2;
cc.KEYBOARD_RETURNTYPE_SEARCH = 3;
cc.KEYBOARD_RETURNTYPE_GO = 4;
cc.EDITBOX_INPUT_MODE_ANY = 0;
cc.EDITBOX_INPUT_MODE_EMAILADDR = 1;
cc.EDITBOX_INPUT_MODE_NUMERIC = 2;
cc.EDITBOX_INPUT_MODE_PHONENUMBER = 3;
cc.EDITBOX_INPUT_MODE_URL = 4;
cc.EDITBOX_INPUT_MODE_DECIMAL = 5;
cc.EDITBOX_INPUT_MODE_SINGLELINE = 6;
cc.EDITBOX_INPUT_FLAG_PASSWORD = 0;
cc.EDITBOX_INPUT_FLAG_SENSITIVE = 1;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD = 2;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE = 3;
cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS = 4;
cc.EditBoxDelegate = cc.Class.extend({
  editBoxEditingDidBegin: function (a) {},
  editBoxEditingDidEnd: function (a) {},
  editBoxTextChanged: function (a, b) {},
  editBoxReturn: function (a) {},
});
cc.EditBox = cc.Node.extend({
  _backgroundSprite: null,
  _delegate: null,
  _editBoxInputMode: cc.EDITBOX_INPUT_MODE_ANY,
  _editBoxInputFlag: cc.EDITBOX_INPUT_FLAG_SENSITIVE,
  _keyboardReturnType: cc.KEYBOARD_RETURNTYPE_DEFAULT,
  _maxLength: 50,
  _text: "",
  _textColor: null,
  _placeholderText: "",
  _placeholderFontName: "",
  _placeholderFontSize: 14,
  _placeholderColor: null,
  _className: "EditBox",
  _touchListener: null,
  _touchEnabled: !0,
  ctor: function (a, b) {
    cc.Node.prototype.ctor.call(this);
    this._anchorPoint = cc.p(0.5, 0.5);
    this._textColor = cc.color.WHITE;
    this._placeholderColor = cc.color.GRAY;
    this._renderCmd._createLabels();
    this.createDomElementIfNeeded();
    this.initWithSizeAndBackgroundSprite(a, b);
    this._touchListener = cc.EventListener.create({
      event: cc.EventListener.TOUCH_ONE_BY_ONE,
      swallowTouches: !0,
      onTouchBegan: this._onTouchBegan.bind(this),
      onTouchEnded: this._onTouchEnded.bind(this),
    });
    cc.eventManager.addListener(this._touchListener, this);
    this.setInputFlag(this._editBoxInputFlag);
  },
  setTouchEnabled: function (a) {
    this._touchEnabled !== a &&
      ((this._touchEnabled = a)
        ? cc.eventManager.addListener(this._touchListener, this)
        : cc.eventManager.removeListener(this._touchListener));
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.EditBox.CanvasRenderCmd(this)
      : new cc.EditBox.WebGLRenderCmd(this);
  },
  setContentSize: function (a, b) {
    void 0 !== a.width &&
      void 0 !== a.height &&
      ((b = a.height), (a = a.width));
    cc.Node.prototype.setContentSize.call(this, a, b);
    this._updateEditBoxSize(a, b);
  },
  setVisible: function (a) {
    cc.Node.prototype.setVisible.call(this, a);
    this._renderCmd.updateVisibility();
  },
  createDomElementIfNeeded: function () {
    this._renderCmd._edTxt || this._renderCmd._createDomTextArea();
  },
  setTabIndex: function (a) {
    this._renderCmd._edTxt && (this._renderCmd._edTxt.tabIndex = a);
  },
  getTabIndex: function () {
    if (this._renderCmd._edTxt) return this._renderCmd._edTxt.tabIndex;
    cc.warn("The dom control is not created!");
    return -1;
  },
  setFocus: function () {
    this._renderCmd._edTxt && this._renderCmd._edTxt.focus();
  },
  isFocused: function () {
    if (this._renderCmd._edTxt)
      return document.activeElement === this._renderCmd._edTxt;
    cc.warn("The dom control is not created!");
    return !1;
  },
  stayOnTop: function (a) {
    this._alwaysOnTop !== a &&
      ((this._alwaysOnTop = a), this._renderCmd.stayOnTop(this._alwaysOnTop));
  },
  cleanup: function () {
    this._super();
    this._renderCmd._removeDomFromGameContainer();
  },
  _isAncestorsVisible: function (a) {
    return null == a
      ? !0
      : (a = a.getParent()) && !a.isVisible()
      ? !1
      : this._isAncestorsVisible(a);
  },
  _onTouchBegan: function (a) {
    if (this.isVisible() && this._isAncestorsVisible(this)) {
      a = a.getLocation();
      var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
      if (cc.rectContainsPoint(b, this.convertToNodeSpace(a))) return !0;
      this._renderCmd._endEditing();
      return !1;
    }
  },
  _onTouchEnded: function () {
    this.isVisible() &&
      this._isAncestorsVisible(this) &&
      this._renderCmd._beginEditing();
  },
  _updateBackgroundSpriteSize: function (a, b) {
    this._backgroundSprite && this._backgroundSprite.setContentSize(a, b);
  },
  _updateEditBoxSize: function (a, b) {
    var d = "number" === typeof a.width ? a.width : a,
      e = "number" === typeof a.height ? a.height : b;
    this._updateBackgroundSpriteSize(d, e);
    this._renderCmd.updateSize(d, e);
  },
  setLineHeight: function (a) {
    this._renderCmd.setLineHeight(a);
  },
  setFont: function (a, b) {
    this._renderCmd.setFont(a, b);
  },
  _setFont: function (a) {
    this._renderCmd._setFont(a);
  },
  getBackgroundSprite: function () {
    return this._backgroundSprite;
  },
  setFontName: function (a) {
    this._renderCmd.setFontName(a);
  },
  setFontSize: function (a) {
    this._renderCmd.setFontSize(a);
  },
  setString: function (a) {
    a.length >= this._maxLength && (a = a.slice(0, this._maxLength));
    this._text = a;
    this._renderCmd.setString(a);
  },
  setFontColor: function (a) {
    this._textColor = a;
    this._renderCmd.setFontColor(a);
  },
  setMaxLength: function (a) {
    isNaN(a) ||
      (0 > a && (a = 65535),
      (this._maxLength = a),
      this._renderCmd.setMaxLength(a));
  },
  getMaxLength: function () {
    return this._maxLength;
  },
  setPlaceHolder: function (a) {
    null !== a &&
      (this._renderCmd.setPlaceHolder(a), (this._placeholderText = a));
  },
  setPlaceholderFont: function (a, b) {
    this._placeholderFontName = a;
    this._placeholderFontSize = b;
    this._renderCmd._updateDOMPlaceholderFontStyle();
  },
  _setPlaceholderFont: function (a) {
    if ((a = cc.LabelTTF._fontStyleRE.exec(a)))
      (this._placeholderFontName = a[2]),
        (this._placeholderFontSize = parseInt(a[1])),
        this._renderCmd._updateDOMPlaceholderFontStyle();
  },
  setPlaceholderFontName: function (a) {
    this._placeholderFontName = a;
    this._renderCmd._updateDOMPlaceholderFontStyle();
  },
  setPlaceholderFontSize: function (a) {
    this._placeholderFontSize = a;
    this._renderCmd._updateDOMPlaceholderFontStyle();
  },
  setPlaceholderFontColor: function (a) {
    this._placeholderColor = a;
    this._renderCmd.setPlaceholderFontColor(a);
  },
  setInputFlag: function (a) {
    this._editBoxInputFlag = a;
    this._renderCmd.setInputFlag(a);
  },
  getString: function () {
    return this._text;
  },
  initWithSizeAndBackgroundSprite: function (a, b) {
    this._backgroundSprite && this._backgroundSprite.removeFromParent();
    this._backgroundSprite = b;
    this.setContentSize(a);
    this._backgroundSprite &&
      !this._backgroundSprite.parent &&
      (this._backgroundSprite.setAnchorPoint(cc.p(0, 0)),
      this.addChild(this._backgroundSprite),
      this._updateBackgroundSpriteSize(a.width, a.height));
    this.y = this.x = 0;
    return !0;
  },
  setDelegate: function (a) {
    this._delegate = a;
  },
  getPlaceHolder: function () {
    return this._placeholderText;
  },
  setInputMode: function (a) {
    if (this._editBoxInputMode !== a) {
      var b = this.getString();
      this._editBoxInputMode = a;
      this._renderCmd.setInputMode(a);
      this._renderCmd.transform();
      this.setString(b);
      this._renderCmd._updateLabelPosition(this.getContentSize());
    }
  },
  setReturnType: function (a) {
    this._keyboardReturnType = a;
    this._renderCmd._updateDomInputType();
  },
  initWithBackgroundColor: function (a, b) {
    this._edWidth = a.width;
    this.dom.style.width = this._edWidth.toString() + "px";
    this._edHeight = a.height;
    this.dom.style.height = this._edHeight.toString() + "px";
    this.dom.style.backgroundColor = cc.colorToHex(b);
  },
});
_p = cc.EditBox.prototype;
cc.defineGetterSetter(_p, "font", null, _p._setFont);
cc.defineGetterSetter(_p, "fontName", null, _p.setFontName);
cc.defineGetterSetter(_p, "fontSize", null, _p.setFontSize);
cc.defineGetterSetter(_p, "fontColor", null, _p.setFontColor);
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "maxLength", _p.getMaxLength, _p.setMaxLength);
cc.defineGetterSetter(_p, "placeholder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.defineGetterSetter(_p, "placeholderFont", null, _p._setPlaceholderFont);
cc.defineGetterSetter(
  _p,
  "placeholderFontName",
  null,
  _p.setPlaceholderFontName
);
cc.defineGetterSetter(
  _p,
  "placeholderFontSize",
  null,
  _p.setPlaceholderFontSize
);
cc.defineGetterSetter(
  _p,
  "placeholderFontColor",
  null,
  _p.setPlaceholderFontColor
);
cc.defineGetterSetter(_p, "inputFlag", null, _p.setInputFlag);
cc.defineGetterSetter(_p, "delegate", null, _p.setDelegate);
cc.defineGetterSetter(_p, "inputMode", null, _p.setInputMode);
cc.defineGetterSetter(_p, "returnType", null, _p.setReturnType);
_p = null;
cc.EditBox.create = function (a, b, d, e) {
  return new cc.EditBox(a, b, d, e);
};
(function (a) {
  a._polyfill = { zoomInvalid: !1 };
  cc.sys.OS_ANDROID !== cc.sys.os ||
    (cc.sys.browserType !== cc.sys.BROWSER_TYPE_SOUGOU &&
      cc.sys.browserType !== cc.sys.BROWSER_TYPE_360) ||
    (a._polyfill.zoomInvalid = !0);
})(cc.EditBox);
(function (a) {
  function b(a) {
    var b = a.convertToWorldSpace(cc.p(0, 0)),
      f = cc.visibleRect.height,
      g = 0.5;
    cc.visibleRect.width > f && (g = 0.7);
    setTimeout(function () {
      if (window.scrollY < d && b.y < f * g) {
        var a = f * g - b.y - window.scrollY;
        35 > a && (a = 35);
        320 < a && (a = 320);
        window.scrollTo(a, a);
      }
    }, e);
  }
  var d = 40,
    e = 400,
    f = function (a) {
      return a.replace(/(?:^|\s)\S/g, function (a) {
        return a.toUpperCase();
      });
    },
    g = (function () {}.prototype = Object.create(Object.prototype));
  g.updateMatrix = function () {
    if (this._edTxt) {
      var b = this._node,
        d = cc.view._scaleX,
        e = cc.view._scaleY,
        f = cc.view._devicePixelRatio,
        g = this._worldTransform,
        d = d / f,
        e = e / f,
        h = cc.game.container,
        f = g.a * d,
        u = g.b,
        v = g.c,
        t = g.d * e,
        w = h && h.style.paddingLeft && parseInt(h.style.paddingLeft),
        h = h && h.style.paddingBottom && parseInt(h.style.paddingBottom),
        d = g.tx * d + w,
        e = g.ty * e + h;
      a.zoomInvalid &&
        (this.updateSize(b._contentSize.width * f, b._contentSize.height * t),
        (t = f = 1));
      b =
        "matrix(" +
        f +
        "," +
        -u +
        "," +
        -v +
        "," +
        t +
        "," +
        d +
        "," +
        -e +
        ")";
      this._edTxt.style.transform = b;
      this._edTxt.style["-webkit-transform"] = b;
      this._edTxt.style["transform-origin"] = "0px 100% 0px";
      this._edTxt.style["-webkit-transform-origin"] = "0px 100% 0px";
    }
  };
  g.updateVisibility = function () {
    this._edTxt &&
      (this._edTxt.style.visibility = this._node.visible
        ? "visible"
        : "hidden");
  };
  g.stayOnTop = function (a) {
    a
      ? (this._removeLabels(), (this._edTxt.style.display = ""))
      : (this._createLabels(),
        (this._edTxt.style.display = "none"),
        this._showLabels());
  };
  g._beginEditingOnMobile = function (a) {
    this.__orientationChanged = function () {
      b(a);
    };
    window.addEventListener("orientationchange", this.__orientationChanged);
    cc.view.isAutoFullScreenEnabled()
      ? ((this.__fullscreen = !0),
        cc.view.enableAutoFullScreen(!1),
        cc.screen.exitFullScreen())
      : (this.__fullscreen = !1);
    this.__autoResize = cc.view.__resizeWithBrowserSize;
    cc.view.resizeWithBrowserSize(!1);
  };
  g._endEditingOnMobile = function () {
    if (this.__rotateScreen) {
      var a = cc.game.container.style;
      a["-webkit-transform"] = "rotate(90deg)";
      a.transform = "rotate(90deg)";
      var a = cc.view,
        b = a._originalDesignResolutionSize.width,
        d = a._originalDesignResolutionSize.height;
      0 < b && a.setDesignResolutionSize(b, d, a._resolutionPolicy);
      this.__rotateScreen = !1;
    }
    window.removeEventListener("orientationchange", this.__orientationChanged);
    window.scrollTo(0, 0);
    this.__fullscreen && cc.view.enableAutoFullScreen(!0);
    this.__autoResize && cc.view.resizeWithBrowserSize(!0);
  };
  g._onFocusOnMobile = function (a) {
    if (cc.view._isRotated) {
      var d = cc.game.container.style;
      d["-webkit-transform"] = "rotate(0deg)";
      d.transform = "rotate(0deg)";
      d.margin = "0px";
      window.scrollTo(35, 35);
      this.__rotateScreen = !0;
    } else this.__rotateScreen = !1;
    b(a);
  };
  g._createDomInput = function () {
    this._removeDomFromGameContainer();
    var a = this,
      b = (this._edTxt = document.createElement("input"));
    b.type = "text";
    b.style.fontFamily = this._edFontName;
    b.style.fontSize = this._edFontSize + "px";
    b.style.color = "#000000";
    b.style.border = 0;
    b.style.background = "transparent";
    b.style.width = "100%";
    b.style.height = "100%";
    b.style.active = 0;
    b.style.outline = "medium";
    b.style.padding = "0";
    b.style.textTransform = "uppercase";
    b.style.display = "none";
    b.style.position = "absolute";
    b.style.bottom = "0px";
    b.style.left = "2px";
    b.style.className = "cocosEditBox";
    this.setMaxLength(a._editBox._maxLength);
    b.addEventListener("input", function () {
      var b = a._editBox;
      this.value.length > this.maxLength &&
        (this.value = this.value.slice(0, this.maxLength));
      b._delegate &&
        b._delegate.editBoxTextChanged &&
        b._text !== this.value &&
        ((b._text = this.value),
        a._updateDomTextCases(),
        b._delegate.editBoxTextChanged(b, b._text));
    });
    b.addEventListener("keypress", function (b) {
      var d = a._editBox;
      b.keyCode === cc.KEY.enter &&
        (b.stopPropagation(),
        b.preventDefault(),
        "" === this.value &&
          ((this.style.fontSize = d._placeholderFontSize + "px"),
          (this.style.color = cc.colorToHex(d._placeholderColor))),
        (d._text = this.value),
        a._updateDomTextCases(),
        a._endEditing(),
        d._delegate &&
          d._delegate.editBoxReturn &&
          d._delegate.editBoxReturn(d),
        cc._canvas.focus());
    });
    b.addEventListener("focus", function () {
      var b = a._editBox;
      this.style.fontSize = a._edFontSize + "px";
      this.style.color = cc.colorToHex(b._textColor);
      a._hiddenLabels();
      cc.sys.isMobile && a._onFocusOnMobile(b);
      b._delegate &&
        b._delegate.editBoxEditingDidBegin &&
        b._delegate.editBoxEditingDidBegin(b);
    });
    b.addEventListener("blur", function () {
      var b = a._editBox;
      b._text = this.value;
      a._updateDomTextCases();
      b._delegate &&
        b._delegate.editBoxEditingDidEnd &&
        b._delegate.editBoxEditingDidEnd(b);
      "" === this.value &&
        ((this.style.fontSize = b._placeholderFontSize + "px"),
        (this.style.color = cc.colorToHex(b._placeholderColor)));
      a._endEditing();
    });
    this._addDomToGameContainer();
    return b;
  };
  g._createDomTextArea = function () {
    this._removeDomFromGameContainer();
    var a = this,
      b = (this._edTxt = document.createElement("textarea"));
    b.type = "text";
    b.style.fontFamily = this._edFontName;
    b.style.fontSize = this._edFontSize + "px";
    b.style.color = "#000000";
    b.style.border = 0;
    b.style.background = "transparent";
    b.style.width = "100%";
    b.style.height = "100%";
    b.style.active = 0;
    b.style.outline = "medium";
    b.style.padding = "0";
    b.style.resize = "none";
    b.style.textTransform = "uppercase";
    b.style.overflow_y = "scroll";
    b.style.display = "none";
    b.style.position = "absolute";
    b.style.bottom = "0px";
    b.style.left = "2px";
    b.style.className = "cocosEditBox";
    this.setMaxLength(a._editBox._maxLength);
    b.addEventListener("input", function () {
      this.value.length > this.maxLength &&
        (this.value = this.value.slice(0, this.maxLength));
      var b = a._editBox;
      b._delegate &&
        b._delegate.editBoxTextChanged &&
        b._text.toLowerCase() !== this.value.toLowerCase() &&
        ((b._text = this.value),
        a._updateDomTextCases(),
        b._delegate.editBoxTextChanged(b, b._text));
    });
    b.addEventListener("focus", function () {
      var b = a._editBox;
      a._hiddenLabels();
      this.style.fontSize = a._edFontSize + "px";
      this.style.color = cc.colorToHex(b._textColor);
      cc.sys.isMobile && a._onFocusOnMobile(b);
      b._delegate &&
        b._delegate.editBoxEditingDidBegin &&
        b._delegate.editBoxEditingDidBegin(b);
    });
    b.addEventListener("keypress", function (b) {
      var d = a._editBox;
      b.keyCode === cc.KEY.enter &&
        (b.stopPropagation(),
        d._delegate &&
          d._delegate.editBoxReturn &&
          d._delegate.editBoxReturn(d));
    });
    b.addEventListener("blur", function () {
      var b = a._editBox;
      b._text = this.value;
      a._updateDomTextCases();
      b._delegate &&
        b._delegate.editBoxEditingDidEnd &&
        b._delegate.editBoxEditingDidEnd(b);
      "" === this.value &&
        ((this.style.fontSize = b._placeholderFontSize + "px"),
        (this.style.color = cc.colorToHex(b._placeholderColor)));
      a._endEditing();
    });
    this._addDomToGameContainer();
    return b;
  };
  g._createLabels = function () {
    var a = this._editBox.getContentSize();
    this._textLabel ||
      ((this._textLabel = new cc.LabelTTF()),
      this._textLabel.setAnchorPoint(cc.p(0, 1)),
      this._editBox.addChild(this._textLabel, 100));
    this._placeholderLabel ||
      ((this._placeholderLabel = new cc.LabelTTF()),
      this._placeholderLabel.setAnchorPoint(cc.p(0, 1)),
      this._placeholderLabel.setColor(cc.color.GRAY),
      this._editBox.addChild(this._placeholderLabel, 100));
    this._updateLabelPosition(a);
  };
  g._removeLabels = function () {
    this._textLabel &&
      (this._editBox.removeChild(this._textLabel), (this._textLabel = null));
  };
  g._updateLabelPosition = function (a) {
    if (this._textLabel && this._placeholderLabel) {
      var b = cc.size(a.width - 2, a.height);
      this._textLabel.setContentSize(b);
      this._textLabel.setDimensions(b);
      this._placeholderLabel.setLineHeight(a.height);
      b = this._placeholderLabel.getContentSize();
      this._editBox._editBoxInputMode === cc.EDITBOX_INPUT_MODE_ANY
        ? (this._textLabel.setPosition(2, a.height),
          this._placeholderLabel.setPosition(2, a.height),
          this._placeholderLabel.setVerticalAlignment(
            cc.VERTICAL_TEXT_ALIGNMENT_TOP
          ),
          this._textLabel.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP))
        : (this._textLabel.setPosition(2, a.height),
          this._placeholderLabel.setPosition(2, (a.height + b.height) / 2),
          this._placeholderLabel.setVerticalAlignment(
            cc.VERTICAL_TEXT_ALIGNMENT_CENTER
          ),
          this._textLabel.setVerticalAlignment(
            cc.VERTICAL_TEXT_ALIGNMENT_CENTER
          ));
    }
  };
  g.setLineHeight = function (a) {
    this._textLabel && this._textLabel.setLineHeight(a);
  };
  g._hiddenLabels = function () {
    this._textLabel && this._textLabel.setVisible(!1);
    this._placeholderLabel && this._placeholderLabel.setVisible(!1);
  };
  g._updateDomTextCases = function () {
    var a = this._editBox._editBoxInputFlag;
    if (a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS)
      this._editBox._text = this._editBox._text.toUpperCase();
    else if (a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD)
      this._editBox._text = f(this._editBox._text);
    else if (a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_SENTENCE) {
      var a = this._editBox,
        b;
      b = this._editBox._text;
      b = b.charAt(0).toUpperCase() + b.slice(1);
      a._text = b;
    }
  };
  g._updateLabelStringStyle = function () {
    if ("password" === this._edTxt.type) {
      for (var a = "", b = this._editBox._text.length, d = 0; d < b; ++d)
        a += "\u25cf";
      this._textLabel && this._textLabel.setString(a);
    } else
      this._updateDomTextCases(),
        this._textLabel && this._textLabel.setString(this._editBox._text);
  };
  g._showLabels = function () {
    this._hiddenLabels();
    "" === this._edTxt.value
      ? this._placeholderLabel &&
        (this._placeholderLabel.setVisible(!0),
        this._placeholderLabel.setString(this._editBox._placeholderText))
      : this._textLabel &&
        (this._textLabel.setVisible(!0),
        this._textLabel.setString(this._editBox._text));
    this._updateLabelStringStyle();
  };
  g._beginEditing = function () {
    this._editBox._alwaysOnTop ||
      "none" !== this._edTxt.style.display ||
      ((this._edTxt.style.display = ""), this._edTxt.focus());
    cc.sys.isMobile &&
      !this._editingMode &&
      this._beginEditingOnMobile(this._editBox);
    this._editingMode = !0;
  };
  g._endEditing = function () {
    this._editBox._alwaysOnTop || (this._edTxt.style.display = "none");
    this._showLabels();
    if (cc.sys.isMobile && this._editingMode) {
      var a = this;
      setTimeout(function () {
        a._endEditingOnMobile();
      }, e);
    }
    this._editingMode = !1;
  };
  g._setFont = function (a) {
    a = cc.LabelTTF._fontStyleRE.exec(a);
    var b = a[2],
      d = parseInt(a[1]);
    a && this.setFont(b, d);
  };
  g.setFont = function (a, b) {
    this._edFontName = a || this._edFontName;
    this._edFontSize = b || this._edFontSize;
    this._updateDOMFontStyle();
  };
  g.setFontName = function (a) {
    this._edFontName = a || this._edFontName;
    this._updateDOMFontStyle();
  };
  g.setFontSize = function (a) {
    this._edFontSize = a || this._edFontSize;
    this._updateDOMFontStyle();
  };
  g.setFontColor = function (a) {
    this._edTxt &&
      (this._edTxt.value !== this._editBox._placeholderText &&
        (this._edTxt.style.color = cc.colorToHex(a)),
      this._textLabel && this._textLabel.setColor(a));
  };
  g.setPlaceHolder = function (a) {
    this._placeholderLabel.setString(a);
  };
  g.setMaxLength = function (a) {
    this._edTxt && (this._edTxt.maxLength = a);
  };
  g._updateDOMPlaceholderFontStyle = function () {
    this._placeholderLabel.setFontName(this._editBox._placeholderFontName);
    this._placeholderLabel.setFontSize(this._editBox._placeholderFontSize);
  };
  g.setPlaceholderFontColor = function (a) {
    this._placeholderLabel.setColor(a);
  };
  g._updateDomInputType = function () {
    var a = this._editBox._editBoxInputMode;
    a === cc.EDITBOX_INPUT_MODE_EMAILADDR
      ? (this._edTxt.type = "email")
      : a === cc.EDITBOX_INPUT_MODE_DECIMAL ||
        a === cc.EDITBOX_INPUT_MODE_NUMERIC
      ? (this._edTxt.type = "number")
      : a === cc.EDITBOX_INPUT_MODE_PHONENUMBER
      ? ((this._edTxt.type = "number"), (this._edTxt.pattern = "[0-9]*"))
      : a === cc.EDITBOX_INPUT_MODE_URL
      ? (this._edTxt.type = "url")
      : ((this._edTxt.type = "text"),
        this._editBox._keyboardReturnType === cc.KEYBOARD_RETURNTYPE_SEARCH &&
          (this._edTxt.type = "search"));
    this._editBox._editBoxInputFlag === cc.EDITBOX_INPUT_FLAG_PASSWORD &&
      (this._edTxt.type = "password");
  };
  g.setInputFlag = function (a) {
    this._edTxt &&
      (this._updateDomInputType(),
      (this._edTxt.style.textTransform = "none"),
      a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_ALL_CHARACTERS
        ? (this._edTxt.style.textTransform = "uppercase")
        : a === cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD &&
          (this._edTxt.style.textTransform = "capitalize"),
      this._updateLabelStringStyle());
  };
  g.setInputMode = function (a) {
    a === cc.EDITBOX_INPUT_MODE_ANY
      ? this._createDomTextArea()
      : this._createDomInput();
    this._updateDomInputType();
    a = this._node.getContentSize();
    this.updateSize(a.width, a.height);
  };
  g.setString = function (a) {
    this._edTxt &&
      null !== a &&
      ((this._edTxt.value = a),
      "" === a
        ? (this._placeholderLabel &&
            (this._placeholderLabel.setString(this._editBox._placeholderText),
            this._placeholderLabel.setColor(this._editBox._placeholderColor)),
          this._editingMode ||
            (this._placeholderLabel && this._placeholderLabel.setVisible(!0),
            this._textLabel && this._textLabel.setVisible(!1)))
        : ((this._edTxt.style.color = cc.colorToHex(this._editBox._textColor)),
          this._textLabel && this._textLabel.setColor(this._editBox._textColor),
          this._editingMode ||
            (this._placeholderLabel && this._placeholderLabel.setVisible(!1),
            this._textLabel && this._textLabel.setVisible(!0)),
          this._updateLabelStringStyle()));
  };
  g._updateDOMFontStyle = function () {
    this._edTxt &&
      ("" !== this._edTxt.value &&
        ((this._edTxt.style.fontFamily = this._edFontName),
        (this._edTxt.style.fontSize = this._edFontSize + "px")),
      this._textLabel &&
        (this._textLabel.setFontSize(this._edFontSize),
        this._textLabel.setFontName(this._edFontName)));
  };
  g.updateSize = function (a, b) {
    var d = this._edTxt;
    d &&
      ((d.style.width = a + "px"),
      (d.style.height = b + "px"),
      this._updateLabelPosition(cc.size(a, b)));
  };
  g._addDomToGameContainer = function () {
    cc.game.container.appendChild(this._edTxt);
  };
  g._removeDomFromGameContainer = function () {
    var a = this._edTxt;
    if (a) {
      var b = !1;
      (b =
        "contains" in cc.game.container
          ? cc.game.container.contains(a)
          : cc.game.container.compareDocumentPosition(a) % 16) &&
        cc.game.container.removeChild(a);
    }
    this._edTxt = null;
  };
  g.initializeRenderCmd = function (a) {
    this._editBox = a;
    this._edFontSize = 14;
    this._edFontName = "Arial";
    this._placeholderLabel = this._textLabel = null;
    this.__rotateScreen = this.__autoResize = this.__fullscreen = this._editingMode = !1;
    this.__orientationChanged = null;
  };
  cc.EditBox.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this.initializeRenderCmd(a);
  };
  var h = (cc.EditBox.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  cc.inject(g, h);
  h.constructor = cc.EditBox.CanvasRenderCmd;
  h.transform = function (a, b) {
    this.originTransform(a, b);
    this.updateMatrix();
  };
  cc.EditBox.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this.initializeRenderCmd(a);
  };
  h = cc.EditBox.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  );
  cc.inject(g, h);
  h.constructor = cc.EditBox.WebGLRenderCmd;
  h.transform = function (a, b) {
    this.originTransform(a, b);
    this.updateMatrix();
  };
})(cc.EditBox._polyfill);
cc.ProtectedNode = cc.Node.extend({
  _protectedChildren: null,
  _reorderProtectedChildDirty: !1,
  _insertProtectedChild: function (a, b) {
    this._reorderProtectedChildDirty = !0;
    this._protectedChildren.push(a);
    a._setLocalZOrder(b);
  },
  ctor: function () {
    cc.Node.prototype.ctor.call(this);
    this._protectedChildren = [];
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      a = cc.renderer;
      var e = this._children,
        f = e.length,
        g,
        h = this._protectedChildren,
        k = h.length,
        m;
      b.visit(d);
      var n = this.grid;
      n && n._active && n.beforeDraw();
      this._reorderChildDirty && this.sortAllChildren();
      this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
      for (d = 0; d < f; d++)
        if (((g = e[d]), 0 > g._localZOrder)) g.visit(this);
        else break;
      for (g = 0; g < k; g++)
        if ((m = h[g]) && 0 > m._localZOrder)
          b._changeProtectedChild(m), m.visit(this);
        else break;
      for (a.pushRenderCommand(b); d < f; d++) e[d].visit(this);
      for (; g < k; g++)
        if ((m = h[g])) b._changeProtectedChild(m), m.visit(this);
      n && n._active && n.afterDraw(this);
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  addProtectedChild: function (a, b, d) {
    cc.assert(null != a, "child must be non-nil");
    cc.assert(!a.parent, "child already added. It can't be added again");
    b = b || a.getLocalZOrder();
    d && a.setTag(d);
    this._insertProtectedChild(a, b);
    a.setParent(this);
    a.setOrderOfArrival(cc.s_globalOrderOfArrival);
    this._running &&
      (a._performRecursive(cc.Node._stateCallbackType.onEnter),
      this._isTransitionFinished &&
        a._performRecursive(
          cc.Node._stateCallbackType.onEnterTransitionDidFinish
        ));
    this._cascadeColorEnabled && this._renderCmd.setCascadeColorEnabledDirty();
    this._cascadeOpacityEnabled &&
      this._renderCmd.setCascadeOpacityEnabledDirty();
  },
  getProtectedChildByTag: function (a) {
    cc.assert(a !== cc.NODE_TAG_INVALID, "Invalid tag");
    for (var b = this._protectedChildren, d = 0, e = b.length; d < e; d++)
      if (b.getTag() === a) return b[d];
    return null;
  },
  removeProtectedChild: function (a, b) {
    null == b && (b = !0);
    var d = this._protectedChildren;
    if (0 !== d.length) {
      var e = d.indexOf(a);
      -1 < e &&
        (this._running &&
          (a._performRecursive(
            cc.Node._stateCallbackType.onExitTransitionDidStart
          ),
          a._performRecursive(cc.Node._stateCallbackType.onExit)),
        b && a._performRecursive(cc.Node._stateCallbackType.cleanup),
        a.setParent(null),
        d.splice(e, 1));
    }
  },
  removeProtectedChildByTag: function (a, b) {
    cc.assert(a !== cc.NODE_TAG_INVALID, "Invalid tag");
    null == b && (b = !0);
    var d = this.getProtectedChildByTag(a);
    null == d
      ? cc.log("cocos2d: removeChildByTag(tag \x3d %d): child not found!", a)
      : this.removeProtectedChild(d, b);
  },
  removeAllProtectedChildren: function () {
    this.removeAllProtectedChildrenWithCleanup(!0);
  },
  removeAllProtectedChildrenWithCleanup: function (a) {
    null == a && (a = !0);
    for (var b = this._protectedChildren, d = 0, e = b.length; d < e; d++) {
      var f = b[d];
      this._running &&
        (f._performRecursive(
          cc.Node._stateCallbackType.onExitTransitionDidStart
        ),
        f._performRecursive(cc.Node._stateCallbackType.onExit));
      a && f._performRecursive(cc.Node._stateCallbackType.cleanup);
      f.setParent(null);
    }
    b.length = 0;
  },
  reorderProtectedChild: function (a, b) {
    cc.assert(null != a, "Child must be non-nil");
    this._reorderProtectedChildDirty = !0;
    a.setOrderOfArrival(cc.s_globalOrderOfArrival++);
    a._setLocalZOrder(b);
  },
  sortAllProtectedChildren: function () {
    if (this._reorderProtectedChildDirty) {
      var a = this._protectedChildren,
        b,
        d,
        e = a.length,
        f;
      for (b = 1; b < e; b++) {
        f = a[b];
        for (d = b - 1; 0 <= d; ) {
          if (f._localZOrder < a[d]._localZOrder) a[d + 1] = a[d];
          else if (
            f._localZOrder === a[d]._localZOrder &&
            f.arrivalOrder < a[d].arrivalOrder
          )
            a[d + 1] = a[d];
          else break;
          d--;
        }
        a[d + 1] = f;
      }
      this._reorderProtectedChildDirty = !1;
    }
  },
  _changePosition: function () {},
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new cc.ProtectedNode.CanvasRenderCmd(this)
      : new cc.ProtectedNode.WebGLRenderCmd(this);
  },
});
cc.ProtectedNode.create = function () {
  return new cc.ProtectedNode();
};
(function () {
  cc.ProtectedNode.RenderCmd = {
    _updateDisplayColor: function (a) {
      var d = this._node,
        e = this._displayedColor,
        f = d._realColor,
        g,
        h;
      if (this._cascadeColorEnabledDirty && !d._cascadeColorEnabled) {
        e.r = f.r;
        e.g = f.g;
        e.b = f.b;
        e = new cc.Color(255, 255, 255, 255);
        g = d._children;
        f = 0;
        for (a = g.length; f < a; f++)
          (h = g[f]) && h._renderCmd && h._renderCmd._updateDisplayColor(e);
        this._cascadeColorEnabledDirty = !1;
      } else {
        void 0 === a &&
          (a =
            (a = d._parent) && a._cascadeColorEnabled
              ? a.getDisplayedColor()
              : cc.color.WHITE);
        e.r = 0 | ((f.r * a.r) / 255);
        e.g = 0 | ((f.g * a.g) / 255);
        e.b = 0 | ((f.b * a.b) / 255);
        if (d._cascadeColorEnabled)
          for (g = d._children, f = 0, a = g.length; f < a; f++)
            (h = g[f]) &&
              h._renderCmd &&
              (h._renderCmd._updateDisplayColor(e),
              h._renderCmd._updateColor());
        g = d._protectedChildren;
        f = 0;
        for (a = g.length; f < a; f++)
          (h = g[f]) &&
            h._renderCmd &&
            (h._renderCmd._updateDisplayColor(e), h._renderCmd._updateColor());
      }
      this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.colorDirty;
    },
    _updateDisplayOpacity: function (a) {
      var d = this._node,
        e,
        f,
        g;
      if (this._cascadeOpacityEnabledDirty && !d._cascadeOpacityEnabled) {
        this._displayedOpacity = d._realOpacity;
        f = d._children;
        a = 0;
        for (e = f.length; a < e; a++)
          (g = f[a]) && g._renderCmd && g._renderCmd._updateDisplayOpacity(255);
        this._cascadeOpacityEnabledDirty = !1;
      } else {
        void 0 === a &&
          ((e = d._parent),
          (a = 255),
          e && e._cascadeOpacityEnabled && (a = e.getDisplayedOpacity()));
        this._displayedOpacity = (d._realOpacity * a) / 255;
        if (d._cascadeOpacityEnabled)
          for (f = d._children, a = 0, e = f.length; a < e; a++)
            (g = f[a]) &&
              g._renderCmd &&
              (g._renderCmd._updateDisplayOpacity(this._displayedOpacity),
              g._renderCmd._updateColor());
        f = d._protectedChildren;
        a = 0;
        for (e = f.length; a < e; a++)
          (g = f[a]) &&
            g._renderCmd &&
            (g._renderCmd._updateDisplayOpacity(this._displayedOpacity),
            g._renderCmd._updateColor());
      }
      this._dirtyFlag ^= this._dirtyFlag & cc.Node._dirtyFlags.opacityDirty;
    },
    _changeProtectedChild: function (a) {
      a = a._renderCmd;
      var d = a._dirtyFlag,
        e = cc.Node._dirtyFlags;
      this._dirtyFlag & e.colorDirty && (d |= e.colorDirty);
      this._dirtyFlag & e.opacityDirty && (d |= e.opacityDirty);
      var f = d & e.colorDirty,
        d = d & e.opacityDirty;
      f && a._updateDisplayColor(this._displayedColor);
      d && a._updateDisplayOpacity(this._displayedOpacity);
      (f || d) && a._updateColor();
    },
  };
  cc.ProtectedNode.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._cachedParent = null;
    this._cacheDirty = !1;
  };
  var a = (cc.ProtectedNode.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  cc.inject(cc.ProtectedNode.RenderCmd, a);
  a.constructor = cc.ProtectedNode.CanvasRenderCmd;
  a._pNodeCmdCtor = cc.ProtectedNode.CanvasRenderCmd;
  a.transform = function (a, d) {
    var e = this._node;
    e._changePosition && e._changePosition();
    this.originTransform(a, d);
    var f,
      g = e._protectedChildren;
    if (d && g && 0 !== g.length)
      for (e = 0, f = g.length; e < f; e++) g[e]._renderCmd.transform(this, d);
  };
  a.pNodeTransform = a.transform;
})();
(function () {
  if (cc.Node.WebGLRenderCmd) {
    cc.ProtectedNode.WebGLRenderCmd = function (a) {
      this._rootCtor(a);
    };
    var a = (cc.ProtectedNode.WebGLRenderCmd.prototype = Object.create(
      cc.Node.WebGLRenderCmd.prototype
    ));
    cc.inject(cc.ProtectedNode.RenderCmd, a);
    a.constructor = cc.ProtectedNode.WebGLRenderCmd;
    a._pNodeCmdCtor = cc.ProtectedNode.WebGLRenderCmd;
    a.transform = function (a, d) {
      this.originTransform(a, d);
      var e,
        f,
        g = this._node._protectedChildren;
      if (d && g && 0 !== g.length)
        for (e = 0, f = g.length; e < f; e++)
          g[e]._renderCmd.transform(this, d);
    };
    a.pNodeTransform = a.transform;
  }
})();
var ccui = ccui || {};
ccui.Class = ccui.Class || cc.Class;
ccui.Class.extend = ccui.Class.extend || cc.Class.extend;
ccui.Node = ccui.Node || cc.Node;
ccui.Node.extend = ccui.Node.extend || cc.Node.extend;
ccui.ProtectedNode = ccui.ProtectedNode || cc.ProtectedNode;
ccui.ProtectedNode.extend =
  ccui.ProtectedNode.extend || cc.ProtectedNode.extend;
ccui.cocosGUIVersion = "CocosGUI v1.0.0.0";
ccui._FocusNavigationController = cc.Class.extend({
  _keyboardListener: null,
  _firstFocusedWidget: null,
  _enableFocusNavigation: !1,
  _keyboardEventPriority: 1,
  enableFocusNavigation: function (a) {
    this._enableFocusNavigation !== a &&
      ((this._enableFocusNavigation = a)
        ? this._addKeyboardEventListener()
        : this._removeKeyboardEventListener());
  },
  _setFirstFocsuedWidget: function (a) {
    this._firstFocusedWidget = a;
  },
  _onKeyPressed: function (a, b) {
    this._enableFocusNavigation &&
      this._firstFocusedWidget &&
      (a === cc.KEY.dpadDown &&
        (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(
          ccui.Widget.DOWN,
          this._firstFocusedWidget
        )),
      a === cc.KEY.dpadUp &&
        (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(
          ccui.Widget.UP,
          this._firstFocusedWidget
        )),
      a === cc.KEY.dpadLeft &&
        (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(
          ccui.Widget.LEFT,
          this._firstFocusedWidget
        )),
      a === cc.KEY.dpadRight &&
        (this._firstFocusedWidget = this._firstFocusedWidget.findNextFocusedWidget(
          ccui.Widget.RIGHT,
          this._firstFocusedWidget
        )));
  },
  _addKeyboardEventListener: function () {
    this._keyboardListener ||
      ((this._keyboardListener = cc.EventListener.create({
        event: cc.EventListener.KEYBOARD,
        onKeyReleased: this._onKeyPressed.bind(this),
      })),
      cc.eventManager.addListener(
        this._keyboardListener,
        this._keyboardEventPriority
      ));
  },
  _removeKeyboardEventListener: function () {
    this._keyboardListener &&
      (cc.eventManager.removeEventListener(this._keyboardListener),
      (this._keyboardListener = null));
  },
});
ccui.__LAYOUT_COMPONENT_NAME = "__ui_layout";
ccui.Widget = ccui.ProtectedNode.extend({
  _enabled: !0,
  _bright: !0,
  _touchEnabled: !1,
  _brightStyle: null,
  _touchBeganPosition: null,
  _touchMovePosition: null,
  _touchEndPosition: null,
  _touchEventListener: null,
  _touchEventSelector: null,
  _name: "default",
  _widgetType: null,
  _actionTag: 0,
  _customSize: null,
  _layoutParameterDictionary: null,
  _layoutParameterType: 0,
  _focused: !1,
  _focusEnabled: !0,
  _ignoreSize: !1,
  _affectByClipping: !1,
  _sizeType: null,
  _sizePercent: null,
  _positionType: null,
  _positionPercent: null,
  _hit: !1,
  _nodes: null,
  _touchListener: null,
  _className: "Widget",
  _flippedX: !1,
  _flippedY: !1,
  _opacity: 255,
  _highlight: !1,
  _touchEventCallback: null,
  _clickEventListener: null,
  _propagateTouchEvents: !0,
  _unifySize: !1,
  _callbackName: null,
  _callbackType: null,
  _usingLayoutComponent: !1,
  _inViewRect: !0,
  ctor: function () {
    cc.ProtectedNode.prototype.ctor.call(this);
    this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE;
    this._touchBeganPosition = cc.p(0, 0);
    this._touchMovePosition = cc.p(0, 0);
    this._touchEndPosition = cc.p(0, 0);
    this._widgetType = ccui.Widget.TYPE_WIDGET;
    this._customSize = cc.size(0, 0);
    this._layoutParameterDictionary = {};
    this._sizeType = ccui.Widget.SIZE_ABSOLUTE;
    this._sizePercent = cc.p(0, 0);
    this._positionType = ccui.Widget.POSITION_ABSOLUTE;
    this._positionPercent = cc.p(0, 0);
    this._nodes = [];
    this._layoutParameterType = ccui.LayoutParameter.NONE;
    ccui.Widget.prototype.init.call(this);
  },
  init: function () {
    this._layoutParameterDictionary = {};
    this._initRenderer();
    this.setBright(!0);
    this.onFocusChanged = this.onFocusChange;
    this.onNextFocusedWidget = null;
    this.setAnchorPoint(cc.p(0.5, 0.5));
    this.ignoreContentAdaptWithSize(!0);
    return !0;
  },
  onEnter: function () {
    var a = this._touchListener;
    a &&
      !a._isRegistered() &&
      this._touchEnabled &&
      cc.eventManager.addListener(a, this);
    this._usingLayoutComponent || this.updateSizeAndPosition();
    this._sizeDirty && this._onSizeChanged();
    cc.ProtectedNode.prototype.onEnter.call(this);
  },
  onExit: function () {
    this.unscheduleUpdate();
    cc.ProtectedNode.prototype.onExit.call(this);
  },
  _getOrCreateLayoutComponent: function () {
    var a = this.getComponent(ccui.__LAYOUT_COMPONENT_NAME);
    null == a && ((a = new ccui.LayoutComponent()), this.addComponent(a));
    return a;
  },
  getWidgetParent: function () {
    var a = this.getParent();
    return a instanceof ccui.Widget ? a : null;
  },
  _updateContentSizeWithTextureSize: function (a) {
    this._unifySize
      ? this.setContentSize(a)
      : this.setContentSize(this._ignoreSize ? a : this._customSize);
  },
  _isAncestorsEnabled: function () {
    var a = this._getAncensterWidget(this);
    return null == a ? !0 : a && !a.isEnabled() ? !1 : a._isAncestorsEnabled();
  },
  setPropagateTouchEvents: function (a) {
    this._propagateTouchEvents = a;
  },
  isPropagateTouchEvents: function () {
    return this._propagateTouchEvents;
  },
  setSwallowTouches: function (a) {
    this._touchListener && this._touchListener.setSwallowTouches(a);
  },
  isSwallowTouches: function () {
    return this._touchListener ? this._touchListener.isSwallowTouches() : !1;
  },
  _getAncensterWidget: function (a) {
    if (null == a) return null;
    a = a.getParent();
    return null == a
      ? null
      : a instanceof ccui.Widget
      ? a
      : this._getAncensterWidget(a.getParent());
  },
  _isAncestorsVisible: function (a) {
    return null == a
      ? !0
      : (a = a.getParent()) && !a.isVisible()
      ? !1
      : this._isAncestorsVisible(a);
  },
  setEnabled: function (a) {
    this._enabled = a;
    this.setBright(a);
  },
  _initRenderer: function () {},
  setContentSize: function (a, b) {
    cc.Node.prototype.setContentSize.call(this, a, b);
    var d = this._contentSize.width,
      e = this._contentSize.height;
    this._customSize.width = d;
    this._customSize.height = e;
    !this._unifySize &&
      this._ignoreSize &&
      (this._contentSize = this.getVirtualRendererSize());
    if (!this._usingLayoutComponent && this._running) {
      var f = this.getWidgetParent(),
        f = f ? f.getContentSize() : this._parent.getContentSize();
      this._sizePercent.x = 0 < f.width ? d / f.width : 0;
      this._sizePercent.y = 0 < f.height ? e / f.height : 0;
    }
    this._running ? this._onSizeChanged() : (this._sizeDirty = !0);
  },
  _setWidth: function (a) {
    a !== this._contentSize.width &&
      (cc.Node.prototype._setWidth.call(this, a),
      (this._customSize.width = a),
      !this._unifySize &&
        this._ignoreSize &&
        (this._contentSize = this.getVirtualRendererSize()),
      !this._usingLayoutComponent &&
        this._running &&
        ((a = (a = this.getWidgetParent()) ? a.width : this._parent.width),
        (this._sizePercent.x = 0 < a ? this._customSize.width / a : 0)),
      this._running ? this._onSizeChanged() : (this._sizeDirty = !0));
  },
  _setHeight: function (a) {
    a !== this._contentSize.height &&
      (cc.Node.prototype._setHeight.call(this, a),
      (this._customSize.height = a),
      !this._unifySize &&
        this._ignoreSize &&
        (this._contentSize = this.getVirtualRendererSize()),
      !this._usingLayoutComponent &&
        this._running &&
        ((a = (a = this.getWidgetParent()) ? a.height : this._parent.height),
        (this._sizePercent.y = 0 < a ? this._customSize.height / a : 0)),
      this._running ? this._onSizeChanged() : (this._sizeDirty = !0));
  },
  setSizePercent: function (a) {
    if (this._usingLayoutComponent) {
      var b = this._getOrCreateLayoutComponent();
      b.setUsingPercentContentSize(!0);
      b.setPercentContentSize(a);
      b.refreshLayout();
    } else {
      this._sizePercent.x = a.x;
      this._sizePercent.y = a.y;
      var b = this._customSize.width,
        d = this._customSize.height;
      this._running &&
        ((d = this.getWidgetParent())
          ? ((b = d.width * a.x), (d = d.height * a.y))
          : ((b = this._parent.width * a.x), (d = this._parent.height * a.y)));
      this._ignoreSize
        ? this.setContentSize(this.getVirtualRendererSize())
        : this.setContentSize(b, d);
      this._customSize.width = b;
      this._customSize.height = d;
    }
  },
  _setWidthPercent: function (a) {
    this._sizePercent.x = a;
    var b = this._customSize.width;
    this._running &&
      ((b = this.getWidgetParent()),
      (b = (b ? b.width : this._parent.width) * a));
    this._ignoreSize
      ? this._setWidth(this.getVirtualRendererSize().width)
      : this._setWidth(b);
    this._customSize.width = b;
  },
  _setHeightPercent: function (a) {
    this._sizePercent.y = a;
    var b = this._customSize.height;
    this._running &&
      ((b = this.getWidgetParent()),
      (b = (b ? b.height : this._parent.height) * a));
    this._ignoreSize
      ? this._setHeight(this.getVirtualRendererSize().height)
      : this._setHeight(b);
    this._customSize.height = b;
  },
  updateSizeAndPosition: function (a) {
    a ||
      (a = (a = this.getWidgetParent())
        ? a.getLayoutSize()
        : this._parent.getContentSize());
    switch (this._sizeType) {
      case ccui.Widget.SIZE_ABSOLUTE:
        this._ignoreSize
          ? this.setContentSize(this.getVirtualRendererSize())
          : this.setContentSize(this._customSize);
        this._sizePercent.x =
          0 < a.width ? this._customSize.width / a.width : 0;
        this._sizePercent.y =
          0 < a.height ? this._customSize.height / a.height : 0;
        break;
      case ccui.Widget.SIZE_PERCENT:
        var b = cc.size(
          a.width * this._sizePercent.x,
          a.height * this._sizePercent.y
        );
        this._ignoreSize
          ? this.setContentSize(this.getVirtualRendererSize())
          : this.setContentSize(b);
        this._customSize.width = b.width;
        this._customSize.height = b.height;
    }
    this._onSizeChanged();
    b = this.getPosition();
    switch (this._positionType) {
      case ccui.Widget.POSITION_ABSOLUTE:
        0 >= a.width || 0 >= a.height
          ? (this._positionPercent.x = this._positionPercent.y = 0)
          : ((this._positionPercent.x = b.x / a.width),
            (this._positionPercent.y = b.y / a.height));
        break;
      case ccui.Widget.POSITION_PERCENT:
        b = cc.p(
          a.width * this._positionPercent.x,
          a.height * this._positionPercent.y
        );
    }
    if (
      this._parent instanceof ccui.ImageView &&
      (a = this._parent._imageRenderer) &&
      !a._textureLoaded
    )
      return;
    this.setPosition(b);
  },
  setSizeType: function (a) {
    this._sizeType = a;
    this._usingLayoutComponent &&
      this._getOrCreateLayoutComponent().setUsingPercentContentSize(
        this._sizeType === ccui.SIZE_PERCENT
      );
  },
  getSizeType: function () {
    return this._sizeType;
  },
  ignoreContentAdaptWithSize: function (a) {
    this._unifySize
      ? this.setContentSize(this._customSize)
      : this._ignoreSize !== a &&
        ((this._ignoreSize = a),
        this.setContentSize(
          a ? this.getVirtualRendererSize() : this._customSize
        ));
  },
  isIgnoreContentAdaptWithSize: function () {
    return this._ignoreSize;
  },
  getCustomSize: function () {
    return cc.size(this._customSize);
  },
  getLayoutSize: function () {
    return cc.size(this._contentSize);
  },
  getSizePercent: function () {
    this._usingLayoutComponent &&
      (this._sizePercent = this._getOrCreateLayoutComponent().getPercentContentSize());
    return this._sizePercent;
  },
  _getWidthPercent: function () {
    return this._sizePercent.x;
  },
  _getHeightPercent: function () {
    return this._sizePercent.y;
  },
  getWorldPosition: function () {
    return this.convertToWorldSpace(
      cc.p(
        this._anchorPoint.x * this._contentSize.width,
        this._anchorPoint.y * this._contentSize.height
      )
    );
  },
  getVirtualRenderer: function () {
    return this;
  },
  getVirtualRendererSize: function () {
    return cc.size(this._contentSize);
  },
  _onSizeChanged: function () {
    if (!this._usingLayoutComponent) {
      for (var a = this.getChildren(), b = 0, d = a.length; b < d; b++) {
        var e = a[b];
        e instanceof ccui.Widget && e.updateSizeAndPosition();
      }
      this._sizeDirty = !1;
    }
  },
  setTouchEnabled: function (a) {
    this._touchEnabled !== a &&
      ((this._touchEnabled = a)
        ? (this._touchListener ||
            (this._touchListener = cc.EventListener.create({
              event: cc.EventListener.TOUCH_ONE_BY_ONE,
              swallowTouches: !0,
              onTouchBegan: this.onTouchBegan.bind(this),
              onTouchMoved: this.onTouchMoved.bind(this),
              onTouchEnded: this.onTouchEnded.bind(this),
            })),
          cc.eventManager.addListener(this._touchListener, this))
        : cc.eventManager.removeListener(this._touchListener));
  },
  isTouchEnabled: function () {
    return this._touchEnabled;
  },
  isHighlighted: function () {
    return this._highlight;
  },
  setHighlighted: function (a) {
    a !== this._highlight &&
      ((this._highlight = a),
      this._bright
        ? this._highlight
          ? this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT)
          : this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL)
        : this._onPressStateChangedToDisabled());
  },
  isFocused: function () {
    return this._focused;
  },
  setFocused: function (a) {
    if ((this._focused = a))
      (ccui.Widget._focusedWidget = this),
        ccui.Widget._focusNavigationController &&
          ccui.Widget._focusNavigationController._setFirstFocsuedWidget(this);
  },
  isFocusEnabled: function () {
    return this._focusEnabled;
  },
  setFocusEnabled: function (a) {
    this._focusEnabled = a;
  },
  findNextFocusedWidget: function (a, b) {
    if (
      null === this.onNextFocusedWidget ||
      null == this.onNextFocusedWidget(a)
    ) {
      var d = b instanceof ccui.Layout;
      if (this.isFocused() || d) {
        var e = this.getParent();
        return null !== e && e instanceof ccui.Layout
          ? e.findNextFocusedWidget(a, b)
          : d
          ? b.findNextFocusedWidget(a, b)
          : b;
      }
      return b;
    }
    d = this.onNextFocusedWidget(a);
    this.dispatchFocusEvent(this, d);
    return d;
  },
  requestFocus: function () {
    this !== ccui.Widget._focusedWidget &&
      this.dispatchFocusEvent(ccui.Widget._focusedWidget, this);
  },
  getCurrentFocusedWidget: function () {
    return ccui.Widget._focusedWidget;
  },
  onFocusChanged: null,
  onNextFocusedWidget: null,
  interceptTouchEvent: function (a, b, d) {
    var e = this.getWidgetParent();
    e && e.interceptTouchEvent(a, b, d);
  },
  onFocusChange: function (a, b) {
    a && a.setFocused(!1);
    b && b.setFocused(!0);
  },
  dispatchFocusEvent: function (a, b) {
    a && !a.isFocused() && (a = ccui.Widget._focusedWidget);
    if (b !== a) {
      if (b && b.onFocusChanged) b.onFocusChanged(a, b);
      if (a && b.onFocusChanged) a.onFocusChanged(a, b);
      cc.eventManager.dispatchEvent(new cc.EventFocus(a, b));
    }
  },
  setBright: function (a) {
    (this._bright = a)
      ? ((this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE),
        this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL))
      : this._onPressStateChangedToDisabled();
  },
  setBrightStyle: function (a) {
    if (this._brightStyle !== a)
      switch (
        ((this._brightStyle = a = a || ccui.Widget.BRIGHT_STYLE_NORMAL),
        this._brightStyle)
      ) {
        case ccui.Widget.BRIGHT_STYLE_NORMAL:
          this._onPressStateChangedToNormal();
          break;
        case ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT:
          this._onPressStateChangedToPressed();
      }
  },
  _onPressStateChangedToNormal: function () {},
  _onPressStateChangedToPressed: function () {},
  _onPressStateChangedToDisabled: function () {},
  _updateChildrenDisplayedRGBA: function () {
    this.setColor(this.getColor());
    this.setOpacity(this.getOpacity());
  },
  didNotSelectSelf: function () {},
  onTouchBegan: function (a, b) {
    this._hit = !1;
    if (
      this.isVisible() &&
      this.isEnabled() &&
      this._isAncestorsEnabled() &&
      this._isAncestorsVisible(this)
    ) {
      var d = a.getLocation();
      this._touchBeganPosition.x = d.x;
      this._touchBeganPosition.y = d.y;
      this.hitTest(this._touchBeganPosition) &&
        this.isClippingParentContainsPoint(this._touchBeganPosition) &&
        (this._hit = !0);
    }
    if (!this._hit) return !1;
    this.setHighlighted(!0);
    this._propagateTouchEvents &&
      this.propagateTouchEvent(ccui.Widget.TOUCH_BEGAN, this, a);
    this._pushDownEvent();
    return !0;
  },
  propagateTouchEvent: function (a, b, d) {
    var e = this.getWidgetParent();
    e && e.interceptTouchEvent(a, b, d);
  },
  onTouchMoved: function (a, b) {
    var d = a.getLocation();
    this._touchMovePosition.x = d.x;
    this._touchMovePosition.y = d.y;
    this.setHighlighted(this.hitTest(d));
    this._propagateTouchEvents &&
      this.propagateTouchEvent(ccui.Widget.TOUCH_MOVED, this, a);
    this._moveEvent();
  },
  onTouchEnded: function (a, b) {
    var d = a.getLocation();
    this._touchEndPosition.x = d.x;
    this._touchEndPosition.y = d.y;
    this._propagateTouchEvents &&
      this.propagateTouchEvent(ccui.Widget.TOUCH_ENDED, this, a);
    d = this._highlight;
    this.setHighlighted(!1);
    d ? this._releaseUpEvent() : this._cancelUpEvent();
  },
  onTouchCancelled: function (a) {
    this.setHighlighted(!1);
    this._cancelUpEvent();
  },
  onTouchLongClicked: function (a) {
    this.longClickEvent();
  },
  _pushDownEvent: function () {
    this._touchEventCallback &&
      this._touchEventCallback(this, ccui.Widget.TOUCH_BEGAN);
    this._touchEventListener &&
      this._touchEventSelector &&
      this._touchEventSelector.call(
        this._touchEventListener,
        this,
        ccui.Widget.TOUCH_BEGAN
      );
  },
  _moveEvent: function () {
    this._touchEventCallback &&
      this._touchEventCallback(this, ccui.Widget.TOUCH_MOVED);
    this._touchEventListener &&
      this._touchEventSelector &&
      this._touchEventSelector.call(
        this._touchEventListener,
        this,
        ccui.Widget.TOUCH_MOVED
      );
  },
  _releaseUpEvent: function () {
    this._touchEventCallback &&
      this._touchEventCallback(this, ccui.Widget.TOUCH_ENDED);
    this._touchEventListener &&
      this._touchEventSelector &&
      this._touchEventSelector.call(
        this._touchEventListener,
        this,
        ccui.Widget.TOUCH_ENDED
      );
    this._clickEventListener && this._clickEventListener(this);
  },
  _cancelUpEvent: function () {
    this._touchEventCallback &&
      this._touchEventCallback(this, ccui.Widget.TOUCH_CANCELED);
    this._touchEventListener &&
      this._touchEventSelector &&
      this._touchEventSelector.call(
        this._touchEventListener,
        this,
        ccui.Widget.TOUCH_CANCELED
      );
  },
  longClickEvent: function () {},
  addTouchEventListener: function (a, b) {
    void 0 === b
      ? (this._touchEventCallback = a)
      : ((this._touchEventSelector = a), (this._touchEventListener = b));
  },
  addClickEventListener: function (a) {
    this._clickEventListener = a;
  },
  hitTest: function (a) {
    var b = cc.rect(0, 0, this._contentSize.width, this._contentSize.height);
    return cc.rectContainsPoint(b, this.convertToNodeSpace(a));
  },
  isClippingParentContainsPoint: function (a) {
    this._affectByClipping = !1;
    for (var b = this.getParent(), d = null; b; ) {
      if (b instanceof ccui.Layout && b.isClippingEnabled()) {
        this._affectByClipping = !0;
        d = b;
        break;
      }
      b = b.getParent();
    }
    return this._affectByClipping
      ? d
        ? d.hitTest(a)
          ? d.isClippingParentContainsPoint(a)
          : !1
        : !0
      : !0;
  },
  checkChildInfo: function (a, b, d) {
    var e = this.getWidgetParent();
    e && e.checkChildInfo(a, b, d);
  },
  setPosition: function (a, b) {
    if (!this._usingLayoutComponent && this._running) {
      var d = this.getWidgetParent();
      d &&
        ((d = d.getContentSize()),
        0 >= d.width || 0 >= d.height
          ? ((this._positionPercent.x = 0), (this._positionPercent.y = 0))
          : void 0 === b
          ? ((this._positionPercent.x = a.x / d.width),
            (this._positionPercent.y = a.y / d.height))
          : ((this._positionPercent.x = a / d.width),
            (this._positionPercent.y = b / d.height)));
    }
    cc.Node.prototype.setPosition.call(this, a, b);
  },
  setPositionX: function (a) {
    if (this._running) {
      var b = this.getWidgetParent();
      b && ((b = b.width), (this._positionPercent.x = 0 >= b ? 0 : a / b));
    }
    cc.Node.prototype.setPositionX.call(this, a);
  },
  setPositionY: function (a) {
    if (this._running) {
      var b = this.getWidgetParent();
      b && ((b = b.height), (this._positionPercent.y = 0 >= b ? 0 : a / b));
    }
    cc.Node.prototype.setPositionY.call(this, a);
  },
  setPositionPercent: function (a) {
    if (this._usingLayoutComponent) {
      var b = this._getOrCreateLayoutComponent();
      b.setPositionPercentX(a.x);
      b.setPositionPercentY(a.y);
      b.refreshLayout();
    } else
      this._setXPercent(a.x),
        this._setYPercent(a.y),
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  _setXPercent: function (a) {
    if (this._usingLayoutComponent) {
      var b = this._getOrCreateLayoutComponent();
      b.setPositionPercentX(a.x);
      b.refreshLayout();
    } else
      (this._positionPercent.x = a),
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  _setYPercent: function (a) {
    if (this._usingLayoutComponent) {
      var b = this._getOrCreateLayoutComponent();
      b.setPositionPercentY(a.x);
      b.refreshLayout();
    } else
      (this._positionPercent.y = a),
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getPositionPercent: function () {
    if (this._usingLayoutComponent) {
      var a = this._getOrCreateLayoutComponent();
      this._positionPercent.x = a.getPositionPercentX();
      this._positionPercent.y = a.getPositionPercentY();
    }
    return cc.p(this._positionPercent);
  },
  _getXPercent: function () {
    if (this._usingLayoutComponent) {
      var a = this._getOrCreateLayoutComponent();
      this._positionPercent.x = a.getPositionPercentX();
      this._positionPercent.y = a.getPositionPercentY();
    }
    return this._positionPercent.x;
  },
  _getYPercent: function () {
    if (this._usingLayoutComponent) {
      var a = this._getOrCreateLayoutComponent();
      this._positionPercent.x = a.getPositionPercentX();
      this._positionPercent.y = a.getPositionPercentY();
    }
    return this._positionPercent.y;
  },
  setPositionType: function (a) {
    this._positionType = a;
    if (this._usingLayoutComponent) {
      var b = this._getOrCreateLayoutComponent();
      a === ccui.POSITION_ABSOLUTE
        ? (b.setPositionPercentXEnabled(!1), b.setPositionPercentYEnabled(!1))
        : (b.setPositionPercentXEnabled(!0), b.setPositionPercentYEnabled(!0));
    }
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
  },
  getPositionType: function () {
    return this._positionType;
  },
  setFlippedX: function (a) {
    var b = this.getScaleX();
    this._flippedX = a;
    this.setScaleX(b);
  },
  isFlippedX: function () {
    return this._flippedX;
  },
  setFlippedY: function (a) {
    var b = this.getScaleY();
    this._flippedY = a;
    this.setScaleY(b);
  },
  isFlippedY: function () {
    return this._flippedY;
  },
  _adaptRenderers: function () {},
  isBright: function () {
    return this._bright;
  },
  isEnabled: function () {
    return this._enabled;
  },
  getLeftBoundary: function () {
    return this.getPositionX() - this._getAnchorX() * this._contentSize.width;
  },
  getBottomBoundary: function () {
    return this.getPositionY() - this._getAnchorY() * this._contentSize.height;
  },
  getRightBoundary: function () {
    return this.getLeftBoundary() + this._contentSize.width;
  },
  getTopBoundary: function () {
    return this.getBottomBoundary() + this._contentSize.height;
  },
  getTouchBeganPosition: function () {
    return cc.p(this._touchBeganPosition);
  },
  getTouchMovePosition: function () {
    return cc.p(this._touchMovePosition);
  },
  getTouchEndPosition: function () {
    return cc.p(this._touchEndPosition);
  },
  getWidgetType: function () {
    return this._widgetType;
  },
  setLayoutParameter: function (a) {
    a &&
      ((this._layoutParameterDictionary[a.getLayoutType()] = a),
      (this._layoutParameterType = a.getLayoutType()));
  },
  getLayoutParameter: function (a) {
    a = a || this._layoutParameterType;
    return this._layoutParameterDictionary[a];
  },
  getDescription: function () {
    return "Widget";
  },
  clone: function () {
    var a = this._createCloneInstance();
    a._copyProperties(this);
    a._copyClonedWidgetChildren(this);
    return a;
  },
  _createCloneInstance: function () {
    return new ccui.Widget();
  },
  _copyClonedWidgetChildren: function (a) {
    a = a.getChildren();
    for (var b = 0; b < a.length; b++) {
      var d = a[b];
      d instanceof ccui.Widget && this.addChild(d.clone());
    }
  },
  _copySpecialProperties: function (a) {},
  _copyProperties: function (a) {
    this.setEnabled(a.isEnabled());
    this.setVisible(a.isVisible());
    this.setBright(a.isBright());
    this.setTouchEnabled(a.isTouchEnabled());
    this.setLocalZOrder(a.getLocalZOrder());
    this.setTag(a.getTag());
    this.setName(a.getName());
    this.setActionTag(a.getActionTag());
    this._ignoreSize = a._ignoreSize;
    this.setContentSize(a._contentSize);
    this._customSize.width = a._customSize.width;
    this._customSize.height = a._customSize.height;
    this._copySpecialProperties(a);
    this._sizeType = a.getSizeType();
    this._sizePercent.x = a._sizePercent.x;
    this._sizePercent.y = a._sizePercent.y;
    this._positionType = a._positionType;
    this._positionPercent.x = a._positionPercent.x;
    this._positionPercent.y = a._positionPercent.y;
    this.setPosition(a.getPosition());
    this.setAnchorPoint(a.getAnchorPoint());
    this.setScaleX(a.getScaleX());
    this.setScaleY(a.getScaleY());
    this.setRotation(a.getRotation());
    this.setRotationX(a.getRotationX());
    this.setRotationY(a.getRotationY());
    this.setFlippedX(a.isFlippedX());
    this.setFlippedY(a.isFlippedY());
    this.setColor(a.getColor());
    this.setOpacity(a.getOpacity());
    this._touchEventCallback = a._touchEventCallback;
    this._touchEventListener = a._touchEventListener;
    this._touchEventSelector = a._touchEventSelector;
    this._clickEventListener = a._clickEventListener;
    this._focused = a._focused;
    this._focusEnabled = a._focusEnabled;
    this._propagateTouchEvents = a._propagateTouchEvents;
    for (var b in a._layoutParameterDictionary) {
      var d = a._layoutParameterDictionary[b];
      d && this.setLayoutParameter(d.clone());
    }
  },
  setActionTag: function (a) {
    this._actionTag = a;
  },
  getActionTag: function () {
    return this._actionTag;
  },
  getLeftInParent: function () {
    cc.log(
      "getLeftInParent is deprecated. Please use getLeftBoundary instead."
    );
    return this.getLeftBoundary();
  },
  getBottomInParent: function () {
    cc.log(
      "getBottomInParent is deprecated. Please use getBottomBoundary instead."
    );
    return this.getBottomBoundary();
  },
  getRightInParent: function () {
    cc.log(
      "getRightInParent is deprecated. Please use getRightBoundary instead."
    );
    return this.getRightBoundary();
  },
  getTopInParent: function () {
    cc.log("getTopInParent is deprecated. Please use getTopBoundary instead.");
    return this.getTopBoundary();
  },
  getTouchEndPos: function () {
    cc.log(
      "getTouchEndPos is deprecated. Please use getTouchEndPosition instead."
    );
    return this.getTouchEndPosition();
  },
  getTouchMovePos: function () {
    cc.log(
      "getTouchMovePos is deprecated. Please use getTouchMovePosition instead."
    );
    return this.getTouchMovePosition();
  },
  clippingParentAreaContainPoint: function (a) {
    cc.log(
      "clippingParentAreaContainPoint is deprecated. Please use isClippingParentContainsPoint instead."
    );
    this.isClippingParentContainsPoint(a);
  },
  getTouchStartPos: function () {
    cc.log(
      "getTouchStartPos is deprecated. Please use getTouchBeganPosition instead."
    );
    return this.getTouchBeganPosition();
  },
  setSize: function (a) {
    this.setContentSize(a);
  },
  getSize: function () {
    return this.getContentSize();
  },
  addNode: function (a, b, d) {
    a instanceof ccui.Widget
      ? cc.log("Please use addChild to add a Widget.")
      : (cc.Node.prototype.addChild.call(this, a, b, d), this._nodes.push(a));
  },
  getNodeByTag: function (a) {
    for (var b = this._nodes, d = 0; d < b.length; d++) {
      var e = b[d];
      if (e && e.getTag() === a) return e;
    }
    return null;
  },
  getNodes: function () {
    return this._nodes;
  },
  removeNode: function (a, b) {
    cc.Node.prototype.removeChild.call(this, a, b);
    cc.arrayRemoveObject(this._nodes, a);
  },
  _getNormalGLProgram: function () {
    return cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR);
  },
  _getGrayGLProgram: function () {
    return cc.shaderCache.programForKey(
      cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY
    );
  },
  removeNodeByTag: function (a, b) {
    var d = this.getChildByTag(a);
    d
      ? this.removeChild(d, b)
      : cc.log("cocos2d: removeNodeByTag(tag \x3d %d): child not found!", a);
  },
  removeAllNodes: function () {
    for (var a = 0; a < this._nodes.length; a++)
      cc.Node.prototype.removeChild.call(this, this._nodes[a]);
    this._nodes.length = 0;
  },
  _findLayout: function () {
    cc.renderer.childrenOrderDirty = !0;
    for (var a = this._parent; a; )
      if (a._doLayout) {
        a._doLayoutDirty = !0;
        break;
      } else a = a._parent;
  },
  isUnifySizeEnabled: function () {
    return this._unifySize;
  },
  setUnifySizeEnabled: function (a) {
    this._unifySize = a;
  },
  _ccEventCallback: null,
  addCCSEventListener: function (a) {
    this._ccEventCallback = a;
  },
  setScaleX: function (a) {
    this._flippedX && (a *= -1);
    cc.Node.prototype.setScaleX.call(this, a);
  },
  setScaleY: function (a) {
    this._flippedY && (a *= -1);
    cc.Node.prototype.setScaleY.call(this, a);
  },
  setScale: function (a, b) {
    void 0 === b && (b = a);
    this.setScaleX(a);
    this.setScaleY(b);
  },
  getScaleX: function () {
    var a = cc.Node.prototype.getScaleX.call(this);
    this._flippedX && (a *= -1);
    return a;
  },
  getScaleY: function () {
    var a = cc.Node.prototype.getScaleY.call(this);
    this._flippedY && (a *= -1);
    return a;
  },
  getScale: function () {
    this.getScaleX() !== this.getScaleY() &&
      cc.log(
        "Widget#scale. ScaleX !\x3d ScaleY. Don't know which one to return"
      );
    return this.getScaleX();
  },
  setCallbackName: function (a) {
    this._callbackName = a;
  },
  getCallbackName: function () {
    return this._callbackName;
  },
  setCallbackType: function (a) {
    this._callbackType = a;
  },
  getCallbackType: function () {
    return this._callbackType;
  },
  setLayoutComponentEnabled: function (a) {
    this._usingLayoutComponent = a;
  },
  isLayoutComponentEnabled: function () {
    return this._usingLayoutComponent;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new ccui.Widget.WebGLRenderCmd(this)
      : new ccui.Widget.CanvasRenderCmd(this);
  },
});
_p = ccui.Widget.prototype;
cc.defineGetterSetter(_p, "xPercent", _p._getXPercent, _p._setXPercent);
cc.defineGetterSetter(_p, "yPercent", _p._getYPercent, _p._setYPercent);
cc.defineGetterSetter(
  _p,
  "widthPercent",
  _p._getWidthPercent,
  _p._setWidthPercent
);
cc.defineGetterSetter(
  _p,
  "heightPercent",
  _p._getHeightPercent,
  _p._setHeightPercent
);
cc.defineGetterSetter(_p, "widgetParent", _p.getWidgetParent);
cc.defineGetterSetter(_p, "enabled", _p.isEnabled, _p.setEnabled);
cc.defineGetterSetter(_p, "focused", _p.isFocused, _p.setFocused);
cc.defineGetterSetter(_p, "sizeType", _p.getSizeType, _p.setSizeType);
cc.defineGetterSetter(_p, "widgetType", _p.getWidgetType);
cc.defineGetterSetter(
  _p,
  "touchEnabled",
  _p.isTouchEnabled,
  _p.setTouchEnabled
);
cc.defineGetterSetter(
  _p,
  "updateEnabled",
  _p.isUpdateEnabled,
  _p.setUpdateEnabled
);
cc.defineGetterSetter(_p, "bright", _p.isBright, _p.setBright);
cc.defineGetterSetter(_p, "name", _p.getName, _p.setName);
cc.defineGetterSetter(_p, "actionTag", _p.getActionTag, _p.setActionTag);
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
_p = null;
ccui.Widget.create = function () {
  return new ccui.Widget();
};
ccui.Widget._focusedWidget = null;
ccui.Widget._focusNavigationController = null;
ccui.Widget.enableDpadNavigation = function (a) {
  a
    ? (null == ccui.Widget._focusNavigationController &&
        ((ccui.Widget._focusNavigationController = new ccui._FocusNavigationController()),
        ccui.Widget._focusedWidget &&
          ccui.Widget._focusNavigationController._setFirstFocsuedWidget(
            ccui.Widget._focusedWidget
          )),
      ccui.Widget._focusNavigationController.enableFocusNavigation(!0))
    : ccui.Widget._focusNavigationController &&
      (ccui.Widget._focusNavigationController.enableFocusNavigation(!1),
      (ccui.Widget._focusNavigationController = null));
};
ccui.Widget.getCurrentFocusedWidget = function () {
  return ccui.Widget._focusedWidget;
};
ccui.Widget.BRIGHT_STYLE_NONE = -1;
ccui.Widget.BRIGHT_STYLE_NORMAL = 0;
ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT = 1;
ccui.Widget.TYPE_WIDGET = 0;
ccui.Widget.TYPE_CONTAINER = 1;
ccui.Widget.LEFT = 0;
ccui.Widget.RIGHT = 1;
ccui.Widget.UP = 2;
ccui.Widget.DOWN = 3;
ccui.Widget.LOCAL_TEXTURE = 0;
ccui.Widget.PLIST_TEXTURE = 1;
ccui.Widget.TOUCH_BEGAN = 0;
ccui.Widget.TOUCH_MOVED = 1;
ccui.Widget.TOUCH_ENDED = 2;
ccui.Widget.TOUCH_CANCELED = 3;
ccui.Widget.SIZE_ABSOLUTE = 0;
ccui.Widget.SIZE_PERCENT = 1;
ccui.Widget.POSITION_ABSOLUTE = 0;
ccui.Widget.POSITION_PERCENT = 1;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED, function () {
  if (cc._renderType === cc.game.RENDER_TYPE_CANVAS) {
    ccui.Widget.CanvasRenderCmd = function (a) {
      this._pNodeCmdCtor(a);
      this._needDraw = !1;
    };
    var a = (ccui.Widget.CanvasRenderCmd.prototype = Object.create(
      cc.ProtectedNode.CanvasRenderCmd.prototype
    ));
    a.constructor = ccui.Widget.CanvasRenderCmd;
    a.visit = function (a) {
      var d = this._node,
        e = cc.renderer;
      if ((a = a || this.getParentRenderCmd()))
        this._curLevel = a._curLevel + 1;
      isNaN(d._customZ) &&
        ((d._vertexZ = e.assignedZ), (e.assignedZ += e.assignedZStep));
      d._adaptRenderers();
      this._syncStatus(a);
    };
    a.transform = function (a, d) {
      this._transform ||
        ((this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }),
        (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }));
      var e = this._node;
      if (e._visible && e._running) {
        e._adaptRenderers();
        if (!this._usingLayoutComponent) {
          var f = e.getWidgetParent();
          f &&
            ((f = f.getContentSize()),
            0 !== f.width &&
              0 !== f.height &&
              ((e._position.x = f.width * e._positionPercent.x),
              (e._position.y = f.height * e._positionPercent.y)));
        }
        this.pNodeTransform(a, d);
      }
    };
  } else
    (ccui.Widget.WebGLRenderCmd = function (a) {
      this._pNodeCmdCtor(a);
      this._needDraw = !1;
    }),
      (a = ccui.Widget.WebGLRenderCmd.prototype = Object.create(
        cc.ProtectedNode.WebGLRenderCmd.prototype
      )),
      (a.constructor = ccui.Widget.WebGLRenderCmd),
      (a.visit = function (a) {
        var d = this._node,
          e = cc.renderer;
        if ((a = a || this.getParentRenderCmd()))
          this._curLevel = a._curLevel + 1;
        isNaN(d._customZ) &&
          ((d._vertexZ = e.assignedZ), (e.assignedZ += e.assignedZStep));
        d._adaptRenderers();
        this._syncStatus(a);
      }),
      (a.transform = function (a, d) {
        this._transform ||
          ((this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }),
          (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }));
        var e = this._node;
        if (e._visible && e._running) {
          e._adaptRenderers();
          if (!this._usingLayoutComponent) {
            var f = e.getWidgetParent();
            f &&
              ((f = f.getContentSize()),
              0 !== f.width &&
                0 !== f.height &&
                ((e._position.x = f.width * e._positionPercent.x),
                (e._position.y = f.height * e._positionPercent.y)));
          }
          this.pNodeTransform(a, d);
        }
      });
  a.widgetTransform = a.transform;
});
(function () {
  var a = {
      _pool: {},
      _lengths: [],
      put: function (a) {
        var b = a.length;
        this._pool[b]
          ? this._pool[b].push(a)
          : ((this._pool[b] = [a]),
            this._lengths.push(b),
            this._lengths.sort());
      },
      get: function (a) {
        for (var b, d = 0; d < this._lengths.length; d++)
          if (this._lengths[d] >= a) {
            b = this._lengths[d];
            break;
          }
        if (b) return this._pool[b].pop();
      },
    },
    b = cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL,
    d,
    e = {
      _rebuildQuads_base: function (b, e, f, g) {
        var h = b._vertices,
          s = b._renderCmd._worldTransform,
          u,
          v,
          t;
        if (g) (v = u = 0), (t = f.width), (f = f.height);
        else {
          u = e._originalSize;
          var w = e._rect,
            x = e._offset;
          t = f.width / u.width;
          g = f.height / u.height;
          var y = x.x - (u.width - w.width) / 2;
          v = x.y + (u.height - w.height) / 2;
          var B = x.y - (u.height - w.height) / 2;
          u = (x.x + (u.width - w.width) / 2) * t;
          v *= g;
          t = f.width + y * t;
          f = f.height + B * g;
        }
        8 > h.length &&
          (a.put(h), (h = a.get(8) || new Float32Array(8)), (b._vertices = h));
        d
          ? ((h[0] = u * s.a + v * s.c + s.tx),
            (h[1] = u * s.b + v * s.d + s.ty),
            (h[2] = t * s.a + v * s.c + s.tx),
            (h[3] = t * s.b + v * s.d + s.ty),
            (h[4] = u * s.a + f * s.c + s.tx),
            (h[5] = u * s.b + f * s.d + s.ty),
            (h[6] = t * s.a + f * s.c + s.tx),
            (h[7] = t * s.b + f * s.d + s.ty))
          : ((h[0] = u),
            (h[1] = v),
            (h[2] = t),
            (h[3] = v),
            (h[4] = u),
            (h[5] = f),
            (h[6] = t),
            (h[7] = f));
        b._uvsDirty && this._calculateUVs(b, e);
        b._vertCount = 4;
      },
      _calculateUVs: function (d, e) {
        var f = d._uvs,
          g = e._texture._pixelsWide,
          h = e._texture._pixelsHigh,
          s = e._rect,
          s = cc.rectPointsToPixels(s);
        8 > f.length &&
          (a.put(f), (f = a.get(8) || new Float32Array(8)), (d._uvs = f));
        var u,
          v,
          t = b ? 0.5 : 0;
        e._rotated
          ? ((u = (s.x + t) / g),
            (v = (s.y + s.width - t) / h),
            (g = (s.x + s.height - t) / g),
            (h = (s.y + t) / h),
            (f[0] = u),
            (f[1] = h),
            (f[2] = u),
            (f[3] = v),
            (f[4] = g),
            (f[5] = h),
            (f[6] = g),
            (f[7] = v))
          : ((u = (s.x + t) / g),
            (v = (s.y + s.height - t) / h),
            (g = (s.x + s.width - t) / g),
            (h = (s.y + t) / h),
            (f[0] = u),
            (f[1] = v),
            (f[2] = g),
            (f[3] = v),
            (f[4] = u),
            (f[5] = h),
            (f[6] = g),
            (f[7] = h));
      },
    },
    f = {
      x: Array(4),
      y: Array(4),
      _rebuildQuads_base: function (b, e, f, g, h, s, u) {
        var v = b._vertices,
          t = b._renderCmd._worldTransform,
          w = f.width - g - h,
          x = f.height - s - u,
          y = f.width / (g + h),
          B = f.height / (s + u),
          A = this.x,
          z = this.y;
        A[0] = 0;
        A[1] = g * (1 < y ? 1 : y);
        A[2] = A[1] + (0 > w ? 0 : w);
        A[3] = f.width;
        z[0] = 0;
        z[1] = u * (1 < B ? 1 : B);
        z[2] = z[1] + (0 > x ? 0 : x);
        z[3] = f.height;
        32 > v.length &&
          (a.put(v),
          (v = a.get(32) || new Float32Array(32)),
          (b._vertices = v));
        f = 0;
        if (d)
          for (w = 0; 4 > w; w++)
            for (x = 0; 4 > x; x++)
              (v[f] = A[x] * t.a + z[w] * t.c + t.tx),
                (v[f + 1] = A[x] * t.b + z[w] * t.d + t.ty),
                (f += 2);
        else
          for (w = 0; 4 > w; w++)
            for (x = 0; 4 > x; x++) (v[f] = A[x]), (v[f + 1] = z[w]), (f += 2);
        b._uvsDirty && this._calculateUVs(b, e, g, h, s, u);
      },
      _calculateUVs: function (d, e, f, g, h, s) {
        var u = d._uvs,
          v = e._rect,
          t = e._texture._pixelsWide,
          w = e._texture._pixelsHigh,
          x,
          y = e._rect,
          y = cc.rectPointsToPixels(y),
          v = cc.rectPointsToPixels(v),
          B = cc.contentScaleFactor();
        f *= B;
        g = v.width - f - g * B;
        h *= B;
        s *= B;
        x = v.height - h - s;
        32 > u.length &&
          (a.put(u), (u = a.get(32) || new Float32Array(32)), (d._uvs = u));
        d = this.x;
        var v = this.y,
          A = b ? 0.5 : 0,
          B = 0;
        if (e._rotated)
          for (
            d[0] = (y.x + A) / t,
              d[1] = (s + y.x) / t,
              d[2] = (s + x + y.x) / t,
              d[3] = (y.x + y.height - A) / t,
              v[3] = (y.y + A) / w,
              v[2] = (f + y.y) / w,
              v[1] = (f + g + y.y) / w,
              v[0] = (y.y + y.width - A) / w,
              e = 0;
            4 > e;
            e++
          )
            for (t = 0; 4 > t; t++)
              (u[B] = d[e]), (u[B + 1] = v[3 - t]), (B += 2);
        else
          for (
            d[0] = (y.x + A) / t,
              d[1] = (f + y.x) / t,
              d[2] = (f + g + y.x) / t,
              d[3] = (y.x + y.width - A) / t,
              v[3] = (y.y + A) / w,
              v[2] = (h + y.y) / w,
              v[1] = (h + x + y.y) / w,
              v[0] = (y.y + y.height - A) / w,
              e = 0;
            4 > e;
            e++
          )
            for (t = 0; 4 > t; t++) (u[B] = d[t]), (u[B + 1] = v[e]), (B += 2);
      },
    };
  ccui.Scale9Sprite = cc.Scale9Sprite = cc.Node.extend({
    _spriteFrame: null,
    _scale9Image: null,
    _insetLeft: 0,
    _insetRight: 0,
    _insetTop: 0,
    _insetBottom: 0,
    _blendFunc: null,
    _renderingType: 1,
    _brightState: 0,
    _opacityModifyRGB: !1,
    _rawVerts: null,
    _rawUvs: null,
    _vertices: null,
    _uvs: null,
    _vertCount: 0,
    _quadsDirty: !0,
    _uvsDirty: !0,
    _isTriangle: !1,
    _isTrimmedContentSize: !1,
    _textureLoaded: !1,
    _flippedX: !1,
    _flippedY: !1,
    _className: "Scale9Sprite",
    ctor: function (b, e, f) {
      cc.Node.prototype.ctor.call(this);
      this._loader = new cc.Sprite.LoadManager();
      this._renderCmd.setState(this._brightState);
      this._blendFunc = cc.BlendFunc._alphaPremultiplied();
      this.setAnchorPoint(cc.p(0.5, 0.5));
      this._rawUvs = this._rawVerts = null;
      this._vertices = a.get(8) || new Float32Array(8);
      this._uvs = a.get(8) || new Float32Array(8);
      if (void 0 !== b)
        if (b instanceof cc.SpriteFrame) this.initWithSpriteFrame(b, e);
        else {
          var g = cc.spriteFrameCache.getSpriteFrame(b);
          g ? this.initWithSpriteFrame(g, e) : this.initWithFile(b, e, f);
        }
      void 0 === d && (d = cc._renderType === cc.game.RENDER_TYPE_WEBGL);
    },
    textureLoaded: function () {
      return this._textureLoaded;
    },
    getCapInsets: function () {
      return cc.rect(this._capInsetsInternal);
    },
    _asyncSetCapInsets: function () {
      this.removeEventListener("load", this._asyncSetCapInsets, this);
      this.setCapInsets(this._cacheCapInsets);
      this._cacheCapInsets = null;
    },
    setCapInsets: function (a) {
      if (!this.loaded())
        return (
          (this._cacheCapInsets = a),
          this.removeEventListener("load", this._asyncSetCapInsets, this),
          this.addEventListener("load", this._asyncSetCapInsets, this),
          !1
        );
      this._capInsetsInternal = a;
      this._updateCapInsets(this._spriteFrame._rect, this._capInsetsInternal);
    },
    _updateCapInsets: function (a, b) {
      b && a && !cc._rectEqualToZero(b)
        ? (this._capInsetsInternal = b)
        : ((a = a || {
            x: 0,
            y: 0,
            width: this._contentSize.width,
            height: this._contentSize.height,
          }),
          (this._capInsetsInternal = cc.rect(
            a.width / 3,
            a.height / 3,
            a.width / 3,
            a.height / 3
          )));
      cc._rectEqualToZero(a) ||
        ((this._insetLeft = this._capInsetsInternal.x),
        (this._insetTop = this._capInsetsInternal.y),
        (this._insetRight =
          a.width - this._insetLeft - this._capInsetsInternal.width),
        (this._insetBottom =
          a.height - this._insetTop - this._capInsetsInternal.height));
    },
    initWithFile: function (a, b, d) {
      a instanceof cc.Rect
        ? ((d = a = b), (b = cc.rect(0, 0, 0, 0)))
        : ((b = b || cc.rect(0, 0, 0, 0)), (d = d || cc.rect(0, 0, 0, 0)));
      if (!a)
        throw Error(
          "ccui.Scale9Sprite.initWithFile(): file should be non-null"
        );
      var e = cc.textureCache.getTextureForKey(a);
      e || (e = cc.textureCache.addImage(a));
      var f = e.isLoaded();
      this._textureLoaded = f;
      this._loader.clear();
      if (!f)
        return (
          this._loader.once(
            e,
            function () {
              this.initWithFile(a, b, d);
              this.dispatchEvent("load");
            },
            this
          ),
          !1
        );
      cc._rectEqualToZero(b) &&
        ((f = e.getContentSize()), (b = cc.rect(0, 0, f.width, f.height)));
      this.setTexture(e, b);
      this._updateCapInsets(b, d);
      return !0;
    },
    updateWithBatchNode: function (a, b, d, e) {
      if (!a) return !1;
      var f = a.getTexture();
      this._loader.clear();
      if (!f.isLoaded())
        return (
          this._loader.once(
            f,
            function () {
              this.updateWithBatchNode(a, b, d, e);
              this.dispatchEvent("load");
            },
            this
          ),
          !1
        );
      this.setTexture(f, b);
      this._updateCapInsets(b, e);
      return !0;
    },
    initWithSpriteFrame: function (a, b) {
      this.setSpriteFrame(a);
      b = b || cc.rect(0, 0, 0, 0);
      this._updateCapInsets(a._rect, b);
    },
    initWithSpriteFrameName: function (a, b) {
      if (!a)
        throw Error(
          "ccui.Scale9Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null"
        );
      b = b || cc.rect(0, 0, 0, 0);
      var d = cc.spriteFrameCache.getSpriteFrame(a);
      if (null == d)
        return (
          cc.log(
            "ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"
          ),
          !1
        );
      this.setSpriteFrame(d);
      b = b || cc.rect(0, 0, 0, 0);
      this._updateCapInsets(d._rect, b);
    },
    loaded: function () {
      return null === this._spriteFrame
        ? !1
        : this._spriteFrame.textureLoaded();
    },
    setTexture: function (a, b) {
      var d = new cc.SpriteFrame(a, b);
      this.setSpriteFrame(d);
    },
    _updateBlendFunc: function () {
      var a = this._blendFunc;
      this._spriteFrame && this._spriteFrame._texture.hasPremultipliedAlpha()
        ? (a.src === cc.SRC_ALPHA && a.dst === cc.BLEND_DST && (a.src = cc.ONE),
          (this._opacityModifyRGB = !0))
        : (a.src === cc.ONE && a.dst === cc.BLEND_DST && (a.src = cc.SRC_ALPHA),
          (this._opacityModifyRGB = !1));
    },
    setOpacityModifyRGB: function (a) {
      this._opacityModifyRGB !== a &&
        ((this._opacityModifyRGB = a), this._renderCmd._setColorDirty());
    },
    isOpacityModifyRGB: function () {
      return this._opacityModifyRGB;
    },
    setSpriteFrame: function (a) {
      if (a) {
        this._spriteFrame = a;
        this._uvsDirty = this._quadsDirty = !0;
        var b = this,
          d = function () {
            cc.sizeEqualToSize(b._contentSize, cc.size(0, 0)) &&
              b.setContentSize(b._spriteFrame._rect);
            b._textureLoaded = !0;
            b._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
            cc.renderer.childrenOrderDirty = !0;
          };
        b._textureLoaded = a.textureLoaded();
        b._textureLoaded
          ? d()
          : (this._loader.clear(),
            this._loader.once(
              a,
              function () {
                d();
                this.dispatchEvent("load");
              },
              this
            ));
      }
    },
    setBlendFunc: function (a, b) {
      void 0 === b
        ? ((this._blendFunc.src = a.src || cc.BLEND_SRC),
          (this._blendFunc.dst = a.dst || cc.BLEND_DST))
        : ((this._blendFunc.src = a || cc.BLEND_SRC),
          (this._blendFunc.dst = b || cc.BLEND_DST));
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getBlendFunc: function () {
      return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst);
    },
    setPreferredSize: function (a) {
      a && !cc.sizeEqualToSize(this._contentSize, a) && this.setContentSize(a);
    },
    getPreferredSize: function () {
      return this.getContentSize();
    },
    setContentSize: function (a, b) {
      void 0 === b && ((b = a.height), (a = a.width));
      if (a !== this._contentSize.width || b !== this._contentSize.height)
        cc.Node.prototype.setContentSize.call(this, a, b),
          (this._quadsDirty = !0);
    },
    getContentSize: function () {
      return this._renderingType === ccui.Scale9Sprite.RenderingType.SIMPLE
        ? this._spriteFrame
          ? this._spriteFrame._originalSize
          : cc.size(this._contentSize)
        : cc.size(this._contentSize);
    },
    _setWidth: function (a) {
      cc.Node.prototype._setWidth.call(this, a);
      this._quadsDirty = !0;
    },
    _setHeight: function (a) {
      cc.Node.prototype._setHeight.call(this, a);
      this._quadsDirty = !0;
    },
    setState: function (a) {
      this._brightState = a;
      this._renderCmd.setState(a);
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getState: function () {
      return this._brightState;
    },
    setRenderingType: function (a) {
      this._renderingType !== a &&
        ((this._renderingType = a),
        (this._uvsDirty = this._quadsDirty = !0),
        this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty));
    },
    getRenderingType: function () {
      return this._renderingType;
    },
    setInsetLeft: function (a) {
      this._insetLeft = a;
      this._uvsDirty = this._quadsDirty = !0;
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getInsetLeft: function () {
      return this._insetLeft;
    },
    setInsetTop: function (a) {
      this._insetTop = a;
      this._uvsDirty = this._quadsDirty = !0;
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getInsetTop: function () {
      return this._insetTop;
    },
    setInsetRight: function (a) {
      this._insetRight = a;
      this._uvsDirty = this._quadsDirty = !0;
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getInsetRight: function () {
      return this._insetRight;
    },
    setInsetBottom: function (a) {
      this._insetBottom = a;
      this._uvsDirty = this._quadsDirty = !0;
      this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    },
    getInsetBottom: function () {
      return this._insetBottom;
    },
    _rebuildQuads: function () {
      if (this._spriteFrame && this._spriteFrame._textureLoaded) {
        this._updateBlendFunc();
        this._isTriangle = !1;
        switch (this._renderingType) {
          case h.SIMPLE:
            e._rebuildQuads_base(
              this,
              this._spriteFrame,
              this._contentSize,
              this._isTrimmedContentSize
            );
            break;
          case h.SLICED:
            f._rebuildQuads_base(
              this,
              this._spriteFrame,
              this._contentSize,
              this._insetLeft,
              this._insetRight,
              this._insetTop,
              this._insetBottom
            );
            break;
          default:
            this._uvsDirty = this._quadsDirty = !1;
            cc.error("Can not generate quad");
            return;
        }
        this._uvsDirty = this._quadsDirty = !1;
      }
    },
    _createRenderCmd: function () {
      return cc._renderType === cc.game.RENDER_TYPE_CANVAS
        ? new ccui.Scale9Sprite.CanvasRenderCmd(this)
        : new ccui.Scale9Sprite.WebGLRenderCmd(this);
    },
  });
  var g = ccui.Scale9Sprite.prototype;
  cc.EventHelper.prototype.apply(g);
  cc.defineGetterSetter(
    g,
    "preferredSize",
    g.getPreferredSize,
    g.setPreferredSize
  );
  cc.defineGetterSetter(g, "capInsets", g.getCapInsets, g.setCapInsets);
  cc.defineGetterSetter(g, "insetLeft", g.getInsetLeft, g.setInsetLeft);
  cc.defineGetterSetter(g, "insetTop", g.getInsetTop, g.setInsetTop);
  cc.defineGetterSetter(g, "insetRight", g.getInsetRight, g.setInsetRight);
  cc.defineGetterSetter(g, "insetBottom", g.getInsetBottom, g.setInsetBottom);
  g = null;
  ccui.Scale9Sprite.create = function (a, b, d) {
    return new ccui.Scale9Sprite(a, b, d);
  };
  ccui.Scale9Sprite.createWithSpriteFrame = function (a, b) {
    return new ccui.Scale9Sprite(a, b);
  };
  ccui.Scale9Sprite.createWithSpriteFrameName = function (a, b) {
    return new ccui.Scale9Sprite(a, b);
  };
  ccui.Scale9Sprite.POSITIONS_CENTRE = 0;
  ccui.Scale9Sprite.POSITIONS_TOP = 1;
  ccui.Scale9Sprite.POSITIONS_LEFT = 2;
  ccui.Scale9Sprite.POSITIONS_RIGHT = 3;
  ccui.Scale9Sprite.POSITIONS_BOTTOM = 4;
  ccui.Scale9Sprite.POSITIONS_TOPRIGHT = 5;
  ccui.Scale9Sprite.POSITIONS_TOPLEFT = 6;
  ccui.Scale9Sprite.POSITIONS_BOTTOMRIGHT = 7;
  ccui.Scale9Sprite.state = { NORMAL: 0, GRAY: 1 };
  var h = (ccui.Scale9Sprite.RenderingType = { SIMPLE: 0, SLICED: 1 });
})();
(function () {
  ccui.Scale9Sprite.CanvasRenderCmd = function (a) {
    cc.Node.CanvasRenderCmd.call(this, a);
    this._needDraw = !0;
    this._state = ccui.Scale9Sprite.state.NORMAL;
    this._originalTexture = this._textureToRender = null;
  };
  var a = (ccui.Scale9Sprite.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  a.constructor = ccui.Scale9Sprite.CanvasRenderCmd;
  a.transform = function (a, d) {
    this.originTransform(a, d);
    this._node._rebuildQuads();
  };
  a.needDraw = function () {
    return this._needDraw && this._node.loaded();
  };
  a._updateDisplayColor = function (a) {
    cc.Node.RenderCmd.prototype._updateDisplayColor.call(this, a);
    this._originalTexture = this._textureToRender = null;
  };
  a.setState = function (a) {
    this._state !== a &&
      ((this._state = a),
      (this._originalTexture = this._textureToRender = null));
  };
  a._setColorDirty = function () {
    this.setDirtyFlag(
      cc.Node._dirtyFlags.colorDirty | cc.Node._dirtyFlags.opacityDirty
    );
  };
  a.rendering = function (a, d, e) {
    var f = this._node,
      g = this._displayedOpacity,
      h = g / 255,
      k = null;
    f._spriteFrame && (k = f._spriteFrame._texture);
    if (f.loaded() && 0 !== g) {
      if (null === this._textureToRender || this._originalTexture !== k)
        (this._textureToRender = this._originalTexture = k),
          cc.Scale9Sprite.state.GRAY === this._state &&
            (this._textureToRender = this._textureToRender._generateGrayTexture()),
          (g = f.getDisplayedColor()),
          !k ||
            (255 === g.r && 255 === g.g && 255 === g.b) ||
            (this._textureToRender = this._textureToRender._generateColorTexture(
              g.r,
              g.g,
              g.b
            ));
      k = a || cc._renderContext;
      a = k.getContext();
      k.setTransform(this._worldTransform, d, e);
      k.setCompositeOperation(
        cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(f._blendFunc)
      );
      k.setGlobalAlpha(h);
      if (this._textureToRender) {
        f._quadsDirty && f._rebuildQuads();
        var m, n, p, r, s, u, v;
        d = this._textureToRender._pixelsWide;
        e = this._textureToRender._pixelsHigh;
        var h = this._textureToRender._htmlElementObj,
          g = f._vertices,
          t = f._uvs,
          w = 0,
          x = 0;
        if (f._renderingType === cc.Scale9Sprite.RenderingType.SLICED) {
          for (k = 0; 3 > k; ++k)
            for (w = 0; 3 > w; ++w)
              (x = 8 * k + 2 * w),
                (r = g[x]),
                (s = g[x + 1]),
                (u = g[x + 10] - r),
                (v = g[x + 11] - s),
                (s = -s - v),
                (f = t[x] * d),
                (m = t[x + 11] * e),
                (n = (t[x + 10] - t[x]) * d),
                (p = (t[x + 1] - t[x + 11]) * e),
                0 < n &&
                  0 < p &&
                  0 < u &&
                  0 < v &&
                  a.drawImage(h, f, m, n, p, r, s, u, v);
          cc.g_NumberOfDraws += 9;
        } else {
          for (var y = Math.floor(f._vertCount / 4), x = (w = 0); w < y; w++)
            (r = g[x]),
              (s = g[x + 1]),
              (u = g[x + 6] - r),
              (v = g[x + 7] - s),
              (s = -s - v),
              (f = t[x] * d),
              (m = t[x + 7] * e),
              (n = (t[x + 6] - t[x]) * d),
              (p = (t[x + 1] - t[x + 7]) * e),
              "" !== this._textureToRender._pattern
                ? (k.setFillStyle(
                    a.createPattern(h, this._textureToRender._pattern)
                  ),
                  a.fillRect(r, s, u, v))
                : 0 < n &&
                  0 < p &&
                  0 < u &&
                  0 < v &&
                  a.drawImage(h, f, m, n, p, r, s, u, v),
              (x += 8);
          cc.g_NumberOfDraws += y;
        }
      }
    }
  };
})();
(function () {
  if (cc.Node.WebGLRenderCmd) {
    ccui.Scale9Sprite.WebGLRenderCmd = function (a) {
      cc.Node.WebGLRenderCmd.call(this, a);
      this._needDraw = !0;
      this._color = new Uint32Array(1);
      this._dirty = !1;
      this._shaderProgram = cc.shaderCache.programForKey(
        cc.SHADER_SPRITE_POSITION_TEXTURECOLOR
      );
    };
    var a = ccui.Scale9Sprite,
      b = (ccui.Scale9Sprite.WebGLRenderCmd.prototype = Object.create(
        cc.Node.WebGLRenderCmd.prototype
      ));
    b.constructor = ccui.Scale9Sprite.WebGLRenderCmd;
    b.needDraw = function () {
      return this._needDraw && this._node.loaded();
    };
    b._uploadSliced = function (a, b, f, g, h, k, m) {
      for (var n, p = 0; 3 > p; ++p)
        for (var r = 0; 3 > r; ++r)
          (n = 8 * p + 2 * r),
            (h[m] = a[n]),
            (h[m + 1] = a[n + 1]),
            (h[m + 2] = g),
            (k[m + 3] = f[0]),
            (h[m + 4] = b[n]),
            (h[m + 5] = b[n + 1]),
            (m += 6),
            (h[m] = a[n + 2]),
            (h[m + 1] = a[n + 3]),
            (h[m + 2] = g),
            (k[m + 3] = f[0]),
            (h[m + 4] = b[n + 2]),
            (h[m + 5] = b[n + 3]),
            (m += 6),
            (h[m] = a[n + 8]),
            (h[m + 1] = a[n + 9]),
            (h[m + 2] = g),
            (k[m + 3] = f[0]),
            (h[m + 4] = b[n + 8]),
            (h[m + 5] = b[n + 9]),
            (m += 6),
            (h[m] = a[n + 10]),
            (h[m + 1] = a[n + 11]),
            (h[m + 2] = g),
            (k[m + 3] = f[0]),
            (h[m + 4] = b[n + 10]),
            (h[m + 5] = b[n + 11]),
            (m += 6);
      return 36;
    };
    b.transform = function (a, b) {
      this.originTransform(a, b);
      this._node._rebuildQuads();
    };
    b._setColorDirty = function () {};
    b.uploadData = function (b, e, f) {
      var g = this._node;
      if (0 === this._displayedOpacity) return 0;
      g._quadsDirty && g._rebuildQuads();
      var h = this._displayedOpacity,
        k = this._displayedColor.r,
        m = this._displayedColor.g,
        n = this._displayedColor.b;
      if (g._opacityModifyRGB)
        var p = h / 255,
          k = k * p,
          m = m * p,
          n = n * p;
      this._color[0] = (h << 24) | (n << 16) | (m << 8) | k;
      h = g._vertexZ;
      k = g._vertices;
      m = g._uvs;
      p = a.RenderingType;
      n = 0;
      switch (g._renderingType) {
        case p.SIMPLE:
          n = this._node._vertCount;
          for (p = g = 0; g < n; g++, p += 2)
            (b[f] = k[p]),
              (b[f + 1] = k[p + 1]),
              (b[f + 2] = h),
              (e[f + 3] = this._color[0]),
              (b[f + 4] = m[p]),
              (b[f + 5] = m[p + 1]),
              (f += 6);
          break;
        case p.SLICED:
          n = this._uploadSliced(k, m, this._color, h, b, e, f);
      }
      return n;
    };
    b.setState = function (b) {
      b === a.state.NORMAL
        ? (this._shaderProgram = cc.shaderCache.programForKey(
            cc.SHADER_SPRITE_POSITION_TEXTURECOLOR
          ))
        : b === a.state.GRAY &&
          (this._shaderProgram = cc.shaderCache.programForKey(
            cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY
          ));
    };
  }
})();
ccui.Layout = ccui.Widget.extend({
  _clippingEnabled: !1,
  _backGroundScale9Enabled: null,
  _backGroundImage: null,
  _backGroundImageFileName: null,
  _backGroundImageCapInsets: null,
  _colorType: null,
  _bgImageTexType: ccui.Widget.LOCAL_TEXTURE,
  _colorRender: null,
  _gradientRender: null,
  _color: null,
  _startColor: null,
  _endColor: null,
  _alongVector: null,
  _opacity: 255,
  _backGroundImageTextureSize: null,
  _layoutType: null,
  _doLayoutDirty: !0,
  _clippingRectDirty: !0,
  _clippingType: null,
  _clippingStencil: null,
  _scissorRectDirty: !1,
  _clippingRect: null,
  _clippingParent: null,
  _className: "Layout",
  _backGroundImageColor: null,
  _finalPositionX: 0,
  _finalPositionY: 0,
  _backGroundImageOpacity: 0,
  _loopFocus: !1,
  __passFocusToChild: !0,
  _isFocusPassing: !1,
  _isInterceptTouch: !1,
  ctor: function () {
    this._layoutType = ccui.Layout.ABSOLUTE;
    this._widgetType = ccui.Widget.TYPE_CONTAINER;
    this._clippingType = ccui.Layout.CLIPPING_SCISSOR;
    this._colorType = ccui.Layout.BG_COLOR_NONE;
    ccui.Widget.prototype.ctor.call(this);
    this.ignoreContentAdaptWithSize(!1);
    this.setContentSize(cc.size(0, 0));
    this.setAnchorPoint(0, 0);
    this.onPassFocusToChild = this._findNearestChildWidgetIndex.bind(this);
    this._backGroundImageCapInsets = cc.rect(0, 0, 0, 0);
    this._color = cc.color(255, 255, 255, 255);
    this._startColor = cc.color(255, 255, 255, 255);
    this._endColor = cc.color(255, 255, 255, 255);
    this._alongVector = cc.p(0, -1);
    this._backGroundImageTextureSize = cc.size(0, 0);
    this._clippingRect = cc.rect(0, 0, 0, 0);
    this._backGroundImageColor = cc.color(255, 255, 255, 255);
  },
  onEnter: function () {
    ccui.Widget.prototype.onEnter.call(this);
    this._clippingStencil &&
      this._clippingStencil._performRecursive(
        cc.Node._stateCallbackType.onEnter
      );
    this._clippingRectDirty = this._doLayoutDirty = !0;
  },
  onExit: function () {
    ccui.Widget.prototype.onExit.call(this);
    this._clippingStencil &&
      this._clippingStencil._performRecursive(
        cc.Node._stateCallbackType.onExit
      );
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      this._adaptRenderers();
      this._doLayout();
      b.visit(d);
      a =
        this._clippingEnabled &&
        this._clippingType === ccui.Layout.CLIPPING_STENCIL;
      var e =
        this._clippingEnabled &&
        this._clippingType === ccui.Layout.CLIPPING_SCISSOR;
      a ? b.stencilClippingVisit(d) : e && b.scissorClippingVisit(d);
      var f = this._children,
        g = f.length,
        h,
        k = this._protectedChildren,
        m = k.length,
        n;
      this._reorderChildDirty && this.sortAllChildren();
      this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
      for (d = 0; d < g; d++)
        if (((h = f[d]), 0 > h._localZOrder)) h.visit(this);
        else break;
      for (h = 0; h < m; h++)
        if (((n = k[h]), 0 > n._localZOrder))
          b._changeProtectedChild(n), n.visit(this);
        else break;
      for (; d < g; d++) f[d].visit(this);
      for (; h < m; h++) (n = k[h]), b._changeProtectedChild(n), n.visit(this);
      a ? b.postStencilVisit() : e && b.postScissorVisit();
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  setLoopFocus: function (a) {
    this._loopFocus = a;
  },
  isLoopFocus: function () {
    return this._loopFocus;
  },
  setPassFocusToChild: function (a) {
    this.__passFocusToChild = a;
  },
  isPassFocusToChild: function () {
    return this.__passFocusToChild;
  },
  findNextFocusedWidget: function (a, b) {
    if (this._isFocusPassing || this.isFocused()) {
      var d = this.getParent();
      this._isFocusPassing = !1;
      if (this.__passFocusToChild) {
        var e = this._passFocusToChild(a, b);
        return e instanceof ccui.Layout && d
          ? ((d._isFocusPassing = !0), d.findNextFocusedWidget(a, this))
          : e;
      }
      if (null == d || !(d instanceof ccui.Layout)) return this;
      d._isFocusPassing = !0;
      return d.findNextFocusedWidget(a, this);
    }
    if (b.isFocused() || b instanceof ccui.Layout)
      if (this._layoutType === ccui.Layout.LINEAR_HORIZONTAL)
        switch (a) {
          case ccui.Widget.LEFT:
            return this._getPreviousFocusedWidget(a, b);
          case ccui.Widget.RIGHT:
            return this._getNextFocusedWidget(a, b);
          case ccui.Widget.DOWN:
          case ccui.Widget.UP:
            return this._isLastWidgetInContainer(this, a)
              ? this._isWidgetAncestorSupportLoopFocus(b, a)
                ? ccui.Widget.prototype.findNextFocusedWidget.call(
                    this,
                    a,
                    this
                  )
                : b
              : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this);
          default:
            return cc.assert(0, "Invalid Focus Direction"), b;
        }
      else if (this._layoutType === ccui.Layout.LINEAR_VERTICAL)
        switch (a) {
          case ccui.Widget.LEFT:
          case ccui.Widget.RIGHT:
            return this._isLastWidgetInContainer(this, a)
              ? this._isWidgetAncestorSupportLoopFocus(b, a)
                ? ccui.Widget.prototype.findNextFocusedWidget.call(
                    this,
                    a,
                    this
                  )
                : b
              : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this);
          case ccui.Widget.DOWN:
            return this._getNextFocusedWidget(a, b);
          case ccui.Widget.UP:
            return this._getPreviousFocusedWidget(a, b);
          default:
            return cc.assert(0, "Invalid Focus Direction"), b;
        }
      else
        return (
          cc.assert(
            0,
            "Un Supported Layout type, please use VBox and HBox instead!!!"
          ),
          b
        );
    else return b;
  },
  onPassFocusToChild: null,
  addChild: function (a, b, d) {
    a instanceof ccui.Widget && this._supplyTheLayoutParameterLackToChild(a);
    ccui.Widget.prototype.addChild.call(this, a, b, d);
    this._doLayoutDirty = !0;
  },
  removeChild: function (a, b) {
    ccui.Widget.prototype.removeChild.call(this, a, b);
    this._doLayoutDirty = !0;
  },
  removeAllChildren: function (a) {
    ccui.Widget.prototype.removeAllChildren.call(this, a);
    this._doLayoutDirty = !0;
  },
  removeAllChildrenWithCleanup: function (a) {
    ccui.Widget.prototype.removeAllChildrenWithCleanup.call(this, a);
    this._doLayoutDirty = !0;
  },
  isClippingEnabled: function () {
    return this._clippingEnabled;
  },
  setClippingEnabled: function (a) {
    if (a !== this._clippingEnabled)
      switch (((this._clippingEnabled = a), this._clippingType)) {
        case ccui.Layout.CLIPPING_SCISSOR:
        case ccui.Layout.CLIPPING_STENCIL:
          a
            ? ((this._clippingStencil = new cc.DrawNode()),
              this._renderCmd.rebindStencilRendering(this._clippingStencil),
              this._running &&
                this._clippingStencil._performRecursive(
                  cc.Node._stateCallbackType.onEnter
                ),
              this._setStencilClippingSize(this._contentSize))
            : (this._running &&
                this._clippingStencil &&
                this._clippingStencil._performRecursive(
                  cc.Node._stateCallbackType.onExit
                ),
              (this._clippingStencil = null));
      }
  },
  setClippingType: function (a) {
    if (a !== this._clippingType) {
      var b = this.isClippingEnabled();
      this.setClippingEnabled(!1);
      this._clippingType = a;
      this.setClippingEnabled(b);
    }
  },
  getClippingType: function () {
    return this._clippingType;
  },
  _setStencilClippingSize: function (a) {
    if (this._clippingEnabled) {
      var b = [];
      b[0] = cc.p(0, 0);
      b[1] = cc.p(a.width, 0);
      b[2] = cc.p(a.width, a.height);
      b[3] = cc.p(0, a.height);
      var d = cc.color.GREEN;
      this._clippingStencil.clear();
      this._clippingStencil.setLocalBB &&
        this._clippingStencil.setLocalBB(0, 0, a.width, a.height);
      this._clippingStencil.drawPoly(b, 4, d, 0, d);
    }
  },
  _getClippingRect: function () {
    if (this._clippingRectDirty) {
      var a = this.convertToWorldSpace(cc.p(0, 0)),
        b = this.getNodeToWorldTransform(),
        d = this._contentSize.width * b.a,
        b = this._contentSize.height * b.d,
        e;
      for (e = this; e; )
        if (
          (e = e.getParent()) &&
          e instanceof ccui.Layout &&
          e.isClippingEnabled()
        ) {
          this._clippingParent = e;
          break;
        }
      this._clippingParent
        ? ((e = this._clippingParent._getClippingRect()),
          (this._clippingRect.x = Math.max(a.x, e.x)),
          (this._clippingRect.y = Math.max(a.y, e.y)),
          (d = Math.min(a.x + d, e.x + e.width)),
          (a = Math.min(a.y + b, e.y + e.height)),
          (this._clippingRect.width = Math.max(0, d - this._clippingRect.x)),
          (this._clippingRect.height = Math.max(0, a - this._clippingRect.y)))
        : ((this._clippingRect.x = a.x),
          (this._clippingRect.y = a.y),
          (this._clippingRect.width = d),
          (this._clippingRect.height = b));
      this._clippingRectDirty = !1;
    }
    return this._clippingRect;
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    var a = this._contentSize;
    this._setStencilClippingSize(a);
    this._clippingRectDirty = this._doLayoutDirty = !0;
    this._backGroundImage &&
      (this._backGroundImage.setPosition(0.5 * a.width, 0.5 * a.height),
      this._backGroundScale9Enabled &&
        this._backGroundImage instanceof ccui.Scale9Sprite &&
        this._backGroundImage.setPreferredSize(a));
    this._colorRender && this._colorRender.setContentSize(a);
    this._gradientRender && this._gradientRender.setContentSize(a);
  },
  setBackGroundImageScale9Enabled: function (a) {
    this._backGroundScale9Enabled !== a &&
      (this.removeProtectedChild(this._backGroundImage),
      (this._backGroundImage = null),
      (this._backGroundScale9Enabled = a),
      this._addBackGroundImage(),
      this.setBackGroundImage(
        this._backGroundImageFileName,
        this._bgImageTexType
      ),
      this.setBackGroundImageCapInsets(this._backGroundImageCapInsets));
  },
  isBackGroundImageScale9Enabled: function () {
    return this._backGroundScale9Enabled;
  },
  setBackGroundImage: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      null === this._backGroundImage &&
        (this._addBackGroundImage(),
        this.setBackGroundImageScale9Enabled(this._backGroundScale9Enabled));
      this._backGroundImageFileName = a;
      this._bgImageTexType = b;
      var d = this._backGroundImage;
      switch (this._bgImageTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._backGroundScale9Enabled && d.setPreferredSize(this._contentSize);
      this._backGroundImageTextureSize = d.getContentSize();
      d.setPosition(
        0.5 * this._contentSize.width,
        0.5 * this._contentSize.height
      );
      this._updateBackGroundImageColor();
    }
  },
  setBackGroundImageCapInsets: function (a) {
    if (a) {
      var b = this._backGroundImageCapInsets;
      b.x = a.x;
      b.y = a.y;
      b.width = a.width;
      b.height = a.height;
      this._backGroundScale9Enabled && this._backGroundImage.setCapInsets(a);
    }
  },
  getBackGroundImageCapInsets: function () {
    return cc.rect(this._backGroundImageCapInsets);
  },
  _supplyTheLayoutParameterLackToChild: function (a) {
    if (a)
      switch (this._layoutType) {
        case ccui.Layout.LINEAR_HORIZONTAL:
        case ccui.Layout.LINEAR_VERTICAL:
          var b = a.getLayoutParameter(ccui.LayoutParameter.LINEAR);
          b || a.setLayoutParameter(new ccui.LinearLayoutParameter());
          break;
        case ccui.Layout.RELATIVE:
          (b = a.getLayoutParameter(ccui.LayoutParameter.RELATIVE)) ||
            a.setLayoutParameter(new ccui.RelativeLayoutParameter());
      }
  },
  _addBackGroundImage: function () {
    var a = this._contentSize;
    this._backGroundScale9Enabled
      ? ((this._backGroundImage = new ccui.Scale9Sprite()),
        this._backGroundImage.setPreferredSize(a))
      : (this._backGroundImage = new cc.Sprite());
    this.addProtectedChild(
      this._backGroundImage,
      ccui.Layout.BACKGROUND_IMAGE_ZORDER,
      -1
    );
    this._backGroundImage.setPosition(0.5 * a.width, 0.5 * a.height);
  },
  removeBackGroundImage: function () {
    this._backGroundImage &&
      (this.removeProtectedChild(this._backGroundImage),
      (this._backGroundImage = null),
      (this._backGroundImageFileName = ""),
      (this._backGroundImageTextureSize.width = 0),
      (this._backGroundImageTextureSize.height = 0));
  },
  setBackGroundColorType: function (a) {
    if (this._colorType !== a) {
      switch (this._colorType) {
        case ccui.Layout.BG_COLOR_NONE:
          this._colorRender &&
            (this.removeProtectedChild(this._colorRender),
            (this._colorRender = null));
          this._gradientRender &&
            (this.removeProtectedChild(this._gradientRender),
            (this._gradientRender = null));
          break;
        case ccui.Layout.BG_COLOR_SOLID:
          this._colorRender &&
            (this.removeProtectedChild(this._colorRender),
            (this._colorRender = null));
          break;
        case ccui.Layout.BG_COLOR_GRADIENT:
          this._gradientRender &&
            (this.removeProtectedChild(this._gradientRender),
            (this._gradientRender = null));
      }
      this._colorType = a;
      switch (this._colorType) {
        case ccui.Layout.BG_COLOR_SOLID:
          this._colorRender = new cc.LayerColor();
          this._colorRender.setContentSize(this._contentSize);
          this._colorRender.setOpacity(this._opacity);
          this._colorRender.setColor(this._color);
          this.addProtectedChild(
            this._colorRender,
            ccui.Layout.BACKGROUND_RENDERER_ZORDER,
            -1
          );
          break;
        case ccui.Layout.BG_COLOR_GRADIENT:
          (this._gradientRender = new cc.LayerGradient(
            cc.color(255, 0, 0, 255),
            cc.color(0, 255, 0, 255)
          )),
            this._gradientRender.setContentSize(this._contentSize),
            this._gradientRender.setOpacity(this._opacity),
            this._gradientRender.setStartColor(this._startColor),
            this._gradientRender.setEndColor(this._endColor),
            this._gradientRender.setVector(this._alongVector),
            this.addProtectedChild(
              this._gradientRender,
              ccui.Layout.BACKGROUND_RENDERER_ZORDER,
              -1
            );
      }
    }
  },
  getBackGroundColorType: function () {
    return this._colorType;
  },
  setBackGroundColor: function (a, b) {
    b
      ? ((this._startColor.r = a.r),
        (this._startColor.g = a.g),
        (this._startColor.b = a.b),
        this._gradientRender && this._gradientRender.setStartColor(a),
        (this._endColor.r = b.r),
        (this._endColor.g = b.g),
        (this._endColor.b = b.b),
        this._gradientRender && this._gradientRender.setEndColor(b))
      : ((this._color.r = a.r),
        (this._color.g = a.g),
        (this._color.b = a.b),
        this._colorRender && this._colorRender.setColor(a));
  },
  getBackGroundColor: function () {
    var a = this._color;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getBackGroundStartColor: function () {
    var a = this._startColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getBackGroundEndColor: function () {
    var a = this._endColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  setBackGroundColorOpacity: function (a) {
    this._opacity = a;
    switch (this._colorType) {
      case ccui.Layout.BG_COLOR_SOLID:
        this._colorRender.setOpacity(a);
        break;
      case ccui.Layout.BG_COLOR_GRADIENT:
        this._gradientRender.setOpacity(a);
    }
  },
  getBackGroundColorOpacity: function () {
    return this._opacity;
  },
  setBackGroundColorVector: function (a) {
    this._alongVector.x = a.x;
    this._alongVector.y = a.y;
    this._gradientRender && this._gradientRender.setVector(a);
  },
  getBackGroundColorVector: function () {
    return this._alongVector;
  },
  setBackGroundImageColor: function (a) {
    this._backGroundImageColor.r = a.r;
    this._backGroundImageColor.g = a.g;
    this._backGroundImageColor.b = a.b;
    this._updateBackGroundImageColor();
  },
  setBackGroundImageOpacity: function (a) {
    this._backGroundImageColor.a = a;
    this.getBackGroundImageColor();
  },
  getBackGroundImageColor: function () {
    var a = this._backGroundImageColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getBackGroundImageOpacity: function () {
    return this._backGroundImageColor.a;
  },
  _updateBackGroundImageColor: function () {
    this._backGroundImage &&
      this._backGroundImage.setColor(this._backGroundImageColor);
  },
  getBackGroundImageTextureSize: function () {
    return this._backGroundImageTextureSize;
  },
  setLayoutType: function (a) {
    this._layoutType = a;
    a = this._children;
    for (var b = null, d = 0; d < a.length; d++)
      (b = a[d]),
        b instanceof ccui.Widget &&
          this._supplyTheLayoutParameterLackToChild(b);
    this._doLayoutDirty = !0;
  },
  getLayoutType: function () {
    return this._layoutType;
  },
  requestDoLayout: function () {
    this._doLayoutDirty = !0;
  },
  _doLayout: function () {
    if (this._doLayoutDirty) {
      this.sortAllChildren();
      var a = ccui.getLayoutManager(this._layoutType);
      a && a._doLayout(this);
      this._doLayoutDirty = !1;
    }
  },
  _getLayoutContentSize: function () {
    return this.getContentSize();
  },
  _getLayoutElements: function () {
    return this.getChildren();
  },
  _updateBackGroundImageOpacity: function () {
    this._backGroundImage &&
      this._backGroundImage.setOpacity(this._backGroundImageOpacity);
  },
  _updateBackGroundImageRGBA: function () {
    this._backGroundImage &&
      (this._backGroundImage.setColor(this._backGroundImageColor),
      this._backGroundImage.setOpacity(this._backGroundImageOpacity));
  },
  _getLayoutAccumulatedSize: function () {
    for (
      var a = this.getChildren(),
        b = cc.size(0, 0),
        d = 0,
        e,
        f = 0,
        g = a.length;
      f < g;
      f++
    )
      if (((e = a[f]), null !== e && e instanceof ccui.Layout))
        (e = e._getLayoutAccumulatedSize()),
          (b.width += e.width),
          (b.height += e.height);
      else if (e instanceof ccui.Widget) {
        d++;
        var h = e.getLayoutParameter().getMargin();
        e = e.getContentSize();
        b.width += e.width + 0.5 * (h.right + h.left);
        b.height += e.height + 0.5 * (h.top + h.bottom);
      }
    a = this.getLayoutType();
    a === ccui.Layout.LINEAR_HORIZONTAL &&
      (b.height -= (b.height / d) * (d - 1));
    a === ccui.Layout.LINEAR_VERTICAL && (b.width -= (b.width / d) * (d - 1));
    return b;
  },
  _findNearestChildWidgetIndex: function (a, b) {
    if (null == b || b === this)
      return this._findFirstFocusEnabledWidgetIndex();
    var d = 0,
      e = this.getChildren(),
      f = e.length,
      g,
      h = cc.FLT_MAX,
      k = 0;
    if (
      a === ccui.Widget.LEFT ||
      a === ccui.Widget.RIGHT ||
      a === ccui.Widget.DOWN ||
      a === ccui.Widget.UP
    ) {
      for (g = this._getWorldCenterPoint(b); d < f; ) {
        var m = e[d];
        m &&
          m instanceof ccui.Widget &&
          m.isFocusEnabled() &&
          ((m =
            m instanceof ccui.Layout
              ? m._calculateNearestDistance(b)
              : cc.pLength(cc.pSub(this._getWorldCenterPoint(m), g))),
          m < h && ((k = d), (h = m)));
        d++;
      }
      return k;
    }
    cc.log("invalid focus direction!");
    return 0;
  },
  _findFarthestChildWidgetIndex: function (a, b) {
    if (null == b || b === this)
      return this._findFirstFocusEnabledWidgetIndex();
    var d = 0,
      e = this.getChildren(),
      f = e.length,
      g = -cc.FLT_MAX,
      h = 0;
    if (
      a === ccui.Widget.LEFT ||
      a === ccui.Widget.RIGHT ||
      a === ccui.Widget.DOWN ||
      a === ccui.Widget.UP
    ) {
      for (var k = this._getWorldCenterPoint(b); d < f; ) {
        var m = e[d];
        m &&
          m instanceof ccui.Widget &&
          m.isFocusEnabled() &&
          ((m =
            m instanceof ccui.Layout
              ? m._calculateFarthestDistance(b)
              : cc.pLength(cc.pSub(this._getWorldCenterPoint(m), k))),
          m > g && ((h = d), (g = m)));
        d++;
      }
      return h;
    }
    cc.log("invalid focus direction!!!");
    return 0;
  },
  _calculateNearestDistance: function (a) {
    for (
      var b = cc.FLT_MAX,
        d = this._getWorldCenterPoint(a),
        e = this._children,
        f = 0,
        g = e.length;
      f < g;
      f++
    ) {
      var h = e[f];
      if (h instanceof ccui.Layout) h = h._calculateNearestDistance(a);
      else if (h instanceof ccui.Widget && h.isFocusEnabled())
        h = cc.pLength(cc.pSub(this._getWorldCenterPoint(h), d));
      else continue;
      h < b && (b = h);
    }
    return b;
  },
  _calculateFarthestDistance: function (a) {
    for (
      var b = -cc.FLT_MAX,
        d = this._getWorldCenterPoint(a),
        e = this._children,
        f = 0,
        g = e.length;
      f < g;
      f++
    ) {
      var h = e[f];
      if (h instanceof ccui.Layout) h = h._calculateFarthestDistance(a);
      else if (h instanceof ccui.Widget && h.isFocusEnabled())
        (h = this._getWorldCenterPoint(h)), (h = cc.pLength(cc.pSub(h, d)));
      else continue;
      h > b && (b = h);
    }
    return b;
  },
  _findProperSearchingFunctor: function (a, b) {
    if (void 0 !== b) {
      var d = this._getWorldCenterPoint(b),
        e = this._getWorldCenterPoint(this._findFirstNonLayoutWidget());
      a === ccui.Widget.LEFT
        ? (this.onPassFocusToChild =
            d.x > e.x
              ? this._findNearestChildWidgetIndex
              : this._findFarthestChildWidgetIndex)
        : a === ccui.Widget.RIGHT
        ? (this.onPassFocusToChild =
            d.x > e.x
              ? this._findFarthestChildWidgetIndex
              : this._findNearestChildWidgetIndex)
        : a === ccui.Widget.DOWN
        ? (this.onPassFocusToChild =
            d.y > e.y
              ? this._findNearestChildWidgetIndex
              : this._findFarthestChildWidgetIndex)
        : a === ccui.Widget.UP
        ? (this.onPassFocusToChild =
            d.y < e.y
              ? this._findNearestChildWidgetIndex
              : this._findFarthestChildWidgetIndex)
        : cc.log("invalid direction!");
    }
  },
  _findFirstNonLayoutWidget: function () {
    for (var a = this._children, b = 0, d = a.length; b < d; b++) {
      var e = a[b];
      if (e instanceof ccui.Layout) {
        if ((e = e._findFirstNonLayoutWidget())) return e;
      } else if (e instanceof ccui.Widget) return e;
    }
    return null;
  },
  _findFirstFocusEnabledWidgetIndex: function () {
    for (var a = 0, b = this.getChildren(), d = b.length; a < d; ) {
      var e = b[a];
      if (e && e instanceof ccui.Widget && e.isFocusEnabled()) return a;
      a++;
    }
    return 0;
  },
  _findFocusEnabledChildWidgetByIndex: function (a) {
    var b = this._getChildWidgetByIndex(a);
    return b
      ? b.isFocusEnabled()
        ? b
        : this._findFocusEnabledChildWidgetByIndex(a + 1)
      : null;
  },
  _getWorldCenterPoint: function (a) {
    var b =
      a instanceof ccui.Layout
        ? a._getLayoutAccumulatedSize()
        : a.getContentSize();
    return a.convertToWorldSpace(cc.p(b.width / 2, b.height / 2));
  },
  _getNextFocusedWidget: function (a, b) {
    var d = null,
      d = this._children,
      e = d.indexOf(b),
      e = e + 1;
    if (e < d.length) {
      if ((d = this._getChildWidgetByIndex(e))) {
        if (d.isFocusEnabled()) {
          if (d instanceof ccui.Layout)
            return (d._isFocusPassing = !0), d.findNextFocusedWidget(a, d);
          this.dispatchFocusEvent(b, d);
          return d;
        }
        return this._getNextFocusedWidget(a, d);
      }
      return b;
    }
    if (this._loopFocus) {
      if (this._checkFocusEnabledChild()) {
        d = this._getChildWidgetByIndex(0);
        if (d.isFocusEnabled()) {
          if (d instanceof ccui.Layout)
            return (d._isFocusPassing = !0), d.findNextFocusedWidget(a, d);
          this.dispatchFocusEvent(b, d);
          return d;
        }
        return this._getNextFocusedWidget(a, d);
      }
      return b instanceof ccui.Layout ? b : ccui.Widget._focusedWidget;
    }
    return this._isLastWidgetInContainer(b, a)
      ? this._isWidgetAncestorSupportLoopFocus(this, a)
        ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this)
        : b instanceof ccui.Layout
        ? b
        : ccui.Widget._focusedWidget
      : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this);
  },
  _getPreviousFocusedWidget: function (a, b) {
    var d = null,
      d = this._children,
      e = d.indexOf(b),
      e = e - 1;
    if (0 <= e) {
      d = this._getChildWidgetByIndex(e);
      if (d.isFocusEnabled()) {
        if (d instanceof ccui.Layout)
          return (d._isFocusPassing = !0), d.findNextFocusedWidget(a, d);
        this.dispatchFocusEvent(b, d);
        return d;
      }
      return this._getPreviousFocusedWidget(a, d);
    }
    if (this._loopFocus) {
      if (this._checkFocusEnabledChild()) {
        e = d.length - 1;
        d = this._getChildWidgetByIndex(e);
        if (d.isFocusEnabled()) {
          if (d instanceof ccui.Layout)
            return (d._isFocusPassing = !0), d.findNextFocusedWidget(a, d);
          this.dispatchFocusEvent(b, d);
          return d;
        }
        return this._getPreviousFocusedWidget(a, d);
      }
      return b instanceof ccui.Layout ? b : ccui.Widget._focusedWidget;
    }
    return this._isLastWidgetInContainer(b, a)
      ? this._isWidgetAncestorSupportLoopFocus(this, a)
        ? ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this)
        : b instanceof ccui.Layout
        ? b
        : ccui.Widget._focusedWidget
      : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, this);
  },
  _getChildWidgetByIndex: function (a) {
    for (var b = this._children, d = b.length, e = 0, f = a; a < d; ) {
      var g = b[a];
      if (g && g instanceof ccui.Widget) return g;
      e++;
      a++;
    }
    for (a = 0; a < f; ) {
      if ((d = b[a]) && d instanceof ccui.Widget) return d;
      e++;
      a++;
    }
    return null;
  },
  _isLastWidgetInContainer: function (a, b) {
    var d = a.getParent();
    if (null == d || !(d instanceof ccui.Layout)) return !0;
    var e = d.getChildren(),
      f = e.indexOf(a);
    if (d.getLayoutType() === ccui.Layout.LINEAR_HORIZONTAL) {
      if (b === ccui.Widget.LEFT)
        return 0 === f ? this._isLastWidgetInContainer(d, b) : !1;
      if (b === ccui.Widget.RIGHT)
        return f === e.length - 1 ? this._isLastWidgetInContainer(d, b) : !1;
      if (b === ccui.Widget.DOWN || b === ccui.Widget.UP)
        return this._isLastWidgetInContainer(d, b);
    } else if (d.getLayoutType() === ccui.Layout.LINEAR_VERTICAL) {
      if (b === ccui.Widget.UP)
        return 0 === f ? this._isLastWidgetInContainer(d, b) : !1;
      if (b === ccui.Widget.DOWN)
        return f === e.length - 1 ? this._isLastWidgetInContainer(d, b) : !1;
      if (b === ccui.Widget.LEFT || b === ccui.Widget.RIGHT)
        return this._isLastWidgetInContainer(d, b);
    } else return cc.log("invalid layout Type"), !1;
  },
  _isWidgetAncestorSupportLoopFocus: function (a, b) {
    var d = a.getParent();
    if (null == d || !(d instanceof ccui.Layout)) return !1;
    if (d.isLoopFocus()) {
      var e = d.getLayoutType();
      if (e === ccui.Layout.LINEAR_HORIZONTAL)
        return b === ccui.Widget.LEFT || b === ccui.Widget.RIGHT
          ? !0
          : this._isWidgetAncestorSupportLoopFocus(d, b);
      if (e === ccui.Layout.LINEAR_VERTICAL)
        return b === ccui.Widget.DOWN || b === ccui.Widget.UP
          ? !0
          : this._isWidgetAncestorSupportLoopFocus(d, b);
      cc.assert(0, "invalid layout type");
      return !1;
    }
    return this._isWidgetAncestorSupportLoopFocus(d, b);
  },
  _passFocusToChild: function (a, b) {
    if (this._checkFocusEnabledChild()) {
      var d = ccui.Widget.getCurrentFocusedWidget();
      this._findProperSearchingFunctor(a, d);
      d = this.onPassFocusToChild(a, d);
      d = this._getChildWidgetByIndex(d);
      if (d instanceof ccui.Layout)
        return (d._isFocusPassing = !0), d.findNextFocusedWidget(a, d);
      this.dispatchFocusEvent(b, d);
      return d;
    }
    return this;
  },
  _checkFocusEnabledChild: function () {
    for (var a = this._children, b = 0, d = a.length; b < d; b++) {
      var e = a[b];
      if (e && e instanceof ccui.Widget && e.isFocusEnabled()) return !0;
    }
    return !1;
  },
  getDescription: function () {
    return "Layout";
  },
  _createCloneInstance: function () {
    return new ccui.Layout();
  },
  _copyClonedWidgetChildren: function (a) {
    ccui.Widget.prototype._copyClonedWidgetChildren.call(this, a);
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.Layout &&
      (this.setBackGroundImageScale9Enabled(a._backGroundScale9Enabled),
      this.setBackGroundImage(a._backGroundImageFileName, a._bgImageTexType),
      this.setBackGroundImageCapInsets(a._backGroundImageCapInsets),
      this.setBackGroundColorType(a._colorType),
      this.setBackGroundColor(a._color),
      this.setBackGroundColor(a._startColor, a._endColor),
      this.setBackGroundColorOpacity(a._opacity),
      this.setBackGroundColorVector(a._alongVector),
      this.setLayoutType(a._layoutType),
      this.setClippingEnabled(a._clippingEnabled),
      this.setClippingType(a._clippingType),
      (this._loopFocus = a._loopFocus),
      (this.__passFocusToChild = a.__passFocusToChild),
      (this._isInterceptTouch = a._isInterceptTouch));
  },
  forceDoLayout: function () {
    this.requestDoLayout();
    this._doLayout();
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new ccui.Layout.WebGLRenderCmd(this)
      : new ccui.Layout.CanvasRenderCmd(this);
  },
});
_p = ccui.Layout.prototype;
cc.defineGetterSetter(
  _p,
  "clippingEnabled",
  _p.isClippingEnabled,
  _p.setClippingEnabled
);
cc.defineGetterSetter(_p, "clippingType", null, _p.setClippingType);
cc.defineGetterSetter(_p, "layoutType", _p.getLayoutType, _p.setLayoutType);
_p = null;
ccui.Layout.create = function () {
  return new ccui.Layout();
};
ccui.Layout.BG_COLOR_NONE = 0;
ccui.Layout.BG_COLOR_SOLID = 1;
ccui.Layout.BG_COLOR_GRADIENT = 2;
ccui.Layout.ABSOLUTE = 0;
ccui.Layout.LINEAR_VERTICAL = 1;
ccui.Layout.LINEAR_HORIZONTAL = 2;
ccui.Layout.RELATIVE = 3;
ccui.Layout.CLIPPING_STENCIL = 0;
ccui.Layout.CLIPPING_SCISSOR = 1;
ccui.Layout.BACKGROUND_IMAGE_ZORDER = -1;
ccui.Layout.BACKGROUND_RENDERER_ZORDER = -2;
(function () {
  ccui.Layout.CanvasRenderCmd = function (a) {
    this._pNodeCmdCtor(a);
    this._needDraw = !1;
    this._rendererRestoreCmd = this._rendererClipCmd = this._rendererSaveCmd = null;
  };
  var a = (ccui.Layout.CanvasRenderCmd.prototype = Object.create(
    ccui.ProtectedNode.CanvasRenderCmd.prototype
  ));
  a.constructor = ccui.Layout.CanvasRenderCmd;
  a._layoutCmdCtor = ccui.Layout.CanvasRenderCmd;
  a._onRenderSaveCmd = function (a, d, e) {
    var f = a || cc._renderContext;
    a = f.getContext();
    f.save();
    f.save();
    f.setTransform(this._worldTransform, d, e);
    d = this._node._clippingStencil._renderCmd._buffer;
    e = 0;
    for (f = d.length; e < f; e++) {
      var g = d[e].verts,
        h = g[0];
      a.beginPath();
      a.moveTo(h.x, -h.y);
      for (var h = 1, k = g.length; h < k; h++) a.lineTo(g[h].x, -g[h].y);
      a.closePath();
    }
  };
  a._onRenderClipCmd = function (a) {
    a = a || cc._renderContext;
    var d = a.getContext();
    a.restore();
    d.clip();
  };
  a._onRenderRestoreCmd = function (a) {
    a = a || cc._renderContext;
    a.getContext();
    a.restore();
  };
  a.rebindStencilRendering = function (a) {
    a._renderCmd.rendering = this.__stencilDraw;
    a._renderCmd._canUseDirtyRegion = !0;
  };
  a.__stencilDraw = function (a, d, e) {};
  a.stencilClippingVisit = a.scissorClippingVisit = function (a) {
    a = this._node;
    a._clippingStencil &&
      a._clippingStencil.isVisible() &&
      (this._rendererSaveCmd ||
        ((this._rendererSaveCmd = new cc.CustomRenderCmd(
          this,
          this._onRenderSaveCmd
        )),
        (this._rendererClipCmd = new cc.CustomRenderCmd(
          this,
          this._onRenderClipCmd
        )),
        (this._rendererRestoreCmd = new cc.CustomRenderCmd(
          this,
          this._onRenderRestoreCmd
        ))),
      cc.renderer.pushRenderCommand(this._rendererSaveCmd),
      a._clippingStencil.visit(this),
      cc.renderer.pushRenderCommand(this._rendererClipCmd));
  };
  a.postStencilVisit = a.postScissorVisit = function () {
    cc.renderer.pushRenderCommand(this._rendererRestoreCmd);
  };
  ccui.Layout.CanvasRenderCmd._getSharedCache = function () {
    return (
      cc.ClippingNode._sharedCache ||
      (cc.ClippingNode._sharedCache = document.createElement("canvas"))
    );
  };
})();
(function () {
  if (ccui.ProtectedNode.WebGLRenderCmd) {
    ccui.Layout.WebGLRenderCmd = function (a) {
      this._pNodeCmdCtor(a);
      this._needDraw = !1;
      this._currentStencilEnabled = 0;
      this._scissorOldState = !1;
      this._clippingOldRect = null;
      this._mask_layer_le = 0;
      this._afterVisitCmdScissor = this._beforeVisitCmdScissor = this._afterVisitCmdStencil = this._afterDrawStencilCmd = this._beforeVisitCmdStencil = null;
    };
    var a = (ccui.Layout.WebGLRenderCmd.prototype = Object.create(
      ccui.ProtectedNode.WebGLRenderCmd.prototype
    ));
    a.constructor = ccui.Layout.WebGLRenderCmd;
    a._layoutCmdCtor = ccui.Layout.CanvasRenderCmd;
    a._syncStatus = function (a) {
      this._originSyncStatus(a);
      a &&
        a._dirtyFlag & cc.Node._dirtyFlags.transformDirty &&
        (this._node._clippingRectDirty = !0);
    };
    a._onBeforeVisitStencil = function (a) {
      a = a || cc._renderContext;
      ccui.Layout.WebGLRenderCmd._layer++;
      var d = 1 << ccui.Layout.WebGLRenderCmd._layer;
      this._mask_layer_le = d | (d - 1);
      this._currentStencilEnabled = a.isEnabled(a.STENCIL_TEST);
      a.clear(a.DEPTH_BUFFER_BIT);
      a.enable(a.STENCIL_TEST);
      a.depthMask(!1);
      a.stencilFunc(a.NEVER, d, d);
      a.stencilOp(a.REPLACE, a.KEEP, a.KEEP);
      a.stencilMask(d);
      a.clear(a.STENCIL_BUFFER_BIT);
    };
    a._onAfterDrawStencil = function (a) {
      a = a || cc._renderContext;
      a.depthMask(!0);
      a.stencilFunc(a.EQUAL, this._mask_layer_le, this._mask_layer_le);
      a.stencilOp(a.KEEP, a.KEEP, a.KEEP);
    };
    a._onAfterVisitStencil = function (a) {
      a = a || cc._renderContext;
      ccui.Layout.WebGLRenderCmd._layer--;
      if (this._currentStencilEnabled) {
        var d = 1 << ccui.Layout.WebGLRenderCmd._layer,
          e = d | (d - 1);
        a.stencilMask(d);
        a.stencilFunc(a.EQUAL, e, e);
      } else a.disable(a.STENCIL_TEST);
    };
    a._onBeforeVisitScissor = function (a) {
      this._node._clippingRectDirty = !0;
      var d = this._node._getClippingRect();
      a = a || cc._renderContext;
      (this._scissorOldState = a.isEnabled(a.SCISSOR_TEST))
        ? ((this._clippingOldRect = cc.view.getScissorRect()),
          cc.rectEqualToRect(this._clippingOldRect, d) ||
            cc.view.setScissorInPoints(d.x, d.y, d.width, d.height))
        : (a.enable(a.SCISSOR_TEST),
          cc.view.setScissorInPoints(d.x, d.y, d.width, d.height));
    };
    a._onAfterVisitScissor = function (a) {
      a = a || cc._renderContext;
      this._scissorOldState
        ? cc.rectEqualToRect(this._clippingOldRect, this._node._clippingRect) ||
          cc.view.setScissorInPoints(
            this._clippingOldRect.x,
            this._clippingOldRect.y,
            this._clippingOldRect.width,
            this._clippingOldRect.height
          )
        : a.disable(a.SCISSOR_TEST);
    };
    a.rebindStencilRendering = function (a) {};
    a.transform = function (a, d) {
      var e = this._node;
      this.pNodeTransform(a, d);
      e._clippingStencil && e._clippingStencil._renderCmd.transform(this, d);
    };
    a.stencilClippingVisit = function (a) {
      a = this._node;
      if (a._clippingStencil && a._clippingStencil.isVisible())
        if (ccui.Layout.WebGLRenderCmd._layer + 1 === cc.stencilBits)
          (ccui.Layout.WebGLRenderCmd._visit_once = !0),
            ccui.Layout.WebGLRenderCmd._visit_once &&
              (cc.log(
                "Nesting more than " +
                  cc.stencilBits +
                  "stencils is not supported. Everything will be drawn without stencil for this node and its childs."
              ),
              (ccui.Layout.WebGLRenderCmd._visit_once = !1));
        else {
          this._beforeVisitCmdStencil ||
            ((this._beforeVisitCmdStencil = new cc.CustomRenderCmd(
              this,
              this._onBeforeVisitStencil
            )),
            (this._afterDrawStencilCmd = new cc.CustomRenderCmd(
              this,
              this._onAfterDrawStencil
            )),
            (this._afterVisitCmdStencil = new cc.CustomRenderCmd(
              this,
              this._onAfterVisitStencil
            )));
          cc.renderer.pushRenderCommand(this._beforeVisitCmdStencil);
          var d = cc.current_stack;
          d.stack.push(d.top);
          d.top = this._stackMatrix;
          a._clippingStencil.visit(this);
          cc.renderer.pushRenderCommand(this._afterDrawStencilCmd);
        }
    };
    a.postStencilVisit = function () {
      renderer.pushRenderCommand(cmd._afterVisitCmdStencil);
      cc.current_stack.top = cc.current_stack.stack.pop();
    };
    a.scissorClippingVisit = function (a) {
      this._beforeVisitCmdScissor ||
        ((this._beforeVisitCmdScissor = new cc.CustomRenderCmd(
          this,
          this._onBeforeVisitScissor
        )),
        (this._afterVisitCmdScissor = new cc.CustomRenderCmd(
          this,
          this._onAfterVisitScissor
        )));
      cc.renderer.pushRenderCommand(this._beforeVisitCmdScissor);
    };
    a.postScissorVisit = function () {
      cc.renderer.pushRenderCommand(this._afterVisitCmdScissor);
    };
    ccui.Layout.WebGLRenderCmd._layer = -1;
    ccui.Layout.WebGLRenderCmd._visit_once = null;
  }
})();
ccui.Margin = ccui.Class.extend({
  left: 0,
  top: 0,
  right: 0,
  bottom: 0,
  ctor: function (a, b, d, e) {
    void 0 !== a &&
      void 0 === b &&
      ((this.left = a.left),
      (this.top = a.top),
      (this.right = a.right),
      (this.bottom = a.bottom));
    void 0 !== e &&
      ((this.left = a), (this.top = b), (this.right = d), (this.bottom = e));
  },
  setMargin: function (a, b, d, e) {
    this.left = a;
    this.top = b;
    this.right = d;
    this.bottom = e;
  },
  equals: function (a) {
    return (
      this.left === a.left &&
      this.top === a.top &&
      this.right === a.right &&
      this.bottom === a.bottom
    );
  },
});
ccui.MarginZero = function () {
  return new ccui.Margin(0, 0, 0, 0);
};
ccui.LayoutParameter = ccui.Class.extend({
  _margin: null,
  _layoutParameterType: null,
  ctor: function () {
    this._margin = new ccui.Margin();
    this._layoutParameterType = ccui.LayoutParameter.NONE;
  },
  setMargin: function (a, b, d, e) {
    cc.isObject(a)
      ? ((this._margin.left = a.left),
        (this._margin.top = a.top),
        (this._margin.right = a.right),
        (this._margin.bottom = a.bottom))
      : ((this._margin.left = a),
        (this._margin.top = b),
        (this._margin.right = d),
        (this._margin.bottom = e));
  },
  getMargin: function () {
    return this._margin;
  },
  getLayoutType: function () {
    return this._layoutParameterType;
  },
  clone: function () {
    var a = this._createCloneInstance();
    a._copyProperties(this);
    return a;
  },
  _createCloneInstance: function () {
    return new ccui.LayoutParameter();
  },
  _copyProperties: function (a) {
    this._margin.bottom = a._margin.bottom;
    this._margin.left = a._margin.left;
    this._margin.right = a._margin.right;
    this._margin.top = a._margin.top;
  },
});
ccui.LayoutParameter.create = function () {
  return new ccui.LayoutParameter();
};
ccui.LayoutParameter.NONE = 0;
ccui.LayoutParameter.LINEAR = 1;
ccui.LayoutParameter.RELATIVE = 2;
ccui.LinearLayoutParameter = ccui.LayoutParameter.extend({
  _linearGravity: null,
  ctor: function () {
    ccui.LayoutParameter.prototype.ctor.call(this);
    this._linearGravity = ccui.LinearLayoutParameter.NONE;
    this._layoutParameterType = ccui.LayoutParameter.LINEAR;
  },
  setGravity: function (a) {
    this._linearGravity = a;
  },
  getGravity: function () {
    return this._linearGravity;
  },
  _createCloneInstance: function () {
    return new ccui.LinearLayoutParameter();
  },
  _copyProperties: function (a) {
    ccui.LayoutParameter.prototype._copyProperties.call(this, a);
    a instanceof ccui.LinearLayoutParameter &&
      this.setGravity(a._linearGravity);
  },
});
ccui.LinearLayoutParameter.create = function () {
  return new ccui.LinearLayoutParameter();
};
ccui.LinearLayoutParameter.NONE = 0;
ccui.LinearLayoutParameter.LEFT = 1;
ccui.LinearLayoutParameter.TOP = 2;
ccui.LinearLayoutParameter.RIGHT = 3;
ccui.LinearLayoutParameter.BOTTOM = 4;
ccui.LinearLayoutParameter.CENTER_VERTICAL = 5;
ccui.LinearLayoutParameter.CENTER_HORIZONTAL = 6;
ccui.RelativeLayoutParameter = ccui.LayoutParameter.extend({
  _relativeAlign: null,
  _relativeWidgetName: "",
  _relativeLayoutName: "",
  _put: !1,
  ctor: function () {
    ccui.LayoutParameter.prototype.ctor.call(this);
    this._relativeAlign = ccui.RelativeLayoutParameter.NONE;
    this._relativeLayoutName = this._relativeWidgetName = "";
    this._put = !1;
    this._layoutParameterType = ccui.LayoutParameter.RELATIVE;
  },
  setAlign: function (a) {
    this._relativeAlign = a;
  },
  getAlign: function () {
    return this._relativeAlign;
  },
  setRelativeToWidgetName: function (a) {
    this._relativeWidgetName = a;
  },
  getRelativeToWidgetName: function () {
    return this._relativeWidgetName;
  },
  setRelativeName: function (a) {
    this._relativeLayoutName = a;
  },
  getRelativeName: function () {
    return this._relativeLayoutName;
  },
  _createCloneInstance: function () {
    return new ccui.RelativeLayoutParameter();
  },
  _copyProperties: function (a) {
    ccui.LayoutParameter.prototype._copyProperties.call(this, a);
    a instanceof ccui.RelativeLayoutParameter &&
      (this.setAlign(a._relativeAlign),
      this.setRelativeToWidgetName(a._relativeWidgetName),
      this.setRelativeName(a._relativeLayoutName));
  },
});
ccui.RelativeLayoutParameter.create = function () {
  return new ccui.RelativeLayoutParameter();
};
ccui.RelativeLayoutParameter.NONE = 0;
ccui.RelativeLayoutParameter.PARENT_TOP_LEFT = 1;
ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL = 2;
ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT = 3;
ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL = 4;
ccui.RelativeLayoutParameter.CENTER_IN_PARENT = 5;
ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL = 6;
ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM = 7;
ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL = 8;
ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM = 9;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN = 10;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER = 11;
ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN = 12;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN = 13;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER = 14;
ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN = 15;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN = 16;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER = 17;
ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN = 18;
ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN = 19;
ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER = 20;
ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN = 21;
ccui.LINEAR_GRAVITY_NONE = 0;
ccui.LINEAR_GRAVITY_LEFT = 1;
ccui.LINEAR_GRAVITY_TOP = 2;
ccui.LINEAR_GRAVITY_RIGHT = 3;
ccui.LINEAR_GRAVITY_BOTTOM = 4;
ccui.LINEAR_GRAVITY_CENTER_VERTICAL = 5;
ccui.LINEAR_GRAVITY_CENTER_HORIZONTAL = 6;
ccui.RELATIVE_ALIGN_NONE = 0;
ccui.RELATIVE_ALIGN_PARENT_TOP_LEFT = 1;
ccui.RELATIVE_ALIGN_PARENT_TOP_CENTER_HORIZONTAL = 2;
ccui.RELATIVE_ALIGN_PARENT_TOP_RIGHT = 3;
ccui.RELATIVE_ALIGN_PARENT_LEFT_CENTER_VERTICAL = 4;
ccui.RELATIVE_ALIGN_PARENT_CENTER = 5;
ccui.RELATIVE_ALIGN_PARENT_RIGHT_CENTER_VERTICAL = 6;
ccui.RELATIVE_ALIGN_PARENT_LEFT_BOTTOM = 7;
ccui.RELATIVE_ALIGN_PARENT_BOTTOM_CENTER_HORIZONTAL = 8;
ccui.RELATIVE_ALIGN_PARENT_RIGHT_BOTTOM = 9;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_LEFT = 10;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_CENTER = 11;
ccui.RELATIVE_ALIGN_LOCATION_ABOVE_RIGHT = 12;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_TOP = 13;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_CENTER = 14;
ccui.RELATIVE_ALIGN_LOCATION_LEFT_BOTTOM = 15;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_TOP = 16;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_CENTER = 17;
ccui.RELATIVE_ALIGN_LOCATION_RIGHT_BOTTOM = 18;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_TOP = 19;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_CENTER = 20;
ccui.RELATIVE_ALIGN_LOCATION_BELOW_BOTTOM = 21;
ccui.getLayoutManager = function (a) {
  switch (a) {
    case ccui.Layout.LINEAR_VERTICAL:
      return ccui.linearVerticalLayoutManager;
    case ccui.Layout.LINEAR_HORIZONTAL:
      return ccui.linearHorizontalLayoutManager;
    case ccui.Layout.RELATIVE:
      return ccui.relativeLayoutManager;
  }
  return null;
};
ccui.linearVerticalLayoutManager = {
  _doLayout: function (a) {
    var b = a._getLayoutContentSize();
    a = a._getLayoutElements();
    for (var d = b.height, e = 0, f = a.length; e < f; e++) {
      var g = a[e];
      if (g) {
        var h = g.getLayoutParameter();
        if (h) {
          var k = h.getGravity(),
            m = g.getAnchorPoint(),
            n = g.getContentSize(),
            p = m.x * n.width,
            d = d - (1 - m.y) * n.height;
          switch (k) {
            case ccui.LinearLayoutParameter.RIGHT:
              p = b.width - (1 - m.x) * n.width;
              break;
            case ccui.LinearLayoutParameter.CENTER_HORIZONTAL:
              p = b.width / 2 - n.width * (0.5 - m.x);
          }
          h = h.getMargin();
          p += h.left;
          d -= h.top;
          g.setPosition(p, d);
          d = g.getPositionY() - m.y * n.height - h.bottom;
        }
      }
    }
  },
};
ccui.linearHorizontalLayoutManager = {
  _doLayout: function (a) {
    var b = a._getLayoutContentSize();
    a = a._getLayoutElements();
    for (var d = 0, e = 0, f = a.length; e < f; e++) {
      var g = a[e];
      if (g) {
        var h = g.getLayoutParameter();
        if (h) {
          var k = h.getGravity(),
            m = g.getAnchorPoint(),
            n = g.getContentSize(),
            d = d + m.x * n.width,
            p = b.height - (1 - m.y) * n.height;
          switch (k) {
            case ccui.LinearLayoutParameter.BOTTOM:
              p = m.y * n.height;
              break;
            case ccui.LinearLayoutParameter.CENTER_VERTICAL:
              p = b.height / 2 - n.height * (0.5 - m.y);
          }
          h = h.getMargin();
          d += h.left;
          p -= h.top;
          g.setPosition(d, p);
          d = g.getRightBoundary() + h.right;
        }
      }
    }
  },
};
ccui.relativeLayoutManager = {
  _unlayoutChildCount: 0,
  _widgetChildren: [],
  _widget: null,
  _finalPositionX: 0,
  _finalPositionY: 0,
  _relativeWidgetLP: null,
  _doLayout: function (a) {
    for (
      var b = (this._widgetChildren = this._getAllWidgets(a));
      0 < this._unlayoutChildCount;

    ) {
      for (var d = 0, e = b.length; d < e; d++) {
        this._widget = b[d];
        var f = this._widget.getLayoutParameter();
        f &&
          !f._put &&
          this._calculateFinalPositionWithRelativeWidget(a) &&
          (this._calculateFinalPositionWithRelativeAlign(),
          this._widget.setPosition(this._finalPositionX, this._finalPositionY),
          (f._put = !0));
      }
      this._unlayoutChildCount--;
    }
    this._widgetChildren.length = 0;
  },
  _getAllWidgets: function (a) {
    a = a._getLayoutElements();
    for (
      var b = this._widgetChildren, d = (b.length = 0), e = a.length;
      d < e;
      d++
    ) {
      var f = a[d];
      f &&
        f instanceof ccui.Widget &&
        ((f.getLayoutParameter()._put = !1),
        this._unlayoutChildCount++,
        b.push(f));
    }
    return b;
  },
  _getRelativeWidget: function (a) {
    var b = null;
    if (
      (a = a.getLayoutParameter().getRelativeToWidgetName()) &&
      0 !== a.length
    )
      for (var d = this._widgetChildren, e = 0, f = d.length; e < f; e++) {
        var g = d[e];
        if (g) {
          var h = g.getLayoutParameter();
          if (h && h.getRelativeName() === a) {
            b = g;
            this._relativeWidgetLP = h;
            break;
          }
        }
      }
    return b;
  },
  _calculateFinalPositionWithRelativeWidget: function (a) {
    var b = this._widget,
      d = b.getAnchorPoint(),
      e = b.getContentSize();
    this._finalPositionY = this._finalPositionX = 0;
    var f = this._getRelativeWidget(b),
      b = b.getLayoutParameter().getAlign();
    a = a._getLayoutContentSize();
    switch (b) {
      case ccui.RelativeLayoutParameter.NONE:
      case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:
        this._finalPositionX = d.x * e.width;
        this._finalPositionY = a.height - (1 - d.y) * e.height;
        break;
      case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:
        this._finalPositionX = 0.5 * a.width - e.width * (0.5 - d.x);
        this._finalPositionY = a.height - (1 - d.y) * e.height;
        break;
      case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:
        this._finalPositionX = a.width - (1 - d.x) * e.width;
        this._finalPositionY = a.height - (1 - d.y) * e.height;
        break;
      case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:
        this._finalPositionX = d.x * e.width;
        this._finalPositionY = 0.5 * a.height - e.height * (0.5 - d.y);
        break;
      case ccui.RelativeLayoutParameter.CENTER_IN_PARENT:
        this._finalPositionX = 0.5 * a.width - e.width * (0.5 - d.x);
        this._finalPositionY = 0.5 * a.height - e.height * (0.5 - d.y);
        break;
      case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:
        this._finalPositionX = a.width - (1 - d.x) * e.width;
        this._finalPositionY = 0.5 * a.height - e.height * (0.5 - d.y);
        break;
      case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:
        this._finalPositionX = d.x * e.width;
        this._finalPositionY = d.y * e.height;
        break;
      case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:
        this._finalPositionX = 0.5 * a.width - e.width * (0.5 - d.x);
        this._finalPositionY = d.y * e.height;
        break;
      case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:
        this._finalPositionX = a.width - (1 - d.x) * e.width;
        this._finalPositionY = d.y * e.height;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getTopBoundary() + d.y * e.height;
          this._finalPositionX = f.getLeftBoundary() + d.x * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          a = f.getContentSize();
          this._finalPositionY = f.getTopBoundary() + d.y * e.height;
          this._finalPositionX =
            f.getLeftBoundary() + 0.5 * a.width + d.x * e.width - 0.5 * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getTopBoundary() + d.y * e.height;
          this._finalPositionX = f.getRightBoundary() - (1 - d.x) * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getTopBoundary() - (1 - d.y) * e.height;
          this._finalPositionX = f.getLeftBoundary() - (1 - d.x) * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          a = f.getContentSize();
          this._finalPositionX = f.getLeftBoundary() - (1 - d.x) * e.width;
          this._finalPositionY =
            f.getBottomBoundary() +
            0.5 * a.height +
            d.y * e.height -
            0.5 * e.height;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getBottomBoundary() + d.y * e.height;
          this._finalPositionX = f.getLeftBoundary() - (1 - d.x) * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getTopBoundary() - (1 - d.y) * e.height;
          this._finalPositionX = f.getRightBoundary() + d.x * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          a = f.getContentSize();
          this._finalPositionX = f.getRightBoundary() + d.x * e.width;
          this._finalPositionY =
            f.getBottomBoundary() +
            0.5 * a.height +
            d.y * e.height -
            0.5 * e.height;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getBottomBoundary() + d.y * e.height;
          this._finalPositionX = f.getRightBoundary() + d.x * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getBottomBoundary() - (1 - d.y) * e.height;
          this._finalPositionX = f.getLeftBoundary() + d.x * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          a = f.getContentSize();
          this._finalPositionY = f.getBottomBoundary() - (1 - d.y) * e.height;
          this._finalPositionX =
            f.getLeftBoundary() + 0.5 * a.width + d.x * e.width - 0.5 * e.width;
        }
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:
        if (f) {
          if (this._relativeWidgetLP && !this._relativeWidgetLP._put) return !1;
          this._finalPositionY = f.getBottomBoundary() - (1 - d.y) * e.height;
          this._finalPositionX = f.getRightBoundary() - (1 - d.x) * e.width;
        }
    }
    return !0;
  },
  _calculateFinalPositionWithRelativeAlign: function () {
    var a = this._widget.getLayoutParameter(),
      b = a.getMargin();
    switch (a.getAlign()) {
      case ccui.RelativeLayoutParameter.NONE:
      case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:
        this._finalPositionX += b.left;
        this._finalPositionY -= b.top;
        break;
      case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:
        this._finalPositionY -= b.top;
        break;
      case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:
        this._finalPositionX -= b.right;
        this._finalPositionY -= b.top;
        break;
      case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:
        this._finalPositionX += b.left;
        break;
      case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:
        this._finalPositionX -= b.right;
        break;
      case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:
        this._finalPositionX += b.left;
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:
        this._finalPositionX -= b.right;
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:
        this._finalPositionY += b.bottom;
        this._finalPositionX += b.left;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:
        this._finalPositionY += b.bottom;
        this._finalPositionX -= b.right;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:
        this._finalPositionX -= b.right;
        this._finalPositionY -= b.top;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:
        this._finalPositionX -= b.right;
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:
        this._finalPositionX -= b.right;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:
        this._finalPositionX += b.left;
        this._finalPositionY -= b.top;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:
        this._finalPositionX += b.left;
        this._finalPositionY += b.bottom;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:
        this._finalPositionX += b.left;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:
        this._finalPositionY -= b.top;
        this._finalPositionX += b.left;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:
        this._finalPositionY -= b.top;
        this._finalPositionX -= b.right;
        break;
      case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:
        this._finalPositionY -= b.top;
    }
  },
};
ccui.HBox = ccui.Layout.extend({
  ctor: function (a) {
    ccui.Layout.prototype.ctor.call(this);
    this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);
    a && this.setContentSize(a);
  },
});
ccui.HBox.create = function (a) {
  return new ccui.HBox(a);
};
ccui.RelativeBox = ccui.Layout.extend({
  ctor: function (a) {
    ccui.Layout.prototype.ctor.call(this);
    this.setLayoutType(ccui.Layout.RELATIVE);
    a && this.setContentSize(a);
  },
});
ccui.RelativeBox.create = function (a) {
  return new ccui.RelativeBox(a);
};
ccui.VBox = ccui.Layout.extend({
  ctor: function (a) {
    ccui.Layout.prototype.ctor.call(this);
    this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);
    a && this.setContentSize(a);
  },
  initWithSize: function (a) {
    return this.init() ? !0 : !1;
  },
});
ccui.VBox.create = function (a) {
  return new ccui.VBox(a);
};
ccui.helper = {
  seekWidgetByTag: function (a, b) {
    if (!a) return null;
    if (a.getTag() === b) return a;
    for (var d = a.getChildren(), e = d.length, f = 0; f < e; f++) {
      var g = ccui.helper.seekWidgetByTag(d[f], b);
      if (null !== g) return g;
    }
    return null;
  },
  seekWidgetByName: function (a, b) {
    if (!a) return null;
    if (a.getName() === b) return a;
    for (var d = a.getChildren(), e = d.length, f = 0; f < e; f++) {
      var g = ccui.helper.seekWidgetByName(d[f], b);
      if (null !== g) return g;
    }
    return null;
  },
  seekWidgetByRelativeName: function (a, b) {
    if (!a) return null;
    for (var d = a.getChildren(), e = d.length, f = 0; f < e; f++) {
      var g = d[f],
        h = g.getLayoutParameter(ccui.LayoutParameter.RELATIVE);
      if (h && h.getRelativeName() === b) return g;
    }
    return null;
  },
  seekActionWidgetByActionTag: function (a, b) {
    if (!a) return null;
    if (a.getActionTag() === b) return a;
    for (var d = a.getChildren(), e = 0; e < d.length; e++) {
      var f = ccui.helper.seekActionWidgetByActionTag(d[e], b);
      if (null !== f) return f;
    }
    return null;
  },
  _activeLayout: !0,
  doLayout: function (a) {
    if (this._activeLayout) {
      a = a.getChildren();
      for (var b, d = 0, e = a.length; d < e; d++) {
        b = a[d];
        var f = b.getComponent(ccui.LayoutComponent.NAME);
        b = b.getParent();
        null != f && null !== b && f.refreshLayout && f.refreshLayout();
      }
    }
  },
  changeLayoutSystemActiveState: function (a) {
    this._activeLayout = a;
  },
  restrictCapInsetRect: function (a, b) {
    var d = a.x,
      e = a.y,
      f = a.width,
      g = a.height;
    b.width < f && (f = d = 0);
    b.height < g && (g = e = 0);
    return cc.rect(d, e, f, g);
  },
  _createSpriteFromBase64: function (a, b) {
    var d = cc.textureCache.getTextureForKey(b);
    d ||
      ((d = new Image()),
      (d.src = a),
      cc.textureCache.cacheImage(b, d),
      (d = cc.textureCache.getTextureForKey(b)));
    return new cc.Sprite(d);
  },
};
ccui.Button = ccui.Widget.extend({
  _buttonScale9Renderer: null,
  _buttonNormalSpriteFrame: null,
  _buttonClickedSpriteFrame: null,
  _buttonDisableSpriteFrame: null,
  _titleRenderer: null,
  _normalFileName: "",
  _clickedFileName: "",
  _disabledFileName: "",
  _prevIgnoreSize: !0,
  _scale9Enabled: !1,
  _capInsetsNormal: null,
  _normalTexType: ccui.Widget.LOCAL_TEXTURE,
  _pressedTexType: ccui.Widget.LOCAL_TEXTURE,
  _disabledTexType: ccui.Widget.LOCAL_TEXTURE,
  _normalTextureSize: null,
  pressedActionEnabled: !1,
  _titleColor: null,
  _zoomScale: 0.1,
  _normalTextureLoaded: !1,
  _pressedTextureLoaded: !1,
  _disabledTextureLoaded: !1,
  _className: "Button",
  _normalTextureAdaptDirty: !0,
  _fontName: "Thonburi",
  _fontSize: 12,
  _type: 0,
  ctor: function (a, b, d, e) {
    this._capInsetsNormal = cc.rect(0, 0, 0, 0);
    this._normalTextureSize = cc.size(0, 0);
    ccui.Widget.prototype.ctor.call(this);
    this.setTouchEnabled(!0);
    this._normalLoader = new cc.Sprite.LoadManager();
    this._clickedLoader = new cc.Sprite.LoadManager();
    this._disabledLoader = new cc.Sprite.LoadManager();
    a && this.loadTextures(a, b, d, e);
  },
  _createTitleRendererIfNeeded: function () {
    this._titleRenderer ||
      ((this._titleRenderer = new cc.LabelTTF("")),
      this._titleRenderer.setAnchorPoint(0.5, 0.5),
      (this._titleColor = cc.color.WHITE),
      this._titleRenderer.setVerticalAlignment(
        cc.VERTICAL_TEXT_ALIGNMENT_CENTER
      ),
      this.addProtectedChild(
        this._titleRenderer,
        ccui.Button.TITLE_RENDERER_ZORDER,
        -1
      ));
  },
  _initRenderer: function () {
    this._buttonScale9Renderer = new ccui.Scale9Sprite();
    this._buttonScale9Renderer.setRenderingType(
      ccui.Scale9Sprite.RenderingType.SIMPLE
    );
    this.addProtectedChild(
      this._buttonScale9Renderer,
      ccui.Button.DISABLED_RENDERER_ZORDER,
      -1
    );
  },
  setScale9Enabled: function (a) {
    this._scale9Enabled !== a &&
      ((this._brightStyle = ccui.Widget.BRIGHT_STYLE_NONE),
      (this._scale9Enabled = a)
        ? this._buttonScale9Renderer.setRenderingType(
            ccui.Scale9Sprite.RenderingType.SLICED
          )
        : this._buttonScale9Renderer.setRenderingType(
            ccui.Scale9Sprite.RenderingType.SIMPLE
          ),
      this._scale9Enabled
        ? ((a = this._ignoreSize),
          this.ignoreContentAdaptWithSize(!1),
          (this._prevIgnoreSize = a))
        : this.ignoreContentAdaptWithSize(this._prevIgnoreSize),
      this.setCapInsets(this._capInsetsNormal),
      this.setBright(this._bright),
      (this._normalTextureAdaptDirty = !0));
  },
  isScale9Enabled: function () {
    return this._scale9Enabled;
  },
  ignoreContentAdaptWithSize: function (a) {
    if (this._unifySize) this._updateContentSize();
    else if (!this._scale9Enabled || (this._scale9Enabled && !a))
      ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a),
        (this._prevIgnoreSize = a);
  },
  getVirtualRendererSize: function () {
    return this._unifySize
      ? this._getNormalSize()
      : !this._normalTextureLoaded &&
        this._titleRenderer &&
        0 < this._titleRenderer.getString().length
      ? this._titleRenderer.getContentSize()
      : cc.size(this._normalTextureSize);
  },
  loadTextures: function (a, b, d, e) {
    this.loadTextureNormal(a, e);
    this.loadTexturePressed(b, e);
    this.loadTextureDisabled(d, e);
  },
  _createSpriteFrameWithFile: function (a) {
    var b = cc.textureCache.getTextureForKey(a);
    b || (b = cc.textureCache.addImage(a));
    if (!b._textureLoaded) return b;
    a = b.getContentSize();
    a = cc.rect(0, 0, a.width, a.height);
    return new cc.SpriteFrame(b, a);
  },
  _createSpriteFrameWithName: function (a) {
    a = cc.spriteFrameCache.getSpriteFrame(a);
    return null == a
      ? (cc.log(
          "ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"
        ),
        null)
      : a;
  },
  loadTextureNormal: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._normalFileName = a;
      this._normalTexType = b;
      var d;
      switch (this._normalTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d = this._createSpriteFrameWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          "#" === a[0] && (a = a.substr(1, a.length - 1)),
            (d = this._createSpriteFrameWithName(a));
      }
      d &&
        (d._textureLoaded
          ? ((this._normalTextureLoaded = d._textureLoaded),
            (this._buttonNormalSpriteFrame = d),
            this._buttonScale9Renderer.setSpriteFrame(d),
            this._scale9Enabled &&
              this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal),
            !this._ignoreSize &&
              cc.sizeEqualToSize(this._customSize, cc.size(0, 0)) &&
              (this._customSize = this._buttonScale9Renderer.getContentSize()),
            (this._normalTextureSize = this._buttonScale9Renderer.getContentSize()),
            this._updateChildrenDisplayedRGBA(),
            this._unifySize
              ? this._scale9Enabled &&
                (this._buttonScale9Renderer.setCapInsets(this._capInsetsNormal),
                this._updateContentSizeWithTextureSize(this._getNormalSize()))
              : this._updateContentSizeWithTextureSize(this._normalTextureSize),
            (this._normalTextureAdaptDirty = !0),
            this._findLayout())
          : (this._normalLoader.clear(),
            this._normalLoader.once(
              d,
              function () {
                this.loadTextureNormal(
                  this._normalFileName,
                  this._normalTexType
                );
              },
              this
            )));
    }
  },
  loadTexturePressed: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._clickedFileName = a;
      this._pressedTexType = b;
      var d;
      switch (this._pressedTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d = this._createSpriteFrameWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          "#" === a[0] && (a = a.substr(1, a.length - 1)),
            (d = this._createSpriteFrameWithName(a));
      }
      d &&
        (d._textureLoaded
          ? ((this._buttonClickedSpriteFrame = d),
            this._updateChildrenDisplayedRGBA(),
            (this._pressedTextureLoaded = !0))
          : (this._clickedLoader.clear(),
            this._clickedLoader.once(
              d,
              function () {
                this.loadTexturePressed(
                  this._clickedFileName,
                  this._pressedTexType
                );
              },
              this
            )));
    }
  },
  loadTextureDisabled: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._disabledFileName = a;
      this._disabledTexType = b;
      var d;
      switch (this._disabledTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d = this._createSpriteFrameWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          "#" === a[0] && (a = a.substr(1, a.length - 1)),
            (d = this._createSpriteFrameWithName(a));
      }
      d &&
        (d._textureLoaded
          ? ((this._buttonDisableSpriteFrame = d),
            this._updateChildrenDisplayedRGBA(),
            (this._disabledTextureLoaded = !0),
            this._findLayout())
          : (this._disabledLoader.clear(),
            this._disabledLoader.once(
              d,
              function () {
                this.loadTextureDisabled(
                  this._disabledFileName,
                  this._disabledTexType
                );
              },
              this
            )));
    }
  },
  setCapInsets: function (a) {
    this.setCapInsetsNormalRenderer(a);
  },
  setCapInsetsNormalRenderer: function (a) {
    if (a && this._scale9Enabled) {
      var b = a.x,
        d = a.y,
        e = a.width;
      a = a.height;
      this._normalTextureSize.width < e && (e = b = 0);
      this._normalTextureSize.height < a && (a = d = 0);
      var f = this._capInsetsNormal;
      f.x = b;
      f.y = d;
      f.width = e;
      f.height = a;
      this._capInsetsNormal = f;
      this._buttonScale9Renderer.setCapInsets(f);
    }
  },
  getCapInsetsNormalRenderer: function () {
    return cc.rect(this._capInsetsNormal);
  },
  setCapInsetsPressedRenderer: function (a) {
    this.setCapInsetsNormalRenderer(a);
  },
  getCapInsetsPressedRenderer: function () {
    return cc.rect(this._capInsetsNormal);
  },
  setCapInsetsDisabledRenderer: function (a) {
    this.setCapInsetsNormalRenderer(a);
  },
  getCapInsetsDisabledRenderer: function () {
    return cc.rect(this._capInsetsNormal);
  },
  _onPressStateChangedToNormal: function () {
    this._buttonScale9Renderer.setSpriteFrame(this._buttonNormalSpriteFrame);
    this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL);
    if (this._pressedTextureLoaded) {
      if (
        this.pressedActionEnabled &&
        (this._buttonScale9Renderer.stopAllActions(),
        this._buttonScale9Renderer.setScale(1),
        this._titleRenderer)
      )
        if ((this._titleRenderer.stopAllActions(), this._unifySize)) {
          var a = cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP, 1, 1);
          this._titleRenderer.runAction(a);
        } else
          this._titleRenderer.setScaleX(1), this._titleRenderer.setScaleY(1);
    } else
      this._buttonScale9Renderer.stopAllActions(),
        this._buttonScale9Renderer.setScale(1),
        this._scale9Enabled &&
          this._buttonScale9Renderer.setColor(cc.color.WHITE),
        this._titleRenderer &&
          (this._titleRenderer.stopAllActions(),
          this._titleRenderer.setScaleX(1),
          this._titleRenderer.setScaleY(1));
  },
  _onPressStateChangedToPressed: function () {
    this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.NORMAL);
    if (this._pressedTextureLoaded) {
      if (
        (this._buttonScale9Renderer.setSpriteFrame(
          this._buttonClickedSpriteFrame
        ),
        this.pressedActionEnabled)
      ) {
        this._buttonScale9Renderer.stopAllActions();
        var a = cc.scaleTo(
          ccui.Button.ZOOM_ACTION_TIME_STEP,
          1 + this._zoomScale,
          1 + this._zoomScale
        );
        this._buttonScale9Renderer.runAction(a);
        this._titleRenderer &&
          (this._titleRenderer.stopAllActions(),
          this._titleRenderer.runAction(
            cc.scaleTo(
              ccui.Button.ZOOM_ACTION_TIME_STEP,
              1 + this._zoomScale,
              1 + this._zoomScale
            )
          ));
      }
    } else
      this._buttonScale9Renderer.setSpriteFrame(this._buttonClickedSpriteFrame),
        this._buttonScale9Renderer.stopAllActions(),
        this._buttonScale9Renderer.setScale(
          1 + this._zoomScale,
          1 + this._zoomScale
        ),
        this._titleRenderer &&
          (this._titleRenderer.stopAllActions(),
          this._titleRenderer.setScaleX(1 + this._zoomScale),
          this._titleRenderer.setScaleY(1 + this._zoomScale));
  },
  _onPressStateChangedToDisabled: function () {
    this._disabledTextureLoaded
      ? this._buttonScale9Renderer.setSpriteFrame(
          this._buttonDisableSpriteFrame
        )
      : this._normalTextureLoaded &&
        this._buttonScale9Renderer.setState(ccui.Scale9Sprite.state.GRAY);
    this._buttonScale9Renderer.setScale(1);
  },
  _updateContentSize: function () {
    if (this._unifySize) {
      if (this._scale9Enabled)
        ccui.ProtectedNode.setContentSize(this._customSize);
      else {
        var a = this._getNormalSize();
        ccui.ProtectedNode.setContentSize(a);
      }
      this._onSizeChanged();
    } else
      this._ignoreSize && this.setContentSize(this.getVirtualRendererSize());
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._titleRenderer && this._updateTitleLocation();
    this._normalTextureAdaptDirty = !0;
  },
  getVirtualRenderer: function () {
    return this._buttonScale9Renderer;
  },
  _normalTextureScaleChangedWithSize: function () {
    this._buttonScale9Renderer.setContentSize(this._contentSize);
    this._buttonScale9Renderer.setPosition(
      this._contentSize.width / 2,
      this._contentSize.height / 2
    );
  },
  _adaptRenderers: function () {
    this._normalTextureAdaptDirty &&
      (this._normalTextureScaleChangedWithSize(),
      (this._normalTextureAdaptDirty = !1));
  },
  _updateTitleLocation: function () {
    this._titleRenderer.setPosition(
      0.5 * this._contentSize.width,
      0.5 * this._contentSize.height
    );
  },
  setPressedActionEnabled: function (a) {
    this.pressedActionEnabled = a;
  },
  setTitleText: function (a) {
    a !== this.getTitleText() &&
      (this._createTitleRendererIfNeeded(),
      this._titleRenderer.setString(a),
      this._ignoreSize
        ? ((a = this.getVirtualRendererSize()), this.setContentSize(a))
        : this._titleRenderer._renderCmd._updateTTF());
  },
  getTitleText: function () {
    return this._titleRenderer ? this._titleRenderer.getString() : "";
  },
  setTitleColor: function (a) {
    this._createTitleRendererIfNeeded();
    this._titleRenderer.setFontFillColor(a);
  },
  getTitleColor: function () {
    return this._titleRenderer
      ? this._titleRenderer._getFillStyle()
      : cc.color.WHITE;
  },
  setTitleFontSize: function (a) {
    this._createTitleRendererIfNeeded();
    this._titleRenderer.setFontSize(a);
    this._fontSize = a;
  },
  getTitleFontSize: function () {
    return this._titleRenderer
      ? this._titleRenderer.getFontSize()
      : this._fontSize;
  },
  setZoomScale: function (a) {
    this._zoomScale = a;
  },
  getZoomScale: function () {
    return this._zoomScale;
  },
  getNormalTextureSize: function () {
    return this._normalTextureSize;
  },
  setTitleFontName: function (a) {
    this._createTitleRendererIfNeeded();
    this._titleRenderer.setFontName(a);
    this._fontName = a;
  },
  getTitleRenderer: function () {
    return this._titleRenderer;
  },
  getTitleFontName: function () {
    return this._titleRenderer
      ? this._titleRenderer.getFontName()
      : this._fontName;
  },
  _setTitleFont: function (a) {
    this._titleRenderer.font = a;
  },
  _getTitleFont: function () {
    return this._titleRenderer.font;
  },
  getDescription: function () {
    return "Button";
  },
  _createCloneInstance: function () {
    return new ccui.Button();
  },
  _copySpecialProperties: function (a) {
    this._prevIgnoreSize = a._prevIgnoreSize;
    this._capInsetsNormal = a._capInsetsNormal;
    this.setScale9Enabled(a._scale9Enabled);
    this.loadTextureNormal(a._normalFileName, a._normalTexType);
    this.loadTexturePressed(a._clickedFileName, a._pressedTexType);
    this.loadTextureDisabled(a._disabledFileName, a._disabledTexType);
    a._titleRenderer &&
      a._titleRenderer._string &&
      (this.setTitleText(a.getTitleText()),
      this.setTitleFontName(a.getTitleFontName()),
      this.setTitleFontSize(a.getTitleFontSize()),
      this.setTitleColor(a.getTitleColor()));
    this.setPressedActionEnabled(a.pressedActionEnabled);
    this.setZoomScale(a._zoomScale);
  },
  _getNormalSize: function () {
    var a;
    null !== this._titleRenderer && (a = this._titleRenderer.getContentSize());
    var b = this._buttonScale9Renderer.getContentSize();
    return cc.size(
      a.width > b.width ? a.width : b.width,
      a.height > b.height ? a.height : b.height
    );
  },
});
_p = ccui.Button.prototype;
cc.defineGetterSetter(_p, "titleText", _p.getTitleText, _p.setTitleText);
cc.defineGetterSetter(_p, "titleFont", _p._getTitleFont, _p._setTitleFont);
cc.defineGetterSetter(
  _p,
  "titleFontSize",
  _p.getTitleFontSize,
  _p.setTitleFontSize
);
cc.defineGetterSetter(
  _p,
  "titleFontName",
  _p.getTitleFontName,
  _p.setTitleFontName
);
cc.defineGetterSetter(_p, "titleColor", _p.getTitleColor, _p.setTitleColor);
_p = null;
ccui.Button.create = function (a, b, d, e) {
  return new ccui.Button(a, b, d, e);
};
ccui.Button.NORMAL_RENDERER_ZORDER = -2;
ccui.Button.PRESSED_RENDERER_ZORDER = -2;
ccui.Button.DISABLED_RENDERER_ZORDER = -2;
ccui.Button.TITLE_RENDERER_ZORDER = -1;
ccui.Button.ZOOM_ACTION_TIME_STEP = 0.05;
ccui.Button.SYSTEM = 0;
ccui.Button.TTF = 1;
ccui.CheckBox = ccui.Widget.extend({
  _backGroundBoxRenderer: null,
  _backGroundSelectedBoxRenderer: null,
  _frontCrossRenderer: null,
  _backGroundBoxDisabledRenderer: null,
  _frontCrossDisabledRenderer: null,
  _isSelected: !0,
  _checkBoxEventListener: null,
  _checkBoxEventSelector: null,
  _backGroundTexType: ccui.Widget.LOCAL_TEXTURE,
  _backGroundSelectedTexType: ccui.Widget.LOCAL_TEXTURE,
  _frontCrossTexType: ccui.Widget.LOCAL_TEXTURE,
  _backGroundDisabledTexType: ccui.Widget.LOCAL_TEXTURE,
  _frontCrossDisabledTexType: ccui.Widget.LOCAL_TEXTURE,
  _backGroundFileName: "",
  _backGroundSelectedFileName: "",
  _frontCrossFileName: "",
  _backGroundDisabledFileName: "",
  _frontCrossDisabledFileName: "",
  _className: "CheckBox",
  _zoomScale: 0.1,
  _backgroundTextureScaleX: 0.1,
  _backgroundTextureScaleY: 0.1,
  _backGroundBoxRendererAdaptDirty: !0,
  _backGroundSelectedBoxRendererAdaptDirty: !0,
  _frontCrossRendererAdaptDirty: !0,
  _backGroundBoxDisabledRendererAdaptDirty: !0,
  _frontCrossDisabledRendererAdaptDirty: !0,
  ctor: function (a, b, d, e, f, g) {
    ccui.Widget.prototype.ctor.call(this);
    this.setTouchEnabled(!0);
    for (var h = 0, k = 0; k < arguments.length; k++) {
      var m = typeof arguments[k];
      "string" === m
        ? isNaN(arguments[k] - 0)
          ? h++
          : ((g = arguments[k]), (arguments[k] = void 0))
        : "number" === m && h++;
    }
    switch (h) {
      case 2:
        (g = d), (d = b), (b = void 0);
    }
    g = void 0 === g ? 0 : g;
    this._isSelected = !0;
    this.setSelected(!1);
    this.loadTextures(a, b, d, e, f, g);
  },
  _initRenderer: function () {
    this._backGroundBoxRenderer = new cc.Sprite();
    this._backGroundSelectedBoxRenderer = new cc.Sprite();
    this._frontCrossRenderer = new cc.Sprite();
    this._backGroundBoxDisabledRenderer = new cc.Sprite();
    this._frontCrossDisabledRenderer = new cc.Sprite();
    this.addProtectedChild(
      this._backGroundBoxRenderer,
      ccui.CheckBox.BOX_RENDERER_ZORDER,
      -1
    );
    this.addProtectedChild(
      this._backGroundSelectedBoxRenderer,
      ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER,
      -1
    );
    this.addProtectedChild(
      this._frontCrossRenderer,
      ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER,
      -1
    );
    this.addProtectedChild(
      this._backGroundBoxDisabledRenderer,
      ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER,
      -1
    );
    this.addProtectedChild(
      this._frontCrossDisabledRenderer,
      ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER,
      -1
    );
  },
  loadTextures: function (a, b, d, e, f, g) {
    a && this.loadTextureBackGround(a, g);
    b && this.loadTextureBackGroundSelected(b, g);
    d && this.loadTextureFrontCross(d, g);
    e && this.loadTextureBackGroundDisabled(e, g);
    f && this.loadTextureFrontCrossDisabled(f, g);
  },
  loadTextureBackGround: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._backGroundFileName = a;
      this._backGroundTexType = b;
      var d = this._backGroundBoxRenderer;
      d._textureLoaded
        ? this._backGroundBoxRenderer.setContentSize(this._customSize)
        : d.addEventListener(
            "load",
            function () {
              this._updateContentSizeWithTextureSize(
                this._backGroundBoxRenderer.getContentSize()
              );
              this.loadTextureBackGround(
                this._backGroundFileName,
                this._backGroundTexType
              );
            },
            this
          );
      switch (this._backGroundTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._updateContentSizeWithTextureSize(
        this._backGroundBoxRenderer.getContentSize()
      );
      this._backGroundBoxRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  loadTextureBackGroundSelected: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._backGroundSelectedFileName = a;
      this._backGroundSelectedTexType = b;
      var d = this._backGroundSelectedBoxRenderer;
      d._textureLoaded ||
        d.addEventListener(
          "load",
          function () {
            this.loadTextureBackGroundSelected(
              this._backGroundSelectedFileName,
              this._backGroundSelectedTexType
            );
          },
          this
        );
      switch (this._backGroundSelectedTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._backGroundSelectedBoxRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  loadTextureFrontCross: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._frontCrossFileName = a;
      this._frontCrossTexType = b;
      var d = this._frontCrossRenderer;
      d._textureLoaded ||
        d.addEventListener(
          "load",
          function () {
            this.loadTextureFrontCross(
              this._frontCrossFileName,
              this._frontCrossTexType
            );
          },
          this
        );
      switch (this._frontCrossTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._frontCrossRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  loadTextureBackGroundDisabled: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._backGroundDisabledFileName = a;
      this._backGroundDisabledTexType = b;
      var d = this._backGroundBoxDisabledRenderer;
      d._textureLoaded ||
        d.addEventListener(
          "load",
          function () {
            this.loadTextureBackGroundDisabled(
              this._backGroundDisabledFileName,
              this._backGroundDisabledTexType
            );
          },
          this
        );
      switch (this._backGroundDisabledTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._backGroundBoxDisabledRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  loadTextureFrontCrossDisabled: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._frontCrossDisabledFileName = a;
      this._frontCrossDisabledTexType = b;
      var d = this._frontCrossDisabledRenderer;
      d._textureLoaded ||
        d.addEventListener(
          "load",
          function () {
            this.loadTextureFrontCrossDisabled(
              this._frontCrossDisabledFileName,
              this._frontCrossDisabledTexType
            );
          },
          this
        );
      switch (this._frontCrossDisabledTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._frontCrossDisabledRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  _onPressStateChangedToNormal: function () {
    this._backGroundBoxRenderer.setVisible(!0);
    this._backGroundSelectedBoxRenderer.setVisible(!1);
    this._backGroundBoxDisabledRenderer.setVisible(!1);
    this._frontCrossDisabledRenderer.setVisible(!1);
    this._backGroundBoxRenderer.setScale(
      this._backgroundTextureScaleX,
      this._backgroundTextureScaleY
    );
    this._frontCrossRenderer.setScale(
      this._backgroundTextureScaleX,
      this._backgroundTextureScaleY
    );
    this._isSelected &&
      (this._frontCrossRenderer.setVisible(!0),
      (this._frontCrossRendererAdaptDirty = !0));
  },
  _onPressStateChangedToPressed: function () {
    this._backGroundSelectedFileName
      ? (this._backGroundBoxRenderer.setVisible(!1),
        this._backGroundSelectedBoxRenderer.setVisible(!0),
        this._backGroundBoxDisabledRenderer.setVisible(!1),
        this._frontCrossDisabledRenderer.setVisible(!1))
      : (this._backGroundBoxRenderer.setScale(
          this._backgroundTextureScaleX + this._zoomScale,
          this._backgroundTextureScaleY + this._zoomScale
        ),
        this._frontCrossRenderer.setScale(
          this._backgroundTextureScaleX + this._zoomScale,
          this._backgroundTextureScaleY + this._zoomScale
        ));
  },
  _onPressStateChangedToDisabled: function () {
    this._backGroundDisabledFileName &&
      this._frontCrossDisabledFileName &&
      (this._backGroundBoxRenderer.setVisible(!1),
      this._backGroundBoxDisabledRenderer.setVisible(!0));
    this._backGroundSelectedBoxRenderer.setVisible(!1);
    this._frontCrossRenderer.setVisible(!1);
    this._backGroundBoxRenderer.setScale(
      this._backgroundTextureScaleX,
      this._backgroundTextureScaleY
    );
    this._frontCrossRenderer.setScale(
      this._backgroundTextureScaleX,
      this._backgroundTextureScaleY
    );
    this._isSelected &&
      (this._frontCrossDisabledRenderer.setVisible(!0),
      (this._frontCrossDisabledRendererAdaptDirty = !0));
  },
  setZoomScale: function (a) {
    this._zoomScale = a;
  },
  getZoomScale: function () {
    return this._zoomScale;
  },
  setSelectedState: function (a) {
    this.setSelected(a);
  },
  setSelected: function (a) {
    a !== this._isSelected &&
      ((this._isSelected = a),
      this._frontCrossRenderer.setVisible(this._isSelected));
  },
  getSelectedState: function () {
    return this.isSelected();
  },
  isSelected: function () {
    return this._isSelected;
  },
  _selectedEvent: function () {
    this._checkBoxEventSelector &&
      (this._checkBoxEventListener
        ? this._checkBoxEventSelector.call(
            this._checkBoxEventListener,
            this,
            ccui.CheckBox.EVENT_SELECTED
          )
        : this._checkBoxEventSelector(this, ccui.CheckBox.EVENT_SELECTED));
  },
  _unSelectedEvent: function () {
    this._checkBoxEventSelector &&
      (this._checkBoxEventListener
        ? this._checkBoxEventSelector.call(
            this._checkBoxEventListener,
            this,
            ccui.CheckBox.EVENT_UNSELECTED
          )
        : this._checkBoxEventSelector(this, ccui.CheckBox.EVENT_UNSELECTED));
  },
  _releaseUpEvent: function () {
    ccui.Widget.prototype._releaseUpEvent.call(this);
    this._isSelected
      ? (this.setSelected(!1), this._unSelectedEvent())
      : (this.setSelected(!0), this._selectedEvent());
  },
  addEventListenerCheckBox: function (a, b) {
    this.addEventListener(a, b);
  },
  addEventListener: function (a, b) {
    this._checkBoxEventSelector = a;
    this._checkBoxEventListener = b;
  },
  getVirtualRendererSize: function () {
    return this._backGroundBoxRenderer.getContentSize();
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._frontCrossDisabledRendererAdaptDirty = this._backGroundBoxDisabledRendererAdaptDirty = this._frontCrossRendererAdaptDirty = this._backGroundSelectedBoxRendererAdaptDirty = this._backGroundBoxRendererAdaptDirty = !0;
  },
  getVirtualRenderer: function () {
    return this._backGroundBoxRenderer;
  },
  _backGroundTextureScaleChangedWithSize: function () {
    var a = this._backGroundBoxRenderer,
      b = this._contentSize;
    if (this._ignoreSize)
      a.setScale(1),
        (this._backgroundTextureScaleX = this._backgroundTextureScaleY = 1);
    else {
      var d = a.getContentSize();
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        this._backgroundTextureScaleX = this._backgroundTextureScaleY = 1;
        return;
      }
      var e = b.width / d.width,
        d = b.height / d.height;
      this._backgroundTextureScaleX = e;
      this._backgroundTextureScaleY = d;
      a.setScaleX(e);
      a.setScaleY(d);
    }
    a.setPosition(0.5 * b.width, 0.5 * b.height);
  },
  _backGroundSelectedTextureScaleChangedWithSize: function () {
    var a = this._backGroundSelectedBoxRenderer,
      b = this._contentSize;
    if (this._ignoreSize) a.setScale(1);
    else {
      var d = a.getContentSize();
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        return;
      }
      var e = b.height / d.height;
      a.setScaleX(b.width / d.width);
      a.setScaleY(e);
    }
    a.setPosition(0.5 * b.width, 0.5 * b.height);
  },
  _frontCrossTextureScaleChangedWithSize: function () {
    var a = this._frontCrossRenderer,
      b = this._contentSize;
    if (this._ignoreSize) a.setScale(1);
    else {
      var d = a.getContentSize();
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        return;
      }
      var e = b.height / d.height;
      a.setScaleX(b.width / d.width);
      a.setScaleY(e);
    }
    a.setPosition(0.5 * b.width, 0.5 * b.height);
  },
  _backGroundDisabledTextureScaleChangedWithSize: function () {
    var a = this._backGroundBoxDisabledRenderer,
      b = this._contentSize;
    if (this._ignoreSize) a.setScale(1);
    else {
      var d = a.getContentSize();
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        return;
      }
      var e = b.height / d.height;
      a.setScaleX(b.width / d.width);
      a.setScaleY(e);
    }
    a.setPosition(0.5 * b.width, 0.5 * b.height);
  },
  _frontCrossDisabledTextureScaleChangedWithSize: function () {
    var a = this._frontCrossDisabledRenderer,
      b = this._contentSize;
    if (this._ignoreSize) a.setScale(1);
    else {
      var d = a.getContentSize();
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        return;
      }
      var e = b.height / d.height;
      a.setScaleX(b.width / d.width);
      a.setScaleY(e);
    }
    a.setPosition(0.5 * b.width, 0.5 * b.height);
  },
  getDescription: function () {
    return "CheckBox";
  },
  _createCloneInstance: function () {
    return new ccui.CheckBox();
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.CheckBox &&
      (this.loadTextureBackGround(a._backGroundFileName, a._backGroundTexType),
      this.loadTextureBackGroundSelected(
        a._backGroundSelectedFileName,
        a._backGroundSelectedTexType
      ),
      this.loadTextureFrontCross(a._frontCrossFileName, a._frontCrossTexType),
      this.loadTextureBackGroundDisabled(
        a._backGroundDisabledFileName,
        a._backGroundDisabledTexType
      ),
      this.loadTextureFrontCrossDisabled(
        a._frontCrossDisabledFileName,
        a._frontCrossDisabledTexType
      ),
      this.setSelected(a._isSelected),
      (this._checkBoxEventListener = a._checkBoxEventListener),
      (this._checkBoxEventSelector = a._checkBoxEventSelector),
      (this._ccEventCallback = a._ccEventCallback),
      (this._zoomScale = a._zoomScale),
      (this._backgroundTextureScaleX = a._backgroundTextureScaleX),
      (this._backgroundTextureScaleY = a._backgroundTextureScaleY));
  },
  _adaptRenderers: function () {
    this._backGroundBoxRendererAdaptDirty &&
      (this._backGroundTextureScaleChangedWithSize(),
      (this._backGroundBoxRendererAdaptDirty = !1));
    this._backGroundSelectedBoxRendererAdaptDirty &&
      (this._backGroundSelectedTextureScaleChangedWithSize(),
      (this._backGroundSelectedBoxRendererAdaptDirty = !1));
    this._frontCrossRendererAdaptDirty &&
      (this._frontCrossTextureScaleChangedWithSize(),
      (this._frontCrossRendererAdaptDirty = !1));
    this._backGroundBoxDisabledRendererAdaptDirty &&
      (this._backGroundDisabledTextureScaleChangedWithSize(),
      (this._backGroundBoxDisabledRendererAdaptDirty = !1));
    this._frontCrossDisabledRendererAdaptDirty &&
      (this._frontCrossDisabledTextureScaleChangedWithSize(),
      (this._frontCrossDisabledRendererAdaptDirty = !1));
  },
});
_p = ccui.CheckBox.prototype;
cc.defineGetterSetter(_p, "selected", _p.isSelected, _p.setSelected);
_p = null;
ccui.CheckBox.create = function (a, b, d, e, f, g) {
  return new ccui.CheckBox(a, b, d, e, f, g);
};
ccui.CheckBox.EVENT_SELECTED = 0;
ccui.CheckBox.EVENT_UNSELECTED = 1;
ccui.CheckBox.BOX_RENDERER_ZORDER = -1;
ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER = -1;
ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER = -1;
ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER = -1;
ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER = -1;
ccui.ImageView = ccui.Widget.extend({
  _scale9Enabled: !1,
  _prevIgnoreSize: !0,
  _capInsets: null,
  _imageRenderer: null,
  _textureFile: "",
  _imageTexType: ccui.Widget.LOCAL_TEXTURE,
  _imageTextureSize: null,
  _className: "ImageView",
  _imageRendererAdaptDirty: !0,
  ctor: function (a, b) {
    this._capInsets = cc.rect(0, 0, 0, 0);
    this._imageTextureSize = cc.size(
      this._capInsets.width,
      this._capInsets.height
    );
    ccui.Widget.prototype.ctor.call(this);
    a
      ? this.loadTexture(a, void 0 === b ? 0 : b)
      : (this._imageTexType = ccui.Widget.LOCAL_TEXTURE);
  },
  _initRenderer: function () {
    this._imageRenderer = new ccui.Scale9Sprite();
    this._imageRenderer.setRenderingType(
      ccui.Scale9Sprite.RenderingType.SIMPLE
    );
    this.addProtectedChild(
      this._imageRenderer,
      ccui.ImageView.RENDERER_ZORDER,
      -1
    );
  },
  loadTexture: function (a, b) {
    if (a && (this._textureFile != a || this._imageTexType != b)) {
      var d = this;
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._textureFile = a;
      this._imageTexType = b;
      var e = d._imageRenderer;
      switch (d._imageTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d._scale9Enabled
            ? (e.initWithFile(a), e.setCapInsets(d._capInsets))
            : e.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d._scale9Enabled
            ? (e.initWithSpriteFrameName(a), e.setCapInsets(d._capInsets))
            : e.initWithSpriteFrameName(a);
      }
      if (!e._textureLoaded) {
        var f = function () {
          e.removeEventListener("load", f);
          !d._ignoreSize &&
            cc.sizeEqualToSize(d._customSize, cc.size(0, 0)) &&
            (d._customSize = d._imageRenderer.getContentSize());
          d._imageTextureSize = e.getContentSize();
          d._updateChildrenDisplayedRGBA();
          d._updateContentSizeWithTextureSize(d._imageTextureSize);
        };
        e.addEventListener("load", f);
      }
      !this._ignoreSize &&
        cc.sizeEqualToSize(this._customSize, cc.size(0, 0)) &&
        (this._customSize = this._imageRenderer.getContentSize());
      d._imageTextureSize = e.getContentSize();
      this._updateChildrenDisplayedRGBA();
      d._updateContentSizeWithTextureSize(d._imageTextureSize);
      d._imageRendererAdaptDirty = !0;
      d._findLayout();
    }
  },
  setTextureRect: function () {
    cc.warn("ImageView.setTextureRect  is deprecated!");
  },
  setScale9Enabled: function (a) {
    this._scale9Enabled !== a &&
      ((this._scale9Enabled = a)
        ? this._imageRenderer.setRenderingType(
            ccui.Scale9Sprite.RenderingType.SLICED
          )
        : this._imageRenderer.setRenderingType(
            ccui.Scale9Sprite.RenderingType.SIMPLE
          ),
      this._scale9Enabled
        ? ((a = this._ignoreSize),
          this.ignoreContentAdaptWithSize(!1),
          (this._prevIgnoreSize = a))
        : this.ignoreContentAdaptWithSize(this._prevIgnoreSize),
      this.setCapInsets(this._capInsets),
      (this._imageRendererAdaptDirty = !0));
  },
  isScale9Enabled: function () {
    return this._scale9Enabled;
  },
  ignoreContentAdaptWithSize: function (a) {
    if (!this._scale9Enabled || (this._scale9Enabled && !a))
      ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a),
        (this._prevIgnoreSize = a);
  },
  setCapInsets: function (a) {
    if (a) {
      var b = this._capInsets;
      b.x = a.x;
      b.y = a.y;
      b.width = a.width;
      b.height = a.height;
      this._scale9Enabled && this._imageRenderer.setCapInsets(a);
    }
  },
  getCapInsets: function () {
    return cc.rect(this._capInsets);
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._imageRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._imageRendererAdaptDirty &&
      (this._imageTextureScaleChangedWithSize(),
      (this._imageRendererAdaptDirty = !1));
  },
  getVirtualRendererSize: function () {
    return cc.size(this._imageTextureSize);
  },
  getVirtualRenderer: function () {
    return this._imageRenderer;
  },
  _imageTextureScaleChangedWithSize: function () {
    this._imageRenderer.setContentSize(this._contentSize);
    this._imageRenderer.setPosition(
      this._contentSize.width / 2,
      this._contentSize.height / 2
    );
  },
  getDescription: function () {
    return "ImageView";
  },
  _createCloneInstance: function () {
    return new ccui.ImageView();
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.ImageView &&
      ((this._prevIgnoreSize = a._prevIgnoreSize),
      (this._capInsets = a._capInsets),
      this.loadTexture(a._textureFile, a._imageTexType),
      this.setScale9Enabled(a._scale9Enabled));
  },
  setContentSize: function (a, b) {
    b && (a = cc.size(a, b));
    ccui.Widget.prototype.setContentSize.call(this, a);
    this._imageRenderer.setContentSize(a);
  },
});
ccui.ImageView.create = function (a, b) {
  return new ccui.ImageView(a, b);
};
ccui.ImageView.RENDERER_ZORDER = -1;
ccui.LoadingBar = ccui.Widget.extend({
  _direction: null,
  _percent: 100,
  _totalLength: 0,
  _barRenderer: null,
  _renderBarTexType: ccui.Widget.LOCAL_TEXTURE,
  _barRendererTextureSize: null,
  _scale9Enabled: !1,
  _prevIgnoreSize: !0,
  _capInsets: null,
  _textureFile: "",
  _isTextureLoaded: !1,
  _className: "LoadingBar",
  _barRendererAdaptDirty: !0,
  ctor: function (a, b) {
    this._direction = ccui.LoadingBar.TYPE_LEFT;
    this._barRendererTextureSize = cc.size(0, 0);
    this._capInsets = cc.rect(0, 0, 0, 0);
    ccui.Widget.prototype.ctor.call(this);
    void 0 !== a && this.loadTexture(a);
    void 0 !== b && this.setPercent(b);
  },
  _initRenderer: function () {
    this._barRenderer = new cc.Sprite();
    this.addProtectedChild(
      this._barRenderer,
      ccui.LoadingBar.RENDERER_ZORDER,
      -1
    );
    this._barRenderer.setAnchorPoint(0, 0.5);
  },
  setDirection: function (a) {
    if (this._direction !== a)
      switch (((this._direction = a), this._direction)) {
        case ccui.LoadingBar.TYPE_LEFT:
          this._barRenderer.setAnchorPoint(0, 0.5);
          this._barRenderer.setPosition(0, 0.5 * this._contentSize.height);
          this._scale9Enabled || this._barRenderer.setFlippedX(!1);
          break;
        case ccui.LoadingBar.TYPE_RIGHT:
          this._barRenderer.setAnchorPoint(1, 0.5),
            this._barRenderer.setPosition(
              this._totalLength,
              0.5 * this._contentSize.height
            ),
            this._scale9Enabled || this._barRenderer.setFlippedX(!0);
      }
  },
  getDirection: function () {
    return this._direction;
  },
  loadTexture: function (a, b) {
    if (a) {
      this._renderBarTexType = b = b || ccui.Widget.LOCAL_TEXTURE;
      this._textureFile = a;
      var d = this._barRenderer,
        e = this;
      d._textureLoaded ||
        d.addEventListener("load", function () {
          e.loadTexture(e._textureFile, e._renderBarTexType);
          e._setPercent(e._percent);
        });
      switch (this._renderBarTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      var f = d.getContentSize();
      this._barRendererTextureSize.width = f.width;
      this._barRendererTextureSize.height = f.height;
      switch (this._direction) {
        case ccui.LoadingBar.TYPE_LEFT:
          d.setAnchorPoint(0, 0.5);
          this._scale9Enabled || d.setFlippedX(!1);
          break;
        case ccui.LoadingBar.TYPE_RIGHT:
          d.setAnchorPoint(1, 0.5), this._scale9Enabled || d.setFlippedX(!0);
      }
      this._scale9Enabled && d.setCapInsets(this._capInsets);
      this._updateChildrenDisplayedRGBA();
      this._barRendererScaleChangedWithSize();
      this._updateContentSizeWithTextureSize(this._barRendererTextureSize);
      this._barRendererAdaptDirty = !0;
      this._findLayout();
    }
  },
  setScale9Enabled: function (a) {
    this._scale9Enabled !== a &&
      ((this._scale9Enabled = a),
      this.removeProtectedChild(this._barRenderer),
      (this._barRenderer = this._scale9Enabled
        ? new ccui.Scale9Sprite()
        : new cc.Sprite()),
      this.loadTexture(this._textureFile, this._renderBarTexType),
      this.addProtectedChild(
        this._barRenderer,
        ccui.LoadingBar.RENDERER_ZORDER,
        -1
      ),
      this._scale9Enabled
        ? ((a = this._ignoreSize),
          this.ignoreContentAdaptWithSize(!1),
          (this._prevIgnoreSize = a))
        : this.ignoreContentAdaptWithSize(this._prevIgnoreSize),
      this.setCapInsets(this._capInsets),
      this.setPercent(this._percent),
      (this._barRendererAdaptDirty = !0));
  },
  isScale9Enabled: function () {
    return this._scale9Enabled;
  },
  setCapInsets: function (a) {
    if (a) {
      var b = this._capInsets;
      b.x = a.x;
      b.y = a.y;
      b.width = a.width;
      b.height = a.height;
      this._scale9Enabled && this._barRenderer.setCapInsets(a);
    }
  },
  getCapInsets: function () {
    return cc.rect(this._capInsets);
  },
  setPercent: function (a) {
    100 < a && (a = 100);
    0 > a && (a = 0);
    a !== this._percent && ((this._percent = a), this._setPercent(a));
  },
  _setPercent: function () {
    var a, b, d, e;
    0 >= this._totalLength ||
      ((a = this._percent / 100),
      this._scale9Enabled
        ? this._setScale9Scale()
        : ((d = this._barRenderer),
          (e = this._barRendererTextureSize),
          (b = d.getTextureRect()),
          (b.width = e.width * a),
          d.setTextureRect(
            cc.rect(b.x, b.y, e.width * a, e.height),
            d._rectRotated
          )));
  },
  setContentSize: function (a, b) {
    ccui.Widget.prototype.setContentSize.call(this, a, b);
    this._totalLength = void 0 === b ? a.width : a;
  },
  getPercent: function () {
    return this._percent;
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._barRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._barRendererAdaptDirty &&
      (this._barRendererScaleChangedWithSize(),
      (this._barRendererAdaptDirty = !1));
  },
  ignoreContentAdaptWithSize: function (a) {
    if (!this._scale9Enabled || (this._scale9Enabled && !a))
      ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a),
        (this._prevIgnoreSize = a);
  },
  getVirtualRendererSize: function () {
    return cc.size(this._barRendererTextureSize);
  },
  getVirtualRenderer: function () {
    return this._barRenderer;
  },
  _barRendererScaleChangedWithSize: function () {
    var a = this._barRenderer,
      b = this._contentSize;
    if (this._unifySize)
      (this._totalLength = this._contentSize.width),
        this.setPercent(this._percent);
    else if (this._ignoreSize)
      this._scale9Enabled ||
        ((this._totalLength = this._barRendererTextureSize.width),
        a.setScale(1));
    else if (((this._totalLength = b.width), this._scale9Enabled))
      this._setScale9Scale(), a.setScale(1);
    else {
      var d = this._barRendererTextureSize;
      if (0 >= d.width || 0 >= d.height) {
        a.setScale(1);
        return;
      }
      var e = b.height / d.height;
      a.setScaleX(b.width / d.width);
      a.setScaleY(e);
    }
    switch (this._direction) {
      case ccui.LoadingBar.TYPE_LEFT:
        a.setPosition(0, 0.5 * b.height);
        break;
      case ccui.LoadingBar.TYPE_RIGHT:
        a.setPosition(this._totalLength, 0.5 * b.height);
    }
  },
  _setScale9Scale: function () {
    this._barRenderer.setPreferredSize(
      cc.size(
        (this._percent / 100) * this._totalLength,
        this._contentSize.height
      )
    );
  },
  getDescription: function () {
    return "LoadingBar";
  },
  _createCloneInstance: function () {
    return new ccui.LoadingBar();
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.LoadingBar &&
      ((this._prevIgnoreSize = a._prevIgnoreSize),
      this.setScale9Enabled(a._scale9Enabled),
      this.loadTexture(a._textureFile, a._renderBarTexType),
      this.setCapInsets(a._capInsets),
      this.setPercent(a._percent),
      this.setDirection(a._direction));
  },
});
_p = ccui.LoadingBar.prototype;
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(_p, "percent", _p.getPercent, _p.setPercent);
_p = null;
ccui.LoadingBar.create = function (a, b) {
  return new ccui.LoadingBar(a, b);
};
ccui.LoadingBar.TYPE_LEFT = 0;
ccui.LoadingBar.TYPE_RIGHT = 1;
ccui.LoadingBar.RENDERER_ZORDER = -1;
ccui.Slider = ccui.Widget.extend({
  _barRenderer: null,
  _progressBarRenderer: null,
  _barTextureSize: null,
  _progressBarTextureSize: null,
  _slidBallNormalRenderer: null,
  _slidBallPressedRenderer: null,
  _slidBallDisabledRenderer: null,
  _slidBallRenderer: null,
  _barLength: 0,
  _percent: 0,
  _scale9Enabled: !1,
  _prevIgnoreSize: !0,
  _textureFile: "",
  _progressBarTextureFile: "",
  _slidBallNormalTextureFile: "",
  _slidBallPressedTextureFile: "",
  _slidBallDisabledTextureFile: "",
  _capInsetsBarRenderer: null,
  _capInsetsProgressBarRenderer: null,
  _sliderEventListener: null,
  _sliderEventSelector: null,
  _barTexType: ccui.Widget.LOCAL_TEXTURE,
  _progressBarTexType: ccui.Widget.LOCAL_TEXTURE,
  _ballNTexType: ccui.Widget.LOCAL_TEXTURE,
  _ballPTexType: ccui.Widget.LOCAL_TEXTURE,
  _ballDTexType: ccui.Widget.LOCAL_TEXTURE,
  _isTextureLoaded: !1,
  _className: "Slider",
  _barRendererAdaptDirty: !0,
  _progressBarRendererDirty: !0,
  _unifySize: !1,
  _zoomScale: 0.1,
  _sliderBallNormalTextureScaleX: 1,
  _sliderBallNormalTextureScaleY: 1,
  ctor: function (a, b, d) {
    this._barTextureSize = cc.size(0, 0);
    this._progressBarTextureSize = cc.size(0, 0);
    this._capInsetsBarRenderer = cc.rect(0, 0, 0, 0);
    this._capInsetsProgressBarRenderer = cc.rect(0, 0, 0, 0);
    ccui.Widget.prototype.ctor.call(this);
    d = d || 0;
    this.setTouchEnabled(!0);
    a && this.loadBarTexture(a, d);
    b && this.loadSlidBallTextures(b, d);
  },
  _initRenderer: function () {
    this._barRenderer = new cc.Sprite();
    this._progressBarRenderer = new cc.Sprite();
    this._progressBarRenderer.setAnchorPoint(0, 0.5);
    this.addProtectedChild(
      this._barRenderer,
      ccui.Slider.BASEBAR_RENDERER_ZORDER,
      -1
    );
    this.addProtectedChild(
      this._progressBarRenderer,
      ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,
      -1
    );
    this._slidBallNormalRenderer = new cc.Sprite();
    this._slidBallPressedRenderer = new cc.Sprite();
    this._slidBallPressedRenderer.setVisible(!1);
    this._slidBallDisabledRenderer = new cc.Sprite();
    this._slidBallDisabledRenderer.setVisible(!1);
    this._slidBallRenderer = new cc.Node();
    this._slidBallRenderer.addChild(this._slidBallNormalRenderer);
    this._slidBallRenderer.addChild(this._slidBallPressedRenderer);
    this._slidBallRenderer.addChild(this._slidBallDisabledRenderer);
    this._slidBallRenderer.setCascadeColorEnabled(!0);
    this._slidBallRenderer.setCascadeOpacityEnabled(!0);
    this.addProtectedChild(
      this._slidBallRenderer,
      ccui.Slider.BALL_RENDERER_ZORDER,
      -1
    );
  },
  loadBarTexture: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._textureFile = a;
      this._barTexType = b;
      var d = this._barRenderer,
        e = this;
      d._textureLoaded ||
        d.addEventListener("load", function () {
          e.loadBarTexture(e._textureFile, e._barTexType);
        });
      switch (this._barTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._progressBarRendererDirty = this._barRendererAdaptDirty = !0;
      this._updateContentSizeWithTextureSize(
        this._barRenderer.getContentSize()
      );
      this._findLayout();
      this._barTextureSize = this._barRenderer.getContentSize();
    }
  },
  loadProgressBarTexture: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._progressBarTextureFile = a;
      this._progressBarTexType = b;
      var d = this._progressBarRenderer,
        e = this;
      d._textureLoaded ||
        d.addEventListener("load", function () {
          e.loadProgressBarTexture(
            e._progressBarTextureFile,
            e._progressBarTexType
          );
        });
      switch (this._progressBarTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          d.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._progressBarRenderer.setAnchorPoint(cc.p(0, 0.5));
      d = this._progressBarRenderer.getContentSize();
      this._progressBarTextureSize = { width: d.width, height: d.height };
      this._progressBarRendererDirty = !0;
      this._findLayout();
    }
  },
  setScale9Enabled: function (a) {
    this._scale9Enabled !== a &&
      ((this._scale9Enabled = a),
      this.removeProtectedChild(this._barRenderer, !0),
      this.removeProtectedChild(this._progressBarRenderer, !0),
      (this._progressBarRenderer = this._barRenderer = null),
      this._scale9Enabled
        ? ((this._barRenderer = new ccui.Scale9Sprite()),
          (this._progressBarRenderer = new ccui.Scale9Sprite()))
        : ((this._barRenderer = new cc.Sprite()),
          (this._progressBarRenderer = new cc.Sprite())),
      this.loadBarTexture(this._textureFile, this._barTexType),
      this.loadProgressBarTexture(
        this._progressBarTextureFile,
        this._progressBarTexType
      ),
      this.addProtectedChild(
        this._barRenderer,
        ccui.Slider.BASEBAR_RENDERER_ZORDER,
        -1
      ),
      this.addProtectedChild(
        this._progressBarRenderer,
        ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,
        -1
      ),
      this._scale9Enabled
        ? ((a = this._ignoreSize),
          this.ignoreContentAdaptWithSize(!1),
          (this._prevIgnoreSize = a))
        : this.ignoreContentAdaptWithSize(this._prevIgnoreSize),
      this.setCapInsetsBarRenderer(this._capInsetsBarRenderer),
      this.setCapInsetProgressBarRenderer(this._capInsetsProgressBarRenderer),
      (this._progressBarRendererDirty = this._barRendererAdaptDirty = !0));
  },
  isScale9Enabled: function () {
    return this._scale9Enabled;
  },
  ignoreContentAdaptWithSize: function (a) {
    if (!this._scale9Enabled || (this._scale9Enabled && !a))
      ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a),
        (this._prevIgnoreSize = a);
  },
  setCapInsets: function (a) {
    this.setCapInsetsBarRenderer(a);
    this.setCapInsetProgressBarRenderer(a);
  },
  setCapInsetsBarRenderer: function (a) {
    if (a) {
      var b = this._capInsetsBarRenderer;
      b.x = a.x;
      b.y = a.y;
      b.width = a.width;
      b.height = a.height;
      this._scale9Enabled && this._barRenderer.setCapInsets(a);
    }
  },
  getCapInsetsBarRenderer: function () {
    return cc.rect(this._capInsetsBarRenderer);
  },
  setCapInsetProgressBarRenderer: function (a) {
    if (a) {
      var b = this._capInsetsProgressBarRenderer;
      b.x = a.x;
      b.y = a.y;
      b.width = a.width;
      b.height = a.height;
      this._scale9Enabled && this._progressBarRenderer.setCapInsets(a);
    }
  },
  getCapInsetsProgressBarRenderer: function () {
    return cc.rect(this._capInsetsProgressBarRenderer);
  },
  loadSlidBallTextures: function (a, b, d, e) {
    this.loadSlidBallTextureNormal(a, e);
    this.loadSlidBallTexturePressed(b, e);
    this.loadSlidBallTextureDisabled(d, e);
  },
  loadSlidBallTextureNormal: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._slidBallNormalTextureFile = a;
      this._ballNTexType = b;
      var d = this;
      this._slidBallNormalRenderer._textureLoaded ||
        this._slidBallNormalRenderer.addEventListener("load", function () {
          d.loadSlidBallTextureNormal(
            d._slidBallNormalTextureFile,
            d._ballNTexType
          );
        });
      switch (this._ballNTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          this._slidBallNormalRenderer.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          this._slidBallNormalRenderer.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._findLayout();
    }
  },
  loadSlidBallTexturePressed: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._slidBallPressedTextureFile = a;
      this._ballPTexType = b;
      var d = this;
      this._slidBallPressedRenderer._textureLoaded ||
        this._slidBallPressedRenderer.addEventListener("load", function () {
          d.loadSlidBallTexturePressed(
            d._slidBallPressedTextureFile,
            d._ballPTexType
          );
        });
      switch (this._ballPTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          this._slidBallPressedRenderer.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          this._slidBallPressedRenderer.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._findLayout();
    }
  },
  loadSlidBallTextureDisabled: function (a, b) {
    if (a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._slidBallDisabledTextureFile = a;
      this._ballDTexType = b;
      var d = this;
      this._slidBallDisabledRenderer._textureLoaded ||
        this._slidBallDisabledRenderer.addEventListener("load", function () {
          d.loadSlidBallTextureDisabled(
            d._slidBallDisabledTextureFile,
            d._ballDTexType
          );
        });
      switch (this._ballDTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          this._slidBallDisabledRenderer.initWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          this._slidBallDisabledRenderer.initWithSpriteFrameName(a);
      }
      this._updateChildrenDisplayedRGBA();
      this._findLayout();
    }
  },
  setPercent: function (a) {
    100 < a && (a = 100);
    0 > a && (a = 0);
    this._percent = a;
    a = (a / 100) * this._barLength;
    this._slidBallRenderer.setPosition(a, this._contentSize.height / 2);
    if (this._scale9Enabled)
      this._progressBarRenderer.setPreferredSize(
        cc.size(a, this._contentSize.height)
      );
    else {
      var b = this._progressBarRenderer,
        d = b.getTextureRect();
      b.setTextureRect(
        cc.rect(d.x, d.y, a / b._scaleX, d.height),
        b.isTextureRectRotated()
      );
    }
  },
  hitTest: function (a) {
    a = this._slidBallNormalRenderer.convertToNodeSpace(a);
    var b = this._slidBallNormalRenderer.getContentSize(),
      b = cc.rect(0, 0, b.width, b.height);
    return (
      a.x >= b.x && a.x <= b.x + b.width && a.y >= b.y && a.y <= b.y + b.height
    );
  },
  onTouchBegan: function (a, b) {
    var d = ccui.Widget.prototype.onTouchBegan.call(this, a, b);
    if (this._hit) {
      var e = this.convertToNodeSpace(this._touchBeganPosition);
      this.setPercent(this._getPercentWithBallPos(e.x));
      this._percentChangedEvent();
    }
    return d;
  },
  onTouchMoved: function (a, b) {
    var d = a.getLocation(),
      d = this.convertToNodeSpace(d);
    this.setPercent(this._getPercentWithBallPos(d.x));
    this._percentChangedEvent();
  },
  onTouchEnded: function (a, b) {
    ccui.Widget.prototype.onTouchEnded.call(this, a, b);
  },
  onTouchCancelled: function (a, b) {
    ccui.Widget.prototype.onTouchCancelled.call(this, a, b);
  },
  _getPercentWithBallPos: function (a) {
    return (a / this._barLength) * 100;
  },
  addEventListenerSlider: function (a, b) {
    this.addEventListener(a, b);
  },
  addEventListener: function (a, b) {
    this._sliderEventSelector = a;
    this._sliderEventListener = b;
  },
  _percentChangedEvent: function () {
    this._sliderEventSelector &&
      (this._sliderEventListener
        ? this._sliderEventSelector.call(
            this._sliderEventListener,
            this,
            ccui.Slider.EVENT_PERCENT_CHANGED
          )
        : this._sliderEventSelector(this, ccui.Slider.EVENT_PERCENT_CHANGED));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.Slider.EVENT_PERCENT_CHANGED);
  },
  getPercent: function () {
    return this._percent;
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._progressBarRendererDirty = this._barRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._barRendererAdaptDirty &&
      (this._barRendererScaleChangedWithSize(),
      (this._barRendererAdaptDirty = !1));
    this._progressBarRendererDirty &&
      (this._progressBarRendererScaleChangedWithSize(),
      (this._progressBarRendererDirty = !1));
  },
  getVirtualRendererSize: function () {
    return this._barRenderer.getContentSize();
  },
  getVirtualRenderer: function () {
    return this._barRenderer;
  },
  _barRendererScaleChangedWithSize: function () {
    if (this._unifySize)
      (this._barLength = this._contentSize.width),
        this._barRenderer.setPreferredSize(this._contentSize);
    else if (this._ignoreSize)
      this._barRenderer.setScale(1),
        (this._barLength = this._contentSize.width);
    else if (((this._barLength = this._contentSize.width), this._scale9Enabled))
      this._barRenderer.setPreferredSize(this._contentSize),
        this._barRenderer.setScale(1);
    else {
      var a = this._barTextureSize;
      if (0 >= a.width || 0 >= a.height) this._barRenderer.setScale(1);
      else {
        var b = this._contentSize.height / a.height;
        this._barRenderer.setScaleX(this._contentSize.width / a.width);
        this._barRenderer.setScaleY(b);
      }
    }
    this._barRenderer.setPosition(
      this._contentSize.width / 2,
      this._contentSize.height / 2
    );
    this.setPercent(this._percent);
  },
  _progressBarRendererScaleChangedWithSize: function () {
    if (this._unifySize)
      this._progressBarRenderer.setPreferredSize(this._contentSize);
    else if (this._ignoreSize) {
      if (!this._scale9Enabled) {
        var a = this._progressBarTextureSize,
          b = this._contentSize.width / a.width,
          a = this._contentSize.height / a.height;
        this._progressBarRenderer.setScaleX(b);
        this._progressBarRenderer.setScaleY(a);
      }
    } else if (this._scale9Enabled)
      this._progressBarRenderer.setPreferredSize(this._contentSize),
        this._progressBarRenderer.setScale(1);
    else {
      a = this._progressBarTextureSize;
      if (0 >= a.width || 0 >= a.height) {
        this._progressBarRenderer.setScale(1);
        return;
      }
      b = this._contentSize.width / a.width;
      a = this._contentSize.height / a.height;
      this._progressBarRenderer.setScaleX(b);
      this._progressBarRenderer.setScaleY(a);
    }
    this._progressBarRenderer.setPosition(0, this._contentSize.height / 2);
    this.setPercent(this._percent);
  },
  _onPressStateChangedToNormal: function () {
    this._slidBallNormalRenderer.setVisible(!0);
    this._slidBallPressedRenderer.setVisible(!1);
    this._slidBallDisabledRenderer.setVisible(!1);
    this._slidBallNormalRenderer.setScale(
      this._sliderBallNormalTextureScaleX,
      this._sliderBallNormalTextureScaleY
    );
    cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getNormalGLProgram());
  },
  _onPressStateChangedToPressed: function () {
    this._slidBallPressedTextureFile
      ? (this._slidBallNormalRenderer.setVisible(!1),
        this._slidBallPressedRenderer.setVisible(!0),
        this._slidBallDisabledRenderer.setVisible(!1))
      : this._slidBallNormalRenderer.setScale(
          this._sliderBallNormalTextureScaleX + this._zoomScale,
          this._sliderBallNormalTextureScaleY + this._zoomScale
        );
    cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getNormalGLProgram());
  },
  _onPressStateChangedToDisabled: function () {
    this._slidBallDisabledTextureFile
      ? (this._slidBallNormalRenderer.setVisible(!1),
        this._slidBallDisabledRenderer.setVisible(!0))
      : (this._slidBallNormalRenderer.setVisible(!0),
        cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
          (this._slidBallNormalRenderer._renderCmd._shaderProgram = this._getGrayGLProgram()));
    this._slidBallNormalRenderer.setScale(
      this._sliderBallNormalTextureScaleX,
      this._sliderBallNormalTextureScaleY
    );
    this._slidBallPressedRenderer.setVisible(!1);
  },
  setZoomScale: function (a) {
    this._zoomScale = a;
  },
  getZoomScale: function () {
    return this._zoomScale;
  },
  getSlidBallNormalRenderer: function () {
    return this._slidBallNormalRenderer;
  },
  getSlidBallPressedRenderer: function () {
    return this._slidBallPressedRenderer;
  },
  getSlidBallDisabledRenderer: function () {
    return this._slidBallDisabledRenderer;
  },
  getSlidBallRenderer: function () {
    return this._slidBallRenderer;
  },
  getDescription: function () {
    return "Slider";
  },
  _createCloneInstance: function () {
    return new ccui.Slider();
  },
  _copySpecialProperties: function (a) {
    this._prevIgnoreSize = a._prevIgnoreSize;
    this.setScale9Enabled(a._scale9Enabled);
    this.loadBarTexture(a._textureFile, a._barTexType);
    this.loadProgressBarTexture(
      a._progressBarTextureFile,
      a._progressBarTexType
    );
    this.loadSlidBallTextureNormal(
      a._slidBallNormalTextureFile,
      a._ballNTexType
    );
    this.loadSlidBallTexturePressed(
      a._slidBallPressedTextureFile,
      a._ballPTexType
    );
    this.loadSlidBallTextureDisabled(
      a._slidBallDisabledTextureFile,
      a._ballDTexType
    );
    this.setPercent(a.getPercent());
    this._sliderEventListener = a._sliderEventListener;
    this._sliderEventSelector = a._sliderEventSelector;
    this._zoomScale = a._zoomScale;
    this._ccEventCallback = a._ccEventCallback;
  },
});
_p = ccui.Slider.prototype;
cc.defineGetterSetter(_p, "percent", _p.getPercent, _p.setPercent);
_p = null;
ccui.Slider.create = function (a, b, d) {
  return new ccui.Slider(a, b, d);
};
ccui.Slider.EVENT_PERCENT_CHANGED = 0;
ccui.Slider.BASEBAR_RENDERER_ZORDER = -3;
ccui.Slider.PROGRESSBAR_RENDERER_ZORDER = -2;
ccui.Slider.BALL_RENDERER_ZORDER = -1;
ccui.Text = ccui.Widget.extend({
  _touchScaleChangeEnabled: !1,
  _normalScaleValueX: 1,
  _normalScaleValueY: 1,
  _fontName: "Arial",
  _fontSize: 16,
  _onSelectedScaleOffset: 0.5,
  _labelRenderer: null,
  _textAreaSize: null,
  _textVerticalAlignment: 0,
  _textHorizontalAlignment: 0,
  _className: "Text",
  _type: null,
  _labelRendererAdaptDirty: !0,
  ctor: function (a, b, d) {
    this._type = ccui.Text.Type.SYSTEM;
    this._textAreaSize = cc.size(0, 0);
    ccui.Widget.prototype.ctor.call(this);
    void 0 !== d
      ? (this.setFontName(b), this.setFontSize(d), this.setString(a))
      : this.setFontName(this._fontName);
  },
  _initRenderer: function () {
    this._labelRenderer = new cc.LabelTTF();
    this.addProtectedChild(this._labelRenderer, ccui.Text.RENDERER_ZORDER, -1);
  },
  setText: function (a) {
    cc.log("Please use the setString");
    this.setString(a);
  },
  setString: function (a) {
    a !== this._labelRenderer.getString() &&
      (this._setString(a),
      this._updateContentSizeWithTextureSize(
        this._labelRenderer.getContentSize()
      ));
  },
  _setString: function (a) {
    this._labelRenderer.setString(a);
    this._labelRendererAdaptDirty = !0;
  },
  getStringValue: function () {
    cc.log("Please use the getString");
    return this._labelRenderer.getString();
  },
  getString: function () {
    return this._labelRenderer.getString();
  },
  getStringLength: function () {
    return this._labelRenderer.getStringLength();
  },
  setFontSize: function (a) {
    this._setFontSize(a);
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  _setFontSize: function (a) {
    this._labelRenderer.setFontSize(a);
    this._fontSize = a;
    this._labelRendererAdaptDirty = !0;
  },
  getFontSize: function () {
    return this._fontSize;
  },
  setFontName: function (a) {
    this._setFontName(a);
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  _setFontName: function (a) {
    this._fontName = a;
    this._labelRenderer.setFontName(a);
    this._labelRendererAdaptDirty = !0;
  },
  _updateUITextContentSize: function () {
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  getFontName: function () {
    return this._fontName;
  },
  _setFont: function (a) {
    var b = cc.LabelTTF._fontStyleRE.exec(a);
    b &&
      ((this._fontSize = parseInt(b[1])),
      (this._fontName = b[2]),
      this._labelRenderer._setFont(a),
      this._labelScaleChangedWithSize());
  },
  _getFont: function () {
    return this._labelRenderer._getFont();
  },
  getType: function () {
    return this._type;
  },
  setTextAreaSize: function (a) {
    this._setTextAreaSize(a);
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  _setTextAreaSize: function (a) {
    this._labelRenderer.setDimensions(a);
    this._ignoreSize || (this._customSize = a);
    this._labelRendererAdaptDirty = !0;
  },
  getTextAreaSize: function () {
    return this._labelRenderer.getDimensions();
  },
  setTextHorizontalAlignment: function (a) {
    this._setTextHorizontalAlignment(a);
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  _setTextHorizontalAlignment: function (a) {
    this._labelRenderer.setHorizontalAlignment(a);
    this._labelRendererAdaptDirty = !0;
  },
  getTextHorizontalAlignment: function () {
    return this._labelRenderer.getHorizontalAlignment();
  },
  setTextVerticalAlignment: function (a) {
    this._setTextVerticalAlignment(a);
    this._updateContentSizeWithTextureSize(
      this._labelRenderer.getContentSize()
    );
  },
  _setTextVerticalAlignment: function (a) {
    this._labelRenderer.setVerticalAlignment(a);
    this._labelRendererAdaptDirty = !0;
  },
  getTextVerticalAlignment: function () {
    return this._labelRenderer.getVerticalAlignment();
  },
  setTouchScaleChangeEnabled: function (a) {
    this._touchScaleChangeEnabled = a;
  },
  isTouchScaleChangeEnabled: function () {
    return this._touchScaleChangeEnabled;
  },
  _onPressStateChangedToNormal: function () {
    this._touchScaleChangeEnabled &&
      (this._labelRenderer.setScaleX(this._normalScaleValueX),
      this._labelRenderer.setScaleY(this._normalScaleValueY));
  },
  _onPressStateChangedToPressed: function () {
    this._touchScaleChangeEnabled &&
      (this._labelRenderer.setScaleX(
        this._normalScaleValueX + this._onSelectedScaleOffset
      ),
      this._labelRenderer.setScaleY(
        this._normalScaleValueY + this._onSelectedScaleOffset
      ));
  },
  _onPressStateChangedToDisabled: function () {},
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._labelRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._labelRendererAdaptDirty &&
      (this._labelScaleChangedWithSize(), (this._labelRendererAdaptDirty = !1));
  },
  getVirtualRendererSize: function () {
    return this._labelRenderer.getContentSize();
  },
  getVirtualRenderer: function () {
    return this._labelRenderer;
  },
  getAutoRenderSize: function () {
    var a = this._labelRenderer.getContentSize();
    this._ignoreSize ||
      (this._labelRenderer.setDimensions(0, 0),
      (a = this._labelRenderer.getContentSize()),
      this._labelRenderer.setDimensions(
        this._contentSize.width,
        this._contentSize.height
      ));
    return a;
  },
  _labelScaleChangedWithSize: function () {
    var a = this._contentSize;
    if (this._ignoreSize)
      this._labelRenderer.setScale(1),
        (this._normalScaleValueX = this._normalScaleValueY = 1);
    else {
      this._labelRenderer.setDimensions(cc.size(a.width, a.height));
      var b = this._labelRenderer.getContentSize();
      if (0 >= b.width || 0 >= b.height) {
        this._labelRenderer.setScale(1);
        return;
      }
      var d = a.width / b.width,
        b = a.height / b.height;
      this._labelRenderer.setScaleX(d);
      this._labelRenderer.setScaleY(b);
      this._normalScaleValueX = d;
      this._normalScaleValueY = b;
    }
    this._labelRenderer.setPosition(a.width / 2, a.height / 2);
  },
  getDescription: function () {
    return "Label";
  },
  enableShadow: function (a, b, d) {
    this._labelRenderer.enableShadow(a, b, d);
  },
  enableOutline: function (a, b) {
    this._labelRenderer.enableStroke(a, b);
  },
  enableGlow: function (a) {
    this._type === ccui.Text.Type.TTF && this._labelRenderer.enableGlow(a);
  },
  disableEffect: function () {
    this._labelRenderer.disableEffect && this._labelRenderer.disableEffect();
  },
  _createCloneInstance: function () {
    return new ccui.Text();
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.Text &&
      (this.setFontName(a._fontName),
      this.setFontSize(a.getFontSize()),
      this.setString(a.getString()),
      this.setTouchScaleChangeEnabled(a.touchScaleEnabled),
      this.setTextAreaSize(a._textAreaSize),
      this.setTextHorizontalAlignment(
        a._labelRenderer.getHorizontalAlignment()
      ),
      this.setTextVerticalAlignment(a._labelRenderer.getVerticalAlignment()),
      this.setContentSize(a.getContentSize()),
      this.setTextColor(a.getTextColor()));
  },
  _setBoundingWidth: function (a) {
    this._textAreaSize.width = a;
    this._labelRenderer._setBoundingWidth(a);
    this._labelScaleChangedWithSize();
  },
  _setBoundingHeight: function (a) {
    this._textAreaSize.height = a;
    this._labelRenderer._setBoundingHeight(a);
    this._labelScaleChangedWithSize();
  },
  _getBoundingWidth: function () {
    return this._textAreaSize.width;
  },
  _getBoundingHeight: function () {
    return this._textAreaSize.height;
  },
  _changePosition: function () {
    this._adaptRenderers();
  },
  setColor: function (a) {
    cc.ProtectedNode.prototype.setColor.call(this, a);
    this._labelRenderer.setColor(a);
  },
  setTextColor: function (a) {
    this._labelRenderer.setFontFillColor(a);
  },
  getTextColor: function () {
    return this._labelRenderer._getFillStyle();
  },
});
_p = ccui.Text.prototype;
cc.defineGetterSetter(
  _p,
  "boundingWidth",
  _p._getBoundingWidth,
  _p._setBoundingWidth
);
cc.defineGetterSetter(
  _p,
  "boundingHeight",
  _p._getBoundingHeight,
  _p._setBoundingHeight
);
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "stringLength", _p.getStringLength);
cc.defineGetterSetter(_p, "font", _p._getFont, _p._setFont);
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.defineGetterSetter(
  _p,
  "textAlign",
  _p.getTextHorizontalAlignment,
  _p.setTextHorizontalAlignment
);
cc.defineGetterSetter(
  _p,
  "verticalAlign",
  _p.getTextVerticalAlignment,
  _p.setTextVerticalAlignment
);
_p = null;
ccui.Label = ccui.Text.create = function (a, b, d) {
  return new ccui.Text(a, b, d);
};
ccui.Text.RENDERER_ZORDER = -1;
ccui.Text.Type = { SYSTEM: 0, TTF: 1 };
ccui.TextAtlas = ccui.Widget.extend({
  _labelAtlasRenderer: null,
  _stringValue: "",
  _charMapFileName: "",
  _itemWidth: 0,
  _itemHeight: 0,
  _startCharMap: "",
  _className: "TextAtlas",
  _labelAtlasRendererAdaptDirty: null,
  ctor: function (a, b, d, e, f) {
    ccui.Widget.prototype.ctor.call(this);
    void 0 !== f && this.setProperty(a, b, d, e, f);
  },
  _initRenderer: function () {
    this._labelAtlasRenderer = new cc.LabelAtlas();
    this._labelAtlasRenderer.setAnchorPoint(cc.p(0.5, 0.5));
    this.addProtectedChild(
      this._labelAtlasRenderer,
      ccui.TextAtlas.RENDERER_ZORDER,
      -1
    );
    this._labelAtlasRenderer.addEventListener(
      "load",
      function () {
        this._updateContentSizeWithTextureSize(
          this._labelAtlasRenderer.getContentSize()
        );
        this._findLayout();
      },
      this
    );
  },
  setProperty: function (a, b, d, e, f) {
    this._stringValue = a;
    this._charMapFileName = b;
    this._itemWidth = d;
    this._itemHeight = e;
    this._startCharMap = f;
    this._labelAtlasRenderer.initWithString(
      a,
      this._charMapFileName,
      this._itemWidth,
      this._itemHeight,
      this._startCharMap[0]
    );
    this._updateContentSizeWithTextureSize(
      this._labelAtlasRenderer.getContentSize()
    );
    this._labelAtlasRendererAdaptDirty = !0;
  },
  setString: function (a) {
    a !== this._labelAtlasRenderer.getString() &&
      ((this._stringValue = a),
      this._labelAtlasRenderer.setString(a),
      this._updateContentSizeWithTextureSize(
        this._labelAtlasRenderer.getContentSize()
      ),
      (this._labelAtlasRendererAdaptDirty = !0));
  },
  setStringValue: function (a) {
    cc.log("Please use the setString");
    this.setString(a);
  },
  getStringValue: function () {
    cc.log("Please use the getString");
    return this.getString();
  },
  getString: function () {
    return this._labelAtlasRenderer.getString();
  },
  getStringLength: function () {
    return this._labelAtlasRenderer.getStringLength();
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._labelAtlasRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._labelAtlasRendererAdaptDirty &&
      (this._labelAtlasScaleChangedWithSize(),
      (this._labelAtlasRendererAdaptDirty = !1));
  },
  getVirtualRendererSize: function () {
    return this._labelAtlasRenderer.getContentSize();
  },
  getVirtualRenderer: function () {
    return this._labelAtlasRenderer;
  },
  _labelAtlasScaleChangedWithSize: function () {
    var a = this._labelAtlasRenderer;
    if (this._ignoreSize) a.setScale(1);
    else {
      var b = a.getContentSize();
      if (0 >= b.width || 0 >= b.height) {
        a.setScale(1);
        return;
      }
      a.setScaleX(this._contentSize.width / b.width);
      a.setScaleY(this._contentSize.height / b.height);
    }
    a.setPosition(this._contentSize.width / 2, this._contentSize.height / 2);
  },
  getDescription: function () {
    return "LabelAtlas";
  },
  _copySpecialProperties: function (a) {
    a &&
      this.setProperty(
        a._stringValue,
        a._charMapFileName,
        a._itemWidth,
        a._itemHeight,
        a._startCharMap
      );
  },
  _createCloneInstance: function () {
    return new ccui.TextAtlas();
  },
});
_p = ccui.TextAtlas.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
_p = null;
ccui.TextAtlas.create = function (a, b, d, e, f) {
  return new ccui.TextAtlas(a, b, d, e, f);
};
ccui.TextAtlas.RENDERER_ZORDER = -1;
ccui.LabelBMFont = ccui.TextBMFont = ccui.Widget.extend({
  _labelBMFontRenderer: null,
  _fntFileHasInit: !1,
  _fntFileName: "",
  _stringValue: "",
  _className: "TextBMFont",
  _labelBMFontRendererAdaptDirty: !0,
  ctor: function (a, b) {
    ccui.Widget.prototype.ctor.call(this);
    this._loader = new cc.Sprite.LoadManager();
    void 0 !== b && (this.setFntFile(b), this.setString(a));
  },
  _initRenderer: function () {
    this._labelBMFontRenderer = new cc.LabelBMFont();
    this.addProtectedChild(
      this._labelBMFontRenderer,
      ccui.TextBMFont.RENDERER_ZORDER,
      -1
    );
  },
  setFntFile: function (a) {
    if (a) {
      this._fntFileName = a;
      this._fntFileHasInit = !0;
      this._labelBMFontRenderer.initWithString(this._stringValue, a);
      this._updateContentSizeWithTextureSize(
        this._labelBMFontRenderer.getContentSize()
      );
      this._labelBMFontRendererAdaptDirty = !0;
      var b = this;
      a = b._labelBMFontRenderer;
      a._textureLoaded ||
        a.addEventListener("load", function () {
          b.setFntFile(b._fntFileName);
        });
    }
  },
  setText: function (a) {
    cc.log("Please use the setString");
    this.setString(a);
  },
  setString: function (a) {
    this._loader.clear();
    this._labelBMFontRenderer._textureLoaded
      ? a !== this._labelBMFontRenderer.getString() &&
        ((this._stringValue = a),
        this._labelBMFontRenderer.setString(a),
        this._fntFileHasInit &&
          (this._updateContentSizeWithTextureSize(
            this._labelBMFontRenderer.getContentSize()
          ),
          (this._labelBMFontRendererAdaptDirty = !0)))
      : this._loader.add(
          this._labelBMFontRenderer,
          function () {
            this.setString(a);
          },
          this
        );
  },
  getString: function () {
    return this._stringValue;
  },
  getStringLength: function () {
    return this._labelBMFontRenderer.getStringLength();
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._labelBMFontRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._labelBMFontRendererAdaptDirty &&
      (this._labelBMFontScaleChangedWithSize(),
      (this._labelBMFontRendererAdaptDirty = !1));
  },
  getVirtualRendererSize: function () {
    return this._labelBMFontRenderer.getContentSize();
  },
  getVirtualRenderer: function () {
    return this._labelBMFontRenderer;
  },
  _labelBMFontScaleChangedWithSize: function () {
    var a = this._labelBMFontRenderer;
    if (this._ignoreSize) a.setScale(1);
    else {
      var b = a.getContentSize();
      if (0 >= b.width || 0 >= b.height) {
        a.setScale(1);
        return;
      }
      a.setScaleX(this._contentSize.width / b.width);
      a.setScaleY(this._contentSize.height / b.height);
    }
    a.setPosition(this._contentSize.width / 2, this._contentSize.height / 2);
  },
  getDescription: function () {
    return "TextBMFont";
  },
  _createCloneInstance: function () {
    return new ccui.TextBMFont();
  },
  _copySpecialProperties: function (a) {
    this.setFntFile(a._fntFileName);
    this.setString(a._stringValue);
  },
});
_p = ccui.TextBMFont.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
_p = null;
ccui.TextBMFont.create = function (a, b) {
  return new ccui.TextBMFont(a, b);
};
ccui.TextBMFont.RENDERER_ZORDER = -1;
ccui._TextFieldRenderer = cc.TextFieldTTF.extend({
  _maxLengthEnabled: !1,
  _maxLength: 0,
  _passwordEnabled: !1,
  _passwordStyleText: "",
  _attachWithIME: !1,
  _detachWithIME: !1,
  _insertText: !1,
  _deleteBackward: !1,
  _className: "_TextFieldRenderer",
  ctor: function () {
    cc.TextFieldTTF.prototype.ctor.call(this);
    this._maxLengthEnabled = !1;
    this._maxLength = 0;
    this._passwordEnabled = !1;
    this._passwordStyleText = "*";
    this._deleteBackward = this._insertText = this._detachWithIME = this._attachWithIME = !1;
  },
  onEnter: function () {
    cc.TextFieldTTF.prototype.onEnter.call(this);
    cc.TextFieldTTF.prototype.setDelegate.call(this, this);
  },
  onTextFieldAttachWithIME: function (a) {
    this.setAttachWithIME(!0);
    return !1;
  },
  onTextFieldInsertText: function (a, b, d) {
    if (1 === d && "\n" === b) return !1;
    this.setInsertText(!0);
    return (
      this._maxLengthEnabled &&
      cc.TextFieldTTF.prototype.getCharCount.call(this) >= this._maxLength
    );
  },
  onTextFieldDeleteBackward: function (a, b, d) {
    this.setDeleteBackward(!0);
    return !1;
  },
  onTextFieldDetachWithIME: function (a) {
    this.setDetachWithIME(!0);
    return !1;
  },
  insertText: function (a, b) {
    "\n" !== a &&
    this._maxLengthEnabled &&
    this.getString().length >= this._maxLength
      ? this._passwordEnabled && this.setPasswordText(this.getString())
      : (cc.TextFieldTTF.prototype.insertText.call(this, a, b),
        this._passwordEnabled &&
          0 < cc.TextFieldTTF.prototype.getCharCount.call(this) &&
          this.setPasswordText(this.getString()));
  },
  deleteBackward: function () {
    cc.TextFieldTTF.prototype.deleteBackward.call(this);
    0 < cc.TextFieldTTF.prototype.getCharCount.call(this) &&
      this._passwordEnabled &&
      this.setPasswordText(this._inputText);
  },
  openIME: function () {
    cc.TextFieldTTF.prototype.attachWithIME.call(this);
  },
  closeIME: function () {
    cc.TextFieldTTF.prototype.detachWithIME.call(this);
  },
  setMaxLengthEnabled: function (a) {
    this._maxLengthEnabled = a;
  },
  isMaxLengthEnabled: function () {
    return this._maxLengthEnabled;
  },
  setMaxLength: function (a) {
    this._maxLength = a;
  },
  getMaxLength: function () {
    return this._maxLength;
  },
  getCharCount: function () {
    return cc.TextFieldTTF.prototype.getCharCount.call(this);
  },
  setPasswordEnabled: function (a) {
    this._passwordEnabled = a;
  },
  isPasswordEnabled: function () {
    return this._passwordEnabled;
  },
  setPasswordStyleText: function (a) {
    if (!(1 < a.length)) {
      var b = a.charCodeAt(0);
      33 > b || 126 < b || (this._passwordStyleText = a);
    }
  },
  setPasswordText: function (a) {
    var b = "",
      d = a.length;
    a = d;
    this._maxLengthEnabled && d > this._maxLength && (a = this._maxLength);
    for (d = 0; d < a; ++d) b += this._passwordStyleText;
    cc.LabelTTF.prototype.setString.call(this, b);
  },
  setAttachWithIME: function (a) {
    this._attachWithIME = a;
  },
  getAttachWithIME: function () {
    return this._attachWithIME;
  },
  setDetachWithIME: function (a) {
    this._detachWithIME = a;
  },
  getDetachWithIME: function () {
    return this._detachWithIME;
  },
  setInsertText: function (a) {
    this._insertText = a;
  },
  getInsertText: function () {
    return this._insertText;
  },
  setDeleteBackward: function (a) {
    this._deleteBackward = a;
  },
  getDeleteBackward: function () {
    return this._deleteBackward;
  },
  onDraw: function (a) {
    return !1;
  },
});
ccui._TextFieldRenderer.create = function (a, b, d) {
  var e = new ccui._TextFieldRenderer();
  return e && e.initWithString("", b, d) ? (a && e.setPlaceHolder(a), e) : null;
};
ccui.TextField = ccui.Widget.extend({
  _textFieldRenderer: null,
  _touchWidth: 0,
  _touchHeight: 0,
  _useTouchArea: !1,
  _textFieldEventListener: null,
  _textFieldEventSelector: null,
  _passwordStyleText: "",
  _textFieldRendererAdaptDirty: !0,
  _fontName: "",
  _fontSize: 12,
  _ccEventCallback: null,
  ctor: function (a, b, d) {
    ccui.Widget.prototype.ctor.call(this);
    this.setTouchEnabled(!0);
    b && this.setFontName(b);
    d && this.setFontSize(d);
    a && this.setPlaceHolder(a);
  },
  onEnter: function () {
    ccui.Widget.prototype.onEnter.call(this);
    this.scheduleUpdate();
  },
  _initRenderer: function () {
    this._textFieldRenderer = ccui._TextFieldRenderer.create(
      "input words here",
      "Thonburi",
      20
    );
    this.addProtectedChild(
      this._textFieldRenderer,
      ccui.TextField.RENDERER_ZORDER,
      -1
    );
  },
  setTouchSize: function (a) {
    this._touchWidth = a.width;
    this._touchHeight = a.height;
  },
  setTouchAreaEnabled: function (a) {
    this._useTouchArea = a;
  },
  hitTest: function (a) {
    if (this._useTouchArea) {
      a = this.convertToNodeSpace(a);
      var b = cc.rect(
        -this._touchWidth * this._anchorPoint.x,
        -this._touchHeight * this._anchorPoint.y,
        this._touchWidth,
        this._touchHeight
      );
      return (
        a.x >= b.x &&
        a.x <= b.x + b.width &&
        a.y >= b.y &&
        a.y <= b.y + b.height
      );
    }
    return ccui.Widget.prototype.hitTest.call(this, a);
  },
  getTouchSize: function () {
    return cc.size(this._touchWidth, this._touchHeight);
  },
  setText: function (a) {
    cc.log("Please use the setString");
    this.setString(a);
  },
  setString: function (a) {
    null != a &&
      ((a = String(a)),
      this.isMaxLengthEnabled() && (a = a.substr(0, this.getMaxLength())),
      this.isPasswordEnabled()
        ? (this._textFieldRenderer.setPasswordText(a),
          this._textFieldRenderer.setString(""),
          this._textFieldRenderer.insertText(a, a.length))
        : this._textFieldRenderer.setString(a),
      (this._textFieldRendererAdaptDirty = !0),
      this._updateContentSizeWithTextureSize(
        this._textFieldRenderer.getContentSize()
      ));
  },
  setPlaceHolder: function (a) {
    this._textFieldRenderer.setPlaceHolder(a);
    this._textFieldRendererAdaptDirty = !0;
    this._updateContentSizeWithTextureSize(
      this._textFieldRenderer.getContentSize()
    );
  },
  getPlaceHolder: function () {
    return this._textFieldRenderer.getPlaceHolder();
  },
  getPlaceHolderColor: function () {
    return this._textFieldRenderer.getPlaceHolderColor();
  },
  setPlaceHolderColor: function (a) {
    this._textFieldRenderer.setColorSpaceHolder(a);
  },
  setTextColor: function (a) {
    this._textFieldRenderer.setTextColor(a);
  },
  setFontSize: function (a) {
    this._textFieldRenderer.setFontSize(a);
    this._fontSize = a;
    this._textFieldRendererAdaptDirty = !0;
    this._updateContentSizeWithTextureSize(
      this._textFieldRenderer.getContentSize()
    );
  },
  getFontSize: function () {
    return this._fontSize;
  },
  setFontName: function (a) {
    this._textFieldRenderer.setFontName(a);
    this._fontName = a;
    this._textFieldRendererAdaptDirty = !0;
    this._updateContentSizeWithTextureSize(
      this._textFieldRenderer.getContentSize()
    );
  },
  getFontName: function () {
    return this._fontName;
  },
  didNotSelectSelf: function () {
    this._textFieldRenderer.detachWithIME();
  },
  getStringValue: function () {
    cc.log("Please use the getString");
    return this.getString();
  },
  getString: function () {
    return this._textFieldRenderer.getString();
  },
  getStringLength: function () {
    return this._textFieldRenderer.getStringLength();
  },
  onTouchBegan: function (a, b) {
    var d = this,
      e = ccui.Widget.prototype.onTouchBegan.call(d, a, b);
    d._hit
      ? setTimeout(function () {
          d._textFieldRenderer.attachWithIME();
        }, 0)
      : setTimeout(function () {
          d._textFieldRenderer.detachWithIME();
        }, 0);
    return e;
  },
  setMaxLengthEnabled: function (a) {
    this._textFieldRenderer.setMaxLengthEnabled(a);
  },
  isMaxLengthEnabled: function () {
    return this._textFieldRenderer.isMaxLengthEnabled();
  },
  setMaxLength: function (a) {
    this._textFieldRenderer.setMaxLength(a);
    this.setString(this.getString());
  },
  getMaxLength: function () {
    return this._textFieldRenderer.getMaxLength();
  },
  setPasswordEnabled: function (a) {
    this._textFieldRenderer.setPasswordEnabled(a);
  },
  isPasswordEnabled: function () {
    return this._textFieldRenderer.isPasswordEnabled();
  },
  setPasswordStyleText: function (a) {
    this._textFieldRenderer.setPasswordStyleText(a);
    this._passwordStyleText = a;
    this.setString(this.getString());
  },
  getPasswordStyleText: function () {
    return this._passwordStyleText;
  },
  update: function (a) {
    this.getDetachWithIME() &&
      (this._detachWithIMEEvent(), this.setDetachWithIME(!1));
    this.getAttachWithIME() &&
      (this._attachWithIMEEvent(), this.setAttachWithIME(!1));
    this.getInsertText() &&
      ((this._textFieldRendererAdaptDirty = !0),
      this._updateContentSizeWithTextureSize(
        this._textFieldRenderer.getContentSize()
      ),
      this._insertTextEvent(),
      this.setInsertText(!1));
    this.getDeleteBackward() &&
      ((this._textFieldRendererAdaptDirty = !0),
      this._updateContentSizeWithTextureSize(
        this._textFieldRenderer.getContentSize()
      ),
      this._deleteBackwardEvent(),
      this.setDeleteBackward(!1));
  },
  getAttachWithIME: function () {
    return this._textFieldRenderer.getAttachWithIME();
  },
  setAttachWithIME: function (a) {
    this._textFieldRenderer.setAttachWithIME(a);
  },
  getDetachWithIME: function () {
    return this._textFieldRenderer.getDetachWithIME();
  },
  setDetachWithIME: function (a) {
    this._textFieldRenderer.setDetachWithIME(a);
  },
  getInsertText: function () {
    return this._textFieldRenderer.getInsertText();
  },
  setInsertText: function (a) {
    this._textFieldRenderer.setInsertText(a);
  },
  getDeleteBackward: function () {
    return this._textFieldRenderer.getDeleteBackward();
  },
  setDeleteBackward: function (a) {
    this._textFieldRenderer.setDeleteBackward(a);
  },
  _attachWithIMEEvent: function () {
    this._textFieldEventSelector &&
      (this._textFieldEventListener
        ? this._textFieldEventSelector.call(
            this._textFieldEventListener,
            this,
            ccui.TextField.EVENT_ATTACH_WITH_IME
          )
        : this._textFieldEventSelector(
            this,
            ccui.TextField.EVENT_ATTACH_WITH_IME
          ));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.TextField.EVENT_ATTACH_WITH_IME);
  },
  _detachWithIMEEvent: function () {
    this._textFieldEventSelector &&
      (this._textFieldEventListener
        ? this._textFieldEventSelector.call(
            this._textFieldEventListener,
            this,
            ccui.TextField.EVENT_DETACH_WITH_IME
          )
        : this._textFieldEventSelector(
            this,
            ccui.TextField.EVENT_DETACH_WITH_IME
          ));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.TextField.EVENT_DETACH_WITH_IME);
  },
  _insertTextEvent: function () {
    this._textFieldEventSelector &&
      (this._textFieldEventListener
        ? this._textFieldEventSelector.call(
            this._textFieldEventListener,
            this,
            ccui.TextField.EVENT_INSERT_TEXT
          )
        : this._textFieldEventSelector(this, ccui.TextField.EVENT_INSERT_TEXT));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.TextField.EVENT_INSERT_TEXT);
  },
  _deleteBackwardEvent: function () {
    this._textFieldEventSelector &&
      (this._textFieldEventListener
        ? this._textFieldEventSelector.call(
            this._textFieldEventListener,
            this,
            ccui.TextField.EVENT_DELETE_BACKWARD
          )
        : this._textFieldEventSelector(
            this,
            ccui.TextField.EVENT_DELETE_BACKWARD
          ));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.TextField.EVENT_DELETE_BACKWARD);
  },
  addEventListenerTextField: function (a, b) {
    this.addEventListener(a, b);
  },
  addEventListener: function (a, b) {
    this._textFieldEventSelector = a;
    this._textFieldEventListener = b;
  },
  _onSizeChanged: function () {
    ccui.Widget.prototype._onSizeChanged.call(this);
    this._textFieldRendererAdaptDirty = !0;
  },
  _adaptRenderers: function () {
    this._textFieldRendererAdaptDirty &&
      (this._textfieldRendererScaleChangedWithSize(),
      (this._textFieldRendererAdaptDirty = !1));
  },
  _textfieldRendererScaleChangedWithSize: function () {
    this._ignoreSize ||
      this._textFieldRenderer.setDimensions(this._contentSize);
    this._textFieldRenderer.setPosition(
      this._contentSize.width / 2,
      this._contentSize.height / 2
    );
  },
  getAutoRenderSize: function () {
    var a = this._textFieldRenderer.getContentSize();
    this._ignoreSize ||
      (this._textFieldRenderer.setDimensions(0, 0),
      (a = this._textFieldRenderer.getContentSize()),
      this._textFieldRenderer.setDimensions(
        this._contentSize.width,
        this._contentSize.height
      ));
    return a;
  },
  getVirtualRendererSize: function () {
    return this._textFieldRenderer.getContentSize();
  },
  getVirtualRenderer: function () {
    return this._textFieldRenderer;
  },
  getDescription: function () {
    return "TextField";
  },
  attachWithIME: function () {
    this._textFieldRenderer.attachWithIME();
  },
  _createCloneInstance: function () {
    return new ccui.TextField();
  },
  _copySpecialProperties: function (a) {
    this.setString(a._textFieldRenderer.getString());
    this.setPlaceHolder(a.getString());
    this.setFontSize(a._textFieldRenderer.getFontSize());
    this.setFontName(a._textFieldRenderer.getFontName());
    this.setMaxLengthEnabled(a.isMaxLengthEnabled());
    this.setMaxLength(a.getMaxLength());
    this.setPasswordEnabled(a.isPasswordEnabled());
    this.setPasswordStyleText(a._passwordStyleText);
    this.setAttachWithIME(a.getAttachWithIME());
    this.setDetachWithIME(a.getDetachWithIME());
    this.setInsertText(a.getInsertText());
    this.setDeleteBackward(a.getDeleteBackward());
    this._ccEventCallback = a._ccEventCallback;
    this._textFieldEventListener = a._textFieldEventListener;
    this._textFieldEventSelector = a._textFieldEventSelector;
  },
  setTextAreaSize: function (a) {
    this.setContentSize(a);
  },
  setTextHorizontalAlignment: function (a) {
    this._textFieldRenderer.setHorizontalAlignment(a);
  },
  setTextVerticalAlignment: function (a) {
    this._textFieldRenderer.setVerticalAlignment(a);
  },
  _setFont: function (a) {
    this._textFieldRenderer._setFont(a);
    this._textFieldRendererAdaptDirty = !0;
  },
  _getFont: function () {
    return this._textFieldRenderer._getFont();
  },
  _changePosition: function () {
    this._adaptRenderers();
  },
});
ccui.TextField.create = function (a, b, d) {
  return new ccui.TextField(a, b, d);
};
_p = ccui.TextField.prototype;
cc.defineGetterSetter(_p, "string", _p.getString, _p.setString);
cc.defineGetterSetter(_p, "placeHolder", _p.getPlaceHolder, _p.setPlaceHolder);
cc.defineGetterSetter(_p, "font", _p._getFont, _p._setFont);
cc.defineGetterSetter(_p, "fontSize", _p.getFontSize, _p.setFontSize);
cc.defineGetterSetter(_p, "fontName", _p.getFontName, _p.setFontName);
cc.defineGetterSetter(
  _p,
  "maxLengthEnabled",
  _p.isMaxLengthEnabled,
  _p.setMaxLengthEnabled
);
cc.defineGetterSetter(_p, "maxLength", _p.getMaxLength, _p.setMaxLength);
cc.defineGetterSetter(
  _p,
  "passwordEnabled",
  _p.isPasswordEnabled,
  _p.setPasswordEnabled
);
_p = null;
ccui.TextField.EVENT_ATTACH_WITH_IME = 0;
ccui.TextField.EVENT_DETACH_WITH_IME = 1;
ccui.TextField.EVENT_INSERT_TEXT = 2;
ccui.TextField.EVENT_DELETE_BACKWARD = 3;
ccui.TextField.RENDERER_ZORDER = -1;
ccui.VideoPlayer = ccui.Widget.extend({
  _played: !1,
  _playing: !1,
  _stopped: !0,
  ctor: function (a) {
    ccui.Widget.prototype.ctor.call(this);
    this._EventList = {};
    a && this.setURL(a);
  },
  _createRenderCmd: function () {
    return new ccui.VideoPlayer.RenderCmd(this);
  },
  visit: function () {
    var a = this._renderCmd,
      b = cc.container,
      d = cc.eventManager;
    if (this._visible)
      b.appendChild(a._video),
        null === this._listener &&
          (this._listener = cc.eventManager.addCustomListener(
            cc.game.EVENT_RESIZE,
            function () {
              a.resize();
            }
          ));
    else {
      var e = !1;
      (e =
        "contains" in b
          ? b.contains(a._video)
          : b.compareDocumentPosition(a._video) % 16) &&
        b.removeChild(a._video);
      d.removeListener(a._listener);
      a._listener = null;
    }
    a.updateStatus();
    a.resize();
  },
  setURL: function (a) {
    this._renderCmd.updateURL(a);
  },
  getURL: function () {
    return this._renderCmd._url;
  },
  play: function () {
    var a = this,
      b = this._renderCmd._video;
    if (b) {
      this._played = !0;
      b.pause();
      if (!1 !== this._stopped || !1 !== this._playing || !0 !== this._played)
        b.currentTime = 0;
      ccui.VideoPlayer._polyfill.autoplayAfterOperation
        ? setTimeout(function () {
            b.play();
            a._playing = !0;
            a._stopped = !1;
          }, 20)
        : (b.play(), (this._playing = !0), (this._stopped = !1));
    }
  },
  pause: function () {
    var a = this._renderCmd._video;
    a &&
      !0 === this._playing &&
      !1 === this._stopped &&
      (a.pause(), (this._playing = !1));
  },
  resume: function () {
    !1 === this._stopped &&
      !1 === this._playing &&
      !0 === this._played &&
      this.play();
  },
  stop: function () {
    var a = this,
      b = this._renderCmd._video;
    b &&
      (b.pause(),
      (b.currentTime = 0),
      (this._playing = !1),
      (this._stopped = !0));
    setTimeout(function () {
      a._dispatchEvent(ccui.VideoPlayer.EventType.STOPPED);
    }, 0);
  },
  seekTo: function (a) {
    var b = this._renderCmd._video;
    b &&
      ((b.currentTime = a),
      ccui.VideoPlayer._polyfill.autoplayAfterOperation &&
        this.isPlaying() &&
        setTimeout(function () {
          b.play();
        }, 20));
  },
  isPlaying: function () {
    ccui.VideoPlayer._polyfill.autoplayAfterOperation &&
      this._playing &&
      setTimeout(function () {
        video.play();
      }, 20);
    return this._playing;
  },
  setKeepAspectRatioEnabled: function (a) {
    cc.log("On the web is always keep the aspect ratio");
  },
  isKeepAspectRatioEnabled: function () {
    return !1;
  },
  setFullScreenEnabled: function (a) {
    var b = this._renderCmd._video;
    b && (a ? cc.screen.requestFullScreen(b) : cc.screen.exitFullScreen(b));
  },
  isFullScreenEnabled: function () {
    cc.log("Can't know status");
  },
  setEventListener: function (a, b) {
    this._EventList[a] = b;
  },
  removeEventListener: function (a) {
    this._EventList[a] = null;
  },
  _dispatchEvent: function (a) {
    (a = this._EventList[a]) && a.call(this, this, this._renderCmd._video.src);
  },
  onPlayEvent: function () {
    var a = this._EventList[ccui.VideoPlayer.EventType.PLAYING];
    if (a)
      for (var b = 0; b < a.length; b++)
        a[b].call(this, this, this._renderCmd._video.src);
  },
  setContentSize: function (a, b) {
    ccui.Widget.prototype.setContentSize.call(this, a, b);
    void 0 === b && ((b = a.height), (a = a.width));
    this._renderCmd.changeSize(a, b);
  },
  cleanup: function () {
    this._renderCmd.removeDom();
    this.stopAllActions();
    this.unscheduleAllCallbacks();
  },
  onEnter: function () {
    ccui.Widget.prototype.onEnter.call(this);
    var a = ccui.VideoPlayer.elements;
    -1 === a.indexOf(this) && a.push(this);
  },
  onExit: function () {
    ccui.Widget.prototype.onExit.call(this);
    var a = ccui.VideoPlayer.elements,
      b = a.indexOf(this);
    -1 !== b && a.splice(b, 1);
  },
});
ccui.VideoPlayer.elements = [];
ccui.VideoPlayer.pauseElements = [];
cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function () {
  for (var a = ccui.VideoPlayer.elements, b, d = 0; d < a.length; d++)
    (b = a[d]),
      a[d]._playing && (b.pause(), ccui.VideoPlayer.pauseElements.push(b));
});
cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function () {
  for (var a = ccui.VideoPlayer.pauseElements, b = a.pop(); b; )
    b.play(), (b = a.pop());
});
ccui.VideoPlayer.EventType = {
  PLAYING: "play",
  PAUSED: "pause",
  STOPPED: "stop",
  COMPLETED: "complete",
};
(function (a) {
  a._polyfill = { devicePixelRatio: !1, event: "canplay", canPlayType: [] };
  var b = document.createElement("video");
  b.canPlayType("video/ogg") &&
    (a._polyfill.canPlayType.push(".ogg"),
    a._polyfill.canPlayType.push(".ogv"));
  b.canPlayType("video/mp4") && a._polyfill.canPlayType.push(".mp4");
  b.canPlayType("video/webm") && a._polyfill.canPlayType.push(".webm");
  cc.sys.OS_IOS === cc.sys.os &&
    ((a._polyfill.devicePixelRatio = !0), (a._polyfill.event = "progress"));
  cc.sys.browserType === cc.sys.BROWSER_TYPE_FIREFOX &&
    (a._polyfill.autoplayAfterOperation = !0);
  a = document.createElement("style");
  a.innerHTML =
    ".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}";
  document.head.appendChild(a);
})(ccui.VideoPlayer);
(function (a) {
  var b = null,
    b =
      cc._renderType === cc.game.RENDER_TYPE_WEBGL
        ? cc.Node.WebGLRenderCmd
        : cc.Node.CanvasRenderCmd;
  ccui.VideoPlayer.RenderCmd = function (a) {
    this._rootCtor(a);
    this._listener = null;
    this._url = "";
    this.initStyle();
  };
  b = ccui.VideoPlayer.RenderCmd.prototype = Object.create(b.prototype);
  b.constructor = ccui.VideoPlayer.RenderCmd;
  b.transform = function (a, b) {
    this.originTransform(a, b);
    this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY);
  };
  b.updateStatus = function () {
    a.devicePixelRatio = cc.view.isRetinaEnabled();
    var b = cc.Node._dirtyFlags,
      e = this._dirtyFlag;
    e & b.transformDirty &&
      (this.transform(this.getParentRenderCmd(), !0),
      this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY),
      (this._dirtyFlag ^=
        this._dirtyFlag & cc.Node._dirtyFlags.transformDirty));
    e & b.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & b.orderDirty);
  };
  b.resize = function (a) {
    a = a || cc.view;
    var b = this._node,
      f = cc.eventManager;
    b._parent && b._visible
      ? this.updateMatrix(this._worldTransform, a._scaleX, a._scaleY)
      : (f.removeListener(this._listener), (this._listener = null));
  };
  b.updateMatrix = function (b, e, f) {
    var g = this._node;
    if (a.devicePixelRatio) {
      var h = cc.view.getDevicePixelRatio();
      e /= h;
      f /= h;
    }
    if (!1 !== this._loaded) {
      var k = cc.game.container.style,
        h = parseInt(k.paddingLeft),
        k = parseInt(k.paddingBottom),
        m = g._contentSize.width,
        n = g._contentSize.height;
      b =
        "matrix(" +
        b.a * e +
        "," +
        b.b +
        "," +
        b.c +
        "," +
        b.d * f +
        "," +
        (h + b.tx * e - m / 2 + ((m * g._scaleX) / 2) * e) +
        "," +
        -(k + b.ty * f - n / 2 + ((n * g._scaleY) / 2) * f) +
        ")";
      this._video.style.transform = b;
      this._video.style["-webkit-transform"] = b;
    }
  };
  b.updateURL = function (b) {
    var e,
      f,
      g,
      h = this._node;
    if (this._url != b) {
      this._url = b;
      cc.loader.resPath &&
        !/^http/.test(b) &&
        (b = cc.path.join(cc.loader.resPath, b));
      e = !1;
      g = cc.container;
      (e =
        "contains" in g
          ? g.contains(this._video)
          : g.compareDocumentPosition(this._video) % 16) &&
        g.removeChild(this._video);
      f = this._video = document.createElement("video");
      this.bindEvent();
      var k = this,
        m = function () {
          !0 != k._loaded &&
            ((k._loaded = !0),
            k.changeSize(),
            k.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),
            f.removeEventListener(a.event, m),
            (f.currentTime = 0),
            (f.style.visibility = "visible"),
            f.play(),
            h._played || (f.pause(), (f.currentTime = 0)));
        };
      f.addEventListener(a.event, m);
      f.preload = "metadata";
      f.style.visibility = "hidden";
      this._loaded = !1;
      h._played = !1;
      h._playing = !1;
      h._stopped = !0;
      this.initStyle();
      this._node.visit();
      e = document.createElement("source");
      e.src = b;
      f.appendChild(e);
      g = cc.path.extname(b);
      for (var n = 0; n < a.canPlayType.length; n++)
        g !== a.canPlayType[n] &&
          ((e = document.createElement("source")),
          (e.src = b.replace(g, a.canPlayType[n])),
          f.appendChild(e));
    }
  };
  b.bindEvent = function () {
    var a = this,
      b = this._node,
      f = this._video;
    f.addEventListener("ended", function () {
      b._renderCmd.updateMatrix(
        a._worldTransform,
        cc.view._scaleX,
        cc.view._scaleY
      );
      b._playing = !1;
      b._dispatchEvent(ccui.VideoPlayer.EventType.COMPLETED);
    });
    f.addEventListener("play", function () {
      b._dispatchEvent(ccui.VideoPlayer.EventType.PLAYING);
    });
    f.addEventListener("pause", function () {
      b._dispatchEvent(ccui.VideoPlayer.EventType.PAUSED);
    });
  };
  b.initStyle = function () {
    if (this._video) {
      var a = this._video;
      a.style.position = "absolute";
      a.style.bottom = "0px";
      a.style.left = "0px";
      a.className = "cocosVideo";
    }
  };
  b.changeSize = function (a, b) {
    var f = this._node._contentSize;
    a = a || f.width;
    b = b || f.height;
    if ((f = this._video)) 0 !== a && (f.width = a), 0 !== b && (f.height = b);
  };
  b.removeDom = function () {
    var a = this._video;
    if (a) {
      var b = !1;
      (b =
        "contains" in cc.container
          ? cc.container.contains(a)
          : cc.container.compareDocumentPosition(a) % 16) &&
        cc.container.removeChild(a);
    }
  };
})(ccui.VideoPlayer._polyfill);
ccui.RichElement = ccui.Class.extend({
  _type: 0,
  _tag: 0,
  _color: null,
  _opacity: 0,
  ctor: function (a, b, d) {
    this._type = 0;
    this._tag = a || 0;
    this._color = cc.color(255, 255, 255, 255);
    b && ((this._color.r = b.r), (this._color.g = b.g), (this._color.b = b.b));
    this._opacity = d || 0;
    this._color.a = void 0 === d ? b.a : d;
  },
});
ccui.RichElementText = ccui.RichElement.extend({
  _text: "",
  _fontName: "",
  _fontSize: 0,
  _fontDefinition: null,
  ctor: function (a, b, d, e, f, g) {
    var h = b;
    b &&
      b instanceof cc.FontDefinition &&
      ((h = b.fillStyle),
      (f = b.fontName),
      (g = b.fontSize),
      (this._fontDefinition = b));
    ccui.RichElement.prototype.ctor.call(this, a, h, d);
    this._type = ccui.RichElement.TEXT;
    this._text = e;
    this._fontName = f;
    this._fontSize = g;
  },
});
ccui.RichElementText.create = function (a, b, d, e, f, g) {
  return new ccui.RichElementText(a, b, d, e, f, g);
};
ccui.RichElementImage = ccui.RichElement.extend({
  _filePath: "",
  _textureRect: null,
  _textureType: 0,
  ctor: function (a, b, d, e) {
    ccui.RichElement.prototype.ctor.call(this, a, b, d);
    this._type = ccui.RichElement.IMAGE;
    this._filePath = e || "";
    this._textureRect = cc.rect(0, 0, 0, 0);
    this._textureType = 0;
  },
});
ccui.RichElementImage.create = function (a, b, d, e) {
  return new ccui.RichElementImage(a, b, d, e);
};
ccui.RichElementCustomNode = ccui.RichElement.extend({
  _customNode: null,
  ctor: function (a, b, d, e) {
    ccui.RichElement.prototype.ctor.call(this, a, b, d);
    this._type = ccui.RichElement.CUSTOM;
    this._customNode = e || null;
  },
});
ccui.RichElementCustomNode.create = function (a, b, d, e) {
  return new ccui.RichElementCustomNode(a, b, d, e);
};
ccui.RichText = ccui.Widget.extend({
  _formatTextDirty: !1,
  _richElements: null,
  _elementRenders: null,
  _leftSpaceWidth: 0,
  _verticalSpace: 0,
  _elementRenderersContainer: null,
  _lineBreakOnSpace: !1,
  _textHorizontalAlignment: null,
  _textVerticalAlignment: null,
  ctor: function () {
    ccui.Widget.prototype.ctor.call(this);
    this._formatTextDirty = !1;
    this._richElements = [];
    this._elementRenders = [];
    this._verticalSpace = this._leftSpaceWidth = 0;
    this._textHorizontalAlignment = cc.TEXT_ALIGNMENT_LEFT;
    this._textVerticalAlignment = cc.VERTICAL_TEXT_ALIGNMENT_TOP;
  },
  _initRenderer: function () {
    this._elementRenderersContainer = new cc.Node();
    this._elementRenderersContainer.setAnchorPoint(0.5, 0.5);
    this.addProtectedChild(this._elementRenderersContainer, 0, -1);
  },
  insertElement: function (a, b) {
    this._richElements.splice(b, 0, a);
    this._formatTextDirty = !0;
  },
  pushBackElement: function (a) {
    this._richElements.push(a);
    this._formatTextDirty = !0;
  },
  removeElement: function (a) {
    cc.isNumber(a)
      ? this._richElements.splice(a, 1)
      : cc.arrayRemoveObject(this._richElements, a);
    this._formatTextDirty = !0;
  },
  formatText: function () {
    if (this._formatTextDirty) {
      this._elementRenderersContainer.removeAllChildren();
      this._elementRenders.length = 0;
      var a,
        b,
        d = this._richElements;
      if (this._ignoreSize)
        for (this._addNewLine(), a = 0; a < d.length; a++) {
          b = d[a];
          var e = null;
          switch (b._type) {
            case ccui.RichElement.TEXT:
              e = b._fontDefinition
                ? new cc.LabelTTF(b._text, b._fontDefinition)
                : new cc.LabelTTF(b._text, b._fontName, b._fontSize);
              break;
            case ccui.RichElement.IMAGE:
              e = new cc.Sprite(b._filePath);
              break;
            case ccui.RichElement.CUSTOM:
              e = b._customNode;
          }
          e.setColor(b._color);
          e.setOpacity(b._color.a);
          this._pushToContainer(e);
        }
      else
        for (this._addNewLine(), a = 0; a < d.length; a++)
          switch (((b = d[a]), b._type)) {
            case ccui.RichElement.TEXT:
              b._fontDefinition
                ? this._handleTextRenderer(
                    b._text,
                    b._fontDefinition,
                    b._fontDefinition.fontSize,
                    b._fontDefinition.fillStyle
                  )
                : this._handleTextRenderer(
                    b._text,
                    b._fontName,
                    b._fontSize,
                    b._color
                  );
              break;
            case ccui.RichElement.IMAGE:
              this._handleImageRenderer(b._filePath, b._color, b._color.a);
              break;
            case ccui.RichElement.CUSTOM:
              this._handleCustomRenderer(b._customNode);
          }
      this.formatRenderers();
      this._formatTextDirty = !1;
    }
  },
  _handleTextRenderer: function (a, b, d, e) {
    if ("" !== a)
      if ("\n" === a) this._addNewLine();
      else {
        var f =
            b instanceof cc.FontDefinition
              ? new cc.LabelTTF(a, b)
              : new cc.LabelTTF(a, b, d),
          g = f.getContentSize().width;
        this._leftSpaceWidth -= g;
        if (0 > this._leftSpaceWidth) {
          var f = a.length * (1 - -this._leftSpaceWidth / g),
            g = a.substr(0, f),
            h = a.substr(f, a.length - 1),
            k = 0 < f;
          this._lineBreakOnSpace &&
            ((h = g.lastIndexOf(" ")),
            (f = -1 === h ? f : h + 1),
            (h = a.substr(f, a.length - 1)),
            (k = 0 < f && " " !== h));
          k &&
            ((a = null),
            b instanceof cc.FontDefinition
              ? ((a = new cc.LabelTTF(g.substr(0, f), b)),
                a.setOpacity(b.fillStyle.a))
              : ((a = new cc.LabelTTF(g.substr(0, f), b, d)),
                a.setColor(e),
                a.setOpacity(e.a)),
            this._pushToContainer(a));
          this._addNewLine();
          this._handleTextRenderer(h, b, d, e);
        } else
          b instanceof cc.FontDefinition
            ? f.setOpacity(b.fillStyle.a)
            : (f.setColor(e), f.setOpacity(e.a)),
            this._pushToContainer(f);
      }
  },
  _handleImageRenderer: function (a, b, d) {
    a = new cc.Sprite(a);
    this._handleCustomRenderer(a);
  },
  _handleCustomRenderer: function (a) {
    var b = a.getContentSize();
    this._leftSpaceWidth -= b.width;
    0 > this._leftSpaceWidth
      ? (this._addNewLine(),
        this._pushToContainer(a),
        (this._leftSpaceWidth -= b.width))
      : this._pushToContainer(a);
  },
  _addNewLine: function () {
    this._leftSpaceWidth = this._customSize.width;
    this._elementRenders.push([]);
  },
  formatRenderers: function () {
    var a = 0,
      b = this._elementRenderersContainer,
      d = this._elementRenders,
      e,
      f,
      g,
      h,
      k,
      m;
    if (this._ignoreSize) {
      e = 0;
      g = d[0];
      for (f = h = 0; f < g.length; f++)
        (k = g[f]),
          k.setAnchorPoint(cc.p(0, 0)),
          k.setPosition(h, 0),
          b.addChild(k, 1, f),
          (m = k.getLineHeight ? k.getLineHeight() : a),
          (k = k.getContentSize()),
          (e += k.width),
          (a = Math.max(Math.min(a, m), k.height)),
          (h += k.width);
      if (this._textHorizontalAlignment !== cc.TEXT_ALIGNMENT_LEFT)
        for (
          m = 0,
            this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_RIGHT
              ? (m = this._contentSize.width - h)
              : this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_CENTER &&
                (m = (this._contentSize.width - h) / 2),
            f = 0;
          f < g.length;
          f++
        )
          g[f].x += m;
      b.setContentSize(e, a);
    } else {
      var n = [];
      for (e = 0; e < d.length; e++) {
        g = d[e];
        for (f = h = 0; f < g.length; f++)
          (k = g[f]),
            (m = k.getLineHeight
              ? k.getLineHeight()
              : k.getContentSize().height),
            (h = Math.max(Math.min(k.getContentSize().height, m), h));
        n[e] = h;
        a += n[e];
      }
      var p = this._customSize.height;
      for (e = 0; e < d.length; e++) {
        g = d[e];
        h = 0;
        p -= n[e] + this._verticalSpace;
        for (f = 0; f < g.length; f++)
          (k = g[f]),
            k.setAnchorPoint(cc.p(0, 0)),
            k.setPosition(cc.p(h, p)),
            b.addChild(k, 1),
            (h += k.getContentSize().width);
        if (
          this._textHorizontalAlignment !== cc.TEXT_ALIGNMENT_LEFT ||
          this._textVerticalAlignment !== cc.VERTICAL_TEXT_ALIGNMENT_TOP
        )
          for (
            m = 0,
              this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_RIGHT
                ? (m = this._contentSize.width - h)
                : this._textHorizontalAlignment === cc.TEXT_ALIGNMENT_CENTER &&
                  (m = (this._contentSize.width - h) / 2),
              h = 0,
              this._textVerticalAlignment === cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM
                ? (h = this._customSize.height - a)
                : this._textVerticalAlignment ===
                    cc.VERTICAL_TEXT_ALIGNMENT_CENTER &&
                  (h = (this._customSize.height - a) / 2),
              f = 0;
            f < g.length;
            f++
          )
            (k = g[f]), (k.x += m), (k.y -= h);
      }
      b.setContentSize(this._contentSize);
    }
    a = d.length;
    for (e = 0; e < a; e++) d[e].length = 0;
    this._elementRenders.length = 0;
    this.setContentSize(
      this._ignoreSize ? this.getVirtualRendererSize() : this._customSize
    );
    this._updateContentSizeWithTextureSize(this._contentSize);
    b.setPosition(
      0.5 * this._contentSize.width,
      0.5 * this._contentSize.height
    );
  },
  _pushToContainer: function (a) {
    0 >= this._elementRenders.length ||
      this._elementRenders[this._elementRenders.length - 1].push(a);
  },
  _adaptRenderers: function () {
    this.formatText();
  },
  setVerticalSpace: function (a) {
    this._verticalSpace = a;
  },
  setAnchorPoint: function (a) {
    ccui.Widget.prototype.setAnchorPoint.call(this, a);
    this._elementRenderersContainer.setAnchorPoint(a);
  },
  _setAnchorX: function (a) {
    ccui.Widget.prototype._setAnchorX.call(this, a);
    this._elementRenderersContainer._setAnchorX(a);
  },
  _setAnchorY: function (a) {
    ccui.Widget.prototype._setAnchorY.call(this, a);
    this._elementRenderersContainer._setAnchorY(a);
  },
  getVirtualRendererSize: function () {
    return this._elementRenderersContainer.getContentSize();
  },
  ignoreContentAdaptWithSize: function (a) {
    this._ignoreSize !== a &&
      ((this._formatTextDirty = !0),
      ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this, a));
  },
  getContentSize: function () {
    this.formatText();
    return cc.Node.prototype.getContentSize.call(this);
  },
  _getWidth: function () {
    this.formatText();
    return cc.Node.prototype._getWidth.call(this);
  },
  _getHeight: function () {
    this.formatText();
    return cc.Node.prototype._getHeight.call(this);
  },
  setContentSize: function (a, b) {
    ccui.Widget.prototype.setContentSize.call(
      this,
      void 0 === b ? a.width : a,
      void 0 === b ? a.height : b
    );
    this._formatTextDirty = !0;
  },
  getDescription: function () {
    return "RichText";
  },
  setCascadeOpacityEnabled: function (a) {
    ccui.Widget.prototype.setCascadeOpacityEnabled.call(this, a);
    this._elementRenderersContainer.setCascadeOpacityEnabled(a);
  },
  setLineBreakOnSpace: function (a) {
    this._lineBreakOnSpace = a;
    this._formatTextDirty = !0;
    this.formatText();
  },
  setTextHorizontalAlignment: function (a) {
    a !== this._textHorizontalAlignment &&
      ((this._textHorizontalAlignment = a), this.formatText());
  },
  setTextVerticalAlignment: function (a) {
    a !== this._textVerticalAlignment &&
      ((this._textVerticalAlignment = a), this.formatText());
  },
});
ccui.RichText.create = function () {
  return new ccui.RichText();
};
ccui.RichElement.TEXT = 0;
ccui.RichElement.IMAGE = 1;
ccui.RichElement.CUSTOM = 2;
ccui.WebView = ccui.Widget.extend({
  ctor: function (a) {
    ccui.Widget.prototype.ctor.call(this);
    this._EventList = {};
    a && this.loadURL(a);
  },
  visit: function () {
    var a = this._renderCmd,
      b = a._div,
      d = cc.container,
      e = cc.eventManager;
    if (this._visible)
      d.appendChild(b),
        null === this._listener &&
          (this._listener = e.addCustomListener(
            cc.game.EVENT_RESIZE,
            function () {
              a.resize();
            }
          ));
    else {
      var f = !1;
      (f =
        "contains" in d ? d.contains(b) : d.compareDocumentPosition(b) % 16) &&
        d.removeChild(b);
      b = e._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners();
      e._removeListenerInVector(b, a._listener);
      a._listener = null;
    }
    a.updateStatus();
    a.resize(cc.view);
  },
  setJavascriptInterfaceScheme: function (a) {},
  loadData: function (a, b, d, e) {},
  loadHTMLString: function (a, b) {},
  loadURL: function (a) {
    this._renderCmd.updateURL(a);
    this._dispatchEvent(ccui.WebView.EventType.LOADING);
  },
  stopLoading: function () {
    cc.log("Web does not support loading");
  },
  reload: function () {
    var a = this._renderCmd._iframe;
    a && (a = a.contentWindow) && a.location && a.location.reload();
  },
  canGoBack: function () {
    cc.log("Web does not support query history");
    return !0;
  },
  canGoForward: function () {
    cc.log("Web does not support query history");
    return !0;
  },
  goBack: function () {
    try {
      if (ccui.WebView._polyfill.closeHistory)
        return cc.log("The current browser does not support the GoBack");
      var a = this._renderCmd._iframe;
      if (a) {
        var b = a.contentWindow;
        if (b && b.location)
          try {
            b.history.back.call(b);
          } catch (d) {
            b.history.back();
          }
      }
    } catch (e) {
      cc.log(e);
    }
  },
  goForward: function () {
    try {
      if (ccui.WebView._polyfill.closeHistory)
        return cc.log("The current browser does not support the GoForward");
      var a = this._renderCmd._iframe;
      if (a) {
        var b = a.contentWindow;
        if (b && b.location)
          try {
            b.history.forward.call(b);
          } catch (d) {
            b.history.forward();
          }
      }
    } catch (e) {
      cc.log(e);
    }
  },
  evaluateJS: function (a) {
    var b = this._renderCmd._iframe;
    if (b) {
      b = b.contentWindow;
      try {
        b.eval(a), this._dispatchEvent(ccui.WebView.EventType.JS_EVALUATED);
      } catch (d) {
        console.error(d);
      }
    }
  },
  setScalesPageToFit: function () {
    cc.log("Web does not support zoom");
  },
  setEventListener: function (a, b) {
    this._EventList[a] = b;
  },
  removeEventListener: function (a) {
    this._EventList[a] = null;
  },
  _dispatchEvent: function (a) {
    (a = this._EventList[a]) && a.call(this, this, this._renderCmd._iframe.src);
  },
  _createRenderCmd: function () {
    return new ccui.WebView.RenderCmd(this);
  },
  setContentSize: function (a, b) {
    ccui.Widget.prototype.setContentSize.call(this, a, b);
    void 0 === b && ((b = a.height), (a = a.width));
    this._renderCmd.changeSize(a, b);
  },
  cleanup: function () {
    this._renderCmd.removeDom();
    this.stopAllActions();
    this.unscheduleAllCallbacks();
  },
});
ccui.WebView.EventType = {
  LOADING: "loading",
  LOADED: "load",
  ERROR: "error",
  JS_EVALUATED: "js",
};
(function () {
  var a = (ccui.WebView._polyfill = { devicePixelRatio: !1, enableDiv: !1 });
  cc.sys.os === cc.sys.OS_IOS && (a.enableDiv = !0);
  cc.sys.isMobile
    ? cc.sys.browserType === cc.sys.BROWSER_TYPE_FIREFOX && (a.enableBG = !0)
    : cc.sys.browserType === cc.sys.BROWSER_TYPE_IE && (a.closeHistory = !0);
})();
(function (a) {
  var b = null,
    b =
      cc._renderType === cc.game.RENDER_TYPE_WEBGL
        ? cc.Node.WebGLRenderCmd
        : cc.Node.CanvasRenderCmd;
  ccui.WebView.RenderCmd = function (b) {
    this._rootCtor(b);
    this._iframe = this._div = null;
    a.enableDiv
      ? ((this._div = document.createElement("div")),
        (this._div.style["-webkit-overflow"] = "auto"),
        (this._div.style["-webkit-overflow-scrolling"] = "touch"),
        (this._iframe = document.createElement("iframe")),
        (this._iframe.style.width = "100%"),
        (this._iframe.style.height = "100%"),
        this._div.appendChild(this._iframe))
      : (this._div = this._iframe = document.createElement("iframe"));
    a.enableBG && (this._div.style.background = "#FFF");
    this._iframe.addEventListener("load", function () {
      b._dispatchEvent(ccui.WebView.EventType.LOADED);
    });
    this._iframe.addEventListener("error", function () {
      b._dispatchEvent(ccui.WebView.EventType.ERROR);
    });
    this._div.style.background = "#FFF";
    this._div.style.height = "200px";
    this._div.style.width = "300px";
    this._div.style.overflow = "scroll";
    this._div.style.border = "none";
    this._listener = null;
    this.initStyle();
  };
  b = ccui.WebView.RenderCmd.prototype = Object.create(b.prototype);
  b.constructor = ccui.WebView.RenderCmd;
  b.transform = function (a, b) {
    this.originTransform(a, b);
    this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY);
  };
  b.updateStatus = function () {
    a.devicePixelRatio = cc.view.isRetinaEnabled();
    var b = cc.Node._dirtyFlags,
      e = this._dirtyFlag;
    e & b.transformDirty &&
      (this.transform(this.getParentRenderCmd(), !0),
      this.updateMatrix(this._worldTransform, cc.view._scaleX, cc.view._scaleY),
      (this._dirtyFlag ^=
        this._dirtyFlag & cc.Node._dirtyFlags.transformDirty));
    e & b.orderDirty && (this._dirtyFlag ^= this._dirtyFlag & b.orderDirty);
  };
  b.resize = function (a) {
    a = a || cc.view;
    var b = this._node,
      f = cc.eventManager;
    b._parent && b._visible
      ? this.updateMatrix(this._worldTransform, a._scaleX, a._scaleY)
      : ((a = f._listenersMap[
          cc.game.EVENT_RESIZE
        ].getFixedPriorityListeners()),
        f._removeListenerInVector(a, this._listener),
        (this._listener = null));
  };
  b.updateMatrix = function (b, e, f) {
    var g = this._node;
    if (a.devicePixelRatio) {
      var h = cc.view.getDevicePixelRatio();
      e /= h;
      f /= h;
    }
    if (!1 !== this._loaded) {
      var k = cc.game.container.style,
        h = parseInt(k.paddingLeft),
        k = parseInt(k.paddingBottom),
        m = g._contentSize.width,
        n = g._contentSize.height;
      b =
        "matrix(" +
        b.a * e +
        "," +
        b.b +
        "," +
        b.c +
        "," +
        b.d * f +
        "," +
        (h + b.tx * e - m / 2 + ((m * g._scaleX) / 2) * e) +
        "," +
        -(k + b.ty * f - n / 2 + ((n * g._scaleY) / 2) * f) +
        ")";
      this._div.style.transform = b;
      this._div.style["-webkit-transform"] = b;
    }
  };
  b.initStyle = function () {
    if (this._div) {
      var a = this._div;
      a.style.position = "absolute";
      a.style.bottom = "0px";
      a.style.left = "0px";
    }
  };
  b.updateURL = function (a) {
    var b = this._iframe;
    b.src = a;
    var f = this,
      g = function () {
        f._loaded = !0;
        b.removeEventListener("load", g);
      };
    b.addEventListener("load", g);
  };
  b.changeSize = function (a, b) {
    var f = this._div;
    f && ((f.style.width = a + "px"), (f.style.height = b + "px"));
  };
  b.removeDom = function () {
    var a = this._div;
    if (a) {
      var b = !1;
      (b =
        "contains" in cc.container
          ? cc.container.contains(a)
          : cc.container.compareDocumentPosition(a) % 16) &&
        cc.container.removeChild(a);
    }
  };
})(ccui.WebView._polyfill);
ccui.ScrollViewBar = ccui.ProtectedNode.extend({
  _parentScroll: null,
  _direction: null,
  _upperHalfCircle: null,
  _lowerHalfCircle: null,
  _body: null,
  _opacity: 255,
  _marginFromBoundary: 0,
  _marginForLength: 0,
  _touching: !1,
  _autoHideEnabled: !0,
  autoHideTime: 0,
  _autoHideRemainingTime: 0,
  _className: "ScrollViewBar",
  ctor: function (a, b) {
    cc.ProtectedNode.prototype.ctor.call(this);
    this._direction = b;
    this._parentScroll = a;
    this._marginForLength = this._marginFromBoundary =
      ccui.ScrollViewBar.DEFAULT_MARGIN;
    this.opacity = 255 * ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY;
    this.autoHideTime = ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME;
    this._autoHideEnabled = !0;
    ccui.ScrollViewBar.prototype.init.call(this);
    this.setCascadeColorEnabled(!0);
    this.setCascadeOpacityEnabled(!0);
  },
  init: function () {
    this._upperHalfCircle = ccui.helper._createSpriteFromBase64(
      ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,
      ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY
    );
    this._upperHalfCircle.setAnchorPoint(cc.p(0.5, 0));
    this._lowerHalfCircle = ccui.helper._createSpriteFromBase64(
      ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,
      ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY
    );
    this._lowerHalfCircle.setAnchorPoint(cc.p(0.5, 0));
    this._lowerHalfCircle.setScaleY(-1);
    this.addProtectedChild(this._upperHalfCircle);
    this.addProtectedChild(this._lowerHalfCircle);
    this._body = ccui.helper._createSpriteFromBase64(
      ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT,
      ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY
    );
    this._body.setAnchorPoint(cc.p(0.5, 0));
    this.addProtectedChild(this._body);
    this.setColor(ccui.ScrollViewBar.DEFAULT_COLOR);
    this.onScrolled(cc.p(0, 0));
    cc.ProtectedNode.prototype.setOpacity.call(this, 0);
    this._autoHideRemainingTime = 0;
    this._direction === ccui.ScrollView.DIR_HORIZONTAL && this.setRotation(90);
  },
  setPositionFromCorner: function (a) {
    this._direction === ccui.ScrollView.DIR_VERTICAL
      ? ((this._marginForLength = a.y), (this._marginFromBoundary = a.x))
      : ((this._marginForLength = a.x), (this._marginFromBoundary = a.y));
  },
  onEnter: function () {
    cc.ProtectedNode.prototype.onEnter.call(this);
    this.scheduleUpdate();
  },
  getPositionFromCorner: function () {
    return this._direction === ccui.ScrollView.DIR_VERTICAL
      ? cc.p(this._marginFromBoundary, this._marginForLength)
      : cc.p(this._marginForLength, this._marginFromBoundary);
  },
  setWidth: function (a) {
    a /= this._body.width;
    this._body.setScaleX(a);
    this._upperHalfCircle.setScale(a);
    this._lowerHalfCircle.setScale(-a);
  },
  getWidth: function () {
    return this._body.getBoundingBox().width;
  },
  setAutoHideEnabled: function (a) {
    this._autoHideEnabled = a;
    !this._autoHideEnabled &&
    !this._touching &&
    0 >= this._autoHideRemainingTime
      ? cc.ProtectedNode.prototype.setOpacity.call(this, this.opacity)
      : cc.ProtectedNode.prototype.setOpacity.call(this, 0);
  },
  isAutoHideEnabled: function () {
    return this._autoHideEnabled;
  },
  setOpacity: function (a) {
    this._opacity = a;
  },
  getOpacity: function () {
    return this._opacity;
  },
  _updateLength: function (a) {
    var b = a / this._body.getTextureRect().height;
    this._body.setScaleY(b);
    this._upperHalfCircle.setPositionY(this._body.getPositionY() + a);
  },
  _processAutoHide: function (a) {
    !this._autoHideEnabled ||
      0 >= this._autoHideRemainingTime ||
      this._touching ||
      ((this._autoHideRemainingTime -= a),
      this._autoHideRemainingTime <= this.autoHideTime &&
        ((this._autoHideRemainingTime = Math.max(
          0,
          this._autoHideRemainingTime
        )),
        cc.ProtectedNode.prototype.setOpacity.call(
          this,
          (this._autoHideRemainingTime / this.autoHideTime) * this._opacity
        )));
  },
  update: function (a) {
    this._processAutoHide(a);
  },
  onTouchBegan: function () {
    this._autoHideEnabled && (this._touching = !0);
  },
  onTouchEnded: function () {
    this._autoHideEnabled &&
      ((this._touching = !1),
      0 >= this._autoHideRemainingTime ||
        (this._autoHideRemainingTime = this.autoHideTime));
  },
  onScrolled: function (a) {
    this._autoHideEnabled &&
      ((this._autoHideRemainingTime = this.autoHideTime),
      cc.ProtectedNode.prototype.setOpacity.call(this, this.opacity));
    var b = this._parentScroll.getInnerContainer(),
      d = 0,
      e = 0,
      f = 0,
      g = 0;
    this._direction === ccui.ScrollView.DIR_VERTICAL
      ? ((d = b.height),
        (e = this._parentScroll.height),
        (f = a.y),
        (g = -b.getPositionY()))
      : this._direction === ccui.ScrollView.DIR_HORIZONTAL &&
        ((d = b.width),
        (e = this._parentScroll.width),
        (f = a.x),
        (g = -b.getPositionX()));
    a = this._calculateLength(d, e, f);
    d = this._calculatePosition(d, e, g, f, a);
    this._updateLength(a);
    this.setPosition(d);
  },
  _calculateLength: function (a, b, d) {
    0 !== d && (a += 20 * (0 < d ? d : -d));
    d = b / a;
    return Math.abs(b - 2 * this._marginForLength) * d;
  },
  _calculatePosition: function (a, b, d, e, f) {
    a -= b;
    0 !== e && (a += Math.abs(e));
    e = 0;
    0 !== a && ((e = Math.max(d / a, 0)), (e = Math.min(e, 1)));
    b = (b - f - 2 * this._marginForLength) * e + this._marginForLength;
    return this._direction === ccui.ScrollView.DIR_VERTICAL
      ? cc.p(this._parentScroll.width - this._marginFromBoundary, b)
      : cc.p(b, this._marginFromBoundary);
  },
});
_p = ccui.ScrollViewBar.prototype;
cc.defineGetterSetter(_p, "opacity", _p.getOpacity, _p.setOpacity);
cc.defineGetterSetter(
  _p,
  "autoHideEnabled",
  _p.isAutoHideEnabled,
  _p.setAutoHideEnabled
);
ccui.ScrollViewBar.DEFAULT_COLOR = cc.color(52, 65, 87);
ccui.ScrollViewBar.DEFAULT_MARGIN = 20;
ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME = 0.2;
ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY = 0.4;
ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY = "/__half_circle_image";
ccui.ScrollViewBar.HALF_CIRCLE_IMAGE =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAMAAADAMI+zAAAAJ1BMVEX///////////////////////////////////////////////////9Ruv0SAAAADHRSTlMABgcbbW7Hz9Dz+PmlcJP5AAAAMElEQVR4AUXHwQ2AQAhFwYcLH1H6r1djzDK3ASxUpTBeK/uTCyz7dx54b44m4p5cD1MwAooEJyk3AAAAAElFTkSuQmCC";
ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY = "/__body_image_height";
ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAABCAMAAADdNb8LAAAAA1BMVEX///+nxBvIAAAACklEQVR4AWNABgAADQABYc2cpAAAAABJRU5ErkJggg\x3d\x3d";
ccui.ScrollView = ccui.Layout.extend({
  _innerContainer: null,
  _direction: null,
  _topBoundary: 0,
  _bottomBoundary: 0,
  _leftBoundary: 0,
  _rightBoundary: 0,
  _touchMoveDisplacements: null,
  _touchMoveTimeDeltas: null,
  _touchMovePreviousTimestamp: 0,
  _touchTotalTimeThreshold: 0.5,
  _autoScrolling: !1,
  _autoScrollTargetDelta: null,
  _autoScrollAttenuate: !0,
  _autoScrollStartPosition: null,
  _autoScrollTotalTime: 0,
  _autoScrollAccumulatedTime: 0,
  _autoScrollCurrentlyOutOfBoundary: !1,
  _autoScrollBraking: !1,
  _autoScrollBrakingStartPosition: null,
  _bePressed: !1,
  _childFocusCancelOffset: 0,
  bounceEnabled: !1,
  _outOfBoundaryAmount: null,
  _outOfBoundaryAmountDirty: !0,
  inertiaScrollEnabled: !1,
  _scrollBarEnabled: !0,
  _verticalScrollBar: null,
  _horizontalScrollBar: null,
  _scrollViewEventListener: null,
  _scrollViewEventSelector: null,
  _className: "ScrollView",
  ctor: function () {
    ccui.Layout.prototype.ctor.call(this);
    this.setClippingEnabled(!0);
    this._innerContainer.setTouchEnabled(!1);
    this._direction = ccui.ScrollView.DIR_NONE;
    this._childFocusCancelOffset = 5;
    this.inertiaScrollEnabled = !0;
    this._outOfBoundaryAmount = cc.p(0, 0);
    this._autoScrollTargetDelta = cc.p(0, 0);
    this._autoScrollStartPosition = cc.p(0, 0);
    this._autoScrollBrakingStartPosition = cc.p(0, 0);
    this._touchMoveDisplacements = [];
    this._touchMoveTimeDeltas = [];
    this._touchMovePreviousTimestamp = 0;
    this._scrollBarEnabled = !0;
    this._initScrollBar();
    this.setTouchEnabled(!0);
  },
  onEnter: function () {
    ccui.Layout.prototype.onEnter.call(this);
    this.scheduleUpdate();
  },
  onExit: function () {
    cc.renderer._removeCache(this.__instanceId);
    ccui.Layout.prototype.onExit.call(this);
  },
  visit: function (a) {
    var b = this._renderCmd,
      d = a ? a._renderCmd : null;
    if (this._visible) {
      this._adaptRenderers();
      this._doLayout();
      a = cc.renderer;
      b.visit(d);
      a.pushRenderCommand(b);
      b instanceof ccui.ScrollView.WebGLRenderCmd &&
        a._turnToCacheMode(this.__instanceId);
      var e =
          this._clippingEnabled &&
          this._clippingType === ccui.Layout.CLIPPING_STENCIL,
        f =
          this._clippingEnabled &&
          this._clippingType === ccui.Layout.CLIPPING_SCISSOR;
      e ? b.stencilClippingVisit(d) : f && b.scissorClippingVisit(d);
      var g,
        h = this._children,
        k = h.length,
        m,
        d = this._protectedChildren,
        n = d.length;
      this._reorderChildDirty && this.sortAllChildren();
      this._reorderProtectedChildDirty && this.sortAllProtectedChildren();
      for (g = 0; g < k; g++) (m = h[g]) && m._visible && m.visit(this);
      for (g = 0; g < n; g++)
        (h = d[g]) && h._visible && (b._changeProtectedChild(h), h.visit(this));
      e ? b.postStencilVisit() : f && b.postScissorVisit();
      b instanceof ccui.ScrollView.WebGLRenderCmd && a._turnToNormalMode();
      this.updateChildren();
      b._dirtyFlag = 0;
    } else b._propagateFlagsDown(d);
  },
  findNextFocusedWidget: function (a, b) {
    return this.getLayoutType() === ccui.Layout.LINEAR_VERTICAL ||
      this.getLayoutType() === ccui.Layout.LINEAR_HORIZONTAL
      ? this._innerContainer.findNextFocusedWidget(a, b)
      : ccui.Widget.prototype.findNextFocusedWidget.call(this, a, b);
  },
  _initRenderer: function () {
    ccui.Layout.prototype._initRenderer.call(this);
    this._innerContainer = new ccui.Layout();
    this._innerContainer.setColor(cc.color(255, 255, 255));
    this._innerContainer.setOpacity(255);
    this._innerContainer.setCascadeColorEnabled(!0);
    this._innerContainer.setCascadeOpacityEnabled(!0);
    this.addProtectedChild(this._innerContainer, 1, 1);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_WEBGL
      ? new ccui.ScrollView.WebGLRenderCmd(this)
      : new ccui.ScrollView.CanvasRenderCmd(this);
  },
  _onSizeChanged: function () {
    ccui.Layout.prototype._onSizeChanged.call(this);
    var a = this._contentSize;
    this._topBoundary = a.height;
    this._rightBoundary = a.width;
    var b = this._innerContainer.getContentSize();
    this._innerContainer.setContentSize(
      cc.size(Math.max(b.width, a.width), Math.max(b.height, a.height))
    );
    this._innerContainer.setPosition(
      0,
      a.height - this._innerContainer.getContentSize().height
    );
    if (this._verticalScrollBar)
      this._verticalScrollBar.onScrolled(this._getHowMuchOutOfBoundary());
    if (this._horizontalScrollBar)
      this._horizontalScrollBar.onScrolled(this._getHowMuchOutOfBoundary());
  },
  setInnerContainerSize: function (a) {
    var b = this._innerContainer,
      d = this._contentSize,
      e = d.width,
      f = d.height;
    a.width < d.width
      ? cc.log("Inner width \x3c\x3d ScrollView width, it will be force sized!")
      : (e = a.width);
    a.height < d.height
      ? cc.log(
          "Inner height \x3c\x3d ScrollView height, it will be force sized!"
        )
      : (f = a.height);
    b.setContentSize(cc.size(e, f));
    a = this._innerContainer.getPosition();
    b = this._innerContainer.getAnchorPoint();
    0 != this._innerContainer.getLeftBoundary() && (a.x = b.x * e);
    this._innerContainer.getTopBoundary() != this._contentSize.height &&
      (a.y = this._contentSize.height - (1 - b.y) * f);
    this.setInnerContainerPosition(a);
    this._updateScrollBar(cc.p(0, 0));
  },
  _setInnerWidth: function (a) {
    var b = this._contentSize.width,
      d = b,
      e = this._innerContainer,
      f = e.width;
    a < b
      ? cc.log("Inner width \x3c\x3d scrollview width, it will be force sized!")
      : (d = a);
    e.width = d;
    switch (this._direction) {
      case ccui.ScrollView.DIR_HORIZONTAL:
      case ccui.ScrollView.DIR_BOTH:
        e.getRightBoundary() <= b && this._scrollChildren(f - e.width, 0);
    }
    a = e.anchorX;
    0 < e.getLeftBoundary() && (e.x = a * d);
    e.getRightBoundary() < b && (e.x = b - (1 - a) * d);
  },
  _setInnerHeight: function (a) {
    var b = this._contentSize.height,
      d = b,
      e = this._innerContainer,
      f = e.height;
    a < b
      ? cc.log(
          "Inner height \x3c\x3d scrollview height, it will be force sized!"
        )
      : (d = a);
    e.height = d;
    switch (this._direction) {
      case ccui.ScrollView.DIR_VERTICAL:
      case ccui.ScrollView.DIR_BOTH:
        this._scrollChildren(0, f - d);
    }
    a = e.anchorY;
    0 < e.getLeftBoundary() && (e.y = a * d);
    e.getRightBoundary() < b && (e.y = b - (1 - a) * d);
  },
  setInnerContainerPosition: function (a) {
    if (
      a.x !== this._innerContainer.getPositionX() ||
      a.y !== this._innerContainer.getPositionY()
    ) {
      this._innerContainer.setPosition(a);
      this._outOfBoundaryAmountDirty = !0;
      if (this.bounceEnabled)
        for (
          a = ccui.ScrollView.MOVEDIR_TOP;
          a < ccui.ScrollView.MOVEDIR_RIGHT;
          ++a
        )
          this._isOutOfBoundary(a) && this._processScrollEvent(a, !0);
      this._dispatchEvent(ccui.ScrollView.EVENT_CONTAINER_MOVED);
    }
  },
  getInnerContainerPosition: function () {
    return this._innerContainer.getPosition();
  },
  getInnerContainerSize: function () {
    return this._innerContainer.getContentSize();
  },
  _getInnerWidth: function () {
    return this._innerContainer.width;
  },
  _getInnerHeight: function () {
    return this._innerContainer.height;
  },
  _isInContainer: function (a) {
    if (!this._clippingEnabled) return !0;
    var b = a._position,
      d = a._contentSize;
    a = a._anchorPoint;
    var e = this._customSize,
      f = this._innerContainer._position,
      g = 0,
      h = 0;
    return (g = b.y - a.y * d.height) >= e.height - f.y ||
      g + d.height <= -f.y ||
      (h = b.x - a.x * d.width) >= e.width - f.x ||
      h + d.width <= -f.x
      ? !1
      : !0;
  },
  updateChildren: function () {
    var a,
      b,
      d,
      e = this._innerContainer._children;
    b = 0;
    for (d = e.length; b < d; b++)
      (a = e[b]),
        !0 === a._inViewRect && !1 === this._isInContainer(a)
          ? (a._inViewRect = !1)
          : !1 === a._inViewRect &&
            !0 === this._isInContainer(a) &&
            (a._inViewRect = !0);
  },
  addChild: function (a, b, d) {
    if (!a) return !1;
    !1 === this._isInContainer(a) && (a._inViewRect = !1);
    b = b || a.getLocalZOrder();
    d = d || a.getTag();
    return this._innerContainer.addChild(a, b, d);
  },
  removeAllChildren: function () {
    this.removeAllChildrenWithCleanup(!0);
  },
  removeAllChildrenWithCleanup: function (a) {
    this._innerContainer.removeAllChildrenWithCleanup(a);
  },
  removeChild: function (a, b) {
    return this._innerContainer.removeChild(a, b);
  },
  getChildren: function () {
    return this._innerContainer.getChildren();
  },
  getChildrenCount: function () {
    return this._innerContainer.getChildrenCount();
  },
  getChildByTag: function (a) {
    return this._innerContainer.getChildByTag(a);
  },
  getChildByName: function (a) {
    return this._innerContainer.getChildByName(a);
  },
  _flattenVectorByDirection: function (a) {
    var b = cc.p(0, 0);
    b.x = this._direction === ccui.ScrollView.DIR_VERTICAL ? 0 : a.x;
    b.y = this._direction === ccui.ScrollView.DIR_HORIZONTAL ? 0 : a.y;
    return b;
  },
  _getHowMuchOutOfBoundary: function (a) {
    void 0 === a && (a = cc.p(0, 0));
    if (0 === a.x && 0 === a.y && !this._outOfBoundaryAmountDirty)
      return this._outOfBoundaryAmount;
    var b = cc.p(0, 0);
    this._innerContainer.getLeftBoundary() + a.x > this._leftBoundary
      ? (b.x =
          this._leftBoundary - (this._innerContainer.getLeftBoundary() + a.x))
      : this._innerContainer.getRightBoundary() + a.x < this._rightBoundary &&
        (b.x =
          this._rightBoundary -
          (this._innerContainer.getRightBoundary() + a.x));
    this._innerContainer.getTopBoundary() + a.y < this._topBoundary
      ? (b.y =
          this._topBoundary - (this._innerContainer.getTopBoundary() + a.y))
      : this._innerContainer.getBottomBoundary() + a.y > this._bottomBoundary &&
        (b.y =
          this._bottomBoundary -
          (this._innerContainer.getBottomBoundary() + a.y));
    0 === a.x &&
      0 === a.y &&
      ((this._outOfBoundaryAmount = b), (this._outOfBoundaryAmountDirty = !1));
    return b;
  },
  _isOutOfBoundary: function (a) {
    var b = this._getHowMuchOutOfBoundary();
    if (void 0 !== a)
      switch (a) {
        case ccui.ScrollView.MOVEDIR_TOP:
          return 0 < b.y;
        case ccui.ScrollView.MOVEDIR_BOTTOM:
          return 0 > b.y;
        case ccui.ScrollView.MOVEDIR_LEFT:
          return 0 > b.x;
        case ccui.ScrollView.MOVEDIR_RIGHT:
          return 0 < b.x;
      }
    else return !this._fltEqualZero(b);
    return !1;
  },
  _moveInnerContainer: function (a, b) {
    var d = this._flattenVectorByDirection(a);
    this.setInnerContainerPosition(
      cc.pAdd(this.getInnerContainerPosition(), d)
    );
    d = this._getHowMuchOutOfBoundary();
    this._updateScrollBar(d);
    this.bounceEnabled && b && this._startBounceBackIfNeeded();
  },
  _updateScrollBar: function (a) {
    if (this._verticalScrollBar) this._verticalScrollBar.onScrolled(a);
    if (this._horizontalScrollBar) this._horizontalScrollBar.onScrolled(a);
  },
  _calculateTouchMoveVelocity: function () {
    for (var a = 0, b = 0; b < this._touchMoveTimeDeltas.length; ++b)
      a += this._touchMoveTimeDeltas[b];
    if (0 == a || a >= this._touchTotalTimeThreshold) return cc.p(0, 0);
    for (
      var d = cc.p(0, 0), b = 0;
      b < this._touchMoveDisplacements.length;
      ++b
    )
      (d.x += this._touchMoveDisplacements[b].x),
        (d.y += this._touchMoveDisplacements[b].y);
    return cc.pMult(d, 1 / a);
  },
  setTouchTotalTimeThreshold: function (a) {
    this._touchTotalTimeThreshold = a;
  },
  getTouchTotalTimeThreshold: function () {
    return this._touchTotalTimeThreshold;
  },
  _startInertiaScroll: function (a) {
    var b = cc.pMult(a, 0.7);
    this._startAttenuatingAutoScroll(b, a);
  },
  _startBounceBackIfNeeded: function () {
    if (!this.bounceEnabled) return !1;
    var a = this._getHowMuchOutOfBoundary();
    if (this._fltEqualZero(a)) return !1;
    this._startAutoScroll(a, 1, !0);
    return !0;
  },
  _startAutoScrollToDestination: function (a, b, d) {
    this._startAutoScroll(cc.pSub(a, this._innerContainer.getPosition()), b, d);
  },
  _calculateAutoScrollTimeByInitialSpeed: function (a) {
    return Math.sqrt(Math.sqrt(a / 5));
  },
  _startAttenuatingAutoScroll: function (a, b) {
    var d = this._calculateAutoScrollTimeByInitialSpeed(cc.pLength(b));
    this._startAutoScroll(a, d, !0);
  },
  _startAutoScroll: function (a, b, d) {
    a = this._flattenVectorByDirection(a);
    this._autoScrolling = !0;
    this._autoScrollTargetDelta = a;
    this._autoScrollAttenuate = d;
    this._autoScrollStartPosition = this._innerContainer.getPosition();
    this._autoScrollTotalTime = b;
    this._autoScrollAccumulatedTime = 0;
    this._autoScrollBraking = !1;
    this._autoScrollBrakingStartPosition = cc.p(0, 0);
    b = this._getHowMuchOutOfBoundary();
    !this._fltEqualZero(b) &&
      ((this._autoScrollCurrentlyOutOfBoundary = !0),
      (d = this._getHowMuchOutOfBoundary(a)),
      0 < b.x * d.x || 0 < b.y * d.y) &&
      (this._autoScrollBraking = !0);
  },
  stopAutoScroll: function () {
    this._autoScrolling = !1;
    this._autoScrollAttenuate = !0;
    this._autoScrollAccumulatedTime = this._autoScrollTotalTime = 0;
  },
  _isNecessaryAutoScrollBrake: function () {
    if (this._autoScrollBraking) return !0;
    if (this._isOutOfBoundary()) {
      if (!this._autoScrollCurrentlyOutOfBoundary)
        return (
          (this._autoScrollBraking = this._autoScrollCurrentlyOutOfBoundary = !0),
          (this._autoScrollBrakingStartPosition = this.getInnerContainerPosition()),
          !0
        );
    } else this._autoScrollCurrentlyOutOfBoundary = !1;
    return !1;
  },
  _getAutoScrollStopEpsilon: function () {
    return 1e-4;
  },
  _fltEqualZero: function (a) {
    return 1e-4 >= Math.abs(a.x) && 1e-4 >= Math.abs(a.y);
  },
  _processAutoScrolling: function (a) {
    var b = this._isNecessaryAutoScrollBrake() ? 0.05 : 1;
    this._autoScrollAccumulatedTime += (1 / b) * a;
    var d = Math.min(
      1,
      this._autoScrollAccumulatedTime / this._autoScrollTotalTime
    );
    this._autoScrollAttenuate && ((d -= 1), (d = d * d * d * d * d + 1));
    a = cc.pAdd(
      this._autoScrollStartPosition,
      cc.pMult(this._autoScrollTargetDelta, d)
    );
    d = Math.abs(d - 1) <= this._getAutoScrollStopEpsilon();
    this.bounceEnabled
      ? (a = cc.pAdd(
          this._autoScrollBrakingStartPosition,
          cc.pMult(cc.pSub(a, this._autoScrollBrakingStartPosition), b)
        ))
      : ((b = cc.pSub(a, this.getInnerContainerPosition())),
        (b = this._getHowMuchOutOfBoundary(b)),
        this._fltEqualZero(b) || ((a.x += b.x), (a.y += b.y), (d = !0)));
    d &&
      ((this._autoScrolling = !1),
      this._dispatchEvent(ccui.ScrollView.EVENT_AUTOSCROLL_ENDED));
    this._moveInnerContainer(cc.pSub(a, this.getInnerContainerPosition()), d);
  },
  _jumpToDestination: function (a, b) {
    void 0 === a.x && (a = cc.p(a, b));
    this._autoScrolling = !1;
    this._moveInnerContainer(cc.pSub(a, this.getInnerContainerPosition()), !0);
  },
  _scrollChildren: function (a) {
    if (this.bounceEnabled) {
      var b = this._getHowMuchOutOfBoundary();
      a.x *= 0 == b.x ? 1 : 0.5;
      a.y *= 0 == b.y ? 1 : 0.5;
    }
    this.bounceEnabled ||
      ((b = this._getHowMuchOutOfBoundary(a)), (a.x += b.x), (a.y += b.y));
    var d = (b = !1),
      e = !1,
      f = !1;
    0 < a.y
      ? this._innerContainer.getBottomBoundary() + a.y >=
          this._bottomBoundary && (f = !0)
      : 0 > a.y &&
        this._innerContainer.getTopBoundary() + a.y <= this._topBoundary &&
        (e = !0);
    0 > a.x
      ? this._innerContainer.getRightBoundary() + a.x <= this._rightBoundary &&
        (d = !0)
      : 0 < a.x &&
        this._innerContainer.getLeftBoundary() + a.x >= this._leftBoundary &&
        (b = !0);
    this._moveInnerContainer(a, !1);
    (0 == a.x && 0 == a.y) || this._processScrollingEvent();
    f && this._processScrollEvent(ccui.ScrollView.MOVEDIR_BOTTOM, !1);
    e && this._processScrollEvent(ccui.ScrollView.MOVEDIR_TOP, !1);
    b && this._processScrollEvent(ccui.ScrollView.MOVEDIR_LEFT, !1);
    d && this._processScrollEvent(ccui.ScrollView.MOVEDIR_RIGHT, !1);
  },
  scrollToBottom: function (a, b) {
    this._startAutoScrollToDestination(
      cc.p(this._innerContainer.getPositionX(), 0),
      a,
      b
    );
  },
  scrollToTop: function (a, b) {
    this._startAutoScrollToDestination(
      cc.p(
        this._innerContainer.getPositionX(),
        this._contentSize.height - this._innerContainer.getContentSize().height
      ),
      a,
      b
    );
  },
  scrollToLeft: function (a, b) {
    this._startAutoScrollToDestination(
      cc.p(0, this._innerContainer.getPositionY()),
      a,
      b
    );
  },
  scrollToRight: function (a, b) {
    this._startAutoScrollToDestination(
      cc.p(
        this._contentSize.width - this._innerContainer.getContentSize().width,
        this._innerContainer.getPositionY()
      ),
      a,
      b
    );
  },
  scrollToTopLeft: function (a, b) {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll direction is not both!")
      : this._startAutoScrollToDestination(
          cc.p(
            0,
            this._contentSize.height -
              this._innerContainer.getContentSize().height
          ),
          a,
          b
        );
  },
  scrollToTopRight: function (a, b) {
    if (this._direction !== ccui.ScrollView.DIR_BOTH)
      cc.log("Scroll direction is not both!");
    else {
      var d = this._innerContainer.getContentSize();
      this._startAutoScrollToDestination(
        cc.p(
          this._contentSize.width - d.width,
          this._contentSize.height - d.height
        ),
        a,
        b
      );
    }
  },
  scrollToBottomLeft: function (a, b) {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll direction is not both!")
      : this._startAutoScrollToDestination(cc.p(0, 0), a, b);
  },
  scrollToBottomRight: function (a, b) {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll direction is not both!")
      : this._startAutoScrollToDestination(
          cc.p(
            this._contentSize.width -
              this._innerContainer.getContentSize().width,
            0
          ),
          a,
          b
        );
  },
  scrollToPercentVertical: function (a, b, d) {
    var e =
        this._contentSize.height - this._innerContainer.getContentSize().height,
      f = -e;
    this._startAutoScrollToDestination(
      cc.p(this._innerContainer.getPositionX(), e + (a * f) / 100),
      b,
      d
    );
  },
  scrollToPercentHorizontal: function (a, b, d) {
    var e =
      this._innerContainer.getContentSize().width - this._contentSize.width;
    this._startAutoScrollToDestination(
      cc.p(-((a * e) / 100), this._innerContainer.getPositionY()),
      b,
      d
    );
  },
  scrollToPercentBothDirection: function (a, b, d) {
    if (this._direction === ccui.ScrollView.DIR_BOTH) {
      var e =
          this._contentSize.height -
          this._innerContainer.getContentSize().height,
        f = -e,
        g =
          this._innerContainer.getContentSize().width - this._contentSize.width;
      this._startAutoScrollToDestination(
        cc.p(-((a.x * g) / 100), e + (a.y * f) / 100),
        b,
        d
      );
    }
  },
  jumpToBottom: function () {
    this._jumpToDestination(this._innerContainer.getPositionX(), 0);
  },
  jumpToTop: function () {
    this._jumpToDestination(
      this._innerContainer.getPositionX(),
      this._contentSize.height - this._innerContainer.getContentSize().height
    );
  },
  jumpToLeft: function () {
    this._jumpToDestination(0, this._innerContainer.getPositionY());
  },
  jumpToRight: function () {
    this._jumpToDestination(
      this._contentSize.width - this._innerContainer.getContentSize().width,
      this._innerContainer.getPositionY()
    );
  },
  jumpToTopLeft: function () {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll _direction is not both!")
      : this._jumpToDestination(
          0,
          this._contentSize.height -
            this._innerContainer.getContentSize().height
        );
  },
  jumpToTopRight: function () {
    if (this._direction !== ccui.ScrollView.DIR_BOTH)
      cc.log("Scroll _direction is not both!");
    else {
      var a = this._innerContainer.getContentSize();
      this._jumpToDestination(
        this._contentSize.width - a.width,
        this._contentSize.height - a.height
      );
    }
  },
  jumpToBottomLeft: function () {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll _direction is not both!")
      : this._jumpToDestination(0, 0);
  },
  jumpToBottomRight: function () {
    this._direction !== ccui.ScrollView.DIR_BOTH
      ? cc.log("Scroll _direction is not both!")
      : this._jumpToDestination(
          this._contentSize.width - this._innerContainer.getContentSize().width,
          0
        );
  },
  jumpToPercentVertical: function (a) {
    var b =
        this._contentSize.height - this._innerContainer.getContentSize().height,
      d = -b;
    this._jumpToDestination(
      this._innerContainer.getPositionX(),
      b + (a * d) / 100
    );
  },
  jumpToPercentHorizontal: function (a) {
    var b =
      this._innerContainer.getContentSize().width - this._contentSize.width;
    this._jumpToDestination(
      -((a * b) / 100),
      this._innerContainer.getPositionY()
    );
  },
  jumpToPercentBothDirection: function (a) {
    if (this._direction === ccui.ScrollView.DIR_BOTH) {
      var b = this._innerContainer.getContentSize(),
        d = this._contentSize.height - b.height;
      this._jumpToDestination(
        -((a.x * (b.width - this._contentSize.width)) / 100),
        d + (a.y * -d) / 100
      );
    }
  },
  _gatherTouchMove: function (a) {
    for (; 5 <= this._touchMoveDisplacements.length; )
      this._touchMoveDisplacements.splice(0, 1),
        this._touchMoveTimeDeltas.splice(0, 1);
    this._touchMoveDisplacements.push(a);
    a = new Date().getTime();
    this._touchMoveTimeDeltas.push(
      (a - this._touchMovePreviousTimestamp) / 1e3
    );
    this._touchMovePreviousTimestamp = a;
  },
  _handlePressLogic: function (a) {
    this._bePressed = !0;
    this._autoScrolling = !1;
    this._touchMovePreviousTimestamp = new Date().getTime();
    this._touchMoveDisplacements.length = 0;
    this._touchMoveTimeDeltas.length = 0;
    if (this._verticalScrollBar) this._verticalScrollBar.onTouchBegan();
    if (this._horizontalScrollBar) this._horizontalScrollBar.onTouchBegan();
  },
  _handleMoveLogic: function (a) {
    var b = this.convertToNodeSpace(a.getLocation());
    a = this.convertToNodeSpace(a.getPreviousLocation());
    b = cc.pSub(b, a);
    this._scrollChildren(b);
    this._gatherTouchMove(b);
  },
  _handleReleaseLogic: function (a) {
    var b = this.convertToNodeSpace(a.getLocation());
    a = this.convertToNodeSpace(a.getPreviousLocation());
    b = cc.pSub(b, a);
    this._gatherTouchMove(b);
    this._bePressed = !1;
    !this._startBounceBackIfNeeded() &&
      this.inertiaScrollEnabled &&
      ((b = this._calculateTouchMoveVelocity()),
      (0 === b.x && 0 === b.y) || this._startInertiaScroll(b));
    if (this._verticalScrollBar) this._verticalScrollBar.onTouchEnded();
    if (this._horizontalScrollBar) this._horizontalScrollBar.onTouchEnded();
  },
  onTouchBegan: function (a, b) {
    var d = ccui.Layout.prototype.onTouchBegan.call(this, a, b);
    this._isInterceptTouch || (this._hit && this._handlePressLogic(a));
    return d;
  },
  onTouchMoved: function (a, b) {
    ccui.Layout.prototype.onTouchMoved.call(this, a, b);
    this._isInterceptTouch || this._handleMoveLogic(a);
  },
  onTouchEnded: function (a, b) {
    ccui.Layout.prototype.onTouchEnded.call(this, a, b);
    this._isInterceptTouch || this._handleReleaseLogic(a);
    this._isInterceptTouch = !1;
  },
  onTouchCancelled: function (a, b) {
    ccui.Layout.prototype.onTouchCancelled.call(this, a, b);
    this._isInterceptTouch || this._handleReleaseLogic(a);
    this._isInterceptTouch = !1;
  },
  update: function (a) {
    this._autoScrolling && this._processAutoScrolling(a);
  },
  interceptTouchEvent: function (a, b, d) {
    if (!this._touchEnabled)
      ccui.Layout.prototype.interceptTouchEvent.call(this, a, b, d);
    else if (this._direction !== ccui.ScrollView.DIR_NONE) {
      var e = d.getLocation();
      switch (a) {
        case ccui.Widget.TOUCH_BEGAN:
          this._isInterceptTouch = !0;
          this._touchBeganPosition.x = e.x;
          this._touchBeganPosition.y = e.y;
          this._handlePressLogic(d);
          break;
        case ccui.Widget.TOUCH_MOVED:
          a = cc.pLength(cc.pSub(b.getTouchBeganPosition(), e));
          this._touchMovePosition.x = e.x;
          this._touchMovePosition.y = e.y;
          a > this._childFocusCancelOffset &&
            (b.setHighlighted(!1), this._handleMoveLogic(d));
          break;
        case ccui.Widget.TOUCH_CANCELED:
        case ccui.Widget.TOUCH_ENDED:
          (this._touchEndPosition.x = e.x),
            (this._touchEndPosition.y = e.y),
            this._handleReleaseLogic(d),
            b.isSwallowTouches() && (this._isInterceptTouch = !1);
      }
    }
  },
  _processScrollEvent: function (a, b) {
    var d = 0;
    switch (a) {
      case ccui.ScrollView.MOVEDIR_TOP:
        d = b
          ? ccui.ScrollView.EVENT_BOUNCE_TOP
          : ccui.ScrollView.EVENT_SCROLL_TO_TOP;
        break;
      case ccui.ScrollView.MOVEDIR_BOTTOM:
        d = b
          ? ccui.ScrollView.EVENT_BOUNCE_BOTTOM
          : ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM;
        break;
      case ccui.ScrollView.MOVEDIR_LEFT:
        d = b
          ? ccui.ScrollView.EVENT_BOUNCE_LEFT
          : ccui.ScrollView.EVENT_SCROLL_TO_LEFT;
        break;
      case ccui.ScrollView.MOVEDIR_RIGHT:
        d = b
          ? ccui.ScrollView.EVENT_BOUNCE_RIGHT
          : ccui.ScrollView.EVENT_SCROLL_TO_RIGHT;
    }
    this._dispatchEvent(d);
  },
  _processScrollingEvent: function () {
    this._dispatchEvent(ccui.ScrollView.EVENT_SCROLLING);
  },
  _dispatchEvent: function (a) {
    this._scrollViewEventSelector &&
      (this._scrollViewEventListener
        ? this._scrollViewEventSelector.call(
            this._scrollViewEventListener,
            this,
            a
          )
        : this._scrollViewEventSelector(this, a));
    this._ccEventCallback && this._ccEventCallback(this, a);
  },
  addEventListenerScrollView: function (a, b) {
    this._scrollViewEventSelector = a;
    this._scrollViewEventListener = b;
  },
  addEventListener: function (a) {
    this._ccEventCallback = a;
  },
  setDirection: function (a) {
    this._direction = a;
    this._scrollBarEnabled && (this._removeScrollBar(), this._initScrollBar());
  },
  getDirection: function () {
    return this._direction;
  },
  setBounceEnabled: function (a) {
    this.bounceEnabled = a;
  },
  isBounceEnabled: function () {
    return this.bounceEnabled;
  },
  setInertiaScrollEnabled: function (a) {
    this.inertiaScrollEnabled = a;
  },
  isInertiaScrollEnabled: function () {
    return this.inertiaScrollEnabled;
  },
  setScrollBarEnabled: function (a) {
    this._scrollBarEnabled !== a &&
      (this._scrollBarEnabled && this._removeScrollBar(),
      (this._scrollBarEnabled = a) && this._initScrollBar());
  },
  isScrollBarEnabled: function () {
    return this._scrollBarEnabled;
  },
  setScrollBarPositionFromCorner: function (a) {
    this._direction !== ccui.ScrollView.DIR_HORIZONTAL &&
      this.setScrollBarPositionFromCornerForVertical(a);
    this._direction !== ccui.ScrollView.DIR_VERTICAL &&
      this.setScrollBarPositionFromCornerForHorizontal(a);
  },
  setScrollBarPositionFromCornerForVertical: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    cc.assert(
      this._direction !== ccui.ScrollView.DIR_HORIZONTAL,
      "Scroll view doesn't have a vertical scroll bar!"
    );
    this._verticalScrollBar.setPositionFromCorner(a);
  },
  getScrollBarPositionFromCornerForVertical: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    cc.assert(
      this._direction !== ccui.ScrollView.DIR_HORIZONTAL,
      "Scroll view doesn't have a vertical scroll bar!"
    );
    return this._verticalScrollBar.getPositionFromCorner();
  },
  setScrollBarPositionFromCornerForHorizontal: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    cc.assert(
      this._direction !== ccui.ScrollView.DIR_VERTICAL,
      "Scroll view doesn't have a horizontal scroll bar!"
    );
    this._horizontalScrollBar.setPositionFromCorner(a);
  },
  getScrollBarPositionFromCornerForHorizontal: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    cc.assert(
      this._direction !== ccui.ScrollView.DIR_VERTICAL,
      "Scroll view doesn't have a horizontal scroll bar!"
    );
    return this._horizontalScrollBar.getPositionFromCorner();
  },
  setScrollBarWidth: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && this._verticalScrollBar.setWidth(a);
    this._horizontalScrollBar && this._horizontalScrollBar.setWidth(a);
  },
  getScrollBarWidth: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    return this._verticalScrollBar
      ? this._verticalScrollBar.getWidth()
      : this._horizontalScrollBar
      ? this._horizontalScrollBar.getWidth()
      : 0;
  },
  setScrollBarColor: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && this._verticalScrollBar.setColor(a);
    this._horizontalScrollBar && this._horizontalScrollBar.setColor(a);
  },
  getScrollBarColor: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && this._verticalScrollBar.getColor();
    this._horizontalScrollBar && this._horizontalScrollBar.getColor();
    return cc.color.WHITE;
  },
  setScrollBarOpacity: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && (this._verticalScrollBar.opacity = a);
    this._horizontalScrollBar && (this._horizontalScrollBar.opacity = a);
  },
  getScrollBarOpacity: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    return this._verticalScrollBar
      ? this._verticalScrollBar.opacity
      : this._horizontalScrollBar
      ? this._horizontalScrollBar.opacity
      : -1;
  },
  setScrollBarAutoHideEnabled: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && (this._verticalScrollBar.autoHideEnabled = a);
    this._horizontalScrollBar &&
      (this._horizontalScrollBar.autoHideEnabled = a);
  },
  isScrollBarAutoHideEnabled: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    return this._verticalScrollBar
      ? this._verticalScrollBar.autoHideEnabled
      : this._horizontalScrollBar
      ? this._horizontalScrollBar.autoHideEnabled
      : !1;
  },
  setScrollBarAutoHideTime: function (a) {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    this._verticalScrollBar && (this._verticalScrollBar.autoHideTime = a);
    this._horizontalScrollBar && (this._horizontalScrollBar.autoHideTime = a);
  },
  getScrollBarAutoHideTime: function () {
    cc.assert(this._scrollBarEnabled, "Scroll bar should be enabled!");
    return this._verticalScrollBar
      ? this._verticalScrollBar.autoHideTime
      : this._horizontalScrollBar
      ? this._horizontalScrollBar.autoHideTime
      : 0;
  },
  getInnerContainer: function () {
    return this._innerContainer;
  },
  setLayoutType: function (a) {
    this._innerContainer.setLayoutType(a);
  },
  getLayoutType: function () {
    return this._innerContainer.getLayoutType();
  },
  _doLayout: function () {
    this._doLayoutDirty && (this._doLayoutDirty = !1);
  },
  getDescription: function () {
    return "ScrollView";
  },
  _createCloneInstance: function () {
    return new ccui.ScrollView();
  },
  _copyClonedWidgetChildren: function (a) {
    ccui.Layout.prototype._copyClonedWidgetChildren.call(this, a);
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.ScrollView &&
      (ccui.Layout.prototype._copySpecialProperties.call(this, a),
      this.setInnerContainerSize(a.getInnerContainerSize()),
      this.setInnerContainerPosition(a.getInnerContainerPosition()),
      this.setDirection(a._direction),
      (this._topBoundary = a._topBoundary),
      (this._bottomBoundary = a._bottomBoundary),
      (this._leftBoundary = a._leftBoundary),
      (this._rightBoundary = a._rightBoundary),
      (this._bePressed = a._bePressed),
      (this._childFocusCancelOffset = a._childFocusCancelOffset),
      (this._touchMoveDisplacements = a._touchMoveDisplacements),
      (this._touchMoveTimeDeltas = a._touchMoveTimeDeltas),
      (this._touchMovePreviousTimestamp = a._touchMovePreviousTimestamp),
      (this._autoScrolling = a._autoScrolling),
      (this._autoScrollAttenuate = a._autoScrollAttenuate),
      (this._autoScrollStartPosition = a._autoScrollStartPosition),
      (this._autoScrollTargetDelta = a._autoScrollTargetDelta),
      (this._autoScrollTotalTime = a._autoScrollTotalTime),
      (this._autoScrollAccumulatedTime = a._autoScrollAccumulatedTime),
      (this._autoScrollCurrentlyOutOfBoundary =
        a._autoScrollCurrentlyOutOfBoundary),
      (this._autoScrollBraking = a._autoScrollBraking),
      (this._autoScrollBrakingStartPosition =
        a._autoScrollBrakingStartPosition),
      this.setBounceEnabled(a.bounceEnabled),
      this.setInertiaScrollEnabled(a.inertiaScrollEnabled),
      (this._scrollViewEventListener = a._scrollViewEventListener),
      (this._scrollViewEventSelector = a._scrollViewEventSelector),
      (this._ccEventCallback = a._ccEventCallback),
      this.setScrollBarEnabled(a.isScrollBarEnabled()),
      this.isScrollBarEnabled() &&
        (this._direction !== ccui.ScrollView.DIR_HORIZONTAL &&
          this.setScrollBarPositionFromCornerForVertical(
            a.getScrollBarPositionFromCornerForVertical()
          ),
        this._direction !== ccui.ScrollView.DIR_VERTICAL &&
          this.setScrollBarPositionFromCornerForHorizontal(
            a.getScrollBarPositionFromCornerForHorizontal()
          ),
        this.setScrollBarWidth(a.getScrollBarWidth()),
        this.setScrollBarColor(a.getScrollBarColor()),
        this.setScrollBarAutoHideEnabled(a.isScrollBarAutoHideEnabled()),
        this.setScrollBarAutoHideTime(a.getScrollBarAutoHideTime())));
  },
  _initScrollBar: function () {
    this._direction === ccui.ScrollView.DIR_HORIZONTAL ||
      this._verticalScrollBar ||
      ((this._verticalScrollBar = new ccui.ScrollViewBar(
        this,
        ccui.ScrollView.DIR_VERTICAL
      )),
      this.addProtectedChild(this._verticalScrollBar, 2));
    this._direction === ccui.ScrollView.DIR_VERTICAL ||
      this._horizontalScrollBar ||
      ((this._horizontalScrollBar = new ccui.ScrollViewBar(
        this,
        ccui.ScrollView.DIR_HORIZONTAL
      )),
      this.addProtectedChild(this._horizontalScrollBar, 2));
  },
  _removeScrollBar: function () {
    this._verticalScrollBar &&
      (this.removeProtectedChild(this._verticalScrollBar),
      (this._verticalScrollBar = null));
    this._horizontalScrollBar &&
      (this.removeProtectedChild(this._horizontalScrollBar),
      (this._horizontalScrollBar = null));
  },
  getNodeByTag: function (a) {
    return this._innerContainer.getNodeByTag(a);
  },
  getNodes: function () {
    return this._innerContainer.getNodes();
  },
  removeNode: function (a) {
    this._innerContainer.removeNode(a);
  },
  removeNodeByTag: function (a) {
    this._innerContainer.removeNodeByTag(a);
  },
  removeAllNodes: function () {
    this._innerContainer.removeAllNodes();
  },
  addNode: function (a, b, d) {
    this._innerContainer.addNode(a, b, d);
  },
});
_p = ccui.ScrollView.prototype;
cc.defineGetterSetter(_p, "innerWidth", _p._getInnerWidth, _p._setInnerWidth);
cc.defineGetterSetter(
  _p,
  "innerHeight",
  _p._getInnerHeight,
  _p._setInnerHeight
);
cc.defineGetterSetter(_p, "direction", _p.getDirection, _p.setDirection);
cc.defineGetterSetter(
  _p,
  "touchTotalTimeThreshold",
  _p.getTouchTotalTimeThreshold,
  _p.setTouchTotalTimeThreshold
);
_p = null;
ccui.ScrollView.create = function () {
  return new ccui.ScrollView();
};
ccui.ScrollView.DIR_NONE = 0;
ccui.ScrollView.DIR_VERTICAL = 1;
ccui.ScrollView.DIR_HORIZONTAL = 2;
ccui.ScrollView.DIR_BOTH = 3;
ccui.ScrollView.EVENT_SCROLL_TO_TOP = 0;
ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM = 1;
ccui.ScrollView.EVENT_SCROLL_TO_LEFT = 2;
ccui.ScrollView.EVENT_SCROLL_TO_RIGHT = 3;
ccui.ScrollView.EVENT_SCROLLING = 4;
ccui.ScrollView.EVENT_BOUNCE_TOP = 5;
ccui.ScrollView.EVENT_BOUNCE_BOTTOM = 6;
ccui.ScrollView.EVENT_BOUNCE_LEFT = 7;
ccui.ScrollView.EVENT_BOUNCE_RIGHT = 8;
ccui.ScrollView.EVENT_CONTAINER_MOVED = 9;
ccui.ScrollView.EVENT_AUTOSCROLL_ENDED = 10;
ccui.ScrollView.MOVEDIR_TOP = 0;
ccui.ScrollView.MOVEDIR_BOTTOM = 1;
ccui.ScrollView.MOVEDIR_LEFT = 2;
ccui.ScrollView.MOVEDIR_RIGHT = 3;
ccui.ListView = ccui.ScrollView.extend({
  _model: null,
  _items: null,
  _gravity: null,
  _itemsMargin: 0,
  _curSelectedIndex: 0,
  _refreshViewDirty: !0,
  _listViewEventListener: null,
  _listViewEventSelector: null,
  _ccListViewEventCallback: null,
  _magneticAllowedOutOfBoundary: !0,
  _magneticType: 0,
  _className: "ListView",
  ctor: function () {
    this._items = [];
    ccui.ScrollView.prototype.ctor.call(this);
    this._gravity = ccui.ListView.GRAVITY_CENTER_VERTICAL;
    this.setTouchEnabled(!0);
    this.setDirection(ccui.ScrollView.DIR_VERTICAL);
  },
  setItemModel: function (a) {
    a ? (this._model = a) : cc.log("Can't set a null to item model!");
  },
  _handleReleaseLogic: function (a) {
    ccui.ScrollView.prototype._handleReleaseLogic.call(this, a);
    this._autoScrolling || this._startMagneticScroll();
  },
  _onItemListChanged: function () {
    this._outOfBoundaryAmountDirty = !0;
  },
  _updateInnerContainerSize: function () {
    var a,
      b = this._items,
      d;
    switch (this.direction) {
      case ccui.ScrollView.DIR_VERTICAL:
        d = b.length;
        var e = (d - 1) * this._itemsMargin;
        for (a = 0; a < d; a++) e += b[a].getContentSize().height;
        this.setInnerContainerSize(cc.size(this._contentSize.width, e));
        break;
      case ccui.ScrollView.DIR_HORIZONTAL:
        d = b.length;
        e = (d - 1) * this._itemsMargin;
        for (a = 0; a < d; a++) e += b[a].getContentSize().width;
        this.setInnerContainerSize(cc.size(e, this._contentSize.height));
    }
  },
  _remedyLayoutParameter: function (a) {
    cc.assert(null != a, "ListView Item can't be nil!");
    var b = a.getLayoutParameter(ccui.LayoutParameter.LINEAR),
      d = !0;
    b || ((b = new ccui.LinearLayoutParameter()), (d = !1));
    var e = this.getIndex(a);
    switch (this.direction) {
      case ccui.ScrollView.DIR_VERTICAL:
        this._remedyVerticalLayoutParameter(b, e);
        break;
      case ccui.ScrollView.DIR_HORIZONTAL:
        this._remedyHorizontalLayoutParameter(b, e);
    }
    d || a.setLayoutParameter(b);
  },
  _remedyVerticalLayoutParameter: function (a, b) {
    cc.assert(null != a, "Layout parameter can't be nil!");
    switch (this._gravity) {
      case ccui.ListView.GRAVITY_LEFT:
        a.setGravity(ccui.LinearLayoutParameter.LEFT);
        break;
      case ccui.ListView.GRAVITY_RIGHT:
        a.setGravity(ccui.LinearLayoutParameter.RIGHT);
        break;
      case ccui.ListView.GRAVITY_CENTER_HORIZONTAL:
        a.setGravity(ccui.LinearLayoutParameter.CENTER_HORIZONTAL);
    }
    0 === b
      ? a.setMargin(ccui.MarginZero())
      : a.setMargin(new ccui.Margin(0, this._itemsMargin, 0, 0));
  },
  _remedyHorizontalLayoutParameter: function (a, b) {
    cc.assert(null != a, "Layout parameter can't be nil!");
    switch (this._gravity) {
      case ccui.ListView.GRAVITY_TOP:
        a.setGravity(ccui.LinearLayoutParameter.TOP);
        break;
      case ccui.ListView.GRAVITY_BOTTOM:
        a.setGravity(ccui.LinearLayoutParameter.BOTTOM);
        break;
      case ccui.ListView.GRAVITY_CENTER_VERTICAL:
        a.setGravity(ccui.LinearLayoutParameter.CENTER_VERTICAL);
    }
    0 === b
      ? a.setMargin(ccui.MarginZero())
      : a.setMargin(new ccui.Margin(this._itemsMargin, 0, 0, 0));
  },
  pushBackDefaultItem: function () {
    if (null != this._model) {
      var a = this._model.clone();
      this._remedyLayoutParameter(a);
      this.addChild(a);
      this._refreshViewDirty = !0;
    }
  },
  insertDefaultItem: function (a) {
    if (null != this._model) {
      var b = this._model.clone();
      this._items.splice(a, 0, b);
      ccui.ScrollView.prototype.addChild.call(this, b);
      this._remedyLayoutParameter(b);
      this._refreshViewDirty = !0;
    }
  },
  pushBackCustomItem: function (a) {
    this._remedyLayoutParameter(a);
    this.addChild(a);
    this._refreshViewDirty = !0;
  },
  addChild: function (a, b, d) {
    a &&
      ((b = b || a.getLocalZOrder()),
      (d = d || a.getName()),
      ccui.ScrollView.prototype.addChild.call(this, a, b, d),
      a instanceof ccui.Widget &&
        (this._items.push(a), this._onItemListChanged()));
  },
  removeChild: function (a, b) {
    if (a) {
      var d = this._items.indexOf(a);
      -1 < d && this._items.splice(d, 1);
      this._onItemListChanged();
      ccui.ScrollView.prototype.removeChild.call(this, a, b);
    }
  },
  removeAllChildren: function () {
    this.removeAllChildrenWithCleanup(!0);
  },
  removeAllChildrenWithCleanup: function (a) {
    ccui.ScrollView.prototype.removeAllChildrenWithCleanup.call(this, a);
    this._items = [];
    this._onItemListChanged();
  },
  insertCustomItem: function (a, b) {
    this._items.splice(b, 0, a);
    this._onItemListChanged();
    ccui.ScrollView.prototype.addChild.call(this, a);
    this._remedyLayoutParameter(a);
    this._refreshViewDirty = !0;
  },
  removeItem: function (a) {
    a = this.getItem(a);
    null != a && (this.removeChild(a, !0), (this._refreshViewDirty = !0));
  },
  removeLastItem: function () {
    this.removeItem(this._items.length - 1);
  },
  removeAllItems: function () {
    this.removeAllChildren();
  },
  getItem: function (a) {
    return 0 > a || a >= this._items.length ? null : this._items[a];
  },
  getItems: function () {
    return this._items;
  },
  getIndex: function (a) {
    return null == a ? -1 : this._items.indexOf(a);
  },
  setGravity: function (a) {
    this._gravity !== a && ((this._gravity = a), (this._refreshViewDirty = !0));
  },
  setMagneticType: function (a) {
    this._magneticType = a;
    this._onItemListChanged();
    this._startMagneticScroll();
  },
  getMagneticType: function () {
    return this._magneticType;
  },
  setMagneticAllowedOutOfBoundary: function (a) {
    this._magneticAllowedOutOfBoundary = a;
  },
  getMagneticAllowedOutOfBoundary: function () {
    return this._magneticAllowedOutOfBoundary;
  },
  setItemsMargin: function (a) {
    this._itemsMargin !== a &&
      ((this._itemsMargin = a), (this._refreshViewDirty = !0));
  },
  getItemsMargin: function () {
    return this._itemsMargin;
  },
  setDirection: function (a) {
    switch (a) {
      case ccui.ScrollView.DIR_VERTICAL:
        this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);
        break;
      case ccui.ScrollView.DIR_HORIZONTAL:
        this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);
        break;
      case ccui.ScrollView.DIR_BOTH:
        return;
      default:
        return;
    }
    ccui.ScrollView.prototype.setDirection.call(this, a);
  },
  _getHowMuchOutOfBoundary: function (a) {
    void 0 === a && (a = cc.p(0, 0));
    if (this._magneticAllowedOutOfBoundary && 0 !== this._items.length) {
      if (
        this._magneticType === ccui.ListView.MAGNETIC_NONE ||
        this._magneticType === ccui.ListView.MAGNETIC_BOTH_END
      )
        return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this, a);
      if (0 === a.x && 0 === a.y && !this._outOfBoundaryAmountDirty)
        return this._outOfBoundaryAmount;
    } else
      return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this, a);
    var b = this._leftBoundary,
      d = this._rightBoundary,
      e = this._topBoundary,
      f = this._bottomBoundary,
      g = this._items.length - 1,
      h = this.getContentSize(),
      k = cc.p(0, 0),
      m = cc.p(0, 0);
    switch (this._magneticType) {
      case ccui.ListView.MAGNETIC_CENTER:
        k.x = (h.width - this._items[0].width) / 2;
        k.y = (h.height - this._items[0].height) / 2;
        m.x = (h.width - this._items[g].width) / 2;
        m.y = (h.height - this._items[g].height) / 2;
        break;
      case ccui.ListView.MAGNETIC_LEFT:
      case ccui.ListView.MAGNETIC_TOP:
        m.x = h.width - this._items[g].width;
        m.y = h.height - this._items[g].height;
        break;
      case ccui.ListView.MAGNETIC_RIGHT:
      case ccui.ListView.MAGNETIC_BOTTOM:
        (k.x = h.width - this._items[0].width),
          (k.y = h.height - this._items[0].height);
    }
    b += k.x;
    d -= m.x;
    e -= k.y;
    f += m.y;
    g = cc.p(0, 0);
    this._innerContainer.getLeftBoundary() + a.x > b
      ? (g.x = b - (this._innerContainer.getLeftBoundary() + a.x))
      : this._innerContainer.getRightBoundary() + a.x < d &&
        (g.x = d - (this._innerContainer.getRightBoundary() + a.x));
    this._innerContainer.getTopBoundary() + a.y < e
      ? (g.y = e - (this._innerContainer.getTopBoundary() + a.y))
      : this._innerContainer.getBottomBoundary() + a.y > f &&
        (g.y = f - (this._innerContainer.getBottomBoundary() + a.y));
    0 === a.x &&
      0 === a.y &&
      ((this._outOfBoundaryAmount = g), (this._outOfBoundaryAmountDirty = !1));
    return g;
  },
  _calculateItemPositionWithAnchor: function (a, b) {
    var d = cc.p(a.getLeftBoundary(), a.getBottomBoundary()),
      e = a.getContentSize();
    return cc.p(d.x + e.width * b.x, d.y + e.height * b.y);
  },
  _findClosestItem: function (a, b, d, e, f, g, h) {
    cc.assert(0 <= e && g < b.length && e <= g, "");
    if (e === g) return b[e];
    if (1 === g - e) return f <= h ? b[e] : b[g];
    var k = Math.floor((e + g) / 2),
      m = this._calculateItemPositionWithAnchor(b[k], d),
      m = cc.pLength(cc.pSub(a, m));
    return f <= h
      ? this._findClosestItem(a, b, d, e, f, k, m)
      : this._findClosestItem(a, b, d, k, m, g, h);
  },
  getClosestItemToPosition: function (a, b) {
    if (0 === this._items.length) return null;
    var d = this._calculateItemPositionWithAnchor(this._items[0], b),
      d = cc.pLength(cc.pSub(a, d)),
      e = this._items.length - 1,
      f = this._calculateItemPositionWithAnchor(this._items[e], b),
      f = cc.pLength(cc.pSub(a, f));
    return this._findClosestItem(a, this._items, b, 0, d, e, f);
  },
  getClosestItemToPositionInCurrentView: function (a, b) {
    var d = this.getContentSize(),
      e = cc.pMult(this._innerContainer.getPosition(), -1);
    e.x += d.width * a.x;
    e.y += d.height * a.y;
    return this.getClosestItemToPosition(e, b);
  },
  getCenterItemInCurrentView: function () {
    return this.getClosestItemToPositionInCurrentView(
      cc.p(0.5, 0.5),
      cc.p(0.5, 0.5)
    );
  },
  getLeftmostItemInCurrentView: function () {
    return this._direction === ccui.ScrollView.DIR_HORIZONTAL
      ? this.getClosestItemToPositionInCurrentView(cc.p(0, 0.5), cc.p(0.5, 0.5))
      : null;
  },
  getRightmostItemInCurrentView: function () {
    return this._direction === ccui.ScrollView.DIR_HORIZONTAL
      ? this.getClosestItemToPositionInCurrentView(cc.p(1, 0.5), cc.p(0.5, 0.5))
      : null;
  },
  getTopmostItemInCurrentView: function () {
    return this._direction === ccui.ScrollView.DIR_VERTICAL
      ? this.getClosestItemToPositionInCurrentView(cc.p(0.5, 1), cc.p(0.5, 0.5))
      : null;
  },
  getBottommostItemInCurrentView: function () {
    return this._direction === ccui.ScrollView.DIR_VERTICAL
      ? this.getClosestItemToPositionInCurrentView(cc.p(0.5, 0), cc.p(0.5, 0.5))
      : null;
  },
  _calculateItemDestination: function (a, b, d) {
    var e = this.getContentSize(),
      f = cc.p(0, 0);
    f.x += e.width * a.x;
    f.y += e.height * a.y;
    a = this._calculateItemPositionWithAnchor(b, d);
    return cc.pMult(cc.pSub(a, f), -1);
  },
  jumpToBottom: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToBottom.call(this);
  },
  jumpToTop: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToTop.call(this);
  },
  jumpToLeft: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToLeft.call(this);
  },
  jumpToRight: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToRight.call(this);
  },
  jumpToTopLeft: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToTopLeft.call(this);
  },
  jumpToTopRight: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToTopRight.call(this);
  },
  jumpToBottomLeft: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToBottomLeft.call(this);
  },
  jumpToBottomRight: function () {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToBottomRight.call(this);
  },
  jumpToPercentVertical: function (a) {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToPercentVertical.call(this, a);
  },
  jumpToPercentHorizontal: function (a) {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToPercentHorizontal.call(this, a);
  },
  jumpToPercentBothDirection: function (a) {
    this.doLayout();
    ccui.ScrollView.prototype.jumpToPercentBothDirection.call(this, a);
  },
  jumpToItem: function (a, b, d) {
    if ((a = this.getItem(a)))
      this.doLayout(),
        (b = this._calculateItemDestination(b, a, d)),
        this.bounceEnabled ||
          ((d = cc.pSub(b, this._innerContainer.getPosition())),
          (d = this._getHowMuchOutOfBoundary(d)),
          (b.x += d.x),
          (b.y += d.y)),
        this._jumpToDestination(b);
  },
  scrollToItem: function (a, b, d, e) {
    void 0 === e && (e = 1);
    if ((a = this.getItem(a)))
      (b = this._calculateItemDestination(b, a, d)),
        this._startAutoScrollToDestination(b, e, !0);
  },
  requestRefreshView: function () {
    this._refreshViewDirty = !0;
  },
  refreshView: function () {
    this.forceDoLayout();
  },
  doLayout: function () {
    this._doLayout();
  },
  requestDoLayout: function () {
    this._refreshViewDirty = !0;
  },
  _doLayout: function () {
    if (this._refreshViewDirty) {
      for (var a = this._items, b = 0; b < a.length; b++) {
        var d = a[b];
        d.setLocalZOrder(b);
        this._remedyLayoutParameter(d);
      }
      this._updateInnerContainerSize();
      this._innerContainer.forceDoLayout();
      this._refreshViewDirty = !1;
    }
  },
  addEventListenerListView: function (a, b) {
    this._listViewEventListener = b;
    this._listViewEventSelector = a;
  },
  addEventListener: function (a) {
    this._ccListViewEventCallback = a;
  },
  _selectedItemEvent: function (a) {
    a =
      a === ccui.Widget.TOUCH_BEGAN
        ? ccui.ListView.ON_SELECTED_ITEM_START
        : ccui.ListView.ON_SELECTED_ITEM_END;
    this._listViewEventSelector &&
      (this._listViewEventListener
        ? this._listViewEventSelector.call(this._listViewEventListener, this, a)
        : this._listViewEventSelector(this, a));
    this._ccListViewEventCallback && this._ccListViewEventCallback(this, a);
  },
  interceptTouchEvent: function (a, b, d) {
    ccui.ScrollView.prototype.interceptTouchEvent.call(this, a, b, d);
    if (this._touchEnabled && a !== ccui.Widget.TOUCH_MOVED) {
      for (d = b; d; ) {
        if (d && d.getParent() === this._innerContainer) {
          this._curSelectedIndex = this.getIndex(d);
          break;
        }
        d = d.getParent();
      }
      b.isHighlighted() && this._selectedItemEvent(a);
    }
  },
  getCurSelectedIndex: function () {
    return this._curSelectedIndex;
  },
  _onSizeChanged: function () {
    ccui.ScrollView.prototype._onSizeChanged.call(this);
    this._refreshViewDirty = !0;
  },
  getDescription: function () {
    return "ListView";
  },
  _createCloneInstance: function () {
    return new ccui.ListView();
  },
  _copyClonedWidgetChildren: function (a) {
    a = a.getItems();
    for (var b = 0; b < a.length; b++) this.pushBackCustomItem(a[b].clone());
  },
  _copySpecialProperties: function (a) {
    a instanceof ccui.ListView &&
      (ccui.ScrollView.prototype._copySpecialProperties.call(this, a),
      this.setItemModel(a._model),
      this.setItemsMargin(a._itemsMargin),
      this.setGravity(a._gravity),
      (this._listViewEventListener = a._listViewEventListener),
      (this._listViewEventSelector = a._listViewEventSelector));
  },
  _startAttenuatingAutoScroll: function (a, b) {
    var d = a;
    if (
      0 !== this._items.length &&
      this._magneticType !== ccui.ListView.MAGNETIC_NONE
    ) {
      var d = this._flattenVectorByDirection(d),
        e = this._getHowMuchOutOfBoundary(d);
      if (0 === e.x && 0 === e.y) {
        e = this._magneticType;
        e === ccui.ListView.MAGNETIC_BOTH_END &&
          (this._direction === ccui.ScrollView.DIR_HORIZONTAL
            ? (e =
                0 < d.x
                  ? ccui.ListView.MAGNETIC_LEFT
                  : ccui.ListView.MAGNETIC_RIGHT)
            : this._direction === ccui.ScrollView.DIR_VERTICAL &&
              (e =
                0 < d.y
                  ? ccui.ListView.MAGNETIC_BOTTOM
                  : ccui.ListView.MAGNETIC_TOP));
        var f = this._getAnchorPointByMagneticType(e),
          e = cc.pMult(this._innerContainer.getPosition(), -1);
        e.x += this.width * f.x;
        e.y += this.height * f.y;
        d = this.getClosestItemToPosition(cc.pSub(e, d), f);
        d = this._calculateItemPositionWithAnchor(d, f);
        d = cc.pSub(e, d);
      }
    }
    ccui.ScrollView.prototype._startAttenuatingAutoScroll.call(this, d, b);
  },
  _getAnchorPointByMagneticType: function (a) {
    switch (a) {
      case ccui.ListView.MAGNETIC_BOTH_END:
        return cc.p(0, 1);
      case ccui.ListView.MAGNETIC_CENTER:
        return cc.p(0.5, 0.5);
      case ccui.ListView.MAGNETIC_LEFT:
        return cc.p(0, 0.5);
      case ccui.ListView.MAGNETIC_RIGHT:
        return cc.p(1, 0.5);
      case ccui.ListView.MAGNETIC_TOP:
        return cc.p(0.5, 1);
      case ccui.ListView.MAGNETIC_BOTTOM:
        return cc.p(0.5, 0);
    }
    return cc.p(0, 0);
  },
  _startMagneticScroll: function () {
    if (
      0 !== this._items.length &&
      this._magneticType !== ccui.ListView.MAGNETIC_NONE
    ) {
      var a = this._getAnchorPointByMagneticType(this._magneticType),
        b = cc.pMult(this._innerContainer.getPosition(), -1);
      b.x += this.width * a.x;
      b.y += this.height * a.y;
      b = this.getClosestItemToPosition(b, a);
      this.scrollToItem(this.getIndex(b), a, a);
    }
  },
});
ccui.ListView.create = function () {
  return new ccui.ListView();
};
ccui.ListView.EVENT_SELECTED_ITEM = 0;
ccui.ListView.ON_SELECTED_ITEM_START = 0;
ccui.ListView.ON_SELECTED_ITEM_END = 1;
ccui.ListView.GRAVITY_LEFT = 0;
ccui.ListView.GRAVITY_RIGHT = 1;
ccui.ListView.GRAVITY_CENTER_HORIZONTAL = 2;
ccui.ListView.GRAVITY_TOP = 3;
ccui.ListView.GRAVITY_BOTTOM = 4;
ccui.ListView.GRAVITY_CENTER_VERTICAL = 5;
ccui.ListView.MAGNETIC_NONE = 0;
ccui.ListView.MAGNETIC_CENTER = 1;
ccui.ListView.MAGNETIC_BOTH_END = 2;
ccui.ListView.MAGNETIC_LEFT = 3;
ccui.ListView.MAGNETIC_RIGHT = 4;
ccui.ListView.MAGNETIC_TOP = 5;
ccui.ListView.MAGNETIC_BOTTOM = 6;
ccui.PageView = ccui.ListView.extend({
  _curPageIdx: 0,
  _childFocusCancelOffset: 0,
  _pageViewEventListener: null,
  _pageViewEventSelector: null,
  _className: "PageView",
  _indicator: null,
  _indicatorPositionAsAnchorPoint: null,
  ctor: function () {
    ccui.ListView.prototype.ctor.call(this);
    this._childFocusCancelOffset = 5;
    this._indicatorPositionAsAnchorPoint = cc.p(0.5, 0.1);
    this._pageViewEventSelector = this._pageViewEventListener = null;
    this.setDirection(ccui.ScrollView.DIR_HORIZONTAL);
    this.setMagneticType(ccui.ListView.MAGNETIC_CENTER);
    this.setScrollBarEnabled(!1);
  },
  addWidgetToPage: function (a, b, d) {
    this.insertCustomItem(a, b);
  },
  addPage: function (a) {
    this.pushBackCustomItem(a);
  },
  insertPage: function (a, b) {
    this.insertCustomItem(a, b);
  },
  removePage: function (a) {
    this.removeItem(this.getIndex(a));
  },
  removePageAtIndex: function (a) {
    this.removeItem(a);
  },
  removeAllPages: function () {
    this.removeAllItems();
  },
  scrollToItem: function (a) {
    ccui.ListView.prototype.scrollToItem.call(
      this,
      a,
      cc.p(0.5, 0.5),
      cc.p(0.5, 0.5)
    );
  },
  scrollToPage: function (a) {
    this.scrollToItem(a);
  },
  _doLayout: function () {
    if (this._refreshViewDirty) {
      ccui.ListView.prototype._doLayout.call(this);
      if (this._indicator) {
        var a = this.getIndex(this.getCenterItemInCurrentView());
        this._indicator.indicate(a);
      }
      this._refreshViewDirty = !1;
    }
  },
  setDirection: function (a) {
    ccui.ListView.prototype.setDirection.call(this, a);
    a === ccui.ScrollView.DIR_HORIZONTAL
      ? (this._indicatorPositionAsAnchorPoint = cc.p(0.5, 0.1))
      : a === ccui.ScrollView.DIR_VERTICAL &&
        (this._indicatorPositionAsAnchorPoint = cc.p(0.1, 0.5));
    this._indicator &&
      (this._indicator.setDirection(a), this._refreshIndicatorPosition());
  },
  setCustomScrollThreshold: function (a) {},
  getCustomScrollThreshold: function () {
    return 0;
  },
  setUsingCustomScrollThreshold: function (a) {},
  isUsingCustomScrollThreshold: function () {
    return !1;
  },
  _moveInnerContainer: function (a, b) {
    ccui.ListView.prototype._moveInnerContainer.call(this, a, b);
    this._curPageIdx = this.getIndex(this.getCenterItemInCurrentView());
    this._indicator && this._indicator.indicate(this._curPageIdx);
  },
  _onItemListChanged: function () {
    ccui.ListView.prototype._onItemListChanged.call(this);
    this._indicator && this._indicator.reset(this._items.length);
  },
  _onSizeChanged: function () {
    ccui.ListView.prototype._onSizeChanged.call(this);
    this._refreshIndicatorPosition();
  },
  _remedyLayoutParameter: function (a) {
    a.setContentSize(this.getContentSize());
    ccui.ListView.prototype._remedyLayoutParameter.call(this, a);
  },
  _refreshIndicatorPosition: function () {
    if (this._indicator) {
      var a = this.getContentSize();
      this._indicator.setPosition(
        cc.p(
          a.width * this._indicatorPositionAsAnchorPoint.x,
          a.height * this._indicatorPositionAsAnchorPoint.y
        )
      );
    }
  },
  _handleReleaseLogic: function (a) {
    ccui.ScrollView.prototype._handleReleaseLogic.call(this, a);
    if (!(0 >= this._items.length))
      if (
        ((a = this._flattenVectorByDirection(
          this._calculateTouchMoveVelocity()
        )),
        500 > cc.pLength(a))
      )
        this._startMagneticScroll();
      else {
        var b = this.getItem(this._curPageIdx),
          b = this._calculateItemDestination(cc.p(0.5, 0.5), b, cc.p(0.5, 0.5)),
          b = cc.pSub(b, this.getInnerContainerPosition()),
          b = this._flattenVectorByDirection(b);
        0 < a.x * b.x || 0 < a.y * b.y
          ? this._startMagneticScroll()
          : (0 > a.x || 0 < a.y ? ++this._curPageIdx : --this._curPageIdx,
            (this._curPageIdx = Math.min(this._curPageIdx, this._items.length)),
            (this._curPageIdx = Math.max(this._curPageIdx, 0)),
            this.scrollToItem(this._curPageIdx));
      }
  },
  _getAutoScrollStopEpsilon: function () {
    return 0.001;
  },
  _pageTurningEvent: function () {
    this._pageViewEventSelector &&
      (this._pageViewEventListener
        ? this._pageViewEventSelector.call(
            this._pageViewEventListener,
            this,
            ccui.PageView.EVENT_TURNING
          )
        : this._pageViewEventSelector(this, ccui.PageView.EVENT_TURNING));
    this._ccEventCallback &&
      this._ccEventCallback(this, ccui.PageView.EVENT_TURNING);
  },
  addEventListenerPageView: function (a, b) {
    this._pageViewEventSelector = a;
    this._pageViewEventListener = b;
  },
  addEventListener: function (a) {
    this._ccEventCallback = function (b, d) {
      d == ccui.ScrollView.EVENT_AUTOSCROLL_ENDED && a(this, d);
    };
  },
  setCurrentPageIndex: function (a) {
    this.jumpToItem(a, cc.p(0.5, 0.5), cc.p(0.5, 0.5));
  },
  setCurPageIndex: function (a) {
    this.setCurrentPageIndex(a);
  },
  getCurrentPageIndex: function () {
    return this._curPageIdx;
  },
  getCurPageIndex: function () {
    var a = this.getCenterItemInCurrentView();
    return this.getIndex(a);
  },
  getPages: function () {
    return this.getItems();
  },
  getPage: function (a) {
    return this.getItem(a);
  },
  getDescription: function () {
    return "PageView";
  },
  _createCloneInstance: function () {
    return new ccui.PageView();
  },
  _copyClonedWidgetChildren: function (a) {
    a = a.getPages();
    for (var b = 0; b < a.length; b++) this.addPage(a[b].clone());
  },
  _copySpecialProperties: function (a) {
    ccui.ListView.prototype._copySpecialProperties.call(this, a);
    this._ccEventCallback = a._ccEventCallback;
    this._pageViewEventListener = a._pageViewEventListener;
    this._pageViewEventSelector = a._pageViewEventSelector;
    this._customScrollThreshold = a._customScrollThreshold;
  },
  setIndicatorEnabled: function (a) {
    a != (null !== this._indicator) &&
      (a
        ? ((this._indicator = new ccui.PageViewIndicator()),
          this._indicator.setDirection(this.getDirection()),
          this.addProtectedChild(this._indicator, 1e4),
          this.setIndicatorSelectedIndexColor(cc.color(100, 100, 255)),
          this._refreshIndicatorPosition())
        : (this.removeProtectedChild(this._indicator),
          (this._indicator = null)));
  },
  getIndicatorEnabled: function () {
    return null !== this._indicator;
  },
  setIndicatorPositionAsAnchorPoint: function (a) {
    this._indicatorPositionAsAnchorPoint = a;
    this._refreshIndicatorPosition();
  },
  getIndicatorPositionAsAnchorPoint: function () {
    return this._indicatorPositionAsAnchorPoint;
  },
  setIndicatorPosition: function (a) {
    if (this._indicator) {
      var b = this.getContentSize();
      this._indicatorPositionAsAnchorPoint.x = a.x / b.width;
      this._indicatorPositionAsAnchorPoint.y = a.y / b.height;
      this._indicator.setPosition(a);
    }
  },
  getIndicatorPosition: function () {
    cc.assert(null !== this._indicator, "");
    return this._indicator.getPosition();
  },
  setIndicatorSpaceBetweenIndexNodes: function (a) {
    this._indicator && this._indicator.setSpaceBetweenIndexNodes(a);
  },
  getIndicatorSpaceBetweenIndexNodes: function () {
    cc.assert(null !== this._indicator, "");
    return this._indicator.getSpaceBetweenIndexNodes();
  },
  setIndicatorSelectedIndexColor: function (a) {
    this._indicator && this._indicator.setSelectedIndexColor(a);
  },
  getIndicatorSelectedIndexColor: function () {
    cc.assert(null !== this._indicator, "");
    return this._indicator.getSelectedIndexColor();
  },
  setIndicatorIndexNodesColor: function (a) {
    this._indicator && this._indicator.setIndexNodesColor(a);
  },
  getIndicatorIndexNodesColor: function () {
    cc.assert(null !== this._indicator, "");
    return this._indicator.getIndexNodesColor();
  },
  setIndicatorIndexNodesScale: function (a) {
    this._indicator &&
      (this._indicator.setIndexNodesScale(a),
      this._indicator.indicate(this._curPageIdx));
  },
  getIndicatorIndexNodesScale: function () {
    cc.assert(null !== this._indicator, "");
    return this._indicator.getIndexNodesScale();
  },
  setIndicatorIndexNodesTexture: function (a, b) {
    this._indicator &&
      (this._indicator.setIndexNodesTexture(a, b),
      this._indicator.indicate(this._curPageIdx));
  },
});
ccui.PageView.create = function () {
  return new ccui.PageView();
};
ccui.PageView.EVENT_TURNING = 0;
ccui.PageView.TOUCH_DIR_LEFT = 0;
ccui.PageView.TOUCH_DIR_RIGHT = 1;
ccui.PageView.DIRECTION_LEFT = 0;
ccui.PageView.DIRECTION_RIGHT = 1;
ccui.PageViewIndicator = ccui.ProtectedNode.extend({
  _direction: null,
  _indexNodes: null,
  _currentIndexNode: null,
  _spaceBetweenIndexNodes: 0,
  _indexNodesScale: 1,
  _indexNodesColor: null,
  _useDefaultTexture: !0,
  _indexNodesTextureFile: "",
  _indexNodesTexType: ccui.Widget.LOCAL_TEXTURE,
  _className: "PageViewIndicator",
  ctor: function () {
    cc.ProtectedNode.prototype.ctor.call(this);
    this._direction = ccui.ScrollView.DIR_HORIZONTAL;
    this._indexNodes = [];
    this._spaceBetweenIndexNodes =
      ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT;
    this._indexNodesColor = cc.color.WHITE;
    this._currentIndexNode = ccui.helper._createSpriteFromBase64(
      ccui.PageViewIndicator.CIRCLE_IMAGE,
      ccui.PageViewIndicator.CIRCLE_IMAGE_KEY
    );
    this._currentIndexNode.setVisible(!1);
    this.addProtectedChild(this._currentIndexNode, 1);
  },
  setDirection: function (a) {
    this._direction = a;
    this._rearrange();
  },
  reset: function (a) {
    for (; this._indexNodes.length < a; ) this._increaseNumberOfPages();
    for (; this._indexNodes.length > a; ) this._decreaseNumberOfPages();
    this._rearrange();
    this._currentIndexNode.setVisible(0 < this._indexNodes.length);
  },
  indicate: function (a) {
    0 > a ||
      a >= this._indexNodes.length ||
      this._currentIndexNode.setPosition(this._indexNodes[a].getPosition());
  },
  _rearrange: function () {
    if (0 !== this._indexNodes.length)
      for (
        var a = this._direction === ccui.ScrollView.DIR_HORIZONTAL,
          b = this._indexNodes[0].getContentSize(),
          d = a ? b.width : b.height,
          e = this._indexNodes.length,
          e = -((d * e + this._spaceBetweenIndexNodes * (e - 1)) / 2) + d / 2,
          f = 0;
        f < this._indexNodes.length;
        ++f
      ) {
        var g;
        g = a ? cc.p(e, b.height / 2) : cc.p(b.width / 2, -e);
        this._indexNodes[f].setPosition(g);
        e += d + this._spaceBetweenIndexNodes;
      }
  },
  setSpaceBetweenIndexNodes: function (a) {
    this._spaceBetweenIndexNodes !== a &&
      ((this._spaceBetweenIndexNodes = a), this._rearrange());
  },
  getSpaceBetweenIndexNodes: function () {
    return this._spaceBetweenIndexNodes;
  },
  setSelectedIndexColor: function (a) {
    this._currentIndexNode.setColor(a);
  },
  getSelectedIndexColor: function () {
    return this._currentIndexNode.getColor();
  },
  setIndexNodesColor: function (a) {
    this._indexNodesColor = a;
    for (var b = 0; b < this._indexNodes.length; ++b)
      this._indexNodes[b].setColor(a);
  },
  getIndexNodesColor: function () {
    var a = this._indexNodesColor;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  setIndexNodesScale: function (a) {
    if (this._indexNodesScale !== a) {
      this._indexNodesScale = a;
      this._currentIndexNode.setScale(a);
      for (a = 0; a < this._indexNodes.length; ++a)
        this._indexNodes[a].setScale(this, _indexNodesScale);
      this._rearrange();
    }
  },
  getIndexNodesScale: function () {
    return this._indexNodesScale;
  },
  setIndexNodesTexture: function (a, b) {
    void 0 === b && (b = ccui.Widget.LOCAL_TEXTURE);
    this._useDefaultTexture = !1;
    this._indexNodesTextureFile = a;
    this._indexNodesTexType = b;
    switch (b) {
      case ccui.Widget.LOCAL_TEXTURE:
        this._currentIndexNode.setTexture(a);
        for (var d = 0; d < this._indexNodes.length; ++d)
          this._indexNodes[d].setTexture(a);
        break;
      case ccui.Widget.PLIST_TEXTURE:
        for (
          this._currentIndexNode.setSpriteFrame(a), d = 0;
          d < this._indexNodes.length;
          ++d
        )
          this._indexNodes[d].setSpriteFrame(a);
    }
    this._rearrange();
  },
  _increaseNumberOfPages: function () {
    var a;
    if (this._useDefaultTexture)
      a = ccui.helper._createSpriteFromBase64(
        ccui.PageViewIndicator.CIRCLE_IMAGE,
        ccui.PageViewIndicator.CIRCLE_IMAGE_KEY
      );
    else
      switch (((a = new cc.Sprite()), this._indexNodesTexType)) {
        case ccui.Widget.LOCAL_TEXTURE:
          a.initWithFile(this._indexNodesTextureFile);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          a.initWithSpriteFrameName(this._indexNodesTextureFile);
      }
    a.setColor(this._indexNodesColor);
    a.setScale(this._indexNodesScale);
    this.addProtectedChild(a);
    this._indexNodes.push(a);
  },
  _decreaseNumberOfPages: function () {
    0 !== this._indexNodes.length &&
      (this.removeProtectedChild(this._indexNodes[0]),
      this._indexNodes.splice(0, 1));
  },
  clear: function () {
    for (var a = 0; a < this._indexNodes.length; ++a)
      this.removeProtectedChild(this._indexNodes[a]);
    this._indexNodes.length = 0;
    this._currentIndexNode.setVisible(!1);
  },
});
_p = ccui.PageViewIndicator.prototype;
cc.defineGetterSetter(
  _p,
  "spaceBetweenIndexNodes",
  _p.getSpaceBetweenIndexNodes,
  _p.setSpaceBetweenIndexNodes
);
ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT = 23;
ccui.PageViewIndicator.CIRCLE_IMAGE_KEY = "/__circle_image";
ccui.PageViewIndicator.CIRCLE_IMAGE =
  "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA8ElEQVRIx62VyRGCQBBF+6gWRCEmYDIQkhiBCgHhSclC8YqWzOV5oVzKAYZp3r1/9fpbxAIBMTsKrjx5cqVgR0wgLhCRUWOjJiPqD56xoaGPhpRZV/iSEy6crHmw5oIrF9b/lVeMofrJgjlnxlIy/wik+JB+mme8BExbBhm+5CJC2LE2LtSEQoyGWDioBA5CoRIohJtK4CYDxzNEM4GAugR1E9VjVC+SZpXvhCJCrjomESLvc17pDGX7bWmlh6UtpjPVCWy9zaJ0TD7qfm3pwERMz2trRVZk3K3BD/L34AY+dEDCniMVBkPFkT2J/b2/AIV+dRpFLOYoAAAAAElFTkSuQmCC";
(function () {
  if (ccui.ProtectedNode.CanvasRenderCmd) {
    ccui.ScrollView.CanvasRenderCmd = function (a) {
      this._layoutCmdCtor(a);
      this._dirty = !1;
    };
    var a = (ccui.ScrollView.CanvasRenderCmd.prototype = Object.create(
      ccui.Layout.CanvasRenderCmd.prototype
    ));
    a.constructor = ccui.ScrollView.CanvasRenderCmd;
    a.rendering = function (a) {
      var d = cc.renderer._cacheToCanvasCmds[this._node.__instanceId],
        e,
        f = cc.view.getScaleX(),
        g = cc.view.getScaleY(),
        h = a || cc._renderContext;
      h.computeRealOffsetY();
      this._node.updateChildren();
      a = 0;
      for (e = d.length; a < e; a++) {
        var k = d[a]._node;
        k instanceof ccui.ScrollView ||
          (k && k._parent && !1 === k._parent._inViewRect) ||
          d[a].rendering(h, f, g);
      }
    };
  }
})();
(function () {
  if (ccui.ProtectedNode.WebGLRenderCmd) {
    ccui.ScrollView.WebGLRenderCmd = function (a) {
      this._layoutCmdCtor(a);
      this._needDraw = !0;
      this._dirty = !1;
    };
    var a = (ccui.ScrollView.WebGLRenderCmd.prototype = Object.create(
      ccui.Layout.WebGLRenderCmd.prototype
    ));
    a.constructor = ccui.ScrollView.WebGLRenderCmd;
    a.rendering = function (a) {
      var d = cc.renderer._cacheToBufferCmds[this._node.__instanceId],
        e,
        f,
        g,
        h = a || cc._renderContext;
      if (d)
        for (
          this._node.updateChildren(),
            h.bindBuffer(gl.ARRAY_BUFFER, null),
            a = 0,
            e = d.length;
          a < e;
          a++
        )
          (g = d[a]),
            (f = g._node),
            (f && f._parent && !1 === f._parent._inViewRect) ||
              (g.uploadData
                ? cc.renderer._uploadBufferData(g)
                : (0 < g._batchingSize && cc.renderer._batchRendering(),
                  g.rendering(h)),
              cc.renderer._batchRendering());
    };
  }
})();
cc.Component = cc.Class.extend({
  _owner: null,
  _name: "",
  _enabled: !0,
  ctor: function () {
    this._owner = null;
    this._name = "";
    this._enabled = !0;
  },
  init: function () {
    return !0;
  },
  onEnter: function () {},
  onExit: function () {},
  update: function (a) {},
  serialize: function (a) {},
  isEnabled: function () {
    return this._enabled;
  },
  setEnabled: function (a) {
    this._enabled = a;
  },
  getName: function () {
    return this._name;
  },
  setName: function (a) {
    this._name = a;
  },
  setOwner: function (a) {
    this._owner = a;
  },
  getOwner: function () {
    return this._owner;
  },
});
cc.Component.create = function () {
  return new cc.Component();
};
cc.ComponentContainer = cc.Class.extend({
  _components: null,
  _owner: null,
  ctor: function (a) {
    this._components = null;
    this._owner = a;
  },
  getComponent: function (a) {
    if (!a)
      throw Error(
        "cc.ComponentContainer.getComponent(): name should be non-null"
      );
    a = a.trim();
    this._components || (this._components = {});
    return this._components[a];
  },
  add: function (a) {
    if (!a)
      throw Error("cc.ComponentContainer.add(): component should be non-null");
    if (a.getOwner())
      return (
        cc.log(
          "cc.ComponentContainer.add(): Component already added. It can't be added again"
        ),
        !1
      );
    null == this._components &&
      ((this._components = {}), this._owner.scheduleUpdate());
    if (this._components[a.getName()])
      return (
        cc.log(
          "cc.ComponentContainer.add(): Component already added. It can't be added again"
        ),
        !1
      );
    a.setOwner(this._owner);
    this._components[a.getName()] = a;
    a.onEnter();
    return !0;
  },
  remove: function (a) {
    if (!a)
      throw Error("cc.ComponentContainer.remove(): name should be non-null");
    if (!this._components) return !1;
    if (a instanceof cc.Component) return this._removeByComponent(a);
    a = a.trim();
    return this._removeByComponent(this._components[a]);
  },
  _removeByComponent: function (a) {
    if (!a) return !1;
    a.onExit();
    a.setOwner(null);
    delete this._components[a.getName()];
    return !0;
  },
  removeAll: function () {
    if (this._components) {
      var a = this._components,
        b;
      for (b in a) {
        var d = a[b];
        d.onExit();
        d.setOwner(null);
        delete a[b];
      }
      this._owner.unscheduleUpdate();
      this._components = null;
    }
  },
  _alloc: function () {
    this._components = {};
  },
  visit: function (a) {
    if (this._components) {
      var b = this._components,
        d;
      for (d in b) b[d].update(a);
    }
  },
  isEmpty: function () {
    return this._components ? 0 === this._components.length : !0;
  },
});
ccui.LayoutComponent_ReferencePoint = {
  BOTTOM_LEFT: 0,
  TOP_LEFT: 1,
  BOTTOM_RIGHT: 2,
  TOP_RIGHT: 3,
};
ccui.LayoutComponent_PositionType = {
  Position: 0,
  RelativePosition: 1,
  PreRelativePosition: 2,
  PreRelativePositionEnable: 3,
};
ccui.LayoutComponent_SizeType = { Size: 0, PreSize: 1, PreSizeEnable: 2 };
ccui.LayoutComponent = cc.Component.extend({
  _horizontalEdge: 0,
  _verticalEdge: 0,
  _leftMargin: 0,
  _rightMargin: 0,
  _bottomMargin: 0,
  _topMargin: 0,
  _usingPositionPercentX: !1,
  _positionPercentX: 0,
  _usingPositionPercentY: !1,
  _positionPercentY: 0,
  _usingStretchWidth: !1,
  _usingStretchHeight: !1,
  _percentWidth: 0,
  _usingPercentWidth: !1,
  _percentHeight: 0,
  _usingPercentHeight: !1,
  _actived: !0,
  _isPercentOnly: !1,
  ctor: function () {
    this._name = ccui.LayoutComponent.NAME;
  },
  init: function () {
    return cc.Component.prototype.init.call(this) ? !0 : !1;
  },
  getPercentContentSize: function () {
    return cc.p(this._percentWidth, this._percentHeight);
  },
  setPercentContentSize: function (a) {
    this.setPercentWidth(a.x);
    this.setPercentHeight(a.y);
  },
  setUsingPercentContentSize: function (a) {
    this._usingPercentWidth = this._usingPercentHeight = a;
  },
  SetActiveEnable: function (a) {
    this._actived = a;
  },
  getUsingPercentContentSize: function () {
    return this._usingPercentWidth && this._usingPercentHeight;
  },
  getAnchorPosition: function () {
    return this._owner.getAnchorPoint();
  },
  setAnchorPosition: function (a, b) {
    var d = this._owner.getBoundingBox();
    this._owner.setAnchorPoint(a, b);
    var e = this._owner.getBoundingBox(),
      f = d.x - e.x,
      d = d.y - e.y,
      e = this._owner.getPosition();
    e.x += f;
    e.y += d;
    this.setPosition(e);
  },
  getPosition: function () {
    return this._owner.getPosition();
  },
  setPosition: function (a, b) {
    var d = this._getOwnerParent(),
      e;
    null != d
      ? (void 0 === b ? ((e = a.x), (b = a.y)) : (e = a),
        (d = d.getContentSize()),
        0 !== d.width
          ? (this._positionPercentX = e / d.width)
          : ((this._positionPercentX = 0),
            this._usingPositionPercentX && (e = 0)),
        0 !== d.height
          ? (this._positionPercentY = b / d.height)
          : ((this._positionPercentY = 0),
            this._usingPositionPercentY && (b = 0)),
        this._owner.setPosition(e, b),
        this._refreshHorizontalMargin(),
        this._refreshVerticalMargin())
      : this._owner.setPosition(a, b);
  },
  isPositionPercentXEnabled: function () {
    return this._usingPositionPercentX;
  },
  setPositionPercentXEnabled: function (a) {
    if ((this._usingPositionPercentX = a))
      this._horizontalEdge = ccui.LayoutComponent.horizontalEdge.NONE;
  },
  getPositionPercentX: function () {
    return this._positionPercentX;
  },
  setPositionPercentX: function (a) {
    this._positionPercentX = a;
    a = this._getOwnerParent();
    null !== a &&
      (this._owner.setPositionX(a.width * this._positionPercentX),
      this._refreshHorizontalMargin());
  },
  isPositionPercentYEnabled: function () {
    return this._usingPositionPercentY;
  },
  setPositionPercentYEnabled: function (a) {
    if ((this._usingPositionPercentY = a))
      this._verticalEdge = ccui.LayoutComponent.verticalEdge.NONE;
  },
  getPositionPercentY: function () {
    return this._positionPercentY;
  },
  setPositionPercentY: function (a) {
    this._positionPercentY = a;
    a = this._getOwnerParent();
    null !== a &&
      (this._owner.setPositionY(a.height * this._positionPercentY),
      this._refreshVerticalMargin());
  },
  getHorizontalEdge: function () {
    return this._horizontalEdge;
  },
  setHorizontalEdge: function (a) {
    this._horizontalEdge = a;
    this._horizontalEdge !== ccui.LayoutComponent.horizontalEdge.NONE &&
      (this._usingPositionPercentX = !1);
    var b = this._getOwnerParent();
    null !== b &&
      ((a = this._owner.getPosition()),
      (b = b.getContentSize()),
      0 !== b.width
        ? (this._positionPercentX = a.x / b.width)
        : ((this._positionPercentX = 0),
          (a.x = 0),
          this._usingPositionPercentX && this._owner.setPosition(a)),
      this._refreshHorizontalMargin());
  },
  getVerticalEdge: function () {
    return this._verticalEdge;
  },
  setVerticalEdge: function (a) {
    this._verticalEdge = a;
    this._verticalEdge !== ccui.LayoutComponent.verticalEdge.NONE &&
      (this._usingPositionPercentY = !1);
    var b = this._getOwnerParent();
    null !== b &&
      ((a = this._owner.getPosition()),
      (b = b.getContentSize()),
      0 !== b.height
        ? (this._positionPercentY = a.y / b.height)
        : ((this._positionPercentY = 0),
          (a.y = 0),
          this._usingPositionPercentY && this._owner.setPosition(a)),
      this._refreshVerticalMargin());
  },
  getLeftMargin: function () {
    return this._leftMargin;
  },
  setLeftMargin: function (a) {
    this._leftMargin = a;
  },
  getRightMargin: function () {
    return this._rightMargin;
  },
  setRightMargin: function (a) {
    this._rightMargin = a;
  },
  getTopMargin: function () {
    return this._topMargin;
  },
  setTopMargin: function (a) {
    this._topMargin = a;
  },
  getBottomMargin: function () {
    return this._bottomMargin;
  },
  setBottomMargin: function (a) {
    this._bottomMargin = a;
  },
  getSize: function () {
    return this.getOwner().getContentSize();
  },
  setSize: function (a) {
    var b = this._getOwnerParent();
    null !== b
      ? ((b = b.getContentSize()),
        0 !== b.width
          ? (this._percentWidth = a.width / b.width)
          : ((this._percentWidth = 0),
            this._usingPercentWidth && (a.width = 0)),
        0 !== b.height
          ? (this._percentHeight = a.height / b.height)
          : ((this._percentHeight = 0),
            this._usingPercentHeight && (a.height = 0)),
        this._owner.setContentSize(a),
        this._refreshHorizontalMargin(),
        this._refreshVerticalMargin())
      : this._owner.setContentSize(a);
  },
  isPercentWidthEnabled: function () {
    return this._usingPercentWidth;
  },
  setPercentWidthEnabled: function (a) {
    if ((this._usingPercentWidth = a)) this._usingStretchWidth = !1;
  },
  getSizeWidth: function () {
    return this._owner.width;
  },
  setSizeWidth: function (a) {
    var b = this._owner.getContentSize();
    b.width = a;
    a = this._getOwnerParent();
    null !== a
      ? ((a = a.getContentSize()),
        0 !== a.width
          ? (this._percentWidth = b.width / a.width)
          : ((this._percentWidth = 0),
            this._usingPercentWidth && (b.width = 0)),
        this._owner.setContentSize(b),
        this._refreshHorizontalMargin())
      : this._owner.setContentSize(b);
  },
  getPercentWidth: function () {
    return this._percentWidth;
  },
  setPercentWidth: function (a) {
    this._percentWidth = a;
    a = this._getOwnerParent();
    if (null !== a) {
      var b = this._owner.getContentSize();
      b.width = a.width * this._percentWidth;
      this._owner.setContentSize(b);
      this._refreshHorizontalMargin();
    }
  },
  isPercentHeightEnabled: function () {
    return this._usingPercentHeight;
  },
  setPercentHeightEnabled: function (a) {
    if ((this._usingPercentHeight = a)) this._usingStretchHeight = !1;
  },
  getSizeHeight: function () {
    return this._owner.height;
  },
  setSizeHeight: function (a) {
    var b = this._owner.getContentSize();
    b.height = a;
    a = this._getOwnerParent();
    null !== a
      ? ((a = a.getContentSize()),
        0 !== a.height
          ? (this._percentHeight = b.height / a.height)
          : ((this._percentHeight = 0),
            this._usingPercentHeight && (b.height = 0)),
        this._owner.setContentSize(b),
        this._refreshVerticalMargin())
      : this._owner.setContentSize(b);
  },
  getPercentHeight: function () {
    return this._percentHeight;
  },
  setPercentHeight: function (a) {
    this._percentHeight = a;
    a = this._getOwnerParent();
    if (null !== a) {
      var b = this._owner.getContentSize();
      b.height = a.height * this._percentHeight;
      this._owner.setContentSize(b);
      this._refreshVerticalMargin();
    }
  },
  isStretchWidthEnabled: function () {
    return this._usingStretchWidth;
  },
  setStretchWidthEnabled: function (a) {
    if ((this._usingStretchWidth = a)) this._usingPercentWidth = !1;
  },
  isStretchHeightEnabled: function () {
    return this._usingStretchHeight;
  },
  setStretchHeightEnabled: function (a) {
    if ((this._usingStretchHeight = a)) this._usingPercentHeight = !1;
  },
  setPercentOnlyEnabled: function (a) {
    this._isPercentOnly = a;
  },
  setActiveEnabled: function (a) {
    this._actived = a;
  },
  refreshLayout: function () {
    if (this._actived) {
      var a = this._getOwnerParent();
      if (null !== a) {
        var a = a.getContentSize(),
          b = this._owner,
          d = b.getAnchorPoint(),
          e = b.getContentSize(),
          f = b.getPosition();
        switch (this._horizontalEdge) {
          case ccui.LayoutComponent.horizontalEdge.NONE:
            this._usingStretchWidth && !this._isPercentOnly
              ? ((e.width = a.width * this._percentWidth),
                (f.x = this._leftMargin + d.x * e.width))
              : (this._usingPositionPercentX &&
                  (f.x = a.width * this._positionPercentX),
                this._usingPercentWidth &&
                  (e.width = a.width * this._percentWidth));
            break;
          case ccui.LayoutComponent.horizontalEdge.LEFT:
            if (this._isPercentOnly) break;
            if (this._usingPercentWidth || this._usingStretchWidth)
              e.width = a.width * this._percentWidth;
            f.x = this._leftMargin + d.x * e.width;
            break;
          case ccui.LayoutComponent.horizontalEdge.RIGHT:
            if (this._isPercentOnly) break;
            if (this._usingPercentWidth || this._usingStretchWidth)
              e.width = a.width * this._percentWidth;
            f.x = a.width - (this._rightMargin + (1 - d.x) * e.width);
            break;
          case ccui.LayoutComponent.horizontalEdge.CENTER:
            if (this._isPercentOnly) break;
            this._usingStretchWidth
              ? ((e.width = a.width - this._leftMargin - this._rightMargin),
                0 > e.width && (e.width = 0),
                (f.x = this._leftMargin + d.x * e.width))
              : (this._usingPercentWidth &&
                  (e.width = a.width * this._percentWidth),
                (f.x = a.width * this._positionPercentX));
        }
        switch (this._verticalEdge) {
          case ccui.LayoutComponent.verticalEdge.NONE:
            this._usingStretchHeight && !this._isPercentOnly
              ? ((e.height = a.height * this._percentHeight),
                (f.y = this._bottomMargin + d.y * e.height))
              : (this._usingPositionPercentY &&
                  (f.y = a.height * this._positionPercentY),
                this._usingPercentHeight &&
                  (e.height = a.height * this._percentHeight));
            break;
          case ccui.LayoutComponent.verticalEdge.BOTTOM:
            if (this._isPercentOnly) break;
            if (this._usingPercentHeight || this._usingStretchHeight)
              e.height = a.height * this._percentHeight;
            f.y = this._bottomMargin + d.y * e.height;
            break;
          case ccui.LayoutComponent.verticalEdge.TOP:
            if (this._isPercentOnly) break;
            if (this._usingPercentHeight || this._usingStretchHeight)
              e.height = a.height * this._percentHeight;
            f.y = a.height - (this._topMargin + (1 - d.y) * e.height);
            break;
          case ccui.LayoutComponent.verticalEdge.CENTER:
            if (this._isPercentOnly) break;
            this._usingStretchHeight
              ? ((e.height = a.height - this._topMargin - this._bottomMargin),
                0 > e.height && (e.height = 0),
                (f.y = this._bottomMargin + d.y * e.height))
              : (this._usingPercentHeight &&
                  (e.height = a.height * this._percentHeight),
                (f.y = a.height * this._positionPercentY));
        }
        b.setPosition(f);
        b.setContentSize(e);
        if (b instanceof ccui.PageView)
          for (b.forceDoLayout(), a = b.getPages(), b = 0; b < a.length; b++)
            ccui.helper.doLayout(a[b]);
        else ccui.helper.doLayout(b);
      }
    }
  },
  _getOwnerParent: function () {
    return this._owner ? this._owner.getParent() : null;
  },
  _refreshHorizontalMargin: function () {
    var a = this._getOwnerParent();
    if (null !== a) {
      var b = this._owner.getPosition(),
        d = this._owner.getAnchorPoint(),
        e = this._owner.getContentSize(),
        a = a.getContentSize();
      this._leftMargin = b.x - d.x * e.width;
      this._rightMargin = a.width - (b.x + (1 - d.x) * e.width);
    }
  },
  _refreshVerticalMargin: function () {
    var a = this._getOwnerParent();
    if (null !== a) {
      var b = this._owner.getPosition(),
        d = this._owner.getAnchorPoint(),
        e = this._owner.getContentSize(),
        a = a.getContentSize();
      this._bottomMargin = b.y - d.y * e.height;
      this._topMargin = a.height - (b.y + (1 - d.y) * e.height);
    }
  },
});
ccui.LayoutComponent.horizontalEdge = { NONE: 0, LEFT: 1, RIGHT: 2, CENTER: 3 };
ccui.LayoutComponent.verticalEdge = { NONE: 0, BOTTOM: 1, TOP: 2, CENTER: 3 };
ccui.LayoutComponent.NAME = "__ui_layout";
ccui.LayoutComponent.bindLayoutComponent = function (a) {
  var b = a.getComponent(ccui.LayoutComponent.NAME);
  if (void 0 !== b) return b;
  b = new ccui.LayoutComponent();
  b.init();
  a.addComponent(b);
  a instanceof ccui.Widget ||
    (a.addEventListener &&
      a.addEventListener(
        "load",
        function () {
          b.refreshLayout();
        },
        this
      ));
  return b;
};
var ccs = ccs || {};
ccs.Class = ccs.Class || cc.Class;
ccs.Class.extend = ccs.Class.extend || cc.Class.extend;
ccs.Node = ccs.Node || cc.Node;
ccs.Node.extend = ccs.Node.extend || cc.Node.extend;
ccs.Sprite = ccs.Sprite || cc.Sprite;
ccs.Sprite.extend = ccs.Sprite.extend || cc.Sprite.extend;
ccs.Component = ccs.Component || cc.Component;
ccs.Component.extend = ccs.Component.extend || cc.Component.extend;
ccs.cocostudioVersion = "v1.3.0.0";
ccs.VERSION_COMBINED = 0.3;
ccs.VERSION_CHANGE_ROTATION_RANGE = 1;
ccs.VERSION_COLOR_READING = 1.1;
ccs.MAX_VERTEXZ_VALUE = 5e6;
ccs.ARMATURE_MAX_CHILD = 50;
ccs.ARMATURE_MAX_ZORDER = 100;
ccs.ARMATURE_MAX_COUNT =
  ccs.MAX_VERTEXZ_VALUE / ccs.ARMATURE_MAX_CHILD / ccs.ARMATURE_MAX_ZORDER;
ccs.AUTO_ADD_SPRITE_FRAME_NAME_PREFIX = !1;
ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT = !1;
ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX = !1;
ccs.armatureVersion = function () {
  return "v1.1.0.0";
};
ccs.CONST_VERSION = "version";
ccs.CONST_VERSION_2_0 = 2;
ccs.CONST_VERSION_COMBINED = 0.3;
ccs.CONST_ARMATURES = "armatures";
ccs.CONST_ARMATURE = "armature";
ccs.CONST_BONE = "b";
ccs.CONST_DISPLAY = "d";
ccs.CONST_ANIMATIONS = "animations";
ccs.CONST_ANIMATION = "animation";
ccs.CONST_MOVEMENT = "mov";
ccs.CONST_FRAME = "f";
ccs.CONST_TEXTURE_ATLAS = "TextureAtlas";
ccs.CONST_SUB_TEXTURE = "SubTexture";
ccs.CONST_SKELETON = "skeleton";
ccs.CONST_A_NAME = "name";
ccs.CONST_A_DURATION = "dr";
ccs.CONST_A_FRAME_INDEX = "fi";
ccs.CONST_A_DURATION_TO = "to";
ccs.CONST_A_DURATION_TWEEN = "drTW";
ccs.CONST_A_LOOP = "lp";
ccs.CONST_A_MOVEMENT_SCALE = "sc";
ccs.CONST_A_MOVEMENT_DELAY = "dl";
ccs.CONST_A_DISPLAY_INDEX = "dI";
ccs.CONST_A_PLIST = "plist";
ccs.CONST_A_PARENT = "parent";
ccs.CONST_A_SKEW_X = "kX";
ccs.CONST_A_SKEW_Y = "kY";
ccs.CONST_A_SCALE_X = "cX";
ccs.CONST_A_SCALE_Y = "cY";
ccs.CONST_A_Z = "z";
ccs.CONST_A_EVENT = "evt";
ccs.CONST_A_SOUND = "sd";
ccs.CONST_A_SOUND_EFFECT = "sdE";
ccs.CONST_A_TWEEN_EASING = "twE";
ccs.CONST_A_EASING_PARAM = "twEP";
ccs.CONST_A_TWEEN_ROTATE = "twR";
ccs.CONST_A_IS_ARMATURE = "isArmature";
ccs.CONST_A_DISPLAY_TYPE = "displayType";
ccs.CONST_A_MOVEMENT = "mov";
ccs.CONST_A_X = "x";
ccs.CONST_A_Y = "y";
ccs.CONST_A_COCOS2DX_X = "cocos2d_x";
ccs.CONST_A_COCOS2DX_Y = "cocos2d_y";
ccs.CONST_A_WIDTH = "width";
ccs.CONST_A_HEIGHT = "height";
ccs.CONST_A_PIVOT_X = "pX";
ccs.CONST_A_PIVOT_Y = "pY";
ccs.CONST_A_COCOS2D_PIVOT_X = "cocos2d_pX";
ccs.CONST_A_COCOS2D_PIVOT_Y = "cocos2d_pY";
ccs.CONST_A_BLEND_TYPE = "bd";
ccs.CONST_A_BLEND_SRC = "bd_src";
ccs.CONST_A_BLEND_DST = "bd_dst";
ccs.CONST_A_ALPHA = "a";
ccs.CONST_A_RED = "r";
ccs.CONST_A_GREEN = "g";
ccs.CONST_A_BLUE = "b";
ccs.CONST_A_ALPHA_OFFSET = "aM";
ccs.CONST_A_RED_OFFSET = "rM";
ccs.CONST_A_GREEN_OFFSET = "gM";
ccs.CONST_A_BLUE_OFFSET = "bM";
ccs.CONST_A_COLOR_TRANSFORM = "colorTransform";
ccs.CONST_A_TWEEN_FRAME = "tweenFrame";
ccs.CONST_CONTOUR = "con";
ccs.CONST_CONTOUR_VERTEX = "con_vt";
ccs.CONST_FL_NAN = "NaN";
ccs.CONST_FRAME_DATA = "frame_data";
ccs.CONST_MOVEMENT_BONE_DATA = "mov_bone_data";
ccs.CONST_MOVEMENT_DATA = "mov_data";
ccs.CONST_ANIMATION_DATA = "animation_data";
ccs.CONST_DISPLAY_DATA = "display_data";
ccs.CONST_SKIN_DATA = "skin_data";
ccs.CONST_BONE_DATA = "bone_data";
ccs.CONST_ARMATURE_DATA = "armature_data";
ccs.CONST_CONTOUR_DATA = "contour_data";
ccs.CONST_TEXTURE_DATA = "texture_data";
ccs.CONST_VERTEX_POINT = "vertex";
ccs.CONST_COLOR_INFO = "color";
ccs.CONST_CONFIG_FILE_PATH = "config_file_path";
ccs.CONST_CONTENT_SCALE = "content_scale";
ccs.DataInfo = function () {
  this.asyncStruct = null;
  this.configFileQueue = [];
  this.contentScale = 1;
  this.baseFilePath = this.filename = "";
  this.cocoStudioVersion = this.flashToolVersion = 0;
};
ccs.dataReaderHelper = {
  ConfigType: { DragonBone_XML: 0, CocoStudio_JSON: 1, CocoStudio_Binary: 2 },
  _configFileList: [],
  _flashToolVersion: ccs.CONST_VERSION_2_0,
  _positionReadScale: 1,
  _asyncRefCount: 0,
  _asyncRefTotalCount: 0,
  _dataQueue: null,
  setPositionReadScale: function (a) {
    this._positionReadScale = a;
  },
  getPositionReadScale: function () {
    return this._positionReadScale;
  },
  addDataFromFile: function (a) {
    if (-1 === this._configFileList.indexOf(a)) {
      this._configFileList.push(a);
      var b = this._initBaseFilePath(a),
        d = cc.path.extname(a).toLowerCase(),
        e = new ccs.DataInfo();
      e.filename = a;
      e.basefilePath = b;
      ".xml" === d
        ? ccs.dataReaderHelper.addDataFromXML(a, e)
        : ".json" === d || ".exportjson" === d
        ? ccs.dataReaderHelper.addDataFromJson(a, e)
        : ".csb" === d && ccs.dataReaderHelper.addDataFromBinaryCache(a, e);
    }
  },
  addDataFromFileAsync: function (a, b, d, e, f) {
    if (-1 !== this._configFileList.indexOf(d))
      f &&
        e &&
        (0 === this._asyncRefTotalCount && 0 === this._asyncRefCount
          ? this._asyncCallBack(e, f, 1)
          : this._asyncCallBack(
              e,
              f,
              (this._asyncRefTotalCount - this._asyncRefCount) /
                this._asyncRefTotalCount
            ));
    else {
      this._asyncRefTotalCount++;
      this._asyncRefCount++;
      var g = this;
      cc.director.getScheduler().schedule(
        function () {
          g.addDataFromFile(d);
          g._asyncRefCount--;
          g._asyncCallBack(
            e,
            f,
            (g._asyncRefTotalCount - g._asyncRefCount) / g._asyncRefTotalCount
          );
        },
        this,
        0.1,
        !1,
        0,
        !1,
        "armatrueDataHelper"
      );
    }
  },
  removeConfigFile: function (a) {
    for (
      var b = this._configFileList, d = b.length, e = b[d], f = 0;
      f < d;
      f++
    )
      b[f] === a && (e = f);
    e !== b[d] && cc.arrayRemoveObject(b, a);
  },
  addDataFromCache: function (a, b) {
    if (a) {
      b.flashToolVersion = parseFloat(a.getAttribute(ccs.CONST_VERSION));
      var d = a.querySelectorAll(
          ccs.CONST_SKELETON +
            " \x3e " +
            ccs.CONST_ARMATURES +
            " \x3e  " +
            ccs.CONST_ARMATURE +
            ""
        ),
        e = ccs.armatureDataManager,
        f;
      for (f = 0; f < d.length; f++) {
        var g = this.decodeArmature(d[f], b);
        e.addArmatureData(g.name, g, b.filename);
      }
      d = a.querySelectorAll(
        ccs.CONST_SKELETON +
          " \x3e " +
          ccs.CONST_ANIMATIONS +
          " \x3e  " +
          ccs.CONST_ANIMATION +
          ""
      );
      for (f = 0; f < d.length; f++)
        (g = this.decodeAnimation(d[f], b)),
          e.addAnimationData(g.name, g, b.filename);
      d = a.querySelectorAll(
        ccs.CONST_SKELETON +
          " \x3e " +
          ccs.CONST_TEXTURE_ATLAS +
          " \x3e  " +
          ccs.CONST_SUB_TEXTURE +
          ""
      );
      for (f = 0; f < d.length; f++)
        (g = this.decodeTexture(d[f], b)),
          e.addTextureData(g.name, g, b.filename);
    } else cc.log("XML error  or  XML is empty.");
  },
  decodeArmature: function (a, b) {
    var d = new ccs.ArmatureData();
    d.init();
    d.name = a.getAttribute(ccs.CONST_A_NAME);
    for (
      var e = a.querySelectorAll(
          ccs.CONST_ARMATURE + " \x3e " + ccs.CONST_BONE
        ),
        f = 0;
      f < e.length;
      f++
    ) {
      var g = e[f],
        h = g.getAttribute(ccs.CONST_A_PARENT),
        k = null;
      if (h)
        for (
          var m = 0;
          m < e.length &&
          ((k = e[m]), h != e[m].getAttribute(ccs.CONST_A_NAME));
          m++
        );
      g = this.decodeBone(g, k, b);
      d.addBoneData(g);
    }
    return d;
  },
  decodeArmatureFromJSON: function (a, b) {
    var d = new ccs.ArmatureData();
    d.init();
    var e = a[ccs.CONST_A_NAME];
    e && (d.name = e);
    b.cocoStudioVersion = d.dataVersion = a[ccs.CONST_VERSION] || 0.1;
    for (var e = a[ccs.CONST_BONE_DATA], f = 0; f < e.length; f++) {
      var g = this.decodeBoneFromJson(e[f], b);
      d.addBoneData(g);
    }
    return d;
  },
  decodeBone: function (a, b, d) {
    b = new ccs.BoneData();
    b.init();
    b.name = a.getAttribute(ccs.CONST_A_NAME);
    b.parentName = a.getAttribute(ccs.CONST_A_PARENT) || "";
    b.zOrder = parseInt(a.getAttribute(ccs.CONST_A_Z)) || 0;
    a = a.querySelectorAll(ccs.CONST_BONE + " \x3e " + ccs.CONST_DISPLAY);
    for (var e = 0; e < a.length; e++) {
      var f = this.decodeBoneDisplay(a[e], d);
      b.addDisplayData(f);
    }
    return b;
  },
  decodeBoneFromJson: function (a, b) {
    var d = new ccs.BoneData();
    d.init();
    this.decodeNodeFromJson(d, a, b);
    d.name = a[ccs.CONST_A_NAME] || "";
    d.parentName = a[ccs.CONST_A_PARENT] || "";
    for (var e = a[ccs.CONST_DISPLAY_DATA] || [], f = 0; f < e.length; f++) {
      var g = this.decodeBoneDisplayFromJson(e[f], b);
      d.addDisplayData(g);
    }
    return d;
  },
  decodeBoneDisplay: function (a, b) {
    var d = null;
    1 === (parseFloat(a.getAttribute(ccs.CONST_A_IS_ARMATURE)) || 0)
      ? ((d = new ccs.ArmatureDisplayData()),
        (d.displayType = ccs.DISPLAY_TYPE_ARMATURE))
      : ((d = new ccs.SpriteDisplayData()),
        (d.displayType = ccs.DISPLAY_TYPE_SPRITE));
    var e = a.getAttribute(ccs.CONST_A_NAME) || "";
    e && (d.displayName = e);
    return d;
  },
  decodeBoneDisplayFromJson: function (a, b) {
    var d = a[ccs.CONST_A_DISPLAY_TYPE] || ccs.DISPLAY_TYPE_SPRITE,
      e = null;
    switch (d) {
      case ccs.DISPLAY_TYPE_SPRITE:
        var e = new ccs.SpriteDisplayData(),
          f = a[ccs.CONST_A_NAME];
        null != f && (e.displayName = f);
        if ((f = (a[ccs.CONST_SKIN_DATA] || [])[0])) {
          var g = e.skinData;
          g.x = f[ccs.CONST_A_X] * this._positionReadScale;
          g.y = f[ccs.CONST_A_Y] * this._positionReadScale;
          g.scaleX =
            null == f[ccs.CONST_A_SCALE_X] ? 1 : f[ccs.CONST_A_SCALE_X];
          g.scaleY =
            null == f[ccs.CONST_A_SCALE_Y] ? 1 : f[ccs.CONST_A_SCALE_Y];
          g.skewX = null == f[ccs.CONST_A_SKEW_X] ? 1 : f[ccs.CONST_A_SKEW_X];
          g.skewY = null == f[ccs.CONST_A_SKEW_Y] ? 1 : f[ccs.CONST_A_SKEW_Y];
          g.x *= b.contentScale;
          g.y *= b.contentScale;
        }
        break;
      case ccs.DISPLAY_TYPE_ARMATURE:
        e = new ccs.ArmatureDisplayData();
        f = a[ccs.CONST_A_NAME];
        null != f && (e.displayName = a[ccs.CONST_A_NAME]);
        break;
      case ccs.DISPLAY_TYPE_PARTICLE:
        e = new ccs.ParticleDisplayData();
        f = a[ccs.CONST_A_PLIST];
        null != f &&
          (e.displayName = b.asyncStruct
            ? b.asyncStruct.basefilePath + f
            : b.basefilePath + f);
        break;
      default:
        e = new ccs.SpriteDisplayData();
    }
    e.displayType = d;
    return e;
  },
  decodeAnimation: function (a, b) {
    var d = new ccs.AnimationData(),
      e = a.getAttribute(ccs.CONST_A_NAME),
      f = ccs.armatureDataManager.getArmatureData(e);
    d.name = e;
    for (
      var e = a.querySelectorAll(
          ccs.CONST_ANIMATION + " \x3e " + ccs.CONST_MOVEMENT
        ),
        g = null,
        h = 0;
      h < e.length;
      h++
    )
      (g = e[h]), (g = this.decodeMovement(g, f, b)), d.addMovement(g);
    return d;
  },
  decodeAnimationFromJson: function (a, b) {
    var d = new ccs.AnimationData();
    a[ccs.CONST_A_NAME] && (d.name = a[ccs.CONST_A_NAME]);
    for (var e = a[ccs.CONST_MOVEMENT_DATA] || [], f = 0; f < e.length; f++) {
      var g = this.decodeMovementFromJson(e[f], b);
      d.addMovement(g);
    }
    return d;
  },
  decodeMovement: function (a, b, d) {
    var e = new ccs.MovementData();
    e.name = a.getAttribute(ccs.CONST_A_NAME);
    var f;
    f = 0;
    f = a.getAttribute(ccs.CONST_A_DURATION);
    e.duration = null == f ? 0 : parseFloat(f);
    f = a.getAttribute(ccs.CONST_A_DURATION_TO);
    e.durationTo = null == f ? 0 : parseFloat(f);
    f = a.getAttribute(ccs.CONST_A_DURATION_TWEEN);
    e.durationTween = null == f ? 0 : parseFloat(f);
    f = a.getAttribute(ccs.CONST_A_LOOP);
    e.loop = f ? Boolean(parseFloat(f)) : !0;
    if ((f = a.getAttribute(ccs.CONST_A_TWEEN_EASING)))
      f != ccs.CONST_FL_NAN
        ? ((f = null == f ? 0 : parseFloat(f)),
          (e.tweenEasing = 2 === f ? ccs.TweenType.SINE_EASEINOUT : f))
        : (e.tweenEasing = ccs.TweenType.LINEAR);
    a = a.querySelectorAll(ccs.CONST_MOVEMENT + " \x3e " + ccs.CONST_BONE);
    var g = null;
    for (f = 0; f < a.length; f++) {
      var g = a[f],
        h = g.getAttribute(ccs.CONST_A_NAME);
      if (!e.getMovementBoneData(h)) {
        var h = b.getBoneData(h),
          k = h.parentName,
          m = null;
        if ("" !== k)
          for (
            var n = 0;
            n < a.length &&
            ((m = a[n]), k !== m.getAttribute(ccs.CONST_A_NAME));
            n++
          );
        g = this.decodeMovementBone(g, m, h, d);
        e.addMovementBoneData(g);
      }
    }
    return e;
  },
  decodeMovementFromJson: function (a, b) {
    var d = new ccs.MovementData();
    d.loop = null == a[ccs.CONST_A_LOOP] ? !1 : a[ccs.CONST_A_LOOP];
    d.durationTween = a[ccs.CONST_A_DURATION_TWEEN] || 0;
    d.durationTo = a[ccs.CONST_A_DURATION_TO] || 0;
    d.duration = a[ccs.CONST_A_DURATION] || 0;
    d.scale =
      null == a[ccs.CONST_A_DURATION]
        ? 1
        : null == a[ccs.CONST_A_MOVEMENT_SCALE]
        ? 1
        : a[ccs.CONST_A_MOVEMENT_SCALE];
    d.tweenEasing =
      null == a[ccs.CONST_A_TWEEN_EASING]
        ? ccs.TweenType.LINEAR
        : a[ccs.CONST_A_TWEEN_EASING];
    var e = a[ccs.CONST_A_NAME];
    e && (d.name = e);
    for (
      var e = a[ccs.CONST_MOVEMENT_BONE_DATA] || [], f = 0;
      f < e.length;
      f++
    ) {
      var g = this.decodeMovementBoneFromJson(e[f], b);
      d.addMovementBoneData(g);
    }
    return d;
  },
  decodeMovementBone: function (a, b, d, e) {
    var f = new ccs.MovementBoneData();
    f.init();
    var g;
    a &&
      ((g = parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_SCALE)) || 0),
      (f.scale = g),
      (g = parseFloat(a.getAttribute(ccs.CONST_A_MOVEMENT_DELAY)) || 0),
      0 < g && (g -= 1),
      (f.delay = g));
    var h = 0,
      k = (g = 0),
      m = null,
      n = [];
    if (null != b) {
      for (
        var p = b.querySelectorAll(ccs.CONST_BONE + " \x3e " + ccs.CONST_FRAME),
          h = 0;
        h < p.length;
        h++
      )
        n.push(p[h]);
      h = n.length;
    }
    f.name = a.getAttribute(ccs.CONST_A_NAME);
    a = a.querySelectorAll(ccs.CONST_BONE + " \x3e " + ccs.CONST_FRAME);
    for (var r = (p = 0), s = 0; s < a.length; s++) {
      var u = a[s];
      if (b)
        for (; p < h && (m ? r < g || r >= g + k : 1); )
          (m = n[p]),
            (g += k),
            (k = parseFloat(m.getAttribute(ccs.CONST_A_DURATION))),
            p++;
      u = this.decodeFrame(u, m, d, e);
      f.addFrameData(u);
      u.frameID = r;
      r += u.duration;
      f.duration = r;
    }
    b = f.frameList;
    d = Math.PI;
    for (h = b.length - 1; 0 <= h; h--)
      if (0 < h) {
        e = b[h].skewX - b[h - 1].skewX;
        g = b[h].skewY - b[h - 1].skewY;
        if (e < -d || e > d)
          b[h - 1].skewX =
            0 > e ? b[h - 1].skewX - 2 * d : b[h - 1].skewX + 2 * d;
        if (g < -d || g > d)
          b[h - 1].skewY =
            0 > g ? b[h - 1].skewY - 2 * d : b[h - 1].skewY + 2 * d;
      }
    b = new ccs.FrameData();
    b.copy(f.frameList[f.frameList.length - 1]);
    b.frameID = f.duration;
    f.addFrameData(b);
    return f;
  },
  decodeMovementBoneFromJson: function (a, b) {
    var d = new ccs.MovementBoneData();
    d.init();
    d.delay = a[ccs.CONST_A_MOVEMENT_DELAY] || 0;
    var e = a[ccs.CONST_A_NAME];
    e && (d.name = e);
    for (var f = (a[ccs.CONST_FRAME_DATA] || []).length, e = 0; e < f; e++) {
      var g = this.decodeFrameFromJson(a[ccs.CONST_FRAME_DATA][e], b);
      d.addFrameData(g);
      b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED &&
        ((g.frameID = d.duration), (d.duration += g.duration));
    }
    if (b.cocoStudioVersion < ccs.VERSION_CHANGE_ROTATION_RANGE)
      for (f = d.frameList, g = Math.PI, e = f.length - 1; 0 <= e; e--)
        if (0 < e) {
          var h = f[e].skewX - f[e - 1].skewX,
            k = f[e].skewY - f[e - 1].skewY;
          if (h < -g || h > g)
            f[e - 1].skewX =
              0 > h ? f[e - 1].skewX - 2 * g : f[e - 1].skewX + 2 * g;
          if (k < -g || k > g)
            f[e - 1].skewY =
              0 > k ? f[e - 1].skewY - 2 * g : f[e - 1].skewY + 2 * g;
        }
    b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED &&
      0 < d.frameList.length &&
      ((g = new ccs.FrameData()),
      g.copy(d.frameList[d.frameList.length - 1]),
      d.addFrameData(g),
      (g.frameID = d.duration));
    return d;
  },
  decodeFrame: function (a, b, d, e) {
    var f = 0,
      f = (f = f = f = f = f = f = f = f = f = f = 0);
    d = new ccs.FrameData();
    d.strMovement = a.getAttribute(ccs.CONST_A_MOVEMENT) || "";
    d.movement = d.strMovement;
    d.strEvent = a.getAttribute(ccs.CONST_A_EVENT) || "";
    d.event = d.strEvent;
    d.strSound = a.getAttribute(ccs.CONST_A_SOUND) || "";
    d.sound = d.strSound;
    d.strSoundEffect = a.getAttribute(ccs.CONST_A_SOUND_EFFECT) || "";
    d.soundEffect = d.strSoundEffect;
    f = a.getAttribute(ccs.CONST_A_TWEEN_FRAME);
    d.isTween = !(void 0 !== f && ("false" === f || "0" === f));
    if (e.flashToolVersion >= ccs.CONST_VERSION_2_0) {
      if ((f = a.getAttribute(ccs.CONST_A_COCOS2DX_X)))
        (d.x = parseFloat(f)), (d.x *= this._positionReadScale);
      f = a.getAttribute(ccs.CONST_A_COCOS2DX_Y);
    } else {
      if ((f = a.getAttribute(ccs.CONST_A_X)))
        (d.x = parseFloat(f)), (d.x *= this._positionReadScale);
      f = a.getAttribute(ccs.CONST_A_Y);
    }
    f && ((d.y = -parseFloat(f)), (d.y *= this._positionReadScale));
    f = a.getAttribute(ccs.CONST_A_SCALE_X);
    null != f && (d.scaleX = parseFloat(f));
    f = a.getAttribute(ccs.CONST_A_SCALE_Y);
    null != f && (d.scaleY = parseFloat(f));
    f = a.getAttribute(ccs.CONST_A_SKEW_X);
    null != f && (d.skewX = cc.degreesToRadians(parseFloat(f)));
    f = a.getAttribute(ccs.CONST_A_SKEW_Y);
    null != f && (d.skewY = cc.degreesToRadians(-parseFloat(f)));
    f = a.getAttribute(ccs.CONST_A_DURATION);
    null != f && (d.duration = parseFloat(f));
    f = a.getAttribute(ccs.CONST_A_DISPLAY_INDEX);
    null != f && (d.displayIndex = parseFloat(f));
    f = a.getAttribute(ccs.CONST_A_Z);
    null != f && (d.zOrder = parseInt(f));
    f = a.getAttribute(ccs.CONST_A_TWEEN_ROTATE);
    null != f && (d.tweenRotate = parseFloat(f));
    f = a.getAttribute(ccs.CONST_A_BLEND_TYPE);
    if (null != f) {
      var g = d.blendFunc;
      switch (f) {
        case ccs.BLEND_TYPE_NORMAL:
          g.src = cc.BLEND_SRC;
          g.dst = cc.BLEND_DST;
          break;
        case ccs.BLEND_TYPE_ADD:
          g.src = cc.SRC_ALPHA;
          g.dst = cc.ONE;
          break;
        case ccs.BLEND_TYPE_MULTIPLY:
          g.src = cc.DST_COLOR;
          g.dst = cc.ONE_MINUS_SRC_ALPHA;
          break;
        case ccs.BLEND_TYPE_SCREEN:
          g.src = cc.ONE;
          g.dst = cc.ONE_MINUS_DST_COLOR;
          break;
        default:
          (d.blendFunc.src = cc.BLEND_SRC), (d.blendFunc.dst = cc.BLEND_DST);
      }
    }
    var h = a.querySelectorAll(
      ccs.CONST_FRAME + " \x3e " + ccs.CONST_A_COLOR_TRANSFORM
    );
    if (h && 0 < h.length) {
      var h = h[0],
        k,
        m,
        n,
        p,
        r,
        f = parseFloat(h.getAttribute(ccs.CONST_A_ALPHA)) || 0,
        g = parseFloat(h.getAttribute(ccs.CONST_A_RED)) || 0;
      k = parseFloat(h.getAttribute(ccs.CONST_A_GREEN)) || 0;
      m = parseFloat(h.getAttribute(ccs.CONST_A_BLUE)) || 0;
      n = parseFloat(h.getAttribute(ccs.CONST_A_ALPHA_OFFSET)) || 0;
      p = parseFloat(h.getAttribute(ccs.CONST_A_RED_OFFSET)) || 0;
      r = parseFloat(h.getAttribute(ccs.CONST_A_GREEN_OFFSET)) || 0;
      h = parseFloat(h.getAttribute(ccs.CONST_A_BLUE_OFFSET)) || 0;
      d.a = 2.55 * n + f;
      d.r = 2.55 * p + g;
      d.g = 2.55 * r + k;
      d.b = 2.55 * h + m;
      d.isUseColorInfo = !0;
    }
    f = a.getAttribute(ccs.CONST_A_TWEEN_EASING);
    null != f &&
      (f != ccs.CONST_FL_NAN
        ? (f = a.getAttribute(ccs.CONST_A_TWEEN_EASING)) &&
          (d.tweenEasing = 2 === f ? ccs.TweenType.SINE_EASEINOUT : f)
        : (d.tweenEasing = ccs.TweenType.LINEAR));
    b &&
      ((a = new ccs.BaseData()),
      e.flashToolVersion >= ccs.CONST_VERSION_2_0
        ? ((a.x = parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_X))),
          (a.y = parseFloat(b.getAttribute(ccs.CONST_A_COCOS2DX_Y))))
        : ((a.x = parseFloat(b.getAttribute(ccs.CONST_A_X))),
          (a.y = parseFloat(b.getAttribute(ccs.CONST_A_Y)))),
      (a.skewX = parseFloat(b.getAttribute(ccs.CONST_A_SKEW_X))),
      (a.skewY = parseFloat(b.getAttribute(ccs.CONST_A_SKEW_Y))),
      (a.y = -a.y),
      (a.skewX = cc.degreesToRadians(a.skewX)),
      (a.skewY = cc.degreesToRadians(-a.skewY)),
      ccs.TransformHelp.transformFromParent(d, a));
    return d;
  },
  decodeFrameFromJson: function (a, b) {
    var d = new ccs.FrameData();
    this.decodeNodeFromJson(d, a, b);
    d.tweenEasing = a[ccs.CONST_A_TWEEN_EASING] || ccs.TweenType.LINEAR;
    d.displayIndex = a[ccs.CONST_A_DISPLAY_INDEX];
    var e =
      null == a[ccs.CONST_A_BLEND_DST]
        ? cc.BLEND_DST
        : a[ccs.CONST_A_BLEND_DST];
    d.blendFunc.src =
      null == a[ccs.CONST_A_BLEND_SRC]
        ? cc.BLEND_SRC
        : a[ccs.CONST_A_BLEND_SRC];
    d.blendFunc.dst = e;
    d.isTween =
      null == a[ccs.CONST_A_TWEEN_FRAME] ? !0 : a[ccs.CONST_A_TWEEN_FRAME];
    e = a[ccs.CONST_A_EVENT];
    null != e && ((d.strEvent = e), (d.event = e));
    b.cocoStudioVersion < ccs.CONST_VERSION_COMBINED
      ? (d.duration =
          null == a[ccs.CONST_A_DURATION] ? 1 : a[ccs.CONST_A_DURATION])
      : (d.frameID = a[ccs.CONST_A_FRAME_INDEX]);
    for (var e = a[ccs.CONST_A_EASING_PARAM] || [], f = 0; f < e.length; f++)
      d.easingParams[f] = e[f];
    return d;
  },
  decodeTexture: function (a, b) {
    var d = new ccs.TextureData();
    d.init();
    a.getAttribute(ccs.CONST_A_NAME) &&
      (d.name = a.getAttribute(ccs.CONST_A_NAME));
    var e, f;
    b.flashToolVersion >= ccs.CONST_VERSION_2_0
      ? ((e = parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_X)) || 0),
        (f = parseFloat(a.getAttribute(ccs.CONST_A_COCOS2D_PIVOT_Y)) || 0))
      : ((e = parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_X)) || 0),
        (f = parseFloat(a.getAttribute(ccs.CONST_A_PIVOT_Y)) || 0));
    var g = parseFloat(a.getAttribute(ccs.CONST_A_WIDTH)) || 0,
      h = parseFloat(a.getAttribute(ccs.CONST_A_HEIGHT)) || 0;
    d.pivotX = e / g;
    d.pivotY = (h - f) / h;
    e = a.querySelectorAll(
      ccs.CONST_SUB_TEXTURE + " \x3e " + ccs.CONST_CONTOUR
    );
    for (f = 0; f < e.length; f++)
      d.addContourData(this.decodeContour(e[f], b));
    return d;
  },
  decodeTextureFromJson: function (a) {
    var b = new ccs.TextureData();
    b.init();
    var d = a[ccs.CONST_A_NAME];
    null != d && (b.name = d);
    b.width = a[ccs.CONST_A_WIDTH] || 0;
    b.height = a[ccs.CONST_A_HEIGHT] || 0;
    b.pivotX = a[ccs.CONST_A_PIVOT_X] || 0;
    b.pivotY = a[ccs.CONST_A_PIVOT_Y] || 0;
    a = a[ccs.CONST_CONTOUR_DATA] || [];
    for (d = 0; d < a.length; d++)
      b.contourDataList.push(this.decodeContourFromJson(a[d]));
    return b;
  },
  decodeContour: function (a, b) {
    var d = new ccs.ContourData();
    d.init();
    for (
      var e = a.querySelectorAll(
          ccs.CONST_CONTOUR + " \x3e " + ccs.CONST_CONTOUR_VERTEX
        ),
        f,
        g = 0;
      g < e.length;
      g++
    ) {
      f = e[g];
      var h = cc.p(0, 0);
      h.x = parseFloat(f.getAttribute(ccs.CONST_A_X)) || 0;
      h.y = parseFloat(f.getAttribute(ccs.CONST_A_Y)) || 0;
      h.y = -h.y;
      d.vertexList.push(h);
    }
    return d;
  },
  decodeContourFromJson: function (a) {
    var b = new ccs.ContourData();
    b.init();
    a = a[ccs.CONST_VERTEX_POINT] || [];
    for (var d = a.length, e = 0; e < d; e++) {
      var f = a[e],
        g = cc.p(0, 0);
      g.x = f[ccs.CONST_A_X] || 0;
      g.y = f[ccs.CONST_A_Y] || 0;
      b.vertexList.push(g);
    }
    return b;
  },
  addDataFromJsonCache: function (a, b) {
    b.contentScale =
      null == a[ccs.CONST_CONTENT_SCALE] ? 1 : a[ccs.CONST_CONTENT_SCALE];
    var d = a[ccs.CONST_ARMATURE_DATA] || [],
      e,
      f;
    for (e = 0; e < d.length; e++)
      (f = this.decodeArmatureFromJSON(d[e], b)),
        ccs.armatureDataManager.addArmatureData(f.name, f, b.filename);
    d = a[ccs.CONST_ANIMATION_DATA] || [];
    for (e = 0; e < d.length; e++)
      (f = this.decodeAnimationFromJson(d[e], b)),
        ccs.armatureDataManager.addAnimationData(f.name, f, b.filename);
    d = a[ccs.CONST_TEXTURE_DATA] || [];
    for (e = 0; e < d.length; e++)
      (f = this.decodeTextureFromJson(d[e], b)),
        ccs.armatureDataManager.addTextureData(f.name, f, b.filename);
    if (
      null == b.asyncStruct
        ? ccs.armatureDataManager.isAutoLoadSpriteFile()
        : b.asyncStruct.autoLoadSpriteFile
    ) {
      var d = a[ccs.CONST_CONFIG_FILE_PATH] || [],
        g;
      for (e = 0; e < d.length; e++)
        (f = d[e]),
          (g = f.lastIndexOf(".")),
          (f = f.substring(0, g)),
          (g = b.basefilePath + f + ".plist"),
          (f = b.basefilePath + f + ".png"),
          ccs.armatureDataManager.addSpriteFrameFromFile(g, f, b.filename);
    }
  },
  decodeNodeFromJson: function (a, b, d) {
    a.x = b[ccs.CONST_A_X] * this._positionReadScale;
    a.y = b[ccs.CONST_A_Y] * this._positionReadScale;
    a.x *= d.contentScale;
    a.y *= d.contentScale;
    a.zOrder = b[ccs.CONST_A_Z];
    a.skewX = b[ccs.CONST_A_SKEW_X] || 0;
    a.skewY = b[ccs.CONST_A_SKEW_Y] || 0;
    a.scaleX = null == b[ccs.CONST_A_SCALE_X] ? 1 : b[ccs.CONST_A_SCALE_X];
    a.scaleY = null == b[ccs.CONST_A_SCALE_Y] ? 1 : b[ccs.CONST_A_SCALE_Y];
    if (
      (b =
        d.cocoStudioVersion < ccs.VERSION_COLOR_READING
          ? b[0]
          : b[ccs.CONST_COLOR_INFO] || null)
    )
      (a.a = null == b[ccs.CONST_A_ALPHA] ? 255 : b[ccs.CONST_A_ALPHA]),
        (a.r = null == b[ccs.CONST_A_RED] ? 255 : b[ccs.CONST_A_RED]),
        (a.g = null == b[ccs.CONST_A_GREEN] ? 255 : b[ccs.CONST_A_GREEN]),
        (a.b = null == b[ccs.CONST_A_BLUE] ? 255 : b[ccs.CONST_A_BLUE]),
        (a.isUseColorInfo = !0);
  },
  clear: function () {
    this._configFileList = [];
    this._asyncRefTotalCount = this._asyncRefCount = 0;
  },
  _asyncCallBack: function (a, b, d) {
    a && cc.isFunction(a) && a.call(b, d);
    if (b && a && "string" === typeof a) b[a](d);
  },
  _initBaseFilePath: function (a) {
    var b = a.lastIndexOf("/");
    return (a = -1 < b ? a.substr(0, b + 1) : "");
  },
  addDataFromXML: function (a, b) {
    var d = cc.loader.getRes(a);
    if (!d) throw Error("Please load the resource first : " + a);
    (d = cc.saxParser.parse(d).documentElement) && this.addDataFromCache(d, b);
  },
  addDataFromJson: function (a, b) {
    var d = cc.loader.getRes(a);
    this.addDataFromJsonCache(d, b);
  },
};
ccs.spriteFrameCacheHelper = {
  _textureAtlasDic: {},
  _imagePaths: [],
  addSpriteFrameFromFile: function (a, b) {
    cc.spriteFrameCache.addSpriteFrames(a, b);
  },
  getTextureAtlasWithTexture: function (a) {
    return null;
  },
  clear: function () {
    this._textureAtlasDic = {};
    this._imagePaths = [];
  },
};
ccs.TransformHelp = ccs.TransformHelp || ccs.Class.extend({});
ccs.TransformHelp.helpMatrix1 = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
ccs.TransformHelp.helpMatrix2 = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
ccs.TransformHelp.helpPoint1 = cc.p(0, 0);
ccs.TransformHelp.helpPoint2 = cc.p(0, 0);
ccs.TransformHelp.helpParentNode = {};
ccs.TransformHelp.transformFromParent = function (a, b) {
  this.nodeToMatrix(a, this.helpMatrix1);
  this.nodeToMatrix(b, this.helpMatrix2);
  this.helpMatrix2 = cc.affineTransformInvert(this.helpMatrix2);
  this.helpMatrix1 = cc.affineTransformConcat(
    this.helpMatrix1,
    this.helpMatrix2
  );
  this.matrixToNode(this.helpMatrix1, a);
};
ccs.TransformHelp.transformToParent = function (a, b) {
  this.nodeToMatrix(a, this.helpMatrix1);
  this.nodeToMatrix(b, this.helpMatrix2);
  this.helpMatrix1 = cc.affineTransformConcat(
    this.helpMatrix1,
    this.helpMatrix2
  );
  this.matrixToNode(this.helpMatrix1, a);
};
ccs.TransformHelp.transformFromParentWithoutScale = function (a, b) {
  for (var d in b) this.helpParentNode[d] = b[d];
  this.helpParentNode.scaleX = 1;
  this.helpParentNode.scaleY = 1;
  this.nodeToMatrix(a, this.helpMatrix1);
  this.nodeToMatrix(this.helpParentNode, this.helpMatrix2);
  this.helpMatrix2 = cc.affineTransformInvert(this.helpMatrix2);
  this.helpMatrix1 = cc.affineTransformConcat(
    this.helpMatrix1,
    this.helpMatrix2
  );
  this.matrixToNode(this.helpMatrix1, a);
};
ccs.TransformHelp.transformToParentWithoutScale = function (a, b) {
  for (var d in b) this.helpParentNode[d] = b[d];
  this.helpParentNode.scaleX = 1;
  this.helpParentNode.scaleY = 1;
  this.nodeToMatrix(a, this.helpMatrix1);
  this.nodeToMatrix(this.helpParentNode, this.helpMatrix2);
  this.helpMatrix1 = cc.affineTransformConcat(
    this.helpMatrix1,
    this.helpMatrix2
  );
  this.matrixToNode(this.helpMatrix1, a);
};
ccs.TransformHelp.nodeToMatrix = function (a, b) {
  if (a.skewX === -a.skewY) {
    var d = Math.sin(a.skewX),
      e = Math.cos(a.skewX);
    b.a = a.scaleX * e;
    b.b = a.scaleX * -d;
    b.c = a.scaleY * d;
    b.d = a.scaleY * e;
  } else
    (b.a = a.scaleX * Math.cos(a.skewY)),
      (b.b = a.scaleX * Math.sin(a.skewY)),
      (b.c = a.scaleY * Math.sin(a.skewX)),
      (b.d = a.scaleY * Math.cos(a.skewX));
  b.tx = a.x;
  b.ty = a.y;
};
ccs.TransformHelp.matrixToNode = function (a, b) {
  this.helpPoint1.x = 0;
  this.helpPoint1.y = 1;
  this.helpPoint1 = cc.pointApplyAffineTransform(this.helpPoint1, a);
  this.helpPoint1.x -= a.tx;
  this.helpPoint1.y -= a.ty;
  this.helpPoint2.x = 1;
  this.helpPoint2.y = 0;
  this.helpPoint2 = cc.pointApplyAffineTransform(this.helpPoint2, a);
  this.helpPoint2.x -= a.tx;
  this.helpPoint2.y -= a.ty;
  b.skewX = -(Math.atan2(this.helpPoint1.y, this.helpPoint1.x) - 1.5707964);
  b.skewY = Math.atan2(this.helpPoint2.y, this.helpPoint2.x);
  b.scaleX = Math.sqrt(a.a * a.a + a.b * a.b);
  b.scaleY = Math.sqrt(a.c * a.c + a.d * a.d);
  b.x = a.tx;
  b.y = a.ty;
};
ccs.TransformHelp.nodeConcat = function (a, b) {
  a.x += b.x;
  a.y += b.y;
  a.skewX += b.skewX;
  a.skewY += b.skewY;
  a.scaleX += b.scaleX;
  a.scaleY += b.scaleY;
};
ccs.TransformHelp.nodeSub = function (a, b) {
  a.x -= b.x;
  a.y -= b.y;
  a.skewX -= b.skewX;
  a.skewY -= b.skewY;
  a.scaleX -= b.scaleX;
  a.scaleY -= b.scaleY;
};
ccs.TweenType = {
  CUSTOM_EASING: -1,
  LINEAR: 0,
  SINE_EASEIN: 1,
  SINE_EASEOUT: 2,
  SINE_EASEINOUT: 3,
  QUAD_EASEIN: 4,
  QUAD_EASEOUT: 5,
  QUAD_EASEINOUT: 6,
  CUBIC_EASEIN: 7,
  CUBIC_EASEOUT: 8,
  CUBIC_EASEINOUT: 9,
  QUART_EASEIN: 10,
  QUART_EASEOUT: 11,
  QUART_EASEINOUT: 12,
  QUINT_EASEIN: 13,
  QUINT_EASEOUT: 14,
  QUINT_EASEINOUT: 15,
  EXPO_EASEIN: 16,
  EXPO_EASEOUT: 17,
  EXPO_EASEINOUT: 18,
  CIRC_EASEIN: 19,
  CIRC_EASEOUT: 20,
  CIRC_EASEINOUT: 21,
  ELASTIC_EASEIN: 22,
  ELASTIC_EASEOUT: 23,
  ELASTIC_EASEINOUT: 24,
  BACK_EASEIN: 25,
  BACK_EASEOUT: 26,
  BACK_EASEINOUT: 27,
  BOUNCE_EASEIN: 28,
  BOUNCE_EASEOUT: 29,
  BOUNCE_EASEINOUT: 30,
  TWEEN_EASING_MAX: 1e4,
};
ccs.TweenFunction = ccs.TweenFunction || ccs.Class.extend({});
ccs.DOUBLE_PI = ccs.M_PI_X_2 = 2 * Math.PI;
ccs.HALF_PI = ccs.M_PI_2 = Math.PI / 2;
ccs.M_PI = Math.PI;
ccs.TweenFunction.tweenTo = function (a, b, d) {
  var e = 0;
  switch (b) {
    case ccs.TweenType.CUSTOM_EASING:
      e = this.customEase(a, d);
      break;
    case ccs.TweenType.LINEAR:
      e = this.linear(a);
      break;
    case ccs.TweenType.SINE_EASEIN:
      e = this.sineEaseIn(a);
      break;
    case ccs.TweenType.SINE_EASEOUT:
      e = this.sineEaseOut(a);
      break;
    case ccs.TweenType.SINE_EASEINOUT:
      e = this.sineEaseInOut(a);
      break;
    case ccs.TweenType.QUAD_EASEIN:
      e = this.quadEaseIn(a);
      break;
    case ccs.TweenType.QUAD_EASEOUT:
      e = this.quadEaseOut(a);
      break;
    case ccs.TweenType.QUAD_EASEINOUT:
      e = this.quadEaseInOut(a);
      break;
    case ccs.TweenType.CUBIC_EASEIN:
      e = this.cubicEaseIn(a);
      break;
    case ccs.TweenType.CUBIC_EASEOUT:
      e = this.cubicEaseOut(a);
      break;
    case ccs.TweenType.CUBIC_EASEINOUT:
      e = this.cubicEaseInOut(a);
      break;
    case ccs.TweenType.QUART_EASEIN:
      e = this.quartEaseIn(a);
      break;
    case ccs.TweenType.QUART_EASEOUT:
      e = this.quartEaseOut(a);
      break;
    case ccs.TweenType.QUART_EASEINOUT:
      e = this.quartEaseInOut(a);
      break;
    case ccs.TweenType.QUINT_EASEIN:
      e = this.quintEaseIn(a);
      break;
    case ccs.TweenType.QUINT_EASEOUT:
      e = this.quintEaseOut(a);
      break;
    case ccs.TweenType.QUINT_EASEINOUT:
      e = this.quintEaseInOut(a);
      break;
    case ccs.TweenType.EXPO_EASEIN:
      e = this.expoEaseIn(a);
      break;
    case ccs.TweenType.EXPO_EASEOUT:
      e = this.expoEaseOut(a);
      break;
    case ccs.TweenType.EXPO_EASEINOUT:
      e = this.expoEaseInOut(a);
      break;
    case ccs.TweenType.CIRC_EASEIN:
      e = this.circEaseIn(a);
      break;
    case ccs.TweenType.CIRC_EASEOUT:
      e = this.circEaseOut(a);
      break;
    case ccs.TweenType.CIRC_EASEINOUT:
      e = this.circEaseInOut(a);
      break;
    case ccs.TweenType.ELASTIC_EASEIN:
      b = 0.3;
      null != d && 0 < d.length && (b = d[0]);
      e = this.elasticEaseIn(a, b);
      break;
    case ccs.TweenType.ELASTIC_EASEOUT:
      b = 0.3;
      null != d && 0 < d.length && (b = d[0]);
      e = this.elasticEaseOut(a, b);
      break;
    case ccs.TweenType.ELASTIC_EASEINOUT:
      b = 0.3;
      null != d && 0 < d.length && (b = d[0]);
      e = this.elasticEaseInOut(a, b);
      break;
    case ccs.TweenType.BACK_EASEIN:
      e = this.backEaseIn(a);
      break;
    case ccs.TweenType.BACK_EASEOUT:
      e = this.backEaseOut(a);
      break;
    case ccs.TweenType.BACK_EASEINOUT:
      e = this.backEaseInOut(a);
      break;
    case ccs.TweenType.BOUNCE_EASEIN:
      e = this.bounceEaseIn(a);
      break;
    case ccs.TweenType.BOUNCE_EASEOUT:
      e = this.bounceEaseOut(a);
      break;
    case ccs.TweenType.BOUNCE_EASEINOUT:
      e = this.bounceEaseInOut(a);
      break;
    default:
      e = this.sineEaseInOut(a);
  }
  return e;
};
ccs.TweenFunction.linear = function (a) {
  return a;
};
ccs.TweenFunction.sineEaseIn = function (a) {
  return -1 * Math.cos(a * ccs.HALF_PI) + 1;
};
ccs.TweenFunction.sineEaseOut = function (a) {
  return Math.sin(a * ccs.HALF_PI);
};
ccs.TweenFunction.sineEaseInOut = function (a) {
  return -0.5 * (Math.cos(ccs.M_PI * a) - 1);
};
ccs.TweenFunction.quadEaseIn = function (a) {
  return a * a;
};
ccs.TweenFunction.quadEaseOut = function (a) {
  return -1 * a * (a - 2);
};
ccs.TweenFunction.quadEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return 0.5 * a * a;
  --a;
  return -0.5 * (a * (a - 2) - 1);
};
ccs.TweenFunction.cubicEaseIn = function (a) {
  return a * a * a;
};
ccs.TweenFunction.cubicEaseOut = function (a) {
  a -= 1;
  return a * a * a + 1;
};
ccs.TweenFunction.cubicEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return 0.5 * a * a * a;
  a -= 2;
  return 0.5 * (a * a * a + 2);
};
ccs.TweenFunction.quartEaseIn = function (a) {
  return a * a * a * a;
};
ccs.TweenFunction.quartEaseOut = function (a) {
  a -= 1;
  return -(a * a * a * a - 1);
};
ccs.TweenFunction.quartEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return 0.5 * a * a * a * a;
  a -= 2;
  return -0.5 * (a * a * a * a - 2);
};
ccs.TweenFunction.quintEaseIn = function (a) {
  return a * a * a * a * a;
};
ccs.TweenFunction.quintEaseOut = function (a) {
  a -= 1;
  return a * a * a * a * a + 1;
};
ccs.TweenFunction.quintEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return 0.5 * a * a * a * a * a;
  a -= 2;
  return 0.5 * (a * a * a * a * a + 2);
};
ccs.TweenFunction.expoEaseIn = function (a) {
  return 0 === a ? 0 : Math.pow(2, 10 * (a - 1)) - 0.001;
};
ccs.TweenFunction.expoEaseOut = function (a) {
  return 1 === a ? 1 : -Math.pow(2, -10 * a) + 1;
};
ccs.TweenFunction.expoEaseInOut = function (a) {
  a /= 0.5;
  return (a =
    1 > a
      ? 0.5 * Math.pow(2, 10 * (a - 1))
      : 0.5 * (-Math.pow(2, -10 * (a - 1)) + 2));
};
ccs.TweenFunction.circEaseIn = function (a) {
  return -1 * (Math.sqrt(1 - a * a) - 1);
};
ccs.TweenFunction.circEaseOut = function (a) {
  a -= 1;
  return Math.sqrt(1 - a * a);
};
ccs.TweenFunction.circEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return -0.5 * (Math.sqrt(1 - a * a) - 1);
  a -= 2;
  return 0.5 * (Math.sqrt(1 - a * a) + 1);
};
ccs.TweenFunction.elasticEaseIn = function (a, b) {
  var d = 0.3;
  0 < b.length && (d = b[0]);
  var e = 0;
  0 === a || 1 === a
    ? (e = a)
    : ((e = d / 4),
      (a -= 1),
      (e = -Math.pow(2, 10 * a) * Math.sin(((a - e) * ccs.DOUBLE_PI) / d)));
  return e;
};
ccs.TweenFunction.elasticEaseOut = function (a, b) {
  var d = 0.3;
  0 < b.length && (d = b[0]);
  var e = 0;
  0 === a || 1 === a
    ? (e = a)
    : ((e = d / 4),
      (e = Math.pow(2, -10 * a) * Math.sin(((a - e) * ccs.DOUBLE_PI) / d) + 1));
  return e;
};
ccs.TweenFunction.elasticEaseInOut = function (a, b) {
  var d = 0.3;
  0 < b.length && (d = b[0]);
  var e = 0;
  0 === a || 1 === a
    ? (e = a)
    : (d || (d = 0.3 * 1.5),
      (e = d / 4),
      (a = 2 * a - 1),
      (e =
        0 > a
          ? -0.5 * Math.pow(2, 10 * a) * Math.sin(((a - e) * ccs.DOUBLE_PI) / d)
          : Math.pow(2, -10 * a) *
              Math.sin(((a - e) * ccs.DOUBLE_PI) / d) *
              0.5 +
            1));
  return e;
};
ccs.TweenFunction.backEaseIn = function (a) {
  return a * a * (2.70158 * a - 1.70158);
};
ccs.TweenFunction.backEaseOut = function (a) {
  a -= 1;
  return a * a * (2.70158 * a + 1.70158) + 1;
};
ccs.TweenFunction.backEaseInOut = function (a) {
  a *= 2;
  if (1 > a) return (a * a * (3.5949095 * a - 2.5949095)) / 2;
  a -= 2;
  return (a * a * (3.5949095 * a + 2.5949095)) / 2 + 1;
};
ccs.bounceTime = function (a) {
  if (a < 1 / 2.75) return 7.5625 * a * a;
  if (a < 2 / 2.75) return (a -= 1.5 / 2.75), 7.5625 * a * a + 0.75;
  if (a < 2.5 / 2.75) return (a -= 2.25 / 2.75), 7.5625 * a * a + 0.9375;
  a -= 2.625 / 2.75;
  return 7.5625 * a * a + 0.984375;
};
ccs.TweenFunction.bounceEaseIn = function (a) {
  return 1 - ccs.bounceTime(1 - a);
};
ccs.TweenFunction.bounceEaseOut = function (a) {
  return ccs.bounceTime(a);
};
ccs.TweenFunction.bounceEaseInOut = function (a) {
  var b = 0;
  return (b =
    0.5 > a
      ? 0.5 * (1 - ccs.bounceTime(1 - 2 * a))
      : 0.5 * ccs.bounceTime(2 * a - 1) + 0.5);
};
ccs.TweenFunction.customEase = function (a, b) {
  if (0 < b.length) {
    var d = 1 - a;
    return (
      b[1] * d * d * d +
      3 * b[3] * a * d * d +
      3 * b[5] * a * a * d +
      b[7] * a * a * a
    );
  }
  return a;
};
ccs.TweenFunction.easeIn = function (a, b) {
  return Math.pow(a, b);
};
ccs.TweenFunction.easeOut = function (a, b) {
  return Math.pow(a, 1 / b);
};
ccs.TweenFunction.easeInOut = function (a, b) {
  a *= 2;
  return 1 > a ? 0.5 * Math.pow(a, b) : 1 - 0.5 * Math.pow(2 - a, b);
};
ccs.TweenFunction.quadraticIn = function (a) {
  return Math.pow(a, 2);
};
ccs.TweenFunction.quadraticOut = function (a) {
  return -a * (a - 2);
};
ccs.TweenFunction.bezieratFunction = function (a, b, d, e, f) {
  return (
    Math.pow(1 - f, 3) * a +
    3 * f * Math.pow(1 - f, 2) * b +
    3 * Math.pow(f, 2) * (1 - f) * d +
    Math.pow(f, 3) * e
  );
};
var ENABLE_PHYSICS_DETECT = !1;
ccs.fmodf = function (a, b) {
  for (; a > b; ) a -= b;
  return a;
};
var CC_SAFE_RELEASE = function (a) {
  a && a.release && a.release();
};
ccs.isSpriteContainPoint = function (a, b, d) {
  b = a.convertToNodeSpace(b);
  d && ((d.x = b.x), (d.y = b.y));
  a = a.getContentSize();
  return cc.rectContainsPoint(cc.rect(0, 0, a.width, a.height), b);
};
ccs.SPRITE_CONTAIN_POINT = ccs.isSpriteContainPoint;
ccs.SPRITE_CONTAIN_POINT_WITH_RETURN = ccs.isSpriteContainPoint;
ccs.extBezierTo = function (a, b, d, e, f) {
  var g = cc.p(0, 0);
  e &&
    !f &&
    ((g.x =
      Math.pow(1 - a, 2) * b.x + 2 * a * (1 - a) * d.x + Math.pow(a, 2) * e.x),
    (g.y =
      Math.pow(1 - a, 2) * b.y + 2 * a * (1 - a) * d.y + Math.pow(a, 2) * e.y));
  f &&
    ((g.x =
      b.x * Math.pow(1 - a, 3) +
      3 * a * d.x * Math.pow(1 - a, 2) +
      3 * e.x * Math.pow(a, 2) * (1 - a) +
      f.x * Math.pow(a, 3)),
    (g.y =
      b.y * Math.pow(1 - a, 3) +
      3 * a * d.y * Math.pow(1 - a, 2) +
      3 * e.y * Math.pow(a, 2) * (1 - a) +
      f.y * Math.pow(a, 3)));
  return g;
};
ccs.extCircleTo = function (a, b, d, e, f) {
  var g = cc.p(0, 0);
  g.x = b.x + d * Math.cos(e + f * a);
  g.y = b.y + d * Math.sin(e + f * a);
  return g;
};
ccs.RelativeData = function () {
  this.plistFiles = [];
  this.armatures = [];
  this.animations = [];
  this.textures = [];
};
ccs.armatureDataManager = {
  _animationDatas: {},
  _armatureDatas: {},
  _textureDatas: {},
  _autoLoadSpriteFile: !1,
  _relativeDatas: {},
  s_sharedArmatureDataManager: null,
  removeArmatureFileInfo: function (a) {
    var b = this.getRelativeData(a);
    if (b) {
      var d, e;
      for (d = 0; d < b.armatures.length; d++)
        (e = b.armatures[d]), this.removeArmatureData(e);
      for (d = 0; d < b.animations.length; d++)
        (e = b.animations[d]), this.removeAnimationData(e);
      for (d = 0; d < b.textures.length; d++)
        (e = b.textures[d]), this.removeTextureData(e);
      for (d = 0; d < b.plistFiles.length; d++)
        (e = b.plistFiles[d]),
          cc.spriteFrameCache.removeSpriteFramesFromFile(e);
      delete this._relativeDatas[a];
      ccs.dataReaderHelper.removeConfigFile(a);
    }
  },
  addArmatureData: function (a, b, d) {
    (d = this.getRelativeData(d)) && d.armatures.push(a);
    this._armatureDatas[a] = b;
  },
  getArmatureData: function (a) {
    var b = null;
    this._armatureDatas && (b = this._armatureDatas[a]);
    return b;
  },
  removeArmatureData: function (a) {
    this._armatureDatas[a] && delete this._armatureDatas[a];
  },
  addAnimationData: function (a, b, d) {
    (d = this.getRelativeData(d)) && d.animations.push(a);
    this._animationDatas[a] = b;
  },
  getAnimationData: function (a) {
    var b = null;
    this._animationDatas[a] && (b = this._animationDatas[a]);
    return b;
  },
  removeAnimationData: function (a) {
    this._animationDatas[a] && delete this._animationDatas[a];
  },
  addTextureData: function (a, b, d) {
    (d = this.getRelativeData(d)) && d.textures.push(a);
    this._textureDatas[a] = b;
  },
  getTextureData: function (a) {
    var b = null;
    this._textureDatas && (b = this._textureDatas[a]);
    return b;
  },
  removeTextureData: function (a) {
    this._textureDatas[a] && delete this._textureDatas[a];
  },
  addArmatureFileInfo: function () {
    var a, b, d;
    switch (arguments.length) {
      case 1:
        d = arguments[0];
        this.addRelativeData(d);
        this._autoLoadSpriteFile = !0;
        ccs.dataReaderHelper.addDataFromFile(d);
        break;
      case 3:
        (a = arguments[0]),
          (b = arguments[1]),
          (d = arguments[2]),
          this.addRelativeData(d),
          (this._autoLoadSpriteFile = !1),
          ccs.dataReaderHelper.addDataFromFile(d),
          this.addSpriteFrameFromFile(b, a);
    }
  },
  addArmatureFileInfoAsync: function () {
    var a, b, d, e, f;
    switch (arguments.length) {
      case 3:
        d = arguments[0];
        e = arguments[2];
        f = arguments[1];
        this.addRelativeData(d);
        this._autoLoadSpriteFile = !0;
        ccs.dataReaderHelper.addDataFromFileAsync("", "", d, f, e);
        break;
      case 5:
        (a = arguments[0]),
          (b = arguments[1]),
          (d = arguments[2]),
          (e = arguments[4]),
          (f = arguments[3]),
          this.addRelativeData(d),
          (this._autoLoadSpriteFile = !1),
          ccs.dataReaderHelper.addDataFromFileAsync(a, b, d, f, e),
          this.addSpriteFrameFromFile(b, a);
    }
  },
  addSpriteFrameFromFile: function (a, b, d) {
    (d = this.getRelativeData(d)) && d.plistFiles.push(a);
    ccs.spriteFrameCacheHelper.addSpriteFrameFromFile(a, b);
  },
  isAutoLoadSpriteFile: function () {
    return this._autoLoadSpriteFile;
  },
  getArmatureDatas: function () {
    return this._armatureDatas;
  },
  getAnimationDatas: function () {
    return this._animationDatas;
  },
  getTextureDatas: function () {
    return this._textureDatas;
  },
  addRelativeData: function (a) {
    this._relativeDatas[a] || (this._relativeDatas[a] = new ccs.RelativeData());
  },
  getRelativeData: function (a) {
    return this._relativeDatas[a];
  },
  clear: function () {
    for (var a in this._relativeDatas) this.removeArmatureFileInfo(a);
    this._animationDatas = {};
    this._armatureDatas = {};
    this._textureDatas = {};
    this._relativeDatas = {};
    ccs.spriteFrameCacheHelper.clear();
    ccs.dataReaderHelper.clear();
  },
};
ccs.BLEND_TYPE_NORMAL = 0;
ccs.BLEND_TYPE_LAYER = 1;
ccs.BLEND_TYPE_DARKEN = 2;
ccs.BLEND_TYPE_MULTIPLY = 3;
ccs.BLEND_TYPE_LIGHTEN = 4;
ccs.BLEND_TYPE_SCREEN = 5;
ccs.BLEND_TYPE_OVERLAY = 6;
ccs.BLEND_TYPE_HIGHLIGHT = 7;
ccs.BLEND_TYPE_ADD = 8;
ccs.BLEND_TYPE_SUBTRACT = 9;
ccs.BLEND_TYPE_DIFFERENCE = 10;
ccs.BLEND_TYPE_INVERT = 11;
ccs.BLEND_TYPE_ALPHA = 12;
ccs.BLEND_TYPE_ERASE = 13;
ccs.DISPLAY_TYPE_SPRITE = 0;
ccs.DISPLAY_TYPE_ARMATURE = 1;
ccs.DISPLAY_TYPE_PARTICLE = 2;
ccs.DISPLAY_TYPE_MAX = 3;
ccs.BaseData = ccs.Class.extend({
  x: 0,
  y: 0,
  zOrder: 0,
  skewX: 0,
  skewY: 0,
  scaleX: 1,
  scaleY: 1,
  tweenRotate: 0,
  isUseColorInfo: !1,
  r: 255,
  g: 255,
  b: 255,
  a: 255,
  ctor: function () {
    this.skewY = this.skewX = this.zOrder = this.y = this.x = 0;
    this.scaleY = this.scaleX = 1;
    this.tweenRotate = 0;
    this.isUseColorInfo = !1;
    this.a = this.b = this.g = this.r = 255;
  },
  copy: function (a) {
    this.x = a.x;
    this.y = a.y;
    this.zOrder = a.zOrder;
    this.scaleX = a.scaleX;
    this.scaleY = a.scaleY;
    this.skewX = a.skewX;
    this.skewY = a.skewY;
    this.tweenRotate = a.tweenRotate;
    this.isUseColorInfo = a.isUseColorInfo;
    this.r = a.r;
    this.g = a.g;
    this.b = a.b;
    this.a = a.a;
  },
  setColor: function (a) {
    this.r = a.r;
    this.g = a.g;
    this.b = a.b;
    this.a = a.a;
  },
  getColor: function () {
    return cc.color(this.r, this.g, this.b, this.a);
  },
  subtract: function (a, b, d) {
    this.x = b.x - a.x;
    this.y = b.y - a.y;
    this.scaleX = b.scaleX - a.scaleX;
    this.scaleY = b.scaleY - a.scaleY;
    this.skewX = b.skewX - a.skewX;
    this.skewY = b.skewY - a.skewY;
    this.isUseColorInfo || a.isUseColorInfo || b.isUseColorInfo
      ? ((this.a = b.a - a.a),
        (this.r = b.r - a.r),
        (this.g = b.g - a.g),
        (this.b = b.b - a.b),
        (this.isUseColorInfo = !0))
      : ((this.a = this.r = this.g = this.b = 0), (this.isUseColorInfo = !1));
    d &&
      (this.skewX > ccs.M_PI && (this.skewX -= ccs.DOUBLE_PI),
      this.skewX < -ccs.M_PI && (this.skewX += ccs.DOUBLE_PI),
      this.skewY > ccs.M_PI && (this.skewY -= ccs.DOUBLE_PI),
      this.skewY < -ccs.M_PI && (this.skewY += ccs.DOUBLE_PI));
    b.tweenRotate &&
      ((this.skewX += b.tweenRotate * ccs.PI * 2),
      (this.skewY -= b.tweenRotate * ccs.PI * 2));
  },
});
ccs.DisplayData = ccs.Class.extend({
  displayType: ccs.DISPLAY_TYPE_MAX,
  displayName: "",
  ctor: function () {
    this.displayType = ccs.DISPLAY_TYPE_MAX;
  },
  changeDisplayToTexture: function (a) {
    var b = a.lastIndexOf(".");
    -1 !== b && (a = a.substring(0, b));
    return a;
  },
  copy: function (a) {
    this.displayName = a.displayName;
    this.displayType = a.displayType;
  },
});
ccs.SpriteDisplayData = ccs.DisplayData.extend({
  skinData: null,
  ctor: function () {
    this.skinData = new ccs.BaseData();
    this.displayType = ccs.DISPLAY_TYPE_SPRITE;
  },
  copy: function (a) {
    ccs.DisplayData.prototype.copy.call(this, a);
    this.skinData = a.skinData;
  },
});
ccs.ArmatureDisplayData = ccs.DisplayData.extend({
  ctor: function () {
    this.displayName = "";
    this.displayType = ccs.DISPLAY_TYPE_ARMATURE;
  },
});
ccs.ParticleDisplayData = ccs.DisplayData.extend({
  ctor: function () {
    this.displayType = ccs.DISPLAY_TYPE_PARTICLE;
  },
});
ccs.BoneData = ccs.BaseData.extend({
  displayDataList: null,
  name: "",
  parentName: "",
  boneDataTransform: null,
  ctor: function () {
    this.displayDataList = [];
    this.parentName = this.name = "";
    this.boneDataTransform = null;
  },
  init: function () {
    this.displayDataList.length = 0;
    return !0;
  },
  addDisplayData: function (a) {
    this.displayDataList.push(a);
  },
  getDisplayData: function (a) {
    return this.displayDataList[a];
  },
});
ccs.ArmatureData = ccs.Class.extend({
  boneDataDic: null,
  name: "",
  dataVersion: 0.1,
  ctor: function () {
    this.boneDataDic = {};
    this.name = "";
    this.dataVersion = 0.1;
  },
  init: function () {
    return !0;
  },
  addBoneData: function (a) {
    this.boneDataDic[a.name] = a;
  },
  getBoneDataDic: function () {
    return this.boneDataDic;
  },
  getBoneData: function (a) {
    return this.boneDataDic[a];
  },
});
ccs.FrameData = ccs.BaseData.extend({
  duration: 0,
  tweenEasing: 0,
  easingParamNumber: 0,
  easingParams: null,
  displayIndex: -1,
  movement: "",
  event: "",
  sound: "",
  soundEffect: "",
  blendFunc: null,
  frameID: 0,
  isTween: !0,
  ctor: function () {
    ccs.BaseData.prototype.ctor.call(this);
    this.duration = 1;
    this.tweenEasing = ccs.TweenType.LINEAR;
    this.easingParamNumber = 0;
    this.easingParams = [];
    this.displayIndex = 0;
    this.soundEffect = this.sound = this.event = this.movement = "";
    this.blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
    this.frameID = 0;
    this.isTween = !0;
  },
  copy: function (a) {
    ccs.BaseData.prototype.copy.call(this, a);
    this.duration = a.duration;
    this.displayIndex = a.displayIndex;
    this.tweenEasing = a.tweenEasing;
    this.easingParamNumber = a.easingParamNumber;
    if (0 !== this.easingParamNumber)
      for (
        var b = (this.easingParams.length = 0);
        b < this.easingParamNumber;
        b++
      )
        this.easingParams[b] = a.easingParams[b];
    this.blendFunc = a.blendFunc;
    this.isTween = a.isTween;
  },
});
ccs.MovementBoneData = ccs.Class.extend({
  delay: 0,
  scale: 1,
  duration: 0,
  frameList: null,
  name: "",
  ctor: function () {
    this.delay = 0;
    this.scale = 1;
    this.duration = 0;
    this.frameList = [];
    this.name = "";
  },
  init: function () {
    return !0;
  },
  addFrameData: function (a) {
    this.frameList.push(a);
  },
  getFrameData: function (a) {
    return this.frameList[a];
  },
});
ccs.MovementData = function () {
  this.name = "";
  this.duration = 0;
  this.scale = 1;
  this.durationTween = this.durationTo = 0;
  this.loop = !0;
  this.tweenEasing = ccs.TweenType.LINEAR;
  this.movBoneDataDic = {};
};
ccs.MovementData.prototype.addMovementBoneData = function (a) {
  this.movBoneDataDic[a.name] = a;
};
ccs.MovementData.prototype.getMovementBoneData = function (a) {
  return this.movBoneDataDic[a];
};
ccs.AnimationData = function () {
  this.movementDataDic = {};
  this.movementNames = [];
  this.name = "";
};
ccs.AnimationData.prototype.addMovement = function (a) {
  this.movementDataDic[a.name] = a;
  this.movementNames.push(a.name);
};
ccs.AnimationData.prototype.getMovement = function (a) {
  return this.movementDataDic[a];
};
ccs.AnimationData.prototype.getMovementCount = function () {
  return Object.keys(this.movementDataDic).length;
};
ccs.ContourVertex2 = function (a, b) {
  this.x = a || 0;
  this.y = b || 0;
};
ccs.ContourData = function () {
  this.vertexList = [];
};
ccs.ContourData.prototype.init = function () {
  this.vertexList.length = 0;
  return !0;
};
ccs.ContourData.prototype.addVertex = function (a) {
  this.vertexList.push(a);
};
ccs.TextureData = function () {
  this.width = this.height = 0;
  this.pivotY = this.pivotX = 0.5;
  this.name = "";
  this.contourDataList = [];
};
ccs.TextureData.prototype.init = function () {
  this.contourDataList.length = 0;
};
ccs.TextureData.prototype.addContourData = function (a) {
  this.contourDataList.push(a);
};
ccs.TextureData.prototype.getContourData = function (a) {
  return this.contourDataList[a];
};
ccs.DecorativeDisplay = ccs.Class.extend({
  _display: null,
  _colliderDetector: null,
  _displayData: null,
  ctor: function () {
    this._displayData = this._colliderDetector = this._display = null;
  },
  init: function () {
    return !0;
  },
  setDisplay: function (a) {
    a._parent && (a._parent.removeChild(a), delete a._parent);
    this._display = a;
  },
  getDisplay: function () {
    return this._display;
  },
  setColliderDetector: function (a) {
    this._colliderDetector = a;
  },
  getColliderDetector: function () {
    return this._colliderDetector;
  },
  setDisplayData: function (a) {
    this._displayData = a;
  },
  getDisplayData: function () {
    return this._displayData;
  },
  release: function () {
    this._colliderDetector = this._displayData = this._display = null;
  },
});
ccs.DecorativeDisplay.create = function () {
  return new ccs.DecorativeDisplay();
};
ccs.displayFactory = {
  addDisplay: function (a, b, d) {
    switch (d.displayType) {
      case ccs.DISPLAY_TYPE_SPRITE:
        this.addSpriteDisplay(a, b, d);
        break;
      case ccs.DISPLAY_TYPE_PARTICLE:
        this.addParticleDisplay(a, b, d);
        break;
      case ccs.DISPLAY_TYPE_ARMATURE:
        this.addArmatureDisplay(a, b, d);
    }
  },
  createDisplay: function (a, b) {
    switch (b.getDisplayData().displayType) {
      case ccs.DISPLAY_TYPE_SPRITE:
        this.createSpriteDisplay(a, b);
        break;
      case ccs.DISPLAY_TYPE_PARTICLE:
        this.createParticleDisplay(a, b);
        break;
      case ccs.DISPLAY_TYPE_ARMATURE:
        this.createArmatureDisplay(a, b);
    }
  },
  _helpTransform: { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 },
  updateDisplay: function (a, b, d) {
    var e = a.getDisplayRenderNode();
    if (e) {
      switch (a.getDisplayRenderNodeType()) {
        case ccs.DISPLAY_TYPE_SPRITE:
          d &&
            (e._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),
            e.updateArmatureTransform());
          break;
        case ccs.DISPLAY_TYPE_PARTICLE:
          this.updateParticleDisplay(a, e, b);
          break;
        case ccs.DISPLAY_TYPE_ARMATURE:
          this.updateArmatureDisplay(a, e, b);
          break;
        default:
          (b = a.getNodeToArmatureTransform()), e.setAdditionalTransform(b);
      }
      if (
        (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT ||
          ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) &&
        d &&
        ((e = a.getDisplayManager().getCurrentDecorativeDisplay()),
        (d = e.getColliderDetector()))
      ) {
        b = e.getDisplay();
        var f = b.getNodeToParentTransform(),
          e = this._helpTransform;
        e.a = f.a;
        e.b = f.b;
        e.c = f.c;
        e.d = f.d;
        e.tx = f.tx;
        e.ty = f.ty;
        b = cc.pointApplyAffineTransform(b.getAnchorPointInPoints(), e);
        e.tx = b.x;
        e.ty = b.y;
        a = cc.affineTransformConcat(
          e,
          a.getArmature().getNodeToParentTransform()
        );
        d.updateTransform(a);
      }
    }
  },
  addSpriteDisplay: function (a, b, d) {
    var e = new ccs.SpriteDisplayData();
    e.copy(d);
    b.setDisplayData(e);
    this.createSpriteDisplay(a, b);
  },
  createSpriteDisplay: function (a, b) {
    var d = null,
      e = b.getDisplayData(),
      d = e.displayName,
      f = d.lastIndexOf(".");
    -1 !== f && (d = d.substring(0, f));
    d = "" === d ? new ccs.Skin() : new ccs.Skin("#" + d + ".png");
    b.setDisplay(d);
    d.setBone(a);
    this.initSpriteDisplay(a, b, e.displayName, d);
    (f = a.getArmature()) &&
      (f.getArmatureData().dataVersion >= ccs.CONST_VERSION_COMBINED
        ? d.setSkinData(e.skinData)
        : d.setSkinData(a.boneData));
  },
  initSpriteDisplay: function (a, b, d, e) {
    var f = d.lastIndexOf(".");
    -1 !== f && (d = d.substring(0, f));
    (d = ccs.armatureDataManager.getTextureData(d)) &&
      e.setAnchorPoint(cc.p(d.pivotX, d.pivotY));
    (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT ||
      ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) &&
      d &&
      0 < d.contourDataList.length &&
      ((a = new ccs.ColliderDetector(a)),
      a.addContourDataList(d.contourDataList),
      b.setColliderDetector(a));
  },
  addArmatureDisplay: function (a, b, d) {
    var e = new ccs.ArmatureDisplayData();
    e.copy(d);
    b.setDisplayData(e);
    this.createArmatureDisplay(a, b);
  },
  createArmatureDisplay: function (a, b) {
    var d = b.getDisplayData(),
      d = new ccs.Armature(d.displayName, a);
    b.setDisplay(d);
  },
  updateArmatureDisplay: function (a, b, d) {
    b && (b.sortAllChildren(), b.update(d));
  },
  addParticleDisplay: function (a, b, d) {
    var e = new ccs.ParticleDisplayData();
    e.copy(d);
    b.setDisplayData(e);
    this.createParticleDisplay(a, b);
  },
  createParticleDisplay: function (a, b) {
    var d = b.getDisplayData(),
      d = new cc.ParticleSystem(d.displayName);
    d.removeFromParent();
    d.cleanup();
    a.getArmature() && d.setParent(a.getArmature());
    b.setDisplay(d);
  },
  updateParticleDisplay: function (a, b, d) {
    var e = new ccs.BaseData();
    ccs.TransformHelp.matrixToNode(a.nodeToArmatureTransform(), e);
    b.setPosition(e.x, e.y);
    b.setScaleX(e.scaleX);
    b.setScaleY(e.scaleY);
    b.update(d);
  },
};
ccs.DisplayManager = ccs.Class.extend({
  _decoDisplayList: null,
  _currentDecoDisplay: null,
  _displayRenderNode: null,
  _displayIndex: null,
  _forceChangeDisplay: !1,
  _bone: null,
  _visible: !0,
  _displayType: null,
  ctor: function (a) {
    this._decoDisplayList = [];
    this._displayIndex = this._displayRenderNode = this._currentDecoDisplay = null;
    this._forceChangeDisplay = !1;
    this._bone = null;
    this._visible = !0;
    this._displayType = ccs.DISPLAY_TYPE_MAX;
    a && ccs.DisplayManager.prototype.init.call(this, a);
  },
  init: function (a) {
    this._bone = a;
    this.initDisplayList(a.getBoneData());
    return !0;
  },
  addDisplay: function (a, b) {
    var d,
      e = this._decoDisplayList;
    0 <= b && b < e.length
      ? (d = e[b])
      : ((d = new ccs.DecorativeDisplay()), e.push(d));
    if (a instanceof ccs.DisplayData)
      ccs.displayFactory.addDisplay(this._bone, d, a);
    else {
      var f = null;
      if (a instanceof ccs.Skin) {
        a.setBone(this._bone);
        f = new ccs.SpriteDisplayData();
        ccs.displayFactory.initSpriteDisplay(
          this._bone,
          d,
          a.getDisplayName(),
          a
        );
        var g = d.getDisplayData();
        if (g instanceof ccs.SpriteDisplayData)
          a.setSkinData(g.skinData), (f.skinData = g.skinData);
        else {
          for (var g = !1, h = e.length - 2; 0 <= h; h--) {
            var k = e[h].getDisplayData();
            if (k instanceof ccs.SpriteDisplayData) {
              g = !0;
              a.setSkinData(k.skinData);
              f.skinData = k.skinData;
              break;
            }
          }
          g || a.setSkinData(new ccs.BaseData());
        }
      } else
        a instanceof cc.ParticleSystem
          ? ((f = new ccs.ParticleDisplayData()),
            a.removeFromParent(),
            a._performRecursive(cc.Node._stateCallbackType.cleanup),
            (e = this._bone.getArmature()) && a.setParent(e))
          : a instanceof ccs.Armature
          ? ((f = new ccs.ArmatureDisplayData()),
            (f.displayName = a.getName()),
            a.setParentBone(this._bone))
          : (f = new ccs.DisplayData());
      d.setDisplay(a);
      d.setDisplayData(f);
    }
    b === this._displayIndex &&
      ((this._displayIndex = -1), this.changeDisplayWithIndex(b, !1));
  },
  _addDisplayOther: function (a, b) {
    var d = null;
    if (b instanceof ccs.Skin) {
      b.setBone(this._bone);
      d = new ccs.SpriteDisplayData();
      d.displayName = b.getDisplayName();
      ccs.displayFactory.initSpriteDisplay(
        this._bone,
        a,
        b.getDisplayName(),
        b
      );
      var e = a.getDisplayData();
      if (e instanceof ccs.SpriteDisplayData) b.setSkinData(e.skinData);
      else {
        for (var e = !1, f = this._decoDisplayList.length - 2; 0 <= f; f--) {
          var g = this._decoDisplayList[f].getDisplayData();
          if (g) {
            e = !0;
            b.setSkinData(g.skinData);
            d.skinData = g.skinData;
            break;
          }
        }
        e || b.setSkinData(new ccs.BaseData());
        b.setSkinData(new ccs.BaseData());
      }
    } else
      b instanceof cc.ParticleSystem
        ? ((d = new ccs.ParticleDisplayData()), (d.displayName = b._plistFile))
        : b instanceof ccs.Armature
        ? ((d = new ccs.ArmatureDisplayData()),
          (d.displayName = b.getName()),
          b.setParentBone(this._bone))
        : (d = new ccs.DisplayData());
    a.setDisplay(b);
    a.setDisplayData(d);
  },
  removeDisplay: function (a) {
    this._decoDisplayList.splice(a, 1);
    a === this._displayIndex &&
      (this.setCurrentDecorativeDisplay(null), (this._displayIndex = -1));
  },
  getDecorativeDisplayList: function () {
    return this._decoDisplayList;
  },
  changeDisplayWithIndex: function (a, b) {
    a >= this._decoDisplayList.length
      ? cc.log("the index value is out of range")
      : ((this._forceChangeDisplay = b),
        this._displayIndex !== a &&
          ((this._displayIndex = a),
          0 > a
            ? this._displayRenderNode &&
              (this._displayRenderNode.removeFromParent(!0),
              this.setCurrentDecorativeDisplay(null))
            : this.setCurrentDecorativeDisplay(this._decoDisplayList[a])));
  },
  changeDisplayWithName: function (a, b) {
    for (var d = this._decoDisplayList, e = 0; e < d.length; e++)
      if (d[e].getDisplayData().displayName === a) {
        this.changeDisplayWithIndex(e, b);
        break;
      }
  },
  setCurrentDecorativeDisplay: function (a) {
    var b = this._currentDecoDisplay;
    (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT ||
      ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) &&
      b &&
      b.getColliderDetector() &&
      b.getColliderDetector().setActive(!1);
    b = this._currentDecoDisplay = a;
    (ccs.ENABLE_PHYSICS_CHIPMUNK_DETECT ||
      ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) &&
      b &&
      b.getColliderDetector() &&
      b.getColliderDetector().setActive(!0);
    a = b ? b.getDisplay() : null;
    var b = this._displayRenderNode,
      d = this._bone;
    b &&
      (b instanceof ccs.Armature && d.setChildArmature(null),
      b.removeFromParent(!0));
    (this._displayRenderNode = a)
      ? (a instanceof ccs.Armature
          ? (this._bone.setChildArmature(a), a.setParentBone(this._bone))
          : a instanceof cc.ParticleSystem &&
            (a instanceof ccs.Armature
              ? (d.setChildArmature(a), a.setParentBone(d))
              : a instanceof cc.ParticleSystem && a.resetSystem()),
        a.setColor(d.getDisplayedColor()),
        a.setOpacity(d.getDisplayedOpacity()),
        this._displayRenderNode.setVisible(this._visible),
        (this._displayType = this._currentDecoDisplay.getDisplayData().displayType))
      : (this._displayType = ccs.DISPLAY_TYPE_MAX);
    cc.renderer.childrenOrderDirty = !0;
  },
  getDisplayRenderNode: function () {
    return this._displayRenderNode;
  },
  getDisplayRenderNodeType: function () {
    return this._displayType;
  },
  getCurrentDisplayIndex: function () {
    return this._displayIndex;
  },
  getCurrentDecorativeDisplay: function () {
    return this._currentDecoDisplay;
  },
  getDecorativeDisplayByIndex: function (a) {
    return this._decoDisplayList[a];
  },
  initDisplayList: function (a) {
    this._decoDisplayList.length = 0;
    if (a) {
      a = a.displayDataList;
      for (
        var b = this._decoDisplayList, d = this._bone, e = 0;
        e < a.length;
        e++
      ) {
        var f = a[e],
          g = new ccs.DecorativeDisplay();
        g.setDisplayData(f);
        ccs.displayFactory.createDisplay(d, g);
        b.push(g);
      }
    }
  },
  containPoint: function (a, b) {
    if (!this._visible || 0 > this._displayIndex) return !1;
    void 0 !== b && (a = cc.p(a, b));
    if (
      this._currentDecoDisplay.getDisplayData().displayType ===
      ccs.DISPLAY_TYPE_SPRITE
    ) {
      var d = this._currentDecoDisplay.getDisplay(),
        d = d.getChildByTag(0);
      return ccs.SPRITE_CONTAIN_POINT_WITH_RETURN(d, a);
    }
    return !1;
  },
  setVisible: function (a) {
    this._displayRenderNode &&
      ((this._visible = a), this._displayRenderNode.setVisible(a));
  },
  isVisible: function () {
    return this._visible;
  },
  getContentSize: function () {
    return this._displayRenderNode
      ? this._displayRenderNode.getContentSize()
      : cc.size(0, 0);
  },
  getBoundingBox: function () {
    return this._displayRenderNode
      ? this._displayRenderNode.getBoundingBox()
      : cc.rect(0, 0, 0, 0);
  },
  getAnchorPoint: function () {
    return this._displayRenderNode
      ? this._displayRenderNode.getAnchorPoint()
      : cc.p(0, 0);
  },
  getAnchorPointInPoints: function () {
    return this._displayRenderNode
      ? this._displayRenderNode.getAnchorPointInPoints()
      : cc.p(0, 0);
  },
  getForceChangeDisplay: function () {
    return this._forceChangeDisplay;
  },
  release: function () {
    this._decoDisplayList = null;
    this._displayRenderNode &&
      (this._displayRenderNode.removeFromParent(!0),
      (this._displayRenderNode = null));
  },
});
ccs.DisplayManager.create = function (a) {
  return new ccs.DisplayManager(a);
};
ccs.Skin = ccs.Sprite.extend({
  _skinData: null,
  bone: null,
  _skinTransform: null,
  _displayName: "",
  _armature: null,
  _className: "Skin",
  ctor: function (a, b) {
    cc.Sprite.prototype.ctor.call(this);
    this.bone = this._skinData = null;
    this._displayName = "";
    this._skinTransform = cc.affineTransformIdentity();
    this._armature = null;
    null == a || "" === a
      ? ccs.Skin.prototype.init.call(this)
      : "#" === a[0]
      ? ccs.Skin.prototype.initWithSpriteFrameName.call(this, a.substr(1))
      : ccs.Skin.prototype.initWithFile.call(this, a, b);
  },
  initWithSpriteFrameName: function (a) {
    if ("" === a) return !1;
    var b = cc.spriteFrameCache.getSpriteFrame(a),
      d = !0;
    b
      ? this.initWithSpriteFrame(b)
      : (cc.log(
          "Can't find CCSpriteFrame with %s. Please check your .plist file",
          a
        ),
        (d = !1));
    this._displayName = a;
    return d;
  },
  initWithFile: function (a, b) {
    var d = b
      ? cc.Sprite.prototype.initWithFile.call(this, a, b)
      : cc.Sprite.prototype.initWithFile.call(this, a);
    this._displayName = a;
    return d;
  },
  setSkinData: function (a) {
    this._skinData = a;
    this.setScaleX(a.scaleX);
    this.setScaleY(a.scaleY);
    this.setRotationX(cc.radiansToDegrees(a.skewX));
    this.setRotationY(cc.radiansToDegrees(-a.skewY));
    this.setPosition(a.x, a.y);
    this._renderCmd.transform();
  },
  getSkinData: function () {
    return this._skinData;
  },
  updateArmatureTransform: function () {
    this._renderCmd.transform();
  },
  getNodeToWorldTransform: function () {
    return this._renderCmd.getNodeToWorldTransform();
  },
  getNodeToWorldTransformAR: function () {
    return this._renderCmd.getNodeToWorldTransformAR();
  },
  setBone: function (a) {
    this.bone = a;
    if ((a = this.bone.getArmature())) this._armature = a;
  },
  getBone: function () {
    return this.bone;
  },
  getDisplayName: function () {
    return this._displayName;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new ccs.Skin.CanvasRenderCmd(this)
      : new ccs.Skin.WebGLRenderCmd(this);
  },
});
_p = ccs.Skin.prototype;
cc.defineGetterSetter(_p, "skinData", _p.getSkinData, _p.setSkinData);
cc.defineGetterSetter(_p, "displayName", _p.getDisplayName);
_p = null;
ccs.Skin.create = function (a, b) {
  return new ccs.Skin(a, b);
};
ccs.Skin.createWithSpriteFrameName = function (a) {
  return new ccs.Skin("#" + a);
};
(function () {
  ccs.Skin.RenderCmd = {
    _realWorldTM: null,
    transform: function (a, d) {
      this._transform ||
        ((this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }),
        (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }));
      var e = this._node,
        f = a ? a._worldTransform : null,
        g = this._transform,
        h = this._worldTransform;
      if (this._dirtyFlag & cc.Node._dirtyFlags.transformDirty || f)
        this.originTransform(),
          cc.affineTransformConcatIn(
            this._transform,
            e.bone.getNodeToArmatureTransform()
          ),
          (this._dirtyFlag &= ~cc.Node._dirtyFlags.transformDirty);
      if (f) {
        if (
          ((h.a = g.a * f.a + g.b * f.c),
          (h.b = g.a * f.b + g.b * f.d),
          (h.c = g.c * f.a + g.d * f.c),
          (h.d = g.c * f.b + g.d * f.d),
          (h.tx = g.tx * f.a + g.ty * f.c + f.tx),
          (h.ty = g.tx * f.b + g.ty * f.d + f.ty),
          (f = this._vertices))
        ) {
          var k = e._offsetPosition.x,
            m = k + e._rect.width,
            n = e._offsetPosition.y,
            e = n + e._rect.height;
          f[0].x = k * h.a + e * h.c + h.tx;
          f[0].y = k * h.b + e * h.d + h.ty;
          f[1].x = k * h.a + n * h.c + h.tx;
          f[1].y = k * h.b + n * h.d + h.ty;
          f[2].x = m * h.a + e * h.c + h.tx;
          f[2].y = m * h.b + e * h.d + h.ty;
          f[3].x = m * h.a + n * h.c + h.tx;
          f[3].y = m * h.b + n * h.d + h.ty;
        }
      } else
        (h.a = g.a),
          (h.b = g.b),
          (h.c = g.c),
          (h.d = g.d),
          (h.tx = g.tx),
          (h.ty = g.ty);
      if ((h = this._realWorldTM))
        (h.a = g.a),
          (h.b = g.b),
          (h.c = g.c),
          (h.d = g.d),
          (h.tx = g.tx),
          (h.ty = g.ty),
          cc.affineTransformConcatIn(
            h,
            this._node.bone.getArmature()._renderCmd._worldTransform
          );
    },
    getNodeToWorldTransform: function () {
      return cc.affineTransformConcat(
        this._transform,
        this._node.bone.getArmature().getNodeToWorldTransform()
      );
    },
    getNodeToWorldTransformAR: function () {
      var a = this._transform,
        d = this._node;
      this._anchorPointInPoints = cc.pointApplyAffineTransform(
        this._anchorPointInPoints,
        a
      );
      a.tx = this._anchorPointInPoints.x;
      a.ty = this._anchorPointInPoints.y;
      return cc.affineTransformConcat(
        a,
        d.bone.getArmature().getNodeToWorldTransform()
      );
    },
  };
  ccs.Skin.CanvasRenderCmd = function (a) {
    this._spriteCmdCtor(a);
    this._realWorldTM = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
  };
  var a = (ccs.Skin.CanvasRenderCmd.prototype = Object.create(
    cc.Sprite.CanvasRenderCmd.prototype
  ));
  cc.inject(ccs.Skin.RenderCmd, a);
  a.constructor = ccs.Skin.CanvasRenderCmd;
  a._updateCurrentRegions = function () {
    var a = this._currentRegion;
    this._currentRegion = this._oldRegion;
    this._oldRegion = a;
    cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble !== this._regionFlag ||
      this._currentRegion.isEmpty() ||
      this._oldRegion.union(this._currentRegion);
    this._currentRegion.updateRegion(this.getLocalBB(), this._realWorldTM);
  };
  ccs.Skin.WebGLRenderCmd = function (a) {
    this._spriteCmdCtor(a);
  };
  a = ccs.Skin.WebGLRenderCmd.prototype = Object.create(
    cc.Sprite.WebGLRenderCmd.prototype
  );
  cc.inject(ccs.Skin.RenderCmd, a);
  a.constructor = ccs.Skin.WebGLRenderCmd;
})();
ccs.ANIMATION_TYPE_SINGLE_FRAME = -4;
ccs.ANIMATION_TYPE_NO_LOOP = -3;
ccs.ANIMATION_TYPE_TO_LOOP_FRONT = -2;
ccs.ANIMATION_TYPE_TO_LOOP_BACK = -1;
ccs.ANIMATION_TYPE_LOOP_FRONT = 0;
ccs.ANIMATION_TYPE_LOOP_BACK = 1;
ccs.ANIMATION_TYPE_MAX = 2;
ccs.ProcessBase = ccs.Class.extend({
  _processScale: 1,
  _isComplete: !0,
  _isPause: !0,
  _isPlaying: !1,
  _currentPercent: 0,
  _rawDuration: 0,
  _loopType: 0,
  _tweenEasing: 0,
  animationInternal: null,
  _currentFrame: 0,
  _durationTween: 0,
  _nextFrameIndex: 0,
  _curFrameIndex: null,
  _isLoopBack: !1,
  ctor: function () {
    this._processScale = 1;
    this._isPause = this._isComplete = !0;
    this._isPlaying = !1;
    this._rawDuration = this._durationTween = this._currentPercent = this._currentFrame = 0;
    this._loopType = ccs.ANIMATION_TYPE_LOOP_BACK;
    this._tweenEasing = ccs.TweenType.LINEAR;
    this.animationInternal = 1 / 60;
    this._durationTween = this._curFrameIndex = 0;
    this._isLoopBack = !1;
  },
  pause: function () {
    this._isPause = !0;
    this._isPlaying = !1;
  },
  resume: function () {
    this._isPause = !1;
    this._isPlaying = !0;
  },
  stop: function () {
    this._isComplete = !0;
    this._isPlaying = !1;
  },
  play: function (a, b, d, e) {
    this._isPause = this._isComplete = !1;
    this._isPlaying = !0;
    this._currentFrame = 0;
    this._nextFrameIndex = a;
    this._tweenEasing = e;
  },
  update: function (a) {
    if (
      !(this._isComplete || this._isPause || 0 >= this._rawDuration || 1 < a)
    ) {
      var b = void 0 === this._nextFrameIndex ? 0 : this._nextFrameIndex,
        d = this._currentFrame;
      0 >= b
        ? ((this._currentPercent = 1), (d = 0))
        : ((d += (a / this.animationInternal) * this._processScale),
          (this._currentPercent = d / b),
          (d = ccs.fmodf(d, b)));
      this._currentFrame = d;
      this.updateHandler();
    }
  },
  gotoFrame: function (a) {
    var b = this._loopType;
    b === ccs.ANIMATION_TYPE_NO_LOOP
      ? (b = ccs.ANIMATION_TYPE_MAX)
      : b === ccs.ANIMATION_TYPE_TO_LOOP_FRONT &&
        (b = ccs.ANIMATION_TYPE_LOOP_FRONT);
    this._loopType = b;
    this._curFrameIndex = a;
    this._nextFrameIndex = this._durationTween;
  },
  getCurrentFrameIndex: function () {
    return (this._curFrameIndex =
      (this._rawDuration - 1) * this._currentPercent);
  },
  updateHandler: function () {},
  isPause: function () {
    return this._isPause;
  },
  isComplete: function () {
    return this._isComplete;
  },
  getCurrentPercent: function () {
    return this._currentPercent;
  },
  getRawDuration: function () {
    return this._rawDuration;
  },
  getLoop: function () {
    return this._loopType;
  },
  getTweenEasing: function () {
    return this._tweenEasing;
  },
  getAnimationInternal: function () {
    return this.animationInternal;
  },
  setAnimationInternal: function (a) {
    this.animationInternal = a;
  },
  getProcessScale: function () {
    return this._processScale;
  },
  setProcessScale: function (a) {
    this._processScale = a;
  },
  isPlaying: function () {
    return this._isPlaying;
  },
});
_p = ccs.ProcessBase.prototype;
cc.defineGetterSetter(_p, "currentFrameIndex", _p.getCurrentFrameIndex);
cc.defineGetterSetter(_p, "paused", _p.isPause);
cc.defineGetterSetter(_p, "completed", _p.isComplete);
cc.defineGetterSetter(_p, "currentPercent", _p.getCurrentPercent);
cc.defineGetterSetter(_p, "rawDuration", _p.getRawDuration);
cc.defineGetterSetter(_p, "loop", _p.getLoop);
cc.defineGetterSetter(_p, "tweenEasing", _p.getTweenEasing);
cc.defineGetterSetter(_p, "playing", _p.isPlaying);
_p = null;
ccs.MovementEventType = { start: 0, complete: 1, loopComplete: 2 };
ccs.AnimationEvent = ccs.Class.extend({
  _arguments: null,
  _callFunc: null,
  _selectorTarget: null,
  ctor: function (a, b, d) {
    this._data = d;
    this._callFunc = a;
    this._selectorTarget = b;
  },
  call: function () {
    this._callFunc &&
      this._callFunc.apply(this._selectorTarget, this._arguments);
  },
  setArguments: function (a) {
    this._arguments = a;
  },
});
ccs.MovementEvent = function () {
  this.armature = null;
  this.movementType = ccs.MovementEventType.start;
  this.movementID = "";
};
ccs.FrameEvent = function () {
  this.bone = null;
  this.frameEventName = "";
  this.currentFrameIndex = this.originFrameIndex = 0;
};
ccs.ArmatureAnimation = ccs.ProcessBase.extend({
  _animationData: null,
  _movementData: null,
  _armature: null,
  _movementID: "",
  _toIndex: 0,
  _tweenList: null,
  _speedScale: 1,
  _ignoreFrameEvent: !1,
  _frameEventQueue: null,
  _movementEventQueue: null,
  _movementList: null,
  _onMovementList: !1,
  _movementListLoop: !1,
  _movementIndex: 0,
  _movementListDurationTo: -1,
  _movementEventCallFunc: null,
  _frameEventCallFunc: null,
  _movementEventTarget: null,
  _frameEventTarget: null,
  _movementEventListener: null,
  _frameEventListener: null,
  ctor: function (a) {
    ccs.ProcessBase.prototype.ctor.call(this);
    this._tweenList = [];
    this._movementList = [];
    this._frameEventQueue = [];
    this._movementEventQueue = [];
    this._armature = null;
    a && ccs.ArmatureAnimation.prototype.init.call(this, a);
  },
  init: function (a) {
    this._armature = a;
    this._tweenList.length = 0;
    return !0;
  },
  pause: function () {
    for (var a = this._tweenList, b = 0; b < a.length; b++) a[b].pause();
    ccs.ProcessBase.prototype.pause.call(this);
  },
  resume: function () {
    for (var a = this._tweenList, b = 0; b < a.length; b++) a[b].resume();
    ccs.ProcessBase.prototype.resume.call(this);
  },
  stop: function () {
    for (var a = this._tweenList, b = 0; b < a.length; b++) a[b].stop();
    a.length = 0;
    ccs.ProcessBase.prototype.stop.call(this);
  },
  setAnimationScale: function (a) {
    this.setSpeedScale(a);
  },
  getAnimationScale: function () {
    return this.getSpeedScale();
  },
  setSpeedScale: function (a) {
    if (a !== this._speedScale) {
      this._speedScale = a;
      this._processScale = this._movementData
        ? this._speedScale * this._movementData.scale
        : this._speedScale;
      a = this._armature.getBoneDic();
      for (var b in a) {
        var d = a[b];
        d.getTween().setProcessScale(this._processScale);
        d.getChildArmature() &&
          d.getChildArmature().getAnimation().setSpeedScale(this._processScale);
      }
    }
  },
  getSpeedScale: function () {
    return this._speedScale;
  },
  play: function (a, b, d) {
    cc.assert(this._animationData, "this.animationData can not be null");
    this._movementData = this._animationData.getMovement(a);
    cc.assert(this._movementData, "this._movementData can not be null");
    b = void 0 === b ? -1 : b;
    d = void 0 === d ? -1 : d;
    this._rawDuration = this._movementData.duration;
    this._movementID = a;
    this._processScale = this._speedScale * this._movementData.scale;
    b = -1 === b ? this._movementData.durationTo : b;
    a =
      0 === this._movementData.durationTween
        ? this._rawDuration
        : this._movementData.durationTween;
    var e = this._movementData.tweenEasing;
    d = 0 > d ? this._movementData.loop : d;
    this._onMovementList = !1;
    ccs.ProcessBase.prototype.play.call(this, b, a, d, e);
    0 === this._rawDuration
      ? (this._loopType = ccs.ANIMATION_TYPE_SINGLE_FRAME)
      : ((this._loopType = d
          ? ccs.ANIMATION_TYPE_TO_LOOP_FRONT
          : ccs.ANIMATION_TYPE_NO_LOOP),
        (this._durationTween = a));
    this._tweenList.length = 0;
    var f,
      g = this._armature.getBoneDic(),
      h;
    for (h in g) {
      var k = g[h];
      f = this._movementData.movBoneDataDic[k.getName()];
      var m = k.getTween();
      f && 0 < f.frameList.length
        ? (this._tweenList.push(m),
          (f.duration = this._movementData.duration),
          m.play(f, b, a, d, e),
          m.setProcessScale(this._processScale),
          k.getChildArmature() &&
            (k
              .getChildArmature()
              .getAnimation()
              .setSpeedScale(this._processScale),
            k.getChildArmature().getAnimation().isPlaying() ||
              k.getChildArmature().getAnimation().playWithIndex(0)))
        : k.isIgnoreMovementBoneData() ||
          (k.getDisplayManager().changeDisplayWithIndex(-1, !1), m.stop());
    }
    this._armature.update(0);
  },
  playByIndex: function (a, b, d, e, f) {
    cc.log("playByIndex is deprecated. Use playWithIndex instead.");
    this.playWithIndex(a, b, e);
  },
  playWithIndex: function (a, b, d) {
    var e = this._animationData.movementNames;
    cc.assert(-1 < a && a < e.length);
    this.play(e[a], b, d);
  },
  playWithNames: function (a, b, d) {
    this._movementListLoop = void 0 === d ? !0 : d;
    this._movementListDurationTo = void 0 === b ? -1 : b;
    this._onMovementList = !0;
    this._movementIndex = 0;
    a instanceof Array
      ? (this._movementList = a)
      : (this._movementList.length = 0);
    this.updateMovementList();
  },
  playWithIndexes: function (a, b, d) {
    this._movementList.length = 0;
    this._movementListLoop = void 0 === d ? !0 : d;
    this._movementListDurationTo = void 0 === b ? -1 : b;
    this._onMovementList = !0;
    this._movementIndex = 0;
    b = this._animationData.movementNames;
    for (d = 0; d < a.length; d++) this._movementList.push(b[a[d]]);
    this.updateMovementList();
  },
  gotoAndPlay: function (a) {
    if (!this._movementData || 0 > a || a >= this._movementData.duration)
      cc.log(
        "Please ensure you have played a movement, and the frameIndex is in the range."
      );
    else {
      var b = this._ignoreFrameEvent;
      this._isPlaying = this._ignoreFrameEvent = !0;
      this._isComplete = this._isPause = !1;
      ccs.ProcessBase.prototype.gotoFrame.call(this, a);
      this._currentPercent =
        this._curFrameIndex / (this._movementData.duration - 1);
      this._currentFrame = this._nextFrameIndex * this._currentPercent;
      for (var d = this._tweenList, e = 0; e < d.length; e++)
        d[e].gotoAndPlay(a);
      this._armature.update(0);
      this._ignoreFrameEvent = b;
    }
  },
  gotoAndPause: function (a) {
    this.gotoAndPlay(a);
    this.pause();
  },
  getMovementCount: function () {
    return this._animationData.getMovementCount();
  },
  update: function (a) {
    ccs.ProcessBase.prototype.update.call(this, a);
    for (var b = this._tweenList, d = 0; d < b.length; d++) b[d].update(a);
    for (b = this._frameEventQueue; 0 < b.length; )
      (a = b.shift()),
        (this._ignoreFrameEvent = !0),
        this._frameEventCallFunc &&
          this._frameEventCallFunc.call(
            this._frameEventTarget,
            a.bone,
            a.frameEventName,
            a.originFrameIndex,
            a.currentFrameIndex
          ),
        this._frameEventListener &&
          this._frameEventListener(
            a.bone,
            a.frameEventName,
            a.originFrameIndex,
            a.currentFrameIndex
          ),
        (this._ignoreFrameEvent = !1);
    for (b = this._movementEventQueue; 0 < b.length; )
      (a = b.shift()),
        this._movementEventCallFunc &&
          this._movementEventCallFunc.call(
            this._movementEventTarget,
            a.armature,
            a.movementType,
            a.movementID
          ),
        this._movementEventListener &&
          this._movementEventListener(a.armature, a.movementType, a.movementID);
  },
  updateHandler: function () {
    var a = this._currentPercent;
    if (1 <= a) {
      switch (this._loopType) {
        case ccs.ANIMATION_TYPE_NO_LOOP:
          this._loopType = ccs.ANIMATION_TYPE_MAX;
          this._currentFrame = (a - 1) * this._nextFrameIndex;
          a = this._currentFrame / this._durationTween;
          if (1 > a) {
            this._nextFrameIndex = this._durationTween;
            this.movementEvent(
              this._armature,
              ccs.MovementEventType.start,
              this._movementID
            );
            break;
          }
          break;
        case ccs.ANIMATION_TYPE_MAX:
        case ccs.ANIMATION_TYPE_SINGLE_FRAME:
          a = 1;
          this._isComplete = !0;
          this._isPlaying = !1;
          this.movementEvent(
            this._armature,
            ccs.MovementEventType.complete,
            this._movementID
          );
          this.updateMovementList();
          break;
        case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:
          this._loopType = ccs.ANIMATION_TYPE_LOOP_FRONT;
          a = ccs.fmodf(a, 1);
          this._currentFrame =
            0 === this._nextFrameIndex
              ? 0
              : ccs.fmodf(this._currentFrame, this._nextFrameIndex);
          this._nextFrameIndex =
            0 < this._durationTween ? this._durationTween : 1;
          this.movementEvent(
            this,
            ccs.MovementEventType.start,
            this._movementID
          );
          break;
        default:
          (this._currentFrame = ccs.fmodf(
            this._currentFrame,
            this._nextFrameIndex
          )),
            (this._toIndex = 0),
            this.movementEvent(
              this._armature,
              ccs.MovementEventType.loopComplete,
              this._movementID
            );
      }
      this._currentPercent = a;
    }
  },
  getCurrentMovementID: function () {
    return this._isComplete ? "" : this._movementID;
  },
  setMovementEventCallFunc: function (a, b) {
    1 === arguments.length
      ? (this._movementEventListener = a)
      : 2 === arguments.length &&
        ((this._movementEventTarget = b), (this._movementEventCallFunc = a));
  },
  setFrameEventCallFunc: function (a, b) {
    1 === arguments.length
      ? (this._frameEventListener = a)
      : 2 === arguments.length &&
        ((this._frameEventTarget = b), (this._frameEventCallFunc = a));
  },
  setUserObject: function (a) {
    this._userObject = a;
  },
  frameEvent: function (a, b, d, e) {
    if (
      (this._frameEventTarget && this._frameEventCallFunc) ||
      this._frameEventListener
    ) {
      var f = new ccs.FrameEvent();
      f.bone = a;
      f.frameEventName = b;
      f.originFrameIndex = d;
      f.currentFrameIndex = e;
      this._frameEventQueue.push(f);
    }
  },
  movementEvent: function (a, b, d) {
    if (
      (this._movementEventTarget && this._movementEventCallFunc) ||
      this._movementEventListener
    ) {
      var e = new ccs.MovementEvent();
      e.armature = a;
      e.movementType = b;
      e.movementID = d;
      this._movementEventQueue.push(e);
    }
  },
  updateMovementList: function () {
    if (this._onMovementList) {
      var a,
        b = this._movementList;
      this._movementListLoop
        ? ((a = b[this._movementIndex]),
          this.play(a, a.durationTo, 0),
          this._movementIndex++,
          this._movementIndex >= b.length && (this._movementIndex = 0))
        : this._movementIndex < b.length
        ? ((a = b[this._movementIndex]),
          this.play(a, a.durationTo, 0),
          this._movementIndex++)
        : (this._onMovementList = !1);
      this._onMovementList = !0;
    }
  },
  setAnimationData: function (a) {
    this._animationData !== a && (this._animationData = a);
  },
  getAnimationData: function () {
    return this._animationData;
  },
  getUserObject: function () {
    return this._userObject;
  },
  isIgnoreFrameEvent: function () {
    return this._ignoreFrameEvent;
  },
});
_p = ccs.ArmatureAnimation.prototype;
cc.defineGetterSetter(_p, "speedScale", _p.getSpeedScale, _p.setSpeedScale);
cc.defineGetterSetter(
  _p,
  "animationScale",
  _p.getAnimationScale,
  _p.setAnimationScale
);
_p = null;
ccs.ArmatureAnimation.create = function (a) {
  return new ccs.ArmatureAnimation(a);
};
ccs.Tween = ccs.ProcessBase.extend({
  _tweenData: null,
  _to: null,
  _from: null,
  _between: null,
  _movementBoneData: null,
  _bone: null,
  _frameTweenEasing: 0,
  _betweenDuration: 0,
  _totalDuration: 0,
  _toIndex: 0,
  _fromIndex: 0,
  _animation: null,
  _passLastFrame: !1,
  ctor: function (a) {
    ccs.ProcessBase.prototype.ctor.call(this);
    this._frameTweenEasing = ccs.TweenType.LINEAR;
    ccs.Tween.prototype.init.call(this, a);
  },
  init: function (a) {
    this._from = new ccs.FrameData();
    this._between = new ccs.FrameData();
    this._bone = a;
    this._tweenData = this._bone.getTweenData();
    this._tweenData.displayIndex = -1;
    this._animation =
      null !== this._bone && null !== this._bone.getArmature()
        ? this._bone.getArmature().getAnimation()
        : null;
    return !0;
  },
  play: function (a, b, d, e, f) {
    ccs.ProcessBase.prototype.play.call(this, b, d, e, f);
    this._loopType = e
      ? ccs.ANIMATION_TYPE_TO_LOOP_FRONT
      : ccs.ANIMATION_TYPE_NO_LOOP;
    this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0;
    f = a !== this._movementBoneData;
    this.setMovementBoneData(a);
    this._rawDuration = this._movementBoneData.duration;
    a = this._movementBoneData.getFrameData(0);
    this._tweenData.displayIndex = a.displayIndex;
    this._bone.getArmature().getArmatureData().dataVersion >=
      ccs.CONST_VERSION_COMBINED &&
      (ccs.TransformHelp.nodeSub(this._tweenData, this._bone.getBoneData()),
      (this._tweenData.scaleX += 1),
      (this._tweenData.scaleY += 1));
    0 === this._rawDuration
      ? ((this._loopType = ccs.ANIMATION_TYPE_SINGLE_FRAME),
        0 === b ? this.setBetween(a, a) : this.setBetween(this._tweenData, a),
        (this._frameTweenEasing = ccs.TweenType.LINEAR))
      : 1 < this._movementBoneData.frameList.length &&
        ((this._durationTween = d * this._movementBoneData.scale),
        e && 0 !== this._movementBoneData.delay
          ? this.setBetween(
              this._tweenData,
              this.tweenNodeTo(
                this.updateFrameData(1 - this._movementBoneData.delay),
                this._between
              )
            )
          : f && 0 !== b
          ? this.setBetween(this._tweenData, a)
          : this.setBetween(a, a));
    this.tweenNodeTo(0);
  },
  gotoAndPlay: function (a) {
    ccs.ProcessBase.prototype.gotoFrame.call(this, a);
    this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0;
    this._isPlaying = !0;
    this._isComplete = this._isPause = !1;
    this._currentPercent = this._curFrameIndex / (this._rawDuration - 1);
    this._currentFrame = this._nextFrameIndex * this._currentPercent;
  },
  gotoAndPause: function (a) {
    this.gotoAndPlay(a);
    this.pause();
  },
  updateHandler: function () {
    var a = null == this._currentPercent ? 1 : this._currentPercent,
      b = this._loopType;
    if (1 <= a)
      switch (b) {
        case ccs.ANIMATION_TYPE_SINGLE_FRAME:
          a = 1;
          this._isComplete = !0;
          this._isPlaying = !1;
          break;
        case ccs.ANIMATION_TYPE_NO_LOOP:
          b = ccs.ANIMATION_TYPE_MAX;
          a =
            0 >= this._durationTween
              ? 1
              : ((a - 1) * this._nextFrameIndex) / this._durationTween;
          1 <= a
            ? ((a = 1), (this._isComplete = !0), (this._isPlaying = !1))
            : ((this._nextFrameIndex = this._durationTween),
              (this._currentFrame = a * this._nextFrameIndex),
              (this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0));
          break;
        case ccs.ANIMATION_TYPE_TO_LOOP_FRONT:
          b = ccs.ANIMATION_TYPE_LOOP_FRONT;
          this._nextFrameIndex =
            0 < this._durationTween ? this._durationTween : 1;
          0 !== this._movementBoneData.delay
            ? ((this._currentFrame =
                (1 - this._movementBoneData.delay) * this._nextFrameIndex),
              (a = this._currentFrame / this._nextFrameIndex))
            : (this._currentFrame = a = 0);
          this._fromIndex = this._toIndex = this._betweenDuration = this._totalDuration = 0;
          break;
        case ccs.ANIMATION_TYPE_MAX:
          a = 1;
          this._isComplete = !0;
          this._isPlaying = !1;
          break;
        default:
          this._currentFrame = ccs.fmodf(
            this._currentFrame,
            this._nextFrameIndex
          );
      }
    1 > a &&
      b < ccs.ANIMATION_TYPE_TO_LOOP_BACK &&
      (a = Math.sin((a * cc.PI) / 2));
    this._currentPercent = a;
    this._loopType = b;
    b > ccs.ANIMATION_TYPE_TO_LOOP_BACK && (a = this.updateFrameData(a));
    this._frameTweenEasing !== ccs.TweenType.TWEEN_EASING_MAX &&
      this.tweenNodeTo(a);
  },
  setBetween: function (a, b, d) {
    void 0 === d && (d = !0);
    0 > a.displayIndex && 0 <= b.displayIndex
      ? (this._from.copy(b), this._between.subtract(b, b, d))
      : 0 > b.displayIndex && 0 <= a.displayIndex
      ? (this._from.copy(a), this._between.subtract(b, b, d))
      : (this._from.copy(a), this._between.subtract(a, b, d));
    a.isTween || (this._tweenData.copy(a), (this._tweenData.isTween = !0));
    this.arriveKeyFrame(a);
  },
  arriveKeyFrame: function (a) {
    if (a) {
      var b = this._bone,
        d = b.getDisplayManager(),
        e = a.displayIndex;
      d.getForceChangeDisplay() || d.changeDisplayWithIndex(e, !1);
      this._tweenData.zOrder = a.zOrder;
      b.updateZOrder();
      this._bone.setBlendFunc(a.blendFunc);
      (b = b.getChildArmature()) &&
        "" !== a.movement &&
        b.getAnimation().play(a.movement);
    }
  },
  tweenNodeTo: function (a, b) {
    b || (b = this._tweenData);
    var d = this._from,
      e = this._between;
    d.isTween || (a = 0);
    b.x = d.x + a * e.x;
    b.y = d.y + a * e.y;
    b.scaleX = d.scaleX + a * e.scaleX;
    b.scaleY = d.scaleY + a * e.scaleY;
    b.skewX = d.skewX + a * e.skewX;
    b.skewY = d.skewY + a * e.skewY;
    this._bone.setTransformDirty(!0);
    b && e.isUseColorInfo && this.tweenColorTo(a, b);
    return b;
  },
  tweenColorTo: function (a, b) {
    var d = this._from,
      e = this._between;
    b.a = d.a + a * e.a;
    b.r = d.r + a * e.r;
    b.g = d.g + a * e.g;
    b.b = d.b + a * e.b;
    this._bone.updateColor();
  },
  updateFrameData: function (a) {
    1 < a && 0 !== this._movementBoneData.delay && (a = ccs.fmodf(a, 1));
    a *= this._rawDuration - 1;
    var b,
      d,
      e = this._totalDuration,
      f = this._betweenDuration,
      g = this._toIndex;
    if (a < e || a >= e + f) {
      var f = this._movementBoneData.frameList,
        h = f.length;
      if (a < f[0].frameID)
        return (b = d = f[0]), this.setBetween(b, d), this._currentPercent;
      if (a >= f[h - 1].frameID) {
        if (this._passLastFrame)
          return (
            (b = d = f[h - 1]), this.setBetween(b, d), this._currentPercent
          );
        this._passLastFrame = !0;
      } else this._passLastFrame = !1;
      do
        if (
          ((this._fromIndex = g),
          (b = f[this._fromIndex]),
          (e = b.frameID),
          (g = this._fromIndex + 1),
          g >= h && (g = 0),
          (d = f[g]),
          b.strEvent &&
            !this._animation.isIgnoreFrameEvent() &&
            this._animation.frameEvent(this._bone, b.strEvent, b.frameID, a),
          a === b.frameID || (this._passLastFrame && this._fromIndex === h - 1))
        )
          break;
      while (a < b.frameID || a >= d.frameID);
      f = d.frameID - b.frameID;
      this._frameTweenEasing = b.tweenEasing;
      this.setBetween(b, d, !1);
      this._totalDuration = e;
      this._betweenDuration = f;
      this._toIndex = g;
    }
    a = 0 === f ? 0 : (a - this._totalDuration) / this._betweenDuration;
    b =
      this._frameTweenEasing !== ccs.TweenType.LINEAR
        ? this._frameTweenEasing
        : this._tweenEasing;
    b === ccs.TweenType.TWEEN_EASING_MAX ||
      b === ccs.TweenType.LINEAR ||
      this._passLastFrame ||
      (a = ccs.TweenFunction.tweenTo(a, b, this._from.easingParams));
    return a;
  },
  setAnimation: function (a) {
    this._animation = a;
  },
  getAnimation: function () {
    return this._animation;
  },
  setMovementBoneData: function (a) {
    this._movementBoneData = a;
  },
});
_p = ccs.Tween.prototype;
cc.defineGetterSetter(_p, "animation", _p.getAnimation, _p.setAnimation);
_p = null;
ccs.Tween.create = function (a) {
  return new ccs.Tween(a);
};
ccs.PT_RATIO = 32;
ccs.ColliderFilter = ccs.Class.extend({
  _collisionType: 0,
  _group: 0,
  _categoryBits: 0,
  _groupIndex: 0,
  _maskBits: 0,
  ctor: function (a, b) {
    this._collisionType = a || 0;
    this._group = b || 0;
  },
  updateShape: function (a) {
    if (a instanceof cp.Shape)
      (a.collision_type = this._collisionType), (a.group = this._group);
    else if (a instanceof Box2D.b2FilterData) {
      var b = new Box2D.b2FilterData();
      b.categoryBits = this._categoryBits;
      b.groupIndex = this._groupIndex;
      b.maskBits = this._maskBits;
      a.SetFilterData(b);
    }
  },
});
ccs.ColliderBody = ccs.Class.extend({
  shape: null,
  coutourData: null,
  colliderFilter: null,
  _calculatedVertexList: null,
  ctor: function (a) {
    this.shape = null;
    this.coutourData = a;
    this.colliderFilter = new ccs.ColliderFilter();
    ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX &&
      (this._calculatedVertexList = []);
  },
  getContourData: function () {
    return this.coutourData;
  },
  setColliderFilter: function (a) {
    this.colliderFilter = a;
  },
  getCalculatedVertexList: function () {
    return this._calculatedVertexList;
  },
  setB2Fixture: function (a) {
    this._fixture = a;
  },
  getB2Fixture: function () {
    return this._fixture;
  },
  setShape: function (a) {
    this.shape = a;
  },
  getShape: function () {
    return this.shape;
  },
  setContourData: function (a) {
    this.coutourData = a;
  },
  getColliderFilter: function () {
    return this.colliderFilter;
  },
});
ccs.ColliderDetector = ccs.Class.extend({
  _colliderBodyList: null,
  _bone: null,
  _body: null,
  _active: !1,
  _filter: null,
  helpPoint: cc.p(0, 0),
  ctor: function (a) {
    this._colliderBodyList = [];
    this._body = this._bone = null;
    this._active = !1;
    this._filter = null;
    ccs.ColliderDetector.prototype.init.call(this, a);
  },
  init: function (a) {
    this._colliderBodyList.length = 0;
    a && (this._bone = a);
    this._filter = new ccs.ColliderFilter();
    return !0;
  },
  addContourData: function (a) {
    var b = new ccs.ColliderBody(a);
    this._colliderBodyList.push(b);
    if (ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) {
      b = b.getCalculatedVertexList();
      a = a.vertexList;
      for (var d = 0; d < a.length; d++) {
        var e = new ccs.ContourVertex2(0, 0);
        b.push(e);
      }
    }
  },
  addContourDataList: function (a) {
    for (var b = 0; b < a.length; b++) this.addContourData(a[b]);
  },
  removeContourData: function (a) {
    var b = [],
      d,
      e = this._colliderBodyList;
    for (d = 0; d < e.length; d++) {
      var f = e[d];
      f && f.getContourData() === a && b.push(f);
    }
    for (d = 0; d < b.length; d++) cc.arrayRemoveObject(e, b[d]);
  },
  removeAll: function () {
    this._colliderBodyList.length = 0;
  },
  setActive: function (a) {
    if (this._active !== a) {
      this._active = a;
      a = this._body;
      var b;
      if (a)
        if (((b = null), this._active))
          for (var d = 0; d < this._colliderBodyList.length; d++)
            (b = this._colliderBodyList[d]),
              (b = b.getShape()),
              a.space.addShape(b);
        else
          for (d = 0; d < this._colliderBodyList.length; d++)
            (b = this._colliderBodyList[d]),
              (b = b.getShape()),
              a.space.removeShape(b);
    }
  },
  getActive: function () {
    return this._active;
  },
  getColliderBodyList: function () {
    return this._colliderBodyList;
  },
  setColliderFilter: function (a) {
    this._filter = a;
    for (var b = this._colliderBodyList, d = 0; d < b.length; d++) {
      var e = b[d];
      e.setColliderFilter(a);
      e.getShape() && e.getColliderFilter().updateShape(e.getShape());
    }
  },
  getColliderFilter: function () {
    return this._filter;
  },
  updateTransform: function (a) {
    if (this._active)
      for (
        var b = null, d = this._body, e = this.helpPoint, f = 0;
        f < this._colliderBodyList.length;
        f++
      ) {
        var b = this._colliderBodyList[f],
          g = b.getContourData(),
          h = null;
        d && (h = b.getShape());
        for (
          var g = g.vertexList, k = b.getCalculatedVertexList(), b = 0;
          b < g.length;
          b++
        ) {
          e.x = g[b].x;
          e.y = g[b].y;
          e = cc.pointApplyAffineTransform(e, a);
          if (ccs.ENABLE_PHYSICS_SAVE_CALCULATED_VERTEX) {
            var m = cc.p(0, 0);
            m.x = e.x;
            m.y = e.y;
            k[b] = m;
          }
          h && ((h.verts[2 * b] = e.x), (h.verts[2 * b + 1] = e.y));
        }
        if (h)
          for (b = 0; b < g.length; b++)
            (k = cp.v.normalize(
              cp.v.perp(cp.v.sub(h.verts[(b + 1) % h.verts.length], h.verts[b]))
            )),
              h.planes &&
                ((h.planes[b].n = k),
                (h.planes[b].d = cp.v.dot(k, h.verts[b])));
      }
  },
  setBody: function (a) {
    this._body = a;
    for (var b = this._colliderBodyList, d = 0; d < b.length; d++) {
      a = b[d];
      for (
        var e = [], f = a.getContourData().vertexList, g = 0;
        g < f.length;
        g++
      ) {
        var h = f[g];
        e.push(h.x);
        e.push(h.y);
      }
      e = new cp.PolyShape(this._body, e, cp.vzero);
      e.sensor = !0;
      e.data = this._bone;
      this._active && this._body.space.addShape(e);
      a.setShape(e);
      a.getColliderFilter().updateShape(e);
    }
  },
  getBody: function () {
    return this._body;
  },
});
_p = ccs.ColliderDetector.prototype;
cc.defineGetterSetter(
  _p,
  "colliderFilter",
  _p.getColliderFilter,
  _p.setColliderFilter
);
cc.defineGetterSetter(_p, "active", _p.getActive, _p.setActive);
cc.defineGetterSetter(_p, "body", _p.getBody, _p.setBody);
_p = null;
ccs.ColliderDetector.create = function (a) {
  return new ccs.ColliderDetector(a);
};
ccs.Armature = ccs.Node.extend({
  animation: null,
  armatureData: null,
  batchNode: null,
  _parentBone: null,
  _boneDic: null,
  _topBoneList: null,
  _armatureIndexDic: null,
  _offsetPoint: null,
  version: 0,
  _armatureTransformDirty: !0,
  _body: null,
  _blendFunc: null,
  _className: "Armature",
  ctor: function (a, b) {
    cc.Node.prototype.ctor.call(this);
    this._name = "";
    this._topBoneList = [];
    this._armatureIndexDic = {};
    this._offsetPoint = cc.p(0, 0);
    this._armatureTransformDirty = !0;
    this._blendFunc = { src: cc.BLEND_SRC, dst: cc.BLEND_DST };
    a && ccs.Armature.prototype.init.call(this, a, b);
    this._texture = {};
  },
  init: function (a, b) {
    b && (this._parentBone = b);
    this.removeAllChildren();
    this.animation = new ccs.ArmatureAnimation();
    this.animation.init(this);
    this._boneDic = {};
    this._topBoneList.length = 0;
    var d = ccs.armatureDataManager,
      e;
    if ("" !== a) {
      e = d.getAnimationData(a);
      cc.assert(e, "AnimationData not exist!");
      this.animation.setAnimationData(e);
      d = d.getArmatureData(a);
      cc.assert(d, "ArmatureData not exist!");
      this.armatureData = d;
      var d = d.getBoneDataDic(),
        f;
      for (f in d) {
        var d = this.createBone(String(f)),
          g = e.getMovement(e.movementNames[0]);
        g &&
          (g = g.getMovementBoneData(d.getName())) &&
          !(0 >= g.frameList.length) &&
          (g = g.getFrameData(0)) &&
          (d.getTweenData().copy(g),
          d.changeDisplayWithIndex(g.displayIndex, !1));
      }
      this.update(0);
      this.updateOffsetPoint();
    } else
      (a = "new_armature"),
        (this.armatureData = new ccs.ArmatureData()),
        (this.armatureData.name = a),
        (e = new ccs.AnimationData()),
        (e.name = a),
        d.addArmatureData(a, this.armatureData),
        d.addAnimationData(a, e),
        this.animation.setAnimationData(e);
    this._renderCmd.initShaderCache();
    this.setCascadeOpacityEnabled(!0);
    this.setCascadeColorEnabled(!0);
    return !0;
  },
  visit: function (a) {
    var b = this._renderCmd;
    a = a ? a._renderCmd : null;
    this._visible ? (b.visit(a), (b._dirtyFlag = 0)) : b._propagateFlagsDown(a);
  },
  addChild: function (a, b, d) {
    a instanceof ccui.Widget
      ? cc.log(
          "Armature doesn't support to add Widget as its child, it will be fix soon."
        )
      : cc.Node.prototype.addChild.call(this, a, b, d);
  },
  createBone: function (a) {
    var b = this.getBone(a);
    if (b) return b;
    var b = this.armatureData.getBoneData(a),
      d = b.parentName,
      e = null;
    d
      ? (this.createBone(d), (e = new ccs.Bone(a)), this.addBone(e, d))
      : ((e = new ccs.Bone(a)), this.addBone(e, ""));
    e.setBoneData(b);
    e.getDisplayManager().changeDisplayWithIndex(-1, !1);
    return e;
  },
  addBone: function (a, b) {
    cc.assert(a, "Argument must be non-nil");
    var d = this._boneDic;
    a.getName() &&
      cc.assert(!d[a.getName()], "bone already added. It can't be added again");
    if (b) {
      var e = d[b];
      e ? e.addChildBone(a) : this._topBoneList.push(a);
    } else this._topBoneList.push(a);
    a.setArmature(this);
    d[a.getName()] = a;
    this.addChild(a);
  },
  removeBone: function (a, b) {
    cc.assert(a, "bone must be added to the bone dictionary!");
    a.setArmature(null);
    a.removeFromParent(b);
    cc.arrayRemoveObject(this._topBoneList, a);
    delete this._boneDic[a.getName()];
    this.removeChild(a, !0);
  },
  getBone: function (a) {
    return this._boneDic[a];
  },
  changeBoneParent: function (a, b) {
    cc.assert(a, "bone must be added to the bone dictionary!");
    var d = a.getParentBone();
    d && (cc.arrayRemoveObject(d.getChildren(), a), a.setParentBone(null));
    b &&
      ((d = this._boneDic[b])
        ? (d.addChildBone(a), cc.arrayRemoveObject(this._topBoneList, a))
        : this._topBoneList.push(a));
  },
  getBoneDic: function () {
    return this._boneDic;
  },
  updateOffsetPoint: function () {
    var a = this.getBoundingBox();
    this.setContentSize(a);
    var b = this._offsetPoint;
    b.x = -a.x;
    b.y = -a.y;
    0 !== a.width &&
      0 !== a.height &&
      this.setAnchorPoint(b.x / a.width, b.y / a.height);
  },
  getOffsetPoints: function () {
    return { x: this._offsetPoint.x, y: this._offsetPoint.y };
  },
  setAnimation: function (a) {
    this.animation = a;
  },
  getAnimation: function () {
    return this.animation;
  },
  getArmatureTransformDirty: function () {
    return this._armatureTransformDirty;
  },
  update: function (a) {
    this.animation.update(a);
    for (var b = this._topBoneList, d = 0; d < b.length; d++) b[d].update(a);
    this._armatureTransformDirty = !1;
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.scheduleUpdate();
  },
  onExit: function () {
    cc.Node.prototype.onExit.call(this);
    this.unscheduleUpdate();
  },
  getBoundingBox: function () {
    for (
      var a,
        b,
        d,
        e = 0,
        f = !0,
        g = cc.rect(0, 0, 0, 0),
        h = this._children,
        k = h.length,
        m = 0;
      m < k;
      m++
    )
      if ((a = h[m]))
        if (
          ((e = a.getDisplayManager().getBoundingBox()),
          0 !== e.x || 0 !== e.y || 0 !== e.width || 0 !== e.height)
        )
          f
            ? ((a = e.x),
              (b = e.y),
              (d = e.x + e.width),
              (e = e.y + e.height),
              (f = !1))
            : ((a = e.x < g.x ? e.x : g.x),
              (b = e.y < g.y ? e.y : g.y),
              (d =
                e.x + e.width > g.x + g.width ? e.x + e.width : g.x + g.width),
              (e =
                e.y + e.height > g.y + g.height
                  ? e.y + e.height
                  : g.y + g.height)),
            (g.x = a),
            (g.y = b),
            (g.width = d - a),
            (g.height = e - b);
    return cc.rectApplyAffineTransform(g, this.getNodeToParentTransform());
  },
  getBoneAtPoint: function (a, b) {
    for (var d = this._children, e = d.length - 1; 0 <= e; e--) {
      var f = d[e];
      if (f instanceof ccs.Bone && f.getDisplayManager().containPoint(a, b))
        return f;
    }
    return null;
  },
  setParentBone: function (a) {
    this._parentBone = a;
    a = this._boneDic;
    for (var b in a) a[b].setArmature(this);
  },
  getParentBone: function () {
    return this._parentBone;
  },
  drawContour: function () {
    cc._drawingUtil.setDrawColor(255, 255, 255, 255);
    cc._drawingUtil.setLineWidth(1);
    var a = this._boneDic,
      b;
    for (b in a) {
      var d = a[b].getColliderDetector();
      if (d)
        for (var d = d.getColliderBodyList(), e = 0; e < d.length; e++) {
          var f = d[e].getCalculatedVertexList();
          cc._drawingUtil.drawPoly(f, f.length, !0);
        }
    }
  },
  setBody: function (a) {
    if (this._body !== a) {
      this._body = a;
      this._body.data = this;
      var b, d;
      a = this._children;
      for (var e = 0; e < a.length; e++)
        if (((b = a[e]), b instanceof ccs.Bone)) {
          b = b.getDisplayManager().getDecorativeDisplayList();
          for (var f = 0; f < b.length; f++)
            (d = b[f]), (d = d.getColliderDetector()) && d.setBody(this._body);
        }
    }
  },
  getShapeList: function () {
    return this._body ? this._body.shapeList : null;
  },
  getBody: function () {
    return this._body;
  },
  setBlendFunc: function (a, b) {
    void 0 === b
      ? ((this._blendFunc.src = a.src), (this._blendFunc.dst = a.dst))
      : ((this._blendFunc.src = a), (this._blendFunc.dst = b));
  },
  getBlendFunc: function () {
    return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst);
  },
  setColliderFilter: function (a) {
    var b = this._boneDic,
      d;
    for (d in b) b[d].setColliderFilter(a);
  },
  getArmatureData: function () {
    return this.armatureData;
  },
  setArmatureData: function (a) {
    this.armatureData = a;
  },
  getBatchNode: function () {
    return this.batchNode;
  },
  setBatchNode: function (a) {
    this.batchNode = a;
  },
  getVersion: function () {
    return this.version;
  },
  setVersion: function (a) {
    this.version = a;
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new ccs.Armature.CanvasRenderCmd(this)
      : new ccs.Armature.WebGLRenderCmd(this);
  },
});
_p = ccs.Armature.prototype;
cc.defineGetterSetter(_p, "parentBone", _p.getParentBone, _p.setParentBone);
cc.defineGetterSetter(_p, "body", _p.getBody, _p.setBody);
cc.defineGetterSetter(_p, "colliderFilter", null, _p.setColliderFilter);
_p = null;
ccs.Armature.create = function (a, b) {
  return new ccs.Armature(a, b);
};
(function () {
  ccs.Armature.RenderCmd = {
    _updateAnchorPointInPoint: function () {
      var a = this._node,
        b = a._contentSize,
        d = a._anchorPoint,
        a = a._offsetPoint;
      this._anchorPointInPoints.x = b.width * d.x - a.x;
      this._anchorPointInPoints.y = b.height * d.y - a.y;
      this._realAnchorPointInPoints.x = b.width * d.x;
      this._realAnchorPointInPoints.y = b.height * d.y;
      this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
    },
    getAnchorPointInPoints: function () {
      return cc.p(this._realAnchorPointInPoints);
    },
  };
})();
(function () {
  ccs.Armature.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._realAnchorPointInPoints = new cc.Point(0, 0);
    this._canUseDirtyRegion = !0;
    this._startRenderCmd = new cc.CustomRenderCmd(this, this._startCmdCallback);
    this._RestoreRenderCmd = new cc.CustomRenderCmd(
      this,
      this._RestoreCmdCallback
    );
    this._startRenderCmd._canUseDirtyRegion = !0;
    this._RestoreRenderCmd._canUseDirtyRegion = !0;
    this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
    this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
  };
  var a = (ccs.Armature.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  cc.inject(ccs.Armature.RenderCmd, a);
  a.constructor = ccs.Armature.CanvasRenderCmd;
  a._startCmdCallback = function (a, d, e) {
    var f = this._node._parent;
    this.transform(f ? f._renderCmd : null);
    a = a || cc._renderContext;
    a.save();
    a._switchToArmatureMode(!0, this._worldTransform, d, e);
  };
  a.transform = function (a, d) {
    this.originTransform(a, d);
    for (var e = this._node._children, f = 0, g = e.length; f < g; f++) {
      var h = e[f],
        k = h._renderCmd;
      if (h && h.getDisplayRenderNode) {
        var m = h.getDisplayRenderNodeType(),
          n = h.getDisplayRenderNode();
        if (n && n._renderCmd) {
          n = n._renderCmd;
          n.transform(null);
          m !== ccs.DISPLAY_TYPE_ARMATURE &&
            m !== ccs.DISPLAY_TYPE_SPRITE &&
            cc.affineTransformConcatIn(n._worldTransform, h._worldTransform);
          var m = cc.Node._dirtyFlags,
            p = n._dirtyFlag,
            r = k._dirtyFlag,
            s = r & m.colorDirty,
            r = r & m.opacityDirty;
          s && k._updateDisplayColor(this._displayedColor);
          r && k._updateDisplayOpacity(this._displayedOpacity);
          (s || r) && k._updateColor();
          k = h._renderCmd._displayedColor;
          h = h._renderCmd._displayedOpacity;
          s = p & m.colorDirty;
          r = p & m.opacityDirty;
          s && n._updateDisplayColor(k);
          r && n._updateDisplayOpacity(h);
          (s || r) && n._updateColor();
        }
      }
    }
  };
  a._RestoreCmdCallback = function (a) {
    this._cacheDirty = !1;
    a._switchToArmatureMode(!1);
    a.restore();
  };
  a.initShaderCache = function () {};
  a.setShaderProgram = function () {};
  a.updateChildPosition = function (a, d) {
    a.visit();
  };
  a.rendering = function (a, d, e) {
    for (var f = this._node._children, g = 0, h = f.length; g < h; g++) {
      var k = f[g];
      if (k && k.getDisplayRenderNode) {
        var m = k.getDisplayRenderNode();
        if (null !== m)
          switch (
            (k._renderCmd._syncStatus(this), k.getDisplayRenderNodeType())
          ) {
            case ccs.DISPLAY_TYPE_SPRITE:
              m.visit(k);
              break;
            case ccs.DISPLAY_TYPE_ARMATURE:
              m._renderCmd.rendering(a, d, e);
              break;
            default:
              m.visit(k);
          }
      } else k instanceof cc.Node && this._visitNormalChild(k);
    }
  };
  a._visitNormalChild = function (a) {
    if (a) {
      var d = a._renderCmd;
      if (a._visible) {
        d._curLevel = this._curLevel + 1;
        var e,
          f = a._children,
          g;
        d._syncStatus(this);
        d.transform(null);
        var h = f.length;
        if (0 < h) {
          a.sortAllChildren();
          for (e = 0; e < h; e++)
            if (((g = f[e]), 0 > g._localZOrder)) g.visit(a);
            else break;
          for (cc.renderer.pushRenderCommand(d); e < h; e++) f[e].visit(a);
        } else cc.renderer.pushRenderCommand(d);
        this._dirtyFlag = 0;
      }
    }
  };
  a.visit = function (a) {
    var d = this._node;
    d._visible &&
      (this._syncStatus(a),
      d.sortAllChildren(),
      cc.renderer.pushRenderCommand(this._startRenderCmd),
      this.rendering(),
      cc.renderer.pushRenderCommand(this._RestoreRenderCmd),
      (this._cacheDirty = !1));
  };
})();
(function () {
  ccs.Armature.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._parentCmd = null;
    this._realAnchorPointInPoints = new cc.Point(0, 0);
    this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
    this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 };
  };
  var a = (ccs.Armature.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  cc.inject(ccs.Armature.RenderCmd, a);
  a.constructor = ccs.Armature.WebGLRenderCmd;
  a.uploadData = function (a, d, e) {
    a = this._node;
    e = this._parentCmd || this;
    for (
      var f = a._children,
        g = cc.BlendFunc.ALPHA_PREMULTIPLIED,
        h = cc.BlendFunc.ALPHA_NON_PREMULTIPLIED,
        k = 0,
        m = f.length;
      k < m;
      k++
    ) {
      var n = f[k],
        p = n._renderCmd;
      if (n && n.getDisplayRenderNode) {
        var r = n.getDisplayRenderNode();
        if (null !== r)
          switch (((d = r._renderCmd), n.getDisplayRenderNodeType())) {
            case ccs.DISPLAY_TYPE_SPRITE:
              r instanceof ccs.Skin &&
                (r.setShaderProgram(this._shaderProgram),
                this._updateColorAndOpacity(d, n),
                d.transform(e),
                (p = n.getBlendFunc()),
                p.src !== g.src || p.dst !== g.dst
                  ? r.setBlendFunc(n.getBlendFunc())
                  : ((n = r.getTexture()),
                    a._blendFunc.src === g.src &&
                    a._blendFunc.dst === g.dst &&
                    n &&
                    !n.hasPremultipliedAlpha()
                      ? r.setBlendFunc(h)
                      : r.setBlendFunc(a._blendFunc)),
                cc.renderer._uploadBufferData(d));
              break;
            case ccs.DISPLAY_TYPE_ARMATURE:
              r.setShaderProgram(this._shaderProgram),
                this._updateColorAndOpacity(d, n),
                (d._parentCmd = this);
            default:
              p._syncStatus(e),
                d._syncStatus(p),
                d.uploadData
                  ? cc.renderer._uploadBufferData(d)
                  : d.rendering &&
                    (cc.renderer._batchRendering(),
                    d.rendering(cc._renderContext));
          }
      } else
        n instanceof cc.Node &&
          (n.setShaderProgram(this._shaderProgram),
          p._syncStatus(e),
          p.uploadData
            ? cc.renderer._uploadBufferData(p)
            : p.rendering &&
              (cc.renderer._batchRendering(), p.rendering(cc._renderContext)));
    }
    this._parentCmd = null;
    return 0;
  };
  a.initShaderCache = function () {
    this._shaderProgram = cc.shaderCache.programForKey(
      cc.SHADER_SPRITE_POSITION_TEXTURECOLOR
    );
  };
  a.setShaderProgram = function (a) {
    this._glProgramState = cc.GLProgramState.getOrCreateWithGLProgram(a);
  };
  a._updateColorAndOpacity = function (a, d) {
    var e = d._renderCmd._displayedColor,
      f = d._renderCmd._displayedOpacity,
      g = cc.Node._dirtyFlags,
      h = a._dirtyFlag,
      k = h & g.colorDirty,
      g = h & g.opacityDirty;
    k && a._updateDisplayColor(e);
    g && a._updateDisplayOpacity(f);
    (k || g) && a._updateColor();
  };
  a.visit = function (a) {
    var d = this._node;
    if (d._visible) {
      if ((a = a || this.getParentRenderCmd()))
        this._curLevel = a._curLevel + 1;
      this._syncStatus(a);
      d.sortAllChildren();
      a = cc.renderer;
      var e = d._children,
        f,
        g = e.length;
      isNaN(d._customZ) &&
        ((d._vertexZ = a.assignedZ), (a.assignedZ += a.assignedZStep));
      for (f = 0; f < g; f++)
        if (((d = e[f]), 0 > d._localZOrder))
          isNaN(d._customZ) &&
            ((d._vertexZ = a.assignedZ), (a.assignedZ += a.assignedZStep));
        else break;
      for (a.pushRenderCommand(this); f < g; f++)
        (d = e[f]),
          isNaN(d._customZ) &&
            ((d._vertexZ = a.assignedZ), (a.assignedZ += a.assignedZStep));
      this._dirtyFlag = 0;
    }
  };
})();
ccs.Bone = ccs.Node.extend({
  _boneData: null,
  _armature: null,
  _childArmature: null,
  _displayManager: null,
  ignoreMovementBoneData: !1,
  _tween: null,
  _tweenData: null,
  _parentBone: null,
  _boneTransformDirty: !1,
  _worldTransform: null,
  _blendFunc: null,
  blendDirty: !1,
  _worldInfo: null,
  _armatureParentBone: null,
  _dataVersion: 0,
  _className: "Bone",
  ctor: function (a) {
    cc.Node.prototype.ctor.call(this);
    this._displayManager = this._tween = this._boneData = this._childArmature = this._armature = this._parentBone = this._tweenData = null;
    this.ignoreMovementBoneData = !1;
    this._worldTransform = cc.affineTransformMake(1, 0, 0, 1, 0, 0);
    this._boneTransformDirty = !0;
    this._blendFunc = new cc.BlendFunc(cc.BLEND_SRC, cc.BLEND_DST);
    this.blendDirty = !1;
    this._armatureParentBone = this._worldInfo = null;
    this._dataVersion = 0;
    ccs.Bone.prototype.init.call(this, a);
  },
  init: function (a) {
    a && (this._name = a);
    this._tweenData = new ccs.FrameData();
    this._tween = new ccs.Tween(this);
    this._displayManager = new ccs.DisplayManager(this);
    this._worldInfo = new ccs.BaseData();
    this._boneData = new ccs.BaseData();
    return !0;
  },
  setBoneData: function (a) {
    cc.assert(a, "_boneData must not be null");
    this._boneData !== a && (this._boneData = a);
    this.setName(this._boneData.name);
    this._localZOrder = this._boneData.zOrder;
    this._displayManager.initDisplayList(a);
  },
  getBoneData: function () {
    return this._boneData;
  },
  setArmature: function (a) {
    (this._armature = a)
      ? (this._tween.setAnimation(this._armature.getAnimation()),
        (this._dataVersion = this._armature.getArmatureData().dataVersion),
        (this._armatureParentBone = this._armature.getParentBone()))
      : (this._armatureParentBone = null);
  },
  getArmature: function () {
    return this._armature;
  },
  update: function (a) {
    this._parentBone &&
      (this._boneTransformDirty =
        this._boneTransformDirty || this._parentBone.isTransformDirty());
    this._armatureParentBone &&
      !this._boneTransformDirty &&
      (this._boneTransformDirty = this._armatureParentBone.isTransformDirty());
    if (this._boneTransformDirty) {
      var b = this._tweenData;
      this._dataVersion >= ccs.CONST_VERSION_COMBINED &&
        (ccs.TransformHelp.nodeConcat(b, this._boneData),
        (b.scaleX -= 1),
        (b.scaleY -= 1));
      var d = this._worldInfo;
      d.copy(b);
      d.x = b.x + this._position.x;
      d.y = b.y + this._position.y;
      d.scaleX = b.scaleX * this._scaleX;
      d.scaleY = b.scaleY * this._scaleY;
      d.skewX = b.skewX + this._skewX + cc.degreesToRadians(this._rotationX);
      d.skewY = b.skewY + this._skewY - cc.degreesToRadians(this._rotationY);
      this._parentBone
        ? this._applyParentTransform(this._parentBone)
        : this._armatureParentBone &&
          this._applyParentTransform(this._armatureParentBone);
      ccs.TransformHelp.nodeToMatrix(d, this._worldTransform);
      this._armatureParentBone &&
        cc.affineTransformConcatIn(
          this._worldTransform,
          this._armature.getNodeToParentTransform()
        );
    }
    ccs.displayFactory.updateDisplay(
      this,
      a,
      this._boneTransformDirty || this._armature.getArmatureTransformDirty()
    );
    for (b = 0; b < this._children.length; b++) this._children[b].update(a);
    this._boneTransformDirty = !1;
  },
  _applyParentTransform: function (a) {
    var b = this._worldInfo,
      d = a._worldTransform;
    a = a._worldInfo;
    var e = b.x,
      f = b.y;
    b.x = e * d.a + f * d.c + a.x;
    b.y = e * d.b + f * d.d + a.y;
    b.scaleX *= a.scaleX;
    b.scaleY *= a.scaleY;
    b.skewX += a.skewX;
    b.skewY += a.skewY;
  },
  setBlendFunc: function (a, b) {
    var d = this._blendFunc,
      e,
      f;
    void 0 === b ? ((e = a.src), (f = a.dst)) : ((e = a), (f = b));
    if (d.src !== e || d.dst !== f)
      (d.src = e), (d.dst = f), (this.blendDirty = !0);
  },
  updateColor: function () {
    var a = this._displayManager.getDisplayRenderNode();
    if (null !== a) {
      var b = this._renderCmd;
      a.setColor(
        cc.color(
          (b._displayedColor.r * this._tweenData.r) / 255,
          (b._displayedColor.g * this._tweenData.g) / 255,
          (b._displayedColor.b * this._tweenData.b) / 255
        )
      );
      a.setOpacity((b._displayedOpacity * this._tweenData.a) / 255);
    }
  },
  updateZOrder: function () {
    this._armature.getArmatureData().dataVersion >= ccs.CONST_VERSION_COMBINED
      ? this.setLocalZOrder(this._tweenData.zOrder + this._boneData.zOrder)
      : this.setLocalZOrder(this._tweenData.zOrder);
  },
  addChildBone: function (a) {
    cc.assert(a, "Argument must be non-nil");
    cc.assert(!a.parentBone, "child already added. It can't be added again");
    0 > this._children.indexOf(a) &&
      (this._children.push(a), a.setParentBone(this));
  },
  removeChildBone: function (a, b) {
    if (0 < this._children.length && -1 !== this._children.getIndex(a)) {
      if (b)
        for (var d = a._children, e = 0; e < d.length; e++)
          a.removeChildBone(d[e], b);
      a.setParentBone(null);
      a.getDisplayManager().setCurrentDecorativeDisplay(null);
      cc.arrayRemoveObject(this._children, a);
    }
  },
  removeFromParent: function (a) {
    this._parentBone && this._parentBone.removeChildBone(this, a);
  },
  setParentBone: function (a) {
    this._parentBone = a;
  },
  getParentBone: function () {
    return this._parentBone;
  },
  setChildArmature: function (a) {
    this._childArmature !== a &&
      (null == a &&
        this._childArmature &&
        this._childArmature.setParentBone(null),
      (this._childArmature = a));
  },
  getChildArmature: function () {
    return this._childArmature;
  },
  getTween: function () {
    return this._tween;
  },
  setLocalZOrder: function (a) {
    this._localZOrder !== a && cc.Node.prototype.setLocalZOrder.call(this, a);
  },
  getNodeToArmatureTransform: function () {
    return this._worldTransform;
  },
  getNodeToWorldTransform: function () {
    return cc.affineTransformConcat(
      this._worldTransform,
      this._armature.getNodeToWorldTransform()
    );
  },
  getDisplayRenderNode: function () {
    return this._displayManager.getDisplayRenderNode();
  },
  getDisplayRenderNodeType: function () {
    return this._displayManager.getDisplayRenderNodeType();
  },
  addDisplay: function (a, b) {
    return this._displayManager.addDisplay(a, b || 0);
  },
  removeDisplay: function (a) {
    this._displayManager.removeDisplay(a);
  },
  changeDisplayByIndex: function (a, b) {
    cc.log(
      "changeDisplayByIndex is deprecated. Use changeDisplayWithIndex instead."
    );
    this.changeDisplayWithIndex(a, b);
  },
  changeDisplayByName: function (a, b) {
    cc.log(
      "changeDisplayByName is deprecated. Use changeDisplayWithName instead."
    );
    this.changeDisplayWithName(a, b);
  },
  changeDisplayWithIndex: function (a, b) {
    this._displayManager.changeDisplayWithIndex(a, b);
  },
  changeDisplayWithName: function (a, b) {
    this._displayManager.changeDisplayWithName(a, b);
  },
  getColliderDetector: function () {
    var a = this._displayManager.getCurrentDecorativeDisplay();
    return a && (a = a.getColliderDetector()) ? a : null;
  },
  setColliderFilter: function (a) {
    for (
      var b = this._displayManager.getDecorativeDisplayList(), d = 0;
      d < b.length;
      d++
    ) {
      var e = b[d].getColliderDetector();
      e && e.setColliderFilter(a);
    }
  },
  getColliderFilter: function () {
    var a = this.displayManager.getCurrentDecorativeDisplay();
    return a && (a = a.getColliderDetector()) ? a.getColliderFilter() : null;
  },
  setTransformDirty: function (a) {
    this._boneTransformDirty = a;
  },
  isTransformDirty: function () {
    return this._boneTransformDirty;
  },
  getDisplayManager: function () {
    return this._displayManager;
  },
  setIgnoreMovementBoneData: function (a) {
    this._ignoreMovementBoneData = a;
  },
  isIgnoreMovementBoneData: function () {
    return this._ignoreMovementBoneData;
  },
  getBlendFunc: function () {
    return new cc.BlendFunc(this._blendFunc.src, this._blendFunc.dst);
  },
  setBlendDirty: function (a) {
    this._blendDirty = a;
  },
  isBlendDirty: function () {
    return this._blendDirty;
  },
  getTweenData: function () {
    return this._tweenData;
  },
  getWorldInfo: function () {
    return this._worldInfo;
  },
  getChildrenBone: function () {
    return this._children;
  },
  nodeToArmatureTransform: function () {
    return this.getNodeToArmatureTransform();
  },
  nodeToWorldTransform: function () {
    return this.getNodeToWorldTransform();
  },
  getColliderBodyList: function () {
    var a = this.getColliderDetector();
    return a ? a.getColliderBodyList() : null;
  },
  getIgnoreMovementBoneData: function () {
    return this.isIgnoreMovementBoneData();
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new ccs.Bone.CanvasRenderCmd(this)
      : new ccs.Bone.WebGLRenderCmd(this);
  },
});
_p = ccs.Bone.prototype;
cc.defineGetterSetter(_p, "boneData", _p.getBoneData, _p.setBoneData);
cc.defineGetterSetter(_p, "armature", _p.getArmature, _p.setArmature);
cc.defineGetterSetter(
  _p,
  "childArmature",
  _p.getChildArmature,
  _p.setChildArmature
);
cc.defineGetterSetter(_p, "childrenBone", _p.getChildrenBone);
cc.defineGetterSetter(_p, "tween", _p.getTween);
cc.defineGetterSetter(_p, "tweenData", _p.getTweenData);
cc.defineGetterSetter(
  _p,
  "colliderFilter",
  _p.getColliderFilter,
  _p.setColliderFilter
);
_p = null;
ccs.Bone.create = function (a) {
  return new ccs.Bone(a);
};
ccs.Bone.RenderCmd = {
  _updateColor: function () {
    var a = this._node,
      b = a._displayManager.getDisplayRenderNode();
    if (null !== b) {
      var d = b._renderCmd;
      b.setColor(this._displayedColor);
      b.setOpacity(this._displayedOpacity);
      d._syncDisplayColor(a._tweenData);
      d._syncDisplayOpacity(a._tweenData.a);
      d._updateColor();
    }
  },
  transform: function (a, b) {
    this._transform ||
      ((this._transform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }),
      (this._worldTransform = { a: 1, b: 0, c: 0, d: 1, tx: 0, ty: 0 }));
    var d = this._node,
      e = this._transform,
      f = this._worldTransform,
      g = a ? a._worldTransform : null;
    g &&
      (this.originTransform(),
      cc.affineTransformConcatIn(e, d._worldTransform));
    g
      ? ((f.a = e.a * g.a + e.b * g.c),
        (f.b = e.a * g.b + e.b * g.d),
        (f.c = e.c * g.a + e.d * g.c),
        (f.d = e.c * g.b + e.d * g.d),
        (f.tx = e.tx * g.a + e.ty * g.c + g.tx),
        (f.ty = e.tx * g.b + e.ty * g.d + g.ty))
      : ((f.a = e.a),
        (f.b = e.b),
        (f.c = e.c),
        (f.d = e.d),
        (f.tx = e.tx),
        (f.ty = e.ty));
  },
};
(function () {
  ccs.Bone.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !1;
  };
  var a = (ccs.Bone.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  cc.inject(ccs.Bone.RenderCmd, a);
  a.constructor = ccs.Bone.CanvasRenderCmd;
})();
(function () {
  if (cc.Node.WebGLRenderCmd) {
    ccs.Bone.WebGLRenderCmd = function (a) {
      this._rootCtor(a);
      this._needDraw = !1;
    };
    var a = (ccs.Bone.WebGLRenderCmd.prototype = Object.create(
      cc.Node.WebGLRenderCmd.prototype
    ));
    cc.inject(ccs.Bone.RenderCmd, a);
    a.constructor = ccs.Bone.WebGLRenderCmd;
  }
})();
ccs.FRAME_TYPE_MOVE = 0;
ccs.FRAME_TYPE_SCALE = 1;
ccs.FRAME_TYPE_ROTATE = 2;
ccs.FRAME_TYPE_TINT = 3;
ccs.FRAME_TYPE_FADE = 4;
ccs.FRAME_TYPE_MAX = 5;
ccs.FrameEaseType = {
  CUSTOM: -1,
  LINEAR: 0,
  SINE_EASEIN: 1,
  SINE_EASEOUT: 2,
  SINE_EASEINOUT: 3,
  QUAD_EASEIN: 4,
  QUAD_EASEOUT: 5,
  QUAD_EASEINOUT: 6,
  CUBIC_EASEIN: 7,
  CUBIC_EASEOUT: 8,
  CUBIC_EASEINOUT: 9,
  QUART_EASEIN: 10,
  QUART_EASEOUT: 11,
  QUART_EASEINOUT: 12,
  QUINT_EASEIN: 13,
  QUINT_EASEOUT: 14,
  QUINT_EASEINOUT: 15,
  EXPO_EASEIN: 16,
  EXPO_EASEOUT: 17,
  EXPO_EASEINOUT: 18,
  CIRC_EASEIN: 19,
  CIRC_EASEOUT: 20,
  CIRC_EASEINOUT: 21,
  ELASTIC_EASEIN: 22,
  ELASTIC_EASEOUT: 23,
  ELASTIC_EASEINOUT: 24,
  BACK_EASEIN: 25,
  BACK_EASEOUT: 26,
  BACK_EASEINOUT: 27,
  BOUNCE_EASEIN: 28,
  BOUNCE_EASEOUT: 29,
  BOUNCE_EASEINOUT: 30,
  TWEEN_EASING_MAX: 1e3,
};
ccs.ActionFrame = ccs.Class.extend({
  frameType: 0,
  easingType: 0,
  frameIndex: 0,
  _Parameter: null,
  time: 0,
  ctor: function () {
    this.frameType = 0;
    this.easingType = ccs.FrameEaseType.LINEAR;
    this.time = this.frameIndex = 0;
  },
  getAction: function (a, b) {
    cc.log("Need a definition of \x3cgetAction\x3e for ActionFrame");
    return null;
  },
  _getEasingAction: function (a) {
    if (null === a) return console.error("Action cannot be null!"), null;
    var b;
    switch (this.easingType) {
      case ccs.FrameEaseType.LINEAR:
        b = a;
        break;
      case ccs.FrameEaseType.SINE_EASEIN:
        b = a.easing(cc.easeSineIn());
        break;
      case ccs.FrameEaseType.SINE_EASEOUT:
        b = a.easing(cc.easeSineOut());
        break;
      case ccs.FrameEaseType.SINE_EASEINOUT:
        b = a.easing(cc.easeSineInOut());
        break;
      case ccs.FrameEaseType.QUAD_EASEIN:
        b = a.easing(cc.easeQuadraticActionIn());
        break;
      case ccs.FrameEaseType.QUAD_EASEOUT:
        b = a.easing(cc.easeQuadraticActionOut());
        break;
      case ccs.FrameEaseType.QUAD_EASEINOUT:
        b = a.easing(cc.easeQuadraticActionInOut());
        break;
      case ccs.FrameEaseType.CUBIC_EASEIN:
        b = a.easing(cc.easeCubicActionIn());
        break;
      case ccs.FrameEaseType.CUBIC_EASEOUT:
        b = a.easing(cc.easeCubicActionOut());
        break;
      case ccs.FrameEaseType.CUBIC_EASEINOUT:
        b = a.easing(cc.easeCubicActionInOut());
        break;
      case ccs.FrameEaseType.QUART_EASEIN:
        b = a.easing(cc.easeQuarticActionIn());
        break;
      case ccs.FrameEaseType.QUART_EASEOUT:
        b = a.easing(cc.easeQuarticActionOut());
        break;
      case ccs.FrameEaseType.QUART_EASEINOUT:
        b = a.easing(cc.easeQuarticActionInOut());
        break;
      case ccs.FrameEaseType.QUINT_EASEIN:
        b = a.easing(cc.easeQuinticActionIn());
        break;
      case ccs.FrameEaseType.QUINT_EASEOUT:
        b = a.easing(cc.easeQuinticActionOut());
        break;
      case ccs.FrameEaseType.QUINT_EASEINOUT:
        b = a.easing(cc.easeQuinticActionInOut());
        break;
      case ccs.FrameEaseType.EXPO_EASEIN:
        b = a.easing(cc.easeExponentialIn());
        break;
      case ccs.FrameEaseType.EXPO_EASEOUT:
        b = a.easing(cc.easeExponentialOut());
        break;
      case ccs.FrameEaseType.EXPO_EASEINOUT:
        b = a.easing(cc.easeExponentialInOut());
        break;
      case ccs.FrameEaseType.CIRC_EASEIN:
        b = a.easing(cc.easeCircleActionIn());
        break;
      case ccs.FrameEaseType.CIRC_EASEOUT:
        b = a.easing(cc.easeCircleActionOut());
        break;
      case ccs.FrameEaseType.CIRC_EASEINOUT:
        b = a.easing(cc.easeCircleActionInOut());
        break;
      case ccs.FrameEaseType.ELASTIC_EASEIN:
        b = a.easing(cc.easeElasticIn());
        break;
      case ccs.FrameEaseType.ELASTIC_EASEOUT:
        b = a.easing(cc.easeElasticOut());
        break;
      case ccs.FrameEaseType.ELASTIC_EASEINOUT:
        b = a.easing(cc.easeElasticInOut());
        break;
      case ccs.FrameEaseType.BACK_EASEIN:
        b = a.easing(cc.easeBackIn());
        break;
      case ccs.FrameEaseType.BACK_EASEOUT:
        b = a.easing(cc.easeBackOut());
        break;
      case ccs.FrameEaseType.BACK_EASEINOUT:
        b = a.easing(cc.easeBackInOut());
        break;
      case ccs.FrameEaseType.BOUNCE_EASEIN:
        b = a.easing(cc.easeBounceIn());
        break;
      case ccs.FrameEaseType.BOUNCE_EASEOUT:
        b = a.easing(cc.easeBounceOut());
        break;
      case ccs.FrameEaseType.BOUNCE_EASEINOUT:
        b = a.easing(cc.easeBounceInOut());
    }
    return b;
  },
  setEasingParameter: function (a) {
    this._Parameter = [];
    for (var b = 0; b < a.length; b++) this._Parameter.push(a[b]);
  },
  setEasingType: function (a) {
    this.easingType = a;
  },
});
ccs.ActionMoveFrame = ccs.ActionFrame.extend({
  _position: null,
  ctor: function () {
    ccs.ActionFrame.prototype.ctor.call(this);
    this._position = cc.p(0, 0);
    this.frameType = ccs.FRAME_TYPE_MOVE;
  },
  setPosition: function (a, b) {
    void 0 === b
      ? ((this._position.x = a.x), (this._position.y = a.y))
      : ((this._position.x = a), (this._position.y = b));
  },
  getPosition: function () {
    return this._position;
  },
  getAction: function (a) {
    return this._getEasingAction(cc.moveTo(a, this._position));
  },
});
ccs.ActionScaleFrame = ccs.ActionFrame.extend({
  _scaleX: 1,
  _scaleY: 1,
  ctor: function () {
    ccs.ActionFrame.prototype.ctor.call(this);
    this._scaleY = this._scaleX = 1;
    this.frameType = ccs.FRAME_TYPE_SCALE;
  },
  setScaleX: function (a) {
    this._scaleX = a;
  },
  getScaleX: function () {
    return this._scaleX;
  },
  setScaleY: function (a) {
    this._scaleY = a;
  },
  getScaleY: function () {
    return this._scaleY;
  },
  getAction: function (a) {
    return this._getEasingAction(cc.scaleTo(a, this._scaleX, this._scaleY));
  },
});
ccs.ActionRotationFrame = ccs.ActionFrame.extend({
  _rotation: 0,
  ctor: function () {
    ccs.ActionFrame.prototype.ctor.call(this);
    this._rotation = 0;
    this.frameType = ccs.FRAME_TYPE_ROTATE;
  },
  setRotation: function (a) {
    this._rotation = a;
  },
  getRotation: function () {
    return this._rotation;
  },
  getAction: function (a, b) {
    return void 0 === b
      ? this._getEasingAction(cc.rotateTo(a, this._rotation))
      : b instanceof cc.ActionRotationFrame
      ? this._getEasingAction(cc.rotateBy(a, this._rotation - b._rotation))
      : this.getAction(a);
  },
});
ccs.ActionFadeFrame = ccs.ActionFrame.extend({
  _opacity: 255,
  ctor: function () {
    ccs.ActionFrame.prototype.ctor.call(this);
    this._opacity = 255;
    this.frameType = ccs.FRAME_TYPE_FADE;
  },
  setOpacity: function (a) {
    this._opacity = a;
  },
  getOpacity: function () {
    return this._opacity;
  },
  getAction: function (a) {
    return this._getEasingAction(cc.fadeTo(a, this._opacity));
  },
});
ccs.ActionTintFrame = ccs.ActionFrame.extend({
  _color: null,
  ctor: function () {
    ccs.ActionFrame.prototype.ctor.call(this);
    this._color = cc.color(255, 255, 255, 255);
    this.frameType = ccs.FRAME_TYPE_TINT;
  },
  setColor: function (a) {
    var b = this._color;
    b.r = a.r;
    b.g = a.g;
    b.b = a.b;
  },
  getColor: function () {
    var a = this._color;
    return cc.color(a.r, a.g, a.b, a.a);
  },
  getAction: function (a) {
    return this._getEasingAction(
      cc.tintTo(a, this._color.r, this._color.g, this._color.b)
    );
  },
});
ccs.actionManager = {
  _actionDic: {},
  initWithDictionary: function (a, b, d) {
    var e = a.lastIndexOf("/");
    a = a.substr(e + 1, a.length);
    b = b.actionlist;
    for (var e = [], f = 0; f < b.length; f++) {
      var g = new ccs.ActionObject();
      g.initWithDictionary(b[f], d);
      e.push(g);
    }
    this._actionDic[a] = e;
  },
  getActionByName: function (a, b) {
    var d = a.lastIndexOf("/"),
      d = a.substr(d + 1, a.length),
      d = this._actionDic[d];
    if (!d) return null;
    for (var e = 0; e < d.length; e++) {
      var f = d[e];
      if (b === f.getName()) return f;
    }
    return null;
  },
  playActionByName: function (a, b, d) {
    (a = this.getActionByName(a, b)) && a.play(d);
  },
  stopActionByName: function (a, b) {
    var d = this.getActionByName(a, b);
    d && d.stop();
  },
  releaseActions: function () {
    this._actionDic = {};
  },
  clear: function () {
    this._actionDic = {};
  },
};
ccs.ActionNode = ccs.Class.extend({
  _currentFrameIndex: 0,
  _destFrameIndex: 0,
  _unitTime: 0,
  _actionTag: 0,
  _object: null,
  _actionSpawn: null,
  _action: null,
  _frameArray: null,
  _frameArrayNum: 0,
  ctor: function () {
    this._destFrameIndex = this._currentFrameIndex = 0;
    this._unitTime = 0.1;
    this._actionTag = 0;
    this._action = this._actionSpawn = this._object = null;
    this._frameArray = [];
    this._frameArrayNum = ccs.FRAME_TYPE_MAX;
    for (var a = 0; a < this._frameArrayNum; a++) this._frameArray.push([]);
  },
  initWithDictionary: function (a, b) {
    this.setActionTag(a.ActionTag);
    for (
      var d = a.actionframelist,
        e = ccui.helper.seekActionWidgetByActionTag(b, a.ActionTag),
        f = e instanceof ccui.Widget && !(e instanceof ccui.Layout),
        g = 0;
      g < d.length;
      g++
    ) {
      var h = d[g],
        k = h.frameid,
        m = h.tweenType;
      null == m && (m = 0);
      for (var n = h.tweenParameter, p = [], r = 0; r < n; r++)
        p.push(h.tweenParameter[r]);
      if (void 0 !== h.positionx) {
        var r = h.positionx,
          s = h.positiony;
        f &&
          e.parent &&
          ((n = e.parent.getAnchorPointInPoints()), (r += n.x), (s += n.y));
        n = new ccs.ActionMoveFrame();
        n.frameIndex = k;
        n.setEasingType(m);
        n.setEasingParameter(p);
        n.setPosition(r, s);
        r = this._frameArray[ccs.FRAME_TYPE_MOVE];
        r.push(n);
      }
      void 0 !== h.scalex &&
        ((r = h.scalex),
        (s = h.scaley),
        (n = new ccs.ActionScaleFrame()),
        (n.frameIndex = k),
        n.setEasingType(m),
        n.setEasingParameter(p),
        n.setScaleX(r),
        n.setScaleY(s),
        (r = this._frameArray[ccs.FRAME_TYPE_SCALE]),
        r.push(n));
      void 0 !== h.rotation &&
        ((r = h.rotation),
        (n = new ccs.ActionRotationFrame()),
        (n.frameIndex = k),
        n.setEasingType(m),
        n.setEasingParameter(p),
        n.setRotation(r),
        (r = this._frameArray[ccs.FRAME_TYPE_ROTATE]),
        r.push(n));
      void 0 !== h.opacity &&
        ((r = h.opacity),
        (n = new ccs.ActionFadeFrame()),
        (n.frameIndex = k),
        n.setEasingType(m),
        n.setEasingParameter(p),
        n.setOpacity(r),
        (r = this._frameArray[ccs.FRAME_TYPE_FADE]),
        r.push(n));
      void 0 !== h.colorr &&
        ((r = h.colorr),
        (s = h.colorg),
        (h = h.colorb),
        (n = new ccs.ActionTintFrame()),
        (n.frameIndex = k),
        n.setEasingType(m),
        n.setEasingParameter(p),
        n.setColor(cc.color(r, s, h)),
        (r = this._frameArray[ccs.FRAME_TYPE_TINT]),
        r.push(n));
    }
    this._initActionNodeFromRoot(b);
  },
  _initActionNodeFromRoot: function (a) {
    a instanceof ccui.Widget &&
      (a = ccui.helper.seekActionWidgetByActionTag(a, this.getActionTag())) &&
      this.setObject(a);
  },
  setUnitTime: function (a) {
    this._unitTime = a;
    this._refreshActionProperty();
  },
  getUnitTime: function () {
    return this._unitTime;
  },
  setActionTag: function (a) {
    this._actionTag = a;
  },
  getActionTag: function () {
    return this._actionTag;
  },
  setObject: function (a) {
    this._object = a;
  },
  getObject: function () {
    return this._object;
  },
  getActionNode: function () {
    return this._object instanceof cc.Node ? this._object : null;
  },
  insertFrame: function (a, b) {
    null != b && this._frameArray[b.frameType].splice(a, 0, b);
  },
  addFrame: function (a) {
    a && this._frameArray[a.frameType].push(a);
  },
  deleteFrame: function (a) {
    void 0 !== a && cc.arrayRemoveObject(this._frameArray[a.frameType], a);
  },
  clearAllFrame: function () {
    for (var a = 0; a < this._frameArrayNum; a++)
      this._frameArray[a].length = 0;
  },
  _refreshActionProperty: function () {
    if (!this._object) return null;
    for (var a = [], b = 0; b < this._frameArrayNum; b++) {
      var d = this._frameArray[b];
      if (!(0 >= d.length)) {
        for (var e = [], f = 0; f < d.length; f++) {
          var g = d[f],
            h = null;
          0 !== f
            ? ((h = (g.frameIndex - d[f - 1].frameIndex) * this.getUnitTime()),
              (h = g.getAction(h)))
            : (h = g.getAction(0));
          h && e.push(h);
        }
        e && ((d = cc.sequence(e)), null !== d && a.push(d));
      }
    }
    this._action = null;
    return (this._actionSpawn = cc.spawn(a));
  },
  playAction: function (a) {
    this._object &&
      this._actionSpawn &&
      ((this._action = a
        ? cc.sequence(this._actionSpawn, a)
        : cc.sequence(this._actionSpawn)),
      this._runAction());
  },
  _runAction: function () {
    var a = this.getActionNode();
    null !== a && null !== this._action && a.runAction(this._action);
  },
  stopAction: function () {
    var a = this.getActionNode();
    null !== a &&
      null !== this._action &&
      (this._action.isDone() || a.stopAction(this._action));
  },
  getFirstFrameIndex: function () {
    for (
      var a = 99999,
        b = !1,
        d = this._frameArray,
        e = 0,
        f = this._frameArrayNum;
      e < f;
      e++
    ) {
      var g = d[e];
      0 >= g.length || ((b = !0), (g = g[0].frameIndex), (a = a > g ? g : a));
    }
    b || (a = 0);
    return a;
  },
  getLastFrameIndex: function () {
    for (
      var a = -1, b = !1, d = this._frameArray, e = 0, f = this._frameArrayNum;
      e < f;
      e++
    ) {
      var g = d[e];
      0 >= g.length ||
        ((b = !0), (g = g[g.length - 1].frameIndex), (a = a < g ? g : a));
    }
    b || (a = 0);
    return a;
  },
  updateActionToTimeLine: function (a) {
    for (
      var b = !1, d = this.getUnitTime(), e = 0;
      e < this._frameArrayNum;
      e++
    ) {
      var f = this._frameArray[e];
      if (f)
        for (var g = 0; g < f.length; g++) {
          var h = f[g];
          if (h.frameIndex * d === a) {
            this._easingToFrame(1, 1, h);
            b = !0;
            break;
          } else if (h.frameIndex * d > a) {
            0 === g
              ? (this._easingToFrame(1, 1, h), (b = !1))
              : ((b = f[g - 1]),
                (f = (h.frameIndex - b.frameIndex) * d),
                (g = a - b.frameIndex * d),
                this._easingToFrame(f, 1, b),
                this._easingToFrame(f, g / f, h),
                (b = !0));
            break;
          }
        }
    }
    return b;
  },
  _easingToFrame: function (a, b, d) {
    a = d.getAction(a);
    d = this.getActionNode();
    null != a && null != d && (a.startWithTarget(d), a.update(b));
  },
  isActionDoneOnce: function () {
    return this._action ? this._action.isDone() : !0;
  },
});
ccs.ActionObject = ccs.Class.extend({
  _actionNodeList: null,
  _name: "",
  _loop: !1,
  _pause: !1,
  _playing: !1,
  _unitTime: 0,
  _currentTime: 0,
  _scheduler: null,
  _callback: null,
  _fTotalTime: 0,
  ctor: function () {
    this._actionNodeList = [];
    this._name = "";
    this._playing = this._pause = this._loop = !1;
    this._unitTime = 0.1;
    this._fTotalTime = this._currentTime = 0;
    this._scheduler = cc.director.getScheduler();
  },
  setName: function (a) {
    this._name = a;
  },
  getName: function () {
    return this._name;
  },
  setLoop: function (a) {
    this._loop = a;
  },
  getLoop: function () {
    return this._loop;
  },
  setUnitTime: function (a) {
    this._unitTime = a;
    a = this._actionNodeList.length;
    for (var b = 0; b < a; b++)
      this._actionNodeList[b].setUnitTime(this._unitTime);
  },
  getUnitTime: function () {
    return this._unitTime;
  },
  getCurrentTime: function () {
    return this._currentTime;
  },
  setCurrentTime: function (a) {
    this._currentTime = a;
  },
  getTotalTime: function () {
    return this._fTotalTime;
  },
  isPlaying: function () {
    return this._playing;
  },
  initWithDictionary: function (a, b) {
    this.setName(a.name);
    this.setLoop(a.loop);
    this.setUnitTime(a.unittime);
    for (var d = a.actionnodelist, e = 0, f = 0; f < d.length; f++) {
      var g = new ccs.ActionNode();
      g.initWithDictionary(d[f], b);
      g.setUnitTime(this.getUnitTime());
      this._actionNodeList.push(g);
      g = g.getLastFrameIndex() - g.getFirstFrameIndex();
      g > e && (e = g);
    }
    this._fTotalTime = e * this._unitTime;
  },
  addActionNode: function (a) {
    a && (this._actionNodeList.push(a), a.setUnitTime(this._unitTime));
  },
  removeActionNode: function (a) {
    null != a && cc.arrayRemoveObject(this._actionNodeList, a);
  },
  play: function (a) {
    this.stop();
    this.updateToFrameByTime(0);
    for (var b = this._actionNodeList, d = b.length, e = 0; e < d; e++)
      b[e].playAction(a);
    this._loop &&
      this._scheduler.schedule(
        this.simulationActionUpdate,
        this,
        0,
        cc.REPEAT_FOREVER,
        0,
        !1,
        this.__instanceId + ""
      );
    void 0 !== a && (this._callback = a);
  },
  pause: function () {
    this._pause = !0;
    this._playing = !1;
  },
  stop: function () {
    for (var a = this._actionNodeList, b = 0; b < a.length; b++)
      a[b].stopAction();
    this._scheduler.unschedule(this.simulationActionUpdate, this);
    this._playing = this._pause = !1;
  },
  updateToFrameByTime: function (a) {
    this._currentTime = a;
    for (var b = 0; b < this._actionNodeList.length; b++)
      this._actionNodeList[b].updateActionToTimeLine(a);
  },
  simulationActionUpdate: function (a) {
    a = !0;
    for (var b = this._actionNodeList, d = 0, e = b.length; d < e; d++)
      if (!b[d].isActionDoneOnce()) {
        a = !1;
        break;
      }
    a &&
      (null !== this._callback && this._callback.execute(),
      this._loop
        ? this.play()
        : ((this._playing = !1),
          this._scheduler.unschedule(this.simulationActionUpdate, this)));
  },
});
ccs.ComAttribute = ccs.Component.extend({
  _jsonDict: null,
  _filePath: "",
  ctor: function () {
    cc.Component.prototype.ctor.call(this);
    this._jsonDict = {};
    this._filePath = "";
    this._name = "CCComAttribute";
    ccs.ComAttribute.prototype.init.call(this);
  },
  init: function () {
    this._jsonDict = {};
    return !0;
  },
  setInt: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  setDouble: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  setFloat: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  setBool: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  setString: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  setObject: function (a, b) {
    a ? (this._jsonDict[a] = b) : cc.log("Argument must be non-nil");
  },
  getInt: function (a) {
    return parseInt(this._jsonDict[a] || 0);
  },
  getDouble: function (a) {
    return parseFloat(this._jsonDict[a] || 0);
  },
  getFloat: function (a) {
    return parseFloat(this._jsonDict[a] || 0);
  },
  getBool: function (a) {
    return Boolean(this._jsonDict[a] || !1);
  },
  getString: function (a) {
    return this._jsonDict[a] || "";
  },
  getObject: function (a) {
    return this._jsonDict[a];
  },
  parse: function (a) {
    this._jsonDict = cc.loader.getRes(a);
  },
});
ccs.ComAttribute.create = function () {
  return new ccs.ComAttribute();
};
ccs.ComAudio = ccs.Component.extend({
  _filePath: "",
  _loop: !1,
  ctor: function () {
    cc.Component.prototype.ctor.call(this);
    this._name = "Audio";
    ccs.ComAudio.prototype.init.call(this);
  },
  init: function () {
    return !0;
  },
  onExit: function () {
    this.stopBackgroundMusic(!0);
    this.stopAllEffects();
  },
  end: function () {
    cc.audioEngine.end();
  },
  preloadBackgroundMusic: function (a) {
    cc.loader.load(a);
  },
  playBackgroundMusic: function (a, b) {
    a
      ? cc.audioEngine.playMusic(a, b)
      : cc.audioEngine.playMusic(this._filePath, this._loop);
  },
  stopBackgroundMusic: function (a) {
    cc.audioEngine.stopMusic(a);
  },
  pauseBackgroundMusic: function () {
    cc.audioEngine.pauseMusic();
  },
  resumeBackgroundMusic: function () {
    cc.audioEngine.resumeMusic();
  },
  rewindBackgroundMusic: function () {
    cc.audioEngine.rewindMusic();
  },
  willPlayBackgroundMusic: function () {
    return cc.audioEngine.willPlayMusic();
  },
  isBackgroundMusicPlaying: function () {
    return cc.audioEngine.isMusicPlaying();
  },
  getBackgroundMusicVolume: function () {
    return cc.audioEngine.getMusicVolume();
  },
  setBackgroundMusicVolume: function (a) {
    cc.audioEngine.setMusicVolume(a);
  },
  getEffectsVolume: function () {
    return cc.audioEngine.getEffectsVolume();
  },
  setEffectsVolume: function (a) {
    cc.audioEngine.setEffectsVolume(a);
  },
  playEffect: function (a, b) {
    return a
      ? cc.audioEngine.playEffect(a, b)
      : cc.audioEngine.playEffect(this._filePath, this._loop);
  },
  pauseEffect: function (a) {
    cc.audioEngine.pauseEffect(a);
  },
  pauseAllEffects: function () {
    cc.audioEngine.pauseAllEffects();
  },
  resumeEffect: function (a) {
    cc.audioEngine.resumeEffect(a);
  },
  resumeAllEffects: function () {
    cc.audioEngine.resumeAllEffects();
  },
  stopEffect: function (a) {
    cc.audioEngine.stopEffect(a);
  },
  stopAllEffects: function () {
    cc.audioEngine.stopAllEffects();
  },
  preloadEffect: function (a) {
    cc.loader.getRes(a);
    this.setFile(a);
    this.setLoop(!1);
  },
  unloadEffect: function (a) {
    cc.audioEngine.unloadEffect(a);
  },
  setFile: function (a) {
    this._filePath = a;
  },
  setLoop: function (a) {
    this._loop = a;
  },
  getFile: function () {
    return this._filePath;
  },
  isLoop: function () {
    return this._loop;
  },
});
ccs.ComAudio.create = function () {
  return new ccs.ComAudio();
};
ccs.ComController = ccs.Component.extend({
  ctor: function () {
    cc.Component.prototype.ctor.call(this);
    this._name = "ComController";
    ccs.ComController.prototype.init.call(this);
  },
  onEnter: function () {
    null !== this._owner && this._owner.scheduleUpdate();
  },
  isEnabled: function () {
    return this._enabled;
  },
  setEnabled: function (a) {
    this._enabled = a;
  },
});
ccs.ComController.create = function () {
  return new ccs.ComController();
};
ccs.ComRender = ccs.Component.extend({
  _render: null,
  ctor: function (a, b) {
    cc.Component.prototype.ctor.call(this);
    this._render = a;
    this._name = b;
    this.isRenderer = !0;
    ccs.ComRender.prototype.init.call(this);
  },
  onEnter: function () {
    this._owner && this._owner.addChild(this._render);
  },
  onExit: function () {
    this._owner &&
      (this._owner.removeChild(this._render, !0), (this._render = null));
  },
  getNode: function () {
    return this._render;
  },
  setNode: function (a) {
    this._render = a;
  },
});
ccs.ComRender.create = function (a, b) {
  return new ccs.ComRender(a, b);
};
ccs.objectFactory = {
  _typeMap: {},
  createObject: function (a) {
    var b = null;
    (a = this._typeMap[a]) &&
      (b = cc.isFunction(a._fun) ? new a._fun() : a._fun);
    return b;
  },
  registerType: function (a) {
    this._typeMap[a._className] = a;
  },
  createGUI: function (a) {
    var b = null;
    "Panel" === a
      ? (a = "Layout")
      : "TextArea" === a
      ? (a = "Label")
      : "TextButton" === a && (a = "Button");
    (a = this._typeMap[a]) && a._fun && (b = a._fun);
    return b;
  },
  removeAll: function () {
    this._typeMap = {};
  },
};
ccs.TInfo = ccs.Class.extend({
  _className: "",
  _fun: null,
  ctor: function (a, b) {
    b
      ? ((this._className = a), (this._fun = b))
      : ((this._className = a._className), (this._fun = a._fun));
    ccs.objectFactory.registerType(this);
  },
});
ccs.sendEvent = function (a) {
  a = ccs.triggerManager.get(a);
  if (null != a)
    for (var b = 0; b < a.length; b++) {
      var d = a[b];
      null != d && d.detect() && d.done();
    }
};
ccs.registerTriggerClass = function (a, b) {
  new ccs.TInfo(a, b);
};
ccs.triggerManager = {
  _eventTriggers: {},
  _triggerObjs: {},
  _movementDispatches: [],
  parse: function (a) {
    for (var b = 0; b < a.length; ++b) {
      var d = a[b],
        e = new ccs.TriggerObj();
      e.serialize(d);
      for (var d = e.getEvents(), f = 0; f < d.length; f++) this.add(d[f], e);
      this._triggerObjs[e.getId()] = e;
    }
  },
  get: function (a) {
    return this._eventTriggers[a];
  },
  getTriggerObj: function (a) {
    return this._triggerObjs[a];
  },
  add: function (a, b) {
    var d = this._eventTriggers[a];
    d || (d = []);
    -1 === d.indexOf(b) && (d.push(b), (this._eventTriggers[a] = d));
  },
  removeAll: function () {
    for (var a in this._eventTriggers)
      for (var b = this._eventTriggers[a], d = 0; d < b.length; d++)
        b[d].removeAll();
    this._eventTriggers = {};
  },
  remove: function (a, b) {
    if (b) return this._removeObj(a, b);
    var d = !1,
      e = this._eventTriggers[a];
    if (e) {
      for (d = 0; d < e.length; d++) {
        var f = e[d];
        f && f.removeAll();
      }
      delete this._eventTriggers[a];
      d = !0;
    }
    return d;
  },
  _removeObj: function (a, b) {
    var d = !1;
    do {
      var e = this._eventTriggers[a];
      if (e) {
        for (d = 0; d < e.length; d++) {
          var f = e[d];
          if (f && f == b) {
            f.removeAll();
            e.splice(d, 1);
            break;
          }
        }
        d = !0;
      }
    } while (0);
    return d;
  },
  removeTriggerObj: function (a) {
    a = this.getTriggerObj(a);
    if (!a) return !1;
    for (var b = a.getEvents(), d = 0; d < b.length; d++) this.remove(b[d], a);
    return !0;
  },
  isEmpty: function () {
    return !this._eventTriggers || 0 >= this._eventTriggers.length;
  },
  addArmatureMovementCallBack: function (a, b, d) {
    if (null != a && null != d && null != b) {
      for (var e, f = !1, g = 0; g < this._movementDispatches.length; g++)
        (e = this._movementDispatches[g]) &&
          e[0] === a &&
          (e.addAnimationEventCallBack(b, d), (f = !0));
      f ||
        ((e = new ccs.ArmatureMovementDispatcher()),
        a.getAnimation().setMovementEventCallFunc(e.animationEvent, e),
        e.addAnimationEventCallBack(b, d),
        this._movementDispatches.push([a, e]));
    }
  },
  removeArmatureMovementCallBack: function (a, b, d) {
    if (null != a && null != b && null != d)
      for (var e, f = 0; f < this._movementDispatches.length; f++)
        (e = this._movementDispatches[f]) &&
          e[0] === a &&
          e.removeAnimationEventCallBack(d, b);
  },
  removeArmatureAllMovementCallBack: function (a) {
    if (null != a)
      for (var b, d = 0; d < this._movementDispatches.length; d++)
        if ((b = this._movementDispatches[d]) && b[0] === a) {
          this._movementDispatches.splice(d, 1);
          break;
        }
  },
  removeAllArmatureMovementCallBack: function () {
    this._movementDispatches.length = 0;
  },
  version: function () {
    return "1.2.0.0";
  },
};
ccs.ArmatureMovementDispatcher = ccs.Class.extend({
  _mapEventAnimation: null,
  ctor: function () {
    this._mapEventAnimation = [];
  },
  animationEvent: function (a, b, d) {
    for (var e, f, g = 0; g < this._mapEventAnimation.length; g++)
      (e = this._mapEventAnimation[g]),
        (f = e[0]),
        (e = e[1]) && e.call(f, a, b, d);
  },
  addAnimationEventCallBack: function (a, b) {
    this._mapEventAnimation.push([b, a]);
  },
  removeAnimationEventCallBack: function (a, b) {
    for (var d, e = 0; e < this._mapEventAnimation.length; e++)
      (d = this._mapEventAnimation[e]),
        d[0] === b && this._mapEventAnimation.splice(e, 1);
  },
});
ccs.BaseTriggerCondition = ccs.Class.extend({
  ctor: function () {},
  init: function () {
    return !0;
  },
  detect: function () {
    return !0;
  },
  serialize: function (a) {},
  removeAll: function () {},
});
ccs.BaseTriggerAction = ccs.Class.extend({
  ctor: function () {},
  init: function () {
    return !0;
  },
  done: function () {},
  serialize: function (a) {},
  removeAll: function () {},
});
ccs.TriggerObj = ccs.Class.extend({
  _cons: null,
  _acts: null,
  _id: 0,
  _enable: !0,
  _vInt: null,
  ctor: function () {
    this._id = 0;
    this._enable = !0;
    ccs.TriggerObj.prototype.init.call(this);
  },
  init: function () {
    this._cons = [];
    this._acts = [];
    this._vInt = [];
    return !0;
  },
  detect: function () {
    if (!this._enable || 0 === this._cons.length) return !0;
    for (var a = !0, b = null, d = 0; d < this._cons.length; d++)
      (b = this._cons[d]) && b.detect && (a = a && b.detect());
    return a;
  },
  done: function () {
    if (this._enable && 0 !== this._acts.length)
      for (var a, b = 0; b < this._acts.length; b++)
        (a = this._acts[b]) && a.done && a.done();
  },
  removeAll: function () {
    for (var a = null, b = 0; b < this._cons.length; b++)
      (a = this._cons[b]) && a.removeAll();
    this._cons = [];
    for (b = 0; b < this._acts.length; b++)
      (a = this._acts[b]) && a.removeAll();
    this._acts = [];
  },
  serialize: function (a) {
    this._id = a.id || 0;
    for (var b = a.conditions || [], d = 0; d < b.length; d++) {
      var e = b[d],
        f = e.classname,
        g = ccs.objectFactory.createObject(f);
      g
        ? (g.serialize(e), g.init(), this._cons.push(g))
        : cc.log("class named classname(" + f + ") can not implement!");
    }
    b = a.actions || [];
    for (d = 0; d < b.length; d++)
      (e = b[d]),
        (f = e.classname),
        (g = ccs.objectFactory.createObject(f))
          ? (g.serialize(e), g.init(), this._acts.push(g))
          : cc.log("class named classname(" + f + ") can not implement!");
    a = a.events || [];
    for (d = 0; d < a.length; d++)
      (e = a[d]), (e = e.id), 0 > e || this._vInt.push(e);
  },
  getId: function () {
    return this._id;
  },
  setEnable: function (a) {
    this._enable = a;
  },
  getEvents: function () {
    return this._vInt;
  },
});
ccs.TriggerObj.create = function () {
  return new ccs.TriggerObj();
};
ccs.ActionTimelineData = ccs.Class.extend({
  _actionTag: 0,
  ctor: function (a) {
    this._init(a);
  },
  _init: function (a) {
    this._actionTag = a;
    return !0;
  },
  setActionTag: function (a) {
    this._actionTag = a;
  },
  getActionTag: function () {
    return this._actionTag;
  },
});
ccs.AnimationInfo = function (a, b, d) {
  this.name = a;
  this.startIndex = b;
  this.endIndex = d;
};
ccs.ComExtensionData = ccs.Component.extend({
  _customProperty: null,
  _timelineData: null,
  _name: "ComExtensionData",
  ctor: function () {
    this._customProperty = "";
    this._timelineData = new ccs.ActionTimelineData(0);
    return !0;
  },
  setActionTag: function (a) {
    this._timelineData.setActionTag(a);
  },
  getActionTag: function () {
    return this._timelineData.getActionTag();
  },
  setCustomProperty: function (a) {
    this._customProperty = a;
  },
  getCustomProperty: function () {
    return this._customProperty;
  },
});
ccs.ComExtensionData.create = function () {
  return new ccs.ComExtensionData();
};
ccs.ActionTimelineData.create = function (a) {
  return new ccs.ActionTimelineData(a);
};
ccs.ActionTimeline = cc.Action.extend({
  _timelineMap: null,
  _timelineList: null,
  _duration: 0,
  _time: null,
  _timeSpeed: 1,
  _frameInternal: 1 / 60,
  _playing: !1,
  _currentFrame: 0,
  _startFrame: 0,
  _endFrame: 0,
  _loop: null,
  _frameEventListener: null,
  _animationInfos: null,
  _lastFrameListener: null,
  ctor: function () {
    cc.Action.prototype.ctor.call(this);
    this._timelineMap = {};
    this._timelineList = [];
    this._animationInfos = {};
    this.init();
  },
  _gotoFrame: function (a) {
    for (var b = this._timelineList.length, d = 0; d < b; d++)
      this._timelineList[d]._gotoFrame(a);
  },
  _stepToFrame: function (a) {
    for (var b = this._timelineList.length, d = 0; d < b; d++)
      this._timelineList[d]._stepToFrame(a);
  },
  _emitFrameEvent: function (a) {
    this._frameEventListener && this._frameEventListener(a);
  },
  init: function () {
    return !0;
  },
  gotoFrameAndPlay: function (a, b, d, e) {
    var f = 0,
      g = arguments.length,
      h = [],
      k;
    for (f; f < g; f++)
      "boolean" === typeof arguments[f]
        ? (k = arguments[f])
        : h.push(arguments[f]);
    a = h[0];
    b = void 0 !== h[1] ? h[1] : this._duration;
    d = h[2] || a;
    this._startFrame = a;
    this._endFrame = b;
    this._currentFrame = d;
    this._loop = null != k ? k : !0;
    this._time = this._currentFrame * this._frameInternal;
    this.resume();
    this._gotoFrame(this._currentFrame);
  },
  gotoFrameAndPause: function (a) {
    this._startFrame = this._currentFrame = a;
    this._time = this._currentFrame * this._frameInternal;
    this.pause();
    this._gotoFrame(this._currentFrame);
  },
  pause: function () {
    this._playing = !1;
  },
  resume: function () {
    this._playing = !0;
  },
  isPlaying: function () {
    return this._playing;
  },
  setTimeSpeed: function (a) {
    this._timeSpeed = a;
  },
  getTimeSpeed: function () {
    return this._timeSpeed;
  },
  setDuration: function (a) {
    this._duration = a;
  },
  getDuration: function () {
    return this._duration;
  },
  getStartFrame: function () {
    return this._startFrame;
  },
  getEndFrame: function () {
    return this._endFrame;
  },
  setCurrentFrame: function (a) {
    a >= this._startFrame && a <= this._endFrame
      ? ((this._currentFrame = a),
        (this._time = this._currentFrame * this._frameInternal))
      : cc.log("frame index is not between start frame and end frame");
  },
  getCurrentFrame: function () {
    return this._currentFrame;
  },
  addTimeline: function (a) {
    var b = a.getActionTag();
    this._timelineMap[b] || (this._timelineMap[b] = []);
    -1 === this._timelineMap[b].indexOf(a) &&
      (this._timelineList.push(a),
      this._timelineMap[b].push(a),
      a.setActionTimeline(this));
  },
  removeTimeline: function (a) {
    var b = a.getActionTag();
    this._timelineMap[b] &&
      this._timelineMap[b].some(function (b) {
        if (b === a) return !0;
      }) &&
      (cc.arrayRemoveObject(this._timelineMap[b], a),
      cc.arrayRemoveObject(this._timelineList, a),
      a.setActionTimeline(null));
  },
  getTimelines: function () {
    return this._timelineList;
  },
  setFrameEventCallFunc: function (a) {
    this._frameEventListener = a;
  },
  clearFrameEventCallFunc: function () {
    this._frameEventListener = null;
  },
  clone: function () {
    var a = new ccs.ActionTimeline();
    a.setDuration(this._duration);
    a.setTimeSpeed(this._timeSpeed);
    for (var b in this._timelineMap) {
      var d = this._timelineMap[b],
        e;
      for (e in d) {
        var f = d[e].clone();
        a.addTimeline(f);
      }
    }
    return a;
  },
  reverse: function () {
    return null;
  },
  step: function (a) {
    this._playing &&
      0 !== this._timelineMap.length &&
      0 !== this._duration &&
      ((this._time += a * this._timeSpeed),
      (a = this._time - this._endFrame * this._frameInternal),
      a < this._frameInternal
        ? ((this._currentFrame = Math.floor(this._time / this._frameInternal)),
          this._stepToFrame(this._currentFrame),
          0 <= a && this._lastFrameListener && this._lastFrameListener())
        : (this._playing = this._loop)
        ? this.gotoFrameAndPlay(this._startFrame, this._endFrame, this._loop)
        : ((this._time = this._endFrame * this._frameInternal),
          this._currentFrame != this._endFrame &&
            ((this._currentFrame = this._endFrame),
            this._stepToFrame(this._currentFrame),
            this._lastFrameListener && this._lastFrameListener())));
  },
  _foreachNodeDescendant: function (a, b) {
    b(a);
    for (var d = a.getChildren(), e = 0; e < d.length; e++)
      this._foreachNodeDescendant(d[e], b);
  },
  startWithTarget: function (a) {
    cc.Action.prototype.startWithTarget.call(this, a);
    var b = this;
    this._foreachNodeDescendant(a, function (a) {
      var e = a.getComponent("ComExtensionData");
      if (e && ((e = e.getActionTag()), b._timelineMap[e]))
        for (var e = b._timelineMap[e], f = 0; f < e.length; f++)
          e[f].setNode(a);
    });
  },
  isDone: function () {
    return !1;
  },
  play: function (a, b) {
    var d = this._animationInfos[a];
    if (!d) return cc.log("Can't find animation info for %s", a);
    this.gotoFrameAndPlay(d.startIndex, d.endIndex, b);
  },
  addAnimationInfo: function (a) {
    this._animationInfos[a.name] = a;
  },
  removeAnimationInfo: function (a) {
    delete this._animationInfos[a];
  },
  isAnimationInfoExists: function (a) {
    return this._animationInfos[a];
  },
  getAnimationInfo: function (a) {
    return this._animationInfos[a];
  },
  setLastFrameCallFunc: function (a) {
    this._lastFrameListener = a;
  },
  clearLastFrameCallFunc: function () {
    this._lastFrameListener = null;
  },
});
ccs.ActionTimeline.create = function () {
  return new ccs.ActionTimeline();
};
ccs.Frame = ccs.Class.extend({
  _frameIndex: null,
  _tween: null,
  _timeline: null,
  _node: null,
  _tweenType: null,
  _easingParam: null,
  _enterWhenPassed: null,
  ctor: function () {
    this._frameIndex = 0;
    this._tween = !0;
    this._node = this._timeline = null;
    this._enterWhenPassed = !1;
    this._easingParam = [];
  },
  _emitEvent: function () {
    this._timeline && this._timeline.getActionTimeline()._emitFrameEvent(this);
  },
  _cloneProperty: function (a) {
    this._frameIndex = a.getFrameIndex();
    this._tween = a.isTween();
    this._tweenType = a.getTweenType();
    this.setEasingParams(a.getEasingParams());
  },
  setFrameIndex: function (a) {
    this._frameIndex = a;
  },
  getFrameIndex: function () {
    return this._frameIndex;
  },
  setTimeline: function (a) {
    this._timeline = a;
  },
  getTimeline: function (a) {
    return this._timeline;
  },
  setNode: function (a) {
    this._node = a;
  },
  getNode: function () {
    return this._node;
  },
  setTween: function (a) {
    this._tween = a;
  },
  isTween: function () {
    return this._tween;
  },
  onEnter: function (a) {},
  apply: function (a) {
    this._tween &&
      (this._tweenType !== ccs.FrameEaseType.TWEEN_EASING_MAX &&
        this._tweenType !== ccs.FrameEaseType.LINEAR &&
        (a = this.tweenPercent(a)),
      this._onApply(a));
  },
  _onApply: function (a) {},
  clone: function () {},
  tweenPercent: function (a) {
    var b = ccs.Frame.tweenToMap[this._tweenType];
    return b ? b(a, this._easingParam) : a;
  },
  setEasingParams: function (a) {
    if (a)
      for (var b = (this._easingParam.length = 0); b < a.length; b++)
        this._easingParam[b] = a[b];
  },
  getEasingParams: function () {
    return this._easingParam;
  },
  setTweenType: function (a) {
    this._tweenType = a;
  },
  getTweenType: function () {
    return this._tweenType;
  },
  isEnterWhenPassed: function () {
    return this._enterWhenPassed;
  },
});
ccs.Frame.tweenToMap = {
  "-1": function (a, b) {
    if (b) {
      var d = 1 - a;
      return (
        b[1] * d * d * d +
        3 * b[3] * a * d * d +
        3 * b[5] * a * a * d +
        b[7] * a * a * a
      );
    }
    return a;
  },
  1: cc._easeSineInObj.easing,
  2: cc._easeSineOutObj.easing,
  3: cc._easeSineInOutObj.easing,
  4: cc._easeQuadraticActionIn.easing,
  5: cc._easeQuadraticActionOut.easing,
  6: cc._easeQuadraticActionInOut.easing,
  7: cc._easeCubicActionIn.easing,
  8: cc._easeCubicActionOut.easing,
  9: cc._easeCubicActionInOut.easing,
  10: cc._easeCubicActionIn.easing,
  11: cc._easeCubicActionOut.easing,
  12: cc._easeCubicActionInOut.easing,
  13: cc._easeQuinticActionIn.easing,
  14: cc._easeQuinticActionOut.easing,
  15: cc._easeQuinticActionInOut.easing,
  16: cc._easeExponentialInObj.easing,
  17: cc._easeExponentialOutObj.easing,
  18: cc._easeExponentialInOutObj.easing,
  19: cc._easeCircleActionIn.easing,
  20: cc._easeCircleActionOut.easing,
  21: cc._easeCircleActionInOut.easing,
  22: function (a, b) {
    var d = 0.3;
    null != b && (d = b[0]);
    return cc.easeElasticIn(d).easing(a);
  },
  23: function (a, b) {
    var d = 0.3;
    null != b && (d = b[0]);
    return cc.easeElasticOut(d).easing(a);
  },
  24: function (a, b) {
    var d = 0.3;
    null != b && (d = b[0]);
    return cc.easeElasticInOut(d).easing(a);
  },
  25: cc._easeBackInObj.easing,
  26: cc._easeBackOutObj.easing,
  27: cc._easeBackInOutObj.easing,
  28: cc._easeBounceInObj.easing,
  29: cc._easeBounceOutObj.easing,
  30: cc._easeBounceInOutObj.easing,
};
ccs.VisibleFrame = ccs.Frame.extend({
  _visible: !0,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._visible = !0;
  },
  onEnter: function (a) {
    this._node && this._node.setVisible(this._visible);
  },
  clone: function () {
    var a = new ccs.VisibleFrame();
    a.setVisible(this._visible);
    a._cloneProperty(this);
    return a;
  },
  setVisible: function (a) {
    this._visible = a;
  },
  isVisible: function () {
    return this._visible;
  },
});
ccs.VisibleFrame.create = function () {
  return new ccs.VisibleFrame();
};
ccs.TextureFrame = ccs.Frame.extend({
  _sprite: null,
  _textureName: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._textureName = "";
  },
  setNode: function (a) {
    ccs.Frame.prototype.setNode.call(this, a);
    this._sprite = a;
  },
  onEnter: function (a) {
    if (this._sprite) {
      a = this._sprite.getBlendFunc();
      var b = cc.spriteFrameCache._spriteFrames[this._textureName];
      null != b
        ? this._sprite.setSpriteFrame(b)
        : this._sprite.setTexture(this._textureName);
      this._sprite.getBlendFunc() !== a && this._sprite.setBlendFunc(a);
    }
  },
  clone: function () {
    var a = new ccs.TextureFrame();
    a.setTextureName(this._textureName);
    a._cloneProperty(this);
    return a;
  },
  setTextureName: function (a) {
    this._textureName = a;
  },
  getTextureName: function () {
    return this._textureName;
  },
});
ccs.TextureFrame.create = function () {
  return new ccs.TextureFrame();
};
ccs.RotationFrame = ccs.Frame.extend({
  _rotation: null,
  _betwennRotation: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._rotation = 0;
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setRotation(this._rotation),
      this._tween && (this._betwennRotation = a._rotation - this._rotation));
  },
  _onApply: function (a) {
    0 !== this._betwennRotation &&
      this._node.setRotation(this._rotation + a * this._betwennRotation);
  },
  clone: function () {
    var a = new ccs.RotationFrame();
    a.setRotation(this._rotation);
    a._cloneProperty(this);
    return a;
  },
  setRotation: function (a) {
    this._rotation = a;
  },
  getRotation: function () {
    return this._rotation;
  },
});
ccs.RotationFrame.create = function () {
  return new ccs.RotationFrame();
};
ccs.SkewFrame = ccs.Frame.extend({
  _skewX: null,
  _skewY: null,
  _betweenSkewX: null,
  _betweenSkewY: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._skewY = this._skewX = 0;
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setSkewX(this._skewX),
      this._node.setSkewY(this._skewY),
      this._tween &&
        ((this._betweenSkewX = a._skewX - this._skewX),
        (this._betweenSkewY = a._skewY - this._skewY)));
  },
  _onApply: function (a) {
    if (0 !== this._betweenSkewX || 0 !== this._betweenSkewY) {
      var b = this._skewY + a * this._betweenSkewY;
      this._node.setSkewX(this._skewX + a * this._betweenSkewX);
      this._node.setSkewY(b);
    }
  },
  clone: function () {
    var a = new ccs.SkewFrame();
    a.setSkewX(this._skewX);
    a.setSkewY(this._skewY);
    a._cloneProperty(this);
    return a;
  },
  setSkewX: function (a) {
    this._skewX = a;
  },
  getSkewX: function () {
    return this._skewX;
  },
  setSkewY: function (a) {
    this._skewY = a;
  },
  getSkewY: function () {
    return this._skewY;
  },
});
ccs.SkewFrame.create = function () {
  return new ccs.SkewFrame();
};
ccs.RotationSkewFrame = ccs.SkewFrame.extend({
  onEnter: function (a) {
    this._node &&
      (this._node.setRotationX(this._skewX),
      this._node.setRotationY(this._skewY),
      this._tween &&
        ((this._betweenSkewX = a._skewX - this._skewX),
        (this._betweenSkewY = a._skewY - this._skewY)));
  },
  _onApply: function (a) {
    if (this._node && (0 !== this._betweenSkewX || 0 !== this._betweenSkewY)) {
      var b = this._skewY + a * this._betweenSkewY;
      this._node.setRotationX(this._skewX + a * this._betweenSkewX);
      this._node.setRotationY(b);
    }
  },
  clone: function () {
    var a = new ccs.RotationSkewFrame();
    a.setSkewX(this._skewX);
    a.setSkewY(this._skewY);
    a._cloneProperty(this);
    return a;
  },
});
ccs.RotationSkewFrame.create = function () {
  return new ccs.RotationSkewFrame();
};
ccs.PositionFrame = ccs.Frame.extend({
  _position: null,
  _betweenX: null,
  _betweenY: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._position = cc.p(0, 0);
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setPosition(this._position),
      this._tween &&
        ((this._betweenX = a._position.x - this._position.x),
        (this._betweenY = a._position.y - this._position.y)));
  },
  _onApply: function (a) {
    if (this._node && (0 !== this._betweenX || 0 !== this._betweenY)) {
      var b = cc.p(0, 0);
      b.x = this._position.x + this._betweenX * a;
      b.y = this._position.y + this._betweenY * a;
      this._node.setPosition(b);
    }
  },
  clone: function () {
    var a = new ccs.PositionFrame();
    a.setPosition(this._position);
    a._cloneProperty(this);
    return a;
  },
  setPosition: function (a) {
    this._position = a;
  },
  getPosition: function () {
    return this._position;
  },
  setX: function (a) {
    this._position.x = a;
  },
  getX: function () {
    return this._position.x;
  },
  setY: function (a) {
    this._position.y = a;
  },
  getY: function () {
    return this._position.y;
  },
});
ccs.PositionFrame.create = function () {
  return new ccs.PositionFrame();
};
ccs.ScaleFrame = ccs.Frame.extend({
  _scaleX: null,
  _scaleY: null,
  _betweenScaleX: null,
  _betweenScaleY: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._scaleY = this._scaleX = 1;
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setScaleX(this._scaleX),
      this._node.setScaleY(this._scaleY),
      this._tween &&
        ((this._betweenScaleX = a._scaleX - this._scaleX),
        (this._betweenScaleY = a._scaleY - this._scaleY)));
  },
  _onApply: function (a) {
    if (
      this._node &&
      (0 !== this._betweenScaleX || 0 !== this._betweenScaleY)
    ) {
      var b = this._scaleY + this._betweenScaleY * a;
      this._node.setScaleX(this._scaleX + this._betweenScaleX * a);
      this._node.setScaleY(b);
    }
  },
  clone: function () {
    var a = new ccs.ScaleFrame();
    a.setScaleX(this._scaleX);
    a.setScaleY(this._scaleY);
    a._cloneProperty(this);
    return a;
  },
  setScale: function (a) {
    this._scaleY = this._scaleX = a;
  },
  setScaleX: function (a) {
    this._scaleX = a;
  },
  getScaleX: function () {
    return this._scaleX;
  },
  setScaleY: function (a) {
    this._scaleY = a;
  },
  getScaleY: function () {
    return this._scaleY;
  },
});
ccs.ScaleFrame.create = function () {
  return new ccs.ScaleFrame();
};
ccs.AnchorPointFrame = ccs.Frame.extend({
  _anchorPoint: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._anchorPoint = cc.p(0, 0);
  },
  onEnter: function (a) {
    this._node && this._node.setAnchorPoint(this._anchorPoint);
  },
  clone: function () {
    var a = new ccs.AnchorPointFrame();
    a.setAnchorPoint(this._anchorPoint);
    a._cloneProperty(this);
    return a;
  },
  setAnchorPoint: function (a) {
    this._anchorPoint = a;
  },
  getAnchorPoint: function () {
    return this._anchorPoint;
  },
});
ccs.AnchorPointFrame.create = function () {
  return new ccs.AnchorPointFrame();
};
ccs.InnerActionType = { LoopAction: 0, NoLoopAction: 1, SingleFrame: 2 };
ccs.InnerActionFrame = ccs.Frame.extend({
  _innerActionType: null,
  _startFrameIndex: null,
  _endFrameIndex: 0,
  _singleFrameIndex: 0,
  _enterWithName: null,
  _animationName: "",
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._enterWithName = !1;
    this._innerActionType = ccs.InnerActionType.LoopAction;
    this._startFrameIndex = 0;
  },
  onEnter: function (a) {
    if (this._node && (a = this._node.getActionByTag(this._node.getTag())))
      if (ccs.InnerActionType.SingleFrame === this._innerActionType)
        a.gotoFrameAndPause(this._singleFrameIndex);
      else {
        var b = this._startFrameIndex,
          d = this._endFrameIndex;
        this._enterWithName &&
          ("-- ALL --" === this._animationName
            ? ((b = 0), (d = a.getDuration()))
            : a.isAnimationInfoExists(this._animationName)
            ? ((d = a.getAnimationInfo(this._animationName)),
              (b = d.startIndex),
              (d = d.endIndex))
            : cc.log("Animation %s not exists!", this._animationName));
        var e =
          this._timeline.getActionTimeline().getDuration() -
          this._frameIndex -
          d +
          b;
        0 > e && (d += e);
        ccs.InnerActionType.NoLoopAction === this._innerActionType
          ? a.gotoFrameAndPlay(b, d, !1)
          : ccs.InnerActionType.LoopAction === this._innerActionType &&
            a.gotoFrameAndPlay(b, d, !0);
      }
  },
  setAnimationName: function (a) {
    this._animationName = a;
  },
  setSingleFrameIndex: function (a) {
    this._singleFrameIndex = a;
  },
  getSingleFrameIndex: function () {
    return this._startFrameIndex;
  },
  setEnterWithName: function (a) {
    this._enterWithName = a;
  },
  getEnterWithName: function () {
    return this._enterWithName;
  },
  clone: function () {
    var a = new ccs.InnerActionFrame();
    a.setInnerActionType(this._innerActionType);
    a.setStartFrameIndex(this._startFrameIndex);
    a.setEnterWithName(this._enterWithName);
    a.setAnimationName(this._animationName);
    a.setSingleFrameIndex(this._singleFrameIndex);
    a._cloneProperty(this);
    return a;
  },
  setInnerActionType: function (a) {
    this._innerActionType = a;
  },
  getInnerActionType: function () {
    return this._innerActionType;
  },
  setStartFrameIndex: function (a) {
    this._startFrameIndex = a;
  },
  getStartFrameIndex: function () {
    return this._startFrameIndex;
  },
});
ccs.InnerActionFrame.create = function () {
  return new ccs.InnerActionFrame();
};
ccs.ColorFrame = ccs.Frame.extend({
  _alpha: null,
  _color: null,
  _betweenAlpha: null,
  _betweenRed: null,
  _betweenGreen: null,
  _betweenBlue: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._color = cc.color(255, 255, 255);
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setColor(this._color),
      this._tween &&
        ((a = a._color),
        (this._betweenRed = a.r - this._color.r),
        (this._betweenGreen = a.g - this._color.g),
        (this._betweenBlue = a.b - this._color.b)));
  },
  _onApply: function (a) {
    if (
      this._node &&
      this._tween &&
      (0 !== this._betweenAlpha ||
        0 !== this._betweenRed ||
        0 !== this._betweenGreen ||
        0 !== this._betweenBlue)
    ) {
      var b = cc.color(255, 255, 255);
      b.r = this._color.r + this._betweenRed * a;
      b.g = this._color.g + this._betweenGreen * a;
      b.b = this._color.b + this._betweenBlue * a;
      this._node.setColor(b);
      null !== this._alpha &&
        this._node.setOpacity(this._alpha + this._betweenAlpha * a);
    }
  },
  clone: function () {
    var a = new ccs.ColorFrame();
    a.setColor(this._color);
    a._cloneProperty(this);
    return a;
  },
  setColor: function (a) {
    this._color = a;
  },
  getColor: function () {
    return this._color;
  },
});
ccs.ColorFrame.create = function () {
  return new ccs.ColorFrame();
};
ccs.AlphaFrame = ccs.Frame.extend({
  _alpha: null,
  _betweenAlpha: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._alpha = 255;
  },
  onEnter: function (a) {
    this._node &&
      (this._node.setOpacity(this._alpha),
      this._tween && (this._betweenAlpha = a._alpha - this._alpha));
  },
  _onApply: function (a) {
    this._node && this._node.setOpacity(this._alpha + this._betweenAlpha * a);
  },
  setAlpha: function (a) {
    this._alpha = a;
  },
  getAlpha: function () {
    return this._alpha;
  },
  clone: function () {
    var a = new ccs.AlphaFrame();
    a.setAlpha(this._alpha);
    a._cloneProperty(this);
    return a;
  },
});
ccs.EventFrame = ccs.Frame.extend({
  _event: null,
  ctor: function () {
    ccs.Frame.prototype.ctor.call(this);
    this._event = "";
    this._enterWhenPassed = !0;
  },
  onEnter: function (a) {
    this._emitEvent();
  },
  clone: function () {
    var a = new ccs.EventFrame();
    a.setEvent(this._event);
    a._cloneProperty(this);
    return a;
  },
  setEvent: function (a) {
    this._event = a;
  },
  getEvent: function () {
    return this._event;
  },
});
ccs.EventFrame.create = function () {
  return new ccs.EventFrame();
};
ccs.ZOrderFrame = ccs.Frame.extend({
  _zorder: 0,
  onEnter: function (a) {
    this._node && this._node.setLocalZOrder(this._zorder);
  },
  clone: function () {
    var a = new ccs.ZOrderFrame();
    a.setZOrder(this._zorder);
    a._cloneProperty(this);
    return a;
  },
  setZOrder: function (a) {
    this._zorder = a;
  },
  getZOrder: function () {
    return this._zorder;
  },
});
ccs.ZOrderFrame.create = function () {
  return new ccs.ZOrderFrame();
};
ccs.BlendFuncFrame = ccs.Frame.extend({
  ctor: function () {
    this._super();
    this._blendFunc = null;
  },
  onEnter: function (a, b) {
    this._node && this._blendFunc && this._node.setBlendFunc(this._blendFunc);
  },
  clone: function () {
    var a = new ccs.BlendFuncFrame();
    a.setBlendFunc(this._blendFunc);
    a._cloneProperty(this);
    return a;
  },
  setBlendFunc: function (a) {
    a && a.src && a.dst && (this._blendFunc = a);
  },
  getBlendFunc: function () {
    return this._blendFunc;
  },
});
ccs.BlendFuncFrame.create = function () {
  return new ccs.BlendFuncFrame();
};
ccs.Timeline = ccs.Class.extend({
  _frames: null,
  _currentKeyFrame: null,
  _currentKeyFrameIndex: null,
  _fromIndex: null,
  _toIndex: null,
  _betweenDuration: null,
  _actionTag: null,
  _ActionTimeline: null,
  _node: null,
  ctor: function () {
    this._frames = [];
    this._currentKeyFrame = null;
    this._actionTag = this._betweenDuration = this._toIndex = this._fromIndex = this._currentKeyFrameIndex = 0;
    this._node = this._ActionTimeline = null;
  },
  _gotoFrame: function (a) {
    0 !== this._frames.length &&
      (this._binarySearchKeyFrame(a), this._apply(a));
  },
  _stepToFrame: function (a) {
    0 !== this._frames.length &&
      (this._updateCurrentKeyFrame(a), this._apply(a));
  },
  getFrames: function () {
    return this._frames;
  },
  addFrame: function (a) {
    this._frames.push(a);
    a.setTimeline(this);
  },
  insertFrame: function (a, b) {
    this._frames.splice(b, 0, a);
    a.setTimeline(this);
  },
  removeFrame: function (a) {
    cc.arrayRemoveObject(this._frames, a);
    a.setTimeline(null);
  },
  setActionTag: function (a) {
    this._actionTag = a;
  },
  getActionTag: function () {
    return this._actionTag;
  },
  setNode: function (a) {
    for (var b = 0; b < this._frames.length; b++) this._frames[b].setNode(a);
  },
  getNode: function () {
    return this._node;
  },
  setActionTimeline: function (a) {
    this._ActionTimeline = a;
  },
  getActionTimeline: function () {
    return this._ActionTimeline;
  },
  clone: function () {
    var a = new ccs.Timeline();
    a._actionTag = this._actionTag;
    for (var b = 0; b < this._frames.length; b++) {
      var d = this._frames[b].clone();
      a.addFrame(d);
    }
    return a;
  },
  _apply: function (a) {
    this._currentKeyFrame &&
      this._currentKeyFrame.apply(
        0 >= this._betweenDuration
          ? 0
          : (a - this._currentKeyFrameIndex) / this._betweenDuration
      );
  },
  _binarySearchKeyFrame: function (a) {
    var b = null,
      d = null,
      e = this._frames.length,
      f = !1;
    do
      if (a < this._frames[0].getFrameIndex())
        this._currentKeyFrameIndex >= this._frames[0].getFrameIndex() &&
          (f = !0),
          (this._toIndex = this._fromIndex = 0),
          (b = d = this._frames[0]),
          (this._currentKeyFrameIndex = 0),
          (this._betweenDuration = this._frames[0].getFrameIndex());
      else if (a >= this._frames[e - 1].getFrameIndex())
        (this._fromIndex = e - 1),
          (this._toIndex = 0),
          (b = d = this._frames[e - 1]),
          (this._currentKeyFrameIndex = this._frames[e - 1].getFrameIndex()),
          (this._betweenDuration = 0);
      else {
        for (var g = -1, b = 0, d = e - 1, h = 0; b <= d; ) {
          h = Math.ceil((b + d) / 2);
          if (
            a >= this._frames[h].getFrameIndex() &&
            a < this._frames[h + 1].getFrameIndex()
          ) {
            g = h;
            break;
          }
          this._frames[h].getFrameIndex() > a ? (d = h - 1) : (b = h + 1);
        }
        this._fromIndex = g;
        this._toIndex = 1 < e ? (g + 1) | 0 : g | 0;
        b = this._frames[g];
        d = this._frames[g + 1];
        0 === g && this._currentKeyFrameIndex < b.getFrameIndex() && (f = !0);
        this._currentKeyFrameIndex = b.getFrameIndex();
        this._betweenDuration = d.getFrameIndex() - b.getFrameIndex();
      }
    while (0);
    if (f || this._currentKeyFrame != b)
      (this._currentKeyFrame = b), this._currentKeyFrame.onEnter(d);
  },
  _updateCurrentKeyFrame: function (a) {
    if (
      a < this._currentKeyFrameIndex ||
      a >= this._currentKeyFrameIndex + this._betweenDuration
    ) {
      var b = null,
        d = null;
      do {
        var e = this._frames.length;
        if (a < this._frames[0].getFrameIndex())
          (b = d = this._frames[0]),
            (this._currentKeyFrameIndex = 0),
            (this._betweenDuration = this._frames[0].getFrameIndex());
        else {
          if (
            a >= this._frames[e - 1].getFrameIndex() &&
            ((a = this._frames[e - 1].getFrameIndex()),
            this._currentKeyFrameIndex >= a)
          )
            return;
          do {
            this._fromIndex = this._toIndex;
            b = this._frames[this._fromIndex];
            this._currentKeyFrameIndex = b.getFrameIndex();
            this._toIndex = this._fromIndex + 1;
            this._toIndex >= e && (this._toIndex = 0);
            d = this._frames[this._toIndex];
            if (a === b.getFrameIndex()) break;
            if (a > b.getFrameIndex() && a < d.getFrameIndex()) break;
            if (b.isEnterWhenPassed()) b.onEnter(d);
          } while (1);
          this._betweenDuration = d.getFrameIndex() - b.getFrameIndex();
        }
      } while (0);
      this._currentKeyFrame = b;
      this._currentKeyFrame.onEnter(d);
    }
  },
});
ccs.Timeline.create = function () {
  return new ccs.Timeline();
};
ccs.SkinNode = (function () {
  var a = cc.Node.extend({});
  a.create = function () {};
  return a;
})();
ccs.BoneNode = (function () {
  var a = cc.Node,
    b = ccs.SkinNode,
    d = cc.BlendFunc,
    e = { p: cc.p, size: cc.size, rect: cc.rect },
    f = { log: cc.log, assert: cc.assert },
    g = a.extend({
      _customCommand: null,
      _blendFunc: null,
      _rackColor: null,
      _rackLength: null,
      _rackWidth: null,
      _childBones: null,
      _boneSkins: null,
      _rootSkeleton: null,
      _squareVertices: null,
      _squareColors: null,
      _noMVPVertices: null,
      ctor: function (b) {
        a.prototype.ctor.call(this);
        null === this._squareVertices &&
          (this._squareVertices = [
            { x: 0, y: 0 },
            { x: 0, y: 0 },
            { x: 0, y: 0 },
            { x: 0, y: 0 },
          ]);
        this._rackColor = cc.color.WHITE;
        this._blendFunc = d.ALPHA_NON_PREMULTIPLIED;
        this._childBones = [];
        this._boneSkins = [];
        this._rackLength = void 0 === b ? 50 : b;
        this._rackWidth = 20;
        this._updateVertices();
      },
      visit: function (a) {
        this._visit && this._visit(a && a._renderCmd);
      },
      addSkin: function (b, d, e) {
        var g = this._boneSkins;
        f.assert(null != b, "Argument must be non-nil");
        if (e) for (e = 0; e < g.length; e++) g[e].setVisible(!1);
        a.prototype.addChild.call(this, b);
        this._boneSkins.push(b);
        b.setVisible(d);
      },
      getChildBones: function () {
        return this._childBones;
      },
      getSkins: function () {
        return this._boneSkins;
      },
      displaySkin: function (a, b) {
        var d = this._boneSkins,
          e,
          f;
        if ("string" === typeof a)
          for (f = 0; f < d.length; f++)
            (e = d[f]),
              a == e.getName() ? e.setVisible(!0) : b && e.setVisible(!1);
        else
          for (f = 0; f < d.length; f++)
            (e = d[f]), e == a ? e.setVisible(!0) : b && e.setVisible(!1);
      },
      getVisibleSkins: function () {
        for (var a = [], b = this._boneSkins, d, e = 0; e < b.length; e++)
          (d = b[e]), d.isVisible() && a.push(d);
        return a;
      },
      getRootSkeletonNode: function () {
        return this._rootSkeleton;
      },
      getAllSubBones: function () {
        for (var a = [], b = [], d = this._childBones, e = 0; e < d.length; e++)
          b.push(d[e]);
        for (; 0 < b.length; )
          for (d = b.pop(), a.push(d), d = d.getChildBones(), e = 0; e < d; e++)
            b.push(d[e]);
        return a;
      },
      getAllSubSkins: function () {
        for (var a = this.getAllSubBones(), b = [], d = 0; d < a.length; d++)
          for (var e = a[d].getSkins(), f = 0; f < e.length; f++) b.push(e[d]);
        return b;
      },
      addChild: function (b, d, e) {
        a.prototype.addChild.call(this, b, d, e);
        this._addToChildrenListHelper(b);
      },
      removeChild: function (b, d) {
        -1 !== this._children.indexOf(b) &&
          (a.prototype.removeChild.call(this, b, d),
          this._removeFromChildrenListHelper(b));
      },
      setBlendFunc: function (a) {
        var b = this._blendFunc;
        if (a && b.src !== a.src && b.dst !== a.dst) {
          this._blendFunc = a;
          for (var b = this._boneSkins, d, e = 0; e < b.length; e++)
            (d = b[e]), d.setBlendFunc(a);
        }
      },
      getBlendFunc: function () {
        return this._blendFunc;
      },
      setDebugDrawLength: function (a) {
        this._rackLength = a;
        this._updateVertices();
      },
      getDebugDrawLength: function () {
        return this._rackLength;
      },
      setDebugDrawWidth: function (a) {
        this._rackWidth = a;
        this._updateVertices();
      },
      getDebugDrawWidth: function () {
        return this._rackWidth;
      },
      setDebugDrawEnabled: function (a) {
        var b = this._renderCmd;
        b._debug !== a &&
          ((b._debug = a),
          (cc.renderer.childrenOrderDirty = !0),
          this._visible &&
            null != this._rootSkeleton &&
            ((this._rootSkeleton._subBonesDirty = !0),
            (this._rootSkeleton._subBonesOrderDirty = !0)));
      },
      isDebugDrawEnabled: function () {
        return this._renderCmd._debug;
      },
      setDebugDrawColor: function (a) {
        this._rackColor = a;
      },
      getDebugDrawColor: function () {
        return this._rackColor;
      },
      getVisibleSkinsRect: function () {
        var a,
          b,
          d,
          f = 0;
        a = b = d = f;
        var g = !0,
          h = e.rect(0, 0, 0, 0);
        this._renderCmd._debug &&
          null != this._rootSkeleton &&
          this._rootSkeleton._renderCmd._debug &&
          ((d = this._rackWidth), (f = this._rackLength), (g = !1));
        for (var k = this._boneSkins, t, w = 0; w < k.length; w++) {
          t = k[w];
          var x = t.getBoundingBox();
          !t.isVisible() ||
            (0 === x.x && 0 === x.y && 0 === x.width && 0 === x.height) ||
            (g
              ? ((a = cc.rectGetMinX(x)),
                (b = cc.rectGetMinY(x)),
                (d = cc.rectGetMaxX(x)),
                (f = cc.rectGetMaxY(x)),
                (g = !1))
              : ((a = Math.min(cc.rectGetMinX(x), a)),
                (b = Math.min(cc.rectGetMinY(x), b)),
                (d = Math.max(cc.rectGetMaxX(x), d)),
                (f = Math.max(cc.rectGetMaxY(x), f))),
            h.setRect(a, b, d - a, f - b));
        }
        return h;
      },
      getBoundingBox: function () {
        var a = this.getVisibleSkinsRect();
        return cc.rectApplyAffineTransform(
          a,
          this.getNodeToParentAffineTransform()
        );
      },
      batchBoneDrawToSkeleton: function (a) {},
      setLocalZOrder: function (b) {
        a.prototype.setLocalZOrder.call(this, b);
        null != this._rootSkeleton &&
          (this._rootSkeleton._subBonesOrderDirty = !0);
      },
      setName: function (b) {
        var d = this._rootSkeleton,
          e = this.getName();
        a.prototype.setName.call(this, b);
        if (null != d) {
          var e = d._subBonesMap[e],
            f = d._subBonesMap[b];
          e && !f && (delete d._subBonesMap[e], (d._subBonesMap[b] = e));
        }
      },
      setContentSize: function (b) {
        a.prototype.setContentSize.call(this, b);
        this._updateVertices();
      },
      setAnchorPoint: function (b) {
        a.prototype.setAnchorPoint.call(this, b);
        this._updateVertices();
      },
      setVisible: function (b) {
        this._visible != b &&
          (a.prototype.setVisible.call(this, b),
          null != this._rootSkeleton &&
            ((this._rootSkeleton._subBonesDirty = !0),
            (this._rootSkeleton._subBonesOrderDirty = !0)));
      },
      _addToChildrenListHelper: function (a) {
        a instanceof g ? this._addToBoneList(a) : this._addToSkinList(a);
      },
      _removeFromChildrenListHelper: function (a) {
        a instanceof g
          ? this._removeFromBoneList(a)
          : a instanceof b && this._removeFromSkinList(skin);
      },
      _removeFromBoneList: function (a) {
        if (
          null != this._rootSkeleton &&
          a instanceof ccs.SkeletonNode &&
          a._rootSkeleton === this._rootSkeleton
        ) {
          a._rootSkeleton = null;
          var b = a.getAllSubBones();
          b.push(a);
          for (var d, e = 0; e < b.length; e++)
            (d = b[e]),
              (d._rootSkeleton = null),
              delete this._rootSkeleton._subBonesMap[d.getName()],
              (this._rootSkeleton._subBonesDirty = !0),
              (this._rootSkeleton._subBonesOrderDirty = !0);
        } else
          (this._rootSkeleton._subBonesDirty = !0),
            (this._rootSkeleton._subBonesOrderDirty = !0);
        cc.arrayRemoveObject(this._childBones, a);
      },
      _setRootSkeleton: function (a) {
        this._rootSkeleton = a;
        a = this.getAllSubBones();
        for (var b = 0; b < a.length; b++) this._addToBoneList(a[b]);
      },
      _addToBoneList: function (a) {
        -1 === this._childBones.indexOf(a) && this._childBones.push(a);
        if (
          null != this._rootSkeleton &&
          !(a instanceof b || a._rootSkeleton)
        ) {
          var d = a.getAllSubBones();
          d.push(a);
          for (var e = 0; e < d.length; e++) {
            a = d[e];
            a._setRootSkeleton(this._rootSkeleton);
            var f = a.getName();
            this._rootSkeleton._subBonesMap[f]
              ? cc.log(
                  "already has a bone named %s in skeleton %s",
                  f,
                  this._rootSkeleton.getName()
                )
              : (this._rootSkeleton._subBonesMap[a.getName()] = a);
            this._rootSkeleton._subBonesDirty = !0;
            this._rootSkeleton._subBonesOrderDirty = !0;
          }
        }
      },
      _visitSkins: function () {
        var a = this._renderCmd;
        if (this._visible) {
          var b = a.getParentRenderCmd();
          b && (a._curLevel = b._curLevel + 1);
          var d = this._boneSkins,
            e;
          a._syncStatus(b);
          var f = d.length;
          if (0 < f) {
            this.sortAllChildren();
            for (b = 0; b < f; b++)
              if (((e = d[b]), 0 > e._localZOrder)) e.visit(this);
              else break;
            for (; b < f; b++) d[b].visit(this);
          }
          a._dirtyFlag = 0;
        }
      },
      _addToSkinList: function (a) {
        this._boneSkins.push(a);
        if (a.getBlendFunc) {
          var b = a.getBlendFunc();
          this._blendFunc.src !== b.src &&
            this._blendFunc.dst !== b.dst &&
            a.setBlendFunc(this._blendFunc);
        }
      },
      _removeFromSkinList: function (a) {
        cc.arrayRemoveObject(this._boneSkins, a);
      },
      sortAllChildren: function () {
        this._sortArray(this._childBones);
        this._sortArray(this._boneSkins);
        a.prototype.sortAllChildren.call(this);
      },
      _sortArray: function (a) {
        if (a) {
          var b = a.length,
            d,
            e,
            f;
          for (d = 1; d < b; d++) {
            f = a[d];
            for (e = d - 1; 0 <= e; ) {
              if (f._localZOrder < a[e]._localZOrder) a[e + 1] = a[e];
              else if (
                f._localZOrder === a[e]._localZOrder &&
                f.arrivalOrder < a[e].arrivalOrder
              )
                a[e + 1] = a[e];
              else break;
              e--;
            }
            a[e + 1] = f;
          }
        }
      },
      _updateVertices: function () {
        var a = this._squareVertices,
          b = this._renderCmd._anchorPointInPoints;
        if (
          this._rackLength != a[2].x - b.x ||
          a[3].y != this._rackWidth / 2 - b.y
        ) {
          a[1].x = a[1].y = a[3].y = 0;
          a[0].x = a[2].x = 0.1 * this._rackLength;
          a[2].y = 0.5 * this._rackWidth;
          a[0].y = -a[2].y;
          a[3].x = this._rackLength;
          for (var d = 0; d < a.length; d++) (a[d].x += b.x), (a[d].y += b.y);
          this._renderCmd.updateDebugPoint(a);
        }
      },
      _createRenderCmd: function () {
        return cc._renderType === cc.game.RENDER_TYPE_CANVAS
          ? new h(this)
          : new k(this);
      },
    });
  g.create = function (a, b) {
    return new ccui.BoneNode(a, b);
  };
  var h = (function () {
      var b = function (a) {
          this._rootCtor(a);
          this._debug = !1;
          this._color = cc.color.WHITE;
          this._drawNode = new cc.DrawNode();
        },
        d = (b.prototype = Object.create(a.CanvasRenderCmd.prototype));
      d.constructor = b;
      d.updateDebugPoint = function (a) {
        this._drawNode.clear();
        this._drawNode.drawPoly(a, this._color, 0, this._color);
      };
      d.transform = function (a, b) {
        var d = this._node._rootSkeleton;
        this.originTransform(a, b);
        d && d._renderCmd._debug && this._drawNode._renderCmd.transform(this);
      };
      return b;
    })(),
    k = (function () {
      var b = function (a) {
          this._rootCtor(a);
          this._debug = !1;
          this._color = cc.color.WHITE;
          this._drawNode = new cc.DrawNode();
        },
        d = (b.prototype = Object.create(a.WebGLRenderCmd.prototype));
      d.constructor = b;
      d.updateDebugPoint = function (a) {
        this._drawNode.clear();
        this._drawNode.drawPoly(a, this._color, 0, this._color);
      };
      d.transform = function (a, b) {
        var d = this._node._rootSkeleton;
        this.originTransform(a, b);
        d && d._renderCmd._debug && this._drawNode._renderCmd.transform(this);
      };
      return b;
    })();
  return g;
})();
ccs.SkeletonNode = (function () {
  var a = ccs.BoneNode,
    b = a.extend({
      _subBonesMap: null,
      _squareVertices: null,
      _squareColors: null,
      _noMVPVertices: null,
      _skinGroupMap: null,
      _sortedAllBonesDirty: !1,
      _sortedAllBones: null,
      _batchedBoneVetices: null,
      _batchedBoneColors: null,
      _batchedVeticesCount: null,
      _batchBoneCommand: null,
      _subOrderedAllBones: null,
      ctor: function () {
        this._squareVertices = [
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
          { x: 0, y: 0 },
        ];
        this._rootSkeleton = this;
        a.prototype.ctor.call(this);
        this._subBonesMap = {};
        this._subOrderedAllBones = [];
        this._skinGroupMap = {};
        this._rackLength = this._rackWidth = 20;
        this._updateVertices();
      },
      getBoneNode: function (a) {
        return (a = this._subBonesMap[a]) ? a : null;
      },
      getAllSubBonesMap: function () {
        return this._subBonesMap;
      },
      changeSkins: function (a) {
        if ("object" === typeof a) {
          var b, f;
          for (f in a) {
            b = a[f];
            var g = this.getBoneNode(f);
            null !== g && g.displaySkin(b, !0);
          }
        } else (a = this._suitMap[a]) && this.changeSkins(a, !0);
      },
      addSkinGroup: function (a, b) {
        this._skinGroupMap[a] = b;
      },
      getBoundingBox: function () {
        var a,
          b,
          f,
          g = 0;
        a = b = f = g;
        var h = this.getVisibleSkinsRect(),
          k = !0;
        if (0 !== h.x || 0 !== h.y || 0 !== h.width || 0 !== h.height)
          (a = cc.rectGetMinX(h)),
            (b = cc.rectGetMinY(h)),
            (f = cc.rectGetMaxX(h)),
            (g = cc.rectGetMaxY(h)),
            (k = !1);
        for (var m = this.getAllSubBones(), n, p = 0; p < m.length; p++)
          if (
            ((n = m[p]),
            (n = cc.rectApplyAffineTransform(
              n.getVisibleSkinsRect(),
              n.getNodeToParentTransform(n.getRootSkeletonNode())
            )),
            0 !== n.x || 0 !== n.y || 0 !== n.width || 0 !== n.height)
          )
            k
              ? ((a = cc.rectGetMinX(n)),
                (b = cc.rectGetMinY(n)),
                (f = cc.rectGetMaxX(n)),
                (g = cc.rectGetMaxY(n)),
                (k = !1))
              : ((a = Math.min(cc.rectGetMinX(n), a)),
                (b = Math.min(cc.rectGetMinY(n), b)),
                (f = Math.max(cc.rectGetMaxX(n), f)),
                (g = Math.max(cc.rectGetMaxY(n), g)));
        h.x = a;
        h.y = b;
        h.width = f - a;
        h.height = g - b;
        return cc.rectApplyAffineTransform(h, this.getNodeToParentTransform());
      },
      _visit: function (a) {
        var b = this._renderCmd;
        a = a || b.getParentRenderCmd();
        if (this._visible) {
          b._syncStatus(a);
          var f;
          if (0 !== this._children.length)
            for (a = 0; a < this._children.length; a++)
              (f = this._children[a]), f.visit(this);
          this._checkSubBonesDirty();
          f = this._subOrderedAllBones;
          var g;
          for (a = 0; a < f.length; a++) (g = f[a]), g._visitSkins();
          if (b._debug)
            for (a = 0; a < f.length; a++)
              (g = f[a]._renderCmd),
                cc.renderer.pushRenderCommand(g._drawNode._renderCmd);
          b._dirtyFlag = 0;
        } else b._propagateFlagsDown(a);
      },
      _checkSubBonesDirty: function () {
        this._subBonesDirty &&
          (this._updateOrderedAllbones(), (this._subBonesDirty = !1));
        this._subBonesOrderDirty &&
          (this._sortOrderedAllBones(), (this._subBonesOrderDirty = !1));
      },
      _updateOrderedAllbones: function () {
        this._subOrderedAllBones.length = 0;
        for (var a = [], b = this._childBones, f, g = 0; g < b.length; g++)
          (f = b[g]), f.isVisible() && a.push(f);
        for (; 0 < a.length; )
          for (
            g = a.pop(),
              b = g._renderCmd,
              b._syncStatus(b.getParentRenderCmd()),
              this._subOrderedAllBones.push(g),
              b = g.getChildBones(),
              g = 0;
            g < b.length;
            g++
          )
            (f = b[g]), f.isVisible() && a.push(f);
      },
      _sortOrderedAllBones: function () {
        this._sortArray(this._subOrderedAllBones);
      },
      _updateVertices: function () {
        var a = this._squareVertices,
          b = this._renderCmd._anchorPointInPoints;
        if (
          this._rackLength != a[6].x - b.x ||
          this._rackWidth != a[3].y - b.y
        ) {
          var f = 0.5 * this._rackLength,
            g = 0.5 * this._rackWidth,
            h = 0.25 * f,
            k = 0.25 * g;
          a[5].y = a[2].y = a[1].y = a[6].y = a[0].x = a[4].x = a[7].x = a[3].x = 0;
          a[5].x = -f;
          a[0].y = -g;
          a[6].x = f;
          a[3].y = g;
          a[1].x = h;
          a[7].y = k;
          a[2].x = -h;
          a[4].y = -k;
          for (f = 0; f < a.length; f++) (a[f].x += b.x), (a[f].y += b.y);
        }
      },
      _updateAllDrawBones: function () {
        this._subDrawBones = {};
        for (var a in this._subBonesMap) {
          var b = this._subBonesMap[a];
          b.isVisible() && b.isDebugDrawEnabled() && this._subDrawBones.push(b);
        }
        this._sortArray(this._sortedAllBones);
        this._subDrawBones = !1;
      },
    });
  b.create = function () {
    return new b();
  };
  return b;
})();
ccs._load = (function () {
  var a = function (a, e, k) {
      var m = cc.loader.getRes(a);
      if (!m) return cc.log("%s does not exist", a);
      var n = a.match(d),
        n = (n && n[1] ? n[1] : null).toLocaleLowerCase();
      if ("json" !== n && "exportjson" !== n)
        return cc.log("%s load error, must be json file", a);
      var p;
      e
        ? (p = b[e])
        : m.widgetTree
        ? (p = b.ccui)
        : m.nodeTree
        ? (p = b.timeline)
        : m.Content && m.Content.Content
        ? (p = b.timeline)
        : m.gameobjects && (p = b.scene);
      if (!p) return cc.log("Can't find the parser : %s", a), new cc.Node();
      e = m.version || m.Version;
      if (!e && m.armature_data)
        return (
          cc.warn("%s is armature. please use:", a),
          cc.warn(
            "    ccs.armatureDataManager.addArmatureFileInfoAsync(%s);",
            a
          ),
          cc.warn("    var armature \x3d new ccs.Armature('name');"),
          new cc.Node()
        );
      p = f(p, e);
      return p
        ? p.parse(a, m, k) || null
        : (cc.log("Can't find the parser : %s", a), new cc.Node());
    },
    b = { ccui: {}, timeline: {}, action: {}, scene: {} };
  a.registerParser = function (a, d, e) {
    if (!a || !d || !e) return cc.log("register parser error");
    b[a] || (b[a] = {});
    b[a][d] = e;
  };
  a.getParser = function (a, d) {
    return a && d ? (b[a] ? b[a][d] : void 0) : a ? b[a] : b;
  };
  var d = /\.([^\.]+)$/,
    e = /([^\.](\.\*)?)*$/,
    f = function (a, b) {
      return a[b] ? a[b] : "*" === b ? null : f(a, b.replace(e, "*"));
    };
  return a;
})();
ccs._parser = cc.Class.extend({
  ctor: function () {
    this.parsers = {};
  },
  _dirnameReg: /\S*\//,
  _dirname: function (a) {
    return (a = a.match(this._dirnameReg)) && a[0] ? a[0] : "";
  },
  getClass: function (a) {
    return a.classname;
  },
  getNodeJson: function (a) {
    return a.widgetTree;
  },
  parse: function (a, b, d) {
    d = d || this._dirname(a);
    this.pretreatment(b, d);
    var e = this.parseNode(this.getNodeJson(b), d, a);
    e && this.deferred(b, d, e, a);
    return e;
  },
  pretreatment: function (a, b, d) {},
  deferred: function (a, b, d, e) {},
  parseNode: function (a, b) {
    var d = this.parsers[this.getClass(a)],
      e = null;
    d
      ? (e = d.call(this, a, b))
      : cc.log("Can't find the parser : %s", this.getClass(a));
    return e;
  },
  registerParser: function (a, b) {
    this.parsers[a] = b;
  },
});
ccs.load = function (a, b) {
  var d = { node: null, action: null };
  d.node = ccs._load(a, null, b);
  d.action = ccs._load(a, "action", b);
  d.action && -1 === d.action.tag && d.node && (d.action.tag = d.node.tag);
  return d;
};
ccs.load.validate = {};
ccs.load.preload = !0;
ccs.loadWithVisibleSize = function (a, b) {
  var d = ccs.load(a, b),
    e = cc.director.getVisibleSize();
  d.node &&
    e &&
    (d.node.setContentSize(e.width, e.height), ccui.helper.doLayout(d.node));
  return d;
};
ccs.actionTimelineCache = {
  createAction: function (a) {
    return ccs._load(a, "action");
  },
};
ccs.csLoader = {
  createNode: function (a) {
    return ccs._load(a);
  },
};
cc.loader.register(["json"], {
  load: function (a, b, d, e) {
    cc.loader.loadJson(a, function (a, d) {
      var h = cc.path;
      if (d && d.Content && d.Content.Content.UsedResources) {
        for (
          var k = d.Content.Content.UsedResources,
            m = h.dirname(b),
            n = [],
            p,
            r = 0;
          r < k.length;
          r++
        )
          if (ccs.load.preload || !/\.(png|jpg$)/.test(k[r]))
            (p = h.join(m, k[r])),
              (p = h._normalize(p)),
              ccs.load.validate[p] || ((ccs.load.validate[p] = !0), n.push(p));
        cc.loader.load(n, function () {
          e(a, d);
        });
      } else e(a, d);
    });
  },
});
(function (a, b) {
  var d = new (b.extend({
    getNodeJson: function (a) {
      return a;
    },
    parseNode: function (a, b) {
      var d = this.parsers[this.getClass(a)],
        e = null;
      d
        ? (e = d.call(this, a, b))
        : cc.log("Can't find the parser : %s", this.getClass(a));
      return e;
    },
    deferred: function (a, b, d, e) {
      ccs.triggerManager.parse(a.Triggers || []);
      ccs.sceneReader && (ccs.sceneReader._node = d);
    },
    setPropertyFromJsonDict: function (a, b) {
      var d = cc.isUndefined(b.x) ? 0 : b.x,
        e = cc.isUndefined(b.y) ? 0 : b.y;
      a.setPosition(d, e);
      d = Boolean(cc.isUndefined(b.visible) ? 1 : b.visible);
      a.setVisible(d);
      d = cc.isUndefined(b.objecttag) ? -1 : b.objecttag;
      a.setTag(d);
      d = cc.isUndefined(b.zorder) ? 0 : b.zorder;
      a.setLocalZOrder(d);
      d = cc.isUndefined(b.scalex) ? 1 : b.scalex;
      e = cc.isUndefined(b.scaley) ? 1 : b.scaley;
      a.setScaleX(d);
      a.setScaleY(e);
      d = cc.isUndefined(b.rotation) ? 0 : b.rotation;
      a.setRotation(d);
      a.setName(b.name || "");
    },
  }))();
  d.parseChild = function (a, b, d) {
    for (var e = 0; e < b.length; e++) {
      var f,
        g = b[e];
      g && (f = this.parseNode(g, d));
      f && a.addChild(f);
    }
  };
  var e = {
      CCSprite: function (a, b, d) {
        var e = new cc.Sprite();
        g(b.fileData, d, function (a, b) {
          if (0 === b) e.setTexture(a);
          else if (1 === b) {
            var d = cc.spriteFrameCache.getSpriteFrame(a);
            e.setSpriteFrame(d);
          }
        });
        b = new ccs.ComRender(e, "CCSprite");
        a.addComponent(b);
        return b;
      },
      CCTMXTiledMap: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (a, b) {
          0 === b && (e = new cc.TMXTiledMap(a));
        });
        b = new ccs.ComRender(e, "CCTMXTiledMap");
        a.addComponent(b);
        return b;
      },
      CCParticleSystemQuad: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (a, b) {
          0 === b
            ? (e = new cc.ParticleSystem(a))
            : cc.log("unknown resourcetype on CCParticleSystemQuad!");
          e.setPosition(0, 0);
        });
        b = new ccs.ComRender(e, "CCParticleSystemQuad");
        a.addComponent(b);
        return b;
      },
      CCArmature: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (a, b) {
          if (0 === b) {
            var d = cc.loader.getRes(a);
            d || cc.log("Please load the resource [%s] first!", a);
            d = d.armature_data[0].name;
            ccs.armatureDataManager.addArmatureFileInfo(a);
            e = new ccs.Armature(d);
          }
        });
        if (e)
          return (
            (d = new ccs.ComRender(e, "CCArmature")),
            a.addComponent(d),
            (a = b.selectedactionname) &&
              e.getAnimation() &&
              e.getAnimation().play(a),
            d
          );
      },
      CCComAudio: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (d, f) {
          if (0 === f) {
            e = new ccs.ComAudio();
            e.preloadEffect(d);
            var g = b.name;
            g && e.setName(g);
            a.addComponent(e);
          }
        });
      },
      CCComAttribute: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (b, d) {
          0 === d
            ? ((e = new ccs.ComAttribute()),
              "" !== b && e.parse(b),
              a.addComponent(e))
            : cc.log("unknown resourcetype on CCComAttribute!");
        });
        return e;
      },
      CCBackgroundAudio: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (d, f) {
          if (0 === f) {
            e = new ccs.ComAudio();
            e.preloadBackgroundMusic(d);
            e.setFile(d);
            var g = Boolean(b.loop || 0);
            e.setLoop(g);
            var m = b.name;
            m && e.setName(m);
            a.addComponent(e);
            e.playBackgroundMusic(d, g);
          }
        });
      },
      GUIComponent: function (a, b, d) {
        var e = null;
        g(b.fileData, d, function (a, b) {
          e = ccs._load(a, "ccui");
        });
        b = new ccs.ComRender(e, "GUIComponent");
        a.addComponent(b);
        return b;
      },
      CCScene: function () {},
    },
    f = {},
    g = function (a, b, d) {
      if (null != a) {
        var e = a.path,
          g = a.resourceType;
        a = a.plist;
        e &&
          (a &&
            (cc.loader.getRes(b + a)
              ? ((f[b + a] = !0), cc.spriteFrameCache.addSpriteFrames(b + a))
              : f[b + a] || cc.log("%s need to be preloaded", b + a)),
          0 !== g ? d(e, g) : d(b + e, g));
      }
    };
  d.parseComponents = function (a, b, d) {
    a &&
      b &&
      b.forEach(function (b) {
        var f = e[b.classname],
          g = null;
        f
          ? (g = f(a, b, d))
          : cc.log("Can't find the component parser : %s", b.classname);
        b = b.name;
        g && b && g.setName(b);
      });
  };
  d.registerParser("CCNode", function (a, b) {
    var d = new cc.Node();
    this.setPropertyFromJsonDict(d, a);
    this.parseChild.call(this, d, a.gameobjects, b);
    this.parseComponents(d, a.components, b);
    var e = a.CanvasSize;
    e && d.setContentSize(cc.size(e._width, e._height));
    return d;
  });
  a.registerParser("scene", "*", d);
})(ccs._load, ccs._parser);
(function (a, b) {
  var d = Array(50),
    e = new (b.extend({
      addSpriteFrame: function (a, b) {
        if (a)
          for (var d = 0; d < a.length; d++)
            cc.spriteFrameCache.addSpriteFrames(b + a[d]);
      },
      pretreatment: function (a, b) {
        this.addSpriteFrame(a.textures, b);
      },
      parseRecursive: function (a, b) {
        var e = 1,
          f = null,
          g,
          r,
          s,
          u,
          v;
        for (d[0] = a; 0 < e; )
          if ((e--, (r = d[e]), (d[e] = null), r))
            if (((s = r.classname), (g = this.parsers[s]))) {
              if ((s = new g.object()))
                if (
                  (f || (f = s),
                  (u = r.options),
                  this.generalAttributes(s, u),
                  g.handle(s, u, b),
                  this.colorAttributes(s, u),
                  (g = r.parent),
                  (r.parent = null),
                  g instanceof ccui.PageView
                    ? g.addPage(s)
                    : g instanceof ccui.ListView
                    ? g.pushBackCustomItem(s)
                    : g &&
                      (g instanceof ccui.Layout ||
                        (s.getPositionType() === ccui.Widget.POSITION_PERCENT &&
                          ((u = s._positionPercent),
                          (v = g._anchorPoint),
                          (s._positionPercent.x = u.x + v.x),
                          (s._positionPercent.y = u.y + v.y)),
                        (u = g._renderCmd._anchorPointInPoints),
                        (s._position.x += u.x),
                        (s._position.y += u.y),
                        s.setNodeDirty()),
                      g.addChild(s)),
                  (r = r.children) && 0 < r.length)
                )
                  for (g = r.length - 1; 0 <= g; g--)
                    (d[e] = r[g]), (d[e].parent = s), e++;
            } else cc.log("Can't find the parser : %s", s);
        return f;
      },
      parse: function (a, b, d) {
        d = d || this._dirname(a);
        this.pretreatment(b, d);
        var e = this.parseRecursive(b.widgetTree, d);
        e && this.deferred(b, d, e, a);
        return e;
      },
      deferred: function (a, b, d, e) {
        d &&
          (ccs.actionManager.initWithDictionary(e, a.animation, d),
          d.setContentSize(a.designWidth, a.designHeight));
      },
    }))();
  e.generalAttributes = function (a, b) {
    a._ignoreSize = b.ignoreSize || !0;
    a._sizeType = b.sizeType || 0;
    a._positionType = b.positionType || 0;
    a._sizePercent.x = b.sizePercentX || 0;
    a._sizePercent.y = b.sizePercentY || 0;
    a._positionPercent.x = b.positionPercentX || 0;
    a._positionPercent.y = b.positionPercentY || 0;
    var d = 0,
      e = 0;
    b.adaptScreen
      ? ((e = cc.director.getWinSize()), (d = e.width), (e = e.height))
      : ((d = b.width || 0), (e = b.height || 0));
    var f = b.anchorPointX,
      g = b.anchorPointY;
    a._anchorPoint.x = isNaN(f) ? 0.5 : f;
    a._anchorPoint.y = isNaN(g) ? 0.5 : g;
    a.setContentSize(d, e);
    a.setTag(b.tag);
    a.setActionTag(b.actiontag);
    a.setTouchEnabled(b.touchAble);
    a._name = b.name || "default";
    a._position.x = b.x || 0;
    a._position.y = b.y || 0;
    a._scaleX = b.scaleX || 1;
    a._scaleY = b.scaleY || 1;
    a._rotationX = a._rotationY = b.rotation || 0;
    a._visible = b.visible || !1;
    a._localZOrder = b.ZOrder || 0;
    if (null != b.layoutParameter) {
      d = b.layoutParameter;
      e = null;
      switch (isNaN(d.type) ? 2 : d.type) {
        case 1:
          e = new ccui.LinearLayoutParameter();
          e._linearGravity = d.gravity || 0;
          break;
        case 2:
          (e = new ccui.RelativeLayoutParameter()),
            (e._relativeLayoutName = d.relativeName),
            (e._relativeWidgetName = d.relativeToName),
            (e._relativeAlign = d.align || 0);
      }
      null != e &&
        ((f = e._margin),
        (f.left = d.marginLeft || 0),
        (f.top = d.marginTop || 0),
        (f.right = d.marginRight || 0),
        (f.bottom = d.marginDown || 0),
        a.setLayoutParameter(e));
    }
  };
  e.colorAttributes = function (a, b) {
    var d = null !== b.opacity ? b.opacity : 255;
    null != d && a.setOpacity(d);
    var d = b.colorR,
      e = b.colorG,
      f = b.colorB;
    a.setColor(
      cc.color(null == d ? 255 : d, null == e ? 255 : e, null == f ? 255 : f)
    );
    a.setFlippedX(b.flipX);
    a.setFlippedY(b.flipY);
  };
  var f = function (a, b, d, e) {
    d && (0 === b ? e(a + d, b) : e(d, b));
  };
  e.LayoutAttributes = function (a, b, d) {
    var e = 0,
      g = 0;
    b.adaptScreen
      ? ((g = cc.director.getWinSize()), (e = g.width), (g = g.height))
      : ((e = b.width || 0), (g = b.height || 0));
    a.setSize(cc.size(e, g));
    a.setClippingEnabled(b.clipAble);
    e = b.backGroundScale9Enable;
    a.setBackGroundImageScale9Enabled(e);
    var g = b.bgColorR || 0,
      r = b.bgColorG || 0,
      s = b.bgColorB || 0,
      u = isNaN(b.bgStartColorR) ? 255 : b.bgStartColorR,
      v = isNaN(b.bgStartColorG) ? 255 : b.bgStartColorG,
      t = isNaN(b.bgStartColorB) ? 255 : b.bgStartColorB,
      w = isNaN(b.bgEndColorR) ? 255 : b.bgEndColorR,
      x = isNaN(b.bgEndColorG) ? 255 : b.bgEndColorG,
      y = isNaN(b.bgEndColorB) ? 255 : b.bgEndColorB;
    a.setBackGroundColorVector(cc.p(b.vectorX || 0, b.vectorY || 0));
    var B = b.bgColorOpacity || 0;
    a.setBackGroundColorType(b.colorType || 0);
    a.setBackGroundColor(cc.color(u, v, t), cc.color(w, x, y));
    a.setBackGroundColor(cc.color(g, r, s));
    a.setBackGroundColorOpacity(B);
    (g = b.backGroundImageData) &&
      f(d, g.resourceType || 0, g.path, function (b, d) {
        a.setBackGroundImage(b, d);
      });
    e &&
      ((d = b.capInsetsX || 0),
      (e = b.capInsetsY || 0),
      (g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth),
      (r = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight),
      a.setBackGroundImageCapInsets(cc.rect(d, e, g, r)));
    b.layoutType && a.setLayoutType(b.layoutType);
  };
  e.ButtonAttributes = function (a, b, d) {
    var e = b.scale9Enable;
    a.setScale9Enabled(e);
    var g = b.normalData;
    f(d, g.resourceType || 0, g.path, function (b, d) {
      a.loadTextureNormal(b, d);
    });
    g = b.pressedData;
    f(d, g.resourceType || 0, g.path, function (b, d) {
      a.loadTexturePressed(b, d);
    });
    g = b.disabledData;
    f(d, g.resourceType || 0, g.path, function (b, d) {
      a.loadTextureDisabled(b, d);
    });
    if (e) {
      d = b.capInsetsX || 0;
      var e = b.capInsetsY || 0,
        g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth,
        r = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
      a.setCapInsets(cc.rect(d, e, g, r));
      d = b.scale9Width || 0;
      e = b.scale9Height || 0;
      null != d && null != e && a.setSize(cc.size(d, e));
    }
    if ((d = b.text || ""))
      a.setTitleText(d),
        a.setTitleColor(
          cc.color(
            null !== b.textColorR ? b.textColorR : 255,
            null !== b.textColorG ? b.textColorG : 255,
            null !== b.textColorB ? b.textColorB : 255
          )
        ),
        null != b.fontSize && a.setTitleFontSize(b.fontSize),
        b.fontName && a.setTitleFontName(b.fontName);
  };
  e.CheckBoxAttributes = function (a, b, d) {
    var e = b.backGroundBoxData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadTextureBackGround(b, d);
    });
    var g = b.backGroundBoxSelectedData;
    f(d, g.resourceType || e.resourceType, g.path || e.path, function (b, d) {
      a.loadTextureBackGroundSelected(b, d);
    });
    e = b.frontCrossData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadTextureFrontCross(b, d);
    });
    g = b.backGroundBoxDisabledData;
    f(d, g.resourceType || e.resourceType, g.path || e.path, function (b, d) {
      a.loadTextureBackGroundDisabled(b, d);
    });
    e = b.frontCrossDisabledData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadTextureFrontCrossDisabled(b, d);
    });
    b.selectedState && a.setSelected(b.selectedState);
  };
  e.ImageViewAttributes = function (a, b, d) {
    var e = b.fileNameData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadTexture(b, d);
    });
    d = !1;
    b.scale9Enable && (d = b.scale9Enable);
    a.setScale9Enabled(d);
    if (d) {
      d = b.scale9Height || 0;
      b.scale9Width &&
        d &&
        a.setSize(cc.size(b.scale9Width || 0, b.scale9Height || 0));
      d = b.capInsetsX || 0;
      var e = b.capInsetsY || 0,
        g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth;
      b = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
      a.setCapInsets(cc.rect(d, e, g, b));
    }
  };
  e.TextAtlasAttributes = function (a, b, d) {
    var e = b.stringValue,
      f = b.charMapFileData,
      g = b.itemWidth,
      s = b.itemHeight,
      u = b.startCharMap;
    if (null != e && f && null != g && null != s && null != u)
      switch (((b = b.charMapFileData), b.resourceType || 0)) {
        case 0:
          a.setProperty(e, d + b.path, g, s, u);
          break;
        case 1:
          cc.log("Wrong res type of LabelAtlas!");
      }
  };
  e.TextBMFontAttributes = function (a, b, d) {
    var e = b.fileNameData;
    switch (e.resourceType || 0) {
      case 0:
        a.setFntFile(d + e.path);
        break;
      case 1:
        cc.log("Wrong res type of LabelAtlas!");
    }
    a.setString(b.text || "");
  };
  var g = /\.ttf$/;
  e.TextAttributes = function (a, b, d) {
    a.setTouchScaleChangeEnabled(b.touchScaleEnable);
    var e = b.text || "";
    e && a._setString(e);
    null != b.fontSize && a._setFontSize(b.fontSize);
    e = b.fontName;
    null != e &&
      (cc.sys.isNative
        ? g.test(e)
          ? a.setFontName(cc.path.join(cc.loader.resPath, d, e))
          : a.setFontName(e)
        : a._setFontName(e.replace(g, "")));
    d = b.areaHeight || 0;
    b.areaWidth &&
      d &&
      ((d = cc.size(b.areaWidth, b.areaHeight)), a._setTextAreaSize(d));
    d = b.hAlignment || 0;
    null != d && a._setTextHorizontalAlignment(d);
    b = b.vAlignment || 0;
    null != b && a._setTextVerticalAlignment(b);
    a._updateUITextContentSize();
  };
  e.ListViewAttributes = function (a, b, d) {
    e.ScrollViewAttributes(a, b, d);
    a.setDirection(b.direction || 1);
    a.setGravity(b.gravity || 0);
    a.setItemsMargin(b.itemMargin || 0);
  };
  e.LoadingBarAttributes = function (a, b, d) {
    var e = b.textureData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadTexture(b, d);
    });
    d = b.scale9Enable;
    a.setScale9Enabled(d);
    if (d) {
      d = b.capInsetsX || 0;
      var e = b.capInsetsY || 0,
        g = isNaN(b.capInsetsWidth) ? 1 : b.capInsetsWidth,
        r = isNaN(b.capInsetsHeight) ? 1 : b.capInsetsHeight;
      a.setCapInsets(cc.rect(d, e, g, r));
      a.setSize(cc.size(b.width || 0, b.height || 0));
    }
    a.setDirection(b.direction || 0);
    a.setPercent(b.percent || 0);
  };
  e.PageViewAttributes = e.LayoutAttributes;
  e.ScrollViewAttributes = function (a, b, d) {
    e.LayoutAttributes(a, b, d);
    a.setInnerContainerSize(
      cc.size(
        null != b.innerWidth ? b.innerWidth : 200,
        null != b.innerHeight ? b.innerHeight : 200
      )
    );
    a.setDirection(null != b.direction ? b.direction : 1);
    a.setBounceEnabled(b.bounceEnable);
  };
  e.SliderAttributes = function (a, b, d) {
    var e = b.scale9Enable;
    a.setScale9Enabled(e);
    var g = b.length,
      r = b.barFileNameData,
      s = r.resourceType || 0,
      r = r.path;
    null != b.barFileName
      ? e &&
        (f(d, s, r, function (b, d) {
          a.loadBarTexture(b, d);
        }),
        a.setSize(cc.size(g, a.getContentSize().height)))
      : f(d, s, r, function (b, d) {
          a.loadBarTexture(b, d);
        });
    e = b.ballNormalData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadSlidBallTextureNormal(b, d);
    });
    g = b.ballPressedData;
    f(d, g.resourceType || e.resourceType, g.path || e.path, function (b, d) {
      a.loadSlidBallTexturePressed(b, d);
    });
    e = b.ballDisabledData;
    f(d, e.resourceType || 0, e.path, function (b, d) {
      a.loadSlidBallTextureDisabled(b, d);
    });
    b = b.progressBarData;
    f(d, b.resourceType || 0, b.path, function (b, d) {
      a.loadProgressBarTexture(b, d);
    });
  };
  e.TextFieldAttributes = function (a, b, d) {
    var e = b.placeHolder || "";
    e && a.setPlaceHolder(e);
    a.setString(b.text || "");
    (e = b.fontSize) && a.setFontSize(e);
    e = b.fontName;
    null != e &&
      (cc.sys.isNative
        ? g.test(e)
          ? a.setFontName(cc.path.join(cc.loader.resPath, d, e))
          : a.setFontName(e)
        : a.setFontName(e.replace(g, "")));
    d = b.touchSizeWidth || 0;
    e = b.touchSizeHeight || 0;
    null != d && null != e && a.setTouchSize(d, e);
    d = b.maxLengthEnable;
    a.setMaxLengthEnabled(d);
    d && a.setMaxLength(b.maxLength);
    d = b.passwordEnable;
    a.setPasswordEnabled(d);
    d && a.setPasswordStyleText(b.passwordStyleText);
    d = b.areaWidth || 0;
    e = b.areaHeight || 0;
    d && e && ((d = cc.size(d, e)), a.setTextAreaSize(d));
    (d = b.hAlignment || 0) && a.setTextHorizontalAlignment(d);
    (d = b.vAlignment || 0) && a.setTextVerticalAlignment(d);
    d = isNaN(b.colorR) ? 255 : b.colorR;
    e = isNaN(b.colorG) ? 255 : b.colorG;
    b = isNaN(b.colorB) ? 255 : b.colorB;
    a.setTextColor(cc.color(d, e, b));
  };
  e.parsers = {
    Panel: { object: ccui.Layout, handle: e.LayoutAttributes },
    Button: { object: ccui.Button, handle: e.ButtonAttributes },
    CheckBox: { object: ccui.CheckBox, handle: e.CheckBoxAttributes },
    ImageView: { object: ccui.ImageView, handle: e.ImageViewAttributes },
    LabelAtlas: { object: ccui.TextAtlas, handle: e.TextAtlasAttributes },
    LabelBMFont: { object: ccui.TextBMFont, handle: e.TextBMFontAttributes },
    Label: { object: ccui.Text, handle: e.TextAttributes },
    ListView: { object: ccui.ListView, handle: e.ListViewAttributes },
    LoadingBar: { object: ccui.LoadingBar, handle: e.LoadingBarAttributes },
    PageView: { object: ccui.PageView, handle: e.PageViewAttributes },
    ScrollView: { object: ccui.ScrollView, handle: e.ScrollViewAttributes },
    Slider: { object: ccui.Slider, handle: e.SliderAttributes },
    TextField: { object: ccui.TextField, handle: e.TextFieldAttributes },
  };
  a.registerParser("ccui", "*", e);
})(ccs._load, ccs._parser);
(function (a, b) {
  var d = new (b.extend({
    getNodeJson: function (a) {
      return a.action;
    },
    parseNode: function (a, b, d) {
      if (!a) return null;
      var h = this,
        k = new ccs.ActionTimeline();
      k.setDuration(a.duration);
      k.setTimeSpeed(a.speed || 1);
      a.timelines.forEach(function (a) {
        var d = h.parsers[a.frameType],
          e;
        d
          ? (e = d.call(h, a, b))
          : cc.log("parser does not exist : %s", a.frameType);
        e && k.addTimeline(e);
        "ColorFrame" === a.frameType &&
          k.addTimeline(h.parsers.AlphaFrame.call(h, a, b));
      });
      return k;
    },
  }))();
  [
    {
      name: "PositionFrame",
      handle: function (a) {
        var b = new ccs.PositionFrame();
        b.setPosition(cc.p(a.x, a.y));
        return b;
      },
    },
    {
      name: "VisibleFrame",
      handle: function (a) {
        var b = new ccs.VisibleFrame();
        b.setVisible(a.value);
        return b;
      },
    },
    {
      name: "ScaleFrame",
      handle: function (a) {
        var b = new ccs.ScaleFrame(),
          d = a.y;
        b.setScaleX(a.x);
        b.setScaleY(d);
        return b;
      },
    },
    {
      name: "RotationFrame",
      handle: function (a) {
        var b = new ccs.RotationFrame();
        b.setRotation(a.rotation);
        return b;
      },
    },
    {
      name: "SkewFrame",
      handle: function (a) {
        var b = new ccs.SkewFrame(),
          d = a.y;
        b.setSkewX(a.x);
        b.setSkewY(d);
        return b;
      },
    },
    {
      name: "RotationSkewFrame",
      handle: function (a) {
        var b = new ccs.RotationSkewFrame(),
          d = a.y;
        b.setSkewX(a.x);
        b.setSkewY(d);
        return b;
      },
    },
    {
      name: "AnchorFrame",
      handle: function (a) {
        var b = new ccs.AnchorPointFrame();
        b.setAnchorPoint(cc.p(a.x, a.y));
        return b;
      },
    },
    {
      name: "InnerActionFrame",
      handle: function (a) {
        var b = new ccs.InnerActionFrame(),
          d = a.startFrame;
        b.setInnerActionType(a.innerActionType);
        b.setStartFrameIndex(d);
        return b;
      },
    },
    {
      name: "ColorFrame",
      handle: function (a) {
        var b = new ccs.ColorFrame();
        b.setColor(cc.color(a.red, a.green, a.blue));
        new ccs.AlphaFrame().setAlpha(a.alpha);
        return b;
      },
    },
    {
      name: "AlphaFrame",
      handle: function (a) {
        var b = new ccs.AlphaFrame();
        b.setAlpha(a.alpha);
        return b;
      },
    },
    {
      name: "TextureFrame",
      handle: function (a) {
        var b = new ccs.TextureFrame();
        a = a.value;
        if (null != a) {
          var d = a;
          null == cc.spriteFrameCache.getSpriteFrame(d) &&
            (d = ccs.csLoader.getJsonPath() + a);
          b.setTextureName(d);
        }
        return b;
      },
    },
    {
      name: "EventFrame",
      handle: function (a) {
        var b = new ccs.EventFrame();
        a = a.value;
        null != a && b.setEvent(a);
        return b;
      },
    },
    {
      name: "ZOrderFrame",
      handle: function (a) {
        var b = new ccs.ZOrderFrame();
        b.setZOrder(a.value);
        return b;
      },
    },
  ].forEach(function (a) {
    d.registerParser(a.name, function (b, d) {
      var h = new ccs.Timeline();
      h.setActionTag(b.actionTag);
      var k = b.frames;
      k &&
        k.length &&
        k.forEach(function (b) {
          var d = a.handle(b);
          d.setFrameIndex(b.frameIndex);
          d.setTween(b.tween);
          h.addFrame(d);
        });
      return h;
    });
  });
  a.registerParser("action", "0.*", d);
  a.registerParser("action", "1.*", d);
})(ccs._load, ccs._parser);
(function (a, b) {
  var d = new (b.extend({
      getNodeJson: function (a) {
        return a.Content.Content.Animation;
      },
      parseNode: function (a, b, d) {
        if (!a) return null;
        var e = this,
          m = new ccs.ActionTimeline();
        m.setDuration(a.Duration);
        m.setTimeSpeed(a.Speed || 1);
        a.Timelines.forEach(function (a) {
          var d = e.parsers[a.Property],
            f;
          d
            ? (f = d.call(e, a, b))
            : cc.log("parser does not exist : %s", a.Property);
          f && m.addTimeline(f);
        });
        return m;
      },
      deferred: function (a, b, d, e) {
        b = (a = a.Content.Content.AnimationList) ? a.length : 0;
        for (e = 0; e < b; e++) {
          var m = a[e],
            n = { name: null, startIndex: null, endIndex: null };
          n.name = m.Name;
          n.startIndex = m.StartIndex;
          n.endIndex = m.EndIndex;
          d.addAnimationInfo(n);
        }
      },
    }))(),
    e = function (a, b) {
      a.setTweenType(b.Type);
      var d = b.Points,
        e = [];
      d &&
        (d.forEach(function (a) {
          e.push(a.X);
          e.push(a.Y);
        }),
        a.setEasingParams(e));
    };
  [
    {
      name: "Position",
      handle: function (a) {
        var b = new ccs.PositionFrame();
        b.setPosition(cc.p(a.X, a.Y));
        return b;
      },
    },
    {
      name: "VisibleForFrame",
      handle: function (a) {
        var b = new ccs.VisibleFrame();
        b.setVisible(a.Value);
        return b;
      },
    },
    {
      name: "Scale",
      handle: function (a) {
        var b = new ccs.ScaleFrame(),
          d = a.Y;
        b.setScaleX(a.X);
        b.setScaleY(d);
        return b;
      },
    },
    {
      name: "Rotation",
      handle: function (a) {
        var b = new ccs.RotationFrame();
        b.setRotation(a.Rotation || a.Value || 0);
        return b;
      },
    },
    {
      name: "Skew",
      handle: function (a) {
        var b = new ccs.SkewFrame(),
          d = a.Y;
        b.setSkewX(a.X);
        b.setSkewY(d);
        return b;
      },
    },
    {
      name: "RotationSkew",
      handle: function (a) {
        var b = new ccs.RotationSkewFrame(),
          d = a.Y;
        b.setSkewX(a.X);
        b.setSkewY(d);
        return b;
      },
    },
    {
      name: "Anchor",
      handle: function (a) {
        var b = new ccs.AnchorPointFrame();
        b.setAnchorPoint(cc.p(a.X, a.Y));
        return b;
      },
    },
    {
      name: "AnchorPoint",
      handle: function (a) {
        var b = new ccs.AnchorPointFrame();
        b.setAnchorPoint(cc.p(a.X, a.Y));
        return b;
      },
    },
    {
      name: "InnerAction",
      handle: function (a) {
        var b = new ccs.InnerActionFrame(),
          d = a.StartFrame;
        b.setInnerActionType(a.InnerActionType);
        b.setStartFrameIndex(d);
        return b;
      },
    },
    {
      name: "CColor",
      handle: function (a) {
        var b = new ccs.ColorFrame();
        (a = a.Color) || (a = {});
        a.R = void 0 === a.R ? 255 : a.R;
        a.G = void 0 === a.G ? 255 : a.G;
        a.B = void 0 === a.B ? 255 : a.B;
        b.setColor(cc.color(a.R, a.G, a.B));
        return b;
      },
    },
    {
      name: "Alpha",
      handle: function (a) {
        var b = new ccs.AlphaFrame();
        b.setAlpha(a.Value);
        return b;
      },
    },
    {
      name: "FileData",
      handle: function (a, b) {
        var d, e, m, n;
        d = new ccs.TextureFrame();
        e = a.TextureFile;
        null != e &&
          ((m = e.Plist),
          (e = e.Path),
          (n = cc.spriteFrameCache.getSpriteFrame(e)),
          !n &&
            m &&
            (cc.loader.getRes(b + m)
              ? (cc.spriteFrameCache.addSpriteFrames(b + m),
                (n = cc.spriteFrameCache.getSpriteFrame(e)))
              : cc.log("%s need to be preloaded", b + m)),
          null == n && (e = b + e),
          d.setTextureName(e));
        return d;
      },
    },
    {
      name: "FrameEvent",
      handle: function (a) {
        var b = new ccs.EventFrame();
        a = a.Value;
        null != a && b.setEvent(a);
        return b;
      },
    },
    {
      name: "ZOrder",
      handle: function (a) {
        var b = new ccs.ZOrderFrame();
        b.setZOrder(a.Value);
        return b;
      },
    },
    {
      name: "ActionValue",
      handle: function (a) {
        var b = new ccs.InnerActionFrame(),
          d = a.InnerActionType,
          e = a.CurrentAniamtionName,
          m = a.SingleFrameIndex;
        a = a.FrameIndex;
        void 0 !== a && b.setFrameIndex(a);
        b.setInnerActionType(ccs.InnerActionType[d]);
        b.setSingleFrameIndex(m);
        b.setEnterWithName(!0);
        e && b.setAnimationName(e);
        return b;
      },
    },
    {
      name: "BlendFunc",
      handle: function (a) {
        var b = new ccs.BlendFuncFrame();
        (a = a.BlendFunc) &&
          void 0 !== a.Src &&
          void 0 !== a.Dst &&
          b.setBlendFunc(new cc.BlendFunc(a.Src, a.Dst));
        return b;
      },
    },
  ].forEach(function (a) {
    d.registerParser(a.name, function (b, d) {
      var k = new ccs.Timeline();
      k.setActionTag(b.ActionTag);
      var m = b.Frames;
      m &&
        m.length &&
        m.forEach(function (b) {
          var g = a.handle(b, d);
          g.setFrameIndex(b.FrameIndex);
          g.setTween(null != b.Tween ? b.Tween : !0);
          (b = b.EasingData) && e(g, b);
          k.addFrame(g);
        });
      return k;
    });
  });
  a.registerParser("action", "2.*", d);
  a.registerParser("action", "*", d);
})(ccs._load, ccs._parser);
(function (a, b) {
  var d = {},
    e = new (b.extend({
      getNodeJson: function (a) {
        return a.nodeTree;
      },
      addSpriteFrame: function (a, b, e) {
        if (a && b && a.length === b.length)
          for (var f = 0; f < a.length; f++) {
            var n = e + a[f];
            cc.loader.getRes(n) || d[n]
              ? (d[n] = !0)
              : cc.log("%s need to be preloaded", n);
            cc.spriteFrameCache.addSpriteFrames(n, e + b[f]);
          }
      },
      pretreatment: function (a, b, d) {
        this.addSpriteFrame(a.textures, a.texturesPng, b);
      },
    }))();
  e.generalAttributes = function (a, b) {
    var d = null != b.width ? b.width : 0,
      e = null != b.height ? b.height : 0,
      f = null != b.x ? b.x : 0,
      p = null != b.y ? b.y : 0,
      r = null != b.scaleX ? b.scaleX : 1,
      s = null != b.scaleY ? b.scaleY : 1,
      u = null != b.rotation ? b.rotation : 0,
      v = null != b.rotationSkewX ? b.rotationSkewX : 0,
      t = null != b.rotationSkewY ? b.rotationSkewY : 0,
      w = null != b.skewX ? b.skewX : 0,
      x = null != b.skewY ? b.skewY : 0,
      y = null != b.anchorPointX ? b.anchorPointX : 0.5,
      B = null != b.anchorPointY ? b.anchorPointY : 0.5,
      A = null != b.opacity ? b.opacity : 255,
      z = null != b.colorR ? b.colorR : 255,
      C = null != b.colorG ? b.colorG : 255,
      D = null != b.colorB ? b.colorB : 255,
      E = null != b.colorR ? b.colorR : 0,
      J = null != b.tag ? b.tag : 0,
      G = null != b.actionTag ? b.actionTag : 0,
      F = null != b.visible ? b.visible : !0;
    (0 == f && 0 == p) || a.setPosition(cc.p(f, p));
    1 != r && a.setScaleX(r);
    1 != s && a.setScaleY(s);
    0 != u && a.setRotation(u);
    0 != v && a.setRotationX(v);
    0 != t && a.setRotationY(t);
    0 != w && a.setSkewX(w);
    0 != x && a.setSkewY(x);
    (0.5 == y && 0.5 == B) || a.setAnchorPoint(cc.p(y, B));
    (0 == d && 0 == e) || a.setContentSize(cc.size(d, e));
    0 != E && a.setLocalZOrder(E);
    !0 != F && a.setVisible(F);
    255 != A && a.setOpacity(A);
    (255 == z && 255 == C && 255 == D) || a.setColor(cc.color(z, C, D));
    a.setTag(J);
    a.setUserObject(new ccs.ActionTimelineData(G));
  };
  e.parseComponent = function (a, b) {
    if (b)
      for (var d = 0; d < b.length; ++d) {
        var e = this.loadComponent(b[d]);
        e && a.addComponent(e);
      }
  };
  e.parseChild = function (a, b, d, e) {
    a = d.children;
    for (d = 0; d < a.length; d++) {
      var f = this.parseNode(a[d], e);
      if (f)
        if (b instanceof ccui.PageView)
          f instanceof ccui.Layout && b.addPage(f);
        else if (b instanceof ccui.ListView)
          f instanceof ccui.Widget && b.pushBackCustomItem(f);
        else {
          if (!(b instanceof ccui.Layout) && f instanceof ccui.Widget) {
            if (f.getPositionType() === ccui.Widget.POSITION_PERCENT) {
              var p = f.getPositionPercent(),
                r = b.getAnchorPoint();
              f.setPositionPercent(cc.p(p.x + r.x, p.y + r.y));
            }
            p = b.getAnchorPointInPoints();
            f.setPosition(cc.p(f.getPositionX() + p.x, f.getPositionY() + p.y));
          }
          b.addChild(f);
        }
    }
  };
  e.initNode = function (a) {
    var b = new cc.Node();
    this.generalAttributes(b, a);
    return b;
  };
  e.initSubGraph = function (a) {
    var b = a.fileName,
      b = b && "" !== b ? this.createNode(b) : new ccs.Node();
    this.generalAttributes(b, a);
    return b;
  };
  e.initSprite = function (a, b) {
    var d = a.fileName;
    if (null != d) {
      var e = cc.spriteFrameCache.getSpriteFrame(d),
        d = e ? ccs.Sprite.createWithSpriteFrame(e) : new ccs.Sprite(b + d);
      d ||
        ((d = new cc.Sprite()),
        cc.log("filePath is empty. Create a sprite with no texture"));
    } else d = new ccs.Sprite();
    this.generalAttributes(d, a);
    var e = a.flipX,
      f = a.flipY;
    !1 != e && d.setFlippedX(e);
    !1 != f && d.setFlippedY(f);
    return d;
  };
  e.initParticle = function (a, b) {
    var d = a.tmxFile,
      e = new cc.ParticleSystemQuad(a.plistFile);
    e.setTotalParticles(d);
    this.generalAttributes(e, a);
    return e;
  };
  e.initTMXTiledMap = function (a, b) {
    var d = a.tmxFile,
      e = a.tmxString,
      f = a.resourcePath,
      p = null;
    d && "" !== d
      ? (p = new cc.TMXTiledMap(d))
      : e && "" !== e && f && "" !== f && (p = new cc.TMXTiledMap(e, f));
    return p;
  };
  var f = a.getParser("ccui")["*"];
  e.initWidget = function (a, b) {
    var d = a.classname,
      e = f.parsers[d];
    if (!e) return cc.log("%s parser is not found", d);
    if ((d = e.call(f, a, b))) {
      var e = a.rotationSkewX,
        n = a.rotationSkewY,
        p = a.skewX,
        r = a.skewY;
      0 != e && d.setRotationX(e);
      0 != n && d.setRotationY(n);
      0 != p && d.setSkewX(p);
      0 != r && d.setSkewY(r);
      d.setUserObject(new ccs.ActionTimelineData(a.actionTag));
    }
    return d;
  };
  [
    { name: "Node", handle: e.initNode },
    { name: "SubGraph", handle: e.initSubGraph },
    { name: "Sprite", handle: e.initSprite },
    { name: "Particle", handle: e.initParticle },
    { name: "TMXTiledMap", handle: e.initTMXTiledMap },
    { name: "Widget", handle: e.initWidget },
    { name: "Panel", handle: e.initWidget },
    { name: "Button", handle: e.initWidget },
    { name: "CheckBox", handle: e.initWidget },
    { name: "ImageView", handle: e.initWidget },
    { name: "LabelAtlas", handle: e.initWidget },
    { name: "LabelBMFont", handle: e.initWidget },
    { name: "Label", handle: e.initWidget },
    { name: "ListView", handle: e.initWidget },
    { name: "LoadingBar", handle: e.initWidget },
    { name: "PageView", handle: e.initWidget },
    { name: "ScrollView", handle: e.initWidget },
    { name: "Slider", handle: e.initWidget },
    { name: "TextField", handle: e.initWidget },
  ].forEach(function (a) {
    e.registerParser(a.name, function (b, d, e) {
      var f = a.handle.call(this, b.options);
      this.parseComponent(f, b.components);
      this.parseChild(d, f, b, e);
      return f;
    });
  });
  a.registerParser("timeline", "0.*", e);
  a.registerParser("timeline", "1.*", e);
})(ccs._load, ccs._parser);
(function (a, b) {
  var d = new (b.extend({
      parse: function (a, b, d) {
        d = void 0 !== d ? d : this._dirname(a);
        this.pretreatment(b, d, a);
        var e = this.parseNode(this.getNodeJson(b), d);
        this.deferred(b, d, e, a);
        return e;
      },
      getNodeJson: function (a) {
        a = a.Content;
        return a.ObjectData ? a.ObjectData : a.Content.ObjectData;
      },
      getClass: function (a) {
        return a.ctype;
      },
    }))(),
    e = function (a, b) {
      return void 0 === a ? b : a;
    };
  d.generalAttributes = function (a, b) {
    null != b.Name && a.setName(b.Name);
    var d = b.Position;
    null == d ||
      (null == d.X && null == d.Y) ||
      a.setPosition(cc.p(d.X || 0, d.Y || 0));
    d = b.Scale;
    null != d &&
      (null != d.ScaleX && a.setScaleX(d.ScaleX),
      null != d.ScaleY && a.setScaleY(d.ScaleY));
    d = b.RotationSkewX;
    null != d && a.setRotationX(d);
    d = b.RotationSkewY;
    null != b.RotationSkewY && a.setRotationY(d);
    d = b.AnchorPoint;
    null != d &&
      (null == d.ScaleX && (d.ScaleX = 0),
      null == d.ScaleY && (d.ScaleY = 0),
      (0.5 == d.ScaleX && 0.5 == d.ScaleY) ||
        a.setAnchorPoint(cc.p(d.ScaleX, d.ScaleY)));
    null != b.ZOrder && a.setLocalZOrder(b.ZOrder);
    d = e(b.VisibleForFrame, !0);
    a.setVisible(d);
    (d = b.Size) && s(a, d);
    null != b.Alpha && a.setOpacity(b.Alpha);
    a.setTag(b.Tag || 0);
    var d = b.ActionTag || 0,
      f = new ccs.ComExtensionData(),
      h = b.UserData;
    void 0 !== h && f.setCustomProperty(h);
    f.setActionTag(d);
    a.getComponent("ComExtensionData") && a.removeComponent("ComExtensionData");
    a.addComponent(f);
    a.setCascadeColorEnabled(!0);
    a.setCascadeOpacityEnabled(!0);
    g(a, b);
  };
  d.parseChild = function (a, b, d) {
    if (a && b)
      for (var e = 0; e < b.length; e++) {
        var f = this.parseNode(b[e], d);
        if (f)
          if (a instanceof ccui.PageView)
            f instanceof ccui.Layout && a.addPage(f);
          else if (a instanceof ccui.ListView)
            f instanceof ccui.Widget && a.pushBackCustomItem(f);
          else {
            if (
              !(a instanceof ccui.Layout) &&
              f instanceof ccui.Widget &&
              f.getPositionType() === ccui.Widget.POSITION_PERCENT
            ) {
              var g = f.getPositionPercent(),
                h = a.getAnchorPoint();
              f.setPositionPercent(cc.p(g.x + h.x, g.y + h.y));
            }
            a.addChild(f);
          }
      }
  };
  d.initSingleNode = function (a) {
    var b = new cc.Node();
    this.generalAttributes(b, a);
    a = a.CColor;
    null != a && b.setColor(r(a));
    return b;
  };
  d.initSprite = function (a, b) {
    var d = new cc.Sprite();
    p(a.FileData, b, function (a, b) {
      if (0 === b) d.setTexture(a);
      else if (1 === b) {
        var e = cc.spriteFrameCache.getSpriteFrame(a);
        e && d.setSpriteFrame(e);
      }
    });
    var e = a.BlendFunc;
    if (a.BlendFunc) {
      var f = cc.BlendFunc.ALPHA_PREMULTIPLIED;
      void 0 !== e.Src && (f.src = e.Src);
      void 0 !== e.Dst && (f.dst = e.Dst);
      d.setBlendFunc(f);
    }
    a.FlipX && d.setFlippedX(!0);
    a.FlipY && d.setFlippedY(!0);
    this.generalAttributes(d, a);
    e = a.CColor;
    null != e && d.setColor(r(e));
    return d;
  };
  d.initParticle = function (a, b) {
    var d,
      e = this;
    p(a.FileData, b, function (b, f) {
      cc.loader.getRes(b) || cc.log("%s need to be preloaded", b);
      d = new cc.ParticleSystem(b);
      e.generalAttributes(d, a);
      d.setPositionType(cc.ParticleSystem.TYPE_GROUPED);
      !cc.sys.isNative && d.setDrawMode(cc.ParticleSystem.TEXTURE_MODE);
      var g = a.BlendFunc;
      if (a.BlendFunc) {
        var h = cc.BlendFunc.ALPHA_PREMULTIPLIED;
        void 0 !== g.Src && (h.src = g.Src);
        void 0 !== g.Dst && (h.dst = g.Dst);
        d.setBlendFunc(h);
      }
    });
    return d;
  };
  d.widgetAttributes = function (a, b, d) {
    a.setCascadeColorEnabled(!0);
    a.setCascadeOpacityEnabled(!0);
    a.setUnifySizeEnabled(!1);
    a.ignoreContentAdaptWithSize(!1);
    !d && s(a, b.Size);
    (d = b.Name) && a.setName(d);
    d = b.ActionTag || 0;
    a.setActionTag(d);
    var h = new ccs.ComExtensionData(),
      k = b.UserData;
    void 0 !== k && h.setCustomProperty(k);
    h.setActionTag(d);
    a.getComponent("ComExtensionData") && a.removeComponent("ComExtensionData");
    a.addComponent(h);
    (d = b.RotationSkewX) && a.setRotationX(d);
    (d = b.RotationSkewY) && a.setRotationY(d);
    b.FlipX && a.setFlippedX(!0);
    b.FlipY && a.setFlippedY(!0);
    d = b.zOrder;
    null != d && a.setLocalZOrder(d);
    d = e(b.VisibleForFrame, !0);
    a.setVisible(d);
    d = b.Alpha;
    null != d && a.setOpacity(d);
    a.setTag(b.Tag || 0);
    a.setTouchEnabled(b.TouchEnable || !1);
    d = b.CallBackType;
    null != d && a.setCallbackType(d);
    (d = b.CallBackName) && a.setCallbackName(d);
    d = b.Position;
    null != d && a.setPosition(d.X || 0, d.Y || 0);
    h = b.Scale;
    null != h &&
      ((d = e(h.ScaleX, 1)),
      (h = e(h.ScaleY, 1)),
      a.setScaleX(d),
      a.setScaleY(h));
    d = b.AnchorPoint;
    null != d && a.setAnchorPoint(d.ScaleX || 0, d.ScaleY || 0);
    d = b.CColor;
    null != d && a.setColor(r(d));
    g(a, b);
    f(a, b);
  };
  var f = function (a, b) {
      var d = b.CallBackType,
        e = b.CallBackName,
        f = function (b) {
          if ("function" === typeof a[e]) a[e](b);
        };
      "Click" === d
        ? a.addClickEventListener(f)
        : "Touch" === d
        ? a.addTouchEventListener(f)
        : "Event" === d && a.addCCSEventListener(f);
    },
    g = function (a, b) {
      var d = ccui.LayoutComponent.bindLayoutComponent(a);
      if (d) {
        var e = b.PositionPercentXEnable || b.PositionPercentXEnabled || !1,
          f = b.PositionPercentYEnable || b.PositionPercentYEnabled || !1,
          g = 0,
          h = 0,
          k = b.PrePosition;
        null != k && ((g = k.X || 0), (h = k.Y || 0));
        var m = b.PercentWidthEnable || b.PercentWidthEnabled || !1,
          n = b.PercentHeightEnable || b.PercentHeightEnabled || !1,
          p = 0,
          r = 0,
          s = b.PreSize;
        null != k && ((p = s.X || 0), (r = s.Y || 0));
        var G = b.StretchWidthEnable || !1,
          F = b.StretchHeightEnable || !1,
          L = b.HorizontalEdge,
          k = b.VerticalEdge,
          s = b.LeftMargin || 0,
          H = b.RightMargin || 0,
          I = b.TopMargin || 0,
          M = b.BottomMargin || 0;
        d.setPositionPercentXEnabled(e);
        d.setPositionPercentYEnabled(f);
        d.setPositionPercentX(g);
        d.setPositionPercentY(h);
        d.setPercentWidthEnabled(m);
        d.setPercentHeightEnabled(n);
        d.setPercentWidth(p);
        d.setPercentHeight(r);
        d.setPercentWidthEnabled(m || n);
        d.setStretchWidthEnabled(G);
        d.setStretchHeightEnabled(F);
        e = ccui.LayoutComponent.horizontalEdge.NONE;
        "LeftEdge" === L
          ? (e = ccui.LayoutComponent.horizontalEdge.LEFT)
          : "RightEdge" === L
          ? (e = ccui.LayoutComponent.horizontalEdge.RIGHT)
          : "BothEdge" === L &&
            (e = ccui.LayoutComponent.horizontalEdge.CENTER);
        d.setHorizontalEdge(e);
        e = ccui.LayoutComponent.verticalEdge.NONE;
        "TopEdge" === k
          ? (e = ccui.LayoutComponent.verticalEdge.TOP)
          : "BottomEdge" === k
          ? (e = ccui.LayoutComponent.verticalEdge.BOTTOM)
          : "BothEdge" === k && (e = ccui.LayoutComponent.verticalEdge.CENTER);
        d.setVerticalEdge(e);
        d.setTopMargin(I);
        d.setBottomMargin(M);
        d.setLeftMargin(s);
        d.setRightMargin(H);
        d.setVerticalEdge(e);
        d.setTopMargin(I);
        d.setBottomMargin(M);
        d.setLeftMargin(s);
        d.setRightMargin(H);
      }
    },
    h = function (a, b, d, e) {
      2 === a.getBackGroundColorType()
        ? ((d = d || {}), (e = e || {}), a.setBackGroundColor(r(d), r(e)))
        : ((b = b || {}), a.setBackGroundColor(r(b)));
    },
    k = function (a, b) {
      a.setBackGroundColorVector(cc.p(b.ScaleX || 0, b.ScaleY || 0));
    };
  d.initPanel = function (a, b) {
    var d = new ccui.Layout();
    this.widgetAttributes(d, a);
    var f = a.ClipAble || !1;
    null != f && d.setClippingEnabled(f);
    f = e(a.ComboBoxIndex, 0);
    d.setBackGroundColorType(f);
    f = e(a.BackColorAlpha, 255);
    null != f && d.setBackGroundColorOpacity(f);
    f = a.Scale9Enable;
    null != f && d.setBackGroundImageScale9Enabled(f);
    var g = e(a.Alpha, 255);
    d.setOpacity(g);
    p(a.FileData, b, function (a, b) {
      d.setBackGroundImage(a, b);
    });
    f
      ? (d.setBackGroundImageCapInsets(
          cc.rect(
            a.Scale9OriginX || 0,
            a.Scale9OriginY || 0,
            a.Scale9Width || 0,
            a.Scale9Height || 0
          )
        ),
        s(d, a.Size))
      : d.isIgnoreContentAdaptWithSize() || s(d, a.Size);
    h(d, a.SingleColor, a.FirstColor, a.EndColor);
    k(d, a.ColorVector);
    return d;
  };
  d.initText = function (a, b) {
    var d = new ccui.Text(),
      f = a.TouchScaleChangeAble;
    null != f && d.setTouchScaleChangeEnabled(f);
    f = a.LabelText;
    null != f && d.setString(f);
    f = a.FontSize;
    null != f && d.setFontSize(f);
    f = a.FontName;
    null != f && d.setFontName(f);
    var f = a.AreaWidth,
      g = a.areaHeight;
    f && g && d.setTextAreaSize(cc.size(f, g));
    f = a.HorizontalAlignmentType || "HT_Left";
    switch (f) {
      case "HT_Right":
        f = 2;
        break;
      case "HT_Center":
        f = 1;
        break;
      default:
        f = 0;
    }
    d.setTextHorizontalAlignment(f);
    f = a.VerticalAlignmentType || "VT_Top";
    switch (f) {
      case "VT_Bottom":
        f = 2;
        break;
      case "VT_Center":
        f = 1;
        break;
      default:
        f = 0;
    }
    d.setTextVerticalAlignment(f);
    f = a.FontResource;
    null != f &&
      ((f = f.Path),
      null != f &&
        ((f = cc.sys.isNative
          ? cc.path.join(cc.loader.resPath, b, f)
          : (f = f.match(/([^\/]+)\.(\S+)/))
          ? f[1]
          : ""),
        d.setFontName(f)));
    a.OutlineEnabled &&
      a.OutlineColor &&
      d.enableOutline &&
      d.enableOutline(r(a.OutlineColor), e(a.OutlineSize, 1));
    a.ShadowEnabled &&
      a.ShadowColor &&
      d.enableShadow &&
      d.enableShadow(
        r(a.ShadowColor),
        cc.size(e(a.ShadowOffsetX, 2), e(a.ShadowOffsetY, -2)),
        a.ShadowBlurRadius || 0
      );
    f = a.IsCustomSize;
    null != f && d.ignoreContentAdaptWithSize(!f);
    d.setUnifySizeEnabled(!1);
    f = a.CColor;
    a.CColor = null;
    d.setTextColor(r(f));
    this.widgetAttributes(d, a, d.isIgnoreContentAdaptWithSize());
    a.CColor = f;
    return d;
  };
  d.initButton = function (a, b) {
    var d = new ccui.Button();
    p(a.NormalFileData, b, function (a, b) {
      d.loadTextureNormal(a, b);
    });
    p(a.PressedFileData, b, function (a, b) {
      d.loadTexturePressed(a, b);
    });
    p(a.DisabledFileData, b, function (a, b) {
      d.loadTextureDisabled(a, b);
    });
    var f = e(a.Scale9Enable, !1);
    f && d.setScale9Enabled(f);
    var g = a.ButtonText;
    null != g && d.setTitleText(g);
    g = a.FontSize;
    null != g && d.setTitleFontSize(g);
    g = a.FontName;
    null != g && d.setTitleFontName(g);
    g = a.TextColor;
    null != g && d.setTitleColor(r(g));
    g = e(a.DisplayState, !0);
    d.setBright(g);
    d.setEnabled(g);
    g = a.FontResource;
    null != g &&
      ((g = g.Path),
      null != g &&
        ((g = cc.sys.isNative
          ? cc.path.join(cc.loader.resPath, b, g)
          : (g = g.match(/([^\/]+)\.(\S+)/))
          ? g[1]
          : ""),
        d.setTitleFontName(g)));
    (g = d.getTitleRenderer()) &&
      a.ShadowEnabled &&
      a.ShadowColor &&
      g.enableShadow &&
      g.enableShadow(
        r(a.ShadowColor),
        cc.size(e(a.ShadowOffsetX, 2), e(a.ShadowOffsetY, -2)),
        a.ShadowBlurRadius || 0
      );
    g &&
      a.OutlineEnabled &&
      a.OutlineColor &&
      g.enableStroke &&
      g.enableStroke(r(a.OutlineColor), e(a.OutlineSize, 1));
    this.widgetAttributes(d, a);
    f &&
      (d.setUnifySizeEnabled(!1),
      d.ignoreContentAdaptWithSize(!1),
      (f = cc.rect(
        a.Scale9OriginX || 0,
        a.Scale9OriginY || 0,
        a.Scale9Width || 0,
        a.Scale9Height || 0
      )),
      d.setCapInsets(f));
    s(d, a.Size);
    return d;
  };
  d.initCheckBox = function (a, b) {
    var d = new ccui.CheckBox();
    this.widgetAttributes(d, a);
    [
      { name: "NormalBackFileData", handle: d.loadTextureBackGround },
      { name: "PressedBackFileData", handle: d.loadTextureBackGroundSelected },
      { name: "NodeNormalFileData", handle: d.loadTextureFrontCross },
      { name: "DisableBackFileData", handle: d.loadTextureBackGroundDisabled },
      { name: "NodeDisableFileData", handle: d.loadTextureFrontCrossDisabled },
    ].forEach(function (e) {
      p(a[e.name], b, function (a, b) {
        e.handle.call(d, a, b);
      });
    });
    var f = e(a.CheckedState, !1);
    d.setSelected(f);
    f = e(a.DisplayState, !0);
    d.setBright(f);
    d.setEnabled(f);
    return d;
  };
  d.initScrollView = function (a, b) {
    var d = new ccui.ScrollView();
    this.widgetAttributes(d, a);
    p(a.FileData, b, function (a, b) {
      d.setBackGroundImage(a, b);
    });
    d.setClippingEnabled(a.ClipAble || !1);
    var f = e(a.ComboBoxIndex, 0);
    d.setBackGroundColorType(f);
    f = a.BackColorAlpha;
    null != f && d.setBackGroundColorOpacity(f);
    a.Scale9Enable
      ? (d.setBackGroundImageScale9Enabled(!0),
        d.setBackGroundImageCapInsets(
          cc.rect(
            a.Scale9OriginX || 0,
            a.Scale9OriginY || 0,
            a.Scale9Width || 0,
            a.Scale9Height || 0
          )
        ),
        s(d, a.Size))
      : d.isIgnoreContentAdaptWithSize() || s(d, a.Size);
    h(d, a.SingleColor, a.FirstColor, a.EndColor);
    k(d, a.ColorVector);
    f = a.InnerNodeSize;
    f = cc.size(f.Width || 0, f.Height || 0);
    d.setInnerContainerSize(f);
    f = 0;
    "Vertical" === a.ScrollDirectionType && (f = 1);
    "Horizontal" === a.ScrollDirectionType && (f = 2);
    "Vertical_Horizontal" === a.ScrollDirectionType && (f = 3);
    d.setDirection(f);
    f = e(a.IsBounceEnabled, !1);
    d.setBounceEnabled(f);
    return d;
  };
  d.initImageView = function (a, b) {
    var d = new ccui.ImageView();
    p(a.FileData, b, function (a, b) {
      d.loadTexture(a, b);
    });
    p(a.ImageFileData, b, function (a, b) {
      d.loadTexture(a, b);
    });
    a.Scale9Enable
      ? (d.setScale9Enabled(!0),
        d.setUnifySizeEnabled(!1),
        d.ignoreContentAdaptWithSize(!1),
        d.setCapInsets(
          cc.rect(
            a.Scale9OriginX || 0,
            a.Scale9OriginY || 0,
            a.Scale9Width || 0,
            a.Scale9Height || 0
          )
        ))
      : s(d, a.Size);
    this.widgetAttributes(d, a);
    return d;
  };
  d.initLoadingBar = function (a, b) {
    var d = new ccui.LoadingBar();
    this.widgetAttributes(d, a);
    p(a.ImageFileData, b, function (a, b) {
      d.loadTexture(a, b);
    });
    d.setDirection("Right_To_Left" === a.ProgressType ? 1 : 0);
    var f = e(a.ProgressInfo, 80);
    null != f && d.setPercent(f);
    return d;
  };
  d.initSlider = function (a, b) {
    var d = new ccui.Slider(),
      f = cc.loader;
    this.widgetAttributes(d, a);
    [
      { name: "BackGroundData", handle: d.loadBarTexture },
      { name: "BallNormalData", handle: d.loadSlidBallTextureNormal },
      { name: "BallPressedData", handle: d.loadSlidBallTexturePressed },
      { name: "BallDisabledData", handle: d.loadSlidBallTextureDisabled },
      { name: "ProgressBarData", handle: d.loadProgressBarTexture },
    ].forEach(function (e) {
      p(a[e.name], b, function (a, b) {
        0 !== b || f.getRes(a) || cc.log("%s need to be preloaded", a);
        e.handle.call(d, a, b);
      });
    });
    d.setPercent(a.PercentInfo || 0);
    var g = e(a.DisplayState, !0);
    d.setBright(g);
    d.setEnabled(g);
    return d;
  };
  d.initPageView = function (a, b) {
    var d = new ccui.PageView();
    this.widgetAttributes(d, a);
    p(a.FileData, b, function (a, b) {
      d.setBackGroundImage(a, b);
    });
    d.setClippingEnabled(a.ClipAble || !1);
    a.Scale9Enable &&
      (d.setBackGroundImageScale9Enabled(!0),
      d.setBackGroundImageCapInsets(
        cc.rect(
          a.Scale9OriginX || 0,
          a.Scale9OriginY || 0,
          a.Scale9Width || 0,
          a.Scale9Height || 0
        )
      ));
    var f = e(a.ComboBoxIndex, 0);
    d.setBackGroundColorType(f);
    h(d, a.SingleColor, a.FirstColor, a.EndColor);
    k(d, a.ColorVector);
    f = a.BackColorAlpha;
    null != f && d.setBackGroundColorOpacity(f);
    s(d, a.Size);
    return d;
  };
  d.initListView = function (a, b) {
    var d = new ccui.ListView();
    this.widgetAttributes(d, a);
    p(a.FileData, b, function (a, b) {
      d.setBackGroundImage(a, b);
    });
    d.setClippingEnabled(a.ClipAble || !1);
    var f = e(a.ComboBoxIndex, 0);
    d.setBackGroundColorType(f);
    f = e(a.BackColorAlpha, 255);
    a.Scale9Enable &&
      (d.setBackGroundImageScale9Enabled(!0),
      d.setBackGroundImageCapInsets(
        cc.rect(
          a.Scale9OriginX || 0,
          a.Scale9OriginY || 0,
          a.Scale9Width || 0,
          a.Scale9Height || 0
        )
      ));
    var g = e(a.DirectionType, ccui.ListView.DIR_HORIZONTAL),
      m = e(a.VerticalType, "Align_Left"),
      n = e(a.HorizontalType, "Align_Top");
    g
      ? "Vertical" === g &&
        (d.setDirection(ccui.ScrollView.DIR_VERTICAL),
        "" === n
          ? d.setGravity(ccui.ListView.GRAVITY_LEFT)
          : "Align_Right" === n
          ? d.setGravity(ccui.ListView.GRAVITY_RIGHT)
          : "Align_HorizontalCenter" === n &&
            d.setGravity(ccui.ListView.GRAVITY_CENTER_HORIZONTAL))
      : (d.setDirection(ccui.ScrollView.DIR_HORIZONTAL),
        "Align_Bottom" === m
          ? d.setGravity(ccui.ListView.GRAVITY_BOTTOM)
          : "Align_VerticalCenter" === m
          ? d.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL)
          : d.setGravity(ccui.ListView.GRAVITY_TOP));
    g = e(a.IsBounceEnabled, !1);
    d.setBounceEnabled(g);
    d.setItemsMargin(a.ItemMargin || 0);
    g = a.InnerNodeSize;
    null != g && d.setInnerContainerSize(cc.size(g.Widget || 0, g.Height || 0));
    h(d, a.SingleColor, a.FirstColor, a.EndColor);
    k(d, a.ColorVector);
    null != f && d.setBackGroundColorOpacity(f);
    s(d, a.Size);
    return d;
  };
  d.initTextAtlas = function (a, b) {
    var d = new ccui.TextAtlas(),
      e = a.LabelText,
      f = a.CharWidth,
      g = a.CharHeight,
      h = a.StartChar;
    p(a.LabelAtlasFileImage_CNB, b, function (a, b) {
      cc.loader.getRes(a) || cc.log("%s need to be preloaded", a);
      0 === b && d.setProperty(e, a, f, g, h);
    });
    this.widgetAttributes(d, a);
    d.ignoreContentAdaptWithSize(!0);
    return d;
  };
  d.initTextBMFont = function (a, b) {
    var d = new ccui.TextBMFont();
    this.widgetAttributes(d, a);
    p(a.LabelBMFontFile_CNB, b, function (a, b) {
      cc.loader.getRes(a) || cc.log("%s need to be pre loaded", a);
      d.setFntFile(a);
    });
    d.setString(a.LabelText);
    d.ignoreContentAdaptWithSize(!0);
    return d;
  };
  d.initTextField = function (a, b) {
    var d = new ccui.TextField();
    a.PasswordEnable &&
      (d.setPasswordEnabled(!0),
      d.setPasswordStyleText(a.PasswordStyleText || "*"));
    var e = a.PlaceHolderText;
    null != e && d.setPlaceHolder(e);
    e = a.FontSize;
    null != e && d.setFontSize(e);
    e = a.FontName;
    null != e && d.setFontName(e);
    a.MaxLengthEnable &&
      (d.setMaxLengthEnabled(!0), d.setMaxLength(a.MaxLengthText || 0));
    this.widgetAttributes(d, a);
    e = a.LabelText;
    null != e && d.setString(e);
    e = a.FontResource;
    null != e &&
      ((e = e.Path),
      null != e &&
        ((e = cc.sys.isNative
          ? cc.path.join(cc.loader.resPath, b, e)
          : (e = e.match(/([^\/]+)\.(\S+)/))
          ? e[1]
          : ""),
        d.setFontName(e)));
    d.setUnifySizeEnabled(!1);
    d.ignoreContentAdaptWithSize(!1);
    e = a.CColor;
    null != e && d.setTextColor(r(e));
    d.isIgnoreContentAdaptWithSize() ||
      (s(d, a.Size),
      cc.sys.isNative && d.getVirtualRenderer().setLineBreakWithoutSpace(!0));
    return d;
  };
  d.initSimpleAudio = function (a, b) {
    var d = new ccs.ComAudio();
    d.setLoop(a.Loop || !1);
    p(a.FileData, b, function (a, b) {
      d.setFile(a);
    });
  };
  d.initGameMap = function (a, b) {
    var e = null;
    p(a.FileData, b, function (b, f) {
      0 === f && (e = new cc.TMXTiledMap(b));
      d.generalAttributes(e, a);
    });
    return e;
  };
  d.initProjectNode = function (a, b) {
    var e = a.FileData;
    if (null != e && e.Path) {
      e = b + e.Path;
      if (cc.loader.getRes(e)) {
        e = ccs.load(e, b);
        d.generalAttributes(e.node, a);
        if (e.action && e.node) {
          e.action.tag = e.node.tag;
          var f = a.InnerActionSpeed;
          void 0 !== f && e.action.setTimeSpeed(f);
          e.node.runAction(e.action);
          e.action.gotoFrameAndPause(0);
        }
        return e.node;
      }
      cc.log("%s need to be preloaded", e);
    }
  };
  var m = function (a) {
    return a ? ((a = a.match(/([^\/]+)\.[^\/]+$/)) && a[1] ? a[1] : "") : "";
  };
  d.initArmature = function (a, b) {
    var e = new ccs.Armature(),
      f = a.IsLoop,
      g = a.IsAutoPlay,
      h = a.CurrentAnimationName;
    p(a.FileData, b, function (a, b) {
      var d,
        k,
        n = cc.loader.getRes(a);
      n
        ? ((d = n.config_file_path),
          (k = n.config_png_path),
          d.forEach(function (a, b) {
            k[b] && cc.spriteFrameCache.addSpriteFrames(a, k[b]);
          }))
        : cc.log("%s need to be preloaded", a);
      ccs.armatureDataManager.addArmatureFileInfo(a);
      e.init(m(a));
      g
        ? e.getAnimation().play(h, -1, f)
        : (e.getAnimation().play(h), e.getAnimation().gotoAndPause(0));
    });
    delete a.AnchorPoint;
    delete a.Size;
    d.generalAttributes(e, a);
    e.setColor(r(a.CColor));
    return e;
  };
  d.initBoneNode = function (a, b) {
    var e = new ccs.BoneNode(),
      f = a.Length;
    void 0 !== f && e.setDebugDrawLength(f);
    (f = a.BlendFunc) &&
      void 0 !== f.Src &&
      void 0 !== f.Dst &&
      e.setBlendFunc(new cc.BlendFunc(f.Src, f.Dst));
    d.generalAttributes(e, a);
    f = a.CColor;
    !f ||
      (void 0 === f.R && void 0 === f.G && void 0 === f.B) ||
      e.setColor(r(f));
    return e;
  };
  d.initSkeletonNode = function (a) {
    var b = new ccs.SkeletonNode();
    d.generalAttributes(b, a);
    a = a.CColor;
    !a ||
      (void 0 === a.R && void 0 === a.G && void 0 === a.B) ||
      b.setColor(r(a));
    return b;
  };
  var n = {},
    p = function (a, b, d) {
      if (null != a) {
        var e = a.Path,
          f;
        f = "Default" === a.Type || "Normal" === a.Type ? 0 : 1;
        if ((a = a.Plist))
          cc.loader.getRes(b + a)
            ? ((n[b + a] = !0), cc.spriteFrameCache.addSpriteFrames(b + a))
            : n[b + a] ||
              cc.spriteFrameCache.getSpriteFrame(e) ||
              cc.log("%s need to be preloaded", b + a);
        0 !== f
          ? cc.spriteFrameCache.getSpriteFrame(e)
            ? d(e, f)
            : cc.log("failed to get spriteFrame: %s", e)
          : d(b + e, f);
      }
    },
    r = function (a) {
      if (a)
        return cc.color(
          null != a.R ? a.R : 255,
          null != a.G ? a.G : 255,
          null != a.B ? a.B : 255,
          null != a.A ? a.A : 255
        );
    },
    s = function (a, b) {
      var d = b.X || 0,
        e = b.Y || 0;
      b && a.setContentSize(cc.size(d, e));
    };
  [
    { name: "SingleNodeObjectData", handle: d.initSingleNode },
    { name: "NodeObjectData", handle: d.initSingleNode },
    { name: "LayerObjectData", handle: d.initSingleNode },
    { name: "GameNodeObjectData", handle: d.initSingleNode },
    { name: "GameLayerObjectData", handle: d.initSingleNode },
    { name: "SpriteObjectData", handle: d.initSprite },
    { name: "ParticleObjectData", handle: d.initParticle },
    { name: "PanelObjectData", handle: d.initPanel },
    { name: "TextObjectData", handle: d.initText },
    { name: "ButtonObjectData", handle: d.initButton },
    { name: "CheckBoxObjectData", handle: d.initCheckBox },
    { name: "ScrollViewObjectData", handle: d.initScrollView },
    { name: "ImageViewObjectData", handle: d.initImageView },
    { name: "LoadingBarObjectData", handle: d.initLoadingBar },
    { name: "SliderObjectData", handle: d.initSlider },
    { name: "PageViewObjectData", handle: d.initPageView },
    { name: "ListViewObjectData", handle: d.initListView },
    { name: "TextAtlasObjectData", handle: d.initTextAtlas },
    { name: "TextBMFontObjectData", handle: d.initTextBMFont },
    { name: "TextFieldObjectData", handle: d.initTextField },
    { name: "SimpleAudioObjectData", handle: d.initSimpleAudio },
    { name: "GameMapObjectData", handle: d.initGameMap },
    { name: "ProjectNodeObjectData", handle: d.initProjectNode },
    { name: "ArmatureNodeObjectData", handle: d.initArmature },
    { name: "BoneNodeObjectData", handle: d.initBoneNode },
    { name: "SkeletonNodeObjectData", handle: d.initSkeletonNode },
  ].forEach(function (a) {
    d.registerParser(a.name, function (b, d) {
      var e = a.handle.call(this, b, d);
      this.parseChild(e, b.Children, d);
      return e;
    });
  });
  a.registerParser("timeline", "2.*", d);
  a.registerParser("timeline", "*", d);
})(ccs._load, ccs._parser);
(function () {
  ccs.uiReader = {
    _fileDesignSizes: {},
    widgetFromJsonFile: function (a) {
      var d = cc.loader.getRes(a);
      d &&
        (this._fileDesignSizes[a] = cc.size(
          d.designWidth || 0,
          d.designHeight || 0
        ));
      var d = d.Version || d.version,
        e = ccs.uiReader.getVersionInteger(d);
      return !d || 1700 <= e
        ? (cc.warn("Not supported file types, Please try use the ccs.load"),
          null)
        : ccs._load(a, "ccui");
    },
    registerTypeAndCallBack: function (a, d, e, f) {
      var g = ccs._load.getParser("ccui")["*"],
        h = f.bind(e);
      g.registerParser(a, function (f, g) {
        var n = new d(),
          p = f.options;
        e.setPropsFromJsonDictionary && e.setPropsFromJsonDictionary(n, p);
        this.generalAttributes(n, p);
        var r = p.customProperty,
          r = r ? JSON.parse(r) : {};
        h(a, n, r);
        this.colorAttributes(n, p);
        this.anchorPointAttributes(n, p);
        this.parseChild.call(this, n, f, g);
        return n;
      });
    },
    getVersionInteger: function (a) {
      if (!a || "string" !== typeof a) return 0;
      a = a.split(".");
      if (4 !== a.length) return 0;
      var d = 0;
      a.forEach(function (a, b) {
        d += a * Math.pow(10, 3 - b);
      });
      return d;
    },
    storeFileDesignSize: function (a, d) {
      this._fileDesignSizes[a] = d;
    },
    getFileDesignSize: function (a) {
      return this._fileDesignSizes[a];
    },
    getFilePath: function () {
      return this._filePath;
    },
    setFilePath: function (a) {
      this._filePath = a;
    },
    getParseObjectMap: function () {
      return ccs._load.getParser("ccui")["*"].parsers;
    },
    getParseCallBackMap: function () {
      return ccs._load.getParser("ccui")["*"].parsers;
    },
    clear: function () {},
  };
  var a = ccs._load.getParser("ccui")["*"];
  ccs.imageViewReader = { setPropsFromJsonDictionary: a.ImageViewAttributes };
  ccs.buttonReader = { setPropsFromJsonDictionary: a.ButtonAttributes };
  ccs.checkBoxReader = { setPropsFromJsonDictionary: a.CheckBoxAttributes };
  ccs.labelAtlasReader = { setPropsFromJsonDictionary: a.TextAtlasAttributes };
  ccs.labelBMFontReader = {
    setPropsFromJsonDictionary: a.TextBMFontAttributes,
  };
  ccs.labelReader = { setPropsFromJsonDictionary: a.TextAttributes };
  ccs.layoutReader = { setPropsFromJsonDictionary: a.LayoutAttributes };
  ccs.listViewReader = { setPropsFromJsonDictionary: a.ListViewAttributes };
  ccs.loadingBarReader = { setPropsFromJsonDictionary: a.LoadingBarAttributes };
  ccs.pageViewReader = { setPropsFromJsonDictionary: a.PageViewAttributes };
  ccs.scrollViewReader = { setPropsFromJsonDictionary: a.ScrollViewAttributes };
  ccs.sliderReader = { setPropsFromJsonDictionary: a.SliderAttributes };
  ccs.textFieldReader = { setPropsFromJsonDictionary: a.TextFieldAttributes };
})();
(function () {
  ccs.sceneReader = {
    _node: null,
    createNodeWithSceneFile: function (a) {
      return (this._node = a = ccs._load(a, "scene"));
    },
    getNodeByTag: function (a) {
      return null == this._node
        ? null
        : this._node.getTag() === a
        ? this._node
        : this._nodeByTag(this._node, a);
    },
    _nodeByTag: function (a, b) {
      if (null == a) return null;
      for (
        var d = null, e = a.getChildren(), f = 0;
        f < e.length &&
        (!(d = e[f]) || d.getTag() !== b) &&
        !(d = this._nodeByTag(d, b));
        f++
      );
      return d;
    },
    version: function () {
      return "*";
    },
    setTarget: function () {},
    clear: function () {
      ccs.triggerManager.removeAll();
      cc.audioEngine.end();
    },
  };
})();
var __extends =
    (this && this.__extends) ||
    function (a, b) {
      function d() {
        this.constructor = a;
      }
      for (var e in b) b.hasOwnProperty(e) && (a[e] = b[e]);
      a.prototype =
        null === b ? Object.create(b) : ((d.prototype = b.prototype), new d());
    },
  spine;
(function (a) {
  var b = (function () {
    function a(b, d, e) {
      if (null == b) throw Error("name cannot be null.");
      if (null == d) throw Error("timelines cannot be null.");
      this.name = b;
      this.timelines = d;
      this.duration = e;
    }
    a.prototype.apply = function (a, b, d, e, f, g, h, v) {
      if (null == a) throw Error("skeleton cannot be null.");
      e &&
        0 != this.duration &&
        ((d %= this.duration), 0 < b && (b %= this.duration));
      e = this.timelines;
      for (var t = 0, w = e.length; t < w; t++) e[t].apply(a, b, d, f, g, h, v);
    };
    a.binarySearch = function (a, b, d) {
      void 0 === d && (d = 1);
      var e = 0,
        f = a.length / d - 2;
      if (0 == f) return d;
      for (var g = f >>> 1; ; ) {
        a[(g + 1) * d] <= b ? (e = g + 1) : (f = g);
        if (e == f) return (e + 1) * d;
        g = (e + f) >>> 1;
      }
    };
    a.linearSearch = function (a, b, d) {
      for (var e = 0, f = a.length - d; e <= f; e += d) if (a[e] > b) return e;
      return -1;
    };
    return a;
  })();
  a.Animation = b;
  (function (a) {
    a[(a.rotate = 0)] = "rotate";
    a[(a.translate = 1)] = "translate";
    a[(a.scale = 2)] = "scale";
    a[(a.shear = 3)] = "shear";
    a[(a.attachment = 4)] = "attachment";
    a[(a.color = 5)] = "color";
    a[(a.deform = 6)] = "deform";
    a[(a.event = 7)] = "event";
    a[(a.drawOrder = 8)] = "drawOrder";
    a[(a.ikConstraint = 9)] = "ikConstraint";
    a[(a.transformConstraint = 10)] = "transformConstraint";
    a[(a.pathConstraintPosition = 11)] = "pathConstraintPosition";
    a[(a.pathConstraintSpacing = 12)] = "pathConstraintSpacing";
    a[(a.pathConstraintMix = 13)] = "pathConstraintMix";
  })(a.TimelineType || (a.TimelineType = {}));
  var d = a.TimelineType,
    e = (function () {
      function b(d) {
        if (0 >= d) throw Error("frameCount must be \x3e 0: " + d);
        this.curves = a.Utils.newFloatArray((d - 1) * b.BEZIER_SIZE);
      }
      b.prototype.getFrameCount = function () {
        return this.curves.length / b.BEZIER_SIZE + 1;
      };
      b.prototype.setLinear = function (a) {
        this.curves[a * b.BEZIER_SIZE] = b.LINEAR;
      };
      b.prototype.setStepped = function (a) {
        this.curves[a * b.BEZIER_SIZE] = b.STEPPED;
      };
      b.prototype.getCurveType = function (a) {
        a *= b.BEZIER_SIZE;
        if (a == this.curves.length) return b.LINEAR;
        a = this.curves[a];
        return a == b.LINEAR ? b.LINEAR : a == b.STEPPED ? b.STEPPED : b.BEZIER;
      };
      b.prototype.setCurve = function (a, d, e, f, g) {
        var s = 0.03 * (2 * -d + f),
          u = 0.03 * (2 * -e + g);
        f = 0.006 * (3 * (d - f) + 1);
        g = 0.006 * (3 * (e - g) + 1);
        var v = 2 * s + f,
          t = 2 * u + g;
        d = 0.3 * d + s + 0.16666667 * f;
        e = 0.3 * e + u + 0.16666667 * g;
        a *= b.BEZIER_SIZE;
        u = this.curves;
        u[a++] = b.BEZIER;
        for (var s = d, w = e, x = a + b.BEZIER_SIZE - 1; a < x; a += 2)
          (u[a] = s),
            (u[a + 1] = w),
            (d += v),
            (e += t),
            (v += f),
            (t += g),
            (s += d),
            (w += e);
      };
      b.prototype.getCurvePercent = function (d, e) {
        e = a.MathUtils.clamp(e, 0, 1);
        var f = this.curves,
          g = d * b.BEZIER_SIZE,
          r = f[g];
        if (r == b.LINEAR) return e;
        if (r == b.STEPPED) return 0;
        g++;
        for (var r = 0, s = g, u = g + b.BEZIER_SIZE - 1; g < u; g += 2)
          if (((r = f[g]), r >= e)) {
            var v = (u = void 0);
            g == s ? (v = u = 0) : ((u = f[g - 2]), (v = f[g - 1]));
            return v + ((f[g + 1] - v) * (e - u)) / (r - u);
          }
        f = f[g - 1];
        return f + ((1 - f) * (e - r)) / (1 - r);
      };
      b.LINEAR = 0;
      b.STEPPED = 1;
      b.BEZIER = 2;
      b.BEZIER_SIZE = 19;
      return b;
    })();
  a.CurveTimeline = e;
  var f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b << 1);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.rotate << 24) + this.boneIndex;
    };
    f.prototype.setFrame = function (a, b, d) {
      a <<= 1;
      this.frames[a] = b;
      this.frames[a + f.ROTATION] = d;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.bones[this.boneIndex];
      if (e < d[0]) u && (a.rotation = a.data.rotation);
      else if (e >= d[d.length - f.ENTRIES])
        u
          ? (a.rotation = a.data.rotation + d[d.length + f.PREV_ROTATION] * h)
          : ((u = a.data.rotation + d[d.length + f.PREV_ROTATION] - a.rotation),
            (a.rotation +=
              (u - 360 * (16384 - ((16384.499999999996 - u / 360) | 0))) * h));
      else {
        v = b.binarySearch(d, e, f.ENTRIES);
        g = d[v + f.PREV_ROTATION];
        var t = d[v];
        e = this.getCurvePercent(
          (v >> 1) - 1,
          1 - (e - t) / (d[v + f.PREV_TIME] - t)
        );
        d = d[v + f.ROTATION] - g;
        d = g + (d - 360 * (16384 - ((16384.499999999996 - d / 360) | 0))) * e;
        u
          ? ((d -= 360 * (16384 - ((16384.499999999996 - d / 360) | 0))),
            (a.rotation = a.data.rotation + d * h))
          : ((d = a.data.rotation + d - a.rotation),
            (d -= 360 * (16384 - ((16384.499999999996 - d / 360) | 0))),
            (a.rotation += d * h));
      }
    };
    f.ENTRIES = 2;
    f.PREV_TIME = -2;
    f.PREV_ROTATION = -1;
    f.ROTATION = 1;
    return f;
  })(e);
  a.RotateTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.translate << 24) + this.boneIndex;
    };
    f.prototype.setFrame = function (a, b, d, e) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.X] = d;
      this.frames[a + f.Y] = e;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.bones[this.boneIndex];
      if (e < d[0]) u && ((a.x = a.data.x), (a.y = a.data.y));
      else {
        v = g = 0;
        if (e >= d[d.length - f.ENTRIES])
          (g = d[d.length + f.PREV_X]), (v = d[d.length + f.PREV_Y]);
        else {
          var t = b.binarySearch(d, e, f.ENTRIES);
          g = d[t + f.PREV_X];
          v = d[t + f.PREV_Y];
          var w = d[t];
          e = this.getCurvePercent(
            t / f.ENTRIES - 1,
            1 - (e - w) / (d[t + f.PREV_TIME] - w)
          );
          g += (d[t + f.X] - g) * e;
          v += (d[t + f.Y] - v) * e;
        }
        u
          ? ((a.x = a.data.x + g * h), (a.y = a.data.y + v * h))
          : ((a.x += (a.data.x + g - a.x) * h),
            (a.y += (a.data.y + v - a.y) * h));
      }
    };
    f.ENTRIES = 3;
    f.PREV_TIME = -3;
    f.PREV_X = -2;
    f.PREV_Y = -1;
    f.X = 1;
    f.Y = 2;
    return f;
  })(e);
  a.TranslateTimeline = f;
  var g = (function (e) {
    function f(a) {
      e.call(this, a);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.scale << 24) + this.boneIndex;
    };
    f.prototype.apply = function (d, e, g, h, s, u, v) {
      var t = this.frames;
      d = d.bones[this.boneIndex];
      if (g < t[0])
        u && ((d.scaleX = d.data.scaleX), (d.scaleY = d.data.scaleY));
      else {
        h = e = 0;
        if (g >= t[t.length - f.ENTRIES])
          (e = t[t.length + f.PREV_X] * d.data.scaleX),
            (h = t[t.length + f.PREV_Y] * d.data.scaleY);
        else {
          var w = b.binarySearch(t, g, f.ENTRIES);
          e = t[w + f.PREV_X];
          h = t[w + f.PREV_Y];
          var x = t[w];
          g = this.getCurvePercent(
            w / f.ENTRIES - 1,
            1 - (g - x) / (t[w + f.PREV_TIME] - x)
          );
          e = (e + (t[w + f.X] - e) * g) * d.data.scaleX;
          h = (h + (t[w + f.Y] - h) * g) * d.data.scaleY;
        }
        1 == s
          ? ((d.scaleX = e), (d.scaleY = h))
          : ((t = g = 0),
            u
              ? ((g = d.data.scaleX), (t = d.data.scaleY))
              : ((g = d.scaleX), (t = d.scaleY)),
            v
              ? ((e = Math.abs(e) * a.MathUtils.signum(g)),
                (h = Math.abs(h) * a.MathUtils.signum(t)))
              : ((g = Math.abs(g) * a.MathUtils.signum(e)),
                (t = Math.abs(t) * a.MathUtils.signum(h))),
            (d.scaleX = g + (e - g) * s),
            (d.scaleY = t + (h - t) * s));
      }
    };
    return f;
  })(f);
  a.ScaleTimeline = g;
  f = (function (a) {
    function e(b) {
      a.call(this, b);
    }
    __extends(e, a);
    e.prototype.getPropertyId = function () {
      return (d.shear << 24) + this.boneIndex;
    };
    e.prototype.apply = function (a, d, f, g, h, u, v) {
      d = this.frames;
      a = a.bones[this.boneIndex];
      if (f < d[0])
        u && ((a.shearX = a.data.shearX), (a.shearY = a.data.shearY));
      else {
        v = g = 0;
        if (f >= d[d.length - e.ENTRIES])
          (g = d[d.length + e.PREV_X]), (v = d[d.length + e.PREV_Y]);
        else {
          var t = b.binarySearch(d, f, e.ENTRIES);
          g = d[t + e.PREV_X];
          v = d[t + e.PREV_Y];
          var w = d[t];
          f = this.getCurvePercent(
            t / e.ENTRIES - 1,
            1 - (f - w) / (d[t + e.PREV_TIME] - w)
          );
          g += (d[t + e.X] - g) * f;
          v += (d[t + e.Y] - v) * f;
        }
        u
          ? ((a.shearX = a.data.shearX + g * h),
            (a.shearY = a.data.shearY + v * h))
          : ((a.shearX += (a.data.shearX + g - a.shearX) * h),
            (a.shearY += (a.data.shearY + v - a.shearY) * h));
      }
    };
    return e;
  })(f);
  a.ShearTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.color << 24) + this.slotIndex;
    };
    f.prototype.setFrame = function (a, b, d, e, g, h) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.R] = d;
      this.frames[a + f.G] = e;
      this.frames[a + f.B] = g;
      this.frames[a + f.A] = h;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      a = a.slots[this.slotIndex];
      var t = this.frames;
      if (e < t[0]) u && a.color.setFromColor(a.data.color);
      else {
        var w = (v = g = d = 0);
        if (e >= t[t.length - f.ENTRIES])
          (e = t.length),
            (d = t[e + f.PREV_R]),
            (g = t[e + f.PREV_G]),
            (v = t[e + f.PREV_B]),
            (w = t[e + f.PREV_A]);
        else {
          var x = b.binarySearch(t, e, f.ENTRIES);
          d = t[x + f.PREV_R];
          g = t[x + f.PREV_G];
          v = t[x + f.PREV_B];
          var w = t[x + f.PREV_A],
            y = t[x];
          e = this.getCurvePercent(
            x / f.ENTRIES - 1,
            1 - (e - y) / (t[x + f.PREV_TIME] - y)
          );
          d += (t[x + f.R] - d) * e;
          g += (t[x + f.G] - g) * e;
          v += (t[x + f.B] - v) * e;
          w += (t[x + f.A] - w) * e;
        }
        1 == h
          ? a.color.set(d, g, v, w)
          : ((e = a.color),
            u && e.setFromColor(a.data.color),
            e.add((d - e.r) * h, (g - e.g) * h, (v - e.b) * h, (w - e.a) * h));
      }
    };
    f.ENTRIES = 5;
    f.PREV_TIME = -5;
    f.PREV_R = -4;
    f.PREV_G = -3;
    f.PREV_B = -2;
    f.PREV_A = -1;
    f.R = 1;
    f.G = 2;
    f.B = 3;
    f.A = 4;
    return f;
  })(e);
  a.ColorTimeline = f;
  f = (function () {
    function e(b) {
      this.frames = a.Utils.newFloatArray(b);
      this.attachmentNames = Array(b);
    }
    e.prototype.getPropertyId = function () {
      return (d.attachment << 24) + this.slotIndex;
    };
    e.prototype.getFrameCount = function () {
      return this.frames.length;
    };
    e.prototype.setFrame = function (a, b, d) {
      this.frames[a] = b;
      this.attachmentNames[a] = d;
    };
    e.prototype.apply = function (a, d, e, f, g, h, u) {
      d = a.slots[this.slotIndex];
      u && h
        ? ((e = d.data.attachmentName),
          d.setAttachment(
            null == e ? null : a.getAttachment(this.slotIndex, e)
          ))
        : ((u = this.frames),
          e < u[0]
            ? h &&
              ((e = d.data.attachmentName),
              d.setAttachment(
                null == e ? null : a.getAttachment(this.slotIndex, e)
              ))
            : ((h = 0),
              (h =
                e >= u[u.length - 1]
                  ? u.length - 1
                  : b.binarySearch(u, e, 1) - 1),
              (e = this.attachmentNames[h]),
              a.slots[this.slotIndex].setAttachment(
                null == e ? null : a.getAttachment(this.slotIndex, e)
              )));
    };
    return e;
  })();
  a.AttachmentTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b);
      this.frameVertices = Array(b);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.deform << 24) + this.slotIndex;
    };
    f.prototype.setFrame = function (a, b, d) {
      this.frames[a] = b;
      this.frameVertices[a] = d;
    };
    f.prototype.apply = function (d, e, f, g, h, k, v) {
      d = d.slots[this.slotIndex];
      var t = d.getAttachment();
      if (t instanceof a.VertexAttachment && t.applyDeform(this.attachment)) {
        var w = this.frames;
        e = d.attachmentVertices;
        if (f < w[0]) k && a.Utils.setArraySize(e, 0);
        else if (
          ((v = this.frameVertices),
          (d = v[0].length),
          e.length != d && (h = 1),
          (e = a.Utils.setArraySize(e, d)),
          f >= w[w.length - 1])
        )
          if (((f = v[w.length - 1]), 1 == h)) a.Utils.arrayCopy(f, 0, e, 0, d);
          else if (k)
            if (((k = t), null == k.bones))
              for (k = k.vertices, t = 0; t < d; t++)
                (w = k[t]), (e[t] = w + (f[t] - w) * h);
            else for (t = 0; t < d; t++) e[t] = f[t] * h;
          else for (t = 0; t < d; t++) e[t] += (f[t] - e[t]) * h;
        else {
          var x = b.binarySearch(w, f);
          g = v[x - 1];
          v = v[x];
          var y = w[x];
          f = this.getCurvePercent(x - 1, 1 - (f - y) / (w[x - 1] - y));
          if (1 == h)
            for (t = 0; t < d; t++) (x = g[t]), (e[t] = x + (v[t] - x) * f);
          else if (k)
            if (((k = t), null == k.bones))
              for (k = k.vertices, t = 0; t < d; t++)
                (x = g[t]),
                  (w = k[t]),
                  (e[t] = w + (x + (v[t] - x) * f - w) * h);
            else
              for (t = 0; t < d; t++)
                (x = g[t]), (e[t] = (x + (v[t] - x) * f) * h);
          else
            for (t = 0; t < d; t++)
              (x = g[t]), (e[t] += (x + (v[t] - x) * f - e[t]) * h);
        }
      }
    };
    return f;
  })(e);
  a.DeformTimeline = f;
  f = (function () {
    function e(b) {
      this.frames = a.Utils.newFloatArray(b);
      this.events = Array(b);
    }
    e.prototype.getPropertyId = function () {
      return d.event << 24;
    };
    e.prototype.getFrameCount = function () {
      return this.frames.length;
    };
    e.prototype.setFrame = function (a, b) {
      this.frames[a] = b.time;
      this.events[a] = b;
    };
    e.prototype.apply = function (a, d, e, f, g, h, u) {
      if (null != f) {
        var v = this.frames,
          t = this.frames.length;
        if (d > e) this.apply(a, d, Number.MAX_VALUE, f, g, h, u), (d = -1);
        else if (d >= v[t - 1]) return;
        if (!(e < v[0])) {
          a = 0;
          if (d < v[0]) a = 0;
          else
            for (a = b.binarySearch(v, d), d = v[a]; 0 < a && v[a - 1] == d; )
              a--;
          for (; a < t && e >= v[a]; a++) f.push(this.events[a]);
        }
      }
    };
    return e;
  })();
  a.EventTimeline = f;
  f = (function () {
    function e(b) {
      this.frames = a.Utils.newFloatArray(b);
      this.drawOrders = Array(b);
    }
    e.prototype.getPropertyId = function () {
      return d.drawOrder << 24;
    };
    e.prototype.getFrameCount = function () {
      return this.frames.length;
    };
    e.prototype.setFrame = function (a, b, d) {
      this.frames[a] = b;
      this.drawOrders[a] = d;
    };
    e.prototype.apply = function (d, e, f, g, h, s, u) {
      e = d.drawOrder;
      g = d.slots;
      if (u && s) a.Utils.arrayCopy(d.slots, 0, d.drawOrder, 0, d.slots.length);
      else if (((u = this.frames), f < u[0]))
        s && a.Utils.arrayCopy(d.slots, 0, d.drawOrder, 0, d.slots.length);
      else if (
        ((d = 0),
        (d = f >= u[u.length - 1] ? u.length - 1 : b.binarySearch(u, f) - 1),
        (f = this.drawOrders[d]),
        null == f)
      )
        a.Utils.arrayCopy(g, 0, e, 0, g.length);
      else for (d = 0, s = f.length; d < s; d++) e[d] = g[f[d]];
    };
    return e;
  })();
  a.DrawOrderTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.ikConstraint << 24) + this.ikConstraintIndex;
    };
    f.prototype.setFrame = function (a, b, d, e) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.MIX] = d;
      this.frames[a + f.BEND_DIRECTION] = e;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.ikConstraints[this.ikConstraintIndex];
      if (e < d[0])
        u && ((a.mix = a.data.mix), (a.bendDirection = a.data.bendDirection));
      else if (e >= d[d.length - f.ENTRIES])
        u
          ? ((a.mix = a.data.mix + (d[d.length + f.PREV_MIX] - a.data.mix) * h),
            (a.bendDirection = v
              ? a.data.bendDirection
              : d[d.length + f.PREV_BEND_DIRECTION]))
          : ((a.mix += (d[d.length + f.PREV_MIX] - a.mix) * h),
            v || (a.bendDirection = d[d.length + f.PREV_BEND_DIRECTION]));
      else {
        g = b.binarySearch(d, e, f.ENTRIES);
        var t = d[g + f.PREV_MIX],
          w = d[g];
        e = this.getCurvePercent(
          g / f.ENTRIES - 1,
          1 - (e - w) / (d[g + f.PREV_TIME] - w)
        );
        u
          ? ((a.mix =
              a.data.mix + (t + (d[g + f.MIX] - t) * e - a.data.mix) * h),
            (a.bendDirection = v
              ? a.data.bendDirection
              : d[g + f.PREV_BEND_DIRECTION]))
          : ((a.mix += (t + (d[g + f.MIX] - t) * e - a.mix) * h),
            v || (a.bendDirection = d[g + f.PREV_BEND_DIRECTION]));
      }
    };
    f.ENTRIES = 3;
    f.PREV_TIME = -3;
    f.PREV_MIX = -2;
    f.PREV_BEND_DIRECTION = -1;
    f.MIX = 1;
    f.BEND_DIRECTION = 2;
    return f;
  })(e);
  a.IkConstraintTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.transformConstraint << 24) + this.transformConstraintIndex;
    };
    f.prototype.setFrame = function (a, b, d, e, g, h) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.ROTATE] = d;
      this.frames[a + f.TRANSLATE] = e;
      this.frames[a + f.SCALE] = g;
      this.frames[a + f.SHEAR] = h;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.transformConstraints[this.transformConstraintIndex];
      if (e < d[0])
        u &&
          ((u = a.data),
          (a.rotateMix = u.rotateMix),
          (a.translateMix = u.rotateMix),
          (a.scaleMix = u.scaleMix),
          (a.shearMix = u.shearMix));
      else {
        var t = (v = g = 0),
          w = 0;
        if (e >= d[d.length - f.ENTRIES])
          (e = d.length),
            (g = d[e + f.PREV_ROTATE]),
            (v = d[e + f.PREV_TRANSLATE]),
            (t = d[e + f.PREV_SCALE]),
            (w = d[e + f.PREV_SHEAR]);
        else {
          var x = b.binarySearch(d, e, f.ENTRIES);
          g = d[x + f.PREV_ROTATE];
          v = d[x + f.PREV_TRANSLATE];
          var t = d[x + f.PREV_SCALE],
            w = d[x + f.PREV_SHEAR],
            y = d[x];
          e = this.getCurvePercent(
            x / f.ENTRIES - 1,
            1 - (e - y) / (d[x + f.PREV_TIME] - y)
          );
          g += (d[x + f.ROTATE] - g) * e;
          v += (d[x + f.TRANSLATE] - v) * e;
          t += (d[x + f.SCALE] - t) * e;
          w += (d[x + f.SHEAR] - w) * e;
        }
        u
          ? ((u = a.data),
            (a.rotateMix = u.rotateMix + (g - u.rotateMix) * h),
            (a.translateMix = u.translateMix + (v - u.translateMix) * h),
            (a.scaleMix = u.scaleMix + (t - u.scaleMix) * h),
            (a.shearMix = u.shearMix + (w - u.shearMix) * h))
          : ((a.rotateMix += (g - a.rotateMix) * h),
            (a.translateMix += (v - a.translateMix) * h),
            (a.scaleMix += (t - a.scaleMix) * h),
            (a.shearMix += (w - a.shearMix) * h));
      }
    };
    f.ENTRIES = 5;
    f.PREV_TIME = -5;
    f.PREV_ROTATE = -4;
    f.PREV_TRANSLATE = -3;
    f.PREV_SCALE = -2;
    f.PREV_SHEAR = -1;
    f.ROTATE = 1;
    f.TRANSLATE = 2;
    f.SCALE = 3;
    f.SHEAR = 4;
    return f;
  })(e);
  a.TransformConstraintTimeline = f;
  f = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.pathConstraintPosition << 24) + this.pathConstraintIndex;
    };
    f.prototype.setFrame = function (a, b, d) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.VALUE] = d;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.pathConstraints[this.pathConstraintIndex];
      if (e < d[0]) u && (a.position = a.data.position);
      else {
        g = 0;
        if (e >= d[d.length - f.ENTRIES]) g = d[d.length + f.PREV_VALUE];
        else {
          v = b.binarySearch(d, e, f.ENTRIES);
          g = d[v + f.PREV_VALUE];
          var t = d[v];
          e = this.getCurvePercent(
            v / f.ENTRIES - 1,
            1 - (e - t) / (d[v + f.PREV_TIME] - t)
          );
          g += (d[v + f.VALUE] - g) * e;
        }
        a.position = u
          ? a.data.position + (g - a.data.position) * h
          : a.position + (g - a.position) * h;
      }
    };
    f.ENTRIES = 2;
    f.PREV_TIME = -2;
    f.PREV_VALUE = -1;
    f.VALUE = 1;
    return f;
  })(e);
  a.PathConstraintPositionTimeline = f;
  f = (function (a) {
    function e(b) {
      a.call(this, b);
    }
    __extends(e, a);
    e.prototype.getPropertyId = function () {
      return (d.pathConstraintSpacing << 24) + this.pathConstraintIndex;
    };
    e.prototype.apply = function (a, d, f, g, h, u, v) {
      d = this.frames;
      a = a.pathConstraints[this.pathConstraintIndex];
      if (f < d[0]) u && (a.spacing = a.data.spacing);
      else {
        g = 0;
        if (f >= d[d.length - e.ENTRIES]) g = d[d.length + e.PREV_VALUE];
        else {
          v = b.binarySearch(d, f, e.ENTRIES);
          g = d[v + e.PREV_VALUE];
          var t = d[v];
          f = this.getCurvePercent(
            v / e.ENTRIES - 1,
            1 - (f - t) / (d[v + e.PREV_TIME] - t)
          );
          g += (d[v + e.VALUE] - g) * f;
        }
        a.spacing = u
          ? a.data.spacing + (g - a.data.spacing) * h
          : a.spacing + (g - a.spacing) * h;
      }
    };
    return e;
  })(f);
  a.PathConstraintSpacingTimeline = f;
  e = (function (e) {
    function f(b) {
      e.call(this, b);
      this.frames = a.Utils.newFloatArray(b * f.ENTRIES);
    }
    __extends(f, e);
    f.prototype.getPropertyId = function () {
      return (d.pathConstraintMix << 24) + this.pathConstraintIndex;
    };
    f.prototype.setFrame = function (a, b, d, e) {
      a *= f.ENTRIES;
      this.frames[a] = b;
      this.frames[a + f.ROTATE] = d;
      this.frames[a + f.TRANSLATE] = e;
    };
    f.prototype.apply = function (a, d, e, g, h, u, v) {
      d = this.frames;
      a = a.pathConstraints[this.pathConstraintIndex];
      if (e < d[0])
        u &&
          ((a.rotateMix = a.data.rotateMix),
          (a.translateMix = a.data.translateMix));
      else {
        v = g = 0;
        if (e >= d[d.length - f.ENTRIES])
          (g = d[d.length + f.PREV_ROTATE]),
            (v = d[d.length + f.PREV_TRANSLATE]);
        else {
          var t = b.binarySearch(d, e, f.ENTRIES);
          g = d[t + f.PREV_ROTATE];
          v = d[t + f.PREV_TRANSLATE];
          var w = d[t];
          e = this.getCurvePercent(
            t / f.ENTRIES - 1,
            1 - (e - w) / (d[t + f.PREV_TIME] - w)
          );
          g += (d[t + f.ROTATE] - g) * e;
          v += (d[t + f.TRANSLATE] - v) * e;
        }
        u
          ? ((a.rotateMix = a.data.rotateMix + (g - a.data.rotateMix) * h),
            (a.translateMix =
              a.data.translateMix + (v - a.data.translateMix) * h))
          : ((a.rotateMix += (g - a.rotateMix) * h),
            (a.translateMix += (v - a.translateMix) * h));
      }
    };
    f.ENTRIES = 3;
    f.PREV_TIME = -3;
    f.PREV_ROTATE = -2;
    f.PREV_TRANSLATE = -1;
    f.ROTATE = 1;
    f.TRANSLATE = 2;
    return f;
  })(e);
  a.PathConstraintMixTimeline = e;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(f) {
      this.tracks = [];
      this.events = [];
      this.listeners = [];
      this.queue = new e(this);
      this.propertyIDs = new a.IntSet();
      this.animationsChanged = !1;
      this.timeScale = 1;
      this.trackEntryPool = new a.Pool(function () {
        return new d();
      });
      this.data = f;
    }
    b.prototype.update = function (a) {
      a *= this.timeScale;
      for (var b = this.tracks, d = 0, e = b.length; d < e; d++) {
        var f = b[d];
        if (null != f) {
          f.animationLast = f.nextAnimationLast;
          f.trackLast = f.nextTrackLast;
          var g = a * f.timeScale;
          if (0 < f.delay) {
            f.delay -= g;
            if (0 < f.delay) continue;
            g = -f.delay;
            f.delay = 0;
          }
          var s = f.next;
          if (null != s) {
            var u = f.trackLast - s.delay;
            if (0 <= u) {
              s.delay = 0;
              s.trackTime = u + a * s.timeScale;
              f.trackTime += g;
              for (this.setCurrent(d, s, !0); null != s.mixingFrom; )
                (s.mixTime += g), (s = s.mixingFrom);
              continue;
            }
          } else if (f.trackLast >= f.trackEnd && null == f.mixingFrom) {
            b[d] = null;
            this.queue.end(f);
            this.disposeNext(f);
            continue;
          }
          this.updateMixingFrom(f, a);
          f.trackTime += g;
        }
      }
      this.queue.drain();
    };
    b.prototype.updateMixingFrom = function (a, b) {
      var d = a.mixingFrom;
      null != d &&
        (this.updateMixingFrom(d, b),
        a.mixTime >= a.mixDuration && null != d.mixingFrom && 0 < a.mixTime
          ? ((a.mixingFrom = null), this.queue.end(d))
          : ((d.animationLast = d.nextAnimationLast),
            (d.trackLast = d.nextTrackLast),
            (d.trackTime += b * d.timeScale),
            (a.mixTime += b * d.timeScale)));
    };
    b.prototype.apply = function (b) {
      if (null == b) throw Error("skeleton cannot be null.");
      this.animationsChanged && this._animationsChanged();
      for (
        var d = this.events, e = this.tracks, f = 0, g = e.length;
        f < g;
        f++
      ) {
        var r = e[f];
        if (!(null == r || 0 < r.delay)) {
          var s = r.alpha;
          null != r.mixingFrom
            ? (s *= this.applyMixingFrom(r, b))
            : r.trackTime >= r.trackEnd && (s = 0);
          var u = r.animationLast,
            v = r.getAnimationTime(),
            t = r.animation.timelines.length,
            w = r.animation.timelines;
          if (1 == s)
            for (var x = 0; x < t; x++) w[x].apply(b, u, v, d, 1, !0, !1);
          else {
            var y = 0 == r.timelinesRotation.length;
            y && a.Utils.setArraySize(r.timelinesRotation, t << 1, null);
            for (
              var B = r.timelinesRotation, A = r.timelinesFirst, x = 0;
              x < t;
              x++
            ) {
              var z = w[x];
              z instanceof a.RotateTimeline
                ? this.applyRotateTimeline(z, b, v, s, A[x], B, x << 1, y)
                : z.apply(b, u, v, d, s, A[x], !1);
            }
          }
          this.queueEvents(r, v);
          d.length = 0;
          r.nextAnimationLast = v;
          r.nextTrackLast = r.trackTime;
        }
      }
      this.queue.drain();
    };
    b.prototype.applyMixingFrom = function (b, d) {
      var e = b.mixingFrom;
      null != e.mixingFrom && this.applyMixingFrom(e, d);
      var f = 0;
      0 == b.mixDuration
        ? (f = 1)
        : ((f = b.mixTime / b.mixDuration), 1 < f && (f = 1));
      var g = f < e.eventThreshold ? this.events : null,
        r = f < e.attachmentThreshold,
        s = f < e.drawOrderThreshold,
        u = e.animationLast,
        v = e.getAnimationTime(),
        t = e.animation.timelines.length,
        w = e.animation.timelines,
        x = e.timelinesFirst,
        y = e.alpha * b.mixAlpha * (1 - f),
        B = 0 == e.timelinesRotation.length;
      B && a.Utils.setArraySize(e.timelinesRotation, t << 1, null);
      for (var A = e.timelinesRotation, z = 0; z < t; z++) {
        var C = w[z],
          D = x[z];
        if (C instanceof a.RotateTimeline)
          this.applyRotateTimeline(C, d, v, y, D, A, z << 1, B);
        else {
          if (!D) {
            if (!r && C instanceof a.AttachmentTimeline) continue;
            if (!s && C instanceof a.DrawOrderTimeline) continue;
          }
          C.apply(d, u, v, g, y, D, !0);
        }
      }
      0 < b.mixDuration && this.queueEvents(e, v);
      this.events.length = 0;
      e.nextAnimationLast = v;
      e.nextTrackLast = e.trackTime;
      return f;
    };
    b.prototype.applyRotateTimeline = function (b, d, e, f, g, r, s, u) {
      u && (r[s] = 0);
      if (1 == f) b.apply(d, 0, e, null, 1, g, !1);
      else {
        var v = b.frames;
        d = d.bones[b.boneIndex];
        if (e < v[0]) g && (d.rotation = d.data.rotation);
        else {
          var t = 0;
          if (e >= v[v.length - a.RotateTimeline.ENTRIES])
            t = d.data.rotation + v[v.length + a.RotateTimeline.PREV_ROTATION];
          else {
            var t = a.Animation.binarySearch(v, e, a.RotateTimeline.ENTRIES),
              w = v[t + a.RotateTimeline.PREV_ROTATION],
              x = v[t];
            b = b.getCurvePercent(
              (t >> 1) - 1,
              1 - (e - x) / (v[t + a.RotateTimeline.PREV_TIME] - x)
            );
            t = v[t + a.RotateTimeline.ROTATION] - w;
            t =
              w +
              (t - 360 * (16384 - ((16384.499999999996 - t / 360) | 0))) * b +
              d.data.rotation;
            t -= 360 * (16384 - ((16384.499999999996 - t / 360) | 0));
          }
          g = g ? d.data.rotation : d.rotation;
          v = 0;
          b = t - g;
          0 == b
            ? (v = r[s])
            : ((b -= 360 * (16384 - ((16384.499999999996 - b / 360) | 0))),
              (v = e = 0),
              u ? ((e = 0), (v = b)) : ((e = r[s]), (v = r[s + 1])),
              (u = 0 < b),
              (t = 0 <= e),
              a.MathUtils.signum(v) != a.MathUtils.signum(b) &&
                90 >= Math.abs(v) &&
                (180 < Math.abs(e) && (e += 360 * a.MathUtils.signum(e)),
                (t = u)),
              (v = b + e - (e % 360)),
              t != u && (v += 360 * a.MathUtils.signum(e)),
              (r[s] = v));
          r[s + 1] = b;
          g += v * f;
          d.rotation = g - 360 * (16384 - ((16384.499999999996 - g / 360) | 0));
        }
      }
    };
    b.prototype.queueEvents = function (a, b) {
      for (
        var d = a.animationStart,
          e = a.animationEnd,
          f = e - d,
          g = a.trackLast % f,
          s = this.events,
          u = 0,
          v = s.length;
        u < v;
        u++
      ) {
        var t = s[u];
        if (t.time < g) break;
        t.time > e || this.queue.event(a, t);
      }
      for (
        (a.loop ? g > a.trackTime % f : b >= e && a.animationLast < e) &&
        this.queue.complete(a);
        u < v;
        u++
      )
        s[u].time < d || this.queue.event(a, s[u]);
    };
    b.prototype.clearTracks = function () {
      this.queue.drainDisabled = !0;
      for (var a = 0, b = this.tracks.length; a < b; a++) this.clearTrack(a);
      this.tracks.length = 0;
      this.queue.drainDisabled = !1;
      this.queue.drain();
    };
    b.prototype.clearTrack = function (a) {
      if (!(a >= this.tracks.length) && ((a = this.tracks[a]), null != a)) {
        this.queue.end(a);
        this.disposeNext(a);
        for (var b = a; ; ) {
          var d = b.mixingFrom;
          if (null == d) break;
          this.queue.end(d);
          b.mixingFrom = null;
          b = d;
        }
        this.tracks[a.trackIndex] = null;
        this.queue.drain();
      }
    };
    b.prototype.setCurrent = function (a, b, d) {
      var e = this.expandToIndex(a);
      this.tracks[a] = b;
      null != e &&
        (d && this.queue.interrupt(e),
        (b.mixingFrom = e),
        (b.mixTime = 0),
        (e.timelinesRotation.length = 0),
        null != e.mixingFrom &&
          0 < e.mixDuration &&
          (b.mixAlpha *= Math.min(e.mixTime / e.mixDuration, 1)));
      this.queue.start(b);
    };
    b.prototype.setAnimation = function (a, b, d) {
      var e = this.data.skeletonData.findAnimation(b);
      if (null == e) throw Error("Animation not found: " + b);
      return this.setAnimationWith(a, e, d);
    };
    b.prototype.setAnimationWith = function (a, b, d) {
      if (null == b) throw Error("animation cannot be null.");
      var e = !0,
        f = this.expandToIndex(a);
      null != f &&
        (-1 == f.nextTrackLast
          ? ((this.tracks[a] = f.mixingFrom),
            this.queue.interrupt(f),
            this.queue.end(f),
            this.disposeNext(f),
            (f = f.mixingFrom),
            (e = !1))
          : this.disposeNext(f));
      b = this.trackEntry(a, b, d, f);
      this.setCurrent(a, b, e);
      this.queue.drain();
      return b;
    };
    b.prototype.addAnimation = function (a, b, d, e) {
      var f = this.data.skeletonData.findAnimation(b);
      if (null == f) throw Error("Animation not found: " + b);
      return this.addAnimationWith(a, f, d, e);
    };
    b.prototype.addAnimationWith = function (a, b, d, e) {
      if (null == b) throw Error("animation cannot be null.");
      var f = this.expandToIndex(a);
      if (null != f) for (; null != f.next; ) f = f.next;
      d = this.trackEntry(a, b, d, f);
      null == f
        ? (this.setCurrent(a, d, !0), this.queue.drain())
        : ((f.next = d),
          0 >= e &&
            ((a = f.animationEnd - f.animationStart),
            (e =
              0 != a
                ? e +
                  (a * (1 + ((f.trackTime / a) | 0)) -
                    this.data.getMix(f.animation, b))
                : 0)));
      d.delay = e;
      return d;
    };
    b.prototype.setEmptyAnimation = function (a, d) {
      var e = this.setAnimationWith(a, b.emptyAnimation, !1);
      e.mixDuration = d;
      e.trackEnd = d;
      return e;
    };
    b.prototype.addEmptyAnimation = function (a, d, e) {
      0 >= e && (e -= d);
      a = this.addAnimationWith(a, b.emptyAnimation, !1, e);
      a.mixDuration = d;
      a.trackEnd = d;
      return a;
    };
    b.prototype.setEmptyAnimations = function (a) {
      this.queue.drainDisabled = !0;
      for (var b = 0, d = this.tracks.length; b < d; b++) {
        var e = this.tracks[b];
        null != e && this.setEmptyAnimation(e.trackIndex, a);
      }
      this.queue.drainDisabled = !1;
      this.queue.drain();
    };
    b.prototype.expandToIndex = function (b) {
      if (b < this.tracks.length) return this.tracks[b];
      a.Utils.ensureArrayCapacity(
        this.tracks,
        b - this.tracks.length + 1,
        null
      );
      this.tracks.length = b + 1;
      return null;
    };
    b.prototype.trackEntry = function (a, b, d, e) {
      var f = this.trackEntryPool.obtain();
      f.trackIndex = a;
      f.animation = b;
      f.loop = d;
      f.eventThreshold = 0;
      f.attachmentThreshold = 0;
      f.drawOrderThreshold = 0;
      f.animationStart = 0;
      f.animationEnd = b.duration;
      f.animationLast = -1;
      f.nextAnimationLast = -1;
      f.delay = 0;
      f.trackTime = 0;
      f.trackLast = -1;
      f.nextTrackLast = -1;
      f.trackEnd = Number.MAX_VALUE;
      f.timeScale = 1;
      f.alpha = 1;
      f.mixAlpha = 1;
      f.mixTime = 0;
      f.mixDuration = null == e ? 0 : this.data.getMix(e.animation, b);
      return f;
    };
    b.prototype.disposeNext = function (a) {
      for (var b = a.next; null != b; ) this.queue.dispose(b), (b = b.next);
      a.next = null;
    };
    b.prototype._animationsChanged = function () {
      this.animationsChanged = !1;
      var a = 0,
        b = this.tracks.length;
      for (this.propertyIDs.clear(); a < b; a++) {
        var d = this.tracks[a];
        if (null != d) {
          this.setTimelinesFirst(d);
          a++;
          break;
        }
      }
      for (; a < b; a++)
        (d = this.tracks[a]), null != d && this.checkTimelinesFirst(d);
    };
    b.prototype.setTimelinesFirst = function (b) {
      if (null != b.mixingFrom)
        this.setTimelinesFirst(b.mixingFrom),
          this.checkTimelinesUsage(b, b.timelinesFirst);
      else {
        var d = this.propertyIDs,
          e = b.animation.timelines,
          f = e.length;
        b = a.Utils.setArraySize(b.timelinesFirst, f, !1);
        for (var g = 0; g < f; g++) d.add(e[g].getPropertyId()), (b[g] = !0);
      }
    };
    b.prototype.checkTimelinesFirst = function (a) {
      null != a.mixingFrom && this.checkTimelinesFirst(a.mixingFrom);
      this.checkTimelinesUsage(a, a.timelinesFirst);
    };
    b.prototype.checkTimelinesUsage = function (b, d) {
      for (
        var e = this.propertyIDs,
          f = b.animation.timelines,
          g = f.length,
          r = a.Utils.setArraySize(d, g),
          s = 0;
        s < g;
        s++
      )
        r[s] = e.add(f[s].getPropertyId());
    };
    b.prototype.getCurrent = function (a) {
      return a >= this.tracks.length ? null : this.tracks[a];
    };
    b.prototype.addListener = function (a) {
      if (null == a) throw Error("listener cannot be null.");
      this.listeners.push(a);
    };
    b.prototype.removeListener = function (a) {
      a = this.listeners.indexOf(a);
      0 <= a && this.listeners.splice(a, 1);
    };
    b.prototype.clearListeners = function () {
      this.listeners.length = 0;
    };
    b.prototype.clearListenerNotifications = function () {
      this.queue.clear();
    };
    b.emptyAnimation = new a.Animation("\x3cempty\x3e", [], 0);
    return b;
  })();
  a.AnimationState = b;
  var d = (function () {
    function a() {
      this.timelinesFirst = [];
      this.timelinesRotation = [];
    }
    a.prototype.reset = function () {
      this.listener = this.animation = this.mixingFrom = this.next = null;
      this.timelinesFirst.length = 0;
      this.timelinesRotation.length = 0;
    };
    a.prototype.getAnimationTime = function () {
      if (this.loop) {
        var a = this.animationEnd - this.animationStart;
        return 0 == a
          ? this.animationStart
          : (this.trackTime % a) + this.animationStart;
      }
      return Math.min(this.trackTime + this.animationStart, this.animationEnd);
    };
    a.prototype.setAnimationLast = function (a) {
      this.nextAnimationLast = this.animationLast = a;
    };
    a.prototype.isComplete = function () {
      return this.trackTime >= this.animationEnd - this.animationStart;
    };
    a.prototype.resetRotationDirections = function () {
      this.timelinesRotation.length = 0;
    };
    return a;
  })();
  a.TrackEntry = d;
  var e = (function () {
    function a(b) {
      this.objects = [];
      this.drainDisabled = !1;
      this.animState = b;
    }
    a.prototype.start = function (a) {
      this.objects.push(f.start);
      this.objects.push(a);
      this.animState.animationsChanged = !0;
    };
    a.prototype.interrupt = function (a) {
      this.objects.push(f.interrupt);
      this.objects.push(a);
    };
    a.prototype.end = function (a) {
      this.objects.push(f.end);
      this.objects.push(a);
      this.animState.animationsChanged = !0;
    };
    a.prototype.dispose = function (a) {
      this.objects.push(f.dispose);
      this.objects.push(a);
    };
    a.prototype.complete = function (a) {
      this.objects.push(f.complete);
      this.objects.push(a);
    };
    a.prototype.event = function (a, b) {
      this.objects.push(f.event);
      this.objects.push(a);
      this.objects.push(b);
    };
    a.prototype.drain = function () {
      if (!this.drainDisabled) {
        this.drainDisabled = !0;
        for (
          var a = this.objects, b = this.animState.listeners, d = 0;
          d < a.length;
          d += 2
        ) {
          var e = a[d + 1];
          switch (a[d]) {
            case f.start:
              null != e.listener && e.listener.start && e.listener.start(e);
              for (var g = 0; g < b.length; g++) b[g].start && b[g].start(e);
              break;
            case f.interrupt:
              null != e.listener &&
                e.listener.interrupt &&
                e.listener.interrupt(e);
              for (g = 0; g < b.length; g++)
                b[g].interrupt && b[g].interrupt(e);
              break;
            case f.end:
              for (
                null != e.listener && e.listener.end && e.listener.end(e),
                  g = 0;
                g < b.length;
                g++
              )
                b[g].end && b[g].end(e);
            case f.dispose:
              null != e.listener && e.listener.dispose && e.listener.dispose(e);
              for (g = 0; g < b.length; g++) b[g].dispose && b[g].dispose(e);
              this.animState.trackEntryPool.free(e);
              break;
            case f.complete:
              null != e.listener &&
                e.listener.complete &&
                e.listener.complete(e);
              for (g = 0; g < b.length; g++) b[g].complete && b[g].complete(e);
              break;
            case f.event:
              var r = a[d++ + 2];
              null != e.listener && e.listener.event && e.listener.event(e, r);
              for (g = 0; g < b.length; g++) b[g].event && b[g].event(e, r);
          }
        }
        this.clear();
        this.drainDisabled = !1;
      }
    };
    a.prototype.clear = function () {
      this.objects.length = 0;
    };
    return a;
  })();
  a.EventQueue = e;
  (function (a) {
    a[(a.start = 0)] = "start";
    a[(a.interrupt = 1)] = "interrupt";
    a[(a.end = 2)] = "end";
    a[(a.dispose = 3)] = "dispose";
    a[(a.complete = 4)] = "complete";
    a[(a.event = 5)] = "event";
  })(a.EventType || (a.EventType = {}));
  var f = a.EventType,
    b = (function () {
      function a() {}
      a.prototype.start = function (a) {};
      a.prototype.interrupt = function (a) {};
      a.prototype.end = function (a) {};
      a.prototype.dispose = function (a) {};
      a.prototype.complete = function (a) {};
      a.prototype.event = function (a, b) {};
      return a;
    })();
  a.AnimationStateAdapter2 = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a(b) {
      this.animationToMixTime = {};
      this.defaultMix = 0;
      if (null == b) throw Error("skeletonData cannot be null.");
      this.skeletonData = b;
    }
    a.prototype.setMix = function (a, b, d) {
      var h = this.skeletonData.findAnimation(a);
      if (null == h) throw Error("Animation not found: " + a);
      a = this.skeletonData.findAnimation(b);
      if (null == a) throw Error("Animation not found: " + b);
      this.setMixWith(h, a, d);
    };
    a.prototype.setMixWith = function (a, b, d) {
      if (null == a) throw Error("from cannot be null.");
      if (null == b) throw Error("to cannot be null.");
      this.animationToMixTime[a.name + b.name] = d;
    };
    a.prototype.getMix = function (a, b) {
      var d = this.animationToMixTime[a.name + b.name];
      return void 0 === d ? this.defaultMix : d;
    };
    return a;
  })();
  a.AnimationStateData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a(b, d) {
      void 0 === d && (d = "");
      this.assets = {};
      this.errors = {};
      this.loaded = this.toLoad = 0;
      this.textureLoader = b;
      this.pathPrefix = d;
    }
    a.prototype.loadText = function (a, b, d) {
      var h = this;
      void 0 === b && (b = null);
      void 0 === d && (d = null);
      a = this.pathPrefix + a;
      this.toLoad++;
      var k = new XMLHttpRequest();
      k.onreadystatechange = function () {
        k.readyState == XMLHttpRequest.DONE &&
          (200 <= k.status && 300 > k.status
            ? ((h.assets[a] = k.responseText), b && b(a, k.responseText))
            : ((h.errors[a] =
                "Couldn't load text " +
                a +
                ": status " +
                k.status +
                ", " +
                k.responseText),
              d &&
                d(
                  a,
                  "Couldn't load text " +
                    a +
                    ": status " +
                    k.status +
                    ", " +
                    k.responseText
                )),
          h.toLoad--,
          h.loaded++);
      };
      k.open("GET", a, !0);
      k.send();
    };
    a.prototype.loadTexture = function (a, b, d) {
      var h = this;
      void 0 === b && (b = null);
      void 0 === d && (d = null);
      a = this.pathPrefix + a;
      this.toLoad++;
      var k = new Image();
      k.crossOrigin = "anonymous";
      k.src = a;
      k.onload = function (d) {
        d = h.textureLoader(k);
        h.assets[a] = d;
        h.toLoad--;
        h.loaded++;
        b && b(a, k);
      };
      k.onerror = function (b) {
        h.errors[a] = "Couldn't load image " + a;
        h.toLoad--;
        h.loaded++;
        d && d(a, "Couldn't load image " + a);
      };
    };
    a.prototype.get = function (a) {
      a = this.pathPrefix + a;
      return this.assets[a];
    };
    a.prototype.remove = function (a) {
      a = this.pathPrefix + a;
      var b = this.assets[a];
      b.dispose && b.dispose();
      this.assets[a] = null;
    };
    a.prototype.removeAll = function () {
      for (var a in this.assets) {
        var b = this.assets[a];
        b.dispose && b.dispose();
      }
      this.assets = {};
    };
    a.prototype.isLoadingComplete = function () {
      return 0 == this.toLoad;
    };
    a.prototype.getToLoad = function () {
      return this.toLoad;
    };
    a.prototype.getLoaded = function () {
      return this.loaded;
    };
    a.prototype.dispose = function () {
      this.removeAll();
    };
    a.prototype.hasErrors = function () {
      return 0 < Object.keys(this.errors).length;
    };
    a.prototype.getErrors = function () {
      return this.errors;
    };
    return a;
  })();
  a.AssetManager = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a) {
      this.atlas = a;
    }
    b.prototype.newRegionAttachment = function (b, d, g) {
      b = this.atlas.findRegion(g);
      if (null == b)
        throw Error(
          "Region not found in atlas: " + g + " (region attachment: " + d + ")"
        );
      b.renderObject = b;
      d = new a.RegionAttachment(d);
      d.setRegion(b);
      return d;
    };
    b.prototype.newMeshAttachment = function (b, d, g) {
      b = this.atlas.findRegion(g);
      if (null == b)
        throw Error(
          "Region not found in atlas: " + g + " (mesh attachment: " + d + ")"
        );
      b.renderObject = b;
      d = new a.MeshAttachment(d);
      d.region = b;
      return d;
    };
    b.prototype.newBoundingBoxAttachment = function (b, d) {
      return new a.BoundingBoxAttachment(d);
    };
    b.prototype.newPathAttachment = function (b, d) {
      return new a.PathAttachment(d);
    };
    return b;
  })();
  a.AtlasAttachmentLoader = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a) {
      if (null == a) throw Error("name cannot be null.");
      this.name = a;
    };
  })();
  a.Attachment = b;
  b = (function (a) {
    function b(e) {
      a.call(this, e);
      this.worldVerticesLength = 0;
    }
    __extends(b, a);
    b.prototype.computeWorldVertices = function (a, b) {
      this.computeWorldVerticesWith(a, 0, this.worldVerticesLength, b, 0);
    };
    b.prototype.computeWorldVerticesWith = function (a, b, d, e, m) {
      d += m;
      var n = a.bone.skeleton,
        p = a.attachmentVertices,
        r = this.vertices,
        s = this.bones;
      if (null == s) {
        0 < p.length && (r = p);
        a = a.bone;
        var p = a.worldX,
          s = a.worldY,
          u = a.a,
          n = a.b,
          v = a.c;
        a = a.d;
        for (var t = b; m < d; t += 2, m += 2) {
          b = r[t];
          var w = r[t + 1];
          e[m] = b * u + w * n + p;
          e[m + 1] = b * v + w * a + s;
        }
      } else {
        for (w = a = u = 0; w < b; w += 2) (v = s[u]), (u += v + 1), (a += v);
        t = n.bones;
        if (0 == p.length)
          for (n = 3 * a; m < d; m += 2) {
            for (var x = 0, y = 0, v = s[u++], v = v + u; u < v; u++, n += 3) {
              a = t[s[u]];
              b = r[n];
              var w = r[n + 1],
                B = r[n + 2],
                x = x + (b * a.a + w * a.b + a.worldX) * B,
                y = y + (b * a.c + w * a.d + a.worldY) * B;
            }
            e[m] = x;
            e[m + 1] = y;
          }
        else
          for (var n = 3 * a, A = a << 1; m < d; m += 2) {
            y = x = 0;
            v = s[u++];
            for (v += u; u < v; u++, n += 3, A += 2)
              (a = t[s[u]]),
                (b = r[n] + p[A]),
                (w = r[n + 1] + p[A + 1]),
                (B = r[n + 2]),
                (x += (b * a.a + w * a.b + a.worldX) * B),
                (y += (b * a.c + w * a.d + a.worldY) * B);
            e[m] = x;
            e[m + 1] = y;
          }
      }
    };
    b.prototype.applyDeform = function (a) {
      return this == a;
    };
    return b;
  })(b);
  a.VertexAttachment = b;
})(spine || (spine = {}));
(function (a) {
  a = a.AttachmentType || (a.AttachmentType = {});
  a[(a.Region = 0)] = "Region";
  a[(a.BoundingBox = 1)] = "BoundingBox";
  a[(a.Mesh = 2)] = "Mesh";
  a[(a.LinkedMesh = 3)] = "LinkedMesh";
  a[(a.Path = 4)] = "Path";
})(spine || (spine = {}));
(function (a) {
  var b = (function (b) {
    function e(e) {
      b.call(this, e);
      this.color = new a.Color(1, 1, 1, 1);
    }
    __extends(e, b);
    return e;
  })(a.VertexAttachment);
  a.BoundingBoxAttachment = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function (b) {
    function e(e) {
      b.call(this, e);
      this.color = new a.Color(1, 1, 1, 1);
      this.inheritDeform = !1;
      this.tempColor = new a.Color(0, 0, 0, 0);
    }
    __extends(e, b);
    e.prototype.updateUVs = function () {
      var b = this.regionUVs,
        d = b.length,
        e = 8 * (d >> 1);
      if (null == this.worldVertices || this.worldVertices.length != e)
        this.worldVertices = a.Utils.newFloatArray(e);
      var k = (e = 0),
        m = 0,
        n = 0;
      null == this.region
        ? ((e = k = 0), (m = n = 1))
        : ((e = this.region.u),
          (k = this.region.v),
          (m = this.region.u2 - e),
          (n = this.region.v2 - k));
      if (this.region.rotate)
        for (var p = 0, r = 6; p < d; p += 2, r += 8)
          (this.worldVertices[r] = e + b[p + 1] * m),
            (this.worldVertices[r + 1] = k + n - b[p] * n);
      else
        for (p = 0, r = 6; p < d; p += 2, r += 8)
          (this.worldVertices[r] = e + b[p] * m),
            (this.worldVertices[r + 1] = k + b[p + 1] * n);
    };
    e.prototype.updateWorldVertices = function (a, b) {
      var d = a.bone.skeleton,
        e = d.color,
        m = a.color,
        n = this.color,
        p = e.a * m.a * n.a,
        r = b ? p : 1,
        s = this.tempColor;
      s.set(e.r * m.r * n.r * r, e.g * m.g * n.g * r, e.b * m.b * n.b * r, p);
      var u = a.attachmentVertices,
        e = this.vertices,
        m = this.worldVertices,
        v = this.bones;
      if (null == v) {
        v = e.length;
        0 < u.length && (e = u);
        for (
          var t = a.bone,
            u = t.worldX,
            w = t.worldY,
            x = t.a,
            d = t.b,
            y = t.c,
            t = t.d,
            p = (n = 0);
          n < v;
          n += 2, p += 8
        ) {
          var r = e[n],
            B = e[n + 1];
          m[p] = r * x + B * d + u;
          m[p + 1] = r * y + B * t + w;
          m[p + 2] = s.r;
          m[p + 3] = s.g;
          m[p + 4] = s.b;
          m[p + 5] = s.a;
        }
        return m;
      }
      w = d.bones;
      if (0 == u.length)
        for (d = n = p = 0, x = v.length; n < x; p += 8) {
          for (var A = (y = 0), z = v[n++] + n; n < z; n++, d += 3)
            var t = w[v[n]],
              r = e[d],
              B = e[d + 1],
              C = e[d + 2],
              y = y + (r * t.a + B * t.b + t.worldX) * C,
              A = A + (r * t.c + B * t.d + t.worldY) * C;
          m[p] = y;
          m[p + 1] = A;
          m[p + 2] = s.r;
          m[p + 3] = s.g;
          m[p + 4] = s.b;
          m[p + 5] = s.a;
        }
      else
        for (var D = (d = n = p = 0), x = v.length; n < x; p += 8) {
          A = y = 0;
          for (z = v[n++] + n; n < z; n++, d += 3, D += 2)
            (t = w[v[n]]),
              (r = e[d] + u[D]),
              (B = e[d + 1] + u[D + 1]),
              (C = e[d + 2]),
              (y += (r * t.a + B * t.b + t.worldX) * C),
              (A += (r * t.c + B * t.d + t.worldY) * C);
          m[p] = y;
          m[p + 1] = A;
          m[p + 2] = s.r;
          m[p + 3] = s.g;
          m[p + 4] = s.b;
          m[p + 5] = s.a;
        }
      return m;
    };
    e.prototype.applyDeform = function (a) {
      return this == a || (this.inheritDeform && this.parentMesh == a);
    };
    e.prototype.getParentMesh = function () {
      return this.parentMesh;
    };
    e.prototype.setParentMesh = function (a) {
      this.parentMesh = a;
      null != a &&
        ((this.bones = a.bones),
        (this.vertices = a.vertices),
        (this.regionUVs = a.regionUVs),
        (this.triangles = a.triangles),
        (this.hullLength = a.hullLength));
    };
    return e;
  })(a.VertexAttachment);
  a.MeshAttachment = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function (b) {
    function e(e) {
      b.call(this, e);
      this.constantSpeed = this.closed = !1;
      this.color = new a.Color(1, 1, 1, 1);
    }
    __extends(e, b);
    return e;
  })(a.VertexAttachment);
  a.PathAttachment = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function (b) {
    function e(e) {
      b.call(this, e);
      this.y = this.x = 0;
      this.scaleY = this.scaleX = 1;
      this.height = this.width = this.rotation = 0;
      this.color = new a.Color(1, 1, 1, 1);
      this.offset = a.Utils.newFloatArray(8);
      this.vertices = a.Utils.newFloatArray(32);
      this.tempColor = new a.Color(1, 1, 1, 1);
    }
    __extends(e, b);
    e.prototype.setRegion = function (a) {
      var b = this.vertices;
      a.rotate
        ? ((b[e.U2] = a.u),
          (b[e.V2] = a.v2),
          (b[e.U3] = a.u),
          (b[e.V3] = a.v),
          (b[e.U4] = a.u2),
          (b[e.V4] = a.v),
          (b[e.U1] = a.u2),
          (b[e.V1] = a.v2))
        : ((b[e.U1] = a.u),
          (b[e.V1] = a.v2),
          (b[e.U2] = a.u),
          (b[e.V2] = a.v),
          (b[e.U3] = a.u2),
          (b[e.V3] = a.v),
          (b[e.U4] = a.u2),
          (b[e.V4] = a.v2));
      this.region = a;
    };
    e.prototype.updateOffset = function () {
      var a = (this.width / this.region.originalWidth) * this.scaleX,
        b = (this.height / this.region.originalHeight) * this.scaleY,
        d = (-this.width / 2) * this.scaleX + this.region.offsetX * a,
        k = (-this.height / 2) * this.scaleY + this.region.offsetY * b,
        m = d + this.region.width * a,
        a = k + this.region.height * b,
        b = (this.rotation * Math.PI) / 180,
        n = Math.cos(b),
        p = Math.sin(b),
        b = d * n + this.x,
        d = d * p,
        r = k * n + this.y,
        k = k * p,
        s = m * n + this.x,
        m = m * p,
        n = a * n + this.y,
        a = a * p,
        p = this.offset;
      p[e.OX1] = b - k;
      p[e.OY1] = r + d;
      p[e.OX2] = b - a;
      p[e.OY2] = n + d;
      p[e.OX3] = s - a;
      p[e.OY3] = n + m;
      p[e.OX4] = s - k;
      p[e.OY4] = r + m;
    };
    e.prototype.updateWorldVertices = function (a, b) {
      var d = a.bone.skeleton.color,
        k = a.color,
        m = this.color,
        n = d.a * k.a * m.a,
        p = b ? n : 1,
        r = this.tempColor;
      r.set(d.r * k.r * m.r * p, d.g * k.g * m.g * p, d.b * k.b * m.b * p, n);
      var d = this.vertices,
        k = this.offset,
        s = a.bone,
        m = s.worldX,
        n = s.worldY,
        p = s.a,
        u = s.b,
        v = s.c,
        s = s.d,
        t = 0,
        w = 0,
        t = k[e.OX1],
        w = k[e.OY1];
      d[e.X1] = t * p + w * u + m;
      d[e.Y1] = t * v + w * s + n;
      d[e.C1R] = r.r;
      d[e.C1G] = r.g;
      d[e.C1B] = r.b;
      d[e.C1A] = r.a;
      t = k[e.OX2];
      w = k[e.OY2];
      d[e.X2] = t * p + w * u + m;
      d[e.Y2] = t * v + w * s + n;
      d[e.C2R] = r.r;
      d[e.C2G] = r.g;
      d[e.C2B] = r.b;
      d[e.C2A] = r.a;
      t = k[e.OX3];
      w = k[e.OY3];
      d[e.X3] = t * p + w * u + m;
      d[e.Y3] = t * v + w * s + n;
      d[e.C3R] = r.r;
      d[e.C3G] = r.g;
      d[e.C3B] = r.b;
      d[e.C3A] = r.a;
      t = k[e.OX4];
      w = k[e.OY4];
      d[e.X4] = t * p + w * u + m;
      d[e.Y4] = t * v + w * s + n;
      d[e.C4R] = r.r;
      d[e.C4G] = r.g;
      d[e.C4B] = r.b;
      d[e.C4A] = r.a;
      return d;
    };
    e.OX1 = 0;
    e.OY1 = 1;
    e.OX2 = 2;
    e.OY2 = 3;
    e.OX3 = 4;
    e.OY3 = 5;
    e.OX4 = 6;
    e.OY4 = 7;
    e.X1 = 0;
    e.Y1 = 1;
    e.C1R = 2;
    e.C1G = 3;
    e.C1B = 4;
    e.C1A = 5;
    e.U1 = 6;
    e.V1 = 7;
    e.X2 = 8;
    e.Y2 = 9;
    e.C2R = 10;
    e.C2G = 11;
    e.C2B = 12;
    e.C2A = 13;
    e.U2 = 14;
    e.V2 = 15;
    e.X3 = 16;
    e.Y3 = 17;
    e.C3R = 18;
    e.C3G = 19;
    e.C3B = 20;
    e.C3A = 21;
    e.U3 = 22;
    e.V3 = 23;
    e.X4 = 24;
    e.Y4 = 25;
    e.C4R = 26;
    e.C4G = 27;
    e.C4B = 28;
    e.C4A = 29;
    e.U4 = 30;
    e.V4 = 31;
    return e;
  })(a.Attachment);
  a.RegionAttachment = b;
})(spine || (spine = {}));
(function (a) {
  a = a.BlendMode || (a.BlendMode = {});
  a[(a.Normal = 0)] = "Normal";
  a[(a.Additive = 1)] = "Additive";
  a[(a.Multiply = 2)] = "Multiply";
  a[(a.Screen = 3)] = "Screen";
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a, d, g) {
      this.children = [];
      this.ashearY = this.ashearX = this.ascaleY = this.ascaleX = this.arotation = this.ay = this.ax = this.shearY = this.shearX = this.scaleY = this.scaleX = this.rotation = this.y = this.x = 0;
      this.appliedValid = !1;
      this.worldY = this.d = this.c = this.worldX = this.b = this.a = 0;
      this.sorted = !1;
      if (null == a) throw Error("data cannot be null.");
      if (null == d) throw Error("skeleton cannot be null.");
      this.data = a;
      this.skeleton = d;
      this.parent = g;
      this.setToSetupPose();
    }
    b.prototype.update = function () {
      this.updateWorldTransformWith(
        this.x,
        this.y,
        this.rotation,
        this.scaleX,
        this.scaleY,
        this.shearX,
        this.shearY
      );
    };
    b.prototype.updateWorldTransform = function () {
      this.updateWorldTransformWith(
        this.x,
        this.y,
        this.rotation,
        this.scaleX,
        this.scaleY,
        this.shearX,
        this.shearY
      );
    };
    b.prototype.updateWorldTransformWith = function (b, d, g, h, k, m, n) {
      this.ax = b;
      this.ay = d;
      this.arotation = g;
      this.ascaleX = h;
      this.ascaleY = k;
      this.ashearX = m;
      this.ashearY = n;
      this.appliedValid = !0;
      var p = this.parent;
      if (null == p) {
        n = g + 90 + n;
        var p = a.MathUtils.cosDeg(g + m) * h,
          r = a.MathUtils.cosDeg(n) * k;
        h *= a.MathUtils.sinDeg(g + m);
        k *= a.MathUtils.sinDeg(n);
        var s = this.skeleton;
        s.flipX && ((b = -b), (p = -p), (r = -r));
        s.flipY && ((d = -d), (h = -h), (k = -k));
        this.a = p;
        this.b = r;
        this.c = h;
        this.d = k;
        this.worldX = b + s.x;
        this.worldY = d + s.y;
      } else {
        var s = p.a,
          u = p.b,
          v = p.c,
          t = p.d;
        this.worldX = s * b + u * d + p.worldX;
        this.worldY = v * b + t * d + p.worldY;
        switch (this.data.transformMode) {
          case a.TransformMode.Normal:
            n = g + 90 + n;
            p = a.MathUtils.cosDeg(g + m) * h;
            r = a.MathUtils.cosDeg(n) * k;
            h *= a.MathUtils.sinDeg(g + m);
            k *= a.MathUtils.sinDeg(n);
            this.a = s * p + u * h;
            this.b = s * r + u * k;
            this.c = v * p + t * h;
            this.d = v * r + t * k;
            return;
          case a.TransformMode.OnlyTranslation:
            n = g + 90 + n;
            this.a = a.MathUtils.cosDeg(g + m) * h;
            this.b = a.MathUtils.cosDeg(n) * k;
            this.c = a.MathUtils.sinDeg(g + m) * h;
            this.d = a.MathUtils.sinDeg(n) * k;
            break;
          case a.TransformMode.NoRotationOrReflection:
            p = s * s + v * v;
            r = 0;
            1e-4 < p
              ? ((p = Math.abs(s * t - u * v) / p),
                (u = v * p),
                (t = s * p),
                (r = Math.atan2(v, s) * a.MathUtils.radDeg))
              : ((v = s = 0), (r = 90 - Math.atan2(t, u) * a.MathUtils.radDeg));
            m = g + m - r;
            n = g + n - r + 90;
            p = a.MathUtils.cosDeg(m) * h;
            r = a.MathUtils.cosDeg(n) * k;
            h *= a.MathUtils.sinDeg(m);
            k *= a.MathUtils.sinDeg(n);
            this.a = s * p - u * h;
            this.b = s * r - u * k;
            this.c = v * p + t * h;
            this.d = v * r + t * k;
            break;
          case a.TransformMode.NoScale:
          case a.TransformMode.NoScaleOrReflection:
            p = a.MathUtils.cosDeg(g);
            r = a.MathUtils.sinDeg(g);
            g = s * p + u * r;
            b = v * p + t * r;
            p = Math.sqrt(g * g + b * b);
            1e-5 < p && (p = 1 / p);
            g *= p;
            b *= p;
            p = Math.sqrt(g * g + b * b);
            r = Math.PI / 2 + Math.atan2(b, g);
            d = Math.cos(r) * p;
            var w = Math.sin(r) * p,
              p = a.MathUtils.cosDeg(m) * h,
              r = a.MathUtils.cosDeg(90 + n) * k;
            h *= a.MathUtils.sinDeg(m);
            k *= a.MathUtils.sinDeg(90 + n);
            this.a = g * p + d * h;
            this.b = g * r + d * k;
            this.c = b * p + w * h;
            this.d = b * r + w * k;
            if (
              this.data.transformMode != a.TransformMode.NoScaleOrReflection
                ? 0 > s * t - u * v
                : this.skeleton.flipX != this.skeleton.flipY
            )
              (this.b = -this.b), (this.d = -this.d);
            return;
        }
        this.skeleton.flipX && ((this.a = -this.a), (this.b = -this.b));
        this.skeleton.flipY && ((this.c = -this.c), (this.d = -this.d));
      }
    };
    b.prototype.setToSetupPose = function () {
      var a = this.data;
      this.x = a.x;
      this.y = a.y;
      this.rotation = a.rotation;
      this.scaleX = a.scaleX;
      this.scaleY = a.scaleY;
      this.shearX = a.shearX;
      this.shearY = a.shearY;
    };
    b.prototype.getWorldRotationX = function () {
      return Math.atan2(this.c, this.a) * a.MathUtils.radDeg;
    };
    b.prototype.getWorldRotationY = function () {
      return Math.atan2(this.d, this.b) * a.MathUtils.radDeg;
    };
    b.prototype.getWorldScaleX = function () {
      return Math.sqrt(this.a * this.a + this.c * this.c);
    };
    b.prototype.getWorldScaleY = function () {
      return Math.sqrt(this.b * this.b + this.d * this.d);
    };
    b.prototype.worldToLocalRotationX = function () {
      var b = this.parent;
      if (null == b) return this.arotation;
      var d = this.a,
        g = this.c;
      return (
        Math.atan2(b.a * g - b.c * d, b.d * d - b.b * g) * a.MathUtils.radDeg
      );
    };
    b.prototype.worldToLocalRotationY = function () {
      var b = this.parent;
      if (null == b) return this.arotation;
      var d = this.b,
        g = this.d;
      return (
        Math.atan2(b.a * g - b.c * d, b.d * d - b.b * g) * a.MathUtils.radDeg
      );
    };
    b.prototype.rotateWorld = function (b) {
      var d = this.a,
        g = this.b,
        h = this.c,
        k = this.d,
        m = a.MathUtils.cosDeg(b);
      b = a.MathUtils.sinDeg(b);
      this.a = m * d - b * h;
      this.b = m * g - b * k;
      this.c = b * d + m * h;
      this.d = b * g + m * k;
      this.appliedValid = !1;
    };
    b.prototype.updateAppliedTransform = function () {
      this.appliedValid = !0;
      var b = this.parent;
      if (null == b)
        (this.ax = this.worldX),
          (this.ay = this.worldY),
          (this.arotation = Math.atan2(this.c, this.a) * a.MathUtils.radDeg),
          (this.ascaleX = Math.sqrt(this.a * this.a + this.c * this.c)),
          (this.ascaleY = Math.sqrt(this.b * this.b + this.d * this.d)),
          (this.ashearX = 0),
          (this.ashearY =
            Math.atan2(
              this.a * this.b + this.c * this.d,
              this.a * this.d - this.b * this.c
            ) * a.MathUtils.radDeg);
      else {
        var d = b.a,
          g = b.b,
          h = b.c,
          k = b.d,
          m = 1 / (d * k - g * h),
          n = this.worldX - b.worldX,
          b = this.worldY - b.worldY;
        this.ax = n * k * m - b * g * m;
        this.ay = b * d * m - n * h * m;
        k *= m;
        d *= m;
        g *= m;
        m *= h;
        h = k * this.a - g * this.c;
        g = k * this.b - g * this.d;
        k = d * this.c - m * this.a;
        m = d * this.d - m * this.b;
        this.ashearX = 0;
        this.ascaleX = Math.sqrt(h * h + k * k);
        1e-4 < this.ascaleX
          ? ((d = h * m - g * k),
            (this.ascaleY = d / this.ascaleX),
            (this.ashearY = Math.atan2(h * g + k * m, d) * a.MathUtils.radDeg),
            (this.arotation = Math.atan2(k, h) * a.MathUtils.radDeg))
          : ((this.ascaleX = 0),
            (this.ascaleY = Math.sqrt(g * g + m * m)),
            (this.ashearY = 0),
            (this.arotation = 90 - Math.atan2(m, g) * a.MathUtils.radDeg));
      }
    };
    b.prototype.worldToLocal = function (a) {
      var b = this.a,
        d = this.b,
        h = this.c,
        k = this.d,
        m = 1 / (b * k - d * h),
        n = a.x - this.worldX,
        p = a.y - this.worldY;
      a.x = n * k * m - p * d * m;
      a.y = p * b * m - n * h * m;
      return a;
    };
    b.prototype.localToWorld = function (a) {
      var b = a.x,
        d = a.y;
      a.x = b * this.a + d * this.b + this.worldX;
      a.y = b * this.c + d * this.d + this.worldY;
      return a;
    };
    return b;
  })();
  a.Bone = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a, b, g) {
      this.rotation = this.y = this.x = 0;
      this.scaleY = this.scaleX = 1;
      this.shearY = this.shearX = 0;
      this.transformMode = d.Normal;
      if (0 > a) throw Error("index must be \x3e\x3d 0.");
      if (null == b) throw Error("name cannot be null.");
      this.index = a;
      this.name = b;
      this.parent = g;
    };
  })();
  a.BoneData = b;
  (function (a) {
    a[(a.Normal = 0)] = "Normal";
    a[(a.OnlyTranslation = 1)] = "OnlyTranslation";
    a[(a.NoRotationOrReflection = 2)] = "NoRotationOrReflection";
    a[(a.NoScale = 3)] = "NoScale";
    a[(a.NoScaleOrReflection = 4)] = "NoScaleOrReflection";
  })(a.TransformMode || (a.TransformMode = {}));
  var d = a.TransformMode;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a, b) {
      if (null == b) throw Error("data cannot be null.");
      this.time = a;
      this.data = b;
    };
  })();
  a.Event = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a) {
      this.name = a;
    };
  })();
  a.EventData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a, d) {
      this.mix = 1;
      this.bendDirection = 0;
      if (null == a) throw Error("data cannot be null.");
      if (null == d) throw Error("skeleton cannot be null.");
      this.data = a;
      this.mix = a.mix;
      this.bendDirection = a.bendDirection;
      this.bones = [];
      for (var g = 0; g < a.bones.length; g++)
        this.bones.push(d.findBone(a.bones[g].name));
      this.target = d.findBone(a.target.name);
    }
    b.prototype.getOrder = function () {
      return this.data.order;
    };
    b.prototype.apply = function () {
      this.update();
    };
    b.prototype.update = function () {
      var a = this.target,
        b = this.bones;
      switch (b.length) {
        case 1:
          this.apply1(b[0], a.worldX, a.worldY, this.mix);
          break;
        case 2:
          this.apply2(
            b[0],
            b[1],
            a.worldX,
            a.worldY,
            this.bendDirection,
            this.mix
          );
      }
    };
    b.prototype.apply1 = function (b, d, g, h) {
      b.appliedValid || b.updateAppliedTransform();
      var k = b.parent,
        m = 1 / (k.a * k.d - k.b * k.c);
      d -= k.worldX;
      g -= k.worldY;
      k =
        Math.atan2(
          (g * k.a - d * k.c) * m - b.ay,
          (d * k.d - g * k.b) * m - b.ax
        ) *
          a.MathUtils.radDeg -
        b.ashearX -
        b.arotation;
      0 > b.ascaleX && (k += 180);
      180 < k ? (k -= 360) : -180 > k && (k += 360);
      b.updateWorldTransformWith(
        b.ax,
        b.ay,
        b.arotation + k * h,
        b.ascaleX,
        b.ascaleY,
        b.ashearX,
        b.ashearY
      );
    };
    b.prototype.apply2 = function (b, d, g, h, k, m) {
      if (0 == m) d.updateWorldTransform();
      else {
        b.appliedValid || b.updateAppliedTransform();
        d.appliedValid || d.updateAppliedTransform();
        var n = b.ax,
          p = b.ay,
          r = b.ascaleX,
          s = b.ascaleY,
          u = d.ascaleX,
          v = 0,
          t = 0,
          w = 0;
        0 > r ? ((r = -r), (v = 180), (w = -1)) : ((v = 0), (w = 1));
        0 > s && ((s = -s), (w = -w));
        0 > u ? ((u = -u), (t = 180)) : (t = 0);
        var x = d.ax,
          y = 0,
          B = 0,
          A = 0,
          z = b.a,
          C = b.b,
          D = b.c,
          E = b.d,
          J = 1e-4 >= Math.abs(r - s);
        J
          ? ((y = d.ay),
            (B = z * x + C * y + b.worldX),
            (A = D * x + E * y + b.worldY))
          : ((y = 0), (B = z * x + b.worldX), (A = D * x + b.worldY));
        var G = b.parent,
          z = G.a,
          C = G.b,
          D = G.c,
          E = G.d,
          F = 1 / (z * E - C * D);
        g -= G.worldX;
        h -= G.worldY;
        var L = (g * E - h * C) * F - n,
          H = (h * z - g * D) * F - p;
        g = B - G.worldX;
        h = A - G.worldY;
        C = (g * E - h * C) * F - n;
        z = (h * z - g * D) * F - p;
        F = Math.sqrt(C * C + z * z);
        C = d.data.length * u;
        E = z = 0;
        a: if (J)
          (C *= r),
            (z = (L * L + H * H - F * F - C * C) / (2 * F * C)),
            -1 > z ? (z = -1) : 1 < z && (z = 1),
            (E = Math.acos(z) * k),
            (z = F + C * z),
            (C *= Math.sin(E)),
            (z = Math.atan2(H * z - L * C, L * z + H * C));
        else {
          z = r * C;
          C *= s;
          h = z * z;
          u = C * C;
          J = L * L + H * H;
          L = Math.atan2(H, L);
          D = u * F * F + h * J - h * u;
          g = -2 * u * F;
          H = u - h;
          E = g * g - 4 * H * D;
          if (
            0 <= E &&
            ((E = Math.sqrt(E)),
            0 > g && (E = -E),
            (E = -(g + E) / 2),
            (g = E / H),
            (E = D / E),
            (E = Math.abs(g) < Math.abs(E) ? g : E),
            E * E <= J)
          ) {
            h = Math.sqrt(J - E * E) * k;
            z = L - Math.atan2(h, E);
            E = Math.atan2(h / s, (E - F) / r);
            break a;
          }
          var r = 0,
            D = Number.MAX_VALUE,
            I = (G = A = s = B = H = 0);
          g = F + z;
          E = g * g;
          E > A && ((s = 0), (A = E), (G = g));
          g = F - z;
          E = g * g;
          E < D && ((r = a.MathUtils.PI), (D = E), (H = g));
          u = Math.acos((-z * F) / (h - u));
          g = z * Math.cos(u) + F;
          h = C * Math.sin(u);
          E = g * g + h * h;
          E < D && ((r = u), (D = E), (H = g), (B = h));
          E > A && ((s = u), (A = E), (G = g), (I = h));
          J <= (D + A) / 2
            ? ((z = L - Math.atan2(B * k, H)), (E = r * k))
            : ((z = L - Math.atan2(I * k, G)), (E = s * k));
        }
        k = Math.atan2(y, x) * w;
        C = b.arotation;
        z = (z - k) * a.MathUtils.radDeg + v - C;
        180 < z ? (z -= 360) : -180 > z && (z += 360);
        b.updateWorldTransformWith(n, p, C + z * m, b.ascaleX, b.ascaleY, 0, 0);
        C = d.arotation;
        E = ((E + k) * a.MathUtils.radDeg - d.ashearX) * w + t - C;
        180 < E ? (E -= 360) : -180 > E && (E += 360);
        d.updateWorldTransformWith(
          x,
          y,
          C + E * m,
          d.ascaleX,
          d.ascaleY,
          d.ashearX,
          d.ashearY
        );
      }
    };
    return b;
  })();
  a.IkConstraint = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a) {
      this.order = 0;
      this.bones = [];
      this.mix = this.bendDirection = 1;
      this.name = a;
    };
  })();
  a.IkConstraintData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a, d) {
      this.translateMix = this.rotateMix = this.spacing = this.position = 0;
      this.spaces = [];
      this.positions = [];
      this.world = [];
      this.curves = [];
      this.lengths = [];
      this.segments = [];
      if (null == a) throw Error("data cannot be null.");
      if (null == d) throw Error("skeleton cannot be null.");
      this.data = a;
      this.bones = [];
      for (var g = 0, h = a.bones.length; g < h; g++)
        this.bones.push(d.findBone(a.bones[g].name));
      this.target = d.findSlot(a.target.name);
      this.position = a.position;
      this.spacing = a.spacing;
      this.rotateMix = a.rotateMix;
      this.translateMix = a.translateMix;
    }
    b.prototype.apply = function () {
      this.update();
    };
    b.prototype.update = function () {
      var b = this.target.getAttachment();
      if (b instanceof a.PathAttachment) {
        var d = this.rotateMix,
          g = this.translateMix,
          h = 0 < d;
        if (0 < g || h) {
          var k = this.data,
            m = k.spacingMode,
            n = m == a.SpacingMode.Length,
            p = k.rotateMode,
            r = p == a.RotateMode.Tangent,
            s = p == a.RotateMode.ChainScale,
            u = this.bones.length,
            v = r ? u : u + 1,
            t = this.bones,
            w = a.Utils.setArraySize(this.spaces, v),
            x = null,
            y = this.spacing;
          if (s || n) {
            s && (x = a.Utils.setArraySize(this.lengths, u));
            for (var B = 0, A = v - 1; B < A; ) {
              var z = t[B],
                C = z.data.length,
                D = C * z.a,
                C = C * z.c,
                C = Math.sqrt(D * D + C * C);
              s && (x[B] = C);
              w[++B] = n ? Math.max(0, C + y) : y;
            }
          } else for (B = 1; B < v; B++) w[B] = y;
          b = this.computeWorldPositions(
            b,
            v,
            r,
            k.positionMode == a.PositionMode.Percent,
            m == a.SpacingMode.Percent
          );
          n = b[0];
          v = b[1];
          k = k.offsetRotation;
          m = !1;
          0 == k
            ? (m = p == a.RotateMode.Chain)
            : ((m = !1),
              (p = this.target.bone),
              (k *=
                0 < p.a * p.d - p.b * p.c
                  ? a.MathUtils.degRad
                  : -a.MathUtils.degRad));
          B = 0;
          for (p = 3; B < u; B++, p += 3) {
            z = t[B];
            z.worldX += (n - z.worldX) * g;
            z.worldY += (v - z.worldY) * g;
            D = b[p];
            C = b[p + 1];
            y = D - n;
            A = C - v;
            s &&
              ((n = x[B]),
              0 != n &&
                ((n = (Math.sqrt(y * y + A * A) / n - 1) * d + 1),
                (z.a *= n),
                (z.c *= n)));
            n = D;
            v = C;
            if (h) {
              var D = z.a,
                C = z.b,
                E = z.c,
                J = z.d,
                G = 0,
                F = 0,
                L = 0,
                G = r ? b[p - 1] : 0 == w[B + 1] ? b[p + 2] : Math.atan2(A, y),
                G = G - Math.atan2(E, D);
              if (m)
                var F = Math.cos(G),
                  L = Math.sin(G),
                  H = z.data.length,
                  n = n + (H * (F * D - L * E) - y) * d,
                  v = v + (H * (L * D + F * E) - A) * d;
              else G += k;
              G > a.MathUtils.PI
                ? (G -= a.MathUtils.PI2)
                : G < -a.MathUtils.PI && (G += a.MathUtils.PI2);
              G *= d;
              F = Math.cos(G);
              L = Math.sin(G);
              z.a = F * D - L * E;
              z.b = F * C - L * J;
              z.c = L * D + F * E;
              z.d = L * C + F * J;
            }
            z.appliedValid = !1;
          }
        }
      }
    };
    b.prototype.computeWorldPositions = function (e, f, g, h, k) {
      var m = this.target,
        n = this.position,
        p = this.spaces,
        r = a.Utils.setArraySize(this.positions, 3 * f + 2),
        s = null,
        u = e.closed,
        v = e.worldVerticesLength,
        t = v / 6,
        w = b.NONE;
      if (!e.constantSpeed) {
        var x = e.lengths,
          t = t - (u ? 1 : 2),
          y = x[t];
        h && (n *= y);
        if (k) for (var B = 0; B < f; B++) p[B] *= y;
        s = a.Utils.setArraySize(this.world, 8);
        for (k = h = B = 0; B < f; B++, h += 3) {
          var A = p[B],
            z = (n += A);
          if (u) (z %= y), 0 > z && (z += y), (k = 0);
          else if (0 > z) {
            w != b.BEFORE &&
              ((w = b.BEFORE), e.computeWorldVerticesWith(m, 2, 4, s, 0));
            this.addBeforePosition(z, s, 0, r, h);
            continue;
          } else if (z > y) {
            w != b.AFTER &&
              ((w = b.AFTER), e.computeWorldVerticesWith(m, v - 6, 4, s, 0));
            this.addAfterPosition(z - y, s, 0, r, h);
            continue;
          }
          for (; ; k++) {
            var C = x[k];
            if (!(z > C)) {
              if (0 == k) z /= C;
              else
                var D = x[k - 1],
                  z = (z - D) / (C - D);
              break;
            }
          }
          k != w &&
            ((w = k),
            u && k == t
              ? (e.computeWorldVerticesWith(m, v - 4, 4, s, 0),
                e.computeWorldVerticesWith(m, 0, 4, s, 4))
              : e.computeWorldVerticesWith(m, 6 * k + 2, 8, s, 0));
          this.addCurvePosition(
            z,
            s[0],
            s[1],
            s[2],
            s[3],
            s[4],
            s[5],
            s[6],
            s[7],
            r,
            h,
            g || (0 < B && 0 == A)
          );
        }
        return r;
      }
      u
        ? ((v += 2),
          (s = a.Utils.setArraySize(this.world, v)),
          e.computeWorldVerticesWith(m, 2, v - 4, s, 0),
          e.computeWorldVerticesWith(m, 0, 2, s, v - 4),
          (s[v - 2] = s[0]),
          (s[v - 1] = s[1]))
        : (t--,
          (v -= 4),
          (s = a.Utils.setArraySize(this.world, v)),
          e.computeWorldVerticesWith(m, 2, v, s, 0));
      e = a.Utils.setArraySize(this.curves, t);
      for (
        var m = 0,
          x = s[0],
          y = s[1],
          E = (C = 0),
          J = 0,
          G = 0,
          F = 0,
          L = 0,
          H = 0,
          I = 0,
          M = (D = 0),
          K = 0,
          N = 0,
          B = (I = H = 0),
          A = 2;
        B < t;
        B++, A += 6
      )
        (C = s[A]),
          (E = s[A + 1]),
          (J = s[A + 2]),
          (G = s[A + 3]),
          (F = s[A + 4]),
          (L = s[A + 5]),
          (H = 0.1875 * (x - 2 * C + J)),
          (I = 0.1875 * (y - 2 * E + G)),
          (D = 0.09375 * (3 * (C - J) - x + F)),
          (M = 0.09375 * (3 * (E - G) - y + L)),
          (K = 2 * H + D),
          (N = 2 * I + M),
          (H = 0.75 * (C - x) + H + 0.16666667 * D),
          (I = 0.75 * (E - y) + I + 0.16666667 * M),
          (m += Math.sqrt(H * H + I * I)),
          (H += K),
          (I += N),
          (K += D),
          (N += M),
          (m += Math.sqrt(H * H + I * I)),
          (H += K),
          (I += N),
          (m += Math.sqrt(H * H + I * I)),
          (H += K + D),
          (I += N + M),
          (m += Math.sqrt(H * H + I * I)),
          (e[B] = m),
          (x = F),
          (y = L);
      h && (n *= m);
      if (k) for (B = 0; B < f; B++) p[B] *= m;
      for (
        var t = this.segments, O = 0, M = (k = h = B = 0);
        B < f;
        B++, h += 3
      ) {
        A = p[B];
        z = n += A;
        if (u) (z %= m), 0 > z && (z += m), (k = 0);
        else if (0 > z) {
          this.addBeforePosition(z, s, 0, r, h);
          continue;
        } else if (z > m) {
          this.addAfterPosition(z - m, s, v - 4, r, h);
          continue;
        }
        for (; ; k++)
          if (((K = e[k]), !(z > K))) {
            0 == k ? (z /= K) : ((D = e[k - 1]), (z = (z - D) / (K - D)));
            break;
          }
        if (k != w) {
          var w = k,
            P = 6 * k,
            x = s[P],
            y = s[P + 1],
            C = s[P + 2],
            E = s[P + 3],
            J = s[P + 4],
            G = s[P + 5],
            F = s[P + 6],
            L = s[P + 7],
            H = 0.03 * (x - 2 * C + J),
            I = 0.03 * (y - 2 * E + G),
            D = 0.006 * (3 * (C - J) - x + F),
            M = 0.006 * (3 * (E - G) - y + L),
            K = 2 * H + D,
            N = 2 * I + M,
            H = 0.3 * (C - x) + H + 0.16666667 * D,
            I = 0.3 * (E - y) + I + 0.16666667 * M,
            O = Math.sqrt(H * H + I * I);
          t[0] = O;
          for (P = 1; 8 > P; P++)
            (H += K),
              (I += N),
              (K += D),
              (N += M),
              (O += Math.sqrt(H * H + I * I)),
              (t[P] = O);
          H += K;
          I += N;
          O += Math.sqrt(H * H + I * I);
          t[8] = O;
          H += K + D;
          I += N + M;
          O += Math.sqrt(H * H + I * I);
          t[9] = O;
          M = 0;
        }
        for (z *= O; ; M++)
          if (((K = t[M]), !(z > K))) {
            0 == M ? (z /= K) : ((D = t[M - 1]), (z = M + (z - D) / (K - D)));
            break;
          }
        this.addCurvePosition(
          0.1 * z,
          x,
          y,
          C,
          E,
          J,
          G,
          F,
          L,
          r,
          h,
          g || (0 < B && 0 == A)
        );
      }
      return r;
    };
    b.prototype.addBeforePosition = function (a, b, d, h, k) {
      var m = b[d],
        n = b[d + 1];
      b = Math.atan2(b[d + 3] - n, b[d + 2] - m);
      h[k] = m + a * Math.cos(b);
      h[k + 1] = n + a * Math.sin(b);
      h[k + 2] = b;
    };
    b.prototype.addAfterPosition = function (a, b, d, h, k) {
      var m = b[d + 2],
        n = b[d + 3];
      b = Math.atan2(n - b[d + 1], m - b[d]);
      h[k] = m + a * Math.cos(b);
      h[k + 1] = n + a * Math.sin(b);
      h[k + 2] = b;
    };
    b.prototype.addCurvePosition = function (
      a,
      b,
      d,
      h,
      k,
      m,
      n,
      p,
      r,
      s,
      u,
      v
    ) {
      if (0 == a || isNaN(a)) a = 1e-4;
      var t = a * a,
        w = t * a,
        x = 1 - a,
        y = x * x,
        B = y * x,
        A = x * a,
        z = 3 * A,
        x = x * z;
      a *= z;
      p = b * B + h * x + m * a + p * w;
      r = d * B + k * x + n * a + r * w;
      s[u] = p;
      s[u + 1] = r;
      v &&
        (s[u + 2] = Math.atan2(
          r - (d * y + k * A * 2 + n * t),
          p - (b * y + h * A * 2 + m * t)
        ));
    };
    b.prototype.getOrder = function () {
      return this.data.order;
    };
    b.NONE = -1;
    b.BEFORE = -2;
    b.AFTER = -3;
    return b;
  })();
  a.PathConstraint = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a) {
      this.order = 0;
      this.bones = [];
      this.name = a;
    };
  })();
  a.PathConstraintData = b;
  (function (a) {
    a[(a.Fixed = 0)] = "Fixed";
    a[(a.Percent = 1)] = "Percent";
  })(a.PositionMode || (a.PositionMode = {}));
  (function (a) {
    a[(a.Length = 0)] = "Length";
    a[(a.Fixed = 1)] = "Fixed";
    a[(a.Percent = 2)] = "Percent";
  })(a.SpacingMode || (a.SpacingMode = {}));
  (function (a) {
    a[(a.Tangent = 0)] = "Tangent";
    a[(a.Chain = 1)] = "Chain";
    a[(a.ChainScale = 2)] = "ChainScale";
  })(a.RotateMode || (a.RotateMode = {}));
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
      function a(b) {
        this.toLoad = [];
        this.assets = {};
        this.clientId = b;
      }
      a.prototype.loaded = function () {
        var a = 0,
          b;
        for (b in this.assets) a++;
        return a;
      };
      return a;
    })(),
    d = (function () {
      function a(b) {
        void 0 === b && (b = "");
        this.clientAssets = {};
        this.queuedAssets = {};
        this.rawAssets = {};
        this.errors = {};
        this.pathPrefix = b;
      }
      a.prototype.queueAsset = function (a, d, e) {
        var k = this.clientAssets[a];
        if (null === k || void 0 === k)
          (k = new b(a)), (this.clientAssets[a] = k);
        null !== d && (k.textureLoader = d);
        k.toLoad.push(e);
        if (this.queuedAssets[e] === e) return !1;
        this.queuedAssets[e] = e;
        return !0;
      };
      a.prototype.loadText = function (a, b) {
        var d = this;
        b = this.pathPrefix + b;
        if (this.queueAsset(a, null, b)) {
          var e = new XMLHttpRequest();
          e.onreadystatechange = function () {
            e.readyState == XMLHttpRequest.DONE &&
              (200 <= e.status && 300 > e.status
                ? (d.rawAssets[b] = e.responseText)
                : (d.errors[b] =
                    "Couldn't load text " +
                    b +
                    ": status " +
                    e.status +
                    ", " +
                    e.responseText));
          };
          e.open("GET", b, !0);
          e.send();
        }
      };
      a.prototype.loadJson = function (a, b) {
        var d = this;
        b = this.pathPrefix + b;
        if (this.queueAsset(a, null, b)) {
          var e = new XMLHttpRequest();
          e.onreadystatechange = function () {
            e.readyState == XMLHttpRequest.DONE &&
              (200 <= e.status && 300 > e.status
                ? (d.rawAssets[b] = JSON.parse(e.responseText))
                : (d.errors[b] =
                    "Couldn't load text " +
                    b +
                    ": status " +
                    e.status +
                    ", " +
                    e.responseText));
          };
          e.open("GET", b, !0);
          e.send();
        }
      };
      a.prototype.loadTexture = function (a, b, d) {
        var e = this;
        d = this.pathPrefix + d;
        if (this.queueAsset(a, b, d)) {
          var m = new Image();
          m.src = d;
          m.crossOrigin = "anonymous";
          m.onload = function (a) {
            e.rawAssets[d] = m;
          };
          m.onerror = function (a) {
            e.errors[d] = "Couldn't load image " + d;
          };
        }
      };
      a.prototype.get = function (a, b) {
        b = this.pathPrefix + b;
        var d = this.clientAssets[a];
        return null === d || void 0 === d ? !0 : d.assets[b];
      };
      a.prototype.updateClientAssets = function (a) {
        for (var b = 0; b < a.toLoad.length; b++) {
          var d = a.toLoad[b],
            e = a.assets[d];
          if (null === e || void 0 === e)
            (e = this.rawAssets[d]),
              null !== e &&
                void 0 !== e &&
                (a.assets[d] =
                  e instanceof HTMLImageElement ? a.textureLoader(e) : e);
        }
      };
      a.prototype.isLoadingComplete = function (a) {
        a = this.clientAssets[a];
        if (null === a || void 0 === a) return !0;
        this.updateClientAssets(a);
        return a.toLoad.length == a.loaded();
      };
      a.prototype.dispose = function () {};
      a.prototype.hasErrors = function () {
        return 0 < Object.keys(this.errors).length;
      };
      a.prototype.getErrors = function () {
        return this.errors;
      };
      return a;
    })();
  a.SharedAssetManager = d;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(d) {
      this._updateCache = [];
      this.updateCacheReset = [];
      this.time = 0;
      this.flipY = this.flipX = !1;
      this.y = this.x = 0;
      if (null == d) throw Error("data cannot be null.");
      this.data = d;
      this.bones = [];
      for (var f = 0; f < d.bones.length; f++) {
        var g = d.bones[f],
          h = void 0;
        if (null == g.parent) h = new a.Bone(g, this, null);
        else {
          var k = this.bones[g.parent.index],
            h = new a.Bone(g, this, k);
          k.children.push(h);
        }
        this.bones.push(h);
      }
      this.slots = [];
      this.drawOrder = [];
      for (f = 0; f < d.slots.length; f++)
        (g = d.slots[f]),
          (h = this.bones[g.boneData.index]),
          (h = new a.Slot(g, h)),
          this.slots.push(h),
          this.drawOrder.push(h);
      this.ikConstraints = [];
      for (f = 0; f < d.ikConstraints.length; f++)
        this.ikConstraints.push(new a.IkConstraint(d.ikConstraints[f], this));
      this.transformConstraints = [];
      for (f = 0; f < d.transformConstraints.length; f++)
        this.transformConstraints.push(
          new a.TransformConstraint(d.transformConstraints[f], this)
        );
      this.pathConstraints = [];
      for (f = 0; f < d.pathConstraints.length; f++)
        this.pathConstraints.push(
          new a.PathConstraint(d.pathConstraints[f], this)
        );
      this.color = new a.Color(1, 1, 1, 1);
      this.updateCache();
    }
    b.prototype.updateCache = function () {
      this._updateCache.length = 0;
      for (var a = this.bones, b = 0, d = a.length; b < d; b++)
        a[b].sorted = !1;
      var d = this.ikConstraints,
        h = this.transformConstraints,
        k = this.pathConstraints,
        m = d.length,
        n = h.length,
        p = k.length,
        r = m + n + p,
        b = 0;
      a: for (; b < r; b++) {
        for (var s = 0; s < m; s++) {
          var u = d[s];
          if (u.data.order == b) {
            this.sortIkConstraint(u);
            continue a;
          }
        }
        for (s = 0; s < n; s++)
          if (((u = h[s]), u.data.order == b)) {
            this.sortTransformConstraint(u);
            continue a;
          }
        for (s = 0; s < p; s++)
          if (((u = k[s]), u.data.order == b)) {
            this.sortPathConstraint(u);
            continue a;
          }
      }
      b = 0;
      for (d = a.length; b < d; b++) this.sortBone(a[b]);
    };
    b.prototype.sortIkConstraint = function (a) {
      this.sortBone(a.target);
      var b = a.bones,
        d = b[0];
      this.sortBone(d);
      if (1 < b.length) {
        var h = b[b.length - 1];
        -1 < this._updateCache.indexOf(h) || this.updateCacheReset.push(h);
      }
      this._updateCache.push(a);
      this.sortReset(d.children);
      b[b.length - 1].sorted = !0;
    };
    b.prototype.sortPathConstraint = function (b) {
      var d = b.target,
        g = d.data.index,
        h = d.bone;
      null != this.skin && this.sortPathConstraintAttachment(this.skin, g, h);
      null != this.data.defaultSkin &&
        this.data.defaultSkin != this.skin &&
        this.sortPathConstraintAttachment(this.data.defaultSkin, g, h);
      for (var k = 0, m = this.data.skins.length; k < m; k++)
        this.sortPathConstraintAttachment(this.data.skins[k], g, h);
      k = d.getAttachment();
      k instanceof a.PathAttachment &&
        this.sortPathConstraintAttachmentWith(k, h);
      h = b.bones;
      d = h.length;
      for (k = 0; k < d; k++) this.sortBone(h[k]);
      this._updateCache.push(b);
      for (k = 0; k < d; k++) this.sortReset(h[k].children);
      for (k = 0; k < d; k++) h[k].sorted = !0;
    };
    b.prototype.sortTransformConstraint = function (a) {
      this.sortBone(a.target);
      for (var b = a.bones, d = b.length, h = 0; h < d; h++)
        this.sortBone(b[h]);
      this._updateCache.push(a);
      for (h = 0; h < d; h++) this.sortReset(b[h].children);
      for (h = 0; h < d; h++) b[h].sorted = !0;
    };
    b.prototype.sortPathConstraintAttachment = function (a, b, d) {
      if ((a = a.attachments[b]))
        for (var h in a) this.sortPathConstraintAttachmentWith(a[h], d);
    };
    b.prototype.sortPathConstraintAttachmentWith = function (b, d) {
      if (b instanceof a.PathAttachment) {
        var g = b.bones;
        if (null == g) this.sortBone(d);
        else
          for (var h = this.bones, k = 0; k < g.length; )
            for (var m = g[k++], m = k + m; k < m; k++) this.sortBone(h[g[k]]);
      }
    };
    b.prototype.sortBone = function (a) {
      if (!a.sorted) {
        var b = a.parent;
        null != b && this.sortBone(b);
        a.sorted = !0;
        this._updateCache.push(a);
      }
    };
    b.prototype.sortReset = function (a) {
      for (var b = 0, d = a.length; b < d; b++) {
        var h = a[b];
        h.sorted && this.sortReset(h.children);
        h.sorted = !1;
      }
    };
    b.prototype.updateWorldTransform = function () {
      for (var a = this.updateCacheReset, b = 0, d = a.length; b < d; b++) {
        var h = a[b];
        h.ax = h.x;
        h.ay = h.y;
        h.arotation = h.rotation;
        h.ascaleX = h.scaleX;
        h.ascaleY = h.scaleY;
        h.ashearX = h.shearX;
        h.ashearY = h.shearY;
        h.appliedValid = !0;
      }
      a = this._updateCache;
      b = 0;
      for (d = a.length; b < d; b++) a[b].update();
    };
    b.prototype.setToSetupPose = function () {
      this.setBonesToSetupPose();
      this.setSlotsToSetupPose();
    };
    b.prototype.setBonesToSetupPose = function () {
      for (var a = this.bones, b = 0, d = a.length; b < d; b++)
        a[b].setToSetupPose();
      for (var h = this.ikConstraints, b = 0, d = h.length; b < d; b++)
        (a = h[b]),
          (a.bendDirection = a.data.bendDirection),
          (a.mix = a.data.mix);
      for (var k = this.transformConstraints, b = 0, d = k.length; b < d; b++)
        (a = k[b]),
          (h = a.data),
          (a.rotateMix = h.rotateMix),
          (a.translateMix = h.translateMix),
          (a.scaleMix = h.scaleMix),
          (a.shearMix = h.shearMix);
      k = this.pathConstraints;
      b = 0;
      for (d = k.length; b < d; b++)
        (a = k[b]),
          (h = a.data),
          (a.position = h.position),
          (a.spacing = h.spacing),
          (a.rotateMix = h.rotateMix),
          (a.translateMix = h.translateMix);
    };
    b.prototype.setSlotsToSetupPose = function () {
      var b = this.slots;
      a.Utils.arrayCopy(b, 0, this.drawOrder, 0, b.length);
      for (var d = 0, g = b.length; d < g; d++) b[d].setToSetupPose();
    };
    b.prototype.getRootBone = function () {
      return 0 == this.bones.length ? null : this.bones[0];
    };
    b.prototype.findBone = function (a) {
      if (null == a) throw Error("boneName cannot be null.");
      for (var b = this.bones, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.data.name == a) return k;
      }
      return null;
    };
    b.prototype.findBoneIndex = function (a) {
      if (null == a) throw Error("boneName cannot be null.");
      for (var b = this.bones, d = 0, h = b.length; d < h; d++)
        if (b[d].data.name == a) return d;
      return -1;
    };
    b.prototype.findSlot = function (a) {
      if (null == a) throw Error("slotName cannot be null.");
      for (var b = this.slots, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.data.name == a) return k;
      }
      return null;
    };
    b.prototype.findSlotIndex = function (a) {
      if (null == a) throw Error("slotName cannot be null.");
      for (var b = this.slots, d = 0, h = b.length; d < h; d++)
        if (b[d].data.name == a) return d;
      return -1;
    };
    b.prototype.setSkinByName = function (a) {
      var b = this.data.findSkin(a);
      if (null == b) throw Error("Skin not found: " + a);
      this.setSkin(b);
    };
    b.prototype.setSkin = function (a) {
      if (null != a)
        if (null != this.skin) a.attachAll(this, this.skin);
        else
          for (var b = this.slots, d = 0, h = b.length; d < h; d++) {
            var k = b[d],
              m = k.data.attachmentName;
            null != m &&
              ((m = a.getAttachment(d, m)), null != m && k.setAttachment(m));
          }
      this.skin = a;
    };
    b.prototype.getAttachmentByName = function (a, b) {
      return this.getAttachment(this.data.findSlotIndex(a), b);
    };
    b.prototype.getAttachment = function (a, b) {
      if (null == b) throw Error("attachmentName cannot be null.");
      if (null != this.skin) {
        var d = this.skin.getAttachment(a, b);
        if (null != d) return d;
      }
      return null != this.data.defaultSkin
        ? this.data.defaultSkin.getAttachment(a, b)
        : null;
    };
    b.prototype.setAttachment = function (a, b) {
      if (null == a) throw Error("slotName cannot be null.");
      for (var d = this.slots, h = 0, k = d.length; h < k; h++) {
        var m = d[h];
        if (m.data.name == a) {
          d = null;
          if (null != b && ((d = this.getAttachment(h, b)), null == d))
            throw Error("Attachment not found: " + b + ", for slot: " + a);
          m.setAttachment(d);
          return;
        }
      }
      throw Error("Slot not found: " + a);
    };
    b.prototype.findIkConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.ikConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.data.name == a) return k;
      }
      return null;
    };
    b.prototype.findTransformConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.transformConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.data.name == a) return k;
      }
      return null;
    };
    b.prototype.findPathConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.pathConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.data.name == a) return k;
      }
      return null;
    };
    b.prototype.getBounds = function (b, d) {
      if (null == b) throw Error("offset cannot be null.");
      if (null == d) throw Error("size cannot be null.");
      for (
        var g = this.drawOrder,
          h = Number.POSITIVE_INFINITY,
          k = Number.POSITIVE_INFINITY,
          m = Number.NEGATIVE_INFINITY,
          n = Number.NEGATIVE_INFINITY,
          p = 0,
          r = g.length;
        p < r;
        p++
      ) {
        var s = g[p],
          u = null,
          v = s.getAttachment();
        v instanceof a.RegionAttachment
          ? (u = v.updateWorldVertices(s, !1))
          : v instanceof a.MeshAttachment && (u = v.updateWorldVertices(s, !0));
        if (null != u)
          for (s = 0, v = u.length; s < v; s += 8)
            var t = u[s],
              w = u[s + 1],
              h = Math.min(h, t),
              k = Math.min(k, w),
              m = Math.max(m, t),
              n = Math.max(n, w);
      }
      b.set(h, k);
      d.set(m - h, n - k);
    };
    b.prototype.update = function (a) {
      this.time += a;
    };
    return b;
  })();
  a.Skeleton = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b() {
      this.maxY = this.maxX = this.minY = this.minX = 0;
      this.boundingBoxes = [];
      this.polygons = [];
      this.polygonPool = new a.Pool(function () {
        return a.Utils.newFloatArray(16);
      });
    }
    b.prototype.update = function (b, d) {
      if (null == b) throw Error("skeleton cannot be null.");
      var g = this.boundingBoxes,
        h = this.polygons,
        k = this.polygonPool,
        m = b.slots,
        n = m.length;
      g.length = 0;
      k.freeAll(h);
      for (var p = (h.length = 0); p < n; p++) {
        var r = m[p],
          s = r.getAttachment();
        if (s instanceof a.BoundingBoxAttachment) {
          g.push(s);
          var u = k.obtain();
          u.length != s.worldVerticesLength &&
            (u = a.Utils.newFloatArray(s.worldVerticesLength));
          h.push(u);
          s.computeWorldVertices(r, u);
        }
      }
      d
        ? this.aabbCompute()
        : ((this.minY = this.minX = Number.POSITIVE_INFINITY),
          (this.maxY = this.maxX = Number.NEGATIVE_INFINITY));
    };
    b.prototype.aabbCompute = function () {
      for (
        var a = Number.POSITIVE_INFINITY,
          b = Number.POSITIVE_INFINITY,
          d = Number.NEGATIVE_INFINITY,
          h = Number.NEGATIVE_INFINITY,
          k = this.polygons,
          m = 0,
          n = k.length;
        m < n;
        m++
      )
        for (var p = k[m], r = p, s = 0, p = p.length; s < p; s += 2)
          var u = r[s],
            v = r[s + 1],
            a = Math.min(a, u),
            b = Math.min(b, v),
            d = Math.max(d, u),
            h = Math.max(h, v);
      this.minX = a;
      this.minY = b;
      this.maxX = d;
      this.maxY = h;
    };
    b.prototype.aabbContainsPoint = function (a, b) {
      return (
        a >= this.minX && a <= this.maxX && b >= this.minY && b <= this.maxY
      );
    };
    b.prototype.aabbIntersectsSegment = function (a, b, d, h) {
      var k = this.minX,
        m = this.minY,
        n = this.maxX,
        p = this.maxY;
      if (
        (a <= k && d <= k) ||
        (b <= m && h <= m) ||
        (a >= n && d >= n) ||
        (b >= p && h >= p)
      )
        return !1;
      d = (h - b) / (d - a);
      h = d * (k - a) + b;
      if (h > m && h < p) return !0;
      h = d * (n - a) + b;
      if (h > m && h < p) return !0;
      m = (m - b) / d + a;
      if (m > k && m < n) return !0;
      m = (p - b) / d + a;
      return m > k && m < n ? !0 : !1;
    };
    b.prototype.aabbIntersectsSkeleton = function (a) {
      return (
        this.minX < a.maxX &&
        this.maxX > a.minX &&
        this.minY < a.maxY &&
        this.maxY > a.minY
      );
    };
    b.prototype.containsPoint = function (a, b) {
      for (var d = this.polygons, h = 0, k = d.length; h < k; h++)
        if (this.containsPointPolygon(d[h], a, b)) return this.boundingBoxes[h];
      return null;
    };
    b.prototype.containsPointPolygon = function (a, b, d) {
      for (var h = a.length, k = h - 2, m = !1, n = 0; n < h; n += 2) {
        var p = a[n + 1],
          r = a[k + 1];
        if ((p < d && r >= d) || (r < d && p >= d)) {
          var s = a[n];
          s + ((d - p) / (r - p)) * (a[k] - s) < b && (m = !m);
        }
        k = n;
      }
      return m;
    };
    b.prototype.intersectsSegment = function (a, b, d, h) {
      for (var k = this.polygons, m = 0, n = k.length; m < n; m++)
        if (this.intersectsSegmentPolygon(k[m], a, b, d, h))
          return this.boundingBoxes[m];
      return null;
    };
    b.prototype.intersectsSegmentPolygon = function (a, b, d, h, k) {
      for (
        var m = a.length,
          n = b - h,
          p = d - k,
          r = b * k - d * h,
          s = a[m - 2],
          u = a[m - 1],
          v = 0;
        v < m;
        v += 2
      ) {
        var t = a[v],
          w = a[v + 1],
          x = s * w - u * t,
          y = s - t,
          B = u - w,
          A = n * B - p * y,
          y = (r * y - n * x) / A;
        if (
          ((y >= s && y <= t) || (y >= t && y <= s)) &&
          ((y >= b && y <= h) || (y >= h && y <= b)) &&
          ((s = (r * B - p * x) / A),
          ((s >= u && s <= w) || (s >= w && s <= u)) &&
            ((s >= d && s <= k) || (s >= k && s <= d)))
        )
          return !0;
        s = t;
        u = w;
      }
      return !1;
    };
    b.prototype.getPolygon = function (a) {
      if (null == a) throw Error("boundingBox cannot be null.");
      a = this.boundingBoxes.indexOf(a);
      return -1 == a ? null : this.polygons[a];
    };
    b.prototype.getWidth = function () {
      return this.maxX - this.minX;
    };
    b.prototype.getHeight = function () {
      return this.maxY - this.minY;
    };
    return b;
  })();
  a.SkeletonBounds = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a() {
      this.bones = [];
      this.slots = [];
      this.skins = [];
      this.events = [];
      this.animations = [];
      this.ikConstraints = [];
      this.transformConstraints = [];
      this.pathConstraints = [];
      this.fps = 0;
    }
    a.prototype.findBone = function (a) {
      if (null == a) throw Error("boneName cannot be null.");
      for (var b = this.bones, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findBoneIndex = function (a) {
      if (null == a) throw Error("boneName cannot be null.");
      for (var b = this.bones, d = 0, h = b.length; d < h; d++)
        if (b[d].name == a) return d;
      return -1;
    };
    a.prototype.findSlot = function (a) {
      if (null == a) throw Error("slotName cannot be null.");
      for (var b = this.slots, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findSlotIndex = function (a) {
      if (null == a) throw Error("slotName cannot be null.");
      for (var b = this.slots, d = 0, h = b.length; d < h; d++)
        if (b[d].name == a) return d;
      return -1;
    };
    a.prototype.findSkin = function (a) {
      if (null == a) throw Error("skinName cannot be null.");
      for (var b = this.skins, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findEvent = function (a) {
      if (null == a) throw Error("eventDataName cannot be null.");
      for (var b = this.events, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findAnimation = function (a) {
      if (null == a) throw Error("animationName cannot be null.");
      for (var b = this.animations, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findIkConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.ikConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findTransformConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.transformConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findPathConstraint = function (a) {
      if (null == a) throw Error("constraintName cannot be null.");
      for (var b = this.pathConstraints, d = 0, h = b.length; d < h; d++) {
        var k = b[d];
        if (k.name == a) return k;
      }
      return null;
    };
    a.prototype.findPathConstraintIndex = function (a) {
      if (null == a) throw Error("pathConstraintName cannot be null.");
      for (var b = this.pathConstraints, d = 0, h = b.length; d < h; d++)
        if (b[d].name == a) return d;
      return -1;
    };
    return a;
  })();
  a.SkeletonData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a) {
      this.scale = 1;
      this.linkedMeshes = [];
      this.attachmentLoader = a;
    }
    b.prototype.readSkeletonData = function (d) {
      var g = this.scale,
        h = new a.SkeletonData();
      d = "string" === typeof d ? JSON.parse(d) : d;
      var k = d.skeleton;
      null != k &&
        ((h.hash = k.hash),
        (h.version = k.spine),
        (h.width = k.width),
        (h.height = k.height),
        (h.fps = k.fps),
        (h.imagesPath = k.images));
      if (d.bones)
        for (k = 0; k < d.bones.length; k++) {
          var m = d.bones[k],
            n = null,
            p = this.getValue(m, "parent", null);
          if (null != p && ((n = h.findBone(p)), null == n))
            throw Error("Parent bone not found: " + p);
          n = new a.BoneData(h.bones.length, m.name, n);
          n.length = this.getValue(m, "length", 0) * g;
          n.x = this.getValue(m, "x", 0) * g;
          n.y = this.getValue(m, "y", 0) * g;
          n.rotation = this.getValue(m, "rotation", 0);
          n.scaleX = this.getValue(m, "scaleX", 1);
          n.scaleY = this.getValue(m, "scaleY", 1);
          n.shearX = this.getValue(m, "shearX", 0);
          n.shearY = this.getValue(m, "shearY", 0);
          n.transformMode = b.transformModeFromString(
            this.getValue(m, "transform", "normal")
          );
          h.bones.push(n);
        }
      if (d.slots)
        for (k = 0; k < d.slots.length; k++) {
          var m = d.slots[k],
            r = m.name,
            p = m.bone,
            n = h.findBone(p);
          if (null == n) throw Error("Slot bone not found: " + p);
          n = new a.SlotData(h.slots.length, r, n);
          p = this.getValue(m, "color", null);
          null != p && n.color.setFromString(p);
          n.attachmentName = this.getValue(m, "attachment", null);
          n.blendMode = b.blendModeFromString(
            this.getValue(m, "blend", "normal")
          );
          h.slots.push(n);
        }
      if (d.ik)
        for (k = 0; k < d.ik.length; k++) {
          m = d.ik[k];
          n = new a.IkConstraintData(m.name);
          n.order = this.getValue(m, "order", 0);
          for (var s = 0; s < m.bones.length; s++) {
            var p = m.bones[s],
              u = h.findBone(p);
            if (null == u) throw Error("IK bone not found: " + p);
            n.bones.push(u);
          }
          p = m.target;
          n.target = h.findBone(p);
          if (null == n.target) throw Error("IK target bone not found: " + p);
          n.bendDirection = this.getValue(m, "bendPositive", !0) ? 1 : -1;
          n.mix = this.getValue(m, "mix", 1);
          h.ikConstraints.push(n);
        }
      if (d.transform)
        for (k = 0; k < d.transform.length; k++) {
          m = d.transform[k];
          n = new a.TransformConstraintData(m.name);
          n.order = this.getValue(m, "order", 0);
          for (s = 0; s < m.bones.length; s++) {
            p = m.bones[s];
            u = h.findBone(p);
            if (null == u)
              throw Error("Transform constraint bone not found: " + p);
            n.bones.push(u);
          }
          p = m.target;
          n.target = h.findBone(p);
          if (null == n.target)
            throw Error("Transform constraint target bone not found: " + p);
          n.offsetRotation = this.getValue(m, "rotation", 0);
          n.offsetX = this.getValue(m, "x", 0) * g;
          n.offsetY = this.getValue(m, "y", 0) * g;
          n.offsetScaleX = this.getValue(m, "scaleX", 0);
          n.offsetScaleY = this.getValue(m, "scaleY", 0);
          n.offsetShearY = this.getValue(m, "shearY", 0);
          n.rotateMix = this.getValue(m, "rotateMix", 1);
          n.translateMix = this.getValue(m, "translateMix", 1);
          n.scaleMix = this.getValue(m, "scaleMix", 1);
          n.shearMix = this.getValue(m, "shearMix", 1);
          h.transformConstraints.push(n);
        }
      if (d.path)
        for (k = 0; k < d.path.length; k++) {
          m = d.path[k];
          n = new a.PathConstraintData(m.name);
          n.order = this.getValue(m, "order", 0);
          for (s = 0; s < m.bones.length; s++) {
            p = m.bones[s];
            u = h.findBone(p);
            if (null == u)
              throw Error("Transform constraint bone not found: " + p);
            n.bones.push(u);
          }
          p = m.target;
          n.target = h.findSlot(p);
          if (null == n.target) throw Error("Path target slot not found: " + p);
          n.positionMode = b.positionModeFromString(
            this.getValue(m, "positionMode", "percent")
          );
          n.spacingMode = b.spacingModeFromString(
            this.getValue(m, "spacingMode", "length")
          );
          n.rotateMode = b.rotateModeFromString(
            this.getValue(m, "rotateMode", "tangent")
          );
          n.offsetRotation = this.getValue(m, "rotation", 0);
          n.position = this.getValue(m, "position", 0);
          n.positionMode == a.PositionMode.Fixed && (n.position *= g);
          n.spacing = this.getValue(m, "spacing", 0);
          if (
            n.spacingMode == a.SpacingMode.Length ||
            n.spacingMode == a.SpacingMode.Fixed
          )
            n.spacing *= g;
          n.rotateMix = this.getValue(m, "rotateMix", 1);
          n.translateMix = this.getValue(m, "translateMix", 1);
          h.pathConstraints.push(n);
        }
      if (d.skins)
        for (var v in d.skins) {
          k = d.skins[v];
          g = new a.Skin(v);
          for (r in k) {
            n = h.findSlotIndex(r);
            if (-1 == n) throw Error("Slot not found: " + r);
            var m = k[r],
              t;
            for (t in m)
              (p = this.readAttachment(m[t], g, n, t)),
                null != p && g.addAttachment(n, t, p);
          }
          h.skins.push(g);
          "default" == g.name && (h.defaultSkin = g);
        }
      k = 0;
      for (r = this.linkedMeshes.length; k < r; k++) {
        v = this.linkedMeshes[k];
        g = null == v.skin ? h.defaultSkin : h.findSkin(v.skin);
        if (null == g) throw Error("Skin not found: " + v.skin);
        t = g.getAttachment(v.slotIndex, v.parent);
        if (null == t) throw Error("Parent mesh not found: " + v.parent);
        v.mesh.setParentMesh(t);
        v.mesh.updateUVs();
      }
      this.linkedMeshes.length = 0;
      if (d.events)
        for (var w in d.events)
          (r = d.events[w]),
            (n = new a.EventData(w)),
            (n.intValue = this.getValue(r, "int", 0)),
            (n.floatValue = this.getValue(r, "float", 0)),
            (n.stringValue = this.getValue(r, "string", "")),
            h.events.push(n);
      if (d.animations)
        for (var x in d.animations) this.readAnimation(d.animations[x], x, h);
      return h;
    };
    b.prototype.readAttachment = function (b, e, h, k) {
      var m = this.scale;
      k = this.getValue(b, "name", k);
      switch (this.getValue(b, "type", "region")) {
        case "region":
          var n = this.getValue(b, "path", k);
          h = this.attachmentLoader.newRegionAttachment(e, k, n);
          if (null == h) break;
          h.path = n;
          h.x = this.getValue(b, "x", 0) * m;
          h.y = this.getValue(b, "y", 0) * m;
          h.scaleX = this.getValue(b, "scaleX", 1);
          h.scaleY = this.getValue(b, "scaleY", 1);
          h.rotation = this.getValue(b, "rotation", 0);
          h.width = b.width * m;
          h.height = b.height * m;
          m = this.getValue(b, "color", null);
          null != m && h.color.setFromString(m);
          h.updateOffset();
          return h;
        case "boundingbox":
          n = this.attachmentLoader.newBoundingBoxAttachment(e, k);
          if (null == n) break;
          this.readVertices(b, n, b.vertexCount << 1);
          m = this.getValue(b, "color", null);
          null != m && n.color.setFromString(m);
          return n;
        case "mesh":
        case "linkedmesh":
          n = this.getValue(b, "path", k);
          e = this.attachmentLoader.newMeshAttachment(e, k, n);
          if (null == e) break;
          e.path = n;
          m = this.getValue(b, "color", null);
          null != m && e.color.setFromString(m);
          n = this.getValue(b, "parent", null);
          if (null != n)
            return (
              (e.inheritDeform = this.getValue(b, "deform", !0)),
              this.linkedMeshes.push(
                new d(e, this.getValue(b, "skin", null), h, n)
              ),
              e
            );
          n = b.uvs;
          this.readVertices(b, e, n.length);
          e.triangles = b.triangles;
          e.regionUVs = n;
          e.updateUVs();
          e.hullLength = 2 * this.getValue(b, "hull", 0);
          return e;
        case "path":
          n = this.attachmentLoader.newPathAttachment(e, k);
          if (null == n) break;
          n.closed = this.getValue(b, "closed", !1);
          n.constantSpeed = this.getValue(b, "constantSpeed", !0);
          h = b.vertexCount;
          this.readVertices(b, n, h << 1);
          h = a.Utils.newArray(h / 3, 0);
          for (e = 0; e < b.lengths.length; e++) h[e++] = b.lengths[e] * m;
          n.lengths = h;
          m = this.getValue(b, "color", null);
          null != m && n.color.setFromString(m);
          return n;
      }
      return null;
    };
    b.prototype.readVertices = function (b, d, e) {
      var k = this.scale;
      d.worldVerticesLength = e;
      b = b.vertices;
      var m = a.Utils.toFloatArray(b);
      if (e == m.length) {
        if (1 != k) {
          e = 0;
          for (var n = b.length; e < n; e++) m[e] *= k;
        }
        d.vertices = m;
      } else {
        var m = [],
          p = [];
        e = 0;
        for (n = b.length; e < n; ) {
          var r = b[e++];
          p.push(r);
          for (r = e + 4 * r; e < r; e += 4)
            p.push(b[e]),
              m.push(b[e + 1] * k),
              m.push(b[e + 2] * k),
              m.push(b[e + 3]);
        }
        d.bones = p;
        d.vertices = a.Utils.toFloatArray(m);
      }
    };
    b.prototype.readAnimation = function (b, d, e) {
      var k = this.scale,
        m = [],
        n = 0;
      if (b.slots)
        for (var p in b.slots) {
          var r = b.slots[p],
            s = e.findSlotIndex(p);
          if (-1 == s) throw Error("Slot not found: " + p);
          for (var u in r) {
            var v = r[u];
            if ("color" == u) {
              var t = new a.ColorTimeline(v.length);
              t.slotIndex = s;
              for (var w = 0, x = 0; x < v.length; x++) {
                var y = v[x],
                  B = new a.Color();
                B.setFromString(y.color);
                t.setFrame(w, y.time, B.r, B.g, B.b, B.a);
                this.readCurve(y, t, w);
                w++;
              }
              m.push(t);
              n = Math.max(
                n,
                t.frames[(t.getFrameCount() - 1) * a.ColorTimeline.ENTRIES]
              );
            } else {
              u = "attachment";
              t = new a.AttachmentTimeline(v.length);
              t.slotIndex = s;
              for (x = w = 0; x < v.length; x++)
                (y = v[x]), t.setFrame(w++, y.time, y.name);
              m.push(t);
              n = Math.max(n, t.frames[t.getFrameCount() - 1]);
            }
          }
        }
      if (b.bones)
        for (var A in b.bones) {
          r = b.bones[A];
          B = e.findBoneIndex(A);
          if (-1 == B) throw Error("Bone not found: " + A);
          for (u in r)
            if (((v = r[u]), "rotate" === u)) {
              t = new a.RotateTimeline(v.length);
              t.boneIndex = B;
              for (x = w = 0; x < v.length; x++)
                (y = v[x]),
                  t.setFrame(w, y.time, y.angle),
                  this.readCurve(y, t, w),
                  w++;
              m.push(t);
              n = Math.max(
                n,
                t.frames[(t.getFrameCount() - 1) * a.RotateTimeline.ENTRIES]
              );
            } else if ("translate" === u || "scale" === u || "shear" === u) {
              s = 1;
              "scale" === u
                ? (t = new a.ScaleTimeline(v.length))
                : "shear" === u
                ? (t = new a.ShearTimeline(v.length))
                : ((t = new a.TranslateTimeline(v.length)), (s = k));
              t.boneIndex = B;
              for (x = w = 0; x < v.length; x++) {
                var y = v[x],
                  z = this.getValue(y, "x", 0),
                  C = this.getValue(y, "y", 0);
                t.setFrame(w, y.time, z * s, C * s);
                this.readCurve(y, t, w);
                w++;
              }
              m.push(t);
              n = Math.max(
                n,
                t.frames[(t.getFrameCount() - 1) * a.TranslateTimeline.ENTRIES]
              );
            } else
              throw Error(
                "Invalid timeline type for a bone: " + u + " (" + A + ")"
              );
        }
      if (b.ik)
        for (var D in b.ik) {
          r = b.ik[D];
          w = e.findIkConstraint(D);
          t = new a.IkConstraintTimeline(r.length);
          t.ikConstraintIndex = e.ikConstraints.indexOf(w);
          for (x = w = 0; x < r.length; x++)
            (y = r[x]),
              t.setFrame(
                w,
                y.time,
                this.getValue(y, "mix", 1),
                this.getValue(y, "bendPositive", !0) ? 1 : -1
              ),
              this.readCurve(y, t, w),
              w++;
          m.push(t);
          n = Math.max(
            n,
            t.frames[(t.getFrameCount() - 1) * a.IkConstraintTimeline.ENTRIES]
          );
        }
      if (b.transform)
        for (D in b.transform) {
          r = b.transform[D];
          w = e.findTransformConstraint(D);
          t = new a.TransformConstraintTimeline(r.length);
          t.transformConstraintIndex = e.transformConstraints.indexOf(w);
          for (x = w = 0; x < r.length; x++)
            (y = r[x]),
              t.setFrame(
                w,
                y.time,
                this.getValue(y, "rotateMix", 1),
                this.getValue(y, "translateMix", 1),
                this.getValue(y, "scaleMix", 1),
                this.getValue(y, "shearMix", 1)
              ),
              this.readCurve(y, t, w),
              w++;
          m.push(t);
          n = Math.max(
            n,
            t.frames[
              (t.getFrameCount() - 1) * a.TransformConstraintTimeline.ENTRIES
            ]
          );
        }
      if (b.paths)
        for (D in b.paths) {
          r = b.paths[D];
          A = e.findPathConstraintIndex(D);
          if (-1 == A) throw Error("Path constraint not found: " + D);
          B = e.pathConstraints[A];
          for (u in r)
            if (((v = r[u]), "position" === u || "spacing" === u)) {
              s = 1;
              if ("spacing" === u) {
                if (
                  ((t = new a.PathConstraintSpacingTimeline(v.length)),
                  B.spacingMode == a.SpacingMode.Length ||
                    B.spacingMode == a.SpacingMode.Fixed)
                )
                  s = k;
              } else
                (t = new a.PathConstraintPositionTimeline(v.length)),
                  B.positionMode == a.PositionMode.Fixed && (s = k);
              t.pathConstraintIndex = A;
              for (x = w = 0; x < v.length; x++)
                (y = v[x]),
                  t.setFrame(w, y.time, this.getValue(y, u, 0) * s),
                  this.readCurve(y, t, w),
                  w++;
              m.push(t);
              n = Math.max(
                n,
                t.frames[
                  (t.getFrameCount() - 1) *
                    a.PathConstraintPositionTimeline.ENTRIES
                ]
              );
            } else if ("mix" === u) {
              t = new a.PathConstraintMixTimeline(v.length);
              t.pathConstraintIndex = A;
              for (x = w = 0; x < v.length; x++)
                (y = v[x]),
                  t.setFrame(
                    w,
                    y.time,
                    this.getValue(y, "rotateMix", 1),
                    this.getValue(y, "translateMix", 1)
                  ),
                  this.readCurve(y, t, w),
                  w++;
              m.push(t);
              n = Math.max(
                n,
                t.frames[
                  (t.getFrameCount() - 1) * a.PathConstraintMixTimeline.ENTRIES
                ]
              );
            }
        }
      if (b.deform)
        for (var E in b.deform) {
          A = b.deform[E];
          B = e.findSkin(E);
          if (null == B) throw Error("Skin not found: " + E);
          for (p in A) {
            r = A[p];
            s = e.findSlotIndex(p);
            if (-1 == s) throw Error("Slot not found: " + r.name);
            for (u in r) {
              v = r[u];
              w = B.getAttachment(s, u);
              if (null == w)
                throw Error("Deform attachment not found: " + v.name);
              var z = null != w.bones,
                C = w.vertices,
                J = z ? (C.length / 3) * 2 : C.length,
                t = new a.DeformTimeline(v.length);
              t.slotIndex = s;
              t.attachment = w;
              for (D = w = 0; D < v.length; D++) {
                var y = v[D],
                  G = void 0,
                  F = this.getValue(y, "vertices", null);
                if (null == F) G = z ? a.Utils.newFloatArray(J) : C;
                else {
                  G = a.Utils.newFloatArray(J);
                  x = this.getValue(y, "offset", 0);
                  a.Utils.arrayCopy(F, 0, G, x, F.length);
                  if (1 != k) for (F = x + F.length; x < F; x++) G[x] *= k;
                  if (!z) for (x = 0; x < J; x++) G[x] += C[x];
                }
                t.setFrame(w, y.time, G);
                this.readCurve(y, t, w);
                w++;
              }
              m.push(t);
              n = Math.max(n, t.frames[t.getFrameCount() - 1]);
            }
          }
        }
      k = b.drawOrder;
      null == k && (k = b.draworder);
      if (null != k) {
        t = new a.DrawOrderTimeline(k.length);
        p = e.slots.length;
        for (D = w = 0; D < k.length; D++) {
          u = k[D];
          E = null;
          v = this.getValue(u, "offsets", null);
          if (null != v) {
            E = a.Utils.newArray(p, -1);
            y = a.Utils.newArray(p - v.length, 0);
            for (x = A = r = 0; x < v.length; x++) {
              B = v[x];
              s = e.findSlotIndex(B.slot);
              if (-1 == s) throw Error("Slot not found: " + B.slot);
              for (; r != s; ) y[A++] = r++;
              E[r + B.offset] = r++;
            }
            for (; r < p; ) y[A++] = r++;
            for (x = p - 1; 0 <= x; x--) -1 == E[x] && (E[x] = y[--A]);
          }
          t.setFrame(w++, u.time, E);
        }
        m.push(t);
        n = Math.max(n, t.frames[t.getFrameCount() - 1]);
      }
      if (b.events) {
        t = new a.EventTimeline(b.events.length);
        for (x = w = 0; x < b.events.length; x++) {
          k = b.events[x];
          p = e.findEvent(k.name);
          if (null == p) throw Error("Event not found: " + k.name);
          s = new a.Event(k.time, p);
          s.intValue = this.getValue(k, "int", p.intValue);
          s.floatValue = this.getValue(k, "float", p.floatValue);
          s.stringValue = this.getValue(k, "string", p.stringValue);
          t.setFrame(w++, s);
        }
        m.push(t);
        n = Math.max(n, t.frames[t.getFrameCount() - 1]);
      }
      if (isNaN(n))
        throw Error("Error while parsing animation, duration is NaN");
      e.animations.push(new a.Animation(d, m, n));
    };
    b.prototype.readCurve = function (a, b, d) {
      a.curve &&
        ("stepped" === a.curve
          ? b.setStepped(d)
          : "[object Array]" === Object.prototype.toString.call(a.curve) &&
            ((a = a.curve), b.setCurve(d, a[0], a[1], a[2], a[3])));
    };
    b.prototype.getValue = function (a, b, d) {
      return void 0 !== a[b] ? a[b] : d;
    };
    b.blendModeFromString = function (b) {
      b = b.toLowerCase();
      if ("normal" == b) return a.BlendMode.Normal;
      if ("additive" == b) return a.BlendMode.Additive;
      if ("multiply" == b) return a.BlendMode.Multiply;
      if ("screen" == b) return a.BlendMode.Screen;
      throw Error("Unknown blend mode: " + b);
    };
    b.positionModeFromString = function (b) {
      b = b.toLowerCase();
      if ("fixed" == b) return a.PositionMode.Fixed;
      if ("percent" == b) return a.PositionMode.Percent;
      throw Error("Unknown position mode: " + b);
    };
    b.spacingModeFromString = function (b) {
      b = b.toLowerCase();
      if ("length" == b) return a.SpacingMode.Length;
      if ("fixed" == b) return a.SpacingMode.Fixed;
      if ("percent" == b) return a.SpacingMode.Percent;
      throw Error("Unknown position mode: " + b);
    };
    b.rotateModeFromString = function (b) {
      b = b.toLowerCase();
      if ("tangent" == b) return a.RotateMode.Tangent;
      if ("chain" == b) return a.RotateMode.Chain;
      if ("chainscale" == b) return a.RotateMode.ChainScale;
      throw Error("Unknown rotate mode: " + b);
    };
    b.transformModeFromString = function (b) {
      b = b.toLowerCase();
      if ("normal" == b) return a.TransformMode.Normal;
      if ("onlytranslation" == b) return a.TransformMode.OnlyTranslation;
      if ("norotationorreflection" == b)
        return a.TransformMode.NoRotationOrReflection;
      if ("noscale" == b) return a.TransformMode.NoScale;
      if ("noscaleorreflection" == b)
        return a.TransformMode.NoScaleOrReflection;
      throw Error("Unknown transform mode: " + b);
    };
    return b;
  })();
  a.SkeletonJson = b;
  var d = (function () {
    return function (a, b, d, h) {
      this.mesh = a;
      this.skin = b;
      this.slotIndex = d;
      this.parent = h;
    };
  })();
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a(b) {
      this.attachments = [];
      if (null == b) throw Error("name cannot be null.");
      this.name = b;
    }
    a.prototype.addAttachment = function (a, b, d) {
      if (null == d) throw Error("attachment cannot be null.");
      var h = this.attachments;
      a >= h.length && (h.length = a + 1);
      h[a] || (h[a] = {});
      h[a][b] = d;
    };
    a.prototype.getAttachment = function (a, b) {
      var d = this.attachments[a];
      return d ? d[b] : null;
    };
    a.prototype.attachAll = function (a, b) {
      for (var d = 0, h = 0; h < a.slots.length; h++) {
        var k = a.slots[h],
          m = k.getAttachment();
        if (m && d < b.attachments.length) {
          var n = b.attachments[d],
            p;
          for (p in n)
            if (m == n[p]) {
              m = this.getAttachment(d, p);
              null != m && k.setAttachment(m);
              break;
            }
        }
        d++;
      }
    };
    return a;
  })();
  a.Skin = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(d, f) {
      this.attachmentVertices = [];
      if (null == d) throw Error("data cannot be null.");
      if (null == f) throw Error("bone cannot be null.");
      this.data = d;
      this.bone = f;
      this.color = new a.Color();
      this.setToSetupPose();
    }
    b.prototype.getAttachment = function () {
      return this.attachment;
    };
    b.prototype.setAttachment = function (a) {
      this.attachment != a &&
        ((this.attachment = a),
        (this.attachmentTime = this.bone.skeleton.time),
        (this.attachmentVertices.length = 0));
    };
    b.prototype.setAttachmentTime = function (a) {
      this.attachmentTime = this.bone.skeleton.time - a;
    };
    b.prototype.getAttachmentTime = function () {
      return this.bone.skeleton.time - this.attachmentTime;
    };
    b.prototype.setToSetupPose = function () {
      this.color.setFromColor(this.data.color);
      null == this.data.attachmentName
        ? (this.attachment = null)
        : ((this.attachment = null),
          this.setAttachment(
            this.bone.skeleton.getAttachment(
              this.data.index,
              this.data.attachmentName
            )
          ));
    };
    return b;
  })();
  a.Slot = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (b, e, f) {
      this.color = new a.Color(1, 1, 1, 1);
      if (0 > b) throw Error("index must be \x3e\x3d 0.");
      if (null == e) throw Error("name cannot be null.");
      if (null == f) throw Error("boneData cannot be null.");
      this.index = b;
      this.name = e;
      this.boneData = f;
    };
  })();
  a.SlotData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a(b) {
      this._image = b;
    }
    a.prototype.getImage = function () {
      return this._image;
    };
    a.filterFromString = function (a) {
      switch (a.toLowerCase()) {
        case "nearest":
          return d.Nearest;
        case "linear":
          return d.Linear;
        case "mipmap":
          return d.MipMap;
        case "mipmapnearestnearest":
          return d.MipMapNearestNearest;
        case "mipmaplinearnearest":
          return d.MipMapLinearNearest;
        case "mipmapnearestlinear":
          return d.MipMapNearestLinear;
        case "mipmaplinearlinear":
          return d.MipMapLinearLinear;
        default:
          throw Error("Unknown texture filter " + a);
      }
    };
    a.wrapFromString = function (a) {
      switch (a.toLowerCase()) {
        case "mirroredtepeat":
          return e.MirroredRepeat;
        case "clamptoedge":
          return e.ClampToEdge;
        case "repeat":
          return e.Repeat;
        default:
          throw Error("Unknown texture wrap " + a);
      }
    };
    return a;
  })();
  a.Texture = b;
  (function (a) {
    a[(a.Nearest = 9728)] = "Nearest";
    a[(a.Linear = 9729)] = "Linear";
    a[(a.MipMap = 9987)] = "MipMap";
    a[(a.MipMapNearestNearest = 9984)] = "MipMapNearestNearest";
    a[(a.MipMapLinearNearest = 9985)] = "MipMapLinearNearest";
    a[(a.MipMapNearestLinear = 9986)] = "MipMapNearestLinear";
    a[(a.MipMapLinearLinear = 9987)] = "MipMapLinearLinear";
  })(a.TextureFilter || (a.TextureFilter = {}));
  var d = a.TextureFilter;
  (function (a) {
    a[(a.MirroredRepeat = 33648)] = "MirroredRepeat";
    a[(a.ClampToEdge = 33071)] = "ClampToEdge";
    a[(a.Repeat = 10497)] = "Repeat";
  })(a.TextureWrap || (a.TextureWrap = {}));
  var e = a.TextureWrap,
    b = (function () {
      return function () {
        this.height = this.width = this.v2 = this.u2 = this.v = this.u = 0;
        this.rotate = !1;
        this.originalHeight = this.originalWidth = this.offsetY = this.offsetX = 0;
      };
    })();
  a.TextureRegion = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(a, d) {
      this.pages = [];
      this.regions = [];
      this.load(a, d);
    }
    b.prototype.load = function (b, g) {
      if (null == g) throw Error("textureLoader cannot be null.");
      for (var m = new d(b), n = Array(4), p = null; ; ) {
        var r = m.readLine();
        if (null == r) break;
        r = r.trim();
        if (0 == r.length) p = null;
        else if (p) {
          var s = new f();
          s.name = r;
          s.page = p;
          s.rotate = "true" == m.readValue();
          m.readTuple(n);
          var r = parseInt(n[0]),
            u = parseInt(n[1]);
          m.readTuple(n);
          var v = parseInt(n[0]),
            t = parseInt(n[1]);
          s.u = r / p.width;
          s.v = u / p.height;
          s.rotate
            ? ((s.u2 = (r + t) / p.width), (s.v2 = (u + v) / p.height))
            : ((s.u2 = (r + v) / p.width), (s.v2 = (u + t) / p.height));
          s.x = r;
          s.y = u;
          s.width = Math.abs(v);
          s.height = Math.abs(t);
          4 == m.readTuple(n) && 4 == m.readTuple(n) && m.readTuple(n);
          s.originalWidth = parseInt(n[0]);
          s.originalHeight = parseInt(n[1]);
          m.readTuple(n);
          s.offsetX = parseInt(n[0]);
          s.offsetY = parseInt(n[1]);
          s.index = parseInt(m.readValue());
          s.texture = p.texture;
          this.regions.push(s);
        } else
          (p = new e()),
            (p.name = r),
            2 == m.readTuple(n) &&
              ((p.width = parseInt(n[0])),
              (p.height = parseInt(n[1])),
              m.readTuple(n)),
            m.readTuple(n),
            (p.minFilter = a.Texture.filterFromString(n[0])),
            (p.magFilter = a.Texture.filterFromString(n[1])),
            (s = m.readValue()),
            (p.uWrap = a.TextureWrap.ClampToEdge),
            (p.vWrap = a.TextureWrap.ClampToEdge),
            "x" == s
              ? (p.uWrap = a.TextureWrap.Repeat)
              : "y" == s
              ? (p.vWrap = a.TextureWrap.Repeat)
              : "xy" == s && (p.uWrap = p.vWrap = a.TextureWrap.Repeat),
            (p.texture = g(r)),
            p.texture.setFilters(p.minFilter, p.magFilter),
            p.texture.setWraps(p.uWrap, p.vWrap),
            (p.width = p.texture.getImage().width),
            (p.height = p.texture.getImage().height),
            this.pages.push(p);
      }
    };
    b.prototype.findRegion = function (a) {
      for (var b = 0; b < this.regions.length; b++)
        if (this.regions[b].name == a) return this.regions[b];
      return null;
    };
    b.prototype.dispose = function () {
      for (var a = 0; a < this.pages.length; a++)
        this.pages[a].texture.dispose();
    };
    return b;
  })();
  a.TextureAtlas = b;
  var d = (function () {
      function a(b) {
        this.index = 0;
        this.lines = b.split(/\r\n|\r|\n/);
      }
      a.prototype.readLine = function () {
        return this.index >= this.lines.length
          ? null
          : this.lines[this.index++];
      };
      a.prototype.readValue = function () {
        var a = this.readLine(),
          b = a.indexOf(":");
        if (-1 == b) throw Error("Invalid line: " + a);
        return a.substring(b + 1).trim();
      };
      a.prototype.readTuple = function (a) {
        var b = this.readLine(),
          d = b.indexOf(":");
        if (-1 == d) throw Error("Invalid line: " + b);
        for (var e = 0, d = d + 1; 3 > e; e++) {
          var f = b.indexOf(",", d);
          if (-1 == f) break;
          a[e] = b.substr(d, f - d).trim();
          d = f + 1;
        }
        a[e] = b.substring(d).trim();
        return e + 1;
      };
      return a;
    })(),
    e = (function () {
      return function () {};
    })();
  a.TextureAtlasPage = e;
  var f = (function (a) {
    function b() {
      a.apply(this, arguments);
    }
    __extends(b, a);
    return b;
  })(a.TextureRegion);
  a.TextureAtlasRegion = f;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function b(d, f) {
      this.shearMix = this.scaleMix = this.translateMix = this.rotateMix = 0;
      this.temp = new a.Vector2();
      if (null == d) throw Error("data cannot be null.");
      if (null == f) throw Error("skeleton cannot be null.");
      this.data = d;
      this.rotateMix = d.rotateMix;
      this.translateMix = d.translateMix;
      this.scaleMix = d.scaleMix;
      this.shearMix = d.shearMix;
      this.bones = [];
      for (var g = 0; g < d.bones.length; g++)
        this.bones.push(f.findBone(d.bones[g].name));
      this.target = f.findBone(d.target.name);
    }
    b.prototype.apply = function () {
      this.update();
    };
    b.prototype.update = function () {
      for (
        var b = this.rotateMix,
          d = this.translateMix,
          g = this.scaleMix,
          h = this.shearMix,
          k = this.target,
          m = k.a,
          n = k.b,
          p = k.c,
          r = k.d,
          s = 0 < m * r - n * p ? a.MathUtils.degRad : -a.MathUtils.degRad,
          u = this.data.offsetRotation * s,
          s = this.data.offsetShearY * s,
          v = this.bones,
          t = 0,
          w = v.length;
        t < w;
        t++
      ) {
        var x = v[t],
          y = !1;
        if (0 != b) {
          var B = x.a,
            y = x.b,
            A = x.c,
            z = x.d,
            C = Math.atan2(p, m) - Math.atan2(A, B) + u;
          C > a.MathUtils.PI
            ? (C -= a.MathUtils.PI2)
            : C < -a.MathUtils.PI && (C += a.MathUtils.PI2);
          var C = C * b,
            D = Math.cos(C),
            C = Math.sin(C);
          x.a = D * B - C * A;
          x.b = D * y - C * z;
          x.c = C * B + D * A;
          x.d = C * y + D * z;
          y = !0;
        }
        0 != d &&
          ((y = this.temp),
          k.localToWorld(y.set(this.data.offsetX, this.data.offsetY)),
          (x.worldX += (y.x - x.worldX) * d),
          (x.worldY += (y.y - x.worldY) * d),
          (y = !0));
        0 < g &&
          ((y = Math.sqrt(x.a * x.a + x.c * x.c)),
          (z = Math.sqrt(m * m + p * p)),
          1e-5 < y && (y = (y + (z - y + this.data.offsetScaleX) * g) / y),
          (x.a *= y),
          (x.c *= y),
          (y = Math.sqrt(x.b * x.b + x.d * x.d)),
          (z = Math.sqrt(n * n + r * r)),
          1e-5 < y && (y = (y + (z - y + this.data.offsetScaleY) * g) / y),
          (x.b *= y),
          (x.d *= y),
          (y = !0));
        0 < h &&
          ((y = x.b),
          (z = x.d),
          (B = Math.atan2(z, y)),
          (C =
            Math.atan2(r, n) - Math.atan2(p, m) - (B - Math.atan2(x.c, x.a))),
          C > a.MathUtils.PI
            ? (C -= a.MathUtils.PI2)
            : C < -a.MathUtils.PI && (C += a.MathUtils.PI2),
          (C = B + (C + s) * h),
          (y = Math.sqrt(y * y + z * z)),
          (x.b = Math.cos(C) * y),
          (x.d = Math.sin(C) * y),
          (y = !0));
        y && (x.appliedValid = !1);
      }
    };
    b.prototype.getOrder = function () {
      return this.data.order;
    };
    return b;
  })();
  a.TransformConstraint = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    return function (a) {
      this.order = 0;
      this.bones = [];
      this.offsetShearY = this.offsetScaleY = this.offsetScaleX = this.offsetY = this.offsetX = this.offsetRotation = this.shearMix = this.scaleMix = this.translateMix = this.rotateMix = 0;
      if (null == a) throw Error("name cannot be null.");
      this.name = a;
    };
  })();
  a.TransformConstraintData = b;
})(spine || (spine = {}));
(function (a) {
  var b = (function () {
    function a() {
      this.array = [];
    }
    a.prototype.add = function (a) {
      var b = this.contains(a);
      this.array[a | 0] = a | 0;
      return !b;
    };
    a.prototype.contains = function (a) {
      return void 0 != this.array[a | 0];
    };
    a.prototype.remove = function (a) {
      this.array[a | 0] = void 0;
    };
    a.prototype.clear = function () {
      this.array.length = 0;
    };
    return a;
  })();
  a.IntSet = b;
  b = (function () {
    function a(b, d, g, h) {
      void 0 === b && (b = 0);
      void 0 === d && (d = 0);
      void 0 === g && (g = 0);
      void 0 === h && (h = 0);
      this.r = b;
      this.g = d;
      this.b = g;
      this.a = h;
    }
    a.prototype.set = function (a, b, d, h) {
      this.r = a;
      this.g = b;
      this.b = d;
      this.a = h;
      this.clamp();
      return this;
    };
    a.prototype.setFromColor = function (a) {
      this.r = a.r;
      this.g = a.g;
      this.b = a.b;
      this.a = a.a;
      return this;
    };
    a.prototype.setFromString = function (a) {
      a = "#" == a.charAt(0) ? a.substr(1) : a;
      this.r = parseInt(a.substr(0, 2), 16) / 255;
      this.g = parseInt(a.substr(2, 2), 16) / 255;
      this.b = parseInt(a.substr(4, 2), 16) / 255;
      this.a = (8 != a.length ? 255 : parseInt(a.substr(6, 2), 16)) / 255;
      return this;
    };
    a.prototype.add = function (a, b, d, h) {
      this.r += a;
      this.g += b;
      this.b += d;
      this.a += h;
      this.clamp();
      return this;
    };
    a.prototype.clamp = function () {
      0 > this.r ? (this.r = 0) : 1 < this.r && (this.r = 1);
      0 > this.g ? (this.g = 0) : 1 < this.g && (this.g = 1);
      0 > this.b ? (this.b = 0) : 1 < this.b && (this.b = 1);
      0 > this.a ? (this.a = 0) : 1 < this.a && (this.a = 1);
      return this;
    };
    a.WHITE = new a(1, 1, 1, 1);
    a.RED = new a(1, 0, 0, 1);
    a.GREEN = new a(0, 1, 0, 1);
    a.BLUE = new a(0, 0, 1, 1);
    a.MAGENTA = new a(1, 0, 1, 1);
    return a;
  })();
  a.Color = b;
  b = (function () {
    function a() {}
    a.clamp = function (a, b, d) {
      return a < b ? b : a > d ? d : a;
    };
    a.cosDeg = function (b) {
      return Math.cos(b * a.degRad);
    };
    a.sinDeg = function (b) {
      return Math.sin(b * a.degRad);
    };
    a.signum = function (a) {
      return 0 < a ? 1 : 0 > a ? -1 : 0;
    };
    a.toInt = function (a) {
      return 0 < a ? Math.floor(a) : Math.ceil(a);
    };
    a.cbrt = function (a) {
      var b = Math.pow(Math.abs(a), 1 / 3);
      return 0 > a ? -b : b;
    };
    a.PI = 3.1415927;
    a.PI2 = 2 * a.PI;
    a.radiansToDegrees = 180 / a.PI;
    a.radDeg = a.radiansToDegrees;
    a.degreesToRadians = a.PI / 180;
    a.degRad = a.degreesToRadians;
    return a;
  })();
  a.MathUtils = b;
  b = (function () {
    function a() {}
    a.arrayCopy = function (a, b, d, h, k) {
      for (var m = b; m < b + k; m++, h++) d[h] = a[m];
    };
    a.setArraySize = function (a, b, d) {
      void 0 === d && (d = 0);
      var h = a.length;
      if (h == b) return a;
      a.length = b;
      if (h < b) for (; h < b; h++) a[h] = d;
      return a;
    };
    a.ensureArrayCapacity = function (b, f, g) {
      void 0 === g && (g = 0);
      return b.length >= f ? b : a.setArraySize(b, f, g);
    };
    a.newArray = function (a, b) {
      for (var d = Array(a), h = 0; h < a; h++) d[h] = b;
      return d;
    };
    a.newFloatArray = function (b) {
      if (a.SUPPORTS_TYPED_ARRAYS) return new Float32Array(b);
      b = Array(b);
      for (var f = 0; f < b.length; f++) b[f] = 0;
      return b;
    };
    a.toFloatArray = function (b) {
      return a.SUPPORTS_TYPED_ARRAYS ? new Float32Array(b) : b;
    };
    a.SUPPORTS_TYPED_ARRAYS = "undefined" !== typeof Float32Array;
    return a;
  })();
  a.Utils = b;
  b = (function () {
    function a() {}
    a.logBones = function (a) {
      for (var b = 0; b < a.bones.length; b++) {
        var d = a.bones[b];
        console.log(
          d.data.name +
            ", " +
            d.a +
            ", " +
            d.b +
            ", " +
            d.c +
            ", " +
            d.d +
            ", " +
            d.worldX +
            ", " +
            d.worldY
        );
      }
    };
    return a;
  })();
  a.DebugUtils = b;
  b = (function () {
    function a(b) {
      this.items = [];
      this.instantiator = b;
    }
    a.prototype.obtain = function () {
      return 0 < this.items.length ? this.items.pop() : this.instantiator();
    };
    a.prototype.free = function (a) {
      a.reset && a.reset();
      this.items.push(a);
    };
    a.prototype.freeAll = function (a) {
      for (var b = 0; b < a.length; b++)
        a[b].reset && a[b].reset(), (this.items[b] = a[b]);
    };
    a.prototype.clear = function () {
      this.items.length = 0;
    };
    return a;
  })();
  a.Pool = b;
  b = (function () {
    function a(b, d) {
      void 0 === b && (b = 0);
      void 0 === d && (d = 0);
      this.x = b;
      this.y = d;
    }
    a.prototype.set = function (a, b) {
      this.x = a;
      this.y = b;
      return this;
    };
    a.prototype.length = function () {
      var a = this.x,
        b = this.y;
      return Math.sqrt(a * a + b * b);
    };
    a.prototype.normalize = function () {
      var a = this.length();
      0 != a && ((this.x /= a), (this.y /= a));
      return this;
    };
    return a;
  })();
  a.Vector2 = b;
  b = (function () {
    function a() {
      this.maxDelta = 0.064;
      this.totalTime = this.delta = this.framesPerSecond = 0;
      this.lastTime = Date.now() / 1e3;
      this.frameTime = this.frameCount = 0;
    }
    a.prototype.update = function () {
      var a = Date.now() / 1e3;
      this.delta = a - this.lastTime;
      this.frameTime += this.delta;
      this.totalTime += this.delta;
      this.delta > this.maxDelta && (this.delta = this.maxDelta);
      this.lastTime = a;
      this.frameCount++;
      1 < this.frameTime &&
        ((this.framesPerSecond = this.frameCount / this.frameTime),
        (this.frameCount = this.frameTime = 0));
    };
    return a;
  })();
  a.TimeKeeper = b;
})(spine || (spine = {}));
var sp = sp || {};
sp.spine = spine;
sp = sp || {};
sp.VERTEX_INDEX = { X1: 0, Y1: 1, X2: 2, Y2: 3, X3: 4, Y3: 5, X4: 6, Y4: 7 };
sp.ATTACHMENT_TYPE = { REGION: 0, BOUNDING_BOX: 1, MESH: 2, SKINNED_MESH: 3 };
spine = sp.spine;
sp.Skeleton = cc.Node.extend({
  _skeleton: null,
  _rootBone: null,
  _timeScale: 1,
  _debugSlots: !1,
  _debugBones: !1,
  _premultipliedAlpha: !1,
  _ownsSkeletonData: null,
  _atlas: null,
  ctor: function (a, b, d) {
    cc.Node.prototype.ctor.call(this);
    0 === arguments.length ? this.init() : this.initWithArgs(a, b, d);
  },
  _createRenderCmd: function () {
    return cc._renderType === cc.game.RENDER_TYPE_CANVAS
      ? new sp.Skeleton.CanvasRenderCmd(this)
      : new sp.Skeleton.WebGLRenderCmd(this);
  },
  init: function () {
    cc.Node.prototype.init.call(this);
    this._premultipliedAlpha =
      cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA;
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.scheduleUpdate();
  },
  onExit: function () {
    this.unscheduleUpdate();
    cc.Node.prototype.onExit.call(this);
  },
  setDebugSolots: function (a) {
    this._debugSlots = a;
  },
  setDebugBones: function (a) {
    this._debugBones = a;
  },
  setDebugSlotsEnabled: function (a) {
    this._debugSlots = a;
  },
  getDebugSlotsEnabled: function () {
    return this._debugSlots;
  },
  setDebugBonesEnabled: function (a) {
    this._debugBones = a;
  },
  getDebugBonesEnabled: function () {
    return this._debugBones;
  },
  setTimeScale: function (a) {
    this._timeScale = a;
  },
  getTimeScale: function () {
    return this._timeScale;
  },
  initWithArgs: function (a, b, d) {
    if (cc.isString(a)) {
      if (cc.isString(b)) {
        var e = cc.loader.getRes(b);
        sp._atlasLoader.setAtlasFile(b);
        b = new spine.TextureAtlas(
          e,
          sp._atlasLoader.load.bind(sp._atlasLoader)
        );
      }
      d = d || 1 / cc.director.getContentScaleFactor();
      e = new spine.AtlasAttachmentLoader(b);
      e = new spine.SkeletonJson(e);
      e.scale = d;
      a = cc.loader.getRes(a);
      a = e.readSkeletonData(a);
      b.dispose(e);
      d = !0;
    } else d = b;
    this.setSkeletonData(a, d);
    this.init();
  },
  getBoundingBox: function () {
    for (
      var a = cc.FLT_MAX,
        b = cc.FLT_MAX,
        d = cc.FLT_MIN,
        e = cc.FLT_MIN,
        f = this.getScaleX(),
        g = this.getScaleY(),
        h,
        k = this._skeleton.slots,
        m = spine.RegionAttachment,
        n = 0,
        p = k.length;
      n < p;
      ++n
    ) {
      h = k[n];
      var r = h.attachment;
      r &&
        r instanceof spine.RegionAttachment &&
        ((h = r.updateWorldVertices(h, !1)),
        (a = Math.min(a, h[m.X1] * f, h[m.X4] * f, h[m.X2] * f, h[m.X3] * f)),
        (b = Math.min(b, h[m.Y1] * g, h[m.Y4] * g, h[m.Y2] * g, h[m.Y3] * g)),
        (d = Math.max(d, h[m.X1] * f, h[m.X4] * f, h[m.X2] * f, h[m.X3] * f)),
        (e = Math.max(e, h[m.Y1] * g, h[m.Y4] * g, h[m.Y2] * g, h[m.Y3] * g)));
    }
    f = this.getPosition();
    return cc.rect(f.x + a, f.y + b, d - a, e - b);
  },
  updateWorldTransform: function () {
    this._skeleton.updateWorldTransform();
  },
  setToSetupPose: function () {
    this._skeleton.setToSetupPose();
  },
  setBonesToSetupPose: function () {
    this._skeleton.setBonesToSetupPose();
  },
  setSlotsToSetupPose: function () {
    this._skeleton.setSlotsToSetupPose();
  },
  findBone: function (a) {
    return this._skeleton.findBone(a);
  },
  findSlot: function (a) {
    return this._skeleton.findSlot(a);
  },
  setSkin: function (a) {
    return this._skeleton.setSkinByName(a);
  },
  getAttachment: function (a, b) {
    return this._skeleton.getAttachmentByName(a, b);
  },
  setAttachment: function (a, b) {
    this._skeleton.setAttachment(a, b);
  },
  setPremultipliedAlpha: function (a) {
    this._premultipliedAlpha = a;
  },
  isPremultipliedAlpha: function () {
    return this._premultipliedAlpha;
  },
  setSkeletonData: function (a, b) {
    null != a.width &&
      null != a.height &&
      this.setContentSize(
        a.width / cc.director.getContentScaleFactor(),
        a.height / cc.director.getContentScaleFactor()
      );
    this._skeleton = new spine.Skeleton(a);
    this._skeleton.updateWorldTransform();
    this._rootBone = this._skeleton.getRootBone();
    this._ownsSkeletonData = b;
    this._renderCmd._createChildFormSkeletonData();
  },
  getTextureAtlas: function (a) {
    return a.region;
  },
  getBlendFunc: function () {
    var a = this._skeleton.drawOrder[0];
    return a
      ? this._renderCmd._getBlendFunc(
          a.data.blendMode,
          this._premultipliedAlpha
        )
      : {};
  },
  setBlendFunc: function (a, b) {},
  update: function (a) {
    this._skeleton.update(a);
  },
});
cc.defineGetterSetter(
  sp.Skeleton.prototype,
  "opacityModifyRGB",
  sp.Skeleton.prototype.isOpacityModifyRGB
);
cc.defineGetterSetter(
  sp.Skeleton.prototype,
  "_blendFunc",
  sp.Skeleton.prototype.getBlendFunc
);
cc.defineGetterSetter(sp.Skeleton.prototype, "_texture", function () {
  return this._renderCmd._currTexture;
});
sp.Skeleton.create = function (a, b, d) {
  return new sp.Skeleton(a, b, d);
};
sp._atlasLoader = {
  spAtlasFile: null,
  setAtlasFile: function (a) {
    this.spAtlasFile = a;
  },
  load: function (a) {
    a = cc.path.join(cc.path.dirname(this.spAtlasFile), a);
    a = cc.textureCache.addImage(a);
    var b = new sp.SkeletonTexture({
      width: a.getPixelsWide(),
      height: a.getPixelsHigh(),
    });
    b.setRealTexture(a);
    return b;
  },
  unload: function (a) {},
};
sp.ANIMATION_EVENT_TYPE = {
  START: 0,
  INTERRUPT: 1,
  END: 2,
  DISPOSE: 3,
  COMPLETE: 4,
  EVENT: 5,
};
sp.TrackEntryListeners = function (a, b, d, e, f, g) {
  this.startListener = a || null;
  this.endListener = b || null;
  this.completeListener = d || null;
  this.eventListener = e || null;
  this.interruptListener = f || null;
  this.disposeListener = g || null;
  this.skeletonNode = this.callbackTarget = this.callback = null;
};
var proto = sp.TrackEntryListeners.prototype;
proto.start = function (a) {
  this.startListener && this.startListener(a);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.START,
      null,
      0
    );
};
proto.interrupt = function (a) {
  this.interruptListener && this.interruptListener(a);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.INTERRUPT,
      null,
      0
    );
};
proto.end = function (a) {
  this.endListener && this.endListener(a);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.END,
      null,
      0
    );
};
proto.dispose = function (a) {
  this.disposeListener && this.disposeListener(a);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.DISPOSE,
      null,
      0
    );
};
proto.complete = function (a) {
  var b = Math.floor(a.trackTime / a.animationEnd);
  this.completeListener && this.completeListener(a, b);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.COMPLETE,
      null,
      b
    );
};
proto.event = function (a, b) {
  this.eventListener && this.eventListener(a, b);
  this.callback &&
    this.callback.call(
      this.callbackTarget,
      this.skeletonNode,
      a,
      sp.ANIMATION_EVENT_TYPE.EVENT,
      b,
      0
    );
};
sp.TrackEntryListeners.getListeners = function (a) {
  a.listener || (a.listener = new sp.TrackEntryListeners());
  return a.listener;
};
sp.SkeletonAnimation = sp.Skeleton.extend({
  _state: null,
  _ownsAnimationStateData: !1,
  _listener: null,
  init: function () {
    sp.Skeleton.prototype.init.call(this);
    this._ownsAnimationStateData = !0;
    this.setAnimationStateData(
      new spine.AnimationStateData(this._skeleton.data)
    );
  },
  setAnimationStateData: function (a) {
    a = new spine.AnimationState(a);
    this._listener = new sp.TrackEntryListeners();
    a.rendererObject = this;
    a.addListener(this._listener);
    this._state = a;
  },
  setMix: function (a, b, d) {
    this._state.data.setMixWith(a, b, d);
  },
  setAnimationListener: function (a, b) {
    this._listener.callbackTarget = a;
    this._listener.callback = b;
    this._listener.skeletonNode = this;
  },
  setAnimation: function (a, b, d) {
    var e = this._skeleton.data.findAnimation(b);
    return e
      ? this._state.setAnimationWith(a, e, d)
      : (cc.log("Spine: Animation not found: " + b), null);
  },
  addAnimation: function (a, b, d, e) {
    e = null == e ? 0 : e;
    var f = this._skeleton.data.findAnimation(b);
    return f
      ? this._state.addAnimationWith(a, f, d, e)
      : (cc.log("Spine: Animation not found:" + b), null);
  },
  findAnimation: function (a) {
    return this._skeleton.data.findAnimation(a);
  },
  getCurrent: function (a) {
    return this._state.getCurrent(a);
  },
  clearTracks: function () {
    this._state.clearTracks();
  },
  clearTrack: function (a) {
    this._state.clearTrack(a);
  },
  update: function (a) {
    this._super(a);
    a *= this._timeScale;
    this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);
    this._state.update(a);
    this._state.apply(this._skeleton);
    this._skeleton.updateWorldTransform();
    this._renderCmd._updateChild();
  },
  setStartListener: function (a) {
    this._listener.startListener = a;
  },
  setInterruptListener: function (a) {
    this._listener.interruptListener = a;
  },
  setEndListener: function (a) {
    this._listener.endListener = a;
  },
  setDisposeListener: function (a) {
    this._listener.disposeListener = a;
  },
  setCompleteListener: function (a) {
    this._listener.completeListener = a;
  },
  setEventListener: function (a) {
    this._listener.eventListener = a;
  },
  setTrackStartListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).startListener = b;
  },
  setTrackInterruptListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).interruptListener = b;
  },
  setTrackEndListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).endListener = b;
  },
  setTrackDisposeListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).disposeListener = b;
  },
  setTrackCompleteListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).completeListener = b;
  },
  setTrackEventListener: function (a, b) {
    sp.TrackEntryListeners.getListeners(a).eventListener = b;
  },
  getState: function () {
    return this._state;
  },
});
sp.SkeletonAnimation.createWithJsonFile = sp.SkeletonAnimation.create = function (
  a,
  b,
  d
) {
  return new sp.SkeletonAnimation(a, b, d);
};
sp.SkeletonTexture = function (a) {
  sp.spine.Texture.call(this, a);
};
cc.inherits(sp.SkeletonTexture, sp.spine.Texture);
cc.extend(sp.SkeletonTexture.prototype, {
  name: "sp.SkeletonTexture",
  _texture: null,
  setRealTexture: function (a) {
    this._texture = a;
  },
  getRealTexture: function () {
    return this._texture;
  },
  setFilters: function (a, b) {
    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
      var d = cc._renderContext;
      this.bind();
      d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, a);
      d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, b);
    }
  },
  setWraps: function (a, b) {
    if (cc._renderType === cc.game.RENDER_TYPE_WEBGL) {
      var d = cc._renderContext;
      this.bind();
      d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_S, a);
      d.texParameteri(d.TEXTURE_2D, d.TEXTURE_WRAP_T, b);
    }
  },
  dispose: function () {},
  bind: function () {
    cc._renderType === cc.game.RENDER_TYPE_WEBGL &&
      cc.glBindTexture2D(this._texture);
  },
});
(function () {
  var a = sp.spine;
  sp.Skeleton.CanvasRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
  };
  var b = (sp.Skeleton.CanvasRenderCmd.prototype = Object.create(
    cc.Node.CanvasRenderCmd.prototype
  ));
  b.constructor = sp.Skeleton.CanvasRenderCmd;
  b.rendering = function (b, d, g) {
    var h = this._node,
      k,
      m,
      n,
      p;
    b = b || cc._renderContext;
    var r = h._skeleton,
      s = r.drawOrder;
    k = 0;
    for (m = s.length; k < m; k++)
      (n = s[k]),
        (p = n._slotNode),
        p._visible &&
          p._renderCmd &&
          n.currentSprite &&
          (p._renderCmd.transform(this, !0),
          n.currentSprite._renderCmd.rendering(b, d, g),
          (p._renderCmd._dirtyFlag = n.currentSprite._renderCmd._dirtyFlag = 0));
    if (h._debugSlots || h._debugBones) {
      b.setTransform(this._worldTransform, d, g);
      b.setGlobalAlpha(1);
      b = cc._drawingUtil;
      if (h._debugSlots)
        for (
          b.setDrawColor(0, 0, 255, 255),
            b.setLineWidth(1),
            g = [],
            k = 0,
            m = r.slots.length;
          k < m;
          k++
        )
          (n = r.drawOrder[k]),
            n.attachment &&
              n.attachment instanceof a.RegionAttachment &&
              ((d = n.attachment),
              this._updateRegionAttachmentSlot(d, n, g),
              b.drawPoly(g, 4, !0));
      if (h._debugBones) {
        b.setLineWidth(2);
        b.setDrawColor(255, 0, 0, 255);
        k = 0;
        for (m = r.bones.length; k < m; k++)
          (h = r.bones[k]),
            b.drawLine(
              { x: h.worldX, y: h.worldY },
              {
                x: h.data.length * h.a + h.worldX,
                y: h.data.length * h.c + h.worldY,
              }
            );
        b.setPointSize(4);
        b.setDrawColor(0, 0, 255, 255);
        k = 0;
        for (m = r.bones.length; k < m; k++)
          (h = r.bones[k]),
            b.drawPoint({ x: h.worldX, y: h.worldY }),
            0 === k && b.setDrawColor(0, 255, 0, 255);
      }
    }
  };
  b.updateStatus = function () {
    this.originUpdateStatus();
    this._updateCurrentRegions();
    this._regionFlag = cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble;
    this._dirtyFlag &= ~cc.Node._dirtyFlags.contentDirty;
  };
  b.getLocalBB = function () {
    return this._node.getBoundingBox();
  };
  b._updateRegionAttachmentSlot = function (b, d, g) {
    g &&
      ((b = b.updateWorldVertices(d, !1)),
      (d = a.RegionAttachment),
      (g.length = 0),
      g.push(cc.p(b[d.X1], b[d.Y1])),
      g.push(cc.p(b[d.X4], b[d.Y4])),
      g.push(cc.p(b[d.X3], b[d.Y3])),
      g.push(cc.p(b[d.X2], b[d.Y2])));
  };
  b._createChildFormSkeletonData = function () {
    for (
      var b = this._node._skeleton, d, g, h = 0, k = b.slots.length;
      h < k;
      h++
    ) {
      var m = b.slots[h];
      g = m.attachment;
      var n = new cc.Node();
      m._slotNode = n;
      g instanceof a.RegionAttachment &&
        ((d = g.region.name),
        (g = this._createSprite(m, g)),
        (m.currentSprite = g),
        (m.currentSpriteName = d),
        n.addChild(g));
    }
  };
  var d = function (a, b, d) {
    var h = d.region,
      k = new cc.Rect(h.x, h.y, h.width, h.height);
    a.initWithTexture(b, k, h.rotate, !1);
    a._rect.width = d.width;
    a._rect.height = d.height;
    a.setContentSize(d.width, d.height);
    a.setRotation(-d.rotation);
    a.setScale(
      (h.width / h.originalWidth) * d.scaleX,
      (h.height / h.originalHeight) * d.scaleY
    );
  };
  b._createSprite = function (a, b) {
    var g = b.region,
      h = g.texture.getRealTexture(),
      k = new cc.Sprite();
    h.isLoaded()
      ? d(k, h, b)
      : h.addEventListener(
          "load",
          function () {
            d(k, h, b);
          },
          this
        );
    a.sprites = a.sprites || {};
    return (a.sprites[g.name] = k);
  };
  b._updateChild = function () {
    var b = this._node._skeleton.slots,
      d = this._displayedColor,
      g = this._displayedOpacity,
      h,
      k,
      m,
      n,
      p,
      r,
      s;
    h = 0;
    for (k = b.length; h < k; h++)
      if (((p = b[h]), (r = p.attachment), (s = p._slotNode), r)) {
        if (r instanceof a.RegionAttachment) {
          if (
            r.region &&
            (!p.currentSpriteName || p.currentSpriteName !== r.name)
          ) {
            var u = r.region.name;
            void 0 !== p.currentSprite && p.currentSprite.setVisible(!1);
            p.sprites = p.sprites || {};
            void 0 !== p.sprites[u]
              ? p.sprites[u].setVisible(!0)
              : ((m = this._createSprite(p, r)), s.addChild(m));
            p.currentSprite = p.sprites[u];
            p.currentSpriteName = u;
          }
          u = p.bone;
          0 === r.region.offsetX && 0 === r.region.offsetY
            ? ((m = r.x), (n = r.y))
            : ((m = 0.5 * (r.offset[0] + r.offset[4])),
              (n = 0.5 * (r.offset[1] + r.offset[5])));
          s.setPosition(
            u.worldX + m * u.a + n * u.b,
            u.worldY + m * u.c + n * u.d
          );
          s.setScale(u.getWorldScaleX(), u.getWorldScaleY());
          m = p.currentSprite;
          m._flippedX = u.skeleton.flipX;
          m._flippedY = u.skeleton.flipY;
          m._flippedY || m._flippedX
            ? (s.setRotation(u.getWorldRotationX()), m.setRotation(r.rotation))
            : (s.setRotation(-u.getWorldRotationX()),
              m.setRotation(-r.rotation));
          m._renderCmd._displayedOpacity = 0 | (g * p.color.a);
          m.setColor(
            cc.color(
              0 | (d.r * p.color.r),
              0 | (d.g * p.color.g),
              0 | (d.b * p.color.b)
            )
          );
          m._renderCmd._updateColor();
        } else if (!(r instanceof a.MeshAttachment)) {
          s.setVisible(!1);
          continue;
        }
        s.setVisible(!0);
      } else s.setVisible(!1);
  };
})();
(function () {
  var a = sp.spine;
  sp.Skeleton.WebGLRenderCmd = function (a) {
    this._rootCtor(a);
    this._needDraw = !0;
    this._matrix = new cc.math.Matrix4();
    this._matrix.identity();
    this._currTexture = null;
    this._currBlendFunc = {};
    this.vertexType = cc.renderer.VertexType.CUSTOM;
    this.setShaderProgram(
      cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)
    );
  };
  var b = (sp.Skeleton.WebGLRenderCmd.prototype = Object.create(
    cc.Node.WebGLRenderCmd.prototype
  ));
  b.constructor = sp.Skeleton.WebGLRenderCmd;
  b.uploadData = function (b, e, f) {
    var g = this._node,
      h = this._displayedColor,
      k = g._skeleton,
      m,
      n,
      p,
      r = g._premultipliedAlpha;
    k.r = h.r / 255;
    k.g = h.g / 255;
    k.b = h.b / 255;
    k.a = this._displayedOpacity / 255;
    r && ((k.r *= k.a), (k.g *= k.a), (k.b *= k.a));
    var s = null;
    this._node._debugSlots && (s = []);
    h = 0;
    for (p = k.drawOrder.length; h < p; h++)
      if (((n = k.drawOrder[h]), n.attachment)) {
        m = n.attachment;
        var u = 0;
        if (m instanceof a.RegionAttachment) u = 6;
        else if (m instanceof a.MeshAttachment) u = m.regionUVs.length / 2;
        else continue;
        if (0 !== u) {
          this._currTexture = g.getTextureAtlas(m).texture.getRealTexture();
          var v = cc.renderer._updateBatchedInfo(
            this._currTexture,
            this._getBlendFunc(n.data.blendMode, r),
            this._glProgramState
          );
          !v &&
            f + 6 * u > b.length &&
            (cc.renderer._batchRendering(), (v = !0));
          v && (f = 0);
          v = null;
          if (m instanceof a.RegionAttachment)
            v = this._uploadRegionAttachmentData(m, n, r, b, e, f);
          else if (m instanceof a.MeshAttachment)
            this._uploadMeshAttachmentData(m, n, r, b, e, f);
          else continue;
          this._node._debugSlots && (s[h] = v);
          m instanceof a.RegionAttachment
            ? cc.renderer._increaseBatchingSize(
                u,
                cc.renderer.VertexType.TRIANGLE
              )
            : cc.renderer._increaseBatchingSize(
                u,
                cc.renderer.VertexType.CUSTOM,
                m.triangles
              );
          f += 6 * u;
        }
      }
    if (g._debugBones || g._debugSlots) {
      cc.renderer._batchRendering();
      h = this._worldTransform;
      p = this._matrix.mat;
      p[0] = h.a;
      p[4] = h.c;
      p[12] = h.tx;
      p[1] = h.b;
      p[5] = h.d;
      p[13] = h.ty;
      cc.kmGLMatrixMode(cc.KM_GL_MODELVIEW);
      cc.current_stack.stack.push(cc.current_stack.top);
      cc.current_stack.top = this._matrix;
      b = cc._drawingUtil;
      if (g._debugSlots && s && 0 < s.length)
        for (
          b.setDrawColor(0, 0, 255, 255),
            b.setLineWidth(1),
            h = 0,
            p = k.slots.length;
          h < p;
          h++
        )
          (e = s[h]) && b.drawPoly(e, 4, !0);
      if (g._debugBones) {
        b.setLineWidth(2);
        b.setDrawColor(255, 0, 0, 255);
        h = 0;
        for (p = k.bones.length; h < p; h++)
          (g = k.bones[h]),
            (s = g.data.length * g.a + g.worldX),
            (e = g.data.length * g.c + g.worldY),
            b.drawLine(cc.p(g.worldX, g.worldY), cc.p(s, e));
        b.setPointSize(4);
        b.setDrawColor(0, 0, 255, 255);
        h = 0;
        for (p = k.bones.length; h < p; h++)
          (g = k.bones[h]),
            b.drawPoint(cc.p(g.worldX, g.worldY)),
            0 == h && b.setDrawColor(0, 255, 0, 255);
      }
      cc.kmGLPopMatrix();
    }
    return 0;
  };
  b._getBlendFunc = function (b, e) {
    var f = this._currBlendFunc;
    switch (b) {
      case a.BlendMode.Normal:
        f.src = e ? cc.ONE : cc.SRC_ALPHA;
        f.dst = cc.ONE_MINUS_SRC_ALPHA;
        break;
      case a.BlendMode.Additive:
        f.src = e ? cc.ONE : cc.SRC_ALPHA;
        f.dst = cc.ONE;
        break;
      case a.BlendMode.Multiply:
        f.src = cc.DST_COLOR;
        f.dst = cc.ONE_MINUS_SRC_ALPHA;
        break;
      case a.BlendMode.Screen:
        f.src = cc.ONE;
        f.dst = cc.ONE_MINUS_SRC_COLOR;
        break;
      default:
        f = this._node._blendFunc;
    }
    return f;
  };
  b._createChildFormSkeletonData = function () {};
  b._updateChild = function () {};
  b._uploadRegionAttachmentData = function (b, e, f, g, h, k) {
    var m = this._displayedColor,
      n = m.r,
      p = m.g,
      m = m.b,
      r = this._displayedOpacity;
    b = b.updateWorldVertices(e, f);
    var s = this._worldTransform;
    e = s.a;
    f = s.b;
    for (
      var u = s.c, v = s.d, t = s.tx, s = s.ty, w = this._node.vertexZ, x = 0;
      6 > x;
      x++
    ) {
      var y = 4 > x ? x % 3 : x - 2,
        B = b[8 * y],
        A = b[8 * y + 1],
        z = B * f + A * v + s,
        C =
          ((b[8 * y + 5] * r) << 24) |
          ((b[8 * y + 4] * m) << 16) |
          ((b[8 * y + 3] * p) << 8) |
          (b[8 * y + 2] * n);
      g[k] = B * e + A * u + t;
      g[k + 1] = z;
      g[k + 2] = w;
      h[k + 3] = C;
      g[k + 4] = b[8 * y + 6];
      g[k + 5] = b[8 * y + 7];
      k += 6;
    }
    if (this._node._debugSlots)
      return (
        (g = a.RegionAttachment),
        [
          cc.p(b[g.X1], b[g.Y1]),
          cc.p(b[g.X2], b[g.Y2]),
          cc.p(b[g.X3], b[g.Y3]),
          cc.p(b[g.X4], b[g.Y4]),
        ]
      );
  };
  b._uploadMeshAttachmentData = function (a, b, f, g, h, k) {
    var m = this._worldTransform,
      n = m.a,
      p = m.b,
      r = m.c,
      s = m.d,
      u = m.tx,
      m = m.ty,
      v = this._node.vertexZ;
    a = a.updateWorldVertices(b, f);
    var t = this._displayedColor;
    b = t.r;
    f = t.g;
    for (
      var t = t.b, w = this._displayedOpacity, x = 0, y = a.length;
      x < y;
      x += 8
    ) {
      var B = a[x],
        A = a[x + 1],
        z = B * r + A * s + m,
        C =
          ((a[x + 5] * w) << 24) |
          ((a[x + 4] * t) << 16) |
          ((a[x + 3] * f) << 8) |
          (a[x + 2] * b);
      g[k] = B * n + A * p + u;
      g[k + 1] = z;
      g[k + 2] = v;
      h[k + 3] = C;
      g[k + 4] = a[x + 6];
      g[k + 5] = a[x + 7];
      k += 6;
    }
  };
})();
cc.pool = {
  _pool: {},
  _releaseCB: function () {
    this.release();
  },
  _autoRelease: function (a) {
    var b = void 0 === a._running ? !1 : !a._running;
    cc.director.getScheduler().schedule(this._releaseCB, a, 0, 0, 0, b);
  },
  putInPool: function (a) {
    var b = a.constructor.prototype.__pid;
    if (!b) {
      var d = { writable: !0, enumerable: !1, configurable: !0 };
      d.value = ClassManager.getNewID();
      Object.defineProperty(a.constructor.prototype, "__pid", d);
    }
    this._pool[b] || (this._pool[b] = []);
    a.retain && a.retain();
    a.unuse && a.unuse();
    this._pool[b].push(a);
  },
  hasObject: function (a) {
    return (a = this._pool[a.prototype.__pid]) && 0 !== a.length ? !0 : !1;
  },
  removeObject: function (a) {
    var b = a.constructor.prototype.__pid;
    if (b && (b = this._pool[b]))
      for (var d = 0; d < b.length; d++)
        a === b[d] && (a.release && a.release(), b.splice(d, 1));
  },
  getFromPool: function (a) {
    if (this.hasObject(a)) {
      var b = this._pool[a.prototype.__pid],
        d = Array.prototype.slice.call(arguments);
      d.shift();
      b = b.pop();
      b.reuse && b.reuse.apply(b, d);
      cc.sys.isNative && b.release && this._autoRelease(b);
      return b;
    }
  },
  drainAllPools: function () {
    for (var a in this._pool)
      for (var b = 0; b < this._pool[a].length; b++) {
        var d = this._pool[a][b];
        d.release && d.release();
      }
    this._pool = {};
  },
};
(function () {
  if (void 0 !== cc) {
    var a = function () {};
    a.prototype = {
      constructor: a,
      getInstance: function () {
        return this;
      },
      loadPlugin: function (a) {},
      unloadPlugin: function (a) {},
    };
    var b = function () {};
    b.prototype = {
      constructor: b,
      setDebugMode: function (a) {},
      startSession: function (a) {},
      setCaptureUncaughtException: function (a) {},
      callFuncWithParam: function (a) {
        if ("function" === typeof this[a])
          return this[a].apply(this, Array.prototype.splice.call(arguments, 1));
        cc.log("function is not define");
      },
      callStringFuncWithParam: function (a) {
        this.callFuncWithParam.apply(arguments);
      },
      getPluginName: function () {
        return this._name;
      },
      getPluginVersion: function () {
        return this._version;
      },
    };
    b.extend = function (a, d) {
      var e,
        k = {};
      for (e in b.prototype) k[e] = b.prototype[e];
      for (e in d) k[e] = d[e];
      e = eval("(function " + a + "Plugin(){})");
      k.constructor = e;
      e.prototype = k;
      return e;
    };
    var d = function (a, b) {
      var d = plugin.PluginParam.ParamType;
      switch (a) {
        case d.TypeInt:
          d = parseInt(b);
          break;
        case d.TypeFloat:
          d = parseFloat(b);
          break;
        case d.TypeBool:
          d = Boolean(b);
          break;
        case d.TypeString:
          d = String(b);
          break;
        case d.TypeStringMap:
          d = b;
          break;
        default:
          d = b;
      }
      return d;
    };
    d.ParamType = {
      TypeInt: 1,
      TypeFloat: 2,
      TypeBool: 3,
      TypeString: 4,
      TypeStringMap: 5,
    };
    d.AdsResultCode = {
      AdsReceived: 0,
      FullScreenViewShown: 1,
      FullScreenViewDismissed: 2,
      PointsSpendSucceed: 3,
      PointsSpendFailed: 4,
      NetworkError: 5,
      UnknownError: 6,
    };
    d.PayResultCode = {
      PaySuccess: 0,
      PayFail: 1,
      PayCancel: 2,
      PayTimeOut: 3,
    };
    d.ShareResultCode = {
      ShareSuccess: 0,
      ShareFail: 1,
      ShareCancel: 2,
      ShareTimeOut: 3,
    };
    var e = {},
      a = {
        extend: function (a, d) {
          var h = (cc.game.config && cc.game.config.plugin) || {};
          e[a] = new (b.extend(a, d))();
          "function" === typeof e[a].ctor && e[a].ctor(h[a]);
        },
        PluginList: e,
        PluginParam: d,
        PluginManager: new a(),
      };
    window.plugin = a;
  }
})();
(function (a, b, d, e, f) {
  var g = window.console;
  g &&
    604800 < Math.floor(new Date().getTime() / 1e3) - b &&
    g.warn("The Facebook JSSDK is more than 7 days old.");
  if (!window[d] && window.JSON) {
    var h = (window[d] = {
      __buffer: {
        replay: function () {
          for (
            var a = this,
              b = function (b) {
                var e = window[d];
                a.calls[b][0].split(".").forEach(function (a) {
                  return (e = e[a]);
                });
                e.apply(null, a.calls[b][1]);
              },
              e = 0;
            e < this.calls.length;
            e++
          )
            b(e);
          this.calls = [];
        },
        calls: [],
        opts: null,
      },
      getUserID: function () {
        return "";
      },
      getAuthResponse: function () {
        return null;
      },
      getAccessToken: function () {
        return null;
      },
      init: function (a) {
        h.__buffer.opts = a;
      },
    });
    for (b = 0; b < e.length; b++)
      if (((g = e[b]), !(g in h))) {
        for (var k = g.split("."), m = k.pop(), n = h, p = 0; p < k.length; p++)
          n = n[k[p]] || (n[k[p]] = {});
        n[m] = (function (a) {
          if ("init" !== a)
            return function () {
              h.__buffer.calls.push([a, Array.prototype.slice.call(arguments)]);
            };
        })(g);
      }
    p = a;
    (k = /Chrome\/(\d+)/.exec(navigator.userAgent)) &&
      55 <= Number(k[1]) &&
      "assign" in Object &&
      "findIndex" in [] &&
      (p += "\x26ua\x3dmodern_es6");
    n = document.createElement("script");
    n.src = p;
    n.async = !0;
    f && (n.crossOrigin = "anonymous");
    m = document.getElementsByTagName("script")[0];
    m.parentNode && m.parentNode.insertBefore(n, m);
  }
})(
  "https://connect.facebook.net/vi_VN/sdk.js?hash\x3d0e31dc77ec8e59964f72312adb37eccd",
  1590564708,
  "FB",
  "AppEvents.EventNames AppEvents.ParameterNames AppEvents.activateApp AppEvents.clearAppVersion AppEvents.clearUserID AppEvents.getAppVersion AppEvents.getUserID AppEvents.logEvent AppEvents.logPageView AppEvents.logPurchase AppEvents.setAppVersion AppEvents.setUserID AppEvents.updateUserProperties Canvas.Plugin.showPluginElement Canvas.Plugin.hidePluginElement Canvas.Prefetcher.addStaticResource Canvas.Prefetcher.setCollectionMode Canvas.getPageInfo Canvas.scrollTo Canvas.setAutoGrow Canvas.setDoneLoading Canvas.setSize Canvas.setUrlHandler Canvas.startTimer Canvas.stopTimer Event.subscribe Event.unsubscribe XFBML.parse addFriend api getAccessToken getAuthResponse getLoginStatus getUserID init login logout publish share ui".split(
    " "
  ),
  !0
);
var bk = bk || {};
BkGlobal = {
  chooseGameScene: null,
  afterLoginScene: null,
  lobbyScene: null,
  ingameScene: null,
  currentGameID: -1,
  currentRoomID: -1,
  currentTableID: -1,
  isSwitchToCurrentScene: !1,
  currentGS: -1,
  clientID: null,
  isReceiveSyncEvent: !1,
  isTabActive: !0,
  isSwitchSceneAnimation: !1,
  isLoadedFont: !1,
  isLoadedChatEmo: !1,
  isLoadedAfterRes: !1,
  isNewRegistraion: !1,
  recallFuntion: null,
  isPhoneNumberUpdatable: !1,
  clientDeviceCheck: 0,
  isLoginFacebook: !1,
  isFbLinkable: !1,
  isFbRenameable: !1,
  isFbCreateablePass: !1,
  addMoneyBonusType: 0,
  paymentBonusPercent: 0,
  leavingGameReason: 0,
  isAutoCreateAccount: !1,
  bonusObj: null,
  UserInfo: null,
  UserSetting: null,
  isReanamable: !1,
  isConnectedFB: !1,
  fbUserID: "",
  fbUserToken: "",
  tempData: null,
  isInBackground: !1,
  isFistLoginInday: !1,
  isNeedLoadSetting: !1,
  stateRequestGetSettingAds: -1,
  adsContinueShowFlg: 1,
  isPushFullScreenAds: !1,
  isNetworkConnected: !0,
  lastFullScreenPartnerType: -1,
  lastFullScreenAdsType: -1,
  crVideoRewardedPartner: -1,
  nextVideoRewardedPartner: -1,
  crInterStitialPartner: -1,
  nextInterStitialPartner: -1,
  partnerAdsBanner: -1,
  resetGlobalData: function () {
    this.currentTableID = this.currentRoomID = this.currentGameID = -1;
    BkGlobal.currentGS = -1;
    this.ingameScene = this.lobbyScene = this.afterLoginScene = this.chooseGameScene = null;
    this.isLoadedAfterRes = this.isLoadedChatEmo = this.isLoadedFont = !1;
    cc.username = "";
    cc.password = "";
  },
  getCurrentRoomType: function () {
    return 0;
  },
  isRoomTypeSolo: function () {
    return !1;
  },
  isGameCo: function () {
    return !1;
  },
  currentServerTime: null,
};
var ZigaLoadingLayer = cc.Layer.extend({
    sprite: null,
    TEXT_BOX_HEIGHT_SCALE_IN_SCREEN: 10,
    TEXT_BOX_WIDTH_SCALE_WITH_HEIGHT: 8,
    ctor: function () {
      this._super();
      var a = cc.winSize;
      this.sprite = new BkSprite(res.main_screen_background);
      var b = a.width / this.sprite.getContentSize().width,
        d = a.height / this.sprite.getContentSize().height;
      b < d && (b = d);
      this.sprite.setScale(b);
      this.sprite.attr({ x: a.width / 2, y: a.height / 2 });
      this.addChild(this.sprite, 0);
      return !0;
    },
    testAds: function () {
      Util.httpRequest("http://config.zigavn.com/WebCo/", function (a, b) {
        if (a) logMessage("err: " + a);
        else {
          logMessage("respondText: " + b);
          var d = JSON.parse(b);
          logMessage("myip: " + d.myip);
          logMessage("serveripaddress: " + d.serveripaddress);
          logMessage("newsip: " + d.newsip);
        }
      });
    },
    testLoadResAndStore: function () {
      logMessage("testLoadResAndStore ++");
      var a = getFullImagePath("dinhthuquan_bg.png");
      jsb.fileUtils.isFileExist(a)
        ? (logMessage("isFileExist"), this.testShowImageLoaded(a))
        : NativeInterface.loadImageFromUrl(
            "https://chanvanvan.com/test/ResTest/dinhthuquan_bg.png",
            "dinhthuquan_bg.png"
          );
    },
    testShowImageLoaded: function (a) {
      logMessage("testShowImageLoaded ++" + a);
      var b = cc.winSize;
      a = new cc.Sprite(a);
      a.setScaleX((0.2 * b.width) / a.getContentSize().width);
      a.setScaleY((0.2 * b.height) / a.getContentSize().height);
      a.attr({ x: b.width / 2, y: b.height / 2 });
      this.addChild(a, 10);
    },
    loadedImg: function (a) {
      logMessage("loadedImg");
      a = saveTexture(a, "dinhthuquan_bg.png");
      this.testShowImageLoaded(a);
    },
    testLoadJsFileAndShow: function () {
      logMessage("testLoadJsFileAndShow");
      var a = jsb.fileUtils.getWritablePath(),
        a = a + "srcLoaded/",
        b = a + "SceneLoadFromServer.js";
      if (jsb.fileUtils.isFileExist(b))
        logMessage("isFileExist -\x3e show"),
          require(b),
          cc.director.runScene(new SceneLoadFromServer());
      else {
        logMessage("!isFileExist -\x3e load");
        var d = cc.loader.getXMLHttpRequest();
        d.open(
          "GET",
          "https://chanvanvan.com/test/ResTest/SceneLoadFromServer.js"
        );
        d.onreadystatechange = function () {
          if (4 == d.readyState && 200 <= d.status && 207 >= d.status) {
            logMessage("xhr.responseText " + d.responseText);
            var e = d.responseText;
            jsb.fileUtils.createDirectory(a);
            jsb.fileUtils.writeStringToFile(e, b)
              ? (logMessage("see the plist file at " + b),
                require(b),
                cc.director.runScene(new SceneLoadFromServer()))
              : logMessage("write plist file failed");
          }
        };
        d.send(null);
      }
    },
    numberLoad: 0,
    informtext: "",
    getUrl: function () {
      if (0 === this.numberLoad) return Util.getLastUrlSetting();
      logMessage("this.numberLoad " + this.numberLoad);
      return 1 === this.numberLoad
        ? URL_SETTING.URL1
        : 2 === this.numberLoad
        ? URL_SETTING.URL2
        : 3 === this.numberLoad
        ? URL_SETTING.URL3
        : 4 === this.numberLoad
        ? URL_SETTING.URL4
        : 5 === this.numberLoad
        ? URL_SETTING.URL5
        : null;
    },
    loadSettingIPPort: function () {
      if (!isFBInstantGame()) {
        Util.showAnim(!1);
        var a = this.getUrl();
        logMessage("url: " + a);
        if (null === a)
          logMessage("load 5 lan khong thanh cong -\x3e show popup"),
            (this.numberLoad = 0),
            this.showLostConnectionPopup();
        else {
          this.numberLoad++;
          var b = this;
          Util.httpRequest(a, function (d, e) {
            Util.removeAnim();
            if (d) logMessage("err: " + d), b.loadSettingIPPort();
            else {
              logMessage("respondText: " + e);
              var f = JSON.parse(e);
              logMessage("done load -\x3e autologin " + f.serveripaddress);
              a != URL_SETTING.URL5
                ? (b.informtext = f.informtext)
                : Util.isNullOrEmpty(this.informtext) ||
                  (b.informtext = f.informtext);
              b.showInformText();
              Util.setServerIPAddress(f.serveripaddress);
              Util.setLastUrlSetting(a);
              b.doAutoLoginGame();
            }
          });
          NativeInterface.logFirebaseEvent(
            EVENT_NAME.LOAD_SETTING,
            Util.createActionJsonDataLogEventFirebase(EVENT_NAME.LOAD_SETTING)
          );
        }
      }
    },
    showInformText: function () {
      if (!Util.isNullOrEmpty(this.informtext)) {
        var a = this;
        showPopupMessageWith(this.informtext, "", null, function () {
          a.onCloseCB();
        });
      }
    },
    showLostConnectionPopup: function (a) {
      logMessage("removeAnim: showLostConnectionPopup");
      Util.removeAnim();
      var b = this;
      a = BkConstString.STR_NETWORK_LOST_CONNECT;
      Util.isNullOrEmpty(this.informtext) || (a = this.informtext);
      logMessage("this.informtext: " + this.informtext);
      logMessage("str: " + a);
      showPopupMessageWith(a, "", null, function () {
        b.onCloseCB();
      });
    },
    timeOutCallback: function () {
      logMessage("show showAnim-\x3e load setting");
      BkConnectionManager.closeConnection();
      this.loadSettingIPPort();
    },
    doAutoLoginGame: function () {
      logMessage("doAutoLoginGame");
      var a = this;
      Util.showAnim(!1, function () {
        a.timeOutCallback();
      });
      BkLogicManager.getLogic().doAutoRegLogin();
    },
    processInitGame: function () {
      logMessage("processInitGame");
      if (NativeInterface.networkAvaiable()) this.doAutoLoginGame();
      else {
        var a = this;
        showPopupMessageWith(
          "Hi\u1ec7n m\u00e1y c\u1ee7a b\u1ea1n \u0111ang kh\u00f4ng k\u1ebft n\u1ed1i m\u1ea1ng, h\u00e3y b\u1eadt Wifi/3G \u0111\u1ec3 k\u1ebft n\u1ed1i v\u00e0 th\u1ef1c hi\u1ec7n l\u1ea1i sau!",
          "",
          null,
          function () {
            a.onCloseCB();
          }
        );
      }
    },
    onCloseCB: function () {
      var a = new BkLabel(
        "Ch\u1ea1m v\u00e0o m\u00e0n h\u00ecnh \u0111\u1ec3 k\u1ebft n\u1ed1i l\u1ea1i.",
        "",
        40
      );
      a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
      a.setScale(GAME_SCALE);
      a.x = cc.winSize.width / 2;
      a.y = 0.6 * cc.winSize.height;
      this.addChild(a);
      var b = this;
      this.sprite.setOnlickListenner(function () {
        b.processInitGame();
      });
      cc.spriteFrameCache.addSpriteFrames(
        res.main_screen_plist_sps,
        res.main_screen_png_sps
      );
      a = new BkButton(
        res_name.btn_no_text,
        res_name.btn_no_text_press,
        res_name.btn_no_text,
        res_name.btn_no_text,
        ccui.Widget.PLIST_TEXTURE
      );
      a.setTitleText("H\u1ed7 tr\u1ee3");
      a.setTitleFontName(Util.getBtnFontName());
      a.setTitleFontSize(31);
      a.setTitleColor(cc.color(71, 44, 27));
      a.getTitleRenderer().y += 0.1 * a.getBoundingBox().height;
      a.setScale(GAME_SCALE);
      a.x = cc.winSize.width / 2;
      a.y = 0.4 * cc.winSize.height;
      this.addChild(a);
      a.addClickEventListener(function () {
        cc.sys.os == cc.sys.OS_ANDROID
          ? NativeInterface.openURLMessenger("https://m.me/zigavn")
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            NativeInterface.openURL("https://m.me/zigavn");
      });
    },
  }),
  ZigaLoadingScene = cc.Scene.extend({
    loadingLayer: null,
    onEnter: function () {
      this._super();
      logMessage("ZigaLoadingScene onEnter:");
      Util.setIsRestarting(0);
      cc.spriteFrameCache.addSpriteFrames(
        res.popup_resource_plist_sps,
        res.popup_resource_png_sps
      );
      this.loadingLayer = new ZigaLoadingLayer();
      this.addChild(this.loadingLayer);
    },
    onEnterTransitionDidFinish: function () {
      this._super();
      this.scheduleUpdate();
      NativeInterface.hideSlashScreenAndroid();
    },
    update: function () {
      var a = getCurrentScene();
      null != a &&
        a instanceof ZigaLoadingScene &&
        (this.unscheduleUpdate(), this.processInitGame());
    },
    processInitGame: function () {
      this.loadingLayer.processInitGame();
    },
  });
var res_name = {
    GAME_FONT: "Roboto-Regular",
    GAME_FONT_BOLD: "Roboto-Medium",
    GAME_FONT_ITALIC: "Roboto-Italic",
    GAME_FONT_BOLD_ITALIC: "Roboto-MediumItalic.ttf",
    GAME_FONT_BTN: "UVNButLong1",
    BITMAP_GAME_FONT_TCM_THUA: "res/m/fonts/bmfont2.fnt",
    BITMAP_GAME_FONT_TCM: "res/m/fonts/bmfont1.fnt",
    btn_moiban_normal: "btn_moiban_normal.png",
    btn_moiban_hover: "btn_moiban_hover.png",
    btn_moiban_pressed: "btn_moiban_pressed.png",
    btn_chiase_hover: "btn_chiase_hover.png",
    btn_chiase_normal: "btn_chiase_normal.png",
    btn_chiase_pressed: "btn_chiase_pressed.png",
    btn_sharefb_normal: "btn_sharefb_normal.png",
    btn_sharefb_pressed: "btn_sharefb_pressed.png",
    btn_sharefb_hover: "btn_sharefb_hover.png",
    bg_bottom_bar: "bottom_bar.png",
    icon_cotuongcham: "icon_cotuongcham_normal.png",
    icon_cotuongcham_hover: "icon_cotuongcham_pressed.png",
    icon_cotuongcham_pressed: "icon_cotuongcham_pressed.png",
    icon_cotuongnhanh: "icon_cotuongnhanh_normal.png",
    icon_cotuongnhanh_hover: "icon_cotuongnhanh_hover.png",
    icon_cotuongnhanh_pressed: "icon_cotuongnhanh_pressed.png",
    icon_coupcham: "icon_coupcham_normal.png",
    icon_coupcham_hover: "icon_coupcham_hover.png",
    icon_coupcham_pressed: "icon_coupcham_pressed.png",
    icon_coupnhanh: "icon_coupnhanh_normal.png",
    icon_coupnhanh_hover: "icon_coupnhanh_hover.png",
    icon_coupnhanh_pressed: "icon_coupnhanh_pressed.png",
    co_tuong_ico: "co_tuong_icon.png",
    co_up_ico: "co_up_icon.png",
    btn_closepopup_normal: "btn_closepopup_normal.png",
    btn_closepopup_hover: "btn_closepopup_hover.png",
    btn_closepopup_pressed: "btn_closepopup_pressed.png",
    bg_ads: "bg_ads.png",
    icon_ads_bigkool_normal: "icon_bigkool_normal.png",
    icon_ads_bigkool_hover: "icon_bigkool_hover.png",
    icon_ads_chan_normal: "icon_chan_normal.png",
    icon_ads_chan_hover: "icon_chan_hover.png",
    bg_profile: "bg_profile.png",
    btn_edit_profile: "btn_edit_profile.png",
    btn_edit_profile_hover: "btn_edit_hover.png",
    btn_save_profile: "btn_save.png",
    btn_save_profile_hover: "btn_save_hover.png",
    hotnews_bg: "popup.png",
    hotnews_btn_close_normal: "btn_dong_normal.png",
    hotnews_btn_close_hover: "btn_dong_hover.png",
    hotnews_btn_close_pressed: "btn_dong_pressed.png",
    hotnews_checkbox_normal: "checkbox_normal.png",
    hotnews_checkbox_pressed: "checkbox_pressed.png",
    hotnews_tab_active: "tab_normal.png",
    hotnews_tab_inactive: "tab_pressed.png",
    popup_login_bg: "popup_login.png",
    popup_khoiphucmk: "popup_khoiphucmk.png",
    btnTab_login_active: "btn_active.png",
    btnTab_login_inactive: "btn_inactive.png",
    iconWarning_login: "icon_warning.png",
    textbox_bg_login: "textbox.png",
    btnLoginNormal: "btn_login_normal.png",
    btnLoginHover: "btn_login_hover.png",
    btnLoginPress: "btn_login_pressed.png",
    btnLoginFacebookNormal: "btn_loginfacebook_normal.png",
    btnLoginFacebookHover: "btn_loginfacebook_hover.png",
    btnLoginFacebookPress: "btn_loginfacebook_pressed.png",
    checkboxLoginNormal: "login_checkbox_unchecked.png",
    checkboxLoginChecked: "login_checkbox_checked.png",
    hoacSprite: "line_hoac.png",
    Chess_addplayer: "Chess_addplayer.png",
    Chess_countdown: "Chess_countdown.png",
    ChessRedStatus: "Chess_redstatus.png",
    ActiveAvatar: "active_avatar.png",
    SelectedPiece: "cochonquan.png",
    MovablePiece: "nuocdi.png",
    LastMovePiece: "nuocvuadi.png",
    LastMovePieceStart: "nuoc_vua_di_small.png",
    CanTakenPiece: "trangthai_quananduoc.png",
    ChieuTuongPiece: "trangthai_chieutuong.png",
    BatDauState: "batdau.png",
    HoaState: "hoa.png",
    ChieuTuongState: "chieutuong.png",
    ChessRule: "btn_rule.png",
    ChessToast: "Chess_toast.png",
    BoxQuanAn: "box_quanan.png",
    TimeBoxRed: "time_box_red.png",
    TimeBoxBlack: "time_box_black.png",
    bg_heart_box: "bg_heart_box.png",
    Chess_btn_cauhoa_normal: "Chess_btn_cauhoa_normal.png",
    Chess_btn_cauhoa_pressed: "Chess_btn_cauhoa_pressed.png",
    Chess_btn_cauhoa_hover: "Chess_btn_cauhoa_hover.png",
    Chess_btn_xinthua_normal: "Chess_btn_xinthua_normal.png",
    Chess_btn_xinthua_pressed: "Chess_btn_xinthua_pressed.png",
    Chess_btn_xinthua_hover: "Chess_btn_xinthua_hover.png",
    rb_uncheck: "rb_uncheck.png",
    rb_uncheck_hover: "rb_uncheck_hover.png",
    rb_check: "rb_check.png",
    rb_uncheck_disable: "rb_uncheck_disable.png",
    rb_check_disable: "rb_check_disable.png",
    checkbox_unchecked: "checkbox_unchecked.png",
    checkbox_unchecked_hover: "checkbox_unchecked_hover.png",
    checkbox_checked: "checkbox_checked.png",
    checkbox_unchecked_disable: "checkbox_unchecked_disable.png",
    checkbox_checked_disable: "checkbox_checked_disable.png",
    ImgLeave: "icon_roiban.png",
    ImgLeaveHover: "icon_roiban_hover.png",
    ImgLeave_chess: "icon_roiban_chess.png",
    ImgLeaveHover_chess: "icon_roiban_hover_chess.png",
    ImgNapXu: "btn_napxu.png",
    ImgNapXuHover: "btn_napxu_hover.png",
    ImgTabChooGameNormal: "choseTable_tab_inActive.png",
    ImgTabChooGameSelect: "choseTable_tab_active.png",
    ImgTabChooGameDeSelect: "choseTable_tab_inActive.png",
    ImgTabChooGameDeSelectHover: "choseTable_tab_inActive_hover.png",
    ImgBgAvarAcc: "background_ava_account.png",
    ImgBgAvarAccHover: "background_ava_account_hover.png",
    Btn_Chat_Text: "icon_chat_text.png",
    Btn_Chat_Text_Hover: "icon_chat_text_hover.png",
    Btn_Chat_Smile: "chat_icon_smile.png",
    Btn_Chat_Smile_Hover: "chat_icon_smile_hover.png",
    Btn_Chat_Down: "chat_icon_down.png",
    Chess_Btn_Chat_Down: "chess_chat_icon_down.png",
    Btn_Chat_Down_Hover: "chat_icon_down_hover.png",
    Btn_Chat_Up: "chat_icon_up.png",
    Chess_Btn_Chat_Up: "chess_chat_icon_up.png",
    Btn_Chat_Up_Hover: "chat_icon_up_hover.png",
    btn_scale2: "btn_scale2.png",
    btn_scale2_hover: "btn_scale2_hover.png",
    btn_scale: "btn_scale.png",
    btn_scale_hover: "btn_scale_hover.png",
    btn_camera: "btn_camera.png",
    btn_camera_hover: "btn_camera_hover.png",
    btn_guide: "btn_guide.png",
    btn_guide_hover: "btn_guide_hover.png",
    btn_caothu: "btn_caothu.png",
    btn_caothu_hover: "btn_caothu_hover.png",
    btn_setting: "btn_setting.png",
    btn_setting_hover: "btn_setting_hover.png",
    btn_friend_top: "btn_friend_top.png",
    btn_friend_top_hover: "btn_friend_top_hover.png",
    btn_am_thanh_off: "btn_am_thanh_off.png",
    btn_am_thanh_on: "btn_am_thanh_on.png",
    Lock_IMG: "lock.png",
    Chess_Running_IMG: "chess_running.png",
    Game_Running_IMG: "game_running.png",
    Room_Door_IMG: "room_door_active.png",
    Room_Hover_IMG: "roomList_bg_hover.png",
    Room_Select_IMG: "roomList_bg_selected.png",
    Room_No_Active_IMG: "room_door_no_active.png",
    chooseTable_line_between_IMG: "chooseTable_line_between_2Room.png",
    icon_hot: "icon_hot.png",
    icon_new: "icon_new.png",
    icon_3Cay_active: "icon_3Cay_active.png",
    icon_3Cay_hover: "icon_3Cay_hover.png",
    icon_3Cay_waiting: "icon_3Cay_disable.png",
    icon_CoTuong_active: "icon_CoTuong_active.png",
    icon_CoTuong_hover: "icon_CoTuong_hover.png",
    icon_CoTuong_waiting: "icon_CoTuong_disable.png",
    icon_CoUp_active: "icon_CoUp_active.png",
    icon_CoUp_hover: "icon_CoUp_hover.png",
    icon_CoUp_waiting: "icon_CoUp_disable.png",
    icon_Chan_active: "icon_Chan_active.png",
    icon_Chan_hover: "icon_Chan_hover.png",
    icon_Chan_waiting: "icon_Chan_disable.png",
    icon_Lieng_active: "icon_Lieng_active.png",
    icon_Lieng_hover: "icon_Lieng_hover.png",
    icon_Lieng_waiting: "icon_Lieng_disable.png",
    icon_Poker_active: "icon_Poker_active.png",
    icon_Poker_hover: "icon_Poker_hover.png",
    icon_Poker_waiting: "icon_Poker_disable.png",
    icon_Phom_active: "icon_Phom_active.png",
    icon_Phom_hover: "icon_Phom_hover.png",
    icon_Phom_waiting: "icon_Phom_disable.png",
    icon_Sam_active: "icon_Sam_active.png",
    icon_Sam_hover: "icon_Sam_hover.png",
    icon_Sam_waiting: "icon_Sam_disable.png",
    icon_TLMN_active: "icon_TLMN_active.png",
    icon_TLMN_hover: "icon_TLMN_hover.png",
    icon_TLMN_waiting: "icon_TLMN_disable.png",
    icon_TLMNDL_active: "icon_TLMNDL_active.png",
    icon_TLMNDL_hover: "icon_TLMNDL_hover.png",
    icon_TLMNDL_waiting: "icon_TLMNDL_disable.png",
    icon_xiTo_active: "icon_xiTo_active.png",
    icon_xiTo_hover: "icon_xiTo_hover.png",
    icon_xiTo_waiting: "icon_xiTo_disable.png",
    icon_MauBinh_active: "icon_MauBinh_active.png",
    icon_MauBinh_hover: "icon_MauBinh_hover.png",
    icon_MauBinh_waiting: "icon_MauBinh_disable.png",
    icon_Xizach_active: "icon_Xizach_active.png",
    icon_Xizach_hover: "icon_Xizach_hover.png",
    icon_Xizach_waiting: "icon_Xizach_disable.png",
    icon_Xeng_active: "icon_Xeng_active.png",
    icon_Xeng_hover: "icon_Xeng_hover.png",
    icon_Xeng_waiting: "icon_Xeng_disable.png",
    btn_friend_hover: "btn_friend_hover.png",
    btn_friend_disable: "btn_friend_disable.png",
    btn_friend_normal: "btn_friend_normal.png",
    btn_friend_normal_press: "btn_friend_normal_press.png",
    page1: "page1.png",
    page2: "page2.png",
    btn_bottom_bonus: "btn_bottom_bonus.png",
    btn_bottom_bonus_hover: "btn_bottom_bonus_hover.png",
    btn_bottom_bonus_pressed: "btn_bottom_bonus_pressed.png",
    btn_bottom_email: "btn_bottom_email.png",
    btn_bottom_email_hover: "btn_bottom_email_hover.png",
    btn_bottom_email_pressed: "btn_bottom_email_pressed.png",
    btn_bottom_friend: "btn_bottom_friend.png",
    btn_bottom_friend_hover: "btn_bottom_friend_hover.png",
    btn_bottom_friend_pressed: "btn_bottom_friend_pressed.png",
    btn_bottom_shop: "btn_bottom_shop.png",
    btn_bottom_shop_hover: "btn_bottom_shop_hover.png",
    btn_bottom_shop_pressed: "btn_bottom_shop_pressed.png",
    btn_bottom_task: "btn_bottom_task.png",
    btn_bottom_task_hover: "btn_bottom_task_hover.png",
    btn_bottom_task_pressed: "btn_bottom_task_pressed.png",
    btn_napTienNew: "btn_napTienNew.png",
    btn_napTienNew_hover: "btn_napTienNew_hover.png",
    icon_addMoney: "icon_addMoney.png",
    icon_addMoney_hover: "icon_addMoney_hover.png",
    bg_addMoney: "bg_addMoney.png",
    bg_addMoney_hover: "bg_addMoney_hover.png",
    bg_addMoney_chess: "bg_addMoney_chess.png",
    bg_addMoney_hover_chess: "bg_addMoney_hover_chess.png",
    btn_next: "btn_next.png",
    btn_prev: "btn_prev.png",
    bg_notification_email: "bg_notification_email.png",
    bg_thongBaoCachDoiTen: "bg_thongBaoCachDoiTen.png",
    bg_content_shadow: "bg_content_shadow.png",
    BtnClose_Window: "btn_close_popup.png",
    BtnClose_Window_hover: "btn_close_hover_popup.png",
    btnTab_selected: "Tab_active_popup.png",
    btnTab_deselected: "Tab_no_active_popup.png",
    btnTab_deselected_hover: "Tab_no_active_hover_popup.png",
    btn_next_small: "btn_next_small.png",
    btn_back_small: "btn_back_small.png",
    line_big_h: "line_big.png",
    line_medium_h: "line_medium.png",
    bg_avatar_profile: "bg_avatar_profile.png",
    bg_thanhTich: "bg_thanhTich.png",
    bg_KoXepHang: "bg_khongXepHang.png",
    bg_XepHang: "bg_xepHang.png",
    icon_lose: "icon_lose.png",
    viettel_select: "viettel_select.png",
    mobi_select: "mobi_select.png",
    vina_select: "vina_select.png",
    arrow_pos: "arrow_the_pos.png",
    sms_2_item: "sms_2_item.png",
    sms_4_item: "sms_4_item.png",
    arrow_sent: "btn_muiten_sms.png",
    note_bg: "bg_note_sms.png",
    edit_text: "edit_text.png",
    edit_text_white: "edit_text_white.png",
    icon_guiMail: "icon_guiMail.png",
    icon_guiMail_hover: "icon_guiMail_hover.png",
    icon_delete: "icon_delete.png",
    icon_delete_hover: "icon_delete_hover.png",
    icon_add_friend: "icon_addFriend.png",
    btn_choingay_hover: "btn_choingay_hover.png",
    btn_choingay_normal: "btn_choingay_normal.png",
    btn_choingay_pressed: "btn_choingay_pressed.png",
    BtnDialog_Normal: "btn_no_text.png",
    BtnDialog_Pressed: "btn_no_text_press.png",
    BtnDialog_Inactive: "btn_no_text.png",
    BtnDialog_Hover: "btn_no_text_press.png",
    btn_dong_hover: "btn_dong_hover.png",
    btn_dong_normal: "btn_dong_normal.png",
    btn_dong_pressed: "btn_dong_pressed.png",
    btn_moi_hover: "btn_moi_hover.png",
    btn_moi_normal: "btn_moi_normal.png",
    btn_moi_pressed: "btn_moi_pressed.png",
    btn_dongy_hover: "btn_dongy_hover.png",
    btn_dongy_normal: "btn_dongy_normal.png",
    btn_dongy_pressed: "btn_dongy_pressed.png",
    btn_huybo_normal: "btn_huybo_normal.png",
    btn_huybo_pressed: "btn_huybo_pressed.png",
    btn_huybo_hover: "btn_huybo_hover.png",
    btn_duoi_hover: "btn_duoi_hover.png",
    btn_duoi_normal: "btn_duoi_normal.png",
    btn_duoi_pressed: "btn_duoi_pressed.png",
    btn_big_normal: "btn_big_normal.png",
    btn_big_press: "btn_big_normal_press.png",
    btn_big_hover: "btn_big_hover.png",
    btn_big_disable: "btn_big_disable.png",
    btn_ready_normal: "btn_sanSang.png",
    btn_ready_press: "btn_sanSang_press.png",
    btn_ready_hover: "btn_sanSang_hover.png",
    btn_small_normal: "btn_small_normal.png",
    btn_small_hover: "btn_small_hover.png",
    icon_sound_off: "icon_sound_off.png",
    icon_sound_on: "icon_sound_on.png",
    MailUnreadIcon: "icon_unread_mail.png",
    MailReadIcon: "icon_read_mail.png",
    chat_bg_mini: "chat_bg_mini.png",
    card_mask: "mask.png",
    verticalBack: "vertical_back.png",
    arrow: "arrow.png",
    btn_tienCuoc_normal: "btn_tienCuoc.png",
    btn_tienCuoc_Hover: "btn_tienCuoc_hover.png",
    btn_tiencuoc_chess_normal: "btn_tiencuoc_chess_normal.png",
    btn_tiencuoc_chess_hover: "btn_tiencuoc_chess_hover.png",
    btn_tienCuoc_chess_pressed: "btn_tiencuoc_chess_pressed.png",
    Img_Gold_Box: "luckybox_close.png",
    icon_offline: "icon_offline.png",
    icon_online: "icon_online.png",
    ToastBG_png: "toast_background.png",
    busy_indicator: "busy_indicator.png",
    tooltip_bg_arrow: "tooltip_bg_arrow.png",
    tooltip_bg: "tooltip_bg.png",
    btn_googleplay_normal: "btn_playstore_normal.png",
    btn_googleplay_hover: "btn_playstore_normal.png",
    btn_appstore_normal: "btn_apple_normal.png",
    btn_appstore_hover: "btn_apple_normal.png",
    btn_windowsphone_normal: "btn_download_windows.png",
    btn_windowsphone_hover: "btn_download_windows_hover.png",
    btn_dangnhap_normal: "btn_dangNhap.png",
    btn_dangnhap_hover: "btn_dangNhap_hover.png",
    btn_dangnhap_pressed: "btn_dangNhap_pressed.png",
    btn_dangky_normal: "btn_dangKy.png",
    btn_dangky_hover: "btn_dangKy_hover.png",
    btn_dangky_pressed: "btn_dangKy_pressed.png",
    btn_previous_normal: "btn_prev_FB.png",
    btn_previous_hover: "btn_prev_hover_FB.png",
    btn_previous_press: "btn_prev_press_FB.png",
    btn_previous_disable: "btn_prev_disable_FB.png",
    btn_next_normal: "btn_next_FB.png",
    btn_next_hover: "btn_next_hover_FB.png",
    btn_next_press: "btn_next_press_FB.png",
    btn_next_disable: "btn_next_disable_FB.png",
    check_slected: "check_dachon.png",
    green_frame: "popup_MoiBan_Greenframe.png",
    gray_frame: "popup_MoiBan_Grayframe.png",
    default_Avatar: "default_avatar.jpg",
    Body_Nosub_Window: "window_noSubTab_body_bg.png",
    Header_Nosub_Window: "window_noSbTab_header.png",
    Body_Window: "window_body_bg.png",
    Body_Content_Window: "window_body_content_bg.png",
    darkbg_popupmoiban: "darkbg_popupmoiban.png",
    bg_daily_task: "bg_daily_task.png",
    bg_avatar_area: "bg_avatar_area.png",
    Header_Window: "window_header.png",
    Bottom_Window: "window_bottom.png",
    icon_check: "icon_check.png",
    luckyBoxbg: "LuckyBoxbg.jpg",
    popup_quaTang: "popup_quaTang.jpg",
    btnPopupQuaTang: "btnPopupQuaTang.png",
    btnPopupQuaTang_hover: "btnPopupQuaTang_hover.png",
    openBox: "OpenBox.png",
    closeBox: "CloseBox.png",
    textInstruction_bg: "bg_tien-thuong.png",
    icon_moiBan: "icon_moiBan.png",
    icon_hopQua: "icon_hopQua.png",
    icon_dangkysdt: "icon_dangkysdt.png",
    daily_task_open: "daily_task_open.png",
    daily_task_close: "daily_task_close.png",
    icon_daily_task: "icon_daily_task.png",
    promotionbg: "promotionbg.png",
    title: "title_nhanthuong.png",
    xacthucTK_sdt_bg: "xacThucTK_bg.png",
    hoanThanhNV_Bg: "HoanThanhNV_bg.png",
    moibanFB_bg: "moiBanFB_bg.png",
    btnNhanXu: "btn_nhanxu.png",
    thuongnapthe_bg: "napThe_bg.png",
    btnNhanXuDisable: "btn_nhanxu_disable.png",
    btnNhanXuPress: "btn_nhanxu_press.png",
    btnNhanXu_hover: "btn_nhanxu_hover.png",
    btnThucHien: "btn_ThucHien.png",
    btnThucHienDisable: "btn_ThucHien_disable.png",
    btnThucHienHover: "btn_ThucHien_hover.png",
    btnThucHienPress: "btn_ThucHien_press.png",
    registerPhoneB1: "btn_buoc1_active.png",
    registerPhoneB2: "btn_buoc2_active.png",
    popup_dangkysdt: "popup_dangkysdt.png",
    popup_leaderboard_bg: "popup_leaderboard_bg.png",
    caothugame_bg: "caothugame_bg.png",
    top_bg_hover: "top_bg_hover.png",
    popup_top_by_game_bg: "popup_top_by_game_bg.png",
    icon_topDaiGia: "icon_topDaiGia.png",
    icon_topNhietTinh: "icon_topNhietTinh.png",
    tab_top_no_active_hover: "tab_top_no_active_hover.png",
    tab_top_no_active: "tab_top_no_active.png",
    tab_top_active: "tab_top_active.png",
    cao_thu_name_bg: "cao_thu_name_bg.png",
    top_1st_bg: "top_1st_bg.png",
    rank_bg: "rank_bg.png",
    top_10_bg: "top_10_bg.png",
    icon_level: "icon_level.png",
    top_goldcoin: "goldcoin.png",
    top_row_list_hover: "top_row_list_hover.png",
    win: "win.png",
    top_1st: "top_1st.png",
    top_2rd: "top_2rd.png",
    top_3rd: "top_3rd.png",
    btnXet1_IMG: "btn_xet_01.png",
    btnXet1_hover_IMG: "btn_xet_01_hover.png",
    btnXet2_IMG: "btn_xet_02.png",
    btnXet2_hover_IMG: "btn_xet_02_hover.png",
    btnXethet: "btn_xetHet.png",
    btnXethet_press: "btn_xetHet_press.png",
    btnXethet_hover: "btn_xetHet_hover.png",
    EatCard_IMG: "line_outer_poker.png",
    btnGui1_IMG: "send_01.png",
    btnGui1_hover_IMG: "send_01_hover.png",
    btnGui2_IMG: "send_02.png",
    btnGui2_hover_IMG: "send_02_hover.png",
    bg_bet_button_group: "background_bet_button.png",
    btn_check: "btn_lightBlue_medium.png",
    btn_check_hover: "btn_lightBlue_medium_hover.png",
    btn_check_press: "btn_lightBlue_medium_press.png",
    btn_allIn: "btn_ToTat.png",
    btn_allIn_press: "btn_ToTat_press.png",
    btn_allIn_hover: "btn_ToTat_hover.png",
    bg_lbl_bet_money: "bg_lbl_bet_money.png",
    invisible_btn: "invisible_btn.png",
    bg_suite_name: "bg_suite_name.png",
    bg_suite_name_hover: "bg_suite_name_hover.png",
    bg_suite_detail: "bg_suite_detail.png",
    round_bet_check: "round_bet_check.png",
    round_bet_raise: "round_bet_raise.png",
    round_bet_fold: "round_bet_fold.png",
    round_bet_all_in: "round_bet_all_in.png",
    bet_money_bg0: "bet_money_bg0.png",
    bet_money_bg1: "bet_money_bg1.png",
    card_black_mask: "card_invisible.png",
    result_normal_bg: "result_normal_bg.png",
    slider_dot: "slider_dot.png",
    winner_thungphasanh: "nameGame_ThungPhaSanh.png",
    winner_tuquy: "nameGame_TuQuy.png",
    winner_culu: "nameGame_CuLu.png",
    winner_thung: "nameGame_Thung.png",
    winner_sanh: "nameGame_Sanh.png",
    winner_samco: "nameGame_XamCo.png",
    winner_thu: "nameGame_Thu.png",
    winner_doi: "nameGame_Doi.png",
    winner_mauthau: "nameGame_MauThau.png",
    bet_bg: "bet_bg.png",
    ba_cay_bet_table: "ba_cay_bet_table.png",
    BG_Stop_Watch: "stop_watch.png",
    slider_tract: "slider_track.png",
    slider_ball: "slider_ball.png",
    slider_ball_press: "slider_ball_press.png",
    slider_progress: "slider_progress.png",
    bg_count_down_co: "bg_count_down_co.png",
    avatar_Frame_normal: "avatarFrame.png",
    avatar_Frame_hover: "avatarFrameHover.png",
    bg_VatPham_hover: "bg_vatPham_hover.png",
    autoReadyImg: "text_tuDongSanSang.png",
    ingame_AvatarFrame: "bgAva_userInfo_inGame.png",
    xito_bg_r: "xito_bg_r.png",
    xito_bg_l: "xito_bg_l.png",
    xito_cd_bg: "xito_cd_bg.png",
    xito_win_bg_border: "xito_win_bg_border.png",
    xito_win_card_border: "xito_win_card_border.png",
    xito_suite_name_bg: "xito_suite_name_bg.png",
    task_bg_item: "bg_task_item.png",
    poker_dealer: "dealer.png",
    arrow_down: "arrow_down.png",
    arrow_up: "arrow_up.png",
    bg_bai_subapp: "bg_bai_subapp.png",
    bg_co_subapp: "bg_co_subapp.png",
    btn_bai_binh_dan: "btn_bai_binh_dan.png",
    btn_bai_solo: "btn_bai_solo.png",
    btn_co_cham: "btn_co_cham.png",
    btn_co_nhanh: "btn_co_nhanh.png",
    btn_bai_binh_dan_hover: "btn_bai_binh_dan_hover.png",
    btn_bai_solo_hover: "btn_bai_solo_hover.png",
    btn_co_cham_hover: "btn_co_cham_hover.png",
    btn_co_nhanh_hover: "btn_co_nhanh_hover.png",
    frame_listgames: "frame_listgames.png",
    thanhSc: "scrollbar_bv_1.png",
    sliderSc: "scrollbar_bv_2_3.png",
    text_binhlung: "text_binhlung.png",
    text_sap3chi: "text_sap3chi.png",
    bg_sochi: "bg_sochi.png",
    bg_tenchi: "bg_tenchi.png",
    arrow_green: "arrow_green.png",
    arrow_orange: "arrow_orange.png",
    bg_thongbaogiuaban: "bg_thongbaogiuaban.png",
    light_maubinh_big: "light_maubinh_big.png",
    light_maubinh_small: "light_maubinh_small.png",
    light_sochi: "light_sochi.png",
    text_mauthau: "text_mauthau.png",
    text_doi: "text_doi.png",
    text_thu: "text_thu.png",
    text_samco: "text_samco.png",
    text_sanh: "text_sanh.png",
    text_thung: "text_thung.png",
    text_culu: "text_culu.png",
    bacaisanh: "3caisanh.png",
    bacaithung: "3caithung.png",
    sanhrong: "sanhrong.png",
    lucphebon: "lucphebon.png",
    culuchi2: "culuchi2.png",
    samcochicuoi: "samcochicuoi.png",
    tuquy: "tuquy.png",
    thungphasanh: "thungphasanh.png",
    tuquychi2: "tuquychi2.png",
    thungphasanhchi2: "thungphasanhchi2.png",
    AutoWinmaubinh: "maubinh.png",
    blinking: "btn_NhiemVu_haveNewTask.png",
    blinkingPayment: "highlight_naptien.png",
    star: "starlight.png",
    viewer: "viewer.png",
    registerExit: "icon_register_exit.png",
    avt_frame_bg: "avt_frame_bg.png",
    avt_frame: "avt_frame.png",
    CT_butt_press: "CT_butt_press.png",
    CT_butt: "CT_butt.png",
    CU_butt_press: "CU_butt_press.png",
    CU_butt: "CU_butt.png",
    elo_CT: "elo_CT.png",
    elo_CU: "elo_CU.png",
    facebook_butt_press: "facebook_butt_press.png",
    facebook_butt: "facebook_butt.png",
    friends_butt_press: "friends_butt_press.png",
    friends_butt: "friends_butt.png",
    heart: "heart.png",
    khu_vuc_avatar: "khu_vuc_avatar.png",
    khu_vuc_heart: "khu_vuc_heart.png",
    khu_vuc_item_setting: "khu_vuc_item_setting.png",
    mail_butt: "mail_butt.png",
    name_frame: "name_frame.png",
    setting_butt_press: "setting_butt_press.png",
    setting_butt: "setting_butt.png",
    setting_fb_butt: "setting_fb_butt.png",
    setting_frame: "setting_frame.png",
    setting_frame_2: "setting_frame_2.png",
    setting_frame_top: "setting_frame_top.png",
    setting_line: "setting_line.png",
    share_butt_press: "share_butt_press.png",
    share_butt: "share_butt.png",
    small_info_frame: "small_info_frame.png",
    sound_off_butt: "sound_off_butt.png",
    sound_on_butt: "sound_on_butt.png",
    task_khung_noidung: "task_khung_noidung.png",
    task_thanh_tientrinh: "task_thanh_tientrinh.png",
    task_tientrinh: "task_tientrinh.png",
    task: "task.png",
    top_rank: "top_rank.png",
    vibration_butt_off: "vibration_butt_off.png",
    vibration_butt_on: "vibration_butt_on.png",
    xem_ngay_butt: "xem_ngay_butt.png",
    xemngay_butt_press: "xemngay_butt_press.png",
    change_name: "change_name.png",
    close_butt: "close_butt.png",
    close_butt_press: "close_butt_press.png",
    hourglass: "hourglass.png",
    tuong_den: "tuong_den.png",
    tuong_do: "tuong_do.png",
    hot_table_bg: "hot_table_bg.png",
    vs_icon: "vs-icon.png",
    friend_item_bg: "friend_bg.png",
    refresh_arrow: "refresh-arrow.png",
    cauhoa_butt_press: "cauhoa_butt_press.png",
    cauhoa_butt: "cauhoa_butt.png",
    cdtime: "cdtime.png",
    chat_butt_press: "chat_butt_press.png",
    chat_butt: "chat_butt.png",
    eye: "eye.png",
    menu_butt_press: "menu_butt_press.png",
    menu_butt: "menu_butt.png",
    menu_frame: "menu_frame.png",
    out_butt_press: "out_butt_press.png",
    out_butt: "out_butt.png",
    pointtime: "pointtime.png",
    start_butt_press: "start_butt_press.png",
    start_butt: "start_butt.png",
    xinthua_butt_press: "xinthua_butt_press.png",
    xinthua_butt: "xinthua_butt.png",
    xinthua_butt_disable: "xinthua_butt_disable.png",
    avt: "avt.png",
    cauhoa_butt_disable: "cauhoa_butt_disable.png",
    inv_butt: "inv_butt.png",
    inv_butt_prss: "inv_butt_prss.png",
    back: "back.png",
    back_press: "back_press.png",
    elo_icon: "elo_icon.png",
    elo_icon1: "elo_icon1.png",
    amtra: "amtra.png",
    de_1_tapsu: "de_1_tapsu.png",
    de_2_phongtrao: "de_2_phongtrao.png",
    de_3_kythu: "de_3_kythu.png",
    de_4_kysi: "de_4_kysi.png",
    de_5_kyvuong: "de_5_kyvuong.png",
    sansang: "sansang.png",
    sao1vang: "sao1vang.png",
    sao2vang: "sao2vang.png",
    sao3den: "sao3den.png",
    sao3vang: "sao3vang.png",
    wait_player: "wait_player.png",
    khu_vuc_rank: "khu_vuc_rank.png",
    khu_status_waitting: "khu_status_waitting.png",
    sl_quanan: "sl_quanan.png",
    khungchat: "khungchat.png",
    box_quan_an_trans: "box_quan_an_trans.png",
    title_cotuong: "title_cotuong.png",
    title_coup: "title_coup.png",
    bg_player_rank: "bg_player_rank.png",
    Thua: "Thua.png",
    Thang: "Thang.png",
    popup_bonus_heart: "popup_bonus_heart.png",
    heart_no_plus: "heart_no_plus.png",
    banhot_CT_deselect: "banhot_CT_deselect.png",
    banhot_CT: "banhot_CT.png",
    banhot_CT_Press: "banhot_CT_Press.png",
    banhot_CT_deselect_Press: "banhot_CT_deselect_Press.png",
    banhot_CU_deselect: "banhot_CU_deselect.png",
    banhot_CU: "banhot_CU.png",
    banhot_CU_Press: "banhot_CU_Press.png",
    banhot_CU_deselect_Press: "banhot_CU_deselect_Press.png",
    banhot_frame: "banhot_frame.png",
    banhot_icon_CT: "banhot_icon_CT.png",
    banhot_icon_CU: "banhot_icon_CU.png",
    banhot_miniFrame: "banhot_miniFrame.png",
    btnDong: "btnDong.png",
    btnDongPress: "btnDongPress.png",
    btnDongy: "btnDongy.png",
    btnDongyPress: "btnDongyPress.png",
    btnQuayLai: "btnQuayLai.png",
    btnQuayLaiPress: "btnQuayLaiPress.png",
    btnTheodoi: "btnTheodoi.png",
    btnTheodoiPress: "btnTheodoiPress.png",
    CT_iconInfoWD: "CT_iconInfoWD.png",
    CU_iconInfoWD: "CU_iconInfoWD.png",
    info_frame: "info_frame.png",
    info_popUp: "info_popUp.png",
    mini_popupframe: "mini_popupframe.png",
    nguoixem: "nguoixem.png",
    XacNhan_PopUp: "XacNhan_PopUp.png",
    btnHuyTheoDoi: "btnHuyTheoDoi.png",
    btnHuyTheoDoiPress: "btnHuyTheoDoiPress.png",
    effect_heart: "effect_heart.png",
    BG_Heart_plus_frame: "frame.png",
    DBTK_line: "line.png",
    btnLienKet: "select.png",
    btnLienKetPress: "select_press.png",
    DBTK_Rect_LienKet: "select_eff.png",
    DBTK_smallFrame: "smallFrame.png",
    btnCapNhat: "btnCapNhat.png",
    btnCapNhatPress: "btnCapNhatPress.png",
    btnBanBe: "btnBanBe.png",
    btnBanBeDeselect: "btnBanBeDeselect.png",
    btnBanBeDeselectPress: "btnBanBeDeselectPress.png",
    btnBanbeSelectPress: "btnBanbeSelectPress.png",
    btnChoiNgay: "btnChoiNgay.png",
    btnChoiNgayPress: "btnChoiNgayPress.png",
    btnFriendFB: "btnFriendFB.png",
    btnFriendFBPress: "btnFriendFBPress.png",
    btnHuy: "btnHuy.png",
    btnHuyPress: "btnHuyPress.png",
    btnMoiChoi: "btnMoiChoi.png",
    btnMoiChoiDisable: "btnMoiChoiDisable.png",
    btnMoiChoiPress: "btnMoiChoiPress.png",
    btnRefresh: "btnRefresh.png",
    btnRefreshPress: "btnRefreshPress.png",
    btnTimBan: "btnTimBan.png",
    btnTimBanDeselect: "btnTinBanDeselect.png",
    btnTimBanDeselectPress: "btnTimBanDeselectPress.png",
    btnTimBanSelectPress: "btnTimBanSelectPress.png",
    btnTuChoi: "btnTuChoi.png",
    btnTuChoiPress: "btnTuChoiPress.png",
    changename: "changename.png",
    frame_moi_choi: "frame_moi_choi.png",
    infoFrameBanBeOff: "infoFrameBanBeOff.png",
    infoFrameBanBeOn: "infoFrameBanBeOn.png",
    offline: "offline.png",
    online: "online.png",
    shadow_itembanbe: "shadow_itembanbe.png",
    btnIconTheoDoiFriendWD: "btnIconTheoDoiFriendWD.png",
    btnIconTheoDoiFriendWDPress: "btnIconTheoDoiFriendWDPress.png",
    btnIconXoaBanFriendWD: "btnIconXoaBanFriendWD.png",
    btnIconXoaBanFriendWDPress: "btnIconXoaBanFriendWDPress.png",
    btnTimKiem: "btnTimKiem.png",
    btnTimKiemPress: "btnTimKiemPress.png",
    btnVaoXem: "btnVaoXem.png",
    btnVaoXemPress: "btnVaoXemPress.png",
    CircleClippingNodeImage: "CircleClippingNodeImage.png",
    lose_cuoi_van: "lose_cuoi_van.png",
    win_cuoi_van: "win_cuoi_van.png",
    btn_no_text: "btn_no_text.png",
    btn_no_text_press: "btn_no_text_press.png",
    star_1: "star_1.png",
    Icon_app_120: "Icon_app_120.png",
    btn_moi_ban_FB: "btn_moi_ban_FB.png",
    btn_moi_ban_FB_press: "btn_moi_ban_FB_press.png",
    btn_buy_heart: "btn_buy_heart.png",
    btn_buy_heart_press: "btn_buy_heart_press.png",
    text_NVTiepTheo: "text_NVTiepTheo.png",
    text_nhiemVu: "text_nhiemVu.png",
    bg_co_ziga: "qc.png",
    text_co_ziga: "qctext.png",
    header: "header.png",
    title_wd_banbe: "title_wd_banbe.png",
    title_wd_banHot: "title_wd_banHot.png",
    title_wd_bonus: "title_wd_bonus.png",
    title_wd_doiten: "title_wd_doiten.png",
    title_wd_dongbo: "title_wd_dongbo.png",
    title_wd_thongbao: "title_wd_thongbao.png",
    title_wd_thongtin: "title_wd_thongtin.png",
    title_wd_moichoi: "title_wd_moichoi.png",
    chucmung: "chucmung.png",
    title_wd_nhantim: "title_wd_nhantim.png",
    buy_butt: "buy_butt.png",
    more_item_chat: "more_item_chat.png",
    music_off_butt: "music_off_butt.png",
    music_on_butt: "music_on_butt.png",
    music_off_view_butt: "music_off_view_butt.png",
    music_on_view_butt: "music_on_view_butt.png",
    music_off_ig_butt: "music_off_ig_butt.png",
    music_on_ig_butt: "music_on_ig_butt.png",
    sound_on_ig_butt: "sound_on_ig_butt.png",
    sound_off_ig_butt: "sound_off_ig_butt.png",
    menu_frame_ig_small: "menu_frame_ig_small.png",
    switch_butt: "switch_butt.png",
    switch_butt_press: "switch_butt_press.png",
    circle_red: "circle_red.png",
    btn_upd_avatar: "btn_upd_avatar.png",
    btn_upd_avatar_press: "btn_upd_avatar_press.png",
    heart_ingame: "heart_ingame.png",
  },
  res_font_path = {
    GAME_FONT: "res/fonts/Roboto-Regular.ttf",
    GAME_FONT_BOLD: "res/fonts/Roboto-Medium.ttf",
    GAME_FONT_ITALIC: "res/fonts/Roboto-Italic.ttf",
    GAME_FONT_BOLD_ITALIC: "res/fonts/Roboto-MediumItalic.ttf",
    GAME_FONT_BTN: "res/fonts/UVNButLong1.TTF",
  },
  res = {
    GAME_FONT: {
      type: "font",
      name: "Roboto-Regular",
      srcs: ["res/fonts/Roboto-Regular.ttf", "res/fonts/Roboto-Regular.ttf"],
    },
    GAME_FONT_BOLD: {
      type: "font",
      name: "Roboto-Medium",
      srcs: ["res/fonts/Roboto-Medium.ttf", "res/fonts/Roboto-Medium.ttf"],
    },
    GAME_FONT_ITALIC: {
      type: "font",
      name: "Roboto-Italic",
      srcs: ["res/fonts/Roboto-Italic.ttf", "res/fonts/Roboto-Italic.ttf"],
    },
    GAME_FONT_BOLD_ITALIC: {
      type: "font",
      name: "Roboto-MediumItalic",
      srcs: [
        "res/fonts/Roboto-MediumItalic.ttf",
        "res/fonts/Roboto-MediumItalic.ttf",
      ],
    },
    GAME_FONT_BTN: {
      type: "font",
      name: "UVNButLong1",
      srcs: ["res/fonts/UVNButLong1.TTF", "res/fonts/UVNButLong1.TTF"],
    },
    BITMAP_GAME_FONT_CO_ALARM: "fonts/font_cd_co.fnt",
    BITMAP_GAME_FONT_CO: "fonts/font_btn_ss.fnt",
    BITMAP_GAME_FONT_TCM_THUA: "fonts/bmfont_elo_minus.fnt",
    BITMAP_GAME_FONT_TCM: "fonts/bmfont_elo_plus.fnt",
    BITMAP_GAME_FONT_CO_HEART_PLUS: "fonts/bmfont_plus_heart.fnt",
    BITMAP_GAME_FONT_CO_HEART_MINUS: "fonts/bmfont_minus_heart.fnt",
    BITMAP_GAME_FONT_CD_INGAME: "fonts/bmfont_cd_ingame.fnt",
    chess_common_plist: "common/chess/chess_common.plist",
    chess_common_img: "common/chess/chess_common_ziga.png",
    bat_dau_effect_plist: "common/chess/bat_dau_effect.plist",
    bat_dau_effect_img: "common/chess/bat_dau_effect_ziga.png",
    Tranperent_IMG: "common/null_content_ziga.png",
    chat_emo_static_plist: "chat/chatemostatic/chat_emo_static.plist",
    icon_chat_emo_static: "chat/chatemostatic/icon_chat_emo_static_ziga.png",
    main_screen_plist_sps: "main_screen/main_screen.plist",
    main_screen_png_sps: "main_screen/main_screen_ziga.png",
    main_screen_big_item_plist_sps: "main_screen/main_screen_big_item.plist",
    main_screen_big_item_png_sps: "main_screen/main_screen_big_item_ziga.png",
    tran_hay: "main_screen/tran_hay_ziga.png",
    webview_frame: "main_screen/webview_frame_ziga.png",
    main_screen_background: "main_screen/background_ziga.jpg",
    ingame_background: "ingame/background_ziga.jpg",
    all_chess: "ingame/all_chess_ziga.png",
    chess_table: "ingame/ban_co_ziga.png",
    app_store_search: "popup/app_store_search.png",
    hour_glass_plist_sps: "main_screen/hourglass_plist.plist",
    hour_glass_png_sps: "main_screen/hourglass_plist_ziga.png",
    popup_resource_plist_sps: "popup/popup_resource_plist.plist",
    popup_resource_png_sps: "popup/popup_resource_plist_ziga.png",
    shadow_co_frame_png: "popup/shadow_ziga.png",
  },
  nhac_nen_ziga = "sound/Tri-Am-Various-Artists.mp3",
  chat_res = {
    alert: "sound/alert.ogg",
    click: "sound/click.ogg",
    deal_card: "sound/deal_card.ogg",
    join_game: "sound/join_game.ogg",
    laught: "sound/laught.ogg",
    leave_game: "sound/leave_game.ogg",
    co_gong: "sound/co_gong.mp3",
    co_an_quan: "sound/co_an_quan.mp3",
    co_di_chuyen: "sound/co_di_chuyen.mp3",
    co_thang: "sound/co_thang.mp3",
    co_thua: "sound/co_thua.mp3",
    chat_emo_static_plist: "chat/chatemostatic/chat_emo_static.plist",
    icon_chat_emo_static: "chat/chatemostatic/icon_chat_emo_static_ziga.png",
    chat_expression1_img: "chat/chat_emo/expression1_img_ziga.png",
    chat_expression1_plist: "chat/chat_emo/expression1_plist.plist",
    chat_expression2_img: "chat/chat_emo/expression2_img_ziga.png",
    chat_expression2_plist: "chat/chat_emo/expression2_plist.plist",
    chat_expression3_img: "chat/chat_emo/expression3_img_ziga.png",
    chat_expression3_plist: "chat/chat_emo/expression3_plist.plist",
    chat_expression4_img: "chat/chat_emo/expression4_img_ziga.png",
    chat_expression4_plist: "chat/chat_emo/expression4_plist.plist",
    chat_expression5_img: "chat/chat_emo/expression5_img_ziga.png",
    chat_expression5_plist: "chat/chat_emo/expression5_plist.plist",
    chat_expression6_img: "chat/chat_emo/expression6_img_ziga.png",
    chat_expression6_plist: "chat/chat_emo/expression6_plist.plist",
    chat_expression7_img: "chat/chat_emo/expression7_img_ziga.png",
    chat_expression7_plist: "chat/chat_emo/expression7_plist.plist",
    chat_expression8_img: "chat/chat_emo/expression8_img_ziga.png",
    chat_expression8_plist: "chat/chat_emo/expression8_plist.plist",
    chat_expression9_img: "chat/chat_emo/expression9_img_ziga.png",
    chat_expression9_plist: "chat/chat_emo/expression9_plist.plist",
    chat_expression10_img: "chat/chat_emo/expression10_img_ziga.png",
    chat_expression10_plist: "chat/chat_emo/expression10_plist.plist",
    chat_expression11_img: "chat/chat_emo/expression11_img_ziga.png",
    chat_expression11_plist: "chat/chat_emo/expression11_plist.plist",
    chat_expression12_img: "chat/chat_emo/expression12_img_ziga.png",
    chat_expression12_plist: "chat/chat_emo/expression12_plist.plist",
    chat_expression13_img: "chat/chat_emo/expression13_img_ziga.png",
    chat_expression13_plist: "chat/chat_emo/expression13_plist.plist",
    chat_expression14_img: "chat/chat_emo/expression14_img_ziga.png",
    chat_expression14_plist: "chat/chat_emo/expression14_plist.plist",
    chat_expression15_img: "chat/chat_emo/expression15_img_ziga.png",
    chat_expression15_plist: "chat/chat_emo/expression15_plist.plist",
    chat_expression16_img: "chat/chat_emo/expression16_img_ziga.png",
    chat_expression16_plist: "chat/chat_emo/expression16_plist.plist",
    chat_expression17_img: "chat/chat_emo/expression17_img_ziga.png",
    chat_expression17_plist: "chat/chat_emo/expression17_plist.plist",
    chat_expression18_img: "chat/chat_emo/expression18_img_ziga.png",
    chat_expression18_plist: "chat/chat_emo/expression18_plist.plist",
    chat_expression19_img: "chat/chat_emo/expression19_img_ziga.png",
    chat_expression19_plist: "chat/chat_emo/expression19_plist.plist",
    chat_expression20_img: "chat/chat_emo/expression20_img_ziga.png",
    chat_expression20_plist: "chat/chat_emo/expression20_plist.plist",
    chat_expression21_img: "chat/chat_emo/expression21_img_ziga.png",
    chat_expression21_plist: "chat/chat_emo/expression21_plist.plist",
    chat_expression22_img: "chat/chat_emo/expression22_img_ziga.png",
    chat_expression22_plist: "chat/chat_emo/expression22_plist.plist",
    chat_expression23_img: "chat/chat_emo/expression23_img_ziga.png",
    chat_expression23_plist: "chat/chat_emo/expression23_plist.plist",
    chat_expression24_img: "chat/chat_emo/expression24_img_ziga.png",
    chat_expression24_plist: "chat/chat_emo/expression24_plist.plist",
    chat_expression25_img: "chat/chat_emo/expression25_img_ziga.png",
    chat_expression25_plist: "chat/chat_emo/expression25_plist.plist",
    chat_expression26_img: "chat/chat_emo/expression26_img_ziga.png",
    chat_expression26_plist: "chat/chat_emo/expression26_plist.plist",
  },
  chat_resources = [],
  iChat;
for (iChat in chat_res) chat_resources.push(chat_res[iChat]);
var inst_font = {
    GAME_FONT: {
      type: "font",
      name: "Roboto-Regular",
      srcs: [
        "ChessMobi/res/fonts/Roboto-Regular.ttf",
        "ChessMobi/res/fonts/Roboto-Regular.ttf",
      ],
    },
    GAME_FONT_BOLD: {
      type: "font",
      name: "Roboto-Medium",
      srcs: [
        "ChessMobi/res/fonts/Roboto-Medium.ttf",
        "ChessMobi/res/fonts/Roboto-Medium.ttf",
      ],
    },
    GAME_FONT_ITALIC: {
      type: "font",
      name: "Roboto-Italic",
      srcs: [
        "ChessMobi/res/fonts/Roboto-Italic.ttf",
        "ChessMobi/res/fonts/Roboto-Italic.ttf",
      ],
    },
    GAME_FONT_BOLD_ITALIC: {
      type: "font",
      name: "Roboto-MediumItalic",
      srcs: [
        "ChessMobi/res/fonts/Roboto-MediumItalic.ttf",
        "ChessMobi/res/fonts/Roboto-MediumItalic.ttf",
      ],
    },
    GAME_FONT_BTN: {
      type: "font",
      name: "UVNButLong1",
      srcs: [
        "ChessMobi/res/fonts/UVNButLong2.TTF",
        "ChessMobi/res/fonts/UVNButLong2.TTF",
      ],
    },
  },
  preload_resources = [];
preload_resources.push(res.main_screen_background);
preload_resources.push(res.tran_hay);
preload_resources.push(res.main_screen_plist_sps);
preload_resources.push(res.main_screen_png_sps);
preload_resources.push(res.main_screen_big_item_png_sps);
preload_resources.push(res.main_screen_big_item_plist_sps);
preload_resources.push(res.ingame_background);
preload_resources.push(res.all_chess);
preload_resources.push(res.chess_table);
preload_resources.push(res.chess_common_plist);
preload_resources.push(res.chess_common_img);
var after_resources = [];
after_resources.push(res.popup_resource_plist_sps);
after_resources.push(res.popup_resource_png_sps);
after_resources.push(res.shadow_co_frame_png);
after_resources.push(res.webview_frame);
after_resources.push(res.chat_emo_static_plist);
after_resources.push(res.icon_chat_emo_static);
after_resources.push(res.BITMAP_GAME_FONT_CO_ALARM);
after_resources.push(res.BITMAP_GAME_FONT_CO);
after_resources.push(res.BITMAP_GAME_FONT_TCM_THUA);
after_resources.push(res.BITMAP_GAME_FONT_TCM);
after_resources.push(res.BITMAP_GAME_FONT_CO_HEART_PLUS);
after_resources.push(res.BITMAP_GAME_FONT_CO_HEART_MINUS);
after_resources.push(res.BITMAP_GAME_FONT_CD_INGAME);
after_resources.push(inst_font.GAME_FONT);
after_resources.push(inst_font.GAME_FONT_BOLD);
after_resources.push(inst_font.GAME_FONT_ITALIC);
after_resources.push(inst_font.GAME_FONT_BOLD_ITALIC);
after_resources.push(inst_font.GAME_FONT_BTN);
var g_resources = [],
  i;
for (i in res) g_resources.push(res[i]);
var sound_rest = {
  alert: "sound/alert.ogg",
  click: "sound/click.ogg",
  deal_card: "sound/deal_card.ogg",
  join_game: "sound/join_game.ogg",
  laught: "sound/laught.ogg",
  leave_game: "sound/leave_game.ogg",
  co_gong: "sound/co_gong.mp3",
  co_an_quan: "sound/co_an_quan.mp3",
  co_di_chuyen: "sound/co_di_chuyen.mp3",
  co_thang: "sound/co_thang.mp3",
  co_thua: "sound/co_thua.mp3",
};
onStartingGame = function () {
  cc.spriteFrameCache.addSpriteFrames(
    res.main_screen_plist_sps,
    res.main_screen_png_sps
  );
  cc.spriteFrameCache.addSpriteFrames(
    res.main_screen_big_item_plist_sps,
    res.main_screen_big_item_png_sps
  );
  cc.spriteFrameCache.addSpriteFrames(
    res.chess_common_plist,
    res.chess_common_img
  );
  cc.spriteFrameCache.addSpriteFrames(
    res.popup_resource_plist_sps,
    res.popup_resource_png_sps
  );
  cc.rememberPassword = !0;
  if (bk.isFbApp) {
    var a = Util.getClientSession(key.userLoginInfo, !0),
      b = !1;
    if (cc.isUndefined(a) || null == a) b = !0;
    FbService.processFbLogin(b);
  } else {
    a = Util.getClientSession(key.userLoginInfo, !0);
    b = Util.getClientSession(key.isSaveUserSession);
    logMessage("Login saving session: " + b);
    if (cc.isUndefined(a) || null == a || a == DEFAULT_CLIENT_VALUE)
      if ((a = Util.getClientSetting(key.userLoginInfo, !0)))
        if (1 == b)
          (cc.username = a.username),
            (cc.password = a.password),
            logMessage("UserLoginInfo: from logout -\x3e prepare new game");
        else {
          logMessage("UserLoginInfo storage: " + a.username);
          processAutoLogin(a);
          return;
        }
      else logMessage("UserLoginInfo: NULL -\x3e prepare new game");
    else if (1 == b)
      (cc.username = a.username),
        (cc.password = a.password),
        logMessage("UserLoginInfo: from logout -\x3e prepare new game");
    else {
      logMessage("UserLoginInfo session: " + a.username);
      processAutoLogin(a);
      return;
    }
    switchToSceneWithGameState(GS.PREPARE_GAME);
  }
};
function processAutoLogin(a) {
  cc.atLogin = !0;
  logMessage("Auto login: " + a.username);
  cc.username = a.username;
  cc.password = a.password;
  BkGlobal.isLoginFacebook = a.isLoginFacebook;
  doLoginGame();
}
function processLogout(a) {
  (a || BkGlobal.isLoginFacebook) &&
    Util.removeClientSetting(key.userLoginInfo);
  Util.setClientSession(key.isSaveUserSession, 1);
  Util.removeClientSession(key.userLoginInfo);
  Util.reloadWebPage();
}
processLoginRegistSuccessEx = function () {
  Util.removeAnim();
  isWebPlatform() &&
    (document.getElementById("contentNews").style.display = "none");
};
processLoginRegistFailEx = function (a) {
  Util.removeAnim();
  Util.removeClientSetting(key.userLoginInfo);
  Util.removeClientSession(key.userLoginInfo);
  cc.password = "";
  switchToSceneWithGameState(GS.PREPARE_GAME);
  NativeInterface.logFirebaseEvent(
    EVENT_NAME.PREPARE_GAME,
    Util.createActionJsonDataLogEventFirebase("processLoginRegistFailEx")
  );
};
function doLoginGame() {
  null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
  BkGlobal.UserInfo.setUserName(cc.username);
  BkGlobal.UserInfo.password = cc.password;
  BkConnectionManager.conStatus = CONECTION_STATE.RELOGIN;
  BkConnectionManager.prepareConnection();
  Util.showAnim();
}
function openUrl(a) {
  top.location.href = a;
}
reloadWebPage = function () {
  window.location.reload();
};
showPopupMessageEx = function (a) {
  showPopupMessageConfirmEx(a);
};
showPopupMessageConfirmEx = function (a, b, d) {
  swal(
    {
      title: "",
      text: a,
      type: "",
      confirmButtonColor: "#c06100",
      closeOnConfirm: !0,
    },
    function () {
      null != b && void 0 != b && b();
    }
  );
};
showPopupMessageConfirmWithCancelEx = function (a, b) {
  swal(
    {
      text: a,
      title: "",
      type: "",
      confirmButtonColor: "#6EC018",
      confirmButtonText: "\u0110\u1ed3ng \u00fd",
      cancelButtonText: "Th\u00f4i",
      closeOnConfirm: !0,
      showCancelButton: !0,
      html: !0,
    },
    function (a) {
      a && null != b && void 0 != b && b();
    }
  );
};
logTracker = function (a, b, d) {
  b = "";
  void 0 != cc.lastLog && 0 < cc.lastLog.length && (b = cc.lastLog.join("\n"));
  var e = cc.username,
    f = "";
  void 0 != d && (f = void 0 != d.stack ? d.stack : "");
  1e3 < a.length && (a = "");
  zpostRequest(
    bk.httpHost + "public/action/1",
    {
      username: e,
      clientInfo:
        Util.getClientID() + " fileVer: " + bk.fileVer + " cpid: " + bk.cpid,
      Error: a + " Stack: " + f,
      lastLog: b,
    },
    function (a) {}
  );
  cc.lastLog = [];
};
zpostRequest = function (a, b, d) {
  var e = new XMLHttpRequest();
  e.onreadystatechange = function () {
    e.readyState == XMLHttpRequest.DONE && d(e.responseText);
  };
  e.open("POST", a, !0);
  e.setRequestHeader(
    "Content-Type",
    "application/x-www-form-urlencoded; charset\x3dUTF-8"
  );
  e.send(JSON.stringify(b));
};
var AVAR_MARGIN_TB = 70,
  AVAR_MARGIN_LR = 70,
  AVAR_MARGIN_AVAR_TABLE6 = 100;
POKER_SMALL_OFFSET = 15;
POKER_FINISH_OFFSET = 20;
BkConstantIngame = {
  PHOM_CARD_MARGIN_LEFT: 20,
  PHOM_CARD_MARGIN_TOP: 35,
  PHOM_AVAR_MOVE_LEFT: 40,
  DEFAULT_CARD_MARGIN_AVAR: 100,
  PHOM_DISCARD_MIN_ZORDER: 1e4,
};
function _getAvatarLocationPos(a, b, d) {
  var e = cc.winSize,
    f = 0,
    g = 0;
  if (d == GID.POKER) return _getPokerAvatarLocationPos(a);
  if (d == GID.XITO) return _getXiToAvatarLocationPos(a);
  if (d == GID.XI_DZACH) return _getXiDzachAvatarLocationPos(a);
  if (d == GID.BA_CAY) return _getBaCayAvatarLocationPos(a);
  if (d == GID.LIENG) return _getLiengAvatarLocationPos(a);
  if (d == GID.MAU_BINH) return _getMauBinhAvatarLocaionPos(a);
  2 == b
    ? ((f = e.width / 2),
      (g = 0 == a ? AVAR_MARGIN_TB + 30 : e.height - AVAR_MARGIN_TB))
    : 4 == b
    ? 0 == a
      ? ((f = AVAR_MARGIN_LR + 120), (g = AVAR_MARGIN_TB + 50))
      : 1 == a
      ? ((f = e.width - AVAR_MARGIN_LR), (g = e.height / 2 + 28))
      : 2 == a
      ? ((f = e.width / 2), (g = e.height - AVAR_MARGIN_TB + 0.5))
      : 3 == a && ((f = AVAR_MARGIN_LR), (g = e.height / 2 + 30))
    : 6 == b &&
      (0 == a
        ? ((f = e.width / 2), (g = AVAR_MARGIN_TB + 50))
        : 1 == a
        ? ((f = e.width - AVAR_MARGIN_LR),
          (g = e.height / 2 - AVAR_MARGIN_AVAR_TABLE6))
        : 2 == a
        ? ((f = e.width - AVAR_MARGIN_LR),
          (g = e.height / 2 + AVAR_MARGIN_AVAR_TABLE6))
        : 3 == a
        ? ((f = e.width / 2), (g = e.height - AVAR_MARGIN_TB))
        : 4 == a
        ? ((f = AVAR_MARGIN_LR), (g = e.height / 2 + AVAR_MARGIN_AVAR_TABLE6))
        : 5 == a &&
          ((f = AVAR_MARGIN_LR), (g = e.height / 2 - AVAR_MARGIN_AVAR_TABLE6)));
  return cc.p(f, g);
}
function _getMauBinhAvatarLocaionPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 304), (d = 129))
    : 1 == a
    ? ((b = 890), (d = 384))
    : 2 == a
    ? ((b = 306), (d = 553))
    : 3 == a && ((b = 71), (d = 384));
  return cc.p(b, d);
}
function _getXiDzachAvatarLocationPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 385), (d = 157))
    : 1 == a
    ? ((b = 885), (d = 263))
    : 2 == a
    ? ((b = 885), (d = 421))
    : 3 == a
    ? ((b = 531), (d = 543))
    : 4 == a
    ? ((b = 70), (d = 421))
    : 5 == a && ((b = 70), (d = 263));
  return cc.p(b, d);
}
function _getPokerAvatarLocationPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 184.2), (d = 187.2))
    : 1 == a
    ? ((b = 815.8), (d = 217.2))
    : 2 == a
    ? ((b = 878.8), (d = 435.8))
    : 3 == a
    ? ((b = 556), (d = 572))
    : 4 == a
    ? ((b = 330), (d = 572))
    : 5 == a && ((b = 78), (d = 433));
  return cc.p(b, d);
}
function _getLiengAvatarLocationPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 410), (d = 230))
    : 1 == a
    ? ((b = 861), (d = 259))
    : 2 == a
    ? ((b = 861), (d = 415))
    : 3 == a
    ? ((b = 548), (d = 546))
    : 4 == a
    ? ((b = 95), (d = 416))
    : 5 == a && ((b = 95), (d = 259));
  return cc.p(b, d);
}
function _getBaCayAvatarLocationPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 410), (d = 216))
    : 1 == a
    ? ((b = 861), (d = 259))
    : 2 == a
    ? ((b = 861), (d = 415))
    : 3 == a
    ? ((b = 548), (d = 546))
    : 4 == a
    ? ((b = 95), (d = 416))
    : 5 == a && ((b = 95), (d = 259));
  return cc.p(b, d);
}
function _getXiToAvatarLocationPos(a) {
  var b = 0,
    d = 0;
  0 == a
    ? ((b = 405), (d = 235))
    : 1 == a
    ? ((b = 897), (d = 294))
    : 2 == a
    ? ((b = 897), (d = 444))
    : 3 == a
    ? ((b = 565), (d = 566))
    : 4 == a
    ? ((b = 65), (d = 444))
    : 5 == a && ((b = 65), (d = 294));
  return cc.p(b, d);
}
function getPokerDealerLocation(a) {
  var b = _getPokerAvatarLocationPos(a),
    d = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      d.x = b.x + 45;
      d.y = b.y + 55;
      break;
    case 1:
      d.x = b.x - 55;
      d.y = b.y + 55;
      break;
    case 2:
      d.x = b.x - 118;
      d.y = b.y + 10;
      break;
    case 3:
      d.x = b.x + 70;
      d.y = b.y - 95;
      break;
    case 4:
      d.x = b.x + 70;
      d.y = b.y - 95;
      break;
    case 5:
      (d.x = b.x + 125), (d.y = b.y + 5);
  }
  return d;
}
function getPhingLocation(a, b, d) {
  if (a == GID.POKER) return getPokerPhinhLocation(b, d);
  if (a == GID.XITO) return getXitoPhinhLocation(b, d);
  if (a == GID.LIENG) return getLiengPhinhLocation(b, d);
}
function getXitoPhinhLocation(a, b) {
  var d = _getAvatarLocationPos(a, b, GID.XITO),
    e = cc.p(d.x, d.y);
  switch (a) {
    case 0:
      e.x = d.x + 178;
      e.y = d.y - 55;
      break;
    case 1:
      e.x = d.x - 178;
      e.y = d.y - 55;
      break;
    case 2:
      e.x = d.x - 178;
      e.y = d.y - 55;
      break;
    case 3:
      e.x = d.x - 178;
      e.y = d.y - 55;
      break;
    case 4:
      e.x = d.x + 178;
      e.y = d.y - 55;
      break;
    case 5:
      (e.x = d.x + 178), (e.y = d.y - 55);
  }
  return e;
}
function getLiengPhinhLocation(a, b) {
  var d = _getAvatarLocationPos(a, b, GID.LIENG),
    e = cc.p(d.x, d.y);
  switch (a) {
    case 0:
      e.x = d.x + 85;
      e.y = d.y - 60;
      break;
    case 1:
      e.x = d.x - 90;
      e.y = d.y - 60;
      break;
    case 2:
      e.x = d.x - 90;
      e.y = d.y - 60;
      break;
    case 3:
      e.x = d.x - 90;
      e.y = d.y - 60;
      break;
    case 4:
      e.x = d.x + 85;
      e.y = d.y - 60;
      break;
    case 5:
      (e.x = d.x + 85), (e.y = d.y - 60);
  }
  return e;
}
function getPokerPhinhLocation(a, b) {
  var d = _getAvatarLocationPos(a, b, GID.POKER),
    e = cc.p(d.x, d.y);
  switch (a) {
    case 0:
      e.x = d.x + 88;
      e.y = d.y + 36;
      break;
    case 1:
      e.x = d.x - 91;
      e.y = d.y - 21;
      break;
    case 2:
      e.x = d.x - 91;
      e.y = d.y - 21;
      break;
    case 3:
      e.x = d.x + 35;
      e.y = d.y - 120;
      break;
    case 4:
      e.x = d.x + 35;
      e.y = d.y - 120;
      break;
    case 5:
      (e.x = d.x + 80), (e.y = d.y - 21);
  }
  return e;
}
function getPokerCardLocation(a, b, d) {
  b = _getAvatarLocationPos(a, b, GID.POKER);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = b.x + 90 + 35 * d;
      e.y = b.y - 30;
      break;
    case 1:
      e.x = b.x - 89 + d * POKER_SMALL_OFFSET;
      e.y = b.y - 58;
      break;
    case 2:
      e.x = b.x - 90 + d * POKER_SMALL_OFFSET;
      e.y = b.y - 58;
      break;
    case 3:
      e.x = b.x - 32 + d * POKER_SMALL_OFFSET;
      e.y = b.y - 108;
      break;
    case 4:
      e.x = b.x - 32 + d * POKER_SMALL_OFFSET;
      e.y = b.y - 108;
      break;
    case 5:
      (e.x = b.x + 75 + d * POKER_SMALL_OFFSET), (e.y = b.y - 58);
  }
  return e;
}
function getLiengCardDisplayLocation(a, b, d) {
  b = _getAvatarLocationPos(a, b, GID.LIENG);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = b.x + 90 + 35 * d;
      e.y = b.y;
      break;
    case 1:
      e.x = b.x - 160 + 35 * d;
      e.y = b.y;
      break;
    case 2:
      e.x = b.x - 160 + 35 * d;
      e.y = b.y;
      break;
    case 3:
      e.x = b.x - 160 + 35 * d;
      e.y = b.y;
      break;
    case 4:
      e.x = b.x + 90 + 35 * d;
      e.y = b.y;
      break;
    case 5:
      (e.x = b.x + 90 + 35 * d), (e.y = b.y);
  }
  return e;
}
function getBaCayCardDisplayLocation(a, b, d) {
  b = _getAvatarLocationPos(a, b, GID.BA_CAY);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = b.x + 80 + 35 * d;
      e.y = b.y;
      break;
    case 1:
      e.x = b.x - 150 + 35 * d;
      e.y = b.y;
      break;
    case 2:
      e.x = b.x - 150 + 35 * d;
      e.y = b.y;
      break;
    case 3:
      e.x = b.x - 150 + 35 * d;
      e.y = b.y;
      break;
    case 4:
      e.x = b.x + 80 + 35 * d;
      e.y = b.y;
      break;
    case 5:
      (e.x = b.x + 80 + 35 * d), (e.y = b.y);
  }
  return e;
}
function getXitoCardDisplayLocation(a, b, d) {
  b = _getAvatarLocationPos(a, b, GID.XITO);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = b.x + 75 + 24 * d;
      e.y = b.y;
      break;
    case 1:
      e.x = b.x - 170 + 24 * d;
      break;
    case 2:
      e.x = b.x - 170 + 24 * d;
      break;
    case 3:
      e.x = b.x - 170 + 24 * d;
      break;
    case 4:
      e.x = b.x + 75 + 24 * d;
      break;
    case 5:
      e.x = b.x + 75 + 24 * d;
  }
  return e;
}
function getPokerFinishCardLocation(a, b, d) {
  b = getPokerCardLocation(a, b, 0);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = b.x + d * POKER_SMALL_OFFSET;
      e.y = b.y;
      break;
    case 1:
      e.x = b.x - 40 + d * POKER_FINISH_OFFSET;
      e.y = b.y + 15;
      break;
    case 2:
      e.x = b.x - 25 + d * POKER_FINISH_OFFSET;
      e.y = b.y + 15;
      break;
    case 3:
      e.x = b.x - 20 + d * POKER_FINISH_OFFSET;
      e.y = b.y - 15;
      break;
    case 4:
      e.x = b.x - 20 + d * POKER_FINISH_OFFSET;
      e.y = b.y - 15;
      break;
    case 5:
      (e.x = b.x + 20 + d * POKER_FINISH_OFFSET), (e.y = b.y + 15);
  }
  return e;
}
function getCardDisplayLocation(a, b, d, e) {
  a = _getAvatarLocationPos(b, d, a);
  d = cc.p(a.x, a.y);
  switch (b) {
    case 0:
      d.x = a.x + 90 + 35 * e;
      d.y = a.y - 30;
      break;
    case 1:
      d.x = a.x - 180 + 35 * e;
      d.y = a.y;
      break;
    case 2:
      d.x = a.x - 180 + 35 * e;
      d.y = a.y;
      break;
    case 3:
      d.x = a.x + 80 + 35 * e;
      d.y = a.y;
      break;
    case 4:
      d.x = a.x + 80 + 35 * e;
      d.y = a.y;
      break;
    case 5:
      d.x = a.x + 80 + 35 * e;
      d.y = a.y;
      break;
    case 6:
      d.x = a.x + 80 + 35 * e;
      d.y = a.y;
      break;
    default:
      (d.x = a.x + 20 + 35 * e), (d.y = a.y);
  }
  return d;
}
function getPokerCenterPoint(a) {
  var b = cc.winSize,
    b = cc.p(b.width / 2, b.height / 2);
  b.x += 83 * (a - 2);
  b.y += 35;
  return b;
}
function getDiscardLocationPhomGame(a, b) {
  var d = BkConstantIngame.PHOM_CARD_MARGIN_LEFT,
    e = cc.p(0, 0);
  switch (a) {
    case 0:
      e.x = 540 + b * d;
      e.y = 235;
      break;
    case 1:
      e.x = 680 + b * d;
      e.y = 435;
      break;
    case 2:
      e.x = 350 + b * d;
      e.y = 445;
      break;
    case 3:
      (e.x = 220 + b * d), (e.y = 265);
  }
  return e;
}
function getMyTakenLocationPhomGame(a, b) {
  var d = BkConstantIngame.PHOM_CARD_MARGIN_TOP,
    e = cc.p(0, 0);
  e.x = 345;
  e.y = 230 - a * d + (b - 1) * d;
  return e;
}
function getTakenLocationPhomGame(a, b, d) {
  b = _getAvatarLocationPos(a, b);
  var e = cc.p(b.x, b.y);
  switch (a) {
    case 0:
      e.x = 10;
      e.y = b.y + 50 - 38 * d;
      break;
    case 1:
      e.x = 745 - BkConstantIngame.PHOM_CARD_MARGIN_LEFT;
      e.y = 325 - 38 * d;
      break;
    case 2:
      e.x = 535;
      e.y = 445 - 38 * d;
      break;
    case 3:
      (e.x = 220), (e.y = 390 - 38 * d + 10);
  }
  return e;
}
function getMyTakenLocationPhomGameWithNumberCardIndex(a, b, d) {
  a = getMyTakenLocationPhomGame(a, d);
  a.x += b * BkConstantIngame.PHOM_CARD_MARGIN_LEFT;
  return a;
}
function getTakenLocationPhomGameWithNumberCardIndex(a, b, d, e, f) {
  b = getTakenLocationPhomGame(a, b, d);
  d = BkConstantIngame.PHOM_CARD_MARGIN_LEFT;
  switch (a) {
    case 0:
      b.x += e * d;
      break;
    case 1:
      b.x -= (f - 1) * d;
      b.x += e * d;
      break;
    case 2:
      b.x += e * d;
      break;
    case 3:
      b.x += e * d;
  }
  return b;
}
BkBaseLayer = cc.Layer.extend({
  ctor: function () {
    this._super();
  },
});
var SUB_APP_ITEM_PER_PAGE = 5,
  BkGameBaseLayer = BkBaseLayer.extend({
    background: null,
    gameSortOrder: !1,
    gameListSprite: null,
    topSprite: null,
    curIndex: 0,
    otherGameList: null,
    isClickPrevious: -1,
    isAnimationChange: !1,
    page1: null,
    page2: null,
    isVisiblePage1: !0,
    listGameTab1: null,
    listGameTab2: null,
    bgSubAppListNav: null,
    loginWindow: null,
    playerAvatar: null,
    btnTopPlayer: null,
    btnScreenShot: null,
    btnFullScreen: null,
    btnPayment: null,
    btnBonus: null,
    btnFriend: null,
    btnMail: null,
    btnShop: null,
    btnNhiemVu: null,
    btnPrevious: null,
    btnNext: null,
    mailNumBg: null,
    _winSize: null,
    marginBtnBottom: cc.p(175.5, 0.5),
    countClickZiga: 0,
    lastTimeClickZiga: 0,
    txtIP: null,
    ctor: function (a) {
      this._super();
      this._winSize = cc.winSize;
      this.background = new BkSprite(res.main_screen_background);
      this.background.scaleX =
        this._winSize.width / this.background.getContentSize().width;
      this.background.scaleY =
        this._winSize.height / this.background.getContentSize().height;
      this.background.x = this._winSize.width / 2;
      this.background.y = this._winSize.height / 2;
      this.addChild(this.background, -103);
      this.addTitleZiga();
    },
    addTitleZiga: function () {
      if (!isWebPlatform() && !NativeInterface.isIphoneX()) {
        var a = new BkSprite("#" + res_name.bg_co_ziga);
        a.scaleX = cc.winSize.width / a.getContentSize().width;
        a.scaleY = GAME_SCALE;
        a.x = cc.winSize.width / 2;
        a.y = cc.winSize.height - a.getBoundingBox().height / 2;
        this.addChild(a, -102);
        var b = new BkSprite("#" + res_name.text_co_ziga);
        b.setScale(GAME_SCALE);
        b.x = a.x;
        b.y = a.y;
        this.addChild(b, -101);
        var d = this;
        b.setOnlickListenner(function () {
          var a = BkTime.GetCurrentTime();
          1e3 < a - d.lastTimeClickZiga
            ? ((d.countClickZiga = 0), (d.lastTimeClickZiga = a))
            : ((d.lastTimeClickZiga = a),
              d.countClickZiga++,
              logMessage("self.countClickZiga: " + d.countClickZiga),
              15 < d.countClickZiga &&
                ((d.countClickZiga = 0), d.showPopupSetIP()));
        });
      }
    },
    showPopupSetIP: function () {
      logMessage("showPopupSetIP");
      if (null == this.txtIP) {
        var a = this,
          b = new BkConfirmPopup("", TYPE_MESSAGE_BOX);
        b.setVisibleOutBackgroundWindow(!1);
        var d = b.getWindowSize(),
          e = 0.7 * d.width,
          f = 0.1 * d.height;
        isWebPlatform() || (f = 0.15 * d.height);
        d = res_name.edit_text;
        isWebPlatform() || (d = res_name.changename);
        this.txtIP = createEditBox(cc.size(e, f), d);
        this.txtIP.retain();
        this.txtIP.setMaxLength(40);
        this.txtIP.x = b.getWindowSize().width / 2;
        this.txtIP.y = b.getWindowSize().height / 2;
        b.addChildBody(this.txtIP);
        b.addEditbox(this.txtIP);
        b.show();
        b.setOkCallback(function () {
          var b = a.txtIP.getString(),
            d = "ws://" + b + ":18090";
          -1 !== b.indexOf("ws:") && (d = b);
          logMessage("serverUrl: " + d);
          Util.setServerIPAddress(d);
          cc.game.restart();
        });
        b.setCallbackRemoveWindow(function () {
          a.txtIP.release();
          a.txtIP = null;
        });
      }
    },
    initGameInfo: function () {
      var a = cc.color.WHITE,
        b = cc.game.config.app.version;
      void 0 != b &&
        "" != b &&
        ((b = new BkLabel("v" + b, "", 14)),
        b.setTextColor(a),
        (b.x = cc.winSize.width / 2),
        (b.y = 22),
        this.addChild(b),
        isWebPlatform() || b.setVisible(!1));
    },
    initPreGameBottomBar: function (a) {
      var b = a.width - 90;
      a = a.height - 27;
      var d = createBkButtonPlist(
        res_name.btn_googleplay_normal,
        res_name.btn_googleplay_hover,
        res_name.btn_googleplay_normal,
        res_name.btn_googleplay_hover
      );
      d.x = b;
      d.y = a;
      this.addChild(d);
      d.addClickEventListener(function () {
        cc.sys.openURL(
          "https://play.google.com/store/apps/details?id\x3dziga.cotuong.coup"
        );
      });
      b = createBkButtonPlist(
        res_name.btn_appstore_normal,
        res_name.btn_appstore_hover,
        res_name.btn_appstore_normal,
        res_name.btn_appstore_hover
      );
      b.x = d.x + d.width / 2 + b.width / 2 + 10;
      b.y = a;
      this.addChild(b);
      b.addClickEventListener(function () {
        cc.sys.openURL(
          "https://itunes.apple.com/vn/app/c%E1%BB%9D-t%C6%B0%E1%BB%9Bng-c%E1%BB%9D-%C3%BAp-online-ziga/id1415712748?ls\x3d1\x26mt\x3d8"
        );
      });
    },
    onLoadComplete: function (a, b) {
      BkLogicManager.getLogic().setOnLoadComplete(null);
      switch (b) {
        case c.NETWORK_GET_DAILY_TASK_LIST_RETURN:
          var d = BkLogicManager.getLogic().getTaskCompletedCount(a);
          this.btnNhiemVu.setBlinking(0 < d, res_name.blinking);
          this.updateTaskCompletedNum(d);
          BkLogicManager.getLogic().dailyTaskList = a;
      }
      Util.removeAnim();
    },
    updateAvatar: function (a) {},
    updateMailNum: function (a) {
      this.mailNumBg &&
        this.mailNumTxt &&
        (a && 0 < a.getNumberOfUnreadMails()
          ? ((this.mailNumBg.visible = !0),
            (this.mailNumTxt.visible = !0),
            this.mailNumTxt.setString(a.getNumberOfUnreadMails()),
            this.btnMail.setBlinking(!0, res_name.blinking))
          : ((this.mailNumBg.visible = !1),
            (this.mailNumTxt.visible = !1),
            this.mailNumTxt.setString("0"),
            this.btnMail.setBlinking(!1)));
    },
    updateTaskCompletedNum: function (a) {
      this.numTaskBg &&
        this.numTaskTxt &&
        (0 < a
          ? ((this.numTaskBg.visible = !0),
            (this.numTaskTxt.visible = !0),
            this.numTaskTxt.setString(a))
          : ((this.numTaskBg.visible = !1),
            (this.numTaskTxt.visible = !1),
            this.numTaskTxt.setString("0")));
    },
    updateTextPosButton: function () {
      this.btnBonus.getTitleRenderer().y -= 12;
      this.btnShop.getTitleRenderer().y -= 12;
      this.btnMail.getTitleRenderer().y -= 12;
      this.btnFriend.getTitleRenderer().y -= 12;
      this.btnNhiemVu.getTitleRenderer().y -= 12;
    },
    updateUserState: function () {},
    showBonusMoney: function () {
      var a = new BkPlayerBonusWd();
      a.setCallbackRemoveWindow(function () {
        bk.showBnWdFlag = !1;
      });
      a.showWithParent();
    },
    doJoinTable: function (a) {
      BkLogicManager.getLogic().doJoinWebGameRoom(BkGlobal.currentGameID);
    },
    sortGameByOrderAsc: function (a, b) {
      return a.order - b.order;
    },
    sortGameByOrderDesc: function (a, b) {
      return b.order - a.order;
    },
    setVisibleCtr: function (a, b) {
      void 0 != a && a.setVisible(b);
    },
    visibleTop: function (a) {
      void 0 != this.topSprite && this.topSprite.setVisible(a);
    },
  }),
  BkChessGameLayer = BkGameBaseLayer.extend({
    ctor: function (a) {
      this.marginBtnBottom = cc.p(170, 35.5);
      this._super(a);
      this.initGameButton();
      BkGlobal.currentGS != GS.PREPARE_GAME && this.initAfterLoginButton();
    },
    initGameButton: function () {
      var a = cc.winSize.width / 4,
        b = cc.winSize.height / WINDOW_HEIGHT,
        d = isWebPlatform() ? 180 : 360 * b,
        b = createBkButtonPlist(
          res_name.CT_butt,
          res_name.CT_butt_press,
          res_name.CT_butt,
          res_name.CT_butt,
          ""
        ),
        e = isWebPlatform() ? 0.65 : GAME_SCALE,
        f = this;
      b.x = a + 0;
      b.y = d;
      b.setScale(e);
      this.addChild(b);
      b.addClickEventListener(function () {
        Util.isResLoading(f.onClickGame(GID.CO_TUONG)) ||
          (f.onClickGame(GID.CO_TUONG),
          NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_CO_TUONG));
      });
      d = createBkButtonPlist(
        res_name.CU_butt,
        res_name.CU_butt_press,
        res_name.CU_butt,
        res_name.CU_butt,
        ""
      );
      d.x = 3 * a + 0;
      d.setScale(e);
      d.y = b.y;
      this.addChild(d);
      d.addClickEventListener(function () {
        Util.isResLoading(f.onClickGame(GID.CO_UP)) ||
          (f.onClickGame(GID.CO_UP),
          NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_CO_UP));
      });
      isWebPlatform() &&
        ((b.x = cc.winSize.width / 3), (d.x = (cc.winSize.width / 3) * 2));
      this.btnShowHotTable = new BkButton(
        res.tran_hay,
        res.tran_hay,
        res_name.res,
        res.tran_hay,
        ccui.Widget.LOCAL_TEXTURE
      );
      this.btnShowHotTable.setScale(GAME_SCALE);
      this.btnShowHotTable.x = cc.winSize.width / 2;
      this.btnShowHotTable.y = 0.6 * cc.winSize.height;
      this.addChild(this.btnShowHotTable, -1);
      this.btnShowHotTable.addClickEventListener(function () {
        Util.isResLoading(f.onClickGetHotTable) ||
          (1e3 > BkTime.GetCurrentTime() - f.btnShowHotTable.lastTimeClick
            ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
            : ((f.btnShowHotTable.lastTimeClick = BkTime.GetCurrentTime()),
              f.onClickGetHotTable(GID.CO_TUONG),
              NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_HOT_TABLE_IMG)));
      });
      this.btnXemNgay = new BkButton(
        res_name.xem_ngay_butt,
        res_name.xemngay_butt_press,
        res_name.xem_ngay_butt,
        res_name.xem_ngay_butt,
        ccui.Widget.PLIST_TEXTURE
      );
      this.btnXemNgay.setScale(GAME_SCALE);
      this.btnXemNgay.x = this.btnShowHotTable.x;
      this.btnXemNgay.y =
        this.btnShowHotTable.y -
        this.btnShowHotTable.getContentSize().height * GAME_SCALE * 0.32;
      this.addChild(this.btnXemNgay);
      this.btnXemNgay.addClickEventListener(function () {
        Util.isResLoading(f.onClickGetHotTable) ||
          (1e3 > BkTime.GetCurrentTime() - f.btnXemNgay.lastTimeClick
            ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
            : ((f.btnXemNgay.lastTimeClick = BkTime.GetCurrentTime()),
              f.onClickGetHotTable(GID.CO_TUONG),
              NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_HOT_TABLE)));
      });
    },
    onBackClick: function () {
      logMessage("onBackClick BkChessGameLayer");
      showPopupConfirmWith(BkConstString.STR_CONFIRM_EXIT_APP, "", function () {
        logMessage("ok callback");
        cc.director.end();
      });
    },
    initAfterLoginButton: function () {
      var a = 0.2 * cc.winSize.width,
        b = this;
      isWebPlatform() || isFBInstantGame()
        ? isFBInstantGame() &&
          ((this.btnSetting = new BkButton(
            res_name.setting_butt,
            res_name.setting_butt_press,
            res_name.setting_butt,
            res_name.setting_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnSetting.setScale(GAME_SCALE),
          (this.btnSetting.x = 0.3 * cc.winSize.width),
          (this.btnSetting.y = 0.05 * cc.winSize.height),
          this.addChild(this.btnSetting),
          this.btnSetting.addClickEventListener(function () {
            logMessage("btnSetting click");
            Util.openWebview(
              "huongdan/huongdan.html",
              "H\u01b0\u1edbng d\u1eabn ch\u01a1i"
            );
          }),
          (this.btnFriend = new BkButton(
            res_name.friends_butt,
            res_name.friends_butt_press,
            res_name.friends_butt,
            res_name.friends_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnFriend.setScale(GAME_SCALE),
          (this.btnFriend.x = 0.5 * cc.winSize.width),
          (this.btnFriend.y = 0.05 * cc.winSize.height),
          this.addChild(this.btnFriend),
          this.btnFriend.addClickEventListener(function () {
            if (!Util.isResLoading(b.showFriendWD))
              if (1e3 > BkTime.GetCurrentTime() - b.btnFriend.lastTimeClick)
                logMessage(
                  "click 2 lan trong 1 sec -\x3e don't process action"
                );
              else {
                b.btnFriend.lastTimeClick = BkTime.GetCurrentTime();
                var a = new BkFriendsWindow();
                a.setParentWindow(b);
                a.showWithParent();
                b.removeNumberFriend();
              }
          }),
          (this.btnShareNative = new BkButton(
            res_name.share_butt,
            res_name.share_butt_press,
            res_name.share_butt,
            res_name.share_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnShareNative.setScale(GAME_SCALE),
          (this.btnShareNative.x = 0.7 * cc.winSize.width),
          (this.btnShareNative.y = this.btnFriend.y),
          this.addChild(this.btnShareNative),
          this.btnShareNative.addClickEventListener(function () {
            BkFbInstant.createShareImg(function (a) {
              BkFbInstant.shareFriend(
                "L\u00e0m v\u00e1n c\u1edd kh\u00f4ng b\u1ea1n \u01a1i ?",
                a,
                function (a) {}
              );
            });
          }))
        : ((this.btnSetting = new BkButton(
            res_name.setting_butt,
            res_name.setting_butt_press,
            res_name.setting_butt,
            res_name.setting_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnSetting.setScale(GAME_SCALE),
          (this.btnSetting.x = 0.2 * cc.winSize.width),
          (this.btnSetting.y = 0.05 * cc.winSize.height),
          this.addChild(this.btnSetting),
          this.btnSetting.addClickEventListener(function () {
            logMessage("btnSetting click");
            b.onclickbtnSetting();
          }),
          (this.btnFBShare = new BkButton(
            res_name.btn_buy_heart,
            res_name.btn_buy_heart_press,
            res_name.btn_buy_heart,
            res_name.btn_buy_heart,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnFBShare.setScale(GAME_SCALE),
          (this.btnFBShare.x = this.btnSetting.x + a),
          (this.btnFBShare.y = this.btnSetting.y),
          this.addChild(this.btnFBShare),
          this.btnFBShare.addClickEventListener(function () {
            b.showAddHeartWindow();
          }),
          (this.btnFriend = new BkButton(
            res_name.friends_butt,
            res_name.friends_butt_press,
            res_name.friends_butt,
            res_name.friends_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnFriend.setScale(GAME_SCALE),
          (this.btnFriend.x = this.btnFBShare.x + a),
          (this.btnFriend.y = this.btnSetting.y),
          this.addChild(this.btnFriend),
          this.btnFriend.addClickEventListener(function () {
            if (1e3 > BkTime.GetCurrentTime() - b.btnFriend.lastTimeClick)
              logMessage("click 2 lan trong 1 sec -\x3e don't process action");
            else {
              b.btnFriend.lastTimeClick = BkTime.GetCurrentTime();
              var a = new BkFriendsWindow();
              a.setParentWindow(b);
              a.showWithParent();
              b.removeNumberFriend();
            }
          }),
          (this.btnShareNative = new BkButton(
            res_name.share_butt,
            res_name.share_butt_press,
            res_name.share_butt,
            res_name.share_butt,
            ccui.Widget.PLIST_TEXTURE
          )),
          this.btnShareNative.setScale(GAME_SCALE),
          (this.btnShareNative.x = this.btnFriend.x + a),
          (this.btnShareNative.y = this.btnSetting.y),
          this.addChild(this.btnShareNative),
          this.btnShareNative.addClickEventListener(function () {
            NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_SHARE_NATIVE);
            NativeInterface.shareNative();
          }));
      this.playerAvatar = new BkChessAvatar();
      this.playerAvatar.setScale(GAME_SCALE);
      isWebPlatform()
        ? (this.playerAvatar.setScale(0.6),
          (this.playerAvatar.x =
            WINDOW_MARGIN_LEFT + this.playerAvatar.getBoundingBox().width / 2),
          (this.playerAvatar.y =
            cc.winSize.height -
            WINDOW_MARGIN_TOP * GAME_SCALE -
            this.playerAvatar.getBoundingBox().height / 2))
        : ((this.playerAvatar.x =
            0.55 * cc.winSize.width -
            this.playerAvatar.getBoundingBox().width / 2),
          (this.playerAvatar.y = 0.865 * cc.winSize.height),
          NativeInterface.isIphoneX() &&
            (this.playerAvatar.y = 0.84 * cc.winSize.height));
      this.addChild(this.playerAvatar);
      a = 0.005 * cc.winSize.width;
      this.heartSprite = new BkHeartSprite();
      this.heartSprite.setScale(GAME_SCALE);
      isWebPlatform() && this.heartSprite.setScale(c.AVATAR_WEB_SCALE);
      this.heartSprite.x =
        this.playerAvatar.x +
        this.playerAvatar.getBoundingBox().width / 2 +
        this.heartSprite.getBoundingBox().width / 2 +
        2 * a;
      this.heartSprite.y =
        this.playerAvatar.y +
        this.playerAvatar.getDeltaYAvatarName() * GAME_SCALE;
      this.addChild(this.heartSprite);
      this.heartSprite.animateHeartSprite();
      this.taskSprite = new BkDailyTaskSprite();
      this.taskSprite.setScale(GAME_SCALE);
      isWebPlatform()
        ? ((this.taskSprite.y = this.heartSprite.y + 28),
          (this.taskSprite.x =
            cc.winSize.width - 180 - this.heartSprite.getBoundingBox().width))
        : ((this.taskSprite.y = this.heartSprite.y),
          (this.taskSprite.x =
            (1 - this.playerAvatar.x / cc.winSize.width) * cc.winSize.width +
            this.playerAvatar.getBoundingBox().width / 2 -
            this.taskSprite.getBoundingBox().width / 2));
      this.addChild(this.taskSprite);
    },
    showFriendWD: function () {
      var a = Util.getCurrentLayer(),
        b = new BkFriendsWindow();
      b.setParentWindow(a);
      b.showWithParent();
      null != a && a.removeNumberFriend();
    },
    bgNumberFriendOnline: null,
    lbFriendOnline: null,
    removeNumberFriend: function () {
      null != this.bgNumberFriendOnline &&
        (this.bgNumberFriendOnline.removeFromParent(),
        (this.bgNumberFriendOnline = null));
      null != this.lbFriendOnline &&
        (this.lbFriendOnline.removeFromParent(), (this.lbFriendOnline = null));
    },
    onUpdatePlayerNewsFees: function (a) {
      logMessage(
        "onUpdatePlayerNewsFees nbFriedOnline: " + a.numberFriendOnline
      );
      a = a.numberFriendOnline;
      if (0 < a) {
        this.bgNumberFriendOnline = new BkSprite("#" + res_name.circle_red);
        this.bgNumberFriendOnline.setScale(GAME_SCALE);
        var b = 28;
        isWebPlatform()
          ? ((b = 10),
            this.bgNumberFriendOnline.setScale(0.5),
            (this.bgNumberFriendOnline.x =
              this.btnFriendsTop.x -
              0.4 * this.btnFriendsTop.getBoundingBox().width),
            (this.bgNumberFriendOnline.y =
              this.btnFriendsTop.y +
              0.3 * this.btnFriendsTop.getBoundingBox().height))
          : ((this.bgNumberFriendOnline.x =
              this.btnFriend.x + 0.3 * this.btnFriend.getBoundingBox().width),
            (this.bgNumberFriendOnline.y =
              this.btnFriend.y + 0.3 * this.btnFriend.getBoundingBox().height));
        this.addChild(this.bgNumberFriendOnline);
        this.lbFriendOnline = new BkLabel(a, "", b, !0);
        this.lbFriendOnline.setScale(GAME_SCALE);
        this.lbFriendOnline.x = this.bgNumberFriendOnline.x;
        this.lbFriendOnline.y = this.bgNumberFriendOnline.y;
        this.addChild(this.lbFriendOnline);
      }
    },
    testNotifyWD: function () {
      BkLogicManager.getLogic().initNotifyContentWD(
        "co ziga da ra mat phien ban moi hon. \nban vui long cap nhat de co duoc nhung tinh nang moi nhat cua he thong.",
        1,
        6,
        "itms-apps://itunes.apple.com/app/id1415712748",
        2,
        "https://zigavn.com/huong-dan-chung"
      );
    },
    showRateAppWD: function () {
      new BkRateAppWindow(
        "B\u1ea1n c\u00f3 y\u00eau th\u00edch C\u1edd Ziga kh\u00f4ng?",
        "H\u00e3y b\u00ecnh ch\u1ecdn 5* cho C\u1edd Ziga \u0111\u1ec3 c\u1ed9ng \u0111\u1ed3ng C\u1edd Ziga ng\u00e0y c\u00e0ng ph\u00e1t tri\u1ec3n!",
        "B\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c t\u1eb7ng 5 Tim sau khi b\u00ecnh ch\u1ecdn 5* cho C\u1edd Ziga!"
      ).showWithParent();
    },
    showAddHeartWindow: function () {
      var a = new BkAddHeartWindow();
      a.setParentWindow(this);
      a.showWithParent();
    },
    countClick: 0,
    testShowAdsContinue: function () {
      BkGlobal.isPushFullScreenAds = !0;
      0 == this.countClick % 5
        ? BkConnectionManager.showFullScreenAds(
            ads.PARTNER_FACEBOOK,
            ads.ADS_TYPE_INTERSTITIAL_ADS
          )
        : 1 == this.countClick % 5
        ? BkConnectionManager.showFullScreenAds(
            ads.PARTNER_GOOGGLE,
            ads.ADS_TYPE_INTERSTITIAL_ADS
          )
        : 2 == this.countClick % 5
        ? BkConnectionManager.showFullScreenAds(
            ads.PARTNER_GOOGGLE,
            ads.ADS_TYPE_REWARDED_VIDEO_ADS
          )
        : 3 == this.countClick % 5
        ? BkConnectionManager.showFullScreenAds(
            ads.PARTNER_TWITTER,
            ads.ADS_TYPE_REWARDED_VIDEO_ADS
          )
        : 4 == this.countClick % 5 &&
          BkConnectionManager.showFullScreenAds(
            ads.PARTNER_TWITTER,
            ads.ADS_TYPE_INTERSTITIAL_ADS
          );
      this.countClick++;
      4 < this.countClick && this.countClick++;
    },
    testClippingNode: function () {
      var a = new BkSpriteLoader(
          "http://graph.facebook.com/10203878245936620/picture?width\x3d80\x26height\x3d80",
          "#" + res_name.default_Avatar
        ),
        a = BkAvartarImg.createClipNodeCircle(a, a.getContentSize().height);
      a.x = 100;
      a.y = 100;
      this.addChild(a);
    },
    testLinkAccount: function () {
      new BkChooseAccountWindow({
        nameLinked: "W34518178234235235235",
        avatarLinked:
          "http://graph.facebook.com/10203878245936620/picture?width\x3d80\x26height\x3d80",
        eloCotuongLinked: "1236",
        rankCotuongLinked: "111",
        eloCoupLinked: "3323",
        rankCoUpLinked: "123",
        eloCotuong: "2111",
        rankCotuong: "1",
        eloCoup: "1912",
        rankCoUp: "20000000",
      }).showWithParent();
    },
    updateDailyTaskSprite: function () {
      this.taskSprite.updateData();
    },
    updateHeart: function (a, b) {
      logMessage("updateHeart: " + a + " - reason: " + b);
      null != this.heartSprite && this.heartSprite.updateData(a, b);
    },
    onClickGetHotTable: function (a) {
      if (BkGlobal.currentGS == GS.PREPARE_GAME && isFBInstantGame())
        BkFbInstant.processLoginFb();
      else if (BkGlobal.currentGS == GS.PREPARE_GAME)
        FbService.processFbLogin(!0);
      else {
        a = this;
        isFBInstantGame() &&
          null != Util.getCurrentLayer() &&
          (a = Util.getCurrentLayer());
        var b = new BkHotTableWindow();
        b.setParentWindow(a);
        b.showWithParent();
      }
    },
    slideMenuLayer: null,
    onClickMenuButton: function () {
      null == this.slideMenuLayer &&
        ((this.slideMenuLayer = new BkSlideMenuLayer(GS.CHOOSE_GAME)),
        this.addChild(this.slideMenuLayer));
      this.slideMenuLayer.onStateChangeSlideMenu();
    },
    onClickGame: function (a) {
      BkGlobal.currentGS == GS.PREPARE_GAME && isFBInstantGame()
        ? BkFbInstant.processLoginFb()
        : BkGlobal.currentGS == GS.PREPARE_GAME
        ? FbService.processFbLogin(!0)
        : 1 > BkGlobal.UserInfo.getMoney()
        ? BkConnectionManager.inviteViewAds(GET_ADS_STATE.INVITE_VIEW_ADS)
        : (this.doJoinTable(a), Util.storeSetting(key.lastGameChoose, a));
    },
    doJoinTable: function (a) {
      BkGlobal.currentGameID = a;
      BkLogicManager.getLogic().doJoinWebGameRoom(BkGlobal.currentGameID);
      Util.showAnim(!1);
    },
    updateAvatar: function (a, b) {
      null != this.playerAvatar && this.playerAvatar.updateAvatar();
      if (null != this.heartSprite)
        if (null != b && void 0 != b) this.heartSprite.onUpdateHeartSprite(b);
        else this.heartSprite.onUpdateHeartSprite(0);
    },
    onclickbtnSetting: function () {
      NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_SETTING);
      null == this.settingLayer &&
        ((this.settingLayer = new BkSettingLayer(this.btnSetting)),
        this.addChild(this.settingLayer));
      this.settingLayer.onStateChangeSettingLayer();
    },
  }),
  BkWebGameLayer = BkChessGameLayer.extend({
    ctor: function () {
      this._super();
      if (BkGlobal.currentGS == GS.PREPARE_GAME)
        this.initPreGameItem(this._winSize);
      else if ((this.initAfterLoginTopBar(this._winSize), !bk.isFbApp)) {
        var a = createBkButtonPlist(
          res_name.BtnDialog_Normal,
          res_name.BtnDialog_Pressed,
          res_name.BtnDialog_Normal,
          res_name.BtnDialog_Hover
        );
        a.setTitleText("THO\u00c1T");
        a.setTitleFontSize(16);
        a.setTitleColor(cc.color(45, 22, 10));
        a.setPosition(cc.winSize.width / 2, 25);
        a.addClickEventListener(function () {
          processLogout(BkLogicManager.getLogic().isDeleteLoginState);
        });
        this.addChild(a);
      }
      this.updateWebPosition();
    },
    initAfterLoginTopBar: function () {
      var a = cc.director.getWinSize(),
        b = this;
      cc.screen.fullScreen()
        ? (this.btnFullScreen = new BkButton(
            res_name.btn_scale2,
            res_name.btn_scale2,
            res_name.btn_scale2,
            res_name.btn_scale2_hover,
            ccui.Widget.PLIST_TEXTURE
          ))
        : (this.btnFullScreen = new BkButton(
            res_name.btn_scale,
            res_name.btn_scale,
            res_name.btn_scale,
            res_name.btn_scale_hover,
            ccui.Widget.PLIST_TEXTURE
          ));
      this.btnFullScreen.x =
        a.width -
        WINDOW_MARGIN_RIGHT -
        0.5 * this.btnFullScreen.getContentSize().width;
      this.btnFullScreen.y =
        a.height -
        WINDOW_MARGIN_TOP -
        0.5 * this.btnFullScreen.getContentSize().height;
      this.btnFullScreen.addClickEventListener(function () {
        cc.screen.fullScreen()
          ? (exitFullScreen(),
            b.btnFullScreen.loadTextures(
              res_name.btn_scale,
              res_name.btn_scale,
              res_name.btn_scale,
              res_name.btn_scale_hover,
              ccui.Widget.PLIST_TEXTURE
            ))
          : makeFullScreen(function () {
              cc.screen.fullScreen()
                ? b.btnFullScreen.loadTextures(
                    res_name.btn_scale2,
                    res_name.btn_scale2,
                    res_name.btn_scale2,
                    res_name.btn_scale2_hover,
                    ccui.Widget.PLIST_TEXTURE
                  )
                : b.btnFullScreen.loadTextures(
                    res_name.btn_scale,
                    res_name.btn_scale,
                    res_name.btn_scale,
                    res_name.btn_scale_hover,
                    ccui.Widget.PLIST_TEXTURE
                  );
            }, b);
      });
      this.addChild(this.btnFullScreen);
      this.btnScreenShot = new BkButton(
        res_name.btn_guide,
        res_name.btn_guide,
        res_name.btn_guide,
        res_name.btn_guide_hover,
        ccui.Widget.PLIST_TEXTURE
      );
      this.btnScreenShot.y = this.btnFullScreen.y;
      this.btnScreenShot.addClickEventListener(function () {
        var a = cc.game.config.app.helpMenu;
        void 0 != a && "" != a && window.open(a, "_blank");
      });
      this.addChild(this.btnScreenShot);
      this.btnFriendsTop = new BkButton(
        res_name.btn_friend_top,
        res_name.btn_friend_top,
        res_name.btn_friend_top,
        res_name.btn_friend_top_hover,
        ccui.Widget.PLIST_TEXTURE
      );
      this.btnFriendsTop.y = this.btnFullScreen.y;
      this.btnFriendsTop.addClickEventListener(function () {
        var a = new BkFriendsWindow();
        a.setParentWindow(b);
        a.showWithParent();
      });
      this.addChild(this.btnFriendsTop);
      this.btnScreenShot.x =
        this.btnFullScreen.x - this.btnFullScreen.width - 5;
      this.btnFriendsTop.x =
        this.btnScreenShot.x -
        this.btnFriendsTop.width / 2 -
        this.btnScreenShot.width / 2 -
        5;
    },
    initPreGameItem: function (a) {
      var b = WD_BODY_MARGIN_LR;
      this.topSprite = new BkSprite();
      this.addChild(this.topSprite);
      var d = new BkSprite("#" + res_name.btnLoginFacebookNormal);
      d.x = d.width / 2 + b;
      d.y = a.height - 27;
      this.topSprite.addChild(d);
      d.setMouseOnHover(
        function () {
          d.setOpacity(255);
        },
        function () {
          d.setOpacity(240);
        }
      );
      d.setOnlickListenner(function () {
        FbService.processFbLogin(!0);
      });
      a = createBkButtonPlist(
        res_name.BtnDialog_Normal,
        res_name.BtnDialog_Pressed,
        res_name.BtnDialog_Normal,
        res_name.BtnDialog_Hover
      );
      a.setTitleText("Auto Login");
      a.setPosition(cc.winSize.width / 2, cc.winSize.height / 4);
      a.addClickEventListener(function () {
        BkLogicManager.getLogic().doAutoRegLogin();
      });
      cc.game.config && 1 == cc.game.config.debugMode && this.addChild(a);
      this.statusLabel = new BkToast();
      this.addChild(this.statusLabel, WD_ZORDER_TOP);
      this.statusLabel.setVisible(!0);
      this.statusLabel.x = cc.winSize.width / 2;
      this.statusLabel.y = 60;
      a =
        "B\u1ea5m \u0111\u0103ng nh\u1eadp b\u1eb1ng t\u00e0i kho\u1ea3n Facebook \u0111\u1ec3 v\u00e0o game";
      bk.isFbApp &&
        (a =
          "H\u00e3y c\u1ea5p quy\u1ec1n b\u1ea5m \u0111\u0103ng nh\u1eadp facebook \u0111\u1ec3 v\u00e0o game");
      this.statusLabel.setContentText(a, 375);
      this.initPreGameBottomBar(cc.winSize);
    },
    updateWebPosition: function () {
      BkGlobal.currentGS == GS.PREPARE_GAME
        ? (this.btnShowHotTable.setScale(0.7),
          (this.btnShowHotTable.y += 65),
          this.btnXemNgay.setVisibleButton(!1))
        : (this.btnShowHotTable.setScale(0.6),
          (this.btnShowHotTable.y += 55),
          (this.btnXemNgay.y += 125),
          this.btnXemNgay.setScale(0.7),
          this.initAfterLoginTopBar(cc.winSize));
    },
  });
var BkPrepareGame = cc.Scene.extend({
  isPauseEvent: !1,
  prepareGameLayer: null,
  onEnter: function () {
    this._super();
    isWebPlatform()
      ? (this.prepareGameLayer = new BkWebGameLayer(GS.PREPARE_GAME))
      : (this.prepareGameLayer = new BkChessGameLayer(GS.PREPARE_GAME));
    this.addChild(this.prepareGameLayer);
    BkGlobal.currentGameID = -1;
    BkGlobal.currentRoomID = -1;
    BkGlobal.currentTableID = -1;
  },
  onEnterTransitionDidFinish: function () {
    this._super();
    this.scheduleUpdate();
    Util.removeAnim();
  },
  update: function () {
    var a = getCurrentScene();
    null != a &&
      a instanceof BkPrepareGame &&
      (this.unscheduleUpdate(),
      processNextEventAfterSceneTransitionDidFinish());
  },
  visibleBtnItem: function (a) {
    this.prepareGameLayer.visibleTop(a);
  },
});
var BkChooseGame = cc.Scene.extend({
  isPauseEvent: !1,
  chooseGameLayer: null,
  onEnter: function () {
    Util.showAnim();
    this._super();
    cc.spriteFrameCache.addSpriteFrames(
      res.chess_common_plist,
      res.chess_common_img
    );
    cc.spriteFrameCache.addSpriteFrames(
      res.main_screen_plist_sps,
      res.main_screen_png_sps
    );
    cc.spriteFrameCache.addSpriteFrames(
      res.popup_resource_plist_sps,
      res.popup_resource_png_sps
    );
    cc.spriteFrameCache.addSpriteFrames(
      res.main_screen_big_item_plist_sps,
      res.main_screen_big_item_png_sps
    );
    isWebPlatform()
      ? (this.chooseGameLayer = new BkWebGameLayer(GS.CHOOSE_GAME))
      : (this.chooseGameLayer = new BkChessGameLayer(GS.CHOOSE_GAME));
    this.addChild(this.chooseGameLayer);
    BkGlobal.currentGameID = -1;
    BkGlobal.currentRoomID = -1;
    BkGlobal.currentTableID = -1;
    logMessage("set default AdsID -\x3e will reset if receive server setting");
    NativeInterface.setAdsIDWithData();
    this.onHandleBackPressAndroid();
  },
  onEnterTransitionDidFinish: function () {
    this._super();
    this.scheduleUpdate();
    Util.removeAnim();
  },
  update: function () {
    var a = getCurrentScene();
    null != a &&
      a instanceof BkChooseGame &&
      (this.unscheduleUpdate(),
      processNextEventAfterSceneTransitionDidFinish(),
      this.doGetSettingRequest(),
      BkLogicManager.getLogic().showWebPromoAds(),
      Util.sendPacketWithOnlyType(c.NETWORK_PLAYER_NEWS_FEED),
      this.doGetListChatInvalid(),
      BkConnectionManager.offAdsBannerFinishGame());
  },
  doGetListChatInvalid: function () {
    var a = Util.getSetting("lastTimeGetSettingListChatInvalid", 0),
      b = BkTime.GetCurrentTime(),
      a = Math.floor((b - a) / 1e3);
    logMessage("doGetListChatInvalid: " + a);
    604800 < a &&
      (Util.storeSetting("lastTimeGetSettingListChatInvalid", b),
      (b = URL_SETTING.URL_SETTING_CHAT),
      isFBInstantGame() && (b = URL_SETTING.URL_SETTING_CHAT_INST),
      Util.httpRequest(b, function (a, b) {
        Util.removeAnim();
        if (a) logMessage("err: " + a);
        else {
          logMessage("respondText: " + b);
          var f = JSON.parse(b),
            f = Util.parseJSONfromData(
              f,
              "listChatInvalid",
              SETTING.LIST_MESSAGE_INVALID
            );
          Util.setListMessageChatInvalid(f);
        }
      }));
  },
  doGetSettingRequest: function () {
    BkGlobal.isNeedLoadSetting &&
      (logMessage("isNeedLoadSetting -\x3e getSettingRequest"),
      (BkGlobal.isNeedLoadSetting = !1),
      BkLogicManager.getLogic().getSettingRequest(),
      BkLogicManager.getLogic().getRateAppRewarded());
  },
  updateAvatar: function (a, b) {
    null != this.chooseGameLayer && this.chooseGameLayer.updateAvatar(a, b);
  },
  onBackClick: function () {
    logMessage("onBackClick BkChooseGameScene");
    var a = BkStackWindow.getTopWindow();
    if (null != a) a.removeSelf();
    else if (null != this.chooseGameLayer) this.chooseGameLayer.onBackClick();
  },
  onHandleBackPressAndroid: function () {
    if (cc.sys.os == cc.sys.OS_ANDROID) {
      var a = this;
      cc.eventManager.addListener(
        {
          event: cc.EventListener.KEYBOARD,
          onKeyPressed: function (b, d) {
            if (b == cc.KEY.back) a.onBackClick();
          },
        },
        this
      );
    }
  },
  onUpdatePlayerNewsFees: function (a) {
    if (null != this.chooseGameLayer)
      this.chooseGameLayer.onUpdatePlayerNewsFees(a);
  },
});
var BkIngame = cc.Scene.extend({
  isPauseEvent: !1,
  inviteFriend: null,
  gameLayer: null,
  ChatLayer: null,
  onEnter: function () {
    this._super();
    cc.spriteFrameCache.addSpriteFrames(
      res.main_screen_plist_sps,
      res.main_screen_png_sps
    );
    cc.spriteFrameCache.addSpriteFrames(
      res.main_screen_big_item_plist_sps,
      res.main_screen_big_item_png_sps
    );
    this.initGameLayer();
    logMessage("init BkGlobal.ingameScene");
    BkGlobal.ingameScene = this;
    this.onHandleBackPressAndroid();
  },
  onEnterTransitionDidFinish: function () {
    this._super();
    BkGlobal.ingameScene = this;
    isWebPlatform() && this.initChatLayer();
    this.ChatLayer &&
      ((this.ChatLayer.visible = !0),
      this.ChatLayer.switchChatUpDown(BkUserClientSettings.isChatEnable));
    BkLogicManager.getInGameLogic().networkGetTableInfo();
    this.scheduleUpdate();
    logMessage("onEnterTransitionDidFinish " + BkTime.GetCurrentTime());
  },
  update: function () {
    var a = getCurrentScene();
    null != a &&
      a instanceof BkIngame &&
      (logMessage("update " + BkTime.GetCurrentTime()),
      BkGlobal.isNeedLoadSetting &&
        (logMessage("isNeedLoadSetting -\x3e getSettingRequest"),
        (BkGlobal.isNeedLoadSetting = !1),
        BkLogicManager.getLogic().getSettingRequest()),
      this.unscheduleUpdate(),
      processNextEventAfterSceneTransitionDidFinish());
  },
  initGameLayer: function () {
    null != this.gameLayer &&
      (this.gameLayer.removeAllChildren(),
      this.gameLayer.removeFromParent(),
      (this.gameLayer = null));
    switch (BkGlobal.currentGameID) {
      case GID.TLMN:
        this.gameLayer = new BkTLMNGameLayer();
        break;
      case GID.CO_TUONG:
        this.gameLayer = new BkCoTuongGameLayer();
        break;
      case GID.CO_UP:
        this.gameLayer = new BkCoUpGameLayer();
        break;
      case GID.PHOM:
        this.gameLayer = new BkPhomGameLayer();
        break;
      case GID.BA_CAY:
        this.gameLayer = new BkBaCayGameLayer();
        break;
      case GID.XAM:
        this.gameLayer = new BkSamGameLayer();
        break;
      case GID.TLMN_DEM_LA:
        this.gameLayer = new BkTLMNDemLaGameLayer();
        break;
      case GID.XITO:
        this.gameLayer = new BkXiToGameLayer();
        break;
      case GID.XI_DZACH:
        this.gameLayer = new BkXiDzachGameLayer();
        break;
      case GID.POKER:
        this.gameLayer = new BkPokerGameLayer();
        break;
      case GID.LIENG:
        this.gameLayer = new BkLiengGameLayer();
        break;
      case GID.MAU_BINH:
        this.gameLayer = new BkMauBinhGameLayer();
        break;
      default:
        this.gameLayer = new BkTLMNGameLayer();
    }
    null != this.gameLayer &&
      (this.addChild(this.gameLayer), this.gameLayer.setParent(this));
  },
  initChatLayer: function () {
    null != this.ChatLayer &&
      (this.ChatLayer.removeAllChildren(),
      this.ChatLayer.removeFromParent(),
      (this.ChatLayer = null));
    var a = Util.getChatSetting();
    this.ChatLayer = new BkChatBoxLayer(a, !0);
    this.ChatLayer.visible = !1;
    null != this.ChatLayer &&
      (this.addChild(this.ChatLayer), this.ChatLayer.setParent(this));
  },
  getGameLayer: function () {
    null == this.gameLayer && this.initGameLayer();
    return this.gameLayer;
  },
  getLogic: function () {
    return BkLogicManager.getInGameLogic();
  },
  showPlayerOverviewInfo: function (a) {
    var b = this;
    a = new BkPlayerInfo(a);
    a.setParentWindow(this.gameLayer);
    a.showWithParent();
    this.getGameLayer().disableEventStartGameButton();
    a.setCallbackRemoveWindow(function () {
      logMessage("close playerInfoWd callback");
      b.getGameLayer().enableEventStartGameButton();
    });
  },
  showInviteWindows: function (a) {
    null != this.inviteFriend && this.inviteFriend.removeFromParent();
    this.inviteFriend = new BkInviteOtherPlayer(a);
    var b = this;
    this.getGameLayer().disableEventStartGameButton();
    this.inviteFriend.setCallbackRemoveWindow(function () {
      logMessage("close inviteFriend callback");
      b.getGameLayer().enableEventStartGameButton();
    });
    this.inviteFriend.setParentWindow(this);
    this.inviteFriend.showWithParent();
  },
  showInviteFriend: function (a, b) {
    null != this.inviteFriend && this.inviteFriend.drawFriendsList(a, b);
  },
  updateChatBox: function (a, b) {
    logMessage("updateChatBox: " + a + " - serverPos: " + b);
    var d = Util.isTextChatEmo(a),
      e = this.getLogic().getPlayer(b),
      f = e.getName(),
      g = !1;
    (BkGlobal.currentGameID == GID.CO_TUONG ||
      BkGlobal.currentGameID == GID.CO_UP) &&
      e.isObserver &&
      (g = !0);
    e = this.getGameLayer().getAvatarByServerPos(b);
    if (-1 == d) {
      if (
        (this.ChatLayer && this.ChatLayer.updateReceiveMsg(a, f),
        !isWebPlatform())
      ) {
        if (null != e) {
          var d = this.getGameLayer().getIndexOfAvatarByName(f),
            h = e.x,
            k = e.y,
            m = 0,
            n = 0;
          if (-1 != d) {
            var p = getMaxPlayer(BkGlobal.currentGameID);
            switch (d) {
              case 0:
                n = 90;
                break;
              case 1:
                m = -96;
                break;
              case 2:
                6 == p ? (m = -96) : (n = -90);
                break;
              case 3:
                m = 80;
                break;
              case 4:
                6 == p && (m = 80);
                break;
              case 5:
                6 == p && (m = 80);
            }
          }
          e.showChatWithContent(a, h + m, k + n);
        }
        g && this.getGameLayer().showViewerChatText(a);
        this.getGameLayer().updateContentChat(a, f);
      }
    } else
      g
        ? this.getGameLayer().showViewerChat(d)
        : null != e && e.showEmotionWithIndex(d);
  },
  updateUpDownChatBoxState: function (a) {
    this.ChatLayer.displayChatState = a;
    this.ChatLayer && this.ChatLayer.switchChatUpDown(a);
  },
  setDisablePlayerChat: function (a) {
    this.ChatLayer && this.ChatLayer.setDisablePlayerChat(a);
  },
  onBackAndroidIngameClick: function () {
    logMessage("onBackClick BkInGameScene");
    var a = BkStackWindow.getTopWindow();
    if (null != a) a.removeSelf();
    else if (null != this.gameLayer) this.gameLayer.onBackAndroidIngameClick();
  },
  onHandleBackPressAndroid: function () {
    if (cc.sys.os == cc.sys.OS_ANDROID) {
      var a = this;
      cc.eventManager.addListener(
        {
          event: cc.EventListener.KEYBOARD,
          onKeyPressed: function (b, d) {
            if (b == cc.KEY.back) a.onBackAndroidIngameClick();
          },
        },
        this
      );
    }
  },
});
BkLoaderScene = cc.Scene.extend({
  isPauseEvent: !1,
  _interval: null,
  _label: null,
  _className: "LoaderScene",
  cb: null,
  target: null,
  background: null,
  init: function () {
    var a = (this._bgLayer = new cc.LayerColor(cc.color(255, 255, 255, 0)));
    logMessage("custom BG");
    this.addChild(a, 0);
    var b = 24,
      d = 0;
    cc._loaderImage && ((b = 14), (d = -110));
    b = this._label = new cc.LabelTTF("Loading... 0%", "Arial", b);
    b.setPosition(cc.pAdd(cc.visibleRect.center, cc.p(0, d)));
    b.setColor(cc.color(180, 180, 180));
    a.addChild(this._label, 10);
    return !0;
  },
  _initStage: function (a, b) {
    var d = (this._texture2d = new cc.Texture2D());
    d.initWithElement(a);
    d.handleLoadedTexture();
    d = this._logo = new cc.Sprite(d);
    d.setScale(cc.contentScaleFactor());
    d.x = b.x;
    d.y = b.y;
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.schedule(this._startLoading, 0.3);
    BkConnectionManager.isOpenConnection() || BkConnectionManager.initWithUrl();
  },
  onExit: function () {
    cc.Node.prototype.onExit.call(this);
    this._label.setString("Loading... 0%");
  },
  initWithResources: function (a, b, d) {
    cc.isString(a) && (a = [a]);
    this.resources = a || [];
    this.cb = b;
    this.target = d;
  },
  _startLoading: function () {
    var a = this;
    a.unschedule(a._startLoading);
    var b = a.resources;
    cc.loader.releaseAll();
    cc.loader.load(
      b,
      function (b, e, f) {
        b = Math.min(((f / e) * 100) | 0, 100);
        a._label.setString("Loading... " + b + "%");
      },
      function () {
        a.cb && a.cb.call(a.target);
      }
    );
  },
});
var bkloaderScene = null;
BkLoaderScene.preload = function (a, b, d) {
  bkloaderScene ||
    ((bkloaderScene = new BkLoaderScene()), bkloaderScene.init());
  cc.director.runScene(bkloaderScene);
  bkloaderScene.initWithResources(a, b, d);
  return bkloaderScene;
};
cc.Node.prototype.createHoverEvent = function (a, b, d) {
  return cc.EventListener.create({
    event: cc.EventListener.MOUSE,
    onMouseMove: function (d) {
      var f = d.getLocation(),
        g = d.getCurrentTarget();
      cc.rectContainsPoint(g.getBoundingBoxToWorld(), f)
        ? ((cc._canvas.style.cursor = "pointer"),
          (BkInSide.isInSide = !0),
          (BkInSide.targetInSide = g),
          null != a && void 0 != a && a(d))
        : (BkInSide.targetInSide == g &&
            ((cc._canvas.style.cursor = "default"),
            (BkInSide.isInSide = !1),
            (BkInSide.targetInSide = null)),
          null != b && void 0 != b && b(d));
    },
    onMouseDown: function (a) {
      null != d && void 0 != d && d(a);
    },
  }).clone();
};
cc.Node.prototype.createTouchEvent = function (a, b, d) {
  return cc.EventListener.create({
    event: cc.EventListener.TOUCH_ONE_BY_ONE,
    swallowTouches: !0,
    onTouchBegan: function (b, d) {
      var g = d.getCurrentTarget(),
        h = g.convertToNodeSpace(b.getLocation()),
        g = g.getContentSize(),
        g = cc.rect(0, 0, g.width, g.height);
      return cc.rectContainsPoint(g, h)
        ? null != a && void 0 != a && ((h = a(b, d)), void 0 != h)
          ? (logMessage("rtn callback !\x3d undefined"), h)
          : !0
        : !1;
    },
    onTouchMoved: function (a, d) {
      null != b && void 0 != b && b(a, d);
    },
    onTouchEnded: function (a, b) {
      null != d && void 0 != d && d(a, b);
    },
  }).clone();
};
BkInSide = { isInSide: !1, targetInSide: null };
BkSprite = cc.Sprite.extend({
  OnMouseMoveListener: null,
  OnClickListener: null,
  lastTimeClick: 0,
  ctor: function (a, b) {
    this._super(a, b);
    this.OnClickListener = this.OnMouseMoveListener = null;
    this.retain();
  },
  getWidth: function () {
    return this.width * this.getScaleX();
  },
  getHeight: function () {
    return this.height * this.getScaleY();
  },
  setOnlickListenner: function (a) {
    this.removeClickEvent();
    this.OnClickListener = this.createTouchEvent(a);
    cc.eventManager.addListener(this.OnClickListener, this);
  },
  setMouseOnHover: function (a, b) {
    this.removeMoveEvent();
    this.OnMouseMoveListener = this.createHoverEvent(a, b);
    cc.eventManager.addListener(this.OnMouseMoveListener, this);
  },
  setPositionCenter: function () {
    this.x = this.getContentSize().width / 2;
    this.y = this.getContentSize().height / 2;
  },
  removeClickEvent: function () {
    null != this.OnClickListener &&
      cc.eventManager.removeListener(this.OnClickListener);
  },
  removeMoveEvent: function () {
    null != this.OnMouseMoveListener &&
      cc.eventManager.removeListener(this.OnMouseMoveListener);
  },
  removeSelf: function () {
    null != this.OnMouseMoveListener &&
      cc.eventManager.removeListener(this.OnMouseMoveListener);
    null != this.OnClickListener &&
      cc.eventManager.removeListener(this.OnClickListener);
    isWebPlatform() && (cc._canvas.style.cursor = "default");
    this.removeFromParent();
  },
  removeFromParent: function (a) {
    this._super(a);
    this.release();
  },
  setScaleWithHeight: function (a) {
    isWebPlatform() || this.setScale(a / this.getContentSize().height);
  },
  setScaleWithWidth: function (a) {
    isWebPlatform() || this.setScale(a / this.getContentSize().width);
  },
  setScaleM: function (a, b) {
    void 0 === b && (b = a);
    isWebPlatform() || this.setScale(a, b);
  },
  updateSpriteFrame: function (a) {
    a = cc.spriteFrameCache.getSpriteFrame(a);
    this.setSpriteFrame(a);
  },
});
HOT_ITEM_PADDING_X = 5;
BKHotTableItem = ccui.Widget.extend({
  _tableInfo: null,
  lbFirstPlayerName: null,
  lbLastPlayerName: null,
  avatarFirstPlayer: null,
  avatarLastPlayer: null,
  lbFirstPlayerElo: null,
  lbLastPlayerElo: null,
  vsIcon: null,
  viewerIcon: null,
  lbNumberViewer: null,
  ctor: function (a, b) {
    this._super();
    this._tableInfo = a;
    this.itempBg = createBkButtonPlist(
      res_name.banhot_miniFrame,
      res_name.banhot_miniFrame,
      res_name.banhot_miniFrame,
      res_name.banhot_miniFrame
    );
    var d = 6.5;
    isWebPlatform() && (d = 6);
    this.setContentSize(
      cc.size(
        1.1 * this.itempBg.getContentSize().width,
        b.getWindowSize().height / d
      )
    );
    this.setScale(GAME_SCALE);
    this.setPosition(
      0.5 * this.getContentSize().width,
      0.5 * this.getContentSize().height
    );
    this.itempBg.setPosition(
      0.5 * this.getContentSize().width,
      0.5 * this.getContentSize().height
    );
    this.addChild(this.itempBg);
    logMessage(
      "BKHotTableItem " +
        this.getContentSize().width +
        " " +
        this.getContentSize().height
    );
    this.init();
    this.drawTable();
  },
  addClickItemEvent: function (a) {
    this.itempBg &&
      this.itempBg.addClickEventListener(function () {
        a && a();
      });
  },
  init: function () {
    this.vsIcon = new BkSprite("#" + res_name.banhot_icon_CT);
    this.vsIcon.x = this.getContentSize().width / 2;
    this.vsIcon.y = this.getContentSize().height / 2;
    this.addChild(this.vsIcon);
    this.avatarFirstPlayer = new BkSprite("#" + res_name.default_Avatar);
    this.avatarFirstPlayer.setScale(0.72);
    this.avatarFirstPlayer.x =
      this.vsIcon.x -
      this.avatarFirstPlayer.getContentSize().width / 2 -
      HOT_ITEM_PADDING_X;
    this.avatarFirstPlayer.y = this.getContentSize().height / 2;
    this.addChild(this.avatarFirstPlayer);
    this.avatarLastPlayer = new BkSprite("#" + res_name.default_Avatar);
    this.avatarLastPlayer.setScale(0.72);
    this.avatarLastPlayer.x =
      this.vsIcon.x +
      this.avatarLastPlayer.getContentSize().width / 2 +
      HOT_ITEM_PADDING_X;
    this.avatarLastPlayer.y = this.getContentSize().height / 2;
    this.addChild(this.avatarLastPlayer);
    var a = cc.color(251, 234, 180),
      a = 17;
    isWebPlatform() || (a = 25);
    this.lbFirstPlayerName = new BkLabel("", "Arial", a, !0);
    this.addChild(this.lbFirstPlayerName, 10);
    this.lbLastPlayerName = new BkLabel("", "Arial", a, !0);
    this.addChild(this.lbLastPlayerName, 10);
    this.lbFirstPlayerElo = new BkLabel("", "Arial", a);
    this.lbLastPlayerElo = new BkLabel("", "Arial", a);
    a = ZColor.TEXT_COLOR_NAME_BAN_BE;
    this.lbFirstPlayerName.setTextColor(a);
    this.lbLastPlayerName.setTextColor(a);
    this.lbFirstPlayerElo.setTextColor(a);
    this.lbLastPlayerElo.setTextColor(a);
  },
  drawTable: function () {
    if (null != this._tableInfo) {
      var a = res_name.banhot_icon_CT;
      this._tableInfo.gameId == GID.CO_UP && (a = res_name.banhot_icon_CU);
      null != this.vsIcon && (this.vsIcon.removeSelf(), (this.vsIcon = null));
      this.vsIcon = new BkSprite("#" + a);
      this.vsIcon.x = this.getContentSize().width / 2;
      this.vsIcon.y = this.getContentSize().height / 1.8;
      this.addChild(this.vsIcon);
      var b = 0.72,
        a = 30;
      isWebPlatform() && ((b = 0.52), (a = 18));
      logMessage(
        "create avatarFirstPlayer " +
          this._tableInfo.firstPlayerName +
          " - " +
          this._tableInfo.firstPlayerElo
      );
      null != this.avatarFirstPlayer &&
        (this.avatarFirstPlayer.removeSelf(), (this.avatarFirstPlayer = null));
      this.avatarFirstPlayer = BkAvartarImg.getAvatarByID(
        this._tableInfo.firstavatar,
        this._tableInfo.firstPlayerElo
      );
      this.avatarFirstPlayer.setScale(b);
      this.avatarFirstPlayer.x =
        this.vsIcon.x -
        this.vsIcon.getBoundingBox().width / 2 -
        this.avatarFirstPlayer.getBoundingBox().width / 2 -
        HOT_ITEM_PADDING_X;
      this.avatarFirstPlayer.y = this.getContentSize().height / 2 + 5;
      this.addChild(this.avatarFirstPlayer);
      this.lbFirstPlayerName.setString(
        Util.trimName(this._tableInfo.firstPlayerName, 13)
      );
      this.lbFirstPlayerName.x =
        this.avatarFirstPlayer.x -
        this.avatarFirstPlayer.getBoundingBox().width / 2 -
        this.lbFirstPlayerName.getContentSize().width / 2 -
        HOT_ITEM_PADDING_X;
      this.lbFirstPlayerName.y = this.getContentSize().height / 2;
      null != this.avatarLastPlayer &&
        (this.avatarLastPlayer.removeSelf(), (this.avatarLastPlayer = null));
      this.avatarLastPlayer = BkAvartarImg.getAvatarByID(
        this._tableInfo.lastavatar,
        this._tableInfo.lastPlayerElo
      );
      this.avatarLastPlayer.setScale(b);
      this.avatarLastPlayer.x =
        this.vsIcon.x +
        this.vsIcon.getBoundingBox().width / 2 +
        this.avatarLastPlayer.getBoundingBox().width / 2 +
        HOT_ITEM_PADDING_X;
      this.avatarLastPlayer.y = this.avatarFirstPlayer.y;
      this.addChild(this.avatarLastPlayer);
      this.lbLastPlayerName.setString(
        Util.trimName(this._tableInfo.lastPlayerName, 13)
      );
      this.lbLastPlayerName.x =
        this.avatarLastPlayer.x +
        this.avatarLastPlayer.getBoundingBox().width / 2 +
        this.lbLastPlayerName.getContentSize().width / 2 +
        HOT_ITEM_PADDING_X;
      this.lbLastPlayerName.y = this.getContentSize().height / 2;
      isWebPlatform() ||
        ((this.avatarFirstPlayer.x = 0.2 * this.getContentSize().width),
        (this.lbFirstPlayerName.x = this.avatarFirstPlayer.x),
        (this.avatarFirstPlayer.y =
          this.getContentSize().height / 2 +
          0.35 * this.avatarFirstPlayer.getContentSize().height),
        (this.avatarLastPlayer.y = this.avatarFirstPlayer.y),
        (this.lbFirstPlayerName.y =
          this.avatarFirstPlayer.y -
          this.avatarFirstPlayer.getContentSize().height / 2 -
          1.5 * this.lbFirstPlayerName.getContentSize().height),
        this.lbFirstPlayerElo.setString(this._tableInfo.firstPlayerElo),
        (this.lbFirstPlayerElo.x = this.avatarFirstPlayer.x),
        (this.lbFirstPlayerElo.y =
          0 + this.lbFirstPlayerElo.getContentSize().height / 2),
        (this.avatarLastPlayer.x = 0.8 * this.getContentSize().width),
        (this.lbLastPlayerName.x = this.avatarLastPlayer.x),
        (this.lbLastPlayerName.y = this.lbFirstPlayerName.y),
        this.lbLastPlayerElo.setString(this._tableInfo.lastPlayerElo),
        (this.lbLastPlayerElo.x = this.avatarLastPlayer.x),
        (this.lbLastPlayerElo.y = this.lbFirstPlayerElo.y),
        (this.vsIcon.y = this.getContentSize().height / 2));
      b = 0.01 * this.getContentSize().width;
      null == this.viewerIcon &&
        ((this.viewerIcon = new BkSprite("#" + res_name.nguoixem)),
        (this.viewerIcon.x =
          this.getContentSize().width / 2 -
          this.viewerIcon.getContentSize().width / 2),
        (this.viewerIcon.y =
          this.vsIcon.y -
          this.vsIcon.getContentSize().height / 2 -
          0.3 * this.viewerIcon.getContentSize().height),
        (this.viewerIcon.y = this.lbFirstPlayerName.y),
        isWebPlatform() && (this.viewerIcon.y -= 20),
        this.addChild(this.viewerIcon));
      null == this.lbNumberViewer
        ? ((this.lbNumberViewer = new BkLabel(
            this._tableInfo.remainTime - 2,
            "",
            a,
            !0
          )),
          this.lbNumberViewer.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE),
          (this.lbNumberViewer.x =
            this.viewerIcon.x +
            this.viewerIcon.getContentSize().width / 2 +
            this.lbNumberViewer.getContentSize().width / 2 +
            b),
          (this.lbNumberViewer.y = this.viewerIcon.y),
          this.addChild(this.lbNumberViewer))
        : this.lbNumberViewer.setString(this._tableInfo.remainTime - 2);
    }
  },
});
BkTableView = cc.Layer.extend({
  _mainNode: null,
  _tableData: 0,
  _createCellCB: null,
  _cellClickedCB: null,
  _tableSize: null,
  _cellSize: null,
  _tableView: null,
  ctor: function (a, b, d, e, f, g) {
    this._super();
    this._mainNode = a;
    this._tableData = b;
    this._createCellCB = d;
    this._cellClickedCB = e;
    this._tableSize = f;
    this._cellSize = g;
  },
  init: function () {
    this._tableView = new cc.TableView(this, this._tableSize);
    this._tableView.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL);
    this._tableView.x = (this._tableSize.width - this._cellSize.width) / 2;
    this._tableView.y = 0;
    this._tableView.setDelegate(this);
    this._tableView.setVerticalFillOrder(cc.TABLEVIEW_FILL_TOPDOWN);
    this._tableView.setTouchEnabled(!0);
    this.addChild(this._tableView);
    this.initScroll();
    this._tableView.reloadData();
    this.bake();
    isWebPlatform() &&
      cc.isFunction(cc.inputManager.registerMouseScrollSystemEvent) &&
      cc.inputManager.registerMouseScrollSystemEvent(cc._canvas);
  },
  initScroll: function () {
    isWebPlatform() &&
      (this._tableData.length * this._cellSize.height <
        this._tableSize.height ||
        ("mouse" in cc.sys.capabilities &&
          cc.eventManager.addListener(
            {
              event: cc.EventListener.MOUSE,
              onMouseScroll: function (a) {
                var b = cc.sys.isNative ? 6 * a.getScrollY() : -a.getScrollY(),
                  d = a.getCurrentTarget();
                a = a.getLocation();
                return cc.rectContainsPoint(d.getBoundingBoxToWorld(), a)
                  ? ((b = d.getContentOffset().y + b),
                    (b = Math.min(
                      Math.max(b, d.minContainerOffset().y),
                      d.maxContainerOffset().y
                    )),
                    d.setContentOffset(cc.p(0, b)),
                    !0)
                  : !1;
              },
            },
            this._tableView
          )));
  },
  scrollViewDidScroll: function (a) {},
  scrollViewDidZoom: function (a) {},
  tableCellTouched: function (a, b) {
    logMessage("cell touched at index: " + b.getIdx());
    null != this._cellClickedCB && void 0 != this._cellClickedCB
      ? this._cellClickedCB(this._tableData[b.getIdx()])
      : logMessage("tableCellTouched: onclick callback");
  },
  tableCellSizeForIndex: function (a, b) {
    return this._cellSize;
  },
  createCellUI: function (a) {
    var b;
    null != this._createCellCB &&
      void 0 != this._createCellCB &&
      ((b = this._createCellCB(a, this._mainNode)),
      (b.tag = 123),
      (b.x = b.getBoundingBox().width / 2),
      (b.y = b.getBoundingBox().height / 2));
    return b;
  },
  tableCellAtIndex: function (a, b) {
    var d = a.dequeueCell(),
      e;
    d
      ? ((e = d.getChildByTag(123)),
        e.isUpdateMode()
          ? e.updateCellUI(this._tableData[b])
          : (d.removeChild(e),
            (e = this.createCellUI(this._tableData[b])),
            null != e && d.addChild(e)))
      : ((d = new CustomTableViewCell()),
        (e = this.createCellUI(this._tableData[b])),
        null != e && d.addChild(e));
    d.setMouseOnHover();
    return d;
  },
  numberOfCellsInTableView: function (a) {
    return this._tableData.length;
  },
  getMainNode: function () {
    return this._mainNode;
  },
  onExit: function () {
    isWebPlatform() &&
      cc.isFunction(cc.inputManager.removeMouseScrollSystemEvent) &&
      cc.inputManager.removeMouseScrollSystemEvent(cc._canvas);
    this._super();
  },
});
var CustomTableViewCell = cc.TableViewCell.extend({
  OnMouseMoveListener: null,
  ctor: function () {
    this._super();
    this.setMouseOnHover();
  },
  draw: function (a) {
    this._super(a);
  },
  setMouseOnHover: function () {
    isWebPlatform() &&
      (this.removeMoveEvent(),
      (this.OnMouseMoveListener = this.createHoverEvent()),
      cc.eventManager.addListener(this.OnMouseMoveListener, this));
  },
  removeMoveEvent: function () {
    null != this.OnMouseMoveListener &&
      cc.eventManager.removeListener(this.OnMouseMoveListener);
  },
});
BkTableData = cc.Class.extend({
  tableID: null,
  betMoney: null,
  numberPlayer: null,
  maxNumberPlayer: null,
  hasPassword: null,
  isInGameProgress: null,
  HasGagop: null,
  isBaicMode: null,
  is411: null,
  cuocGa: [],
  ctor: function () {
    this.numberPlayer = this.betMoney = this.tableID = 0;
    this.maxNumberPlayer = 4;
    this.isInGameProgress = this.hasPassword = 0;
    this.isBaicMode = !0;
    this.is411 = !1;
    this.HasGagop = 0;
    this.cuocGa = [];
  },
  toString: function () {
    return (
      "[tableID: " +
      this.tableID +
      " - betMoney: " +
      this.betMoney +
      " - numberPlayer: " +
      this.numberPlayer +
      " - maxNumberPlayer: " +
      this.maxNumberPlayer +
      " - hasPassword: " +
      this.hasPassword +
      " - isInGameProgress: " +
      this.isInGameProgress +
      "- isBaicMode: " +
      this.isBaicMode +
      "- is411: " +
      this.is411 +
      "]"
    );
  },
  clone: function () {
    var a = new BkTableData();
    a.tableID = this.tableID;
    a.betMoney = this.betMoney;
    a.numberPlayer = this.numberPlayer;
    a.maxNumberPlayer = this.maxNumberPlayer;
    a.hasPassword = this.hasPassword;
    a.isInGameProgress = this.isInGameProgress;
    a.isBaicMode = this.isBaicMode;
    a.is411 = this.is411;
    a.cuocGa = this.cuocGa;
    a.HasGagop = this.HasGagop;
    return a;
  },
});
BkRoomData = cc.Class.extend({
  roomID: null,
  percent: null,
  ctor: function () {
    this.percent = this.roomID = 0;
  },
});
BkUserData = cc.Class.extend({
  userName: null,
  displayName: null,
  password: null,
  clientID: null,
  playerMoney: null,
  eloCoTuong: 0,
  eloCoUp: 0,
  lvUser: null,
  isFriend: null,
  followerCount: null,
  avatarID: null,
  fullname: null,
  gender: null,
  email: null,
  birthDate: null,
  homeTown: null,
  status: null,
  gameId: null,
  gameCount: null,
  moneyEarn: null,
  bestHand: null,
  newLvPercent: null,
  rank: null,
  winCountRecord: null,
  firstSpecialCountRecord: null,
  secondSpecialCountRecord: null,
  playerAchievements: null,
  winCount: 0,
  loseCount: null,
  IsOnline: !1,
  numberOfUnreadMails: 0,
  numberOfUnreadEvent: 0,
  dropWordWeekIndex: 0,
  HasAllowKickWand: !1,
  HasX2BetMoney: 0,
  HasX5BetMoney: 0,
  HasX10BetMoney: 0,
  NumberGame: 0,
  maxUPoint: 0,
  stringCuocU: "",
  VipLevel: -1,
  listAvatar: null,
  listVatPham: null,
  listBaoBoi: null,
  topDaiGia: -1,
  topCaoThu: -1,
  topDangLen: -1,
  taskWinGame: -1,
  taskDutyGame: -1,
  taskWaitingTime: -1,
  taskStartTime: -1,
  heartTimeReward: -1,
  ctor: function () {
    this.userName = "";
    this.playerMoney = 0;
    this.avatarID = -1;
  },
  getUserName: function () {
    return this.userName;
  },
  setUserName: function (a) {
    this.userName = a;
  },
  setWinCount: function (a) {
    this.winCountRecord = a;
  },
  setFirstSpecialCountRecord: function (a) {
    this.firstSpecialCountRecord = a;
  },
  setSecondSpecialCountRecord: function (a) {
    this.secondSpecialCountRecord = a;
  },
  getFirstSpecialCountRecord: function () {
    return this.firstSpecialCountRecord;
  },
  getSecondSpecialCountRecord: function () {
    return this.secondSpecialCountRecord;
  },
  getWinCount: function () {
    return this.winCountRecord;
  },
  setLoseCount: function (a) {
    this.loseCount = a;
  },
  getLoseCount: function () {
    return this.loseCount;
  },
  setMoney: function (a) {
    this.playerMoney = a;
  },
  getMoney: function () {
    return this.playerMoney;
  },
  setAvatarId: function (a) {
    this.avatarID = a;
  },
  getAvatarId: function () {
    return this.avatarID;
  },
  setEloCoTuong: function (a) {
    this.eloCoTuong = a;
  },
  getEloCoTuong: function () {
    return this.eloCoTuong;
  },
  setEloCoUp: function (a) {
    this.eloCoUp = a;
  },
  getEloCoUp: function () {
    return this.eloCoUp;
  },
  setLevel: function (a) {
    this.lvUser = a;
  },
  getLevel: function () {
    return this.lvUser;
  },
  setIsFriend: function (a) {
    this.isFriend = a;
  },
  getIsFriend: function () {
    return this.isFriend;
  },
  setFollower: function (a) {
    this.followerCount = a;
  },
  getFollower: function () {
    return this.followerCount;
  },
  setGameId: function (a) {
    this.gameId = a;
  },
  getGameId: function () {
    return this.gameId;
  },
  setOnlineStatus: function (a) {
    this.IsOnline = a;
  },
  isOnline: function () {
    return this.IsOnline;
  },
  setRank: function (a) {
    this.rank = a;
  },
  getRank: function () {
    return this.rank;
  },
  setNumberGame: function (a) {
    this.gameCount = a;
  },
  getNumberGame: function () {
    return this.gameCount;
  },
  setNumberOfUnreadMails: function (a) {
    this.numberOfUnreadMails = a;
  },
  getNumberOfUnreadMails: function () {
    return this.numberOfUnreadMails;
  },
  getnumberOfUnreadEvent: function () {
    return this.numberOfUnreadEvent;
  },
  setnumberOfUnreadEvent: function (a) {
    this.numberOfUnreadEvent = a;
  },
  getDropWordWeekIndex: function () {
    return this.dropWordWeekIndex;
  },
  setDropWordWeekIndex: function (a) {
    this.dropWordWeekIndex = a;
  },
  getHasAllowKickWand: function () {
    return this.HasAllowKickWand;
  },
  setHasAllowKickWand: function (a) {
    this.HasAllowKickWand = a;
  },
  getHasX2BetMoney: function () {
    return this.HasX2BetMoney;
  },
  setHasX2BetMoney: function (a) {
    this.HasX2BetMoney = a;
  },
  getHasX5BetMoney: function () {
    return this.HasX5BetMoney;
  },
  setHasX5BetMoney: function (a) {
    this.HasX5BetMoney = a;
  },
  getHasX10BetMoney: function () {
    return this.HasX10BetMoney;
  },
  setHasX10BetMoney: function (a) {
    this.HasX10BetMoney = a;
  },
  getmaxUPoint: function () {
    return this.maxUPoint;
  },
  setmaxUPoint: function (a) {
    this.maxUPoint = a;
  },
  addFreeAvatar: function () {
    null == this.listAvatar && (this.listAvatar = []);
    for (var a = 2; 5 >= a; a++)
      if (!1 == this.isFreeAvatarExist(a)) {
        var b = new BkItemDetail();
        b.itemID = a;
        this.listAvatar.unshift(b);
      }
  },
  isFreeAvatarExist: function (a) {
    if (null == this.listAvatar) return !1;
    for (var b = 0; b < this.listAvatar.length; b++)
      if (this.listAvatar[b].itemID == a) return !0;
    return !1;
  },
  hasBought: function (a, b) {
    var d = !1,
      e = [];
    switch (b) {
      case AT.TYPE_AVATAR:
        e = this.listAvatar;
        break;
      case AT.TYPE_VATPHAM:
        e = this.listVatPham;
        break;
      case AT.TYPE_BAOBOI:
        e = this.listBaoBoi;
        break;
      default:
        e = [];
    }
    if (null != e && 0 < e.length)
      for (var f = 0, g = e.length; f < g; f++) e[f].itemID == a && (d = !0);
    return d;
  },
  logPlayer: function () {
    logMessage(
      "[ name: " +
        this.getUserName() +
        " - lv: " +
        this.getLevel() +
        " avar: " +
        this.getAvatarId() +
        " rank: " +
        this.getRank() +
        "]"
    );
  },
  setCuocU: function (a) {
    this.stringCuocU = a;
  },
  getCuocU: function () {
    return this.stringCuocU;
  },
  isTopCaoThu: function () {
    return -1 != this.topCaoThu ? !0 : !1;
  },
  isTopDangLen: function () {
    return -1 != this.topDangLen ? !0 : !1;
  },
  isTopDaiGia: function () {
    return -1 != this.topDaiGia ? !0 : !1;
  },
  isTop: function () {
    return this.isTopCaoThu() || this.isTopDaiGia() || this.isTopDangLen()
      ? !0
      : !1;
  },
  getTopType: function () {
    if (-1 == this.topDaiGia && -1 == this.topCaoThu && -1 == this.topDangLen)
      return CIngameAvatar.ROW_NORMAL;
    var a = CIngameAvatar.ROW_NORMAL,
      b = 4;
    this.topDaiGia < b &&
      -1 != this.topDaiGia &&
      ((b = this.topDaiGia), (a = CIngameAvatar.ROW_DAI_GIA));
    this.topCaoThu < b &&
      -1 != this.topCaoThu &&
      ((b = this.topCaoThu), (a = CIngameAvatar.ROW_CAO_THU));
    this.topDangLen < b &&
      -1 != this.topDangLen &&
      (a = CIngameAvatar.ROW_DANG_LEN);
    return a;
  },
  getTopTypeString: function () {
    if (-1 == this.topDaiGia && -1 == this.topCaoThu && -1 == this.topDangLen)
      return "";
    var a = "",
      b = 4;
    this.topDaiGia < b &&
      -1 != this.topDaiGia &&
      ((b = this.topDaiGia), (a = "\u0111\u1ea1i gia"));
    this.topCaoThu < b &&
      -1 != this.topCaoThu &&
      ((b = this.topCaoThu), (a = "cao th\u1ee7"));
    this.topDangLen < b && -1 != this.topDangLen && (a = "\u0111ang l\u00ean");
    return a;
  },
  getMinRank: function () {
    var a = 4;
    this.topDaiGia < a && -1 != this.topDaiGia && (a = this.topDaiGia + 1);
    this.topCaoThu < a && -1 != this.topCaoThu && (a = this.topCaoThu + 1);
    this.topDangLen < a && -1 != this.topDangLen && (a = this.topDangLen + 1);
    return a;
  },
  isMultiTop: function () {
    var a = 0;
    this.isTopCaoThu() && a++;
    this.isTopDaiGia() && a++;
    this.isTopDangLen() && a++;
    return 1 < a ? !0 : !1;
  },
});
BkRadioButtonData = cc.Class.extend({
  id: null,
  value: null,
  description: null,
  ctor: function (a, b, d) {
    this.id = a;
    this.value = b;
    this.description = void 0 != d ? d : "";
  },
});
BkConvertCardXu = cc.Class.extend({
  TheCao: null,
  newXu: null,
  oldXu: null,
  ctor: function (a, b, d) {
    this.TheCao = a;
    this.newXu = d;
    this.oldXu = b;
  },
});
BkBasicUserInfo = cc.Class.extend({
  userName: null,
  avatarID: null,
  playerMoney: null,
  ctor: function (a, b, d) {
    this.userName = a;
    this.playerMoney = b;
    this.avatarID = d;
  },
  getUserName: function () {
    return this.userName;
  },
  setUserName: function (a) {
    this.userName = a;
  },
  setMoney: function (a) {
    this.playerMoney = a;
  },
  getMoney: function () {
    return this.playerMoney;
  },
  setAvatarId: function (a) {
    this.avatarID = a;
  },
  getAvatarId: function () {
    return this.avatarID;
  },
});
BkPlayerAchievement = cc.Class.extend({
  winCount: null,
  loseCount: null,
  hoaCount: 0,
  gameCount: null,
  bestHand: null,
  moneyEarn: null,
  gameId: null,
  level: null,
  newLevelPercent: null,
  rank: null,
  Badges: null,
  ctor: function (a, b, d, e, f) {
    this.gameId = a;
    this.level = b;
    this.winCount = d;
    this.loseCount = e;
    this.rank = f;
  },
});
BkPromotionInfo = cc.Class.extend({
  isShowPromotionEnable: null,
  isFacebookInviteFR: null,
  isPhoneNumberUpdatable: null,
  suggestInviteFriendFBCount: 0,
  suggestNapTienCount: 0,
  suggestRegisterPhoneCount: 0,
  isShowNapTien: null,
  isShowFaceBookInviteFB: null,
  isShowRegisterPhone: null,
  lastAskingTimeRegisterPhone: 0,
  lastAskingTimeInviteFacebook: 0,
  lastAskingTimeInvitePayment: 0,
  receiveInviteState: null,
  isJoinFromInviteFriend: null,
  ctor: function () {
    isJoinFromInviteFriend = receiveInviteState = isShowRegisterPhone = isShowFaceBookInviteFB = isShowNapTien = !1;
    lastAskingTimeInvitePayment = lastAskingTimeInviteFacebook = lastAskingTimeRegisterPhone = 0;
  },
});
BkChatEmoData = cc.Class.extend({
  iconPlist: "",
  iconTexture: "",
  iconName: "",
  nunberImage: 0,
});
BkPlayerInfoData = cc.Class.extend({
  name: "",
  position: 0,
  status: 0,
  money: 0,
  avatar: "",
  level: 0,
  isMyFriend: !1,
  isObserver: !1,
});
BkAnimationCardData = cc.Class.extend({
  xPos: 0,
  yPos: 0,
  durationTime: 0,
  tag: -1,
  fnCallback: null,
  ctor: function (a, b, d, e) {
    this.xPos = b;
    this.yPos = d;
    this.durationTime = a;
    this.tag = e;
  },
});
BkUserClientSettings = cc.Class.extend({
  isPhoneUpdatable: null,
  soundEnable: null,
  isChatEnable: null,
  ctor: function (a, b, d) {
    this.isPhoneUpdatable = a;
    this.soundEnable = b;
    this.isChatEnable = d;
  },
});
BkUserClientSettings.updateSetting = function (a) {
  Util.setClientSetting(
    key.userSettingInfo + cc.username.toLowerCase(),
    JSON.stringify(a)
  );
};
BkUserClientSettings.getListUserLoggedIn = function () {
  var a = Util.getClientSetting(key.ListLoggedInUsers, !1, ""),
    b = [];
  void 0 != a && "" != a && (b = JSON.parse(a));
  return b;
};
BkUserClientSettings.updateListUserLoggedIn = function (a, b) {
  var d = BkUserClientSettings.getListUserLoggedIn(),
    e = BkUserClientSettings.getUserIndex(a.toLowerCase(), d);
  -1 < e && BkUserClientSettings.removeUserLoggedIn(d, e);
  d.unshift(new Date().getTime());
  d.unshift(b);
  d.unshift(a.toLowerCase());
  Util.setClientSetting(key.ListLoggedInUsers, JSON.stringify(d));
};
BkUserClientSettings.updateUserToList = function (a, b, d) {
  d.unshift(new Date().getTime());
  d.unshift(b);
  d.unshift(a.toLowerCase());
};
BkUserClientSettings.removeUserLoggedIn = function (a, b) {
  a.splice(b, 3);
};
BkUserClientSettings.getUserIndex = function (a, b) {
  for (var d = 0; d < b.length; d += 3) if (b[d] === a) return d;
  return -1;
};
BkUserClientSettings.getSetting = function () {
  return Util.getClientSetting(
    key.userSettingInfo + cc.username.toLowerCase(),
    !0
  );
};
BkUserClientSettings.setDektopClientId = function (a, b) {
  logMessage("call setDektopClientId: " + a + " " + b);
  if (-1 == a.indexOf("undefined")) {
    var d = Util.getClientSetting(key.clientId);
    null == d || d == DEFAULT_CLIENT_VALUE || "" == d
      ? (logMessage("cid not found, set dessktop client id"),
        Util.setClientSetting(key.clientId, a),
        setCookie(c.WEB_CLIENT_ID, a, 3650),
        (d = a))
      : logMessage("cid found, do nothing");
    cc.bkClientId = Util.createClientIdSuffix(d);
  } else
    logMessage("Used default web client id"),
      (cc.bkClientId = cc.bkClientId.replace("_Chrome", "_Dt")),
      (cc.bkClientId = Util.createClientIdSuffix(cc.bkClientId));
  logMessage("DESKTOP CLIENT ID: " + cc.bkClientId);
  cc.isString(b) && (bk.userIp = b);
  Util.isAutoCreateAccount() &&
    BkGlobal.isAutoCreateAccount &&
    (logMessage("AUTO REGISTER"),
    BkLogicManager.getLogic().isLogged ||
      ($("#progress-text").text(
        "\u0110ang kh\u1edfi t\u1ea1o d\u1eef li\u1ec7u..."
      ),
      showProgressModalEx(),
      BkConnectionManager.prepareConnection(),
      BkLogicManager.getLogic().setOnLoadComplete(BkLogicManager.getLogic()),
      BkLogicManager.getLogic().doRegisterUser("_1", "", cc.bkClientId),
      Util.showAnim(!0)));
};
BkUserClientSettings.updateListFBInvited = function (a, b) {
  var d = [];
  void 0 != Util.getClientSetting(a, !1, "") &&
    "" != Util.getClientSetting(a, !1, "") &&
    (d = JSON.parse(Util.getClientSetting(a, !1, "")));
  for (var e = 0; e < b.length; e++) d.push(b[e]);
  Util.setClientSetting(a, JSON.stringify(d));
};
BkUserClientSettings.setExpireDate = function (a) {
  var b = [],
    d = new Date().getTime() + 2592e6;
  b.push(d);
  BkUserClientSettings.updateListFBInvited(a, b);
};
BkUserClientSettings.getListFBInvited = function (a) {
  if ("" == Util.getClientSetting(a, !1, ""))
    BkUserClientSettings.setExpireDate(a);
  else {
    var b = Util.getClientSetting(a, !1, "");
    if (void 0 == b) return "";
    b = JSON.parse(b);
    new Date().getTime() >= b[0] &&
      (Util.removeClientSetting(a), BkUserClientSettings.setExpireDate(a));
  }
  return Util.getClientSetting(a, !1, "");
};
BkUserClientSettings.updateUserSettingLogin = function (a) {
  var b = BkUserClientSettings.getSetting();
  0 == b &&
    ((b = new BkUserClientSettings(a, 1, 0)),
    Util.setClientSetting(
      key.userSettingInfo + cc.username.toLowerCase(),
      JSON.stringify(b)
    ));
  BkGlobal.UserSetting = b;
  if (void 0 == BkGlobal.UserSetting || null == BkGlobal.UserSetting)
    BkGlobal.UserSetting = new BkUserClientSettings(a, 1, 0);
};
BkStack = cc.Class.extend({
  stackArr: [],
  ctor: function () {
    this.stackArr = [];
  },
  pushItem: function (a) {
    this.stackArr.push(a);
  },
  getTopIem: function () {
    return 0 == this.stackArr.length
      ? null
      : this.stackArr[this.stackArr.length - 1];
  },
  pop: function () {
    return this.stackArr.pop();
  },
  getLength: function () {
    return this.stackArr.length;
  },
  itemAtIndex: function (a) {
    return a >= this.stackArr.length ? null : this.stackArr[a];
  },
});
function BkConstants() {}
if ("undefined" == typeof ELO_RANK)
  var ELO_RANK = {
    TYPE_TAP_SU: 0,
    TYPE_PHONG_TRAO: 1,
    TYPE_KY_THU: 2,
    TYPE_KY_SI: 3,
    TYPE_KY_VUONG: 4,
    TYPE_STAR_3B: 0,
    TYPE_STAR_1V: 1,
    TYPE_STAR_2V: 2,
    TYPE_STAR_3V: 3,
    DELTA_STAR: 100,
    DELTA_RANK: 400,
    MIN_RANK: 800,
    TAP_SU: 1200,
    PHONG_TRAO: 1600,
    KY_THU: 2e3,
    KY_SI: 2400,
    MAX_RANK: 2800,
    KY_VUONG: 1e5,
  };
if ("undefined" == typeof REASON_ADD_HEART)
  var REASON_ADD_HEART = {
    VIEW_ADS: 0,
    IN_APP_PURCHASE: 1,
    ADMIN_ADD: 2,
    ONTIME_FREE_HEART: 3,
    DAILY_TASK_FINISH: 4,
    FB_INVITE_FRIEND: 5,
    INGAME_PLAYER_UPDATE_MONEY: 6,
    RATE_APP: 7,
  };
if ("undefined" == typeof FB_CS)
  var FB_CS = { STATE_FB_LINK_USER: 0, STATE_FB_INVITE: 1 };
if ("undefined" == typeof TAG_FB)
  var TAG_FB = {
    USERNAME: "USERNAME",
    EVENT: "EVENT",
    ERROR_CODE: "ERROR_CODE",
  };
if ("undefined" == typeof GET_ADS_STATE)
  var GET_ADS_STATE = { INVITE_VIEW_ADS: 0, HEART_REQUEST: 1 };
if ("undefined" == typeof EVENT_NAME)
  var EVENT_NAME = {
    LOGIN: "LOGIN",
    PLAY_GAME: "PLAY_GAME",
    FRIEND_WD: "FRIEND_WD",
    ADD_HEART_WD: "ADD_HEART_WD",
    HOT_TABLE: "HOT_TABLE",
    LINK_FB: "LINK_FB",
    INVITE_FRIEND: "INVITE_FRIEND",
    FINISH_TASK: "FINISH_TASK",
    VIEW_ADS_BANNER: "VIEW_ADS_BANNER",
    VIEW_ADS_VIDEO: "VIEW_ADS_VIDEO",
    VIEW_ADS_FULLSCREEN: "VIEW_ADS_FULLSCREEN",
    PREPARE_GAME: "PREPARE_GAME",
    PLAYER_INFO_WD: "PLAYER_INFO_WD",
    BTN_VIEW_ADS_ADD_HEART_WD: "BTN_VIEW_ADS_ADD_HEART_WD",
    BTN_SETTING: "BTN_SETTING",
    BTN_MESSENGER: "BTN_MESSENGER",
    BTN_SHARE_NATIVE: "BTN_SHARE_NATIVE",
    BTN_EDIT_NAME_PROFILE: "BTN_EDIT_NAME_PROFILE",
    BTN_HEART_INGAME: "BTN_HEART_INGAME",
    BTN_HEART_MAIN_SCREEN: "BTN_HEART_MAIN_SCREEN",
    BTN_CO_TUONG: "BTN_CO_TUONG",
    BTN_CO_UP: "BTN_CO_UP",
    BTN_HOT_TABLE_IMG: "BTN_HOT_TABLE_IMG",
    BTN_HOT_TABLE: "BTN_HOT_TABLE",
    ADMOB_BANNER_LOAD_SUCC: "ADMOB_BANNER_LOAD_SUCC",
    ADMOB_VIDEO_LOAD_SUCC: "ADMOB_VIDEO_LOAD_SUCC",
    ADMOB_INTERSITIAL_LOAD_SUCC: "ADMOB_INTERSITIAL_LOAD_SUCC",
    FB_BANNER_LOAD_SUCC: "FB_BANNER_LOAD_SUCC",
    FB_INTERSITIAL_LOAD_SUCC: "FB_INTERSITIAL_LOAD_SUCC",
    FB_VIDEO_LOAD_SUCC: "FB_VIDEO_LOAD_SUCC",
    MP_BANNER_LOAD_SUCC: "MP_BANNER_LOAD_SUCC",
    MP_VIDEO_LOAD_SUCC: "MP_VIDEO_LOAD_SUCC",
    MP_INTERSITIAL_LOAD_SUCC: "MP_INTERSITIAL_LOAD_SUCC",
    ADMOB_BANNER_LOAD_FAIL: "ADMOB_BANNER_LOAD_FAIL",
    ADMOB_VIDEO_LOAD_FAIL: "ADMOB_VIDEO_LOAD_FAIL",
    ADMOB_INTERSITIAL_LOAD_FAIL: "ADMOB_INTERSITIAL_LOAD_FAIL",
    FB_BANNER_LOAD_FAIL: "FB_BANNER_LOAD_FAIL",
    FB_INTERSITIAL_LOAD_FAIL: "FB_INTERSITIAL_LOAD_FAIL",
    FB_VIDEO_LOAD_FAIL: "FB_VIDEO_LOAD_FAIL",
    MP_BANNER_LOAD_FAIL: "MP_BANNER_LOAD_FAIL",
    MP_VIDEO_LOAD_FAIL: "MP_VIDEO_LOAD_FAIL",
    MP_INTERSITIAL_LOAD_FAIL: "MP_INTERSITIAL_LOAD_FAIL",
    VIEW_VIDEO_NOT_COMPLETE: "VIEW_VIDEO_NOT_COMPLETE",
    CANCEL_INVITE_VIEW_VIDEO: "CANCEL_INVITE_VIEW_VIDEO",
    INVITE_VIEW_VIDEO: "INVITE_VIEW_VIDEO",
    LOAD_SETTING: "LOAD_SETTING",
    IOS_MEMORY_WARNING: "IOS_MEMORY_WARNING",
  };
if ("undefined" == typeof URL_SETTING)
  var URL_SETTING = {
    URL1: "http://config.zigavn.com/WebCo/",
    URL2: "http://cf1.zigavn.com/WebCo/",
    URL3: "http://cf2.zigavn.com/WebCo/",
    URL4: "http://cf3.zigavn.com/WebCo/",
    URL5: "https://raw.githubusercontent.com/zigavn/cf/master/config.txt",
    DEAFAULT_SERVER_IP_ADDRESS: "ws://zigavn.com:18090",
    URL_SETTING_CHAT: "http://config.zigavn.com/config_chat.json",
    URL_SETTING_CHAT_INST: "config_chat.json",
  };
if ("undefined" == typeof ADS_ID)
  var ADS_ID = {
    AND_GG_ADMOB_APP_ADS_ID: "ca-app-pub-1664441389124237~3884808262",
    IOS_GG_ADMOB_APP_ADS_ID: "ca-app-pub-1664441389124237~7417268288",
    AND_GG_ADMOB_BANNER_ADS_ID: "ca-app-pub-7291071617682162/8450842802",
    AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID:
      "ca-app-pub-7291071617682162/4452429642",
    AND_GG_ADMOB_INTERSTITIAL_ADS_ID: "ca-app-pub-7291071617682162/2550569899",
    AND_FB_BANNER_ADS_ID: "2071609686435518_2071614613101692",
    AND_FB_INTERSTITIAL_ADS_ID: "2071609686435518_2071614053101748",
    AND_FB_REWARDED_VIDEO_ADS_ID: "2071609686435518_2133826463547173",
    AND_MP_BANNER_ADS_ID: "5fda1a0be9a54997a7c4183db292ebd7",
    AND_MP_REWARDED_VIDEO_ADS_ID: "8e9c1324d5f34c3b9d5f90f097c1c884",
    AND_MP_INTERSTITIAL_ADS_ID: "354a031c65574df0b715c22bf72c1a7b",
    IOS_GG_ADMOB_BANNER_ADS_ID: "ca-app-pub-7291071617682162/7713024940",
    IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID:
      "ca-app-pub-7291071617682162/7635737008",
    IOS_GG_ADMOB_INTERSTITIAL_ADS_ID: "ca-app-pub-7291071617682162/5340384761",
    IOS_FB_BANNER_ADS_ID: "2071609686435518_2071611443102009",
    IOS_FB_INTERSTITIAL_ADS_ID: "2071609686435518_2071610043102149",
    IOS_FB_REWARDED_VIDEO_ADS_ID: "2071609686435518_2133825410213945",
    IOS_MP_BANNER_ADS_ID: "fa96cc014faa4882bc67ef5a6ffe8702",
    IOS_MP_REWARDED_VIDEO_ADS_ID: "c216d3560f924be18026dd351c88fc51",
    IOS_MP_INTERSTITIAL_ADS_ID: "6215ee5d54d74e1dbcd651593d37f07e",
    AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM:
      "ca-app-pub-7291071617682162/4452429642",
    AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM:
      "ca-app-pub-7291071617682162/2550569899",
    AND_FB_INTERSTITIAL_ADS_ID_HEPCM: "2071609686435518_2071614053101748",
    AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM: "2071609686435518_2133826463547173",
    AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM: "8e9c1324d5f34c3b9d5f90f097c1c884",
    AND_MP_INTERSTITIAL_ADS_ID_HEPCM: "354a031c65574df0b715c22bf72c1a7b",
    IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM:
      "ca-app-pub-7291071617682162/7635737008",
    IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM:
      "ca-app-pub-7291071617682162/5340384761",
    IOS_FB_INTERSTITIAL_ADS_ID_HEPCM: "2071609686435518_2071610043102149",
    IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM: "2071609686435518_2133825410213945",
    IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM: "c216d3560f924be18026dd351c88fc51",
    IOS_MP_INTERSTITIAL_ADS_ID_HEPCM: "6215ee5d54d74e1dbcd651593d37f07e",
  };
if ("undefined" == typeof VC)
  var VC = {
    VIP_INFO: 0,
    VIP_INFO_DETAIL: 1,
    VIP_LEVEL_CHANGE: 2,
    VIP_BORROW_INFO: 3,
    VIP_BORROW_MONEY: 4,
    VIP_TRANSFER_INFO: 5,
    VIP_TRANSFER_MONEY: 6,
    VIP_MONEY_BOX_INFO: 7,
    VIP_SEND_MONEY_TO_BOX: 8,
    VIP_BOX_SETUP_PASSWORD: 9,
    VIP_BOX_UPDATE_PASSWORD: 10,
    VIP_BOX_RECOVER_PASSWORD: 11,
    VIP_BOX_LOGIN: 12,
    VIP_BOX_GET_MONEY: 13,
    VIP_RETURN_BORROWED_MONEY: 14,
    VIP_BORROW_NOTIFY: 15,
    VIP_BENEFIT: 16,
    VIP_BENEFIT_DETAIL: 17,
    VIP_INVITE_FRIEND_MONEY: 18,
  };
if ("undefined" == typeof TagOfLayer)
  var TagOfLayer = {
    background: 0,
    Animation: 1,
    GameLayer: 2,
    CountDownText: 900,
    Popup: 997,
    CountDownTime: 998,
    Toast: 999,
    AMIN: 1e3,
  };
if ("undefined" == typeof c)
  var c = {
    ANY: 0,
    CONNECT: 1,
    CONNECT_FAILED: 2,
    NETWORK_LOG_IN: 3,
    NETWORK_LOG_OUT: 4,
    NETWORK_LOG_IN_SUCCESS: 5,
    NETWORK_LOG_IN_FAILURE: 6,
    NETWORK_TABLE_JOIN: 7,
    NETWORK_TABLE_LEAVE: 8,
    NETWORK_TABLE_JOIN_SUCCESS: 9,
    NETWORK_TABLE_JOIN_FAILURE: 10,
    NETWORK_START: 11,
    NETWORK_STOP: 12,
    NETWORK_SESSION_MESSAGE: 13,
    NETWORK_NETWORK_MESSAGE: 14,
    NETWORK_CHANGE_ATTRIBUTE: 15,
    NETWORK_DISCONNECT: 16,
    NETWORK_EXCEPTION: 17,
    NETWORK_RECONNECT: 18,
    NETWORK_RECONNECT_FAILURE: 19,
    NETWORK_SESSION_TERMINATED: 20,
    NETWORK_TABLE_LEAVE_SUCCESS: 21,
    NETWORK_ROOM_TABLES_UPDATE: 22,
    NETWORK_TABLE_CHAT: 23,
    NETWORK_TABLE_CHAT_RETURN: 24,
    NETWORK_DEAL_CARD: 25,
    NETWORK_DEAL_CARD_RETURN: 26,
    NETWORK_FRIEND_SEARCH_BY_USERNAME: 26,
    NETWORK_TABLE_INFO_RETURN: 27,
    NETWORK_REQUEST_BONUS_FOR_NEWAPP: 27,
    NETWORK_DISCARD: 28,
    NETWORK_MOVE_PIECE: 28,
    NETWORK_MOVE_PIECE_RETURN: 28,
    NETWORK_DISCARD_PUSH: 29,
    NETWORK_INFOR_RETURN: 29,
    NETWORK_PICK_CARD: 30,
    NETWORK_REAL_TYPE_RETURN: 30,
    NETWORK_PICK_CARD_RETURN: 31,
    NETWORK_TAKE_CARD: 32,
    NETWORK_TAKE_CARD_PUSH: 33,
    NETWORK_SHOW_PHOM: 34,
    NETWORK_XET_BAI: 34,
    NETWORK_TLMN_SLASH: 34,
    GET_TOP_RICHEST_CHAN_PLAYER: 34,
    NETWORK_SHOW_PHOM_RETURN: 35,
    NETWORK_XET_BAI_RETURN: 35,
    NETWORK_FINISH_GAME_RETURN: 36,
    NETWORK_SEND_CARD: 37,
    NETWORK_XET_TAT: 37,
    NETWORK_CHANGE_GA_GOP: 37,
    NETWORK_CHANGE_GA_GOP_PUSH: 37,
    NETWORK_SEND_CARD_RETURN: 38,
    NETWORK_AUTO_WIN_RETURN: 38,
    NETWORK_TABLE_LEAVE_PUSH: 39,
    NETWORK_SHOW_U: 40,
    NETWORK_SETUP_CO_TABLE: 40,
    NETWORK_SETUP_RULE_RETURN: 40,
    NETWORK_SHOW_U_PUSH: 41,
    NETWORK_SHOW_U_PUSH_RETURN: 41,
    NETWORK_GET_ALL_REAL_TYPE: 41,
    NETWORK_ROOM_JOIN: 42,
    NETWORK_PLAYER_STATUS: 43,
    NETWORK_PLAYER_STATUS_RETURN: 44,
    NETWORK_ROOM_LEAVE: 45,
    NETWORK_TABLE_SIZE_UPDATE_PUSH: 46,
    NETWORK_SETUP_TABLE: 47,
    NETWORK_TABLE_SETTINGS_UPDATE_PUSH: 48,
    NETWORK_AUTO_SHOW_PHOM_PUSH: 49,
    NETWORK_PICK_CARD_PUSH: 50,
    NETWORK_TABLE_SYN_RETURN: 51,
    NETWORK_RECONNECT_SUCCESS: 52,
    NETWORK_SYNC: 53,
    NETWORK_KICK_PLAYER: 54,
    NETWORK_KICK_PLAYER_PUSH: 55,
    NETWORK_AUTO_FIND_TABLE: 56,
    NETWORK_AUTO_FIND_TABLE_NOT_FOUND_RETURN: 57,
    NETWORK_MAKE_NEW_CONNECTION: 58,
    NETWORK_GET_GAME_TABLE_INFO: 59,
    NETWORK_ROOM_LEAVE_SUCCESS: 60,
    NETWORK_ROOM_JOIN_SUCCESS: 62,
    NETWORK_GET_TABLES: 63,
    NETWORK_GET_WAITING_PLAYERS: 64,
    NETWORK_GET_PLAYERS_IN_ROOM: 64,
    NETWORK_WAITING_PLAYERS_RETURN: 65,
    NETWORK_INVITE_PLAYER: 66,
    NETWORK_RECEIVE_INVITATION: 67,
    NETWORK_QUICK_TABLE_JOIN: 68,
    NETWORK_GAME_JOIN: 69,
    NETWORK_GAME_JOIN_SUCCESS: 70,
    NETWORK_GAME_LEAVE: 71,
    NETWORK_GAME_LEAVE_SUCCESS: 72,
    NETWORK_GET_OFFER_RANDOM_TABLE: 73,
    NETWORK_TIME_OUT_LEAVE: 74,
    NETWORK_GET_LOTTE_RESULT: 75,
    NETWORK_LOTTE_RESULT_RETURN: 76,
    NETWORK_TLMN_AUTO_WIN_PUSH: 77,
    NETWORK_MAUBINH_AUTO_WIN_PUSH: 77,
    NETWORK_TLMN_THOI_PUSH: 78,
    NETWORK_BET_LO_TICKET: 79,
    NETWORK_BET_DE_TICKET: 80,
    NETWORK_AUTO_REGISTER_LOGIN: 80,
    NETWORK_BET_BACAY: 81,
    NETWORK_CHIU: 81,
    NETWORK_CHIU_RETURN: 81,
    NETWORK_CHESS_OFFER: 81,
    NETWORK_CHESS_OFFER_RETURN: 81,
    UPDATE_PLAYER_NAME: 82,
    NETWORK_BET_BACAY_RETURN: 82,
    NETWORK_TRA_CUA: 82,
    NETWORK_TRA_CUA_RETURN: 82,
    NETWORK_LINK_PLAYER_ACCOUNT: 82,
    NETWORK_FACE_BOOK_LIKE: 83,
    NETWORK_FACE_BOOK_ALLOW_POST_ON_WALL: 84,
    NETWORK_PLAY_WITH_FRIEND_REQUEST: 83,
    NETWORK_PLAY_WITH_FRIEND_INFORM: 84,
    NETWORK_DISCARD_SUCCESS: 85,
    NETWORK_REGISTER_USER: 86,
    NETWORK_REGISTER_FAILURE: 87,
    NETWORK_REGISTER_USER_WINPHONE: 87,
    NETWORK_FRIEND_REQUEST: 88,
    NETWORK_GET_FRIENDS: 89,
    NETWORK_GET_FRIENDS_RETURN: 90,
    NETWORK_FRIEND_REQUEST_ACCEPT: 91,
    NETWORK_FRIEND_REQUEST_REJECT: 92,
    NETWORK_GET_FRIENDS_TO_INVITE: 93,
    NETWORK_GET_FRIENDS_TO_INVITE_RETURN: 94,
    NETWORK_UPDATE_PROFILE: 95,
    NETWORK_UPDATE_PROFILE_SUCCESS: 96,
    NETWORK_START_FRUIT_MACHINE: 97,
    NETWORK_PLAYER_SEARCH_FRIENDS: 98,
    NETWORK_FRUIT_RESULT_RETURN: 98,
    NETWORK_GET_PROFILE: 99,
    NETWORK_PROFILE_RETURN: 100,
    NETWORK_JOIN_FRIEND_TABLE: 101,
    NETWORK_FORGOT_PASSWORD: 102,
    NETWORK_GET_INBOX_MAILS: 103,
    NETWORK_INBOX_MAILS_RETURN: 104,
    NETWORK_GET_OUTBOX_MAILS: 105,
    NETWORK_OUTBOX_MAILS_RETURN: 106,
    NETWORK_SEND_MAIL: 107,
    NETWORK_SEND_MAIL_SUCCESS: 108,
    NETWORK_PLAYER_NOT_EXIST: 109,
    NETWORK_GET_MAIL: 110,
    NETWORK_MAIL_RETURN: 111,
    NETWORK_DELETE_MAIL: 112,
    NETWORK_GET_TOP_PLAYER: 113,
    NETWORK_TOP_U_TO_RETURN: 113,
    NETWORK_GET_TOP_PLAYER_RETURN: 114,
    NETWORK_GET_TOP_RICHEST_PLAYER: 115,
    NETWORK_GET_TOP_RICHEST_PLAYER_RETURN: 116,
    NETWORK_FORFEIT: 117,
    NETWORK_CALL: 118,
    NETWORK_UPDATE_PHONE_NUMBER: 118,
    NETWORK_FORFEIT_RETURN: 119,
    NETWORK_CALL_RETURN: 120,
    NETWORK_ERROR_RETURN: 120,
    NETWORK_RAISE: 121,
    NETWORK_SEND_TOKEN_TO_PHONE: 121,
    NETWORK_VALID_PLAYER_BY_PHONE_CHECK_AND_SEND_TOKEN: 122,
    NETWORK_RAISE_RETURN: 122,
    NETWORK_XUONG_CUOC: 122,
    NETWORK_XUONG_CUOC_RETURN: 122,
    NETWORK_GET_PLAYER_ACHIEVEMENT: 123,
    NETWORK_GET_PLAYER_ACHIEVEMENT_RETURN: 124,
    NETWORK_GET_PLAYER_ITEMS: 125,
    NETWORK_PLAYER_ITEMS_RETURN: 126,
    NETWORK_BUY_ITEM: 127,
    NETWORK_BUY_ITEM_SUCCESS: -1,
    NETWORK_LEAVE_DURING_GAME: -2,
    NETWORK_PLAYER_NEW_LEVEL: -3,
    NETWORK_BUY_ITEM_FAILURE: -4,
    NETWORK_SELECT_AVATAR: -5,
    NETWORK_SELECT_AVATAR_SUCCESS: -6,
    NETWORK_ADD_MONEY_RETURN: -7,
    NETWORK_TRANSFER_MONEY: -8,
    NETWORK_TRANSFER_MONEY_SUCCESS: -9,
    NETWORK_TRANSFER_MONEY_FAILURE: -10,
    NETWORK_PLAYER_HAS_BONUS: -11,
    NETWORK_CHAT: -12,
    NETWORK_CHAT_PUSH: -13,
    NETWORK_JOIN_ROOM_LIST: -14,
    NETWORK_GET_GAME_ROOMS_RETURN: -15,
    NETWORK_UNABLE_TO_KICK: -16,
    NETWORK_PROTECTED_FROM_UNKICKABLE_WAND: -17,
    NETWORK_GET_OVERVIEW_OTHER_PROFILE: -18,
    NETWORK_OVERVIEW_OTHER_PROFILE_RETURN: -19,
    NETWORK_PUSH_TRANSFER_MONEY: -20,
    NETWORK_GET_CHAMPION_LIST: -21,
    NETWORK_GET_CHAMPION_LIST_RETURN: -22,
    NETWORK_REMOVE_FRIEND: -23,
    NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE: -24,
    NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE_RETURN: -25,
    NETWORK_LUCKY_BOX_REQUEST: -26,
    NETWORK_BET_MONEY_OPTIONS: -26,
    NETWORK_LUCKY_BOX_REQUEST_RETURN: -27,
    NETWORK_INVITE_MULTI_PLAYER: -27,
    NETWORK_IS_FACE_BOOK_LIKE_AND_ALLOW_POST_ON_WALL: -28,
    NETWORK_JOIN_FRIEND_TABLE_FAILURE: -29,
    NETWORK_IS_FACE_BOOK_CONNECT_LIKE_AND_ALLOW_POST_ON_WALL_RETURN: -30,
    NETWORK_FACE_BOOK_CONNECT: -31,
    NETWORK_PLAYER_MONEY_CHANGE_PUSH: -33,
    NETWORK_RATE_APP: -34,
    NETWORK_RATE_APP_SUCCESS: -35,
    NETWORK_REMOVE_FRIEND_SUCCESS: -36,
    NETWORK_ACCEPT_FRIEND_SUCCESS: -37,
    NETWORK_BAO_XAM: -38,
    NETWORK_JOIN_CHAN_GAME: -39,
    NETWORK_BAO_XAM_RETURN: -39,
    NETWORK_WRITER_IDLE_TIMEOUT: -40,
    NETWORK_TABLE_LEAVE_FAILURE: -41,
    NETWORK_TABLE_STATUS_CHANGE: -42,
    NETWORK_START_SYNCH: -43,
    NETWORK_JOIN_ROOM_LIST_RETURN: -44,
    NETWORK_GET_MAIN_PROFILE: -45,
    NETWORK_MAIN_PROFILE_RETURN: -46,
    NETWORK_ON_HAS_ALLOW_KICK_WAND: -47,
    NETWORK_SETUP_TABLE_FAILED: -48,
    NETWORK_REQUEST_FRIEND_SUCCESS: -49,
    NETWORK_ASSIGN_AS_TABLE_OWNER: -50,
    NETWORK_BET_MONEY_UPDATE: -51,
    NETWORK_GET_CONTENT_PROVIDER_INFO: -52,
    NETWORK_GET_CONTENT_ADS_INFO: -52,
    NETWORK_CONTENT_PROVIDER_INFO_RETURN: -53,
    CONTENT_ADS_CACHE_SETTING: -53,
    NETWORK_NAP_THE_CAO: -54,
    NETWORK_NAP_THE_CAO_SUCCESS: -55,
    NETWORK_NAP_THE_CAO_FAILED: -56,
    NETWORK_SERVICE_NAP_THE_BUSY: -57,
    NETWORK_TABLE_JOIN_PUSH: -58,
    NETWORK_MAKE_NEW_CONNECTION_SUCCESS: -59,
    NETWORK_MAKE_NEW_CONNECTION_FAILED: -60,
    NETWORK_GET_LATEST_LOTTE_RESULT: -61,
    NETWORK_GET_UPDATE_URL: -63,
    NETWORK_UPDATE_URL_RETURN: -63,
    NETWORK_KDL: -64,
    NETWORK_CONTINUE_GAME: -65,
    NETWORK_CONTINUE_GAME_RETURN: -66,
    NETWORK_PREPARE_NEW_GAME: -67,
    NETWORK_RATE_APP_FAILURE: -68,
    NETWORK_GET_INSTALLED_XENG_BONUS: -69,
    NETWORK_INSTALLED_XENG_BONUS_RETURN: -70,
    NETWORK_INFORM_PLAYERS: -71,
    NETWORK_NAP_THE_CAO_BANNED: -72,
    NETWORK_KILL_SESSIONS: -73,
    NETWORK_UPDATE_PASSWORD: -74,
    NETWORK_UPDATE_PASSWORD_FAILED: -75,
    NETWORK_UPDATE_PASSWORD_SUCCESS: -76,
    NETWORK_GET_INSTALLED_NEW_GAME_BONUS: -77,
    NETWORK_INSTALLED_NEW_GAME_BONUS_RETURN: -78,
    NETWORK_ADMIN_CHANGED_MONEY_RETURN: -79,
    NETWORK_FORGOT_PASSWORD_RETURN: -81,
    NETWORK_WRONG_USERNAME_OR_CLIENT_ID: -82,
    NETWORK_GET_EVENT_HTML: -83,
    NETWORK_EVENT_HTML_RETURN: -84,
    NETWORK_NOTIFY_NEW_EVENT_HTML: -85,
    NETWORK_MARK_AS_READ_EVENT_HTML: -86,
    NETWORK_RECOMMENDATION_FRIEND: -87,
    NETWORK_PING_MESSAGE: -88,
    NETWORK_LOCKED_CLIENT: -89,
    NETWORK_JOIN_RANDOM_TABLE: -90,
    NETWORK_REGISTER_EXCEED_MAX: -91,
    NETWORK_SEND_MESSAGE_TO_CLIENT: -92,
    NETWORK_GET_ITEM_INFO: -93,
    NETWORK_DROP_WORD: -94,
    NETWORK_DROP_WORD_IN_HAND: -95,
    NETWORK_GET_PLAYER_ACHIEVEMENT_NEW: -96,
    NETWORK_LATEST_DROP_WORD: -97,
    NETWORK_VERIFY_TRANSACTION_RECEIPE: -98,
    NETWORK_SETUP_CHAN_TABLE: -99,
    NETWORK_LOG_IN_FACEBOOK: 110,
    NETWORK_SETUP_FACEBOOK_ACCOUNT: -99,
    NETWORK_JOIN_WEB_GAME_ROOM: -100,
    NETWORK_GET_GOLD_BOX_REMAIN_TIME: -100,
    NETWORK_GET_GOLD_BOX_REMAIN_TIME_RETURN: -100,
    NETWORK_GET_GOLD_BOX_REWARD: -101,
    NETWORK_GET_GOLD_BOX_REWARD_RETURN: -101,
    NETWORK_LOG_IN_WINPHONE: -101,
    NETWORK_FACEBOOK_BONUS_ALREADY_RECEIVED: -102,
    NETWORK_FACEBOOK_INVITE_FRIENDS: -103,
    NETWORK_GET_FACEBOOK_INVITE_FRIENDS: -104,
    NETWORK_UPDATE_PRIVATE_KEY: -105,
    NETWORK_GPLUS_ONE: -106,
    NETWORK_GET_GPLUS_ONE: -107,
    NETWORK_UPDATE_OBSERVER_STATUS: -108,
    NETWORK_SERVER_REQUEST: -109,
    NETWORK_BOC_CAI: -109,
    NETWORK_GET_SETTING_REQUEST: -110,
    NETWORK_GET_SETTING_RETURN: -110,
    NETWORK_VERIFY_TRANSACTION_GOOGLEIAP: -111,
    NETWORK_GET_DAILY_TASK_LIST: 40,
    NETWORK_GET_DAILY_TASK_LIST_RETURN: 40,
    NETWORK_REQUEST_DAILY_TASK_BONUS: 41,
    NETWORK_REQUEST_DAILY_TASK_BONUS_RETURN: 41,
    NETWORK_QUAY_NOTIFY: 42,
    UPDATE_PLAYER_MODEL: 75,
    NETWORK_BET_LOTTE_TICKET: 79,
    NETWORK_BET_TICKET: 80,
    NETWORK_BET_FOOTBALL: 24,
    NETWORK_BET_FOOTBALL_RETURN: 24,
    NETWORK_VIP_FUNCTION: -115,
    NETWORK_NOTIFY_ADD_MONEY: -116,
    NETWORK_NOTIFY_PAYMENT_BONUS: -117,
    NETWORK_HEART_REQUEST: -118,
    NETWORK_HEART_CHANGE_RETURN: -118,
    NETWORK_ADS_FULL_SCR_CONTROL: -119,
    NETWORK_ADS_SERVER_PUSH: -120,
    NETWORK_GET_HOT_TABLE: -121,
    NETWORK_HOT_TABLE_RETURN: -121,
    NETWORK_DAILY_TASK_REQUEST: -122,
    NETWORK_DAILY_TASK_RETURN: -122,
    NETWORK_PLAYER_NEWS_FEED: -123,
    NETWORK_JOIN_NEXT_HOT_TABLE: -69,
    WINDOW_WIDTH: 960,
    WINDOW_HEIGHT: 540,
    TAX_RATE: 0.05,
    MIN_BET_MONEY_NHA_TRANH: 200,
    MIN_BET_MONEY_DINH_THU_QUAN: 2e3,
    MIN_BET_MONEY_DAU_TAY_DOI: 500,
    MAX_BET_MONEY_NHA_TRANH: 4e4,
    MAX_BET_MONEY_DINH_THU_QUAN: 4e5,
    MAX_BET_MONEY_DAU_TAY_DOI: 1e5,
    NETWORK_VERSION: 8,
    WEBJS_VERSION: "wss",
    WEB_CLIENT_PREFIX: "cw_",
    FB_INSTANT_SUFFIX: "_inst",
    WEB_CLIENT_ID: "clientIdV2",
    SCALE_BUTTON_BASE: 0.6,
    CPID_DEFAULT: "1",
    CPID_FBAPP: "2",
    CPID_ANDROID: "6",
    CPID_IOS: "8",
    CLIENT_APP_VERSION: "1.0.0",
    TEXT_FONT_SIZE_AVAR: 28,
    AVATAR_WEB_SCALE: 0.6,
    FONT_SIZE_WEB_AVATAR: 15,
  };
if ("undefined" == typeof SETTING)
  var SETTING = {
    EMAIL_SUPPORT: "zigavn.sp@gmail.com",
    URL_MESSENGER_SUPPORT: "https://m.me/cotuongcoup",
    MIN_FRIEND_FB_REWARDED: 2,
    URL_HUONG_DAN: "https://zigavn.com/huong-dan-chung",
    URL_POLICY: "https://zigavn.com/quy-dinh",
    USERINFO_TASK_DUTY_GAME: 5,
    URL_GG_PLAY_STORE:
      "https://play.google.com/store/apps/details?id\x3dziga.cotuong.coup",
    URL_APPLE_STORE: "itms-apps://itunes.apple.com/app/id1415712748",
    NEXT_ADS_REWARDED_TIME: 10,
    URL_DOMAIN_SETTING: "https://zigavn.com/",
    LIST_MESSAGE_INVALID:
      "con cho:con ch\u00f3:\u0111\u1ecbt:dit:me may:m\u1eb9 m\u00e0y:ngu:cut:c\u1ee9t:bo may:b\u1ed1 m\u00e0y:th\u1eb1ng:ch\u00f3:l\u1ed3n:bu\u1ed3i:mat lon",
  };
if ("undefined" == typeof LDNS)
  var LDNS = {
    PLACE_BET_LOTTE: 2,
    GET_MAX_BET_MONEY: 1,
    PAY_BET_FOOTBALL_WIN_MONEY: 1,
    MYBET_INDEX: 0,
    LASTEST_INDEX: 1,
    TOP_INDEX: 2,
    LO: 0,
    XIEN2: 1,
    XIEN3: 2,
    XIEN4: 3,
    LO3CANG: 4,
    DE: 5,
    DEDAU: 6,
    DECUOI: 7,
    DE3CANG: 8,
    THONGKELODE: 100,
    MAX_NUMBER_CAN_BET: 10,
    MIN_BET_MONEY: 500,
    NUMBER_LODE_CODE: 6,
    LODE_ERR_CODE: "\u0110\u1eb7t s\u1ed1 kh\u00f4ng h\u1ee3p l\u1ec7;V\u00e9 c\u01b0\u1ee3c c\u00f3 s\u1ed1 b\u1ecb tr\u00f9ng nhau;\u0110\u1eb7t c\u01b0\u1ee3c sai format;B\u1ea1n kh\u00f4ng \u0111\u1ee7 ti\u1ec1n;\u0110\u00e3 h\u1ebft th\u1eddi gian c\u01b0\u1ee3c. Vui l\u00f2ng quay l\u1ea1i sau!;\u0110\u1eb7t ti\u1ec1n c\u01b0\u1ee3c qu\u00e1 gi\u1edbi h\u1ea1n".split(
      ";"
    ),
    LODE_TEXT: "L\u00f4;Xi\u00ean 2;Xi\u00ean 3;Xi\u00ean 4;L\u00f4 3 c\u00e0ng;\u0110\u1ec1;\u0110\u1ec1 \u0111\u1ea7u;\u0110\u1ec1 cu\u1ed1i;\u0110\u1ec1 3 c\u00e0ng".split(
      ";"
    ),
    TYLE_TEXT: "(1 \u0103n 3.4);(1 \u0103n 10.0);(1 \u0103n 40.0);(1 \u0103n 100.0);(1 \u0103n 30.0);(1 \u0103n 70.0);(1 \u0103n 7.0);(1 \u0103n 7.0);(1 \u0103n 450.0)".split(
      ";"
    ),
  };
if ("undefined" == typeof GS)
  var GS = {
    CHOOSE_GAME: 0,
    CHOOSE_ZONE: 1,
    CHOOSE_TABLE: 2,
    INGAME_GAME: 3,
    WAITTING_JOIN_ROOM_FROM_INGAME: 4,
    PREPARE_GAME: 99,
    CLIENT_LOCK: -1,
    SESSION_TERMINATED: -2,
  };
if ("undefined" == typeof BkColor) {
  var BkColor = {};
  BkColor.DEFAULT_TEXT_COLOR = cc.color(255, 255, 255);
  BkColor.WINDOW_CONTENT_TEXT_COLOR = cc.color(207, 180, 90);
  BkColor.COLOR_HEADER_TEXT = cc.color(156, 134, 67);
  BkColor.COLOR_TEXT_FORMAT_TAB = cc.color(69, 60, 30);
  BkColor.GRID_ITEM_COLOR = cc.color(9, 94, 150);
  BkColor.GRID_ITEM_COLOR_VV = cc.color(9, 94, 150, 100);
  BkColor.COLOR_CONTENT_TEXT = cc.color(207, 180, 90);
  BkColor.GRID_ITEM_HOVER_COLOR = cc.color(24, 111, 168);
  BkColor.GRID_ITEM_HOVER_COLOR_VV = cc.color(128, 128, 128, 122);
  BkColor.GRID_ROW_BORDER_COLOR = cc.color(2, 70, 150);
  BkColor.GRID_ROW_BORDER_COLOR_VV = cc.color(196, 154, 108);
  BkColor.GRID_ITEM_TEXT_COLOR = BkColor.DEFAULT_TEXT_COLOR;
  BkColor.GRID_ITEM_TEXT_COLOR_VV = cc.color(251, 176, 64);
  BkColor.GRID_ITEM_TEXT_HEADER = cc.color(18, 222, 246);
  BkColor.GRID_ITEM_TEXT_HEADER_VV = cc.color(207, 180, 90);
  BkColor.BG_BODY_COLOR = cc.color(23, 51, 111, 255);
  BkColor.BG_BODY_BORDER_COLOR = BkColor.BG_BODY_COLOR;
  BkColor.BG_PANEL_COLOR = cc.color(7, 105, 178, 255);
  BkColor.BG_PANEL_BORDER_COLOR = cc.color(7, 130, 223, 255);
  BkColor.MAIL_ITEM_HEADER_COLOR = cc.color(109, 185, 225);
  BkColor.MAIL_EDITOR_BORDER_COLOR = cc.color(76, 45, 27);
  BkColor.HEADER_CONTENT_COLOR = BkColor.GRID_ITEM_TEXT_HEADER;
  BkColor.TEXT_INPUT_COLOR = cc.color(0, 0, 0);
  BkColor.TEXT_INPUT_PLACEHOLDER_COLOR = cc.color(13, 70, 128);
  BkColor.TEXT_INPUT_PLACEHOLDER_NOBG_COLOR = cc.color(204, 215, 224);
  BkColor.TEXT_INPUT_PLACEHOLDER_LOGIN = cc.color(231, 229, 187);
  BkColor.CONTENT_BORDER_COLOR = cc.color(19, 96, 137);
  BkColor.BG_LB_PANEL = cc.color(81, 167, 225, 40);
  BkColor.BG_LB_PANEL_BORDER = cc.color(1, 127, 154, 255);
  BkColor.BG_LB_PANEL_INNER_BORDER = cc.color(0, 0, 0, 153);
  BkColor.BG_LB_PANEL_HOVER = cc.color(81, 167, 225, 80);
  BkColor.BTN_YELLOW_TEXT_SHADOW = cc.color(3, 2, 0, 150);
  BkColor.TEXT_MONEY_COLOR = cc.color(255, 255, 0);
  BkColor.TEXT_MAUBINH_SUITE = cc.color(0, 255, 132);
  BkColor.TEXT_MAUBINH_SUITE_MAU_BINH = cc.color(255, 162, 0);
  BkColor.VV_WINDOW_TITLE_COLOR = cc.color(252, 237, 99);
  BkColor.VV_REGISTER_PHONE_WD_TEXT_COLOR = cc.color(207, 180, 90);
  BkColor.VV_MONEY_TEXT_COLOR = cc.color(251, 176, 64);
  BkColor.VV_BUTTON_TITLE_COLOR = cc.color(132, 86, 5);
  BkColor.VV_SMS_TEXT_COLOR = cc.color(41, 15, 0);
  BkColor.VV_SMS_TEXT_NOTE_COLOR = cc.color(186, 180, 124);
  BkColor.VV_TY_GIA_COLOR = cc.color(155, 75, 22);
  BkColor.VV_QUAN_GOC_OLD_COLOR = cc.color(117, 117, 117);
  BkColor.VV_QUAN_GOC_NEW_COLOR = cc.color(252, 226, 123);
  BkColor.VV_PAYMENT_SMS_NORMAL_TEXT = cc.color(155, 75, 22);
  BkColor.VV_VIP_TAB_SELECTED_BUTTON_COLOR = cc.color(252, 229, 120);
  BkColor.VV_VIP_TAB_DESELECTED_BUTTON_COLOR = cc.color(160, 100, 40);
}
if ("undefined" == typeof ZColor) {
  var ZColor = {};
  ZColor.DEFAULT_TEXT_COLOR = cc.color(251, 234, 180);
  ZColor.HIGHLIGHT_TEXT_COLOR = cc.color(18, 222, 246);
  ZColor.TEXT_INPUT_COLOR = cc.color(0, 0, 0);
  ZColor.TEXT_INPUT_PLACEHOLDER_COLOR = cc.color(13, 70, 128);
  ZColor.TEXT_COLOR_NAME_AVATAR = cc.color(251, 234, 180);
  ZColor.TEXT_COLOR_LABEL_POPUP = cc.color(71, 44, 27);
  ZColor.TEXT_COLOR_PLACEHOLDER_MOBI = cc.color(211, 211, 211);
  ZColor.TEXT_COLOR_NAME_BAN_BE = cc.color(70, 44, 27);
}
if ("undefined" == typeof GID)
  var GID = {
    PHOM: 0,
    BA_CAY: 1,
    XITO: 2,
    POKER: 3,
    TLMN: 4,
    XAM: 5,
    LIENG: 6,
    XENG: 7,
    LOTTERESULT: 8,
    LOALANG: 9,
    TOPPLAYER: 10,
    SHOP: 11,
    MXH: 12,
    BANGHOI: 13,
    XI_DZACH: 14,
    MAU_BINH: 24,
    BAU_CUA: 16,
    CHAN: 17,
    EVENT: 18,
    CO_TUONG: 19,
    CO_UP: 20,
    TLMN_DEM_LA: 23,
    MAU_BINH_OLD: 15,
    SOCCER: 21,
    LODE: 22,
  };
if ("undefined" == typeof BadgeCategory)
  var BadgeCategory = { Win: 0, FirstSpecial: 1, SecondSpecial: 2 };
if ("undefined" == typeof BkJoinTableError)
  var BkJoinTableError = {
    SUCCESS: 0,
    FAILED_TABLE_FULL: 1,
    FAILED_NOT_ENOUGH_MONEY: 2,
    FAILED_USER_ALREADY_IN_TABLE: 3,
    FAILED_PASSWORD_INCORRECT: 4,
  };
if ("undefined" == typeof FrStatus)
  var FrStatus = { STATUS_FRIEND_WAITING: 2, STATUS_BEGIN_CREATE_TABLE: 4 };
BkConstants.FRIEND_COST = 1;
BkConstants.MIN_BET_MONEY_BINH_DAN = 50;
BkConstants.BONUS_REGISTER_PHONE = 15e3;
BkConstants.FACEBOOK_BONUS_AMOUNT = 1e4;
BkConstants.PROMO_ASKING_INTERVAL = 3e4;
BkConstants.PROMO_MAX_SUGGEST_TIMES = 2;
BkConstants.MAX_OBSERVER_PLAYER = 50;
CHESS_DRAW_REQUEST = 0;
CHESS_DRAW_ACCEPT = 1;
CHESS_DRAW_REFUSE = 2;
CHESS_SURRENDER = 3;
CO_UP_KHONG_LAT = 0;
CO_UP_CO_LAT = 1;
MAX_DISCONNECT_TIME = 5;
TAX_RATE = 0.05;
MIN_MONEY_START_GAME = 5;
MIN_MONEY_SALE = 3e4;
FACEBOOK_BONUS_AMOUNT = 5e3;
PLAYER_STATE_TABLE_OWNER = 0;
PLAYER_STATE_READY = 1;
PLAYER_STATE_NOT_READY = 2;
PLAYER_STATE_FINISH_GAME = 3;
WINDOW_WIDTH = 750;
WINDOW_HEIGHT = 1334;
GAME_SCALE = 1;
GAME_SCALE_WIDTH = cc.sys.isNative ? cc.winSize.width / WINDOW_WIDTH : 1;
GAME_SCALE_HEIGHT = cc.sys.isNative ? cc.winSize.height / WINDOW_HEIGHT : 1;
WINDOW_MARGIN_TOP = 10;
WINDOW_MARGIN_BOTTOM = 20;
WINDOW_MARGIN_LEFT = 15;
WINDOW_MARGIN_RIGHT = 10;
AVATAR_MARGIN_LEFT = 60;
WIN_1_GAME_WITH_A_DAY_BONUS = 0;
WIN_3_DIFFERENT_GAME_IN_DAY_BONUS = 1;
WIN_ALL_GAME_IN_DAY_BONUS = 2;
PLAY_1RST_GAME_IN_DAY_BONUS = 3;
PLAY_10TH_GAME_IN_DAY_BONUS = 4;
PLAY_100TH_GAME_IN_DAY_BONUS = 5;
PLAYER_NEW_LEVEL = 6;
MN_WIN_FIRST_MATCH_IN_DAY_BONUS = 50;
MN_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS = 100;
MN_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS = 300;
MN_PLAY_1RST_GAME_IN_DAY_BONUS = 30;
MN_PLAY_10TH_GAME_IN_DAY_BONUS = 100;
MN_PLAY_100TH_GAME_IN_DAY_BONUS = 1e3;
MN_NEW_LEVEL_BONUS_BASE = 10;
GAME_STATE_READY = 1;
GAME_STATE_FINISH = 100;
GAME_STATE_PLAYING = 2;
GAME_STATE_NOT_READY = 0;
GAME_STATE_WAIT_BAO_XAM = 2;
GAME_STATE_WAIT_OTHER_BAO_XAM = 3;
GAME_STATE_WAIT_XAM_DISCARD = 4;
GAME_STATE_PHOM_WAIT_TAKE_OR_PICK_CARD = 2;
GAME_STATE_PHOM_WAIT_DISCARD = 3;
GAME_STATE_DEAL_COMPLETE = 4;
GAME_STATE_WAIT_SHOW_PHOM = 5;
GAME_STATE_WAIT_OPEN_1_CARD = 2;
STATE_NOTREADY = 0;
STATE_READY = 1;
STATE_WAIT_TAKE_CARD = 3;
STATE_WAIT_PICK_CARD = 2;
STATE_WAIT_DISCARD = 4;
STATE_CHAN_WAIT_CHIU = 5;
STATE_CHAN_WAIT_TRA_CUA = 6;
STATE_WAIT_XUONG = 7;
STATE_WAIT_BOC_CAI = 9;
STATE_FINISH = 100;
PLAYER_LEAVE_GAME = 0;
OWNER_KICK = 1;
RUN_OUT_OF_CASH_KICK = 2;
TIME_OUT_KICK = 3;
UNREADY_TIMEOUT = 4;
LOW_CASH = 5;
TIME_AUTO_READY = 24;
TIME_AUTO_START_GAME = 119;
if ("undefined" == typeof AT)
  var AT = { TYPE_AVATAR: 0, TYPE_VATPHAM: 1, TYPE_BAOBOI: 2 };
DEAL_CARD_FINISH = "DEAL_CARD_FINISH";
CARD_SELECTION_FINISH = "CARD_SELECTION_FINISH";
if ("undefined" == typeof RT)
  var RT = {
    ROOM_TYPE_BINH_DAN: 0,
    ROOM_TYPE_DAI_GIA: 1,
    ROOM_TYPE_VIP: 2,
    ROOM_TYPE_SOLO: 3,
    ROOM_TYPE_RANDOM: 4,
    ROOM_TYPE_NHA_TRANH: 0,
    ROOM_TYPE_DINH_THU_QUAN: 1,
    ROOM_TYPE_DAU_TAY_DOI: 3,
    ROOM_TYPE_QUICK: 0,
    ROOM_TYPE_SLOW: 1,
  };
if ("undefined" == typeof RATE_APP)
  var RATE_APP = {
    REQUEST: 0,
    SUCCESS: 1,
    FAILURE: 2,
    CLIENT_CANCEL: 3,
    APP_PUSH: 4,
  };
if ("undefined" == typeof CONECTION_STATE)
  var CONECTION_STATE = {
    CONNECTION_NORMAL: 0,
    RECONNECTING: 1,
    LOST_CONNECTION: 2,
    MAKING_NEW_CONNECTION: 3,
    RELOGIN: 4,
    CLOSED_CONNECTION: 5,
    LOGIN_START_GAME: 6,
    AUTO_LOGIN: 7,
    LOGIN_FACEBOOK: 8,
    LOGIN_FB_INSTANT: 9,
  };
if ("undefined" == typeof AM)
  var AM = {
    TYPE_ADMIN_ADD: 1,
    TYPE_SMS_ADD: 2,
    TYPE_NAP_THE: 3,
    TYPE_PAY_BET_FOOTBALL_WIN_MONEY: 4,
  };
CHAT_SMILE_TEXT = "8-| |-) :^o \x3dP~ :O) :) :-h :x :)) \x3dp~ \x3d)) :D :-a :(( o-) ~X( :-S :-B \x3d; /:) :-c :)] :-t 8-\x3e I-) :-y :-u :-i :-p :-g :-f :-s :-w :-q :-r :-c :-x :-m :-n :-z".split(
  " "
);
if ("undefined" == typeof fb)
  var fb = {
    SUBEVENT_LOGIN: 0,
    SUBEVENT_CHECK_ACCOUNT_SETUP: 0,
    SUBEVENT_LINK_PLAYER: 1,
    SUBEVENT_RENAME: 2,
    SUBEVENT_SYNC_FACEBOOK: 3,
    SUBEVENT_SYNC_FB_FRIENDS: 4,
    SUCCESS: 1,
    ERR_AUTH_FACEBOOK: 2,
    ERR_LINK_FACEBOOK_LINKED: 3,
    ERR_LINK_PLAYER_LINKED: 4,
    ERR_LINK_PLAYER_FACEBOOK: 5,
    ERR_LINK_INCORRECT_USERPASS: 6,
    ERR_RENAME_NULL_OR_EMPTY: 7,
    ERR_RENAME_UNAVAILABLE: 8,
    ERR_RENAME_PROHIBITED: 9,
    ERR_RENAME_EXISTING: 10,
    SUBEVENT_REGISTER_PLAYER: 99,
    SUBEVENT_INPUT_USER: 99,
    SUBEVENT_AUTH_FB: 99,
    CLOSE_WINDOW: 9999999,
  };
if ("undefined" == typeof ads)
  var ads = {
    TYPE_ADS_HIDE_FLAG: 0,
    TYPE_ADS_RES_INSTANT: 1,
    TYPE_ADS_RES_POPUP: 2,
    SUB_EVENT_TYPE_CLIENT_STATUS: 5,
    SUB_EVENT_TYPE_ADS_BANNER: 6,
    SUB_EVENT_TYPE_ADS_FULL_SCREEN: 7,
    SUB_EVENT_TYPE_ADS_VIEWED_REWARD: 8,
    SUB_EVENT_TYPE_ADS_SHOW_SETTING: 9,
    SUB_EVENT_TYPE_SHOW_ADS_FINISH_GAME: 10,
    PARTNER_GOOGGLE: 0,
    PARTNER_FACEBOOK: 1,
    PARTNER_TWITTER: 2,
    ADS_TYPE_BANNER_ADS: 0,
    ADS_TYPE_INTERSTITIAL_ADS: 1,
    ADS_TYPE_REWARDED_VIDEO_ADS: 2,
    STATE_USER_CANCEL: 0,
    STATE_LOAD_ADS_FAIL: 1,
    STATE_USER_VIEW_ADS_NOT_COMPLELTE: 2,
    STATE_USER_VIEW_COMPLELTE: 3,
    TYPE_ERROR_ADS_INVALID: -1988,
  };
if ("undefined" == typeof BT)
  var BT = {
    ZERO_PERCENT: 0,
    THIRTY_PERCENT: 1,
    FIFTY_PERCENT: 2,
    HUNDRERD_PERCENT: 3,
    HUNDRERD_FIFTY_PERCENT: 4,
    TWO_HUNDRERD_PERCENT: 5,
    THREE_HUNDRERD_PERCENT: 6,
    FOUR_HUNDRERD_PERCENT: 7,
    FIVE_HUNDRERD_PERCENT: 8,
    SIX_HUNDRERD_PERCENT: 9,
    SEVENT_HUNDRERD_PERCENT: 10,
    EIGHT_HUNDRERD_PERCENT: 11,
  };
if ("undefined" == typeof REG_FAIL)
  var REG_FAIL = {
    FAILURE_PWD: 3,
    SUGGEST_NAME_ERR: 2,
    SUGGEST_NEW_NAME: 1,
    FAILURE_OTHER: 0,
  };
if ("undefined" == typeof BET_FOOTBALL)
  var BET_FOOTBALL = {
    GET_ALL_GIAI_DAUS_EVENT: 0,
    GET_ALL_TRAN_DAUS_EVENT: 1,
    GET_ALL_KEOS_EVENT: 2,
    GET_ALL_PLAYER_CUOCS_EVENT: 3,
    GET_CUOC_EVENT: 4,
    PLACE_CUOC_EVENT: 5,
    GET_LATEST_CUOCS_EVENT: 6,
    GET_TOP_WINNING_CUOCS_EVENT: 7,
    NOT_SUPPORTED_EVENT: 8,
    ALLOWED_MINUTES_BEFORE_MATCH_START: 10,
    PLACE_BET_SUCCESS: 1,
    PLACE_BET_WRONG: 0,
    OPEN_STATUS: -1,
    DELAY_STATUS: -2,
    PROCESSED_STATUS: 0,
    VISIBLE_STATUS: 1,
    INVISIBLE_STATUS: 0,
    DEFAULT_GIAI_DAU_PRIORITY: 100,
  };
if ("undefined" == typeof SERVER_REQUEST)
  var SERVER_REQUEST = { CANLINKFB: 1, RENAMEABLE: 2, RATEAPP: 3 };
if ("undefined" == typeof PAYMENT_TYPE)
  var PAYMENT_TYPE = {
    ADD_MONEY_TYPE_CARD: 4,
    ADD_MONEY_TYPE_SMS: 0,
    ADD_MONEY_TYPE_IAP: 5,
  };
if ("undefined" == typeof WD_TAG) var WD_TAG = { HOT_NEWS: 1 };
if ("undefined" == typeof FR)
  var FR = {
    STATUS_FRIEND_ERROR: 0,
    STATUS_FRIEND_NOT_ONLINE: 1,
    STATUS_FRIEND_WAITING: 2,
    STATUS_FRIEND_DENY_PLAY: 3,
    STATUS_BEGIN_CREATE_TABLE: 4,
    STATUS_CREATE_TABLE_ERROR: 5,
  };
EVENT_SWITCH_SCREEN = "switchscreen";
KEY_SCREEN_NAME = "screenName";
EVENT_BUTTON_PRESS = "buttonpress";
KEY_BUTTON_NAME = "buttonName";
EVENT_LOGIN = "login";
KEY_CPID = "cpid";
var DEFAULT_CLIENT_VALUE = 0,
  MAX_NUMBER_MONEY = 1e7,
  MIN_NUMBER_MONEY = 1e5;
function Util() {}
Util.getVIPMoneyArrayList = function (a, b) {
  var d = [];
  1e5 >= a &&
    (0 < b
      ? (d.push(b),
        d.push(b + 5e4),
        d.push(b + 2e5),
        d.push(b + 25e4),
        d.push(b + 3e5),
        d.push(b + 45e4))
      : (d.push(1e4),
        d.push(2e4),
        d.push(3e4),
        d.push(5e4),
        d.push(1e5),
        d.push(5e5)));
  1e5 < a && 5e5 >= a
    ? (d.push(1e5),
      d.push(15e4),
      d.push(25e4),
      d.push(3e5),
      d.push(35e4),
      d.push(5e5))
    : 5e5 < a && 1e6 >= a
    ? (d.push(5e4),
      d.push(1e5),
      d.push(2e5),
      d.push(3e5),
      d.push(5e5),
      d.push(1e6))
    : 1e6 < a && 5e6 >= a
    ? (d.push(25e4),
      d.push(5e5),
      d.push(1e6),
      d.push(2e6),
      d.push(3e6),
      d.push(5e6))
    : 5e6 < a && 1e7 >= a
    ? (d.push(5e5),
      d.push(1e6),
      d.push(2e6),
      d.push(3e6),
      d.push(5e6),
      d.push(1e7))
    : 1e7 < a && 5e7 >= a
    ? (d.push(25e4),
      d.push(5e5),
      d.push(1e6),
      d.push(1e7),
      d.push(2e7),
      d.push(5e7))
    : 5e7 < a &&
      (d.push(1e6),
      d.push(5e6),
      d.push(1e7),
      d.push(2e7),
      d.push(5e7),
      d.push(1e8));
  return d;
};
pauseEventOfTarget = function (a, b) {
  a.setTouchEnabled && a.setTouchEnabled(!b);
  b ? cc.eventManager.pauseTarget(a, !0) : cc.eventManager.resumeTarget(a, !0);
  for (var d = a._children, e = 0; e < d.length; e++)
    pauseEventOfTarget(d[e], b);
};
createTooltip = function (a, b, d, e, f) {
  b = "undefined" === typeof b ? 14 : b;
  d = "undefined" === typeof d ? 28 : d;
  e = "undefined" === typeof e ? 30 : e;
  f = new BkSprite();
  a = new BkLabel(a, "Tahoma", b);
  f.width = a.getContentSize().width + e;
  f.height = a.getContentSize().height + 10;
  b = new cc.Scale9Sprite(res_name.tooltip_bg);
  b.x = f.width / 2;
  b.y = f.height / 2;
  b.width = a.getContentSize().width + e;
  b.height = d;
  f.addChild(b);
  a.setTextColor(cc.color(0, 0, 0));
  a.x = f.width / 2;
  a.y = f.height / 2;
  a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
  f.addChild(a);
  return f;
};
createBkButtonPlistNewTitle = function (a, b, d, e, f, g, h) {
  a = new BkButton(a, b, d, e, ccui.Widget.PLIST_TEXTURE);
  null != f && a.setTitleText(f);
  a.x = null != g ? g : 0;
  a.y = null != h ? h : 0;
  return a;
};
createBkButtonPlist = function (a, b, d, e, f, g, h) {
  a = new BkButton(a, b, d, e, ccui.Widget.PLIST_TEXTURE);
  null != f && a.setTitleText(f);
  a.x = null != g ? g : 0;
  a.y = null != h ? h : 0;
  return a;
};
createBkButton = function (a, b, d, e, f, g, h) {
  a = BkButton.create(a, b, d, e);
  null != f && a.setTitleText(f);
  a.x = null != g ? g : 0;
  a.y = null != h ? h : 0;
  return a;
};
Util.getStarRankType = function (a) {
  var b = 0,
    b =
      a < ELO_RANK.TAP_SU
        ? a - ELO_RANK.MIN_RANK
        : a < ELO_RANK.PHONG_TRAO
        ? a - ELO_RANK.TAP_SU
        : a < ELO_RANK.KY_THU
        ? a - ELO_RANK.PHONG_TRAO
        : a < ELO_RANK.KY_SI
        ? a - ELO_RANK.KY_THU
        : a - ELO_RANK.KY_SI;
  0 >= b && (b = 0);
  b >= ELO_RANK.DELTA_RANK && (b = ELO_RANK.DELTA_RANK - 1);
  a = Math.floor(b / ELO_RANK.DELTA_STAR);
  if (0 == a) return ELO_RANK.TYPE_STAR_3B;
  if (1 == a) return ELO_RANK.TYPE_STAR_1V;
  if (2 == a) return ELO_RANK.TYPE_STAR_2V;
  if (3 == a) return ELO_RANK.TYPE_STAR_3V;
};
Util.getEloRankType = function (a) {
  return a < ELO_RANK.TAP_SU
    ? ELO_RANK.TYPE_TAP_SU
    : a < ELO_RANK.PHONG_TRAO
    ? ELO_RANK.TYPE_PHONG_TRAO
    : a < ELO_RANK.KY_THU
    ? ELO_RANK.TYPE_KY_THU
    : a < ELO_RANK.KY_SI
    ? ELO_RANK.TYPE_KY_SI
    : ELO_RANK.TYPE_KY_VUONG;
};
Util.updateRankSprite = function (a, b) {
  null != a && a.updateSprite(b);
};
Util.getResourceNameStarSprite = function (a) {
  a = Util.getStarRankType(a);
  var b = "";
  a == ELO_RANK.TYPE_STAR_3B
    ? (b = res_name.sao3den)
    : a == ELO_RANK.TYPE_STAR_1V
    ? (b = res_name.sao1vang)
    : a == ELO_RANK.TYPE_STAR_2V
    ? (b = res_name.sao2vang)
    : a == ELO_RANK.TYPE_STAR_3V && (b = res_name.sao3vang);
  return b;
};
Util.getResourceNameDeSprite = function (a) {
  a = Util.getEloRankType(a);
  var b = "";
  a == ELO_RANK.TYPE_TAP_SU
    ? (b = res_name.de_1_tapsu)
    : a == ELO_RANK.TYPE_PHONG_TRAO
    ? (b = res_name.de_2_phongtrao)
    : a == ELO_RANK.TYPE_KY_THU
    ? (b = res_name.de_3_kythu)
    : a == ELO_RANK.TYPE_KY_SI
    ? (b = res_name.de_4_kysi)
    : a == ELO_RANK.TYPE_KY_VUONG && (b = res_name.de_5_kyvuong);
  return b;
};
Util.getRankSprite = function (a) {
  return new BkChessRankSprite(a);
};
Util.setBkButtonShadow = function (a) {};
getSpriteFromImage = function (a) {
  return new BkSprite(a);
};
getSpriteFromImageAndRect = function (a, b, d, e, f) {
  return new BkSprite(a, cc.rect(b, d, e, f));
};
createEditBox = function (a, b) {
  return new BkEditBox(a, new cc.Scale9Sprite(b));
};
createTextArea = function (a, b) {
  return new BkTextArea(a, new cc.Scale9Sprite(b));
};
createFixedWidthLabel = function (a, b, d, e) {
  e = "undefined" === typeof e ? res.GAME_FONT : e;
  d = new BkLabel("", e, "undefined" === typeof d ? 14 : d);
  e = "";
  for (var f = 0, g = a.length; d.getContentSize().width < b && f < g; )
    (e += a[f]), d.setString(e), f++;
  f < g && d.setString(e + "...");
  return d;
};
Util.trimStringByWidth = function (a, b, d, e) {
  e = "undefined" === typeof e ? res.GAME_FONT : e;
  d = new BkLabel("", e, "undefined" === typeof d ? 14 : d);
  e = "";
  for (var f = 0, g = a.length; d.getContentSize().width < b && f < g; )
    (e += a[f]), d.setString(e), f++;
  f < g && d.setString(e + "...");
  return d.getString();
};
Util.getFormatString = function (a, b) {
  return a && a.length > b ? a.substr(0, b) + "..." : a;
};
Util.validatePassword = function (a, b) {
  if (void 0 == a && void 0 == b) return "";
  for (var d = "", e = 0, f = b.length; e < f; e++)
    if (
      ((d = b.charAt(e)),
      !(
        ("0" <= d && "9" >= d) ||
        ("A" <= d && "Z" >= d) ||
        ("a" <= d && "z" >= d) ||
        "_" == d
      ))
    )
      return "M\u1eadt kh\u1ea9u ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a c\u00e1c k\u00ed t\u1ef1 a-\x3ez, A-\x3eZ, 0-\x3e9 ho\u1eb7c _";
  d = a.toUpperCase();
  e = b.toUpperCase();
  return d == e
    ? "M\u1eadt kh\u1ea9u kh\u00f4ng \u0111\u01b0\u1ee3c tr\u00f9ng v\u1edbi t\u00ean \u0111\u0103ng nh\u1eadp."
    : isEasyPassword(b)
    ? "M\u1eadt kh\u1ea9u m\u1edbi qu\u00e1 \u0111\u01a1n gi\u1ea3n (v\u00ed d\u1ee5: 123456, abcdef), h\u00e3y ch\u1ecdn m\u1eadt kh\u1ea9u kh\u00e1c"
    : "";
};
formatNumberIngame = function (a) {
  return 7 > String(a).length
    ? formatNumber(a)
    : formatNumber(Math.floor(0.001 * a)) + "K";
};
formatNumber = function (a) {
  var b = "",
    d = String(Math.abs(a));
  if (3 < d.length) {
    for (
      var e = d.length % 3, b = b + d.substr(0, e), f = 0;
      f < d.length - e;
      f += 3
    )
      b = b + "." + d.substr(e + f, 3);
    0 == e && (b = b.substring(1, b.length));
  } else b = d;
  0 > a && (b = "-" + b);
  return b;
};
Util.trimName = function (a, b) {
  if (null != a) return a.length <= b ? a : a.substr(0, b) + "...";
};
doHttpGetRequest = function (a, b) {
  var d = new XMLHttpRequest();
  d.onreadystatechange = function () {
    4 == d.readyState && 200 == d.status && b(d.responseText);
  };
  d.open("GET", a, !0);
  d.send(null);
};
isUserNameValidate = function (a) {
  if (4 > a.length || 30 < a.length) return !1;
  for (var b = "", d = 0; d < a.length; d++)
    if (
      ((b = a.charAt(d)),
      !(
        ("0" <= b && "9" >= b) ||
        ("A" <= b && "Z" >= b) ||
        ("a" <= b && "z" >= b) ||
        "_" == b
      ))
    )
      return !1;
  return !0;
};
isEmailValidate = function (a) {
  return /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(
    a
  );
};
convertStringToMoneyFormat = function (a, b) {
  return void 0 == b || !1 == b
    ? a < MAX_NUMBER_MONEY
      ? Number(a).format(0, 3, ".")
      : Number(Math.floor(a / 1e3)).format(0, 3, ".") + "K"
    : Number(a).format(0, 3, ".");
};
convertStringToMoneyFormatIngame = function (a) {
  return a < MIN_NUMBER_MONEY
    ? formatNumber(a)
    : a >= MIN_NUMBER_MONEY && a < MAX_NUMBER_MONEY
    ? formatNumber(Number(Math.floor(a / 1e3))) + "K"
    : 1e7 <= a && 1e9 >= a
    ? formatNumber(Number(Math.floor(a / 1e6))) + "M"
    : Number(Math.floor(a / 1e3)).format(0, 3, ".") + "K";
};
convertSecondToMinSec = function (a) {
  var b = "",
    d = Math.floor(a / 60);
  a = Math.floor(a % 60);
  b = 10 > d ? b + ("0" + d + ":") : b + (d + ":");
  return 10 > a ? b + ("0" + a) : b + a;
};
getMaxPlayer = function (a) {
  switch (a) {
    case GID.BA_CAY:
    case GID.XITO:
    case GID.LIENG:
    case GID.XI_DZACH:
    case GID.POKER:
      return 6;
    case GID.CO_TUONG:
    case GID.CO_UP:
      return BkConstants.MAX_OBSERVER_PLAYER;
  }
  return 4;
};
Number.prototype.format = function (a, b, d, e) {
  b = "\\d(?\x3d(\\d{" + (b || 3) + "})+" + (0 < a ? "\\D" : "$") + ")";
  a = this.toFixed(Math.max(0, ~~a));
  return (e ? a.replace(".", e) : a).replace(
    RegExp(b, "g"),
    "$\x26" + (d || ",")
  );
};
var iniFBInstant = iniFBInstant || !1;
isFBInstantGame = function () {
  return null != iniFBInstant && void 0 != iniFBInstant ? iniFBInstant : !1;
};
isWebPlatform = function () {
  return isFBInstantGame() ? !1 : !cc.sys.isNative;
};
logMessage = function (a) {
  null == cc.lastLog && (cc.lastLog = []);
  200 < cc.lastLog.length && cc.lastLog.shift();
  cc.lastLog.push(a);
  cc.log(a);
};
processNextEventAfterSceneTransitionDidFinish = function () {
  logMessage("chuyen scene finish -\x3e process packet nhan khi chuyen scene");
  BkGlobal.isSwitchSceneAnimation = !1;
  BkConnectionManager.onSceneTransitionDidFinish();
};
switchToSceneWithGameState = function (a, b, d) {
  null != BkDialogWindowManager.confirmPopup &&
    (logMessage("chuyen scene khi dang show popup -\x3e remove curent popup"),
    BkDialogWindowManager.confirmPopup.removeSelf());
  BkStackWindow.clearStack();
  BkGlobal.currentGS == GS.WAITTING_JOIN_ROOM_FROM_INGAME &&
    (BkConnectionManager.unScheduleIngame(), (b = !0));
  BkGlobal.isSwitchToCurrentScene = BkGlobal.currentGS == a ? !0 : !1;
  BkGlobal.isSwitchSceneAnimation = !0;
  BkGlobal.currentGS = a;
  logMessage("switchToSceneWithGameState " + BkGlobal.currentGS);
  var e;
  switch (a) {
    case GS.CHOOSE_GAME:
      e = new BkChooseGame();
      break;
    case GS.CHOOSE_TABLE:
      e = new VvLobby();
      break;
    case GS.INGAME_GAME:
      e = new BkIngame();
      break;
    case GS.PREPARE_GAME:
      if (!isWebPlatform() && !isFBInstantGame()) {
        cc.game.restart();
        return;
      }
      e = new BkPrepareGame();
      cc.director.runScene(e);
      return;
    case GS.SESSION_TERMINATED:
      e = new BkTerminateScene();
  }
  a = null;
  a =
    void 0 != b && b
      ? new cc.TransitionProgressOutIn(0.3, e)
      : new cc.TransitionProgressInOut(0.3, e);
  void 0 == d || d ? cc.director.runScene(a) : cc.director.runScene(e);
};
showToastMessage = function (a, b, d, e, f) {
  BkToolTipManager.showToastMessage(a, b, d, e, f);
};
hideToastMessage = function () {
  BkToolTipManager.hideToastMessage();
};
var BkToolTipManager = {
    toolTip: null,
    showToastMessage: function (a, b, d, e, f) {
      null != this.toolTip && this.toolTip.removeSelf();
      this.toolTip = new BkToast(res_name.ChessToast);
      this.toolTip.setContentText(a, f);
      a = 3;
      void 0 != e && null != e && (a = e);
      var g = this;
      this.toolTip.setRemoveCallback(function () {
        g.toolTip = null;
      });
      this.toolTip.setAutoHideAfter(a);
      void 0 == b &&
        ((b = cc.winSize.width / 2), (d = cc.winSize.height / 2 + 90));
      this.toolTip.show(b, d);
    },
    hideToastMessage: function () {
      null != this.toolTip && this.toolTip.removeSelf();
    },
  },
  BkDialogWindowManager = {
    confirmPopup: null,
    showPopupWith: function (a, b, d, e, f, g, h) {
      null != this.confirmPopup && this.confirmPopup.removeSelf();
      this.confirmPopup = new BkConfirmPopup("", g);
      this.confirmPopup.isConfirmPopup = !0;
      this.confirmPopup.setTextMessage(a);
      void 0 != d && null != d && this.confirmPopup.setOkCallback(d);
      void 0 != e && null != e && this.confirmPopup.setCancelCallback(e);
      var k = this;
      this.confirmPopup.setCallbackRemoveWindow(function () {
        k.confirmPopup = null;
        void 0 != f && null != f && f();
      });
      null != h &&
        void 0 != h &&
        (logMessage("co parent"), this.confirmPopup.setParentWindow(h));
      this.confirmPopup.show();
    },
  };
showPopupConfirmWith = function (a, b, d, e, f, g) {
  BkGlobal.isAutoCreateAccount ||
    BkDialogWindowManager.showPopupWith(a, b, d, e, f, TYPE_CONFIRM_BOX, g);
};
showPopupMessageWith = function (a, b, d, e, f) {
  BkGlobal.isAutoCreateAccount ||
    BkDialogWindowManager.showPopupWith(a, b, d, null, e, TYPE_MESSAGE_BOX, f);
};
getBonusByBonusCode = function (a) {
  switch (a) {
    case WIN_1_GAME_WITH_A_DAY_BONUS:
      return MN_WIN_FIRST_MATCH_IN_DAY_BONUS;
    case WIN_3_DIFFERENT_GAME_IN_DAY_BONUS:
      return MN_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS;
    case WIN_ALL_GAME_IN_DAY_BONUS:
      return MN_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS;
    case PLAY_10TH_GAME_IN_DAY_BONUS:
      return MN_PLAY_10TH_GAME_IN_DAY_BONUS;
    case PLAY_100TH_GAME_IN_DAY_BONUS:
      return MN_PLAY_100TH_GAME_IN_DAY_BONUS;
  }
  return MN_PLAY_1RST_GAME_IN_DAY_BONUS;
};
getBonusReasonByBonusCode = function (a) {
  switch (a) {
    case WIN_1_GAME_WITH_A_DAY_BONUS:
      return STR_WIN_FIRST_MATCH_IN_DAY_BONUS;
    case WIN_3_DIFFERENT_GAME_IN_DAY_BONUS:
      return STR_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS;
    case WIN_ALL_GAME_IN_DAY_BONUS:
      return STR_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS;
    case PLAY_1RST_GAME_IN_DAY_BONUS:
      return STR_PLAY_1RST_GAME_IN_DAY_BONUS;
    case PLAY_10TH_GAME_IN_DAY_BONUS:
      return STR_PLAY_10TH_GAME_IN_DAY_BONUS;
    case PLAY_100TH_GAME_IN_DAY_BONUS:
      return STR_PLAY_100TH_GAME_IN_DAY_BONUS;
    case PLAYER_NEW_LEVEL:
      return STR_PLAYER_NEW_LEVEL_BONUS;
  }
  return "";
};
getNewLevelBonusMoney = function (a) {
  return MN_NEW_LEVEL_BONUS_BASE * (1 + Math.floor(a / 5));
};
makeFullScreen = function (a) {
  cc.screen.requestFullScreen(
    document.getElementById(bk.isFbApp ? ".f-body" : ".z-body"),
    function () {
      cc.screen.fullScreen()
        ? (cc.view.setDesignResolutionSize(
            cc.winSize.width,
            cc.winSize.height,
            cc.ResolutionPolicy.SHOW_ALL
          ),
          (document.body.style.overflowY = "hidden"))
        : (cc.view.setDesignResolutionSize(
            cc.winSize.width,
            cc.winSize.height,
            new cc.ResolutionPolicy(
              new cc.containerStgFrame(),
              cc.ContentStrategy.SHOW_ALL
            )
          ),
          (document.body.style.overflowY = "auto"));
      document.body.style.backgroundImage = "";
      a();
    }
  );
};
exitFullScreen = function () {
  cc.screen.exitFullScreen();
};
makeScreenShot = function () {
  var a = new Date(),
    b = a.getDate(),
    d = a.getMonth() + 1,
    e = a.getFullYear();
  10 > b && (b = "0" + b);
  10 > d && (d = "0" + d);
  var f = 10 > a.getHours() ? "0" + a.getHours() : a.getHours(),
    g = 10 > a.getMinutes() ? "0" + a.getMinutes() : a.getMinutes(),
    a = 10 > a.getSeconds() ? "0" + a.getSeconds() : a.getSeconds();
  Util.makeCanvasToPng(
    cc._canvas,
    "vanco-" + (b + "_" + d + "_" + e + "_" + f + "_" + g + "_" + a) + ".png"
  );
};
Util.getResNameIconNhacNen = function (a) {
  return isWebPlatform()
    ? a
      ? res_name.btn_am_thanh_on
      : res_name.btn_am_thanh_off
    : a
    ? "#" + res_name.music_on_butt
    : "#" + res_name.music_off_butt;
};
Util.getResNameIconSound = function (a) {
  return isWebPlatform()
    ? a
      ? res_name.btn_am_thanh_on
      : res_name.btn_am_thanh_off
    : a
    ? "#" + res_name.sound_on_butt
    : "#" + res_name.sound_off_butt;
};
Util.makeCanvasToPng = function (a, b) {
  if (a.msToBlob) {
    var d = a.msToBlob();
    window.navigator.msSaveBlob(d, b);
  } else {
    var d = a.toDataURL(),
      e = document.createElement("a");
    e.href = d;
    e.download = b;
    document.body.appendChild(e);
    cc.isFunction(e.click) && e.click();
  }
};
convertSecondToMinSec = function (a) {
  var b = "",
    d = Math.floor(a / 60);
  a %= 60;
  b = 10 > d ? b + ("0" + d + ":") : b + (d + ":");
  return 10 > a ? b + ("0" + a) : b + a;
};
getCurrentScene = function () {
  return cc.director.getRunningScene();
};
Util.getCurrentLayer = function () {
  var a = getCurrentScene();
  if (null != a) {
    if (a instanceof BkChooseGame) return a.chooseGameLayer;
    if (a instanceof BkIngame) return a.getGameLayer();
  }
  return null;
};
Util.showAnim = function (a, b) {
  BkBusyIndicatorManager.showBusyIndicator(a, void 0 === b ? null : b);
};
Util.removeAnim = function () {
  BkBusyIndicatorManager.removeBusyIndicator();
};
BkBusyIndicatorManager = {
  busyInd: null,
  isShowAnim: !1,
  showBusyIndicator: function (a, b) {
    this.isShowAnim
      ? logMessage("isShowAnim: " + this.isShowAnim)
      : (this.removeBusyIndicator(),
        (this.isShowAnim = !0),
        (this.busyInd = new BkBusyIndicator()),
        void 0 != a
          ? this.busyInd.setIsHasTimeOut(a)
          : this.busyInd.setIsHasTimeOut(!0),
        this.busyInd.setTimeoutCallback(b),
        this.busyInd.showIndicator());
  },
  removeBusyIndicator: function () {
    this.isShowAnim = !1;
    null != this.busyInd &&
      (this.busyInd.removeIndicator(), (this.busyInd = null));
  },
};
Util.decodePrivateKey = function (a) {
  return (a - 7) / 3;
};
Util.getRandom = function (a) {
  var b = Math.floor(Math.random() * (a + 1));
  b > a && (b = a);
  return b;
};
Util.isPhoneNumberValidate = function (a) {
  return !(isNaN(a) || 10 > a.length || 12 < a.length);
};
Util.isCouponCodeValidate = function (a) {
  return 0 != a.length;
};
Util.isAutoSendPacket = function (a) {
  if (null == a) return !1;
  switch (a.Type) {
    case c.NETWORK_PING_MESSAGE:
      return !0;
    default:
      return !1;
  }
};
Util.isUserActionPacket = function (a) {
  if (null == a) return !1;
  switch (a.Type) {
    case c.NETWORK_LOG_IN:
    case c.NETWORK_LOG_IN_FACEBOOK:
    case c.NETWORK_REGISTER_USER:
    case c.NETWORK_FORGOT_PASSWORD:
    case c.NETWORK_MAKE_NEW_CONNECTION:
    case c.NETWORK_RECONNECT:
    case c.NETWORK_PING_MESSAGE:
    case c.NETWORK_AUTO_REGISTER_LOGIN:
      return !1;
    default:
      return !0;
  }
};
Util.initConnectionPacket = function (a) {
  if (null == a) return !1;
  switch (a.Type) {
    case c.NETWORK_LOG_IN:
    case c.NETWORK_LOG_IN_FACEBOOK:
    case c.NETWORK_REGISTER_USER:
    case c.NETWORK_FORGOT_PASSWORD:
    case c.NETWORK_MAKE_NEW_CONNECTION:
    case c.NETWORK_RECONNECT:
    case c.NETWORK_AUTO_REGISTER_LOGIN:
      return !0;
    default:
      return !1;
  }
};
Util.getGameIdToLeaderBoardId = function (a) {
  switch (a) {
    case GID.PHOM:
    case GID.BA_CAY:
    case GID.XITO:
    case GID.POKER:
    case GID.TLMN:
    case GID.XAM:
    case GID.LIENG:
      return a + 2;
    case GID.XI_DZACH:
      return 9;
    case GID.MAU_BINH:
      return 15;
    case GID.CHAN:
      return 11;
    case GID.CO_TUONG:
      return 12;
    case GID.CO_UP:
      return 13;
    case GID.TLMN_DEM_LA:
      return 14;
    default:
      return a;
  }
};
Util.isQueueEvent = function (a, b) {
  if (b == GID.PHOM)
    switch (a) {
      case c.NETWORK_DISCARD_PUSH:
      case c.NETWORK_PICK_CARD_RETURN:
      case c.NETWORK_PICK_CARD_PUSH:
        return !0;
    }
  return !1;
};
Util.isSynchEvent = function (a) {
  switch (a) {
    case c.NETWORK_TABLE_SETTINGS_UPDATE_PUSH:
    case c.NETWORK_PLAYER_STATUS_RETURN:
    case c.NETWORK_CONTINUE_GAME_RETURN:
    case c.NETWORK_TABLE_LEAVE_PUSH:
    case c.NETWORK_TABLE_JOIN_PUSH:
    case c.NETWORK_FINISH_GAME_RETURN:
    case c.NETWORK_SEND_CARD_RETURN:
    case c.NETWORK_TAKE_CARD_PUSH:
    case c.NETWORK_DISCARD_PUSH:
    case c.NETWORK_PICK_CARD_RETURN:
    case c.NETWORK_PICK_CARD_PUSH:
    case c.NETWORK_DEAL_CARD_RETURN:
    case c.NETWORK_SHOW_PHOM_RETURN:
    case c.NETWORK_SHOW_U_PUSH:
    case c.NETWORK_TLMN_AUTO_WIN_PUSH:
    case c.NETWORK_TLMN_THOI_PUSH:
    case c.NETWORK_LEAVE_DURING_GAME:
    case c.NETWORK_BET_BACAY_RETURN:
    case c.NETWORK_DISCARD_SUCCESS:
    case c.NETWORK_FORFEIT_RETURN:
    case c.NETWORK_CALL_RETURN:
    case c.NETWORK_RAISE_RETURN:
    case c.NETWORK_PLAYER_MONEY_CHANGE_PUSH:
    case c.NETWORK_PLAYER_NEW_LEVEL:
    case c.NETWORK_PLAYER_HAS_BONUS:
    case c.NETWORK_BAO_XAM_RETURN:
    case c.NETWORK_CHIU_RETURN:
    case c.NETWORK_SHOW_U:
    case c.NETWORK_SETUP_CHAN_TABLE:
    case c.NETWORK_UPDATE_OBSERVER_STATUS:
    case c.NETWORK_MOVE_PIECE_RETURN:
    case c.NETWORK_REAL_TYPE_RETURN:
    case c.NETWORK_TRA_CUA_RETURN:
      return !0;
  }
  return !1;
};
Util.pauseEventCurrentScene = function () {
  var a = getCurrentScene();
  cc.isUndefined(a) ||
    null == a ||
    ((a.isPauseEvent = !0), cc.eventManager.pauseTarget(a, !0));
};
Util.resumeEventCurrentScene = function () {
  var a = getCurrentScene();
  cc.isUndefined(a) ||
    null == a ||
    ((a.isPauseEvent = !1), cc.eventManager.resumeTarget(a, !0));
};
Util.reloadWebPage = function () {
  isWebPlatform() && (logMessage("reloadWebPage"), window.location.reload());
};
Util.getGameLabel = function (a) {
  var b = "";
  switch (a) {
    case -1:
      b = "Top \u0111\u1ea1i gia";
      break;
    case -2:
      b = "Top nhi\u1ec7t t\u00ecnh";
      break;
    case GID.CO_TUONG:
      b = "C\u1edd T\u01b0\u1edbng";
      break;
    case GID.CO_UP:
      b = "C\u1edd \u00dap";
      break;
    default:
      b = "C\u1edd";
  }
  return b;
};
Util.getStringErrorJoinTableFail = function (a) {
  var b = "";
  switch (a) {
    case BkJoinTableError.FAILED_TABLE_FULL:
      b = BkConstString.TABLE_FULL_WARN;
      break;
    case BkJoinTableError.FAILED_NOT_ENOUGH_MONEY:
      b = BkConstString.PLAYER_NOT_ENOUGH_MONEY;
      break;
    case BkJoinTableError.FAILED_PASSWORD_INCORRECT:
      b = BkConstString.PASSWORD_IS_NOT_CORRECT;
      break;
    default:
      b = BkConstString.TABLE_JOIN_ROOM_DEFAULT;
  }
  return b;
};
Util.calculateTimeInterval = function (a, b) {
  return b - a;
};
Util.getFriendCost = function () {
  var a = BkConstants.FRIEND_COST;
  cc.game.config.app &&
    cc.game.config.app.inviteFrBonus &&
    a < cc.game.config.app.inviteFrBonus &&
    (a = cc.game.config.app.inviteFrBonus);
  return a;
};
Util.calculateNumOfFriendNeed = function (a) {
  a /= Util.getFriendCost();
  return Math.floor(a) == a && 1 < a ? a : Math.floor(a) + 1;
};
Util.getSmileText = function (a) {
  if (a <= CHAT_SMILE_TEXT.length) return CHAT_SMILE_TEXT[a];
};
Util.isTextChatEmo = function (a) {
  for (var b = -1, d = -1, e = 0; e < CHAT_SMILE_TEXT.length; e++) {
    var f = CHAT_SMILE_TEXT[e];
    -1 != a.indexOf(f) && f.length > d && ((b = e), (d = f.length));
  }
  return b;
};
Util.getChatEmoDataWithIndex = function (a) {
  26 < a && (a = 26);
  var b = new BkChatEmoData();
  b.iconName = "expression" + a;
  switch (a) {
    case 1:
      b.iconName = "expression26";
      b.iconPlist = chat_res.chat_expression26_plist;
      b.iconTexture = chat_res.chat_expression26_img;
      b.nunberImage = 8;
      break;
    case 2:
      b.iconPlist = chat_res.chat_expression2_plist;
      b.iconTexture = chat_res.chat_expression2_img;
      b.nunberImage = 8;
      break;
    case 3:
      b.iconPlist = chat_res.chat_expression3_plist;
      b.iconTexture = chat_res.chat_expression3_img;
      b.nunberImage = 9;
      break;
    case 4:
      b.iconPlist = chat_res.chat_expression4_plist;
      b.iconTexture = chat_res.chat_expression4_img;
      b.nunberImage = 8;
      break;
    case 5:
      b.iconPlist = chat_res.chat_expression5_plist;
      b.iconTexture = chat_res.chat_expression5_img;
      b.nunberImage = 2;
      break;
    case 6:
      b.iconPlist = chat_res.chat_expression6_plist;
      b.iconTexture = chat_res.chat_expression6_img;
      b.nunberImage = 10;
      break;
    case 7:
      b.iconPlist = chat_res.chat_expression7_plist;
      b.iconTexture = chat_res.chat_expression7_img;
      b.nunberImage = 9;
      break;
    case 8:
      b.iconPlist = chat_res.chat_expression8_plist;
      b.iconTexture = chat_res.chat_expression8_img;
      b.nunberImage = 11;
      break;
    case 9:
      b.iconPlist = chat_res.chat_expression9_plist;
      b.iconTexture = chat_res.chat_expression9_img;
      b.nunberImage = 12;
      break;
    case 10:
      b.iconPlist = chat_res.chat_expression10_plist;
      b.iconTexture = chat_res.chat_expression10_img;
      b.nunberImage = 8;
      break;
    case 11:
      b.iconPlist = chat_res.chat_expression11_plist;
      b.iconTexture = chat_res.chat_expression11_img;
      b.nunberImage = 6;
      break;
    case 12:
      b.iconPlist = chat_res.chat_expression12_plist;
      b.iconTexture = chat_res.chat_expression12_img;
      b.nunberImage = 9;
      break;
    case 13:
      b.iconPlist = chat_res.chat_expression13_plist;
      b.iconTexture = chat_res.chat_expression13_img;
      b.nunberImage = 7;
      break;
    case 14:
      b.iconPlist = chat_res.chat_expression14_plist;
      b.iconTexture = chat_res.chat_expression14_img;
      b.nunberImage = 10;
      break;
    case 15:
      b.iconPlist = chat_res.chat_expression15_plist;
      b.iconTexture = chat_res.chat_expression15_img;
      b.nunberImage = 7;
      break;
    case 16:
      b.iconPlist = chat_res.chat_expression16_plist;
      b.iconTexture = chat_res.chat_expression16_img;
      b.nunberImage = 6;
      break;
    case 17:
      b.iconPlist = chat_res.chat_expression17_plist;
      b.iconTexture = chat_res.chat_expression17_img;
      b.nunberImage = 6;
      break;
    case 18:
      b.iconPlist = chat_res.chat_expression18_plist;
      b.iconTexture = chat_res.chat_expression18_img;
      b.nunberImage = 8;
      break;
    case 19:
      b.iconPlist = chat_res.chat_expression19_plist;
      b.iconTexture = chat_res.chat_expression19_img;
      b.nunberImage = 12;
      break;
    case 20:
      b.iconPlist = chat_res.chat_expression20_plist;
      b.iconTexture = chat_res.chat_expression20_img;
      b.nunberImage = 8;
      break;
    case 21:
      b.iconPlist = chat_res.chat_expression21_plist;
      b.iconTexture = chat_res.chat_expression21_img;
      b.nunberImage = 9;
      break;
    case 22:
      b.iconPlist = chat_res.chat_expression22_plist;
      b.iconTexture = chat_res.chat_expression22_img;
      b.nunberImage = 9;
      break;
    case 23:
      b.iconPlist = chat_res.chat_expression23_plist;
      b.iconTexture = chat_res.chat_expression23_img;
      b.nunberImage = 12;
      break;
    case 24:
      b.iconPlist = chat_res.chat_expression24_plist;
      b.iconTexture = chat_res.chat_expression24_img;
      b.nunberImage = 10;
      break;
    case 25:
      b.iconPlist = chat_res.chat_expression25_plist;
      b.iconTexture = chat_res.chat_expression25_img;
      b.nunberImage = 10;
      break;
    case 26:
      b.iconName = "expression1";
      b.iconPlist = chat_res.chat_expression1_plist;
      b.iconTexture = chat_res.chat_expression1_img;
      b.nunberImage = 2;
      break;
    default:
      (b.iconPlist = chat_res.chat_expression1_plist),
        (b.iconTexture = chat_res.chat_expression1_img),
        (b.nunberImage = 2);
  }
  return b;
};
showOnHandCardList = function (a, b, d, e) {
  if (null != a) {
    var f = d.getAvatarByServerPos(a.serverPosition);
    if (null != f) {
      d.getLogic().cancelCardClickEvent();
      var g = new cc.Point(f.x, f.y),
        h = d.getLogic().getPlayerDisplayLocation(a.serverPosition),
        f = YPOS_ONHAND_DOWN;
      if (0 != h || d.getLogic().isDealingCard)
        0 != a.getCardsCount() &&
          void 0 != b &&
          !0 == b &&
          (1 == h &&
            (null == d.imgPlayer1CardCount &&
              ((d.imgPlayer1CardCount = new BkSprite(
                "#" + res_name.verticalBack
              )),
              (d.imgPlayer1CardCount.x = g.x - 72),
              (d.imgPlayer1CardCount.y = g.y),
              d.addChild(d.imgPlayer1CardCount)),
            null == d.lblPlayer1CardCount &&
              ((d.lblPlayer1CardCount = new BkLabel("", "Tahoma", 20)),
              (d.lblPlayer1CardCount.x = g.x - 72),
              (d.lblPlayer1CardCount.y = g.y),
              d.lblPlayer1CardCount.setTextColor(cc.color(255, 255, 255)),
              d.addChild(d.lblPlayer1CardCount)),
            d.lblPlayer1CardCount.setString(a.getCardsCount())),
          2 == h &&
            (null == d.imgPlayer2CardCount &&
              ((d.imgPlayer2CardCount = new BkSprite(
                "#" + res_name.verticalBack
              )),
              (d.imgPlayer2CardCount.x = g.x - 72),
              (d.imgPlayer2CardCount.y = g.y),
              d.addChild(d.imgPlayer2CardCount)),
            null == d.lblPlayer2CardCount &&
              ((d.lblPlayer2CardCount = new BkLabel("", "Tahoma", 20)),
              (d.lblPlayer2CardCount.x = g.x - 72),
              (d.lblPlayer2CardCount.y = g.y),
              d.lblPlayer2CardCount.setTextColor(cc.color(255, 255, 255)),
              d.addChild(d.lblPlayer2CardCount)),
            d.lblPlayer2CardCount.setString(a.getCardsCount())),
          3 == h &&
            (null == d.imgPlayer3CardCount &&
              ((d.imgPlayer3CardCount = new BkSprite(
                "#" + res_name.verticalBack
              )),
              (d.imgPlayer3CardCount.x = g.x + 75),
              (d.imgPlayer3CardCount.y = g.y),
              d.addChild(d.imgPlayer3CardCount)),
            null == d.lblPlayer3CardCount &&
              ((d.lblPlayer3CardCount = new BkLabel("", "Tahoma", 20)),
              (d.lblPlayer3CardCount.x = g.x + 75),
              (d.lblPlayer3CardCount.y = g.y),
              d.lblPlayer3CardCount.setTextColor(cc.color(255, 255, 255)),
              d.addChild(d.lblPlayer3CardCount)),
            d.lblPlayer3CardCount.setString(a.getCardsCount())));
      else
        for (
          a = d.getLogic().getOnHandCard(a),
            b = 450,
            void 0 != e && 0 < e && (b = e),
            b /= a.length,
            72 <= b && (b = 72),
            g = (cc.director.getWinSize().width - b * a.length + 72) / 2,
            h = 0;
          h < a.length;
          h++
        )
          (e = a[h]),
            e.setMoveHandle(null),
            e.stopMoveAction(),
            e.setMoveHandle(d),
            (e.cardStatus = 0),
            e.showMask(!1),
            (e.x = g + h * b),
            (e.y = f),
            e.setLocalZOrder(h);
    }
  }
};
Util.animateDealCard = function (a, b, d, e, f, g, h, k, m) {
  var n = null,
    p = null,
    r = null,
    s = null,
    u = null,
    v = null,
    t = 35,
    w = -1;
  a.isDealingCard = !0;
  var x = 1;
  void 0 != h && (x = h);
  var y = new cc.Point(cc.winSize.width / 2, cc.winSize.height / 2);
  h = 6 == a.maxPlayer;
  var B = !1;
  a instanceof BkPhomIngameLogic && (B = !0);
  for (var A = 0; A <= a.maxPlayer; A++) {
    var z = a.getPlayer(A);
    if (null != z) {
      var C = b.getAvatarByServerPos(A),
        D = a.getPlayerDisplayLocation(A);
      if (0 == D) {
        n = new cc.Point(
          C.x + BkConstantIngame.DEFAULT_CARD_MARGIN_AVAR,
          YPOS_ONHAND_DOWN
        );
        BkGlobal.currentGameID == GID.POKER &&
          (n = new cc.Point(C.x + 90, YPOS_ONHAND_DOWN + 38));
        BkGlobal.currentGameID == GID.XITO && (n = new cc.Point(C.x + 80, C.y));
        BkGlobal.currentGameID == GID.BA_CAY &&
          (n = new cc.Point(C.x + 80, C.y));
        BkGlobal.currentGameID == GID.LIENG &&
          (n = new cc.Point(C.x + 90, C.y));
        var E = z.getOnHandCard();
      }
      if (1 == D) {
        p = new cc.Point(C.x, C.y);
        B && (p = new cc.Point(C.x - 75, C.y));
        h && (p = new cc.Point(C.x, C.y));
        var J = a.getPlayer(A);
      }
      if (2 == D) {
        r = new cc.Point(C.x - 90, C.y);
        B && (r = new cc.Point(C.x - 78, C.y));
        h && (r = new cc.Point(C.x, C.y));
        var G = a.getPlayer(A);
      }
      if (3 == D) {
        s = new cc.Point(C.x, C.y);
        B && (s = new cc.Point(C.x + 75, C.y));
        h && (s = getCardDisplayLocation(1, D, a.maxPlayer, 0));
        var F = a.getPlayer(A);
      }
      if (4 == D) {
        h && (u = getCardDisplayLocation(1, D, a.maxPlayer, 0));
        var L = a.getPlayer(A);
      }
      if (5 == D) {
        h && (v = getCardDisplayLocation(1, D, a.maxPlayer, 0));
        var H = a.getPlayer(A);
      }
    }
  }
  var I = function (a, d, e) {
    var g;
    null != d &&
      ((g = new BkCard(14, 1)),
      b.addChild(g),
      g.setSelectable(!1),
      (g.x = y.x),
      (g.y = y.y),
      (g.visible = !0),
      g.moveAndScale(x / 13, d.x, d.y),
      e.setCardsCount(a + 1),
      void 0 != f && f(e));
  };
  b.schedule(function K() {
    w++;
    var f;
    null != n &&
      (void 0 != k && 0 < k && (t = k),
      void 0 != m && 0 < m && (n.x = m),
      w < E.length &&
        ((f = E[w]),
        b.addChild(f),
        f.setSelectable(!1),
        (f.x = y.x),
        (f.y = y.y),
        f.move(x / 13, n.x + w * t, n.y),
        (f.visible = !0)));
    playDealCardSound();
    I(w, p, J);
    I(w, r, G);
    I(w, s, F);
    I(w, u, L);
    I(w, v, H);
    if (w == d - 1) {
      b.unschedule(K);
      var h = function () {
        a.isDealingCard = !1;
        for (var b = 0; b < E.length; b++) {
          var d = E[b];
          d.setSelectable(!0);
          d.showMask(!1);
        }
        e();
      };
      void 0 == g || g
        ? b.schedule(function R() {
            b.unschedule(R);
            h();
          }, x)
        : h();
      playDealCardSound();
    }
  }, x / 13);
};
function IsNumeric(a) {
  return a - 0 == a && 0 < ("" + a).trim().length;
}
Util.getGameIconById = function (a, b, d) {
  var e = null;
  switch (a) {
    case GID.TLMN:
      e = { rect: cc.rect(0, 0, 62, 66), name: "TLMN" };
      break;
    case GID.TLMN_DEM_LA:
      e = { rect: cc.rect(0, 66, 62, 66), name: "\u0110\u1ebfm L\u00e1" };
      break;
    case GID.XAM:
      e = { rect: cc.rect(0, 132, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.POKER:
      e = { rect: cc.rect(0, 198, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.XITO:
      e = { rect: cc.rect(0, 264, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.CO_UP:
      e = { rect: cc.rect(0, 330, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.PHOM:
      e = { rect: cc.rect(0, 396, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.MAU_BINH:
    case GID.MAU_BINH_OLD:
      e = { rect: cc.rect(0, 462, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.BA_CAY:
      e = { rect: cc.rect(0, 528, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.CHAN:
      e = { rect: cc.rect(0, 594, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.LIENG:
      e = { rect: cc.rect(0, 660, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.XI_DZACH:
      e = { rect: cc.rect(0, 726, 62, 66), name: Util.getGameLabel(a) };
      break;
    case GID.CO_TUONG:
      e = { rect: cc.rect(0, 792, 62, 66), name: Util.getGameLabel(a) };
      break;
    case -1:
      e = {
        gameIcon: res_name.icon_topDaiGia,
        rect: cc.rect(0, 0, 63, 63),
        name: Util.getGameLabel(a),
      };
      break;
    case -2:
      e = {
        gameIcon: res_name.icon_topNhietTinh,
        rect: cc.rect(0, 0, 63, 63),
        name: Util.getGameLabel(a),
      };
      break;
    default:
      return null;
  }
  var f = new BkSprite(),
    g = res.icon_all_gameIMG_top;
  void 0 != e.gameIcon && (g = "#" + e.gameIcon);
  g = new BkSprite(g, e.rect);
  f.addChild(g);
  var h = e.name;
  void 0 != b && "" != b && (h = b + "\n" + e.name);
  b =
    void 0 != d && !0 == d
      ? new BkLabel(h, "", 16, !0)
      : new BkLabel(h, "", 16);
  g.x -= 0.5;
  b.x = g.getContentSize().width / 2 + b.getContentSize().width / 2 + 5;
  b.y = g.y - 5;
  f.addChild(b);
  0 <= a && ((b.x = b.getContentSize().width / 2 + 40), (b.y = 0));
  return f;
};
Util.createBtnNav = function (a, b) {
  var d = new BkSprite("#" + a);
  d.setMouseOnHover(
    function () {
      d.setScale(1.05);
    },
    function () {
      d.setScale(1);
    }
  );
  d.setOnlickListenner(function () {
    b();
  });
  return d;
};
Util.arrayClone = function (a) {
  var b;
  if (Array.isArray(a)) {
    b = a.slice(0);
    for (a = 0; a < b.length; a++) b[a] = Util.arrayClone(b[a]);
    return b;
  }
  if ("object" === typeof a) throw "Cannot clone array containing an object!";
  return a;
};
Util.copy = function (a) {
  var b, d, e;
  b = Array.isArray(a) ? [] : {};
  for (e in a) (d = a[e]), (b[e] = "object" === typeof d ? Util.copy(d) : d);
  return b;
};
Util.createClientIdSuffix = function (a) {
  return a + ";" + c.NETWORK_VERSION;
};
Util.replaceClientIdSuffix = function (a) {
  return a.replace(";1", ";" + c.NETWORK_VERSION);
};
Util.getAddBonusPercent = function (a) {
  var b = [0, 30, 50, 100, 150, 200, 300, 400, 500, 600, 700, 800];
  return a < b.length ? b[a] : BT.ZERO_PERCENT;
};
Util.getBonusType = function (a) {
  for (
    var b = [0, 30, 50, 100, 150, 200, 300, 400, 500, 600, 700, 800], d = 0;
    d < b.length;
    d++
  )
    if (b[d] == a) return d;
  return 0;
};
Util.getBonusPercent = function (a) {
  switch (a) {
    case BT.THIRTY_PERCENT:
      return 30;
    case BT.FIFTY_PERCENT:
      return 50;
    case BT.HUNDRERD_PERCENT:
      return 100;
    case BT.HUNDRERD_FIFTY_PERCENT:
      return 150;
    case BT.TWO_HUNDRERD_PERCENT:
      return 200;
    case BT.THREE_HUNDRERD_PERCENT:
      return 300;
    case BT.FOUR_HUNDRERD_PERCENT:
      return 400;
    case BT.FIVE_HUNDRERD_PERCENT:
      return 500;
    case BT.SIX_HUNDRERD_PERCENT:
      return 600;
    case BT.SEVENT_HUNDRERD_PERCENT:
      return 700;
    case BT.EIGHT_HUNDRERD_PERCENT:
      return 800;
  }
  return 0;
};
Util.postDelay = function (a, b, d) {
  a.scheduleOnce(function f() {
    d();
    a.unschedule(f);
  }, b);
};
Util.getPokerSuiteResource = function (a) {
  switch (a) {
    case THUNGPHASANH:
      return res_name.winner_thungphasanh;
    case TUQUY:
      return res_name.winner_tuquy;
    case CULU:
      return res_name.winner_culu;
    case THUNG:
      return res_name.winner_thung;
    case SANH:
      return res_name.winner_sanh;
    case SAMCO:
      return res_name.winner_samco;
    case THU:
      return res_name.winner_thu;
    case DOI:
      return res_name.winner_doi;
    default:
      return res_name.winner_mauthau;
  }
};
Util.getGameSettingList = function () {
  return [
    {
      res: {
        active: res_name.icon_CoUp_active,
        hover: res_name.icon_CoUp_hover,
        disable: res_name.icon_CoUp_active,
      },
      order: 0,
      isEnable: !0,
      gid: GID.CO_UP,
    },
    {
      res: {
        active: res_name.icon_CoTuong_active,
        hover: res_name.icon_CoTuong_hover,
        disable: res_name.icon_CoTuong_active,
      },
      order: 1,
      isEnable: !0,
      gid: GID.CO_TUONG,
    },
    {
      res: {
        active: res_name.icon_TLMNDL_active,
        hover: res_name.icon_TLMNDL_hover,
        disable: res_name.icon_TLMNDL_active,
      },
      order: 2,
      isEnable: !0,
      gid: GID.TLMN_DEM_LA,
    },
    {
      res: {
        active: res_name.icon_TLMN_active,
        hover: res_name.icon_TLMN_hover,
        disable: res_name.icon_TLMN_active,
      },
      order: 3,
      isEnable: !0,
      gid: GID.TLMN,
    },
    {
      res: {
        active: res_name.icon_Sam_active,
        hover: res_name.icon_Sam_hover,
        disable: res_name.icon_Sam_active,
      },
      order: 4,
      isEnable: !0,
      gid: GID.XAM,
    },
    {
      res: {
        active: res_name.icon_Phom_active,
        hover: res_name.icon_Phom_hover,
        disable: res_name.icon_Phom_active,
      },
      order: 5,
      isEnable: !0,
      gid: GID.PHOM,
    },
    {
      res: {
        active: res_name.icon_Poker_active,
        hover: res_name.icon_Poker_hover,
        disable: res_name.icon_Poker_active,
      },
      order: 6,
      isEnable: !0,
      gid: GID.POKER,
    },
    {
      res: {
        active: res_name.icon_MauBinh_active,
        hover: res_name.icon_MauBinh_hover,
        disable: res_name.icon_MauBinh_active,
      },
      order: 7,
      isEnable: !0,
      gid: GID.MAU_BINH,
    },
    {
      res: {
        active: res_name.icon_Lieng_active,
        hover: res_name.icon_Lieng_hover,
        disable: res_name.icon_Lieng_active,
      },
      order: 8,
      isEnable: !0,
      gid: GID.LIENG,
    },
    {
      res: {
        active: res_name.icon_Chan_active,
        hover: res_name.icon_Chan_hover,
        disable: res_name.icon_Chan_active,
      },
      order: 9,
      isEnable: !0,
      gid: GID.CHAN,
    },
    {
      res: {
        active: res_name.icon_Xizach_active,
        hover: res_name.icon_Xizach_hover,
        disable: res_name.icon_Xizach_active,
      },
      order: 10,
      isEnable: !0,
      gid: GID.XI_DZACH,
    },
    {
      res: {
        active: res_name.icon_3Cay_active,
        hover: res_name.icon_3Cay_hover,
        disable: res_name.icon_3Cay_active,
      },
      order: 11,
      isEnable: !0,
      gid: GID.BA_CAY,
    },
    {
      res: {
        active: res_name.icon_xiTo_active,
        hover: res_name.icon_xiTo_hover,
        disable: res_name.icon_xiTo_active,
      },
      order: 13,
      isEnable: !0,
      gid: GID.XITO,
    },
    {
      res: {
        active: res_name.icon_soccer_active,
        hover: res_name.icon_soccer_hover,
        disable: res_name.icon_soccer_active,
      },
      order: 14,
      isEnable: !0,
      gid: GID.SOCCER,
    },
  ];
};
Util.loadResource = function (a, b) {
  var d = !1;
  cc.loader.load(
    a,
    function (e, f, g) {
      f = ((g / a.length) * 100) | 0;
      f = Math.min(f, 100);
      BkFbInstant.onAssetLoaded(g, a.length);
      e ||
        ((d = !0),
        isFBInstantGame()
          ? (b(),
            showPopupMessageConfirmEx(
              "C\u00f3 l\u1ed7i khi t\u1ea3i game, xin h\u00e3y ki\u1ec3m tra k\u1ebft n\u1ed1i sau \u0111\u00f3 b\u1ea5m OK \u0111\u1ec3 th\u1eed l\u1ea1i",
              function () {
                window.location.reload();
              }
            ))
          : isWebPlatform() &&
            showPopupMessageConfirmEx(
              "C\u00f3 l\u1ed7i khi t\u1ea3i game, xin h\u00e3y ki\u1ec3m tra k\u1ebft n\u1ed1i sau \u0111\u00f3 b\u1ea5m OK \u0111\u1ec3 th\u1eed l\u1ea1i",
              function () {
                Util.reloadWebPage();
              },
              !0
            ));
    },
    function (a) {
      d ||
        (hideProgressModalEx(),
        cc.spriteFrameCache.addSpriteFrames(
          res.main_screen_plist_sps,
          res.main_screen_png_sps
        ),
        cc.spriteFrameCache.addSpriteFrames(
          res.main_screen_big_item_plist_sps,
          res.main_screen_big_item_png_sps
        ),
        b && b());
    }
  );
};
Util.loadAfterLogin = function () {
  BkGlobal.isLoadedAfterRes ||
    cc.loader.load(
      after_resources,
      function (a, b, d) {
        a || Util.removeAnim();
        a = ((d / after_resources.length) * 100) | 0;
        a = Math.min(a, 100);
        logMessage("Util.loadAfterLogin \u0110ang t\u1ea3i..." + a + "%");
      },
      function () {
        cc.spriteFrameCache.addSpriteFrames(
          res.popup_resource_plist_sps,
          res.popup_resource_png_sps
        );
        cc.spriteFrameCache.addSpriteFrames(
          res.chess_common_plist,
          res.chess_common_img
        );
        logMessage("done load after login res");
        BkGlobal.isLoadedAfterRes = !0;
        null != BkGlobal.recallFuntion &&
          (Util.removeAnim(), BkGlobal.recallFuntion());
      }
    );
};
Util.isResLoading = function (a) {
  return isFBInstantGame() && !BkGlobal.isLoadedAfterRes
    ? (Util.showAnim(!1), (BkGlobal.recallFuntion = a), !0)
    : !1;
};
Util.isGameCo = function (a) {
  var b = BkGlobal.currentGameID;
  void 0 != a && (b = a);
  return b == GID.CO_TUONG || b == GID.CO_UP;
};
getMinTableBetMoney = function (a, b) {
  switch (a) {
    case GID.MAU_BINH:
      return 3;
    case GID.TLMN_DEM_LA:
    case GID.XAM:
      if (1e3 > b) break;
      else return 10;
    case GID.TLMN:
    case GID.XI_DZACH:
    case GID.BA_CAY:
    case GID.PHOM:
      break;
    case GID.POKER:
      return 2;
    case GID.LIENG:
    case GID.XITO:
    case GID.CO_TUONG:
    case GID.CO_UP:
      return 1;
  }
  return 5;
};
getGameSettingById = function (a) {
  for (var b = Util.getGameSettingList(), d = 0; d < b.length; d++)
    if (b[d].gid == a) return b[d];
  return null;
};
getOtherGameList = function (a) {
  for (var b = Util.getGameSettingList(), d = 0; d < b.length; d++)
    b[d].gid == a && b.splice(d, 1);
  return b;
};
getOtherGameListFromSublist = function (a, b) {
  if ("" == b) return null;
  var d = b.split(",");
  Util.getGameSettingList();
  for (var e = [], f = 0; f < d.length; f++)
    d[f] != a && e.push(getGameSettingById(d[f]));
  return e;
};
stopTabToPrevious = function (a) {
  return a.shiftKey && 9 == a.keyCode
    ? (a.preventDefault && a.preventDefault(), !1)
    : !0;
};
stopTabToNext = function (a) {
  return a.shiftKey && 9 == a.keyCode
    ? !0
    : 9 === a.keyCode
    ? (a.preventDefault && a.preventDefault(), !1)
    : !0;
};
stopTab = function (a) {
  return (a.shiftKey && 9 == a.keyCode) || 9 === a.keyCode
    ? (a.preventDefault && a.preventDefault(), !1)
    : !0;
};
getYposforToast = function (a) {
  switch (a) {
    case GID.XI_DZACH:
    case GID.BA_CAY:
    case GID.MAU_BINH:
      return 390;
    case GID.PHOM:
      return 420;
    case GID.LIENG:
      return 350;
    case GID.XITO:
      return 370;
    case GID.CO_TUONG:
    case GID.CO_UP:
      return 260;
  }
  return 300;
};
Util.getRegPhoneBonus = function () {
  var a = BkConstants.BONUS_REGISTER_PHONE;
  cc.game.config.app &&
    cc.game.config.app.regPhoneBonus &&
    (a = cc.game.config.app.regPhoneBonus);
  cc.isUndefined(bk.bonusPhone) || "" == bk.bonusPhone || (a = bk.bonusPhone);
  return a;
};
getTableMoneyWarning = function (a) {
  switch (a) {
    case GID.TLMN:
    case GID.TLMN_DEM_LA:
    case GID.XAM:
    case GID.MAU_BINH:
    case GID.PHOM:
      return 0.1;
    case GID.XI_DZACH:
    case GID.BA_CAY:
    case GID.POKER:
    case GID.LIENG:
    case GID.XITO:
      return 0.2;
  }
  return 1;
};
getBackgroundImg = function (a, b) {};
swichBackgroundImg = function (a) {
  try {
    var b = $(BODY_CLASS_CSS);
    if (cc.isFunction(b.bgswitcher))
      switch (a) {
        case GS.CHOOSE_GAME:
          b.bgswitcher("select", 0);
          break;
        case GS.CHOOSE_TABLE:
          Util.isGameCo() && b.bgswitcher("select", 1);
          break;
        case GS.INGAME_GAME:
          Util.isGameCo()
            ? b.bgswitcher("select", 1)
            : b.bgswitcher("select", 2);
          break;
        default:
          b.bgswitcher("select", 0);
      }
  } catch (d) {
    logMessage(d);
  }
};
Util.isNeedToChangeIcon = function () {
  return Util.isGameCo(BkGlobal.currentGameID) ? !0 : !1;
};
Util.logPurchase = function (a, b) {
  var d = {};
  d[FB.AppEvents.ParameterNames.CONTENT_ID] = b;
  FB.AppEvents.logPurchase(a / 1e3, "USD", d);
};
Util.logEvent = function (a, b, d) {
  logMessage("Util.logEvent");
};
Util.isNeedResizeScreen = function () {
  return bk.isMobileOnly || (bk.isFbApp && 1024 >= window.screen.width);
};
Util.resizeDivWebElement = function (a) {
  var b = cc._canvas.width;
  $("#contentNews").css("width", b - a + "px");
  $(".appAdvertise-fb").css("width", b - a + "px");
  $(".content-fb").css("width", b - a + "px");
  $("#Cocos2dGameContainer").addClass("bchan-show");
};
Util.openPushWindow = function () {
  try {
    var a =
      bk.httpHost +
      "fbpush.html?username\x3d" +
      BkGlobal.UserInfo.getUserName();
    window.open(a, "Register push", "width\x3d450,height\x3d378");
  } catch (b) {}
};
Util.isNeedtoShowPushPopup = function () {
  var a = Util.getClientSetting(key.endpoint, !1, null),
    b = Util.getClientSetting(key.popupCount, !1, 1),
    d = !1;
  Util.isShowWebPush() &&
    a == DEFAULT_CLIENT_VALUE &&
    3 >= b &&
    (Util.setClientSetting(key.popupCount, parseInt(b) + 1), (d = !0));
  return d;
};
Util.isShowWebPush = function () {
  return (
    (cc.sys.browserType == cc.sys.BROWSER_TYPE_FIREFOX ||
      cc.sys.browserType == cc.sys.BROWSER_TYPE_CHROME) &&
    1 == bk.showWebPushFlg
  );
};
Util.hasRegisterPush = function () {
  var a = Util.getClientSetting(key.endpoint, !1, null);
  return a == DEFAULT_CLIENT_VALUE || -1 == a ? !1 : !0;
};
Util.isNeedtoShowRegisterPushButton = function () {
  return Util.isShowWebPush() && !Util.hasRegisterPush();
};
Util.getNumOfBottomIcon = function () {
  var a = 5;
  0 != bk.showCreateDesktopIconTutorial && (a += 1);
  Util.isNeedtoShowRegisterPushButton() && (a += 1);
  return a;
};
Util.getStartXOfBottomIcon = function (a, b) {
  var d = 375.5;
  b
    ? (6 == a && (d = 320), 7 == a && (d = 270))
    : (5 == a && (d = 270.5), 6 == a && (d = 215.5), 7 == a && (d = 167));
  return d;
};
Util.getSubLinkUrl = function (a) {
  switch (a) {
    case GID.CO_TUONG:
      return "co-tuong";
    case GID.CO_UP:
      return "co-up";
  }
  return "";
};
Util.getGameRuleLinkUrl = function (a) {
  switch (a) {
    case GID.BA_CAY:
      return "ba-cay/huong-dan-choi-ba-cay/";
    case GID.XITO:
      return "xi-to/huong-dan-choi-xi-to/";
    case GID.LIENG:
      return "lieng/huong-dan-luat-danh-bai-lieng";
    case GID.XI_DZACH:
      return "xi-dach/huong-dan-choi-xi-dach/";
    case GID.POKER:
      return "poker/huong-dan-choi-bai-poker-online/";
    case GID.CO_TUONG:
      return "co-tuong/huong-dan-choi-co-tuong/";
    case GID.CO_UP:
      return "co-up/huong-dan-choi-co-up/";
    case GID.TLMN:
      return "tien-len-mien-nam/huong-dan-choi-tien-len-mien-nam/";
    case GID.TLMN_DEM_LA:
      return "tien-len-mien-nam-dem-la/huong-dan-choi-tien-len-mien-nam-dem-la/";
    case GID.PHOM:
      return "phom-ta-la/huong-dan-choi-phom-ta-la/";
    case GID.MAU_BINH:
      return "mau-binh/huong-dan-choi-mau-binh/";
    case GID.XAM:
      return "sam-loc/huong-dan-choi-sam-loc/";
    case 98:
      return "tong-hop-cac-huong-dan-trong-game-bai-bigkool-online/";
  }
  return "";
};
Util.getFBAppLinkUrl = function (a) {
  switch (a) {
    case GID.BA_CAY:
      return "https://apps.facebook.com/bacay-bigkool/";
    case GID.XITO:
      return "https://apps.facebook.com/xito-bigkool/";
    case GID.LIENG:
      return "https://apps.facebook.com/lieng-bigkool/";
    case GID.XI_DZACH:
      return "https://apps.facebook.com/xidzach-bigkool/";
    case GID.POKER:
      return "https://apps.facebook.com/poker-bigkool/";
    case GID.CO_TUONG:
      return "https://apps.facebook.com/cotuongcoup/";
    case GID.CO_UP:
      return "https://apps.facebook.com/choi-co-up-online/";
    case GID.TLMN:
      return "https://apps.facebook.com/tlmn-bigkool/";
    case GID.TLMN_DEM_LA:
      return "https://apps.facebook.com/tlmn-dem-la/";
    case GID.PHOM:
      return "https://apps.facebook.com/phom-bigkool/";
    case GID.MAU_BINH:
      return "https://apps.facebook.com/maubinh-bigkool/";
    case GID.XAM:
      return "https://apps.facebook.com/sam-bigkool/";
    case GID.CHAN:
      return "https://apps.facebook.com/chan_van_van/";
  }
  return "https://apps.facebook.com/archer_mobile_group/";
};
Util.showSnow = function (a) {
  a._emitter = new BkSnow();
  a.addChild(a._emitter, 10);
  a._emitter.life = 10;
  a._emitter.lifeVar = 1;
  a._emitter.gravity = cc.p(0, -20);
  a._emitter.speed = 5;
  a._emitter.speedVar = 30;
  var b = a._emitter.startColor;
  b.r = 230;
  b.g = 230;
  b.b = 230;
  a._emitter.startColor = b;
  b = a._emitter.startColorVar;
  b.b = 26;
  a._emitter.startColorVar = b;
  a._emitter.emissionRate = a._emitter.totalParticles / a._emitter.life;
  a._emitter.texture = cc.textureCache.addImage(res.snow);
  a._emitter.shapeType = cc.ParticleSystem.BALL_SHAPE;
  a._emitter.x = 440.5;
  a._emitter.y = 630;
};
Util.isFBCanvasDesktop = function () {
  return "facebookcanvasdesktop" == cc.sys.browserType;
};
Util.isAutoCreateAccount = function () {
  return BkGlobal.isNewRegistraion && bk.isDesktopApp;
};
Util.getStartTime = function (a, b) {
  var d = new Date(1e3 * a);
  if (void 0 != b && !0 == b)
    var e = d.getFullYear().toString().substring(2, 4);
  var f = "01 02 03 04 05 06 07 08 09 10 11 12".split(" ")[d.getMonth()],
    g = d.getDate();
  2 > g.toString().length && (g = "0" + g);
  var h = d.getHours();
  2 > h.toString().length && (h = "0" + h);
  d = d.getMinutes();
  2 > d.toString().length && (d = "0" + d);
  return void 0 != b && !0 == b
    ? g + "-" + f + "-" + e + " " + h + ":" + d
    : g + "-" + f + " " + h + ":" + d;
};
Util.getLoggedInTime = function (a) {
  var b = "1 2 3 4 5 6 7 8 9 10 11 12".split(" "),
    d = new Date(a);
  a = d.getDate();
  var e = b[d.getMonth()],
    f = d.getFullYear().toString();
  2 > a.toString().length && (a = "0" + a);
  var g = d.getHours();
  2 > g.toString().length && (g = "0" + g);
  d = d.getMinutes();
  2 > d.toString().length && (d = "0" + d);
  var h = new Date().getTime(),
    h = new Date(h),
    k = h.getDate(),
    b = b[h.getMonth()],
    h = h.getFullYear().toString();
  return a == k && e == b && f == h
    ? "H\u00f4m nay (" + g + ":" + d + ")"
    : a + " th " + e + " (" + g + ":" + d + ")";
};
Util.getRemainingTime = function (a) {
  return Util.secondsToTimecode(a - BkGlobal.currentServerTime);
};
Util.secondsToTimecode = function (a) {
  var b = Math.floor(a / 60),
    d,
    e = Math.floor(b / 60);
  d = Math.floor(a % 60);
  a = Math.floor(e / 24);
  e = (e % 24).toString();
  b = (b % 60).toString();
  d = d.toString();
  2 > e.length && (e = "0" + e);
  2 > b.length && (b = "0" + b);
  2 > d.length && (d = "0" + d);
  var f = "";
  return (f =
    0 < a
      ? a.toString() + "N " + e + ":" + b + ":" + d
      : e + ":" + b + ":" + d);
};
Util.removeArrList = function (a) {
  if (null != a && 0 < a.length) {
    for (var b = 0; b < a.length; b++) a[b].removeSelf();
    for (; 0 < a.length; ) a.splice(0, a.length);
  }
};
Util.isShowDesktopPromo = function () {
  return 1 == bk.showCreateDesktopIconTutorial;
};
bkFontSizeUtil = function (a, b) {
  return Math.ceil(a - 1 + 1.8 * b);
};
Util.getClientID = function (a) {
  a = "";
  if (isWebPlatform()) a = Util.getClientIDWeb();
  else {
    if (isFBInstantGame()) return Util.getClientIDFBI();
    a = NativeInterface.getClientID();
  }
  return a;
};
Util.getClientIDWeb = function () {
  var a = Util.getClientSetting(key.clientId);
  if (
    null == a ||
    a == DEFAULT_CLIENT_VALUE ||
    "" == a ||
    0 < a.indexOf("null")
  )
    (a = Util.generateClientId(8)),
      logMessage("NEW CLIENT ID: " + a),
      Util.setClientSetting(key.clientId, a);
  else {
    var b = a.split(";");
    1 < b.length &&
      (logMessage("UPGRADE OLD CLIENT ID: " + a),
      (a = b[0]),
      Util.setClientSetting(key.clientId, a),
      logMessage("NEW CLIENT ID: " + a));
  }
  return Util.createClientIdSuffix(a);
};
Util.getClientIDFBI = function () {
  var a = Util.getClientSetting(key.clientId);
  if (
    null == a ||
    a == DEFAULT_CLIENT_VALUE ||
    "" == a ||
    0 < a.indexOf("null")
  )
    (a = Util.generateInstantClientId()),
      Util.setClientSetting(key.clientId, a);
  else {
    var b = a.split(";");
    1 < b.length &&
      (logMessage("UPGRADE OLD CLIENT ID: " + a),
      (a = b[0]),
      Util.setClientSetting(key.clientId, a),
      logMessage("NEW CLIENT ID: " + a));
  }
  return Util.createClientIdSuffix(a);
};
Util.makeClientUID = function (a) {
  for (var b = "", d = 0; d < a; d++)
    b += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(
      Math.floor(62 * Math.random())
    );
  return b;
};
Util.getClientTimestamps = function () {
  return new Date().getTime();
};
Util.generateClientId = function (a) {
  var b = "";
  return (b =
    c.WEB_CLIENT_PREFIX +
    Util.makeClientUID(a) +
    Util.getClientTimestamps() +
    "_" +
    cc.sys.browserType);
};
Util.generateInstantClientId = function () {
  var a = BkFbInstant.playerId;
  void 0 == BkFbInstant.playerId && (a = Util.generateClientId(8));
  return c.WEB_CLIENT_PREFIX + a + c.FB_INSTANT_SUFFIX;
};
Util.isBrowserIE = function () {
  return "ie" == cc.sys.browserType;
};
bkScaleSizeUtil = function (a, b) {
  return cc.size(a.width * b, a.height * b);
};
isValidUsername = function (a, b) {
  var d = BkConstString.STR_INVALID_NAME;
  return /\W/.test(a)
    ? d + BkConstString.STR_LOGIN_NAME + BkConstString.STR_VALID_CHAR
    : 6 > a.length
    ? d + BkConstString.STR_VALID_LENGTH_NAME
    : cc.isUndefined(b)
    ? isDisallowedUsername(a)
    : "";
};
isDisallowedUsername = function (a) {
  a = a.replace("/W/i", "");
  for (
    var b = "admin admln ziga quantri quantrl zlga".split(" "), d = 0;
    d < b.length;
    d++
  )
    if (-1 != a.toLowerCase().indexOf(b[d]))
      return "T\u00ean \u0111\u0103ng nh\u1eadp kh\u00f4ng \u0111\u01b0\u1ee3c ch\u1ee9a c\u00e1c t\u1eeb kh\u00f3a g\u00e2y hi\u1ec3u l\u1ea7m cho ng\u01b0\u1eddi ch\u01a1i kh\u00e1c(vd: admin, ziga)";
  return "";
};
Util.getPlayWithFriendsMessage = function (a) {
  switch (a) {
    case 1:
      return BkConstString.STR_STATUS_FRIEND_NOT_ONLINE;
    case 2:
      return BkConstString.STR_STATUS_FRIEND_WAITING;
    case 3:
      return BkConstString.STR_STATUS_FRIEND_DENY_PLAY;
    case 4:
      return BkConstString.STR_STATUS_BEGIN_CREATE_TABLE;
    case 5:
      return BkConstString.STR_STATUS_CREATE_TABLE_ERROR;
    case 6:
      return BkConstString.STR_STATUS_FRIEND_JOIN_OTHER_TB;
    case 7:
      return (
        BkConstString.STR_STATUS_FRIEND_NO_MONEY +
        ". " +
        BkConstString.STR_LOWER_COIN_GUIDE
      );
    default:
      return BkConstString.STR_STATUS_FRIEND_DEFAULT;
  }
};
Util.openWebview = function (a, b) {
  if (isWebPlatform()) cc.sys.openURL(a);
  else {
    logMessage("openWebview: " + a);
    var d = new BkWebview(a, void 0 === b ? "" : b),
      e = getCurrentScene();
    e && e.addChild(d, TagOfLayer.Popup);
  }
};
Util.isFirstLoginInDay = function () {
  var a = Util.getLastLoginTime(),
    b = BkTime.GetCurrentTime(),
    a = BkTime.convertToLocalTime24h(a).substr(0, 10),
    b = BkTime.convertToLocalTime24h(b).substr(0, 10);
  logMessage("dateLastLoginTime: " + a);
  logMessage("dateCurrentTime: " + b);
  if (a === b) return logMessage("same day -\x3e !isFirstLoginInDay"), !1;
  logMessage("diffirent day -\x3e isFirstLoginInDay");
  return !0;
};
Util.httpRequestWithParam = function (a, b, d) {
  a += "?" + d;
  logMessage("url: " + a);
  var e = cc.loader.getXMLHttpRequest();
  e.open("GET", a, !0);
  e.timeout = 1e4;
  e.setRequestHeader("Content-Type", "application/json;charset\x3dUTF-8");
  e.onreadystatechange = function () {
    logMessage("onreadystatechange");
    if (4 == e.readyState) {
      var a = e.responseText,
        d = {};
      d.httpStatus = e.statusText;
      null != b && (4 === e.readyState && 200 === e.status ? b(null, a) : b(d));
    } else logMessage("request.readyState: " + e.readyState);
  };
  e.ontimeout = function () {
    logMessage("ontimeout ");
    var a = { httpStatus: 408 };
    null != b && b(a);
  };
  e.send();
};
Util.httpRequest = function (a, b) {
  logMessage("Util.httpRequest url: " + a);
  var d = cc.loader.getXMLHttpRequest();
  d.open("GET", a, !0);
  d.timeout = 1e4;
  d.setRequestHeader("Content-Type", "application/json;charset\x3dUTF-8");
  d.onreadystatechange = function () {
    logMessage("onreadystatechange");
    if (4 == d.readyState) {
      var a = d.responseText,
        f = {};
      f.httpStatus = d.statusText;
      null != b && (4 === d.readyState && 200 === d.status ? b(null, a) : b(f));
    } else logMessage("request.readyState: " + d.readyState);
  };
  d.ontimeout = function () {
    logMessage("ontimeout ");
    var a = { httpStatus: 408 };
    null != b && b(a);
  };
  d.send();
};
Util.logFirebaseEventLoadAdsSucc = function (a) {
  var b = "";
  switch (a) {
    case 1:
      b = EVENT_NAME.ADMOB_VIDEO_LOAD_SUCC;
      break;
    case 2:
      b = EVENT_NAME.ADMOB_INTERSITIAL_LOAD_SUCC;
      break;
    case 3:
      b = EVENT_NAME.FB_INTERSITIAL_LOAD_SUCC;
      break;
    case 4:
      b = EVENT_NAME.ADMOB_BANNER_LOAD_SUCC;
      break;
    case 5:
      b = EVENT_NAME.FB_BANNER_LOAD_SUCC;
      break;
    case 6:
      b = EVENT_NAME.MP_BANNER_LOAD_SUCC;
      break;
    case 7:
      b = EVENT_NAME.MP_INTERSITIAL_LOAD_SUCC;
      break;
    case 8:
      b = EVENT_NAME.MP_VIDEO_LOAD_SUCC;
      break;
    case 9:
      b = EVENT_NAME.FB_VIDEO_LOAD_SUCC;
  }
  NativeInterface.logFirebaseEvent(b);
};
Util.logFirebaseEventLoadAdsFail = function (a, b) {
  var d = "";
  switch (a) {
    case 1:
      d = EVENT_NAME.ADMOB_VIDEO_LOAD_FAIL;
      break;
    case 2:
      d = EVENT_NAME.ADMOB_INTERSITIAL_LOAD_FAIL;
      break;
    case 3:
      d = EVENT_NAME.FB_INTERSITIAL_LOAD_FAIL;
      break;
    case 4:
      d = EVENT_NAME.ADMOB_BANNER_LOAD_FAIL;
      break;
    case 5:
      d = EVENT_NAME.FB_BANNER_LOAD_FAIL;
      break;
    case 6:
      d = EVENT_NAME.MP_BANNER_LOAD_FAIL;
      break;
    case 7:
      d = EVENT_NAME.MP_INTERSITIAL_LOAD_FAIL;
      break;
    case 8:
      d = EVENT_NAME.MP_VIDEO_LOAD_FAIL;
      break;
    case 9:
      d = EVENT_NAME.FB_VIDEO_LOAD_FAIL;
  }
  var e = {},
    f = Util.getUserNameOrClientID();
  e[TAG_FB.USERNAME] = f;
  e[TAG_FB.ERROR_CODE] = b;
  e = JSON.stringify(e);
  NativeInterface.logFirebaseEvent(d, e);
};
Util.getUserNameOrClientID = function () {
  if (BkGlobal.UserInfo) return BkGlobal.UserInfo.userName;
  var a = [],
    a = Util.getClientID().split(";"),
    b = "default";
  0 < a.length && (b = a[0]);
  return b;
};
Util.getAdsType = function (a) {
  switch (a) {
    case 1:
    case 8:
    case 9:
      return ads.ADS_TYPE_REWARDED_VIDEO_ADS;
    case 2:
    case 3:
    case 7:
      return ads.ADS_TYPE_INTERSTITIAL_ADS;
    case 4:
    case 5:
    case 6:
      return ads.ADS_TYPE_BANNER_ADS;
  }
  return -1;
};
Util.getAdsPartner = function (a) {
  switch (a) {
    case 1:
    case 2:
    case 4:
      return ads.PARTNER_GOOGGLE;
    case 3:
    case 5:
    case 9:
      return ads.PARTNER_FACEBOOK;
    case 6:
    case 7:
    case 8:
      return ads.PARTNER_TWITTER;
  }
  return -1;
};
Util.createActionJsonDataLogEventFirebase = function (a) {
  a = void 0 === a ? "default" : a;
  var b = {},
    d = [],
    d = Util.getClientID().split(";"),
    e = "default";
  0 < d.length && (e = d[0]);
  logMessage("baseClientID " + e);
  b[TAG_FB.USERNAME] = e;
  b[TAG_FB.EVENT] = a;
  return JSON.stringify(b);
};
Util.createBasicJsonDataLogEventFirebase = function () {
  var a = {};
  a[TAG_FB.USERNAME] = Util.getUserNameOrClientID();
  return JSON.stringify(a);
};
Util.getGameFontName = function (a, b) {
  var d = res_name.GAME_FONT;
  isWebPlatform() || (d = res_font_path.GAME_FONT);
  a
    ? b
      ? ((d = res_name.GAME_FONT_BOLD_ITALIC),
        isWebPlatform() || (d = res_font_path.GAME_FONT_BOLD_ITALIC))
      : ((d = res_name.GAME_FONT_BOLD),
        isWebPlatform() || (d = res_font_path.GAME_FONT_BOLD))
    : b &&
      ((d = res_name.GAME_FONT_ITALIC),
      isWebPlatform() || (d = res_font_path.GAME_FONT_ITALIC));
  return d;
};
Util.sendPacketWithTypeAndByteDate = function (a, b) {
  var d = new BkPacket();
  d.createPacketWithTypeAndByteData(a, b);
  BkConnectionManager.send(d);
};
Util.sendPacketWithOnlyType = function (a) {
  var b = new BkPacket();
  b.createPacketWithOnlyType(a);
  BkConnectionManager.send(b);
};
Util.getBtnFontName = function () {
  var a = res_name.GAME_FONT_BTN;
  isWebPlatform() || (a = res_font_path.GAME_FONT_BTN);
  return a;
};
Util.loadChatRes = function () {
  BkGlobal.isLoadedChatEmo
    ? logMessage("isLoadedChatEmo -\x3e not need reload!")
    : cc.loader.load(
        chat_resources,
        function (a, b, d) {},
        function () {
          logMessage("done load chat emo");
          BkGlobal.isLoadedChatEmo = !0;
        }
      );
};
Util.parseJSONfromData = function (a, b, d) {
  if (b in a) return logMessage("jsonTag: " + b + " - data: " + a[b]), a[b];
  logMessage(
    "json have not property : " + b + " please check -\x3e return dfValue: " + d
  );
  return d;
};
Util.refactorChatMessage = function (a) {
  for (
    var b = Util.getListMessageChatInvalid().split(":"), d = 0;
    d < b.length;
    d++
  ) {
    var e = b[d];
    -1 !== a.indexOf(e) && (a = a.replace(e, "***"));
  }
  return a;
};
Util.restartGame = function () {
  logMessage("restartGame:");
  BkGlobal.resetGlobalData();
  cc.spriteFrameCache.removeSpriteFrames();
  cc.loader.releaseAll();
  BkConnectionManager.closeConnection();
  cc.game.restart();
};
Base64 = {
  _keyStr:
    "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",
  encode: function (a) {
    var b = "",
      d,
      e,
      f,
      g,
      h,
      k,
      m = 0;
    for (a = Base64._utf8_encode(a); m < a.length; )
      (d = a.charCodeAt(m++)),
        (e = a.charCodeAt(m++)),
        (f = a.charCodeAt(m++)),
        (g = d >> 2),
        (d = ((d & 3) << 4) | (e >> 4)),
        (h = ((e & 15) << 2) | (f >> 6)),
        (k = f & 63),
        isNaN(e) ? (h = k = 64) : isNaN(f) && (k = 64),
        (b =
          b +
          this._keyStr.charAt(g) +
          this._keyStr.charAt(d) +
          this._keyStr.charAt(h) +
          this._keyStr.charAt(k));
    return b;
  },
  decode: function (a) {
    var b = "",
      d,
      e,
      f,
      g,
      h,
      k = 0;
    for (a = a.replace(/[^A-Za-z0-9\+\/\=]/g, ""); k < a.length; )
      (d = this._keyStr.indexOf(a.charAt(k++))),
        (e = this._keyStr.indexOf(a.charAt(k++))),
        (g = this._keyStr.indexOf(a.charAt(k++))),
        (h = this._keyStr.indexOf(a.charAt(k++))),
        (d = (d << 2) | (e >> 4)),
        (e = ((e & 15) << 4) | (g >> 2)),
        (f = ((g & 3) << 6) | h),
        (b += String.fromCharCode(d)),
        64 != g && (b += String.fromCharCode(e)),
        64 != h && (b += String.fromCharCode(f));
    return (b = Base64._utf8_decode(b));
  },
  _utf8_encode: function (a) {
    a = a.replace(/\r\n/g, "\n");
    for (var b = "", d = 0; d < a.length; d++) {
      var e = a.charCodeAt(d);
      128 > e
        ? (b += String.fromCharCode(e))
        : (127 < e && 2048 > e
            ? (b += String.fromCharCode((e >> 6) | 192))
            : ((b += String.fromCharCode((e >> 12) | 224)),
              (b += String.fromCharCode(((e >> 6) & 63) | 128))),
          (b += String.fromCharCode((e & 63) | 128)));
    }
    return b;
  },
  _utf8_decode: function (a) {
    for (var b = "", d = 0, e = (c1 = c2 = 0); d < a.length; )
      (e = a.charCodeAt(d)),
        128 > e
          ? ((b += String.fromCharCode(e)), d++)
          : 191 < e && 224 > e
          ? ((c2 = a.charCodeAt(d + 1)),
            (b += String.fromCharCode(((e & 31) << 6) | (c2 & 63))),
            (d += 2))
          : ((c2 = a.charCodeAt(d + 1)),
            (c3 = a.charCodeAt(d + 2)),
            (b += String.fromCharCode(
              ((e & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)
            )),
            (d += 3));
    return b;
  },
};
DEFAULT_CLIENT_VALUE = 0;
if ("undefined" == typeof key) {
  var key = {},
    fbKey = bk.isFbApp ? "f" : "";
  key.isRenamealbe = 0 + fbKey;
  key.itemList = 4 + fbKey;
  key.clientId = 5 + fbKey;
  key.isRegisterUser = 6 + fbKey;
  key.usernameKey = 7 + fbKey;
  key.passwordKey = 8 + fbKey;
  key.showTakenPiece = 9 + fbKey;
  key.userLoginInfo = 10 + fbKey;
  key.userSettingInfo = 11 + fbKey;
  key.userLastRoomType = 12 + fbKey;
  key.isSaveUserSession = 13;
  key.displayHotNews = "DisplayHotNews";
  key.endpoint = "endpoint";
  key.popupCount = "popupCount";
  key.lastHotTab = "lastHotTab";
  key.lastGameChoose = "lastGameChoose";
  key.lastTabChoose = "lastTabChoose";
  key.ListLoggedInUsers = "ListLoggedInUsers";
  key.isShowPromotionWD = "isShowPromotionWD:";
  key.dfBackgorundIngame = "BackgorundIngame";
  key.lastCheckAllState = "lastCheckAllCheckboxState";
  key.gameWidth = "gameWidth";
  key.gameHeight = "gameHeight";
}
Util.setDefaultValue = function (a) {
  cc.sys.localStorage.setItem(a, DEFAULT_CLIENT_VALUE);
};
Util.getClientSetting = function (a, b, d) {
  var e = cc.sys.localStorage;
  null == e.getItem(a) &&
    (void 0 != d && null != d
      ? Util.setClientSetting(a, d)
      : Util.setClientSetting(a, JSON.stringify(DEFAULT_CLIENT_VALUE)));
  a = e.getItem(a);
  return b && a ? JSON.parse(a) : a;
};
Util.isNullOrEmpty = function (a) {
  return a ? !1 : !0;
};
Util.storeSetting = function (a, b) {
  return cc.sys.localStorage.setItem(JSON.stringify(a), JSON.stringify(b));
};
Util.getSetting = function (a, b) {
  b = void 0 === b ? null : b;
  var d = cc.sys.localStorage.getItem(JSON.stringify(a));
  return Util.isNullOrEmpty(d)
    ? null != b
      ? JSON.parse(JSON.stringify(b))
      : null
    : JSON.parse(d);
};
Util.setClientSetting = function (a, b) {
  return cc.sys.localStorage.setItem(a, b.toString());
};
Util.removeClientSetting = function (a) {
  cc.sys.localStorage.removeItem(a);
};
Util.getClientSession = function (a, b) {
  var d = bk.sessionStorage.getItem(a);
  return b && d ? JSON.parse(d) : d;
};
Util.setClientSession = function (a, b) {
  return bk.sessionStorage.setItem(a, b.toString());
};
Util.removeClientSession = function (a) {
  bk.sessionStorage.removeItem(a);
};
try {
  (bk.sessionStorage = sessionStorage = window.sessionStorage),
    bk.sessionStorage.setItem("storage", ""),
    bk.sessionStorage.removeItem("storage");
} catch (e$$55) {
  var warn = function () {
    logMessage(
      "Warning: sessionStorage isn't enabled. Please confirm browser cookie or privacy option"
    );
  };
  bk.sessionStorage = {
    getItem: warn,
    setItem: warn,
    removeItem: warn,
    clear: warn,
  };
}
Util.onNhacNenStateChange = function (a) {
  logMessage("onNhacNenStateChange");
  Util.setNhacNenSetting(a);
  a ? playNhacNenSound() : stopNhacNenSound();
};
Util.setDefaultNhacNenOff = function () {
  Util.getSetting("UpdatedDFNhacNenOff", 0) ||
    (Util.setNhacNenSetting(0), Util.storeSetting("UpdatedDFNhacNenOff", 1));
};
Util.setNhacNenSetting = function (a) {
  Util.storeSetting("nhacnenSetting", void 0 === a ? 0 : a);
};
Util.getNhacNenSetting = function () {
  return Util.getSetting("nhacnenSetting", 0);
};
Util.setSoundSetting = function (a) {
  Util.storeSetting("soundSetting", void 0 === a ? 1 : a);
};
Util.getSoundSetting = function () {
  return Util.getSetting("soundSetting", 1);
};
Util.setChatSetting = function (a) {
  Util.storeSetting("chatSetting", void 0 === a ? 1 : a);
};
Util.getChatSetting = function () {
  return Util.getSetting("chatSetting", 1);
};
Util.setLoginCount = function (a) {
  Util.storeSetting("loginCount", a);
};
Util.getLoginCount = function () {
  return Util.getSetting("loginCount", 0);
};
Util.setVibrateSetting = function (a) {
  a = void 0 === a ? 1 : a;
  logMessage("setVibrateSetting: " + a);
  Util.storeSetting("vibrateSetting", a);
};
Util.getVibrateSetting = function () {
  return Util.getSetting("vibrateSetting", 1);
};
Util.setIsRatedApp = function (a) {
  Util.storeSetting("isRatedApp", a);
};
Util.isRatedApp = function () {
  return Util.getSetting("isRatedApp", 0);
};
Util.setisInBackground = function (a) {
  Util.storeSetting("isInBackground", void 0 === a ? 0 : a);
};
Util.isInBackground = function () {
  return Util.getSetting("isInBackground");
};
Util.setLastLoginTime = function () {
  var a = BkTime.GetCurrentTime();
  logMessage("setLastLoginTime: " + a);
  Util.storeSetting("lastLoginTime", a);
};
Util.getLastLoginTime = function () {
  return Util.getSetting("lastLoginTime", 0);
};
Util.getLastUrlSetting = function () {
  var a = Util.getSetting("lastUrlSetting", URL_SETTING.URL1);
  logMessage("getLastUrlSetting: " + a);
  return a;
};
Util.setLastUrlSetting = function (a) {
  logMessage("lastUrlSetting: " + a);
  Util.storeSetting("lastUrlSetting", a);
};
Util.setServerIPAddress = function (a) {
  Util.storeSetting("ServerIPAddress", a);
};
Util.getServerIPAddress = function () {
  var a = Util.getSetting(
    "ServerIPAddress",
    URL_SETTING.DEAFAULT_SERVER_IP_ADDRESS
  );
  logMessage("getServerIPAddress: " + a);
  return a;
};
if ("undefined" == typeof key_ads_setting)
  var key_ads_setting = {
    AND_GG_ADMOB_APP_ADS_ID: "AND_GG_ADMOB_APP_ADS_ID",
    IOS_GG_ADMOB_APP_ADS_ID: "IOS_GG_ADMOB_APP_ADS_ID",
    AND_GG_ADMOB_BANNER_ADS_ID: "AND_GG_ADMOB_BANNER_ADS_ID",
    IOS_GG_ADMOB_BANNER_ADS_ID: "IOS_GG_ADMOB_BANNER_ADS_ID",
    AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID: "AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID",
    IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID: "IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID",
    AND_GG_ADMOB_INTERSTITIAL_ADS_ID: "AND_GG_ADMOB_INTERSTITIAL_ADS_ID",
    IOS_GG_ADMOB_INTERSTITIAL_ADS_ID: "IOS_GG_ADMOB_INTERSTITIAL_ADS_ID",
    AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM:
      "AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM",
    IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM:
      "IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM",
    AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM:
      "AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM",
    IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM:
      "IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM",
    AND_FB_BANNER_ADS_ID: "AND_FB_BANNER_ADS_ID",
    IOS_FB_BANNER_ADS_ID: "IOS_FB_BANNER_ADS_ID",
    AND_FB_INTERSTITIAL_ADS_ID: "AND_FB_INTERSTITIAL_ADS_ID",
    IOS_FB_INTERSTITIAL_ADS_ID: "IOS_FB_INTERSTITIAL_ADS_ID",
    AND_FB_REWARDED_VIDEO_ADS_ID: "AND_FB_REWARDED_VIDEO_ADS_ID",
    IOS_FB_REWARDED_VIDEO_ADS_ID: "IOS_FB_REWARDED_VIDEO_ADS_ID",
    AND_FB_INTERSTITIAL_ADS_ID_HEPCM: "AND_FB_INTERSTITIAL_ADS_ID_HEPCM",
    IOS_FB_INTERSTITIAL_ADS_ID_HEPCM: "IOS_FB_INTERSTITIAL_ADS_ID_HEPCM",
    AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM: "AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM",
    IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM: "IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM",
    AND_MP_BANNER_ADS_ID: "AND_MP_BANNER_ADS_ID",
    IOS_MP_BANNER_ADS_ID: "IOS_MP_BANNER_ADS_ID",
    AND_MP_REWARDED_VIDEO_ADS_ID: "AND_MP_REWARDED_VIDEO_ADS_ID",
    IOS_MP_REWARDED_VIDEO_ADS_ID: "IOS_MP_REWARDED_VIDEO_ADS_ID",
    AND_MP_INTERSTITIAL_ADS_ID: "AND_MP_INTERSTITIAL_ADS_ID",
    IOS_MP_INTERSTITIAL_ADS_ID: "IOS_MP_INTERSTITIAL_ADS_ID",
    AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM: "AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM",
    IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM: "IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM",
    AND_MP_INTERSTITIAL_ADS_ID_HEPCM: "AND_MP_INTERSTITIAL_ADS_ID_HEPCM",
    IOS_MP_INTERSTITIAL_ADS_ID_HEPCM: "IOS_MP_INTERSTITIAL_ADS_ID_HEPCM",
  };
Util.getGGAdmobAppID = function () {
  var a = ADS_ID.AND_GG_ADMOB_APP_ADS_ID,
    b = key_ads_setting.AND_GG_ADMOB_APP_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_APP_ADS_ID),
      (b = key_ads_setting.IOS_GG_ADMOB_APP_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getGGAdmobBannerAdsID = function () {
  var a = ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID,
    b = key_ads_setting.AND_GG_ADMOB_BANNER_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID),
      (b = key_ads_setting.IOS_GG_ADMOB_BANNER_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getGGAdmobRewardedVideoAdsIDHEPCM = function () {
  var a = ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM,
    b = key_ads_setting.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getGGAdmobRewardedVideoAdsID = function () {
  var a = ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID,
    b = key_ads_setting.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID),
      (b = key_ads_setting.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getGGAdmobInterStitialAdsIDHEPCM = function () {
  var a = ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM,
    b = key_ads_setting.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getGGAdmobInterStitialAdsID = function () {
  var a = ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID,
    b = key_ads_setting.AND_GG_ADMOB_INTERSTITIAL_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID),
      (b = key_ads_setting.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getFBBannerAdsID = function () {
  var a = ADS_ID.AND_FB_BANNER_ADS_ID,
    b = key_ads_setting.AND_FB_BANNER_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_FB_BANNER_ADS_ID),
      (b = key_ads_setting.IOS_FB_BANNER_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getFBInterStitialAdsIDHEPCM = function () {
  var a = ADS_ID.AND_FB_INTERSTITIAL_ADS_ID_HEPCM,
    b = key_ads_setting.AND_FB_INTERSTITIAL_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getFBInterStitialAdsID = function () {
  var a = ADS_ID.AND_FB_INTERSTITIAL_ADS_ID,
    b = key_ads_setting.AND_FB_INTERSTITIAL_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID),
      (b = key_ads_setting.IOS_FB_INTERSTITIAL_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getFBRewardedVideoAdsIDHEPCM = function () {
  var a = ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM,
    b = key_ads_setting.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getFBRewardedVideoAdsID = function () {
  var a = ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID,
    b = key_ads_setting.AND_FB_REWARDED_VIDEO_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID),
      (b = key_ads_setting.IOS_FB_REWARDED_VIDEO_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getMPBannerAdsID = function () {
  var a = ADS_ID.AND_MP_BANNER_ADS_ID,
    b = key_ads_setting.AND_MP_BANNER_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_MP_BANNER_ADS_ID),
      (b = key_ads_setting.IOS_MP_BANNER_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getMPRewardedVideoAdsIDHEPCM = function () {
  var a = ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM,
    b = key_ads_setting.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getMPRewardedVideoAdsID = function () {
  var a = ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID,
    b = key_ads_setting.AND_MP_REWARDED_VIDEO_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID),
      (b = key_ads_setting.IOS_MP_REWARDED_VIDEO_ADS_ID);
  return Util.getSetting(b, a);
};
Util.getMPInterStitialAdsIDHEPCM = function () {
  var a = ADS_ID.AND_MP_INTERSTITIAL_ADS_ID_HEPCM,
    b = key_ads_setting.AND_MP_INTERSTITIAL_ADS_ID_HEPCM;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM),
      (b = key_ads_setting.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM);
  return Util.getSetting(b, a);
};
Util.getMPInterStitialAdsID = function () {
  var a = ADS_ID.AND_MP_INTERSTITIAL_ADS_ID,
    b = key_ads_setting.AND_MP_INTERSTITIAL_ADS_ID;
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (a = ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID),
      (b = key_ads_setting.IOS_MP_INTERSTITIAL_ADS_ID);
  return Util.getSetting(b, a);
};
if ("undefined" == typeof key_setting)
  var key_setting = {
    EMAIL_SUPPORT: "EMAIL_SUPPORT",
    URL_MESSENGER_SUPPORT: "URL_MESSENGER_SUPPORT",
    MIN_FRIEND_FB_REWARDED: "MIN_FRIEND_FB_REWARDED",
    USERINFO_TASK_DUTY_GAME: "USERINFO_TASK_DUTY_GAME",
    URL_HUONG_DAN: "URL_HUONG_DAN",
    URL_POLICY: "URL_POLICY",
    URL_GG_PLAY_STORE: "URL_GG_PLAY_STORE",
    URL_APPLE_STORE: "URL_APPLE_STORE",
    NEXT_ADS_REWARDED_TIME: "NEXT_ADS_REWARDED_TIME",
    URL_DOMAIN_SETTING: "URL_DOMAIN_SETTING",
  };
Util.getNextAdsRewardedTime = function () {
  return Util.getSetting(
    key_setting.NEXT_ADS_REWARDED_TIME,
    SETTING.NEXT_ADS_REWARDED_TIME
  );
};
Util.getEmailSuppot = function () {
  return Util.getSetting(key_setting.EMAIL_SUPPORT, SETTING.EMAIL_SUPPORT);
};
Util.getUrlMessengerSupport = function () {
  return Util.getSetting(
    key_setting.URL_MESSENGER_SUPPORT,
    SETTING.URL_MESSENGER_SUPPORT
  );
};
Util.getMinFriendFBRewarded = function () {
  return Util.getSetting(
    key_setting.MIN_FRIEND_FB_REWARDED,
    SETTING.MIN_FRIEND_FB_REWARDED
  );
};
Util.getTaskDutyGame = function () {
  return Util.getSetting(
    key_setting.USERINFO_TASK_DUTY_GAME,
    SETTING.USERINFO_TASK_DUTY_GAME
  );
};
Util.getURLHuongDan = function () {
  return Util.getSetting(key_setting.URL_HUONG_DAN, SETTING.URL_HUONG_DAN);
};
Util.getURLPolicy = function () {
  return Util.getSetting(key_setting.URL_POLICY, SETTING.URL_POLICY);
};
Util.loadSettingFromLocalStorage = function () {
  logMessage("loadSettingFromLocalStorage");
  cc.sys.os == cc.sys.OS_ANDROID &&
    ((ADS_ID.AND_GG_ADMOB_APP_ADS_ID = Util.getSetting(
      key_ads_setting.AND_GG_ADMOB_APP_ADS_ID,
      ADS_ID.AND_GG_ADMOB_APP_ADS_ID
    )),
    (ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID = Util.getSetting(
      key_ads_setting.AND_GG_ADMOB_BANNER_ADS_ID,
      ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID
    )),
    (ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID = Util.getSetting(
      key_ads_setting.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID,
      ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID
    )),
    (ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID = Util.getSetting(
      key_ads_setting.AND_GG_ADMOB_INTERSTITIAL_ADS_ID,
      ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID
    )),
    (ADS_ID.AND_FB_BANNER_ADS_ID = Util.getSetting(
      key_ads_setting.AND_FB_BANNER_ADS_ID,
      ADS_ID.AND_FB_BANNER_ADS_ID
    )),
    (ADS_ID.AND_FB_INTERSTITIAL_ADS_ID = Util.getSetting(
      key_ads_setting.AND_FB_INTERSTITIAL_ADS_ID,
      ADS_ID.AND_FB_INTERSTITIAL_ADS_ID
    )),
    (ADS_ID.AND_MP_INTERSTITIAL_ADS_ID = Util.getSetting(
      key_ads_setting.AND_MP_INTERSTITIAL_ADS_ID,
      ADS_ID.AND_MP_INTERSTITIAL_ADS_ID
    )),
    (ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID = Util.getSetting(
      key_ads_setting.AND_MP_REWARDED_VIDEO_ADS_ID,
      ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID
    )),
    (ADS_ID.AND_MP_BANNER_ADS_ID = Util.getSetting(
      key_ads_setting.AND_MP_BANNER_ADS_ID,
      ADS_ID.AND_MP_BANNER_ADS_ID
    )));
  if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
    (ADS_ID.IOS_GG_ADMOB_APP_ADS_ID = Util.getSetting(
      key_ads_setting.IOS_GG_ADMOB_APP_ADS_ID,
      ADS_ID.IOS_GG_ADMOB_APP_ADS_ID
    )),
      (ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_GG_ADMOB_BANNER_ADS_ID,
        ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID
      )),
      (ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID,
        ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID
      )),
      (ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID,
        ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.IOS_FB_BANNER_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_FB_BANNER_ADS_ID,
        ADS_ID.IOS_FB_BANNER_ADS_ID
      )),
      (ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_FB_INTERSTITIAL_ADS_ID,
        ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_MP_INTERSTITIAL_ADS_ID,
        ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_MP_REWARDED_VIDEO_ADS_ID,
        ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID
      )),
      (ADS_ID.IOS_MP_BANNER_ADS_ID = Util.getSetting(
        key_ads_setting.IOS_MP_BANNER_ADS_ID,
        ADS_ID.IOS_MP_BANNER_ADS_ID
      ));
  SETTING.EMAIL_SUPPORT = Util.getSetting(
    key_setting.EMAIL_SUPPORT,
    SETTING.EMAIL_SUPPORT
  );
  SETTING.URL_MESSENGER_SUPPORT = Util.getSetting(
    key_setting.URL_MESSENGER_SUPPORT,
    SETTING.URL_MESSENGER_SUPPORT
  );
  SETTING.MIN_FRIEND_FB_REWARDED = Util.getSetting(
    key_setting.MIN_FRIEND_FB_REWARDED,
    SETTING.MIN_FRIEND_FB_REWARDED
  );
  SETTING.URL_HUONG_DAN = Util.getSetting(
    key_setting.URL_HUONG_DAN,
    SETTING.URL_HUONG_DAN
  );
  SETTING.URL_POLICY = Util.getSetting(
    key_setting.URL_POLICY,
    SETTING.URL_POLICY
  );
  SETTING.URL_APPLE_STORE = Util.getSetting(
    key_setting.URL_APPLE_STORE,
    SETTING.URL_APPLE_STORE
  );
  SETTING.URL_GG_PLAY_STORE = Util.getSetting(
    key_setting.URL_GG_PLAY_STORE,
    SETTING.URL_GG_PLAY_STORE
  );
};
Util.setTimedidEnterBackground = function (a) {
  var b = BkTime.GetCurrentTime();
  a = void 0 === a ? b : a;
  logMessage("setTimedidEnterBackground: " + a);
  Util.storeSetting("timedidEnterBackground", a);
};
Util.getTimedidEnterBackground = function () {
  return Util.getSetting("timedidEnterBackground", 0);
};
Util.setIsRestarting = function (a) {
  a = void 0 === a ? 0 : a;
  logMessage("setIsRestarting: " + a);
  Util.storeSetting("isRestartingGame", a);
};
Util.getIsRestarting = function () {
  return Util.getSetting("isRestartingGame", 0);
};
Util.isRestartingGame = function () {
  return cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX
    ? Util.getIsRestarting()
    : 0;
};
Util.setListMessageChatInvalid = function (a) {
  logMessage("setListMessageChatInvalid: " + a);
  Util.storeSetting("listMessageChatInvalid", a);
};
Util.getListMessageChatInvalid = function () {
  return Util.getSetting(
    "listMessageChatInvalid",
    SETTING.LIST_MESSAGE_INVALID
  );
};
BkQueue = cc.Class.extend({
  queue: null,
  isRunning: !1,
  firstObject: null,
  ctor: function () {
    this.queue = [];
  },
  resetQueue: function () {
    this.firstObject = null;
    this.queue = [];
    this.isRunning = !1;
  },
  traceQueue: function () {
    traceCardList(this.queue, "Queue card: ");
  },
  lastElement: function () {
    return null == this.queue || 0 == this.queue.length
      ? null
      : this.queue[this.queue.length - 1];
  },
  push: function (a) {
    null == this.queue && (this.queue = []);
    this.queue.push(a);
  },
  pop: function () {
    return (this.firstObject = null == this.queue ? null : this.queue.shift());
  },
  getLastCard: function () {
    return this.firstObject;
  },
  isEmpty: function () {
    return null == this.queue ? !0 : 0 == this.queue.length;
  },
  isRunningAction: function () {
    return this.isRunning;
  },
  setRunningState: function (a) {
    this.isRunning = a;
  },
});
BASE_HEIGHT_AVAR = BASE_WIDTH_AVAR = 97;
BASE_WIDTH_BAOBOI = 81;
BASE_HEIGHT_BAOBOI = 83;
function BkAvartarImg() {}
BkAvartarImg.getTypeFromId = function (a) {
  return 24 <= a ? AT.TYPE_BAOBOI : 17 <= a ? AT.TYPE_VATPHAM : AT.TYPE_AVATAR;
};
BASE_WIDTH_VATPHAM = 83;
BASE_HEIGHT_VATPHAM = 84;
BkAvartarImg.getVatphamBackground = function (a, b) {
  return void 0 != b && b == AT.TYPE_VATPHAM
    ? new BkSprite("#" + res_name.bg_VatPham_hover)
    : a
    ? new BkSprite("#" + res_name.avatar_Frame_hover)
    : new BkSprite("#" + res_name.avatar_Frame_normal);
};
BkAvartarImg.getAvatarBg = function (a) {
  return a
    ? new BkSprite("#" + res_name.top_1st_bg)
    : new BkSprite("#" + res_name.top_10_bg);
};
BkAvartarImg.getImageFromID = function (a) {
  return BkAvartarImg.getShopImageFromID(a);
};
BkAvartarImg.getAvatarByID = function (a, b) {
  var d = new BkSprite("#" + res_name.avt_frame_bg),
    e = new BkSprite("#" + res_name.avt_frame);
  d.addChild(e);
  var f = new BkSpriteLoader(a, "#" + res_name.default_Avatar),
    g = 0.85 * d.getContentSize().height;
  f.setScale(g / f.getContentSize().height);
  f = BkAvartarImg.createClipNodeCircle(f, g);
  d.addChild(f);
  g = Util.getRankSprite(b);
  g.x = d.getContentSize().width / 2;
  g.y = d.getContentSize().height / 2 - g.getContentSize().height / 4;
  isWebPlatform() &&
    (g.setScale(0.85),
    (g.y = d.getContentSize().height / 2 - g.getContentSize().height / 2.3));
  d.addChild(g);
  d.x = d.getContentSize().width / 2;
  d.y = d.getContentSize().height / 2;
  e.x = d.x;
  e.y = d.y;
  f.x = d.x;
  f.y = d.y;
  return d;
};
BkAvartarImg.createClipNodeCircle = function (a, b) {
  var d = new BkSprite("#" + res_name.CircleClippingNodeImage);
  d.setScale(b / d.getContentSize().height);
  d = new cc.ClippingNode(d);
  d.setAlphaThreshold(0.01);
  d.addChild(a);
  return d;
};
BkAvartarImg.createEloSprite = function (a, b) {
  var d = new BkSprite("#" + res_name.small_info_frame);
  d.x = d.getBoundingBox().width / 2;
  d.y = d.getBoundingBox().height / 2;
  var e = new BkSprite("#" + b);
  e.x =
    d.x -
    0.5 * d.getBoundingBox().width +
    e.getBoundingBox().width / 2 +
    0.015 * d.getContentSize().width;
  e.y = d.y;
  d.addChild(e);
  var f = new BkLabel(a, "", 32);
  f.x = e.x + e.getBoundingBox().width / 2 + f.getContentSize().width / 2 + 4;
  f.y = d.y;
  f.setTextColor(cc.color(251, 234, 180));
  d.addChild(f);
  return d;
};
BkAvartarImg.getAvatarByIDWidthBg = function (a) {
  a = new BkSpriteLoader(a, "#" + res_name.default_Avatar);
  a.x = a.getContentSize().width / 2;
  a.y = a.getContentSize().height / 2;
  return a;
};
BkAvartarImg.getRectImageFromItem = function (a) {
  if (a == AT.TYPE_AVATAR)
    return cc.rect(0, 0, BASE_WIDTH_AVAR, BASE_HEIGHT_AVAR);
  if (a == AT.TYPE_VATPHAM)
    return cc.rect(0, 0, BASE_WIDTH_VATPHAM, BASE_HEIGHT_VATPHAM);
  if (a == AT.TYPE_BAOBOI)
    return cc.rect(0, 0, BASE_WIDTH_BAOBOI, BASE_HEIGHT_BAOBOI);
};
function BkConstString() {}
BkConstString.SPEC_CHAR = "\x26*\x26";
BkConstString.STR_EXISTING_NAME =
  "T\u00ean \u0111\u0103ng nh\u1eadp \u0111\u00e3 t\u1ed3n t\u1ea1i. Xin vui l\u00f2ng ch\u1ecdn m\u1ed9t t\u00ean kh\u00e1c";
BkConstString.STR_UPDATE_NAME_SUCCESS =
  "T\u00ean \u0111\u0103ng nh\u1eadp m\u1edbi";
BkConstString.STR_PROHIBITED_NAME =
  "T\u00ean \u0111\u0103ng nh\u1eadp ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a c\u00e1c k\u00ed t\u1ef1 sau: a-\x3e z, A -\x3e Z, 0-\x3e 9 ho\u1eb7c _";
BkConstString.STR_UPDATED_BEFORE =
  "T\u00ean \u0111\u0103ng nh\u1eadp \u0111\u00e3 \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt r\u1ed3i.";
BkConstString.STR_LOCKED_CLIENT =
  "T\u00e0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111ang b\u1ecb kh\u00f3a.\nXin h\u00e3y li\u00ean h\u1ec7 v\u1edbi fanpage Ziga \u0111\u1ec3 bi\u1ebft th\u00eam chi ti\u1ebft.";
BkConstString.STR_GAME_IS_MAITAIN =
  "Game \u0111ang trong qu\u00e1 tr\u00ecnh n\u00e2ng c\u1ea5p.Xin C\u00e1c b\u1ea1n vui l\u00f2ng tr\u1edf l\u1ea1i sau.\nB\u1ea1n c\u00f3 th\u1ec3 li\u00ean h\u1ec7 v\u1edbi fanpage Ziga \u0111\u1ec3 bi\u1ebft th\u00eam chi ti\u1ebft.";
BkConstString.STR_SETTING_LUAT_CHANGE =
  "C\u00e0i \u0111\u1eb7t c\u1ee7a b\u00e0n \u0111\u00e3 \u0111\u01b0\u1ee3c thay \u0111\u1ed5i.";
BkConstString.STR_MAX_PLAYER_INVALID =
  "B\u1ea1n kh\u00f4ng th\u1ec3 c\u00e0i \u0111\u1eb7t s\u1ed1 ng\u01b0\u1eddi ch\u01a1i t\u1ed1i \u0111a \u00edt h\u01a1n s\u1ed1 ng\u01b0\u1eddi ch\u01a1i hi\u1ec7n t\u1ea1i \u1edf trong b\u00e0n.";
BkConstString.STR_DAILY_BONUS =
  "B\u1ea1n \u0111\u01b0\u1ee3c th\u01b0\u1edfng 1000 xu cho l\u1ea7n \u0111\u0103ng nh\u1eadp n\u00e0y.";
BkConstString.STR_MESS_SERVER_KICK =
  "B\u1ea1n b\u1ecb \u0111u\u1ed5i do h\u1ebft th\u1eddi gian ch\u1edd.";
BkConstString.STR_NOT_ENOUGH_MONEY_QUICK_PLAY =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 ch\u01a1i nhanh!";
BkConstString.STR_SERVER_SHUTTING_DOWN =
  "M\u00e1y ch\u1ee7 s\u1ebd kh\u1edfi \u0111\u1ed9ng l\u1ea1i trong v\u00f2ng " +
  BkConstString.SPEC_CHAR +
  " ph\u00fat. Xin vui l\u00f2ng tho\u00e1t kh\u1ecfi tr\u00f2 ch\u01a1i v\u00e0 quay tr\u1edf l\u1ea1i sau \u00edt ph\u00fat.";
BkConstString.STR_WAIT_PLAYER_READY =
  "B\u1ea1n ph\u1ea3i ch\u1edd t\u1ea5t c\u1ea3 c\u00e1c ng\u01b0\u1eddi ch\u01a1i kh\u00e1c s\u1eb5n s\u00e0ng.";
BkConstString.STR_WAIT_PLAYER_JOIN_GAME =
  "B\u1ea1n ph\u1ea3i ch\u1edd ng\u01b0\u1eddi ch\u01a1i v\u00e0o b\u00e0n.";
BkConstString.STR_TABLE_FRIEND_EXIT =
  "Ng\u01b0\u1eddi ch\u01a1i \u0111\u00e3 tho\u00e1t kh\u1ecfi b\u00e0n.";
BkConstString.STR_TABLE_FRIEND_JOIN_ERR =
  "Kh\u00f4ng v\u00e0o \u0111\u01b0\u1ee3c b\u00e0n ch\u01a1i, xin h\u00e3y th\u1eed l\u1ea1i.";
BkConstString.STR_UNABLE_KICK =
  "C\u00f3 b\u1ea3o b\u1ed1i b\u1ea3o v\u1ec7, b\u1ea1n kh\u00f4ng th\u1ec3 \u0111u\u1ed5i!";
BkConstString.STR_PROTECTED_FROM_UNKICKABLE_WAND =
  "B\u1ea3o b\u1ed1i v\u1eeba b\u1ea3o v\u1ec7 b\u1ea1n kh\u00f4ng b\u1ecb \u0111u\u1ed5i.";
BkConstString.STR_GAME_COIN = isWebPlatform() ? "\ud83e\udde1" : "\u2665\ufe0f";
BkConstString.STR_JOIN_GAME_LOWER_COIN =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 v\u00e0o b\u00e0n ch\u01a1i.";
BkConstString.STR_FR_INVITE_LOWER_COIN =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 m\u1eddi b\u1ea1n ch\u01a1i.";
BkConstString.STR_FR_RES_LOWER_COIN =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 v\u00e0o ch\u01a1i c\u00f9ng b\u1ea1n. ";
BkConstString.STR_LOWER_COIN_GUIDE =
  "Xin h\u00e3y ch\u1edd \u0111\u1ec3 nh\u1eadn th\u00eam " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " h\u1eb1ng ng\u00e0y";
BkConstString.STR_STATUS_FRIEND_DEFAULT =
  "C\u00f3 l\u1ed7i khi m\u1eddi ch\u01a1i, xin h\u00e3y th\u1eed l\u1ea1i";
BkConstString.STR_STATUS_FRIEND_NOT_ONLINE =
  "Ng\u01b0\u1eddi ch\u01a1i \u0111\u00e3 tho\u00e1t kh\u1ecfi game";
BkConstString.STR_STATUS_FRIEND_WAITING =
  "\u0110\u00e3 g\u1eedi l\u1eddi m\u1eddi ch\u01a1i, xin h\u00e3y \u0111\u1ee3i ph\u1ea3n h\u1ed3i";
BkConstString.STR_STATUS_FRIEND_DENY_PLAY =
  "Ng\u01b0\u1eddi ch\u01a1i \u0111\u00e3 t\u1eeb ch\u1ed1i l\u1eddi m\u1eddi";
BkConstString.STR_STATUS_BEGIN_CREATE_TABLE =
  "\u0110ang t\u1ea1o b\u00e0n ch\u01a1i, xin h\u00e3y \u0111\u1ee3i ch\u00fat...";
BkConstString.STR_STATUS_CREATE_TABLE_ERROR =
  "C\u00f3 l\u1ed7i khi t\u1ea1o b\u00e0n ch\u01a1i, xin h\u00e3y th\u1eed l\u1ea1i";
BkConstString.STR_STATUS_FRIEND_JOIN_OTHER_TB =
  "Ng\u01b0\u1eddi ch\u01a1i \u0111ang \u1edf trong b\u00e0n ch\u01a1i kh\u00e1c";
BkConstString.STR_STATUS_FRIEND_NO_MONEY =
  "Ng\u01b0\u1eddi ch\u01a1i \u0111ang h\u1ebft " +
  BkConstString.STR_GAME_COIN.toLowerCase();
BkConstString.STR_INVITE_SUGGEST =
  "B\u1ea1n c\u00f3 mu\u1ed1n g\u00f3p \u00fd \u0111\u1ec3 C\u1edd Ziga ho\u00e0n thi\u1ec7n ch\u1ea5t l\u01b0\u1ee3ng s\u1ea3n ph\u1ea9m t\u1ed1t h\u01a1n kh\u00f4ng?";
BkConstString.STR_ADS_FULLSCREEN_OFF =
  "Video nh\u1eadn " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " mi\u1ec5n ph\u00ed cho b\u1ea1n t\u1ea1m th\u1eddi \u0111\u00e3 h\u1ebft. Xin b\u1ea1n vui l\u00f2ng quay l\u1ea1i sau " +
  BkConstString.SPEC_CHAR +
  " ph\u00fat.";
BkConstString.STR_ADS_FULLSCREEN_OFF_DAY =
  "Video nh\u1eadn " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " mi\u1ec5n ph\u00ed cho b\u1ea1n h\u00f4m nay \u0111\u00e3 h\u1ebft. Xin b\u1ea1n vui l\u00f2ng quay l\u1ea1i v\u00e0o ng\u00e0y mai.";
BkConstString.STR_CONFIRM_EXIT_APP =
  "C\u1ea3m \u01a1n b\u1ea1n \u0111\u00e3 tham gia C\u1edd Ziga.\n B\u1ea1n c\u00f3 mu\u1ed1n tho\u00e1t kh\u00f4ng?";
BkConstString.STR_TITLE_RATE_APP =
  "B\u1ea1n c\u00f3 y\u00eau th\u00edch C\u1edd Ziga kh\u00f4ng?";
BkConstString.STR_CONTENT_RATE_APP =
  "H\u00e3y b\u00ecnh ch\u1ecdn 5* cho C\u1edd Ziga \u0111\u1ec3 c\u1ed9ng \u0111\u1ed3ng C\u1edd Ziga ng\u00e0y c\u00e0ng ph\u00e1t tri\u1ec3n!";
BkConstString.STR_INVITE_VIEW_ADS =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i. B\u1ea1n c\u00f3 mu\u1ed1n xem qu\u1ea3ng c\u00e1o \u0111\u1ec3 nh\u1eadn " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " mi\u1ec5n ph\u00ed kh\u00f4ng?";
BkConstString.STR_NO_HEART_INVITE_FRIEND =
  "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i. H\u00e3y m\u1eddi b\u1ea1n b\u00e8 c\u00f9ng ch\u01a1i \u0111\u1ec3 nh\u1eadn " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " mi\u1ec5n ph\u00ed!";
BkConstString.STR_STORE_PAY_FAIL =
  'Thanh to\u00e1n qua Apple Store l\u1ed7i. B\u1ea1n vui l\u00f2ng \u0111\u1ec3 \u0111\u1ec3 l\u1eddi nh\u1eafn qua "Th\u01b0 g\u00f3p \u00fd" trong "C\u00e0i \u0111\u1eb7t" \u0111\u1ec3 \u0111\u01b0\u1ee3c tr\u1ee3 gi\u00fap!';
BkConstString.STR_PURCHASE_FAIL =
  "Kh\u00f4ng th\u1ec3 k\u1ebft n\u1ed1i \u0111\u1ebfn c\u1eeda h\u00e0ng \u1ee9ng d\u1ee5ng. Xin b\u1ea1n vui l\u00f2ng th\u1eed l\u1ea1i!";
BkConstString.STR_LOAD_ADS_ERROR =
  "Kh\u00f4ng t\u1ea3i \u0111\u01b0\u1ee3c qu\u1ea3ng c\u00e1o. Xin b\u1ea1n vui l\u00f2ng th\u1eed l\u1ea1i sau!";
BkConstString.STR_HINHANH_VOTHOIHAN = "V\u00f4 th\u1eddi h\u1ea1n";
BkConstString.STR_NO_AVATAR =
  "B\u1ea1n \u0111ang kh\u00f4ng s\u1edf h\u1eefu h\u00ecnh \u1ea3nh n\u00e0o. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ebfn c\u1eeda h\u00e0ng \u0111\u1ec3 mua.";
BkConstString.STR_NO_VATPHAM =
  "B\u1ea1n \u0111ang kh\u00f4ng s\u1edf h\u1eefu v\u1eadt ph\u1ea9m n\u00e0o. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ebfn c\u1eeda h\u00e0ng \u0111\u1ec3 mua.";
BkConstString.STR_NO_BAOBOI =
  "B\u1ea1n \u0111ang kh\u00f4ng s\u1edf h\u1eefu b\u1ea3o b\u1ed1i n\u00e0o. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ebfn c\u1eeda h\u00e0ng \u0111\u1ec3 mua.";
BkConstString.STR_MAX_BET_MONEY =
  "S\u1ed1 ti\u1ec1n t\u1ed1i \u0111a b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1eb7t c\u01b0\u1ee3c l\u00e0: ";
BkConstString.STR_MIN_BET_MONEY =
  "S\u1ed1 ti\u1ec1n t\u1ed1i thi\u1ec3u b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1eb7t c\u01b0\u1ee3c l\u00e0:";
BkConstString.STR_NHAP_MAT_KHAU =
  " B\u1ea1n vui l\u00f2ng nh\u1eadp m\u1eadt kh\u1ea9u \u0111\u1ec3 v\u00e0o b\u00e0n. ";
BkConstString.STR_PASSWORD_NOT_SECURE =
  "M\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n r\u1ea5t d\u1ec5 \u0111o\u00e1n.\nB\u1ea1n n\u00ean thay \u0111\u1ed5i m\u1eadt kh\u1ea9u khi \u0111\u0103ng nh\u1eadp th\u00e0nh c\u00f4ng.";
BkConstString.STR_AUTO_FIND_TABLE_FOUND =
  "Kh\u00f4ng t\u00ecm th\u1ea5y b\u00e0n ph\u00f9 h\u1ee3p! Xin b\u1ea1n vui l\u00f2ng th\u1eed l\u1ea1i!";
BkConstString.STR_SSR_EMPTY = "B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 seri.";
BkConstString.STR_MST_EMPTY =
  "B\u1ea1n ch\u01b0a nh\u1eadp m\u00e3 s\u1ed1 th\u1ebb.";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_USED = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_EXPIRED = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_LOCKED = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_NOT_ACTIVED = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_WRONG_FORMAT = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_UNAVAILABLE = "";
BkConstString.STR_NOTIFY_NAPTHE_FAIL_UNDEFINED_ERROR = "";
BkConstString.STR_JOIN_DURING_GAME =
  "V\u00e1n \u0111\u1ea5u \u0111ang di\u1ec5n ra. Xin b\u1ea1n vui l\u00f2ng ch\u1edd \u0111\u1ebfn h\u1ebft v\u00e1n \u0111\u1ec3 ch\u01a1i.";
BkConstString.STR_INVALID_DISCARD = "";
BkConstString.STR_INVALID_U = "";
BkConstString.STR_INVALID_SHOW_PHOM = "";
BkConstString.STR_INVALID_SHOW_PHOM_TAKEN = "";
BkConstString.STR_NOT_SELECT_CARD = "";
BkConstString.STR_INVALID_AN = "";
BkConstString.STR_INVALID_GUI = "";
BkConstString.STR_NOTIFY_NAPTHE_ACCOUNT_BANNED = "";
BkConstString.STR_INVITE_PAYMENT =
  "B\u1ea1n kh\u00f4ng c\u00f3 \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 ti\u1ebfp t\u1ee5c.\nB\u1ea1n c\u00f3 mu\u1ed1n n\u1ea1p ti\u1ec1n kh\u00f4ng?";
BkConstString.STR_INVITE_FACEBOOK_FRIEND =
  "B\u1ea1n kh\u00f4ng c\u00f3 \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 ti\u1ebfp t\u1ee5c.\nB\u1ea1n c\u1ea7n m\u1eddi t\u1ed1i thi\u1ec3u " +
  BkConstString.SPEC_CHAR +
  " b\u1ea1n tr\u00ean Facebook \u0111\u1ec3 c\u00f3 th\u1ec3 ti\u1ebfp v\u00e1n \u0111\u1ea5u.";
BkConstString.STR_LOAD_RES_GAME_ERR =
  "C\u00f3 l\u1ed7i khi t\u1ea3i game, xin h\u00e3y ki\u1ec3m tra k\u1ebft n\u1ed1i sau \u0111\u00f3 b\u1ea5m OK \u0111\u1ec3 th\u1eed l\u1ea1i.";
BkConstString.STR_NETWORK_LOST_CONNECT =
  "B\u1ea1n \u0111\u00e3 b\u1ecb m\u1ea5t k\u1ebft n\u1ed1i, ch\u1ecdn \u0111\u1ed3ng \u00fd \u0111\u1ec3 th\u1eed l\u1ea1i!";
BkConstString.STR_NETWORK_IDLE_TIME_OUT =
  "Ph\u1ea3i kh\u1edfi t\u1ea1o l\u1ea1i k\u1ebft n\u1ed1i do b\u1ea1n \u1edf trong ph\u00f2ng qu\u00e1 l\u00e2u m\u00e0 kh\u00f4ng ch\u01a1i ";
BkConstString.STR_NETWORK_LOST_CONNECT_LONG_TIME =
  "Ph\u1ea3i \u0111\u1ed3ng b\u1ed9 l\u1ea1i d\u1eef li\u1ec7u do b\u1ea1n b\u1ecb m\u1ea5t k\u1ebft n\u1ed1i qu\u00e1 l\u00e2u!";
BkConstString.STR_NETWORK_EXCEPTION =
  "Kh\u1edfi t\u1ea1o l\u1ea1i k\u1ebft n\u1ed1i do kh\u00f4ng \u0111\u1ed3ng b\u1ed9 \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u v\u1edbi server!";
BkConstString.STR_NETWORK_TERMINATED =
  "T\u00e0i kho\u1ea3n c\u1ee7a b\u1ea1n b\u1ecb \u0111\u0103ng nh\u1eadp t\u1eeb thi\u1ebft b\u1ecb kh\u00e1c!";
BkConstString.STR_INVITE_BUY_UNKICKABLE =
  "B\u1ea1n v\u1eeba b\u1ecb \u0111u\u1ed5i kh\u1ecfi b\u00e0n.\nB\u1ea1n c\u00f3 mu\u1ed1n mua b\u1ea3o b\u1ed1i ch\u1ed1ng \u0111u\u1ed5i \u0111\u1ec3 kh\u00f4ng th\u1ec3 b\u1ecb \u0111u\u1ed5i?";
BkConstString.STR_IS_KICKED =
  "B\u1ea1n v\u1eeba b\u1ecb \u0111u\u1ed5i kh\u1ecfi b\u00e0n.";
BkConstString.STR_PHONG_TO = "Ph\u00f3ng to";
BkConstString.STR_THU_NHO = "Thu nh\u1ecf";
BkConstString.STR_CHUP_HINH = "Ch\u1ee5p h\u00ecnh";
BkConstString.STR_MOI_BAN = "M\u1eddi ch\u01a1i";
BkConstString.STR_CAI_DAT = "C\u00e0i \u0111\u1eb7t";
BkConstString.STR_THOAT = "Tho\u00e1t";
BkConstString.STR_DOI_LUAT = "\u0110\u1ed5i lu\u1eadt";
BkConstString.STR_CHANGE_COIN = "Ti\u1ec1n c\u01b0\u1ee3c";
BkConstString.STR_SETTING_CUOC_TRONG_VAN =
  "B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i ti\u1ec1n c\u01b0\u1ee3c khi v\u00e1n ch\u01a1i \u0111ang di\u1ec5n ra.";
BkConstString.STR_SETTING_TIEN_KHONG_LA_CHU_BAN =
  "B\u1ea1n kh\u00f4ng ph\u1ea3i l\u00e0 ch\u1ee7 b\u00e0n. B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i m\u1ee9c ti\u1ec1n c\u01b0\u1ee3c.";
BkConstString.STR_SETTING_TIEN_KHONG_DU_TIEN =
  "B\u1ea1n kh\u00f4ng c\u00f2n \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i. B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i m\u1ee9c ti\u1ec1n c\u01b0\u1ee3c.";
BkConstString.STR_VALID_CHAR =
  "ch\u1ec9 bao g\u1ed3m c\u00e1c k\u00fd t\u1ef1 a -\x3e z, A -\x3e Z, 0 -\x3e 9 ho\u1eb7c _ ";
BkConstString.STR_MUST_INPUT_NAME =
  "B\u1ea1n ph\u1ea3i nh\u1eadp t\u00ean t\u00e0i kho\u1ea3n";
BkConstString.STR_INVALID_NAME =
  "T\u00ean t\u00e0i kho\u1ea3n kh\u00f4ng h\u1ee3p l\u1ec7.";
BkConstString.STR_VALID_LENGTH_NAME =
  "T\u00ean c\u00f3 \u0111\u1ed9 d\u00e0i t\u1eeb \u00edt nh\u1ea5t 6 \u0111\u1ebfn 20 k\u00fd t\u1ef1.";
BkConstString.STR_LOGIN_NAME = "T\u00ean ";
BkConstString.STR_LOGIN_FAILURE =
  "T\u00ean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u kh\u00f4ng \u0111\u00fang";
BkConstString.STR_REGISTER_EXCEED_MAX =
  "\u0110\u0103ng k\u00fd v\u01b0\u1ee3t qu\u00e1 gi\u1edbi h\u1ea1n ng\u00e0y h\u00f4m nay, xin h\u00e3y quay l\u1ea1i sau.";
BkConstString.STR_INVALID_PHONE_NUMBER =
  "S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\u00f4ng h\u1ee3p l\u1ec7.";
BkConstString.STR_PHONE_NUMBER_EMPTY =
  "B\u1ea1n ch\u01b0a nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i.";
BkConstString.STR_COUPON_CODE_EMPTY =
  "B\u1ea1n ch\u01b0a nh\u1eadp m\u00e3 x\u00e1c nh\u1eadn.";
BkConstString.STR_INVALID_COUPON_CODE =
  "M\u00e3 s\u1ed1 x\u00e1c nh\u1eadn kh\u00f4ng h\u1ee3p l\u1ec7.";
BkConstString.STR_ALREADY_REGISTERED_PHONE_NUMBER =
  "S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u00e3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 \u0111\u0103ng k\u00fd cho t\u00e0i kho\u1ea3n : " +
  BkConstString.SPEC_CHAR +
  "\nXin h\u00e3y nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\u00e1c";
BkConstString.STR_NOT_WEB_CLIENTID =
  "Kh\u00f4ng ph\u1ea3i \u0111\u0103ng nh\u1eadp t\u1eeb web.";
BkConstString.STR_CANNOT_GENERATE_TOKEN =
  "Hi\u1ec7n t\u1ea1i h\u1ec7 th\u1ed1ng b\u1ecb \u0111ang b\u1ecb l\u1ed7i, xin vui l\u00f2ng tr\u1edf l\u1ea1i \u0111\u0103ng k\u00fd s\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a b\u1ea1n sau.";
BkConstString.STR_ALREADY_UPDATE_PHONE_NUMBER =
  "S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u00e3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 \u0111\u0103ng k\u00fd r\u1ed3i";
BkConstString.STR_UPDATE_PHONE_NUMBER_SUCESS =
  "\u0110\u0103ng k\u00fd s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\u00e0nh c\u00f4ng";
BkConstString.STR_UPDATE_PHONE_NUMBER_MONEY =
  "\n     B\u1ea1n \u0111\u01b0\u1ee3c th\u01b0\u1edfng " +
  BkConstString.SPEC_CHAR +
  " " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  ".";
BkConstString.STR_NO_INFO = "Ch\u01b0a nh\u1eadp";
BkConstString.TABLE_FULL_WARN =
  "B\u00e0n \u0111\u1ea7y, vui l\u00f2ng ch\u1ecdn b\u00e0n kh\u00e1c.";
BkConstString.PLAYER_NOT_ENOUGH_MONEY =
  "B\u1ea1n kh\u00f4ng c\u00f3 \u0111\u1ee7 " +
  BkConstString.STR_GAME_COIN.toLowerCase() +
  " \u0111\u1ec3 ch\u01a1i trong b\u00e0n n\u00e0y." +
  BkConstString.STR_LOWER_COIN_GUIDE;
BkConstString.PASSWORD_IS_NOT_CORRECT =
  "M\u1eadt kh\u1ea9u kh\u00f4ng \u0111\u00fang.";
BkConstString.TABLE_JOIN_ROOM_DEFAULT =
  "V\u00e0o b\u00e0n kh\u00f4ng th\u00e0nh c\u00f4ng.";
BkConstString.ERR_AUTH_FACEBOOK =
  "T\u00e0i kho\u1ea3n facebook c\u1ee7a b\u1ea1n kh\u00f4ng h\u1ee3p l\u1ec7. Vui l\u00f2ng th\u1eed l\u1ea1i.";
BkConstString.ERR_LINK_FACEBOOK_LINKED =
  "Facebook c\u1ee7a b\u1ea1n \u0111\u00e3 li\u00ean k\u1ebft v\u1edbi t\u00ean \u0111\u0103ng nh\u1eadp kh\u00e1c r\u1ed3i.\n B\u1ea1n kh\u00f4ng th\u1ec3 li\u00ean k\u1ebft n\u1eefa";
BkConstString.ERR_LINK_PLAYER_LINKED =
  "T\u00e0i kho\u1ea3n \u0111\u00e3 \u0111\u01b0\u1ee3c li\u00ean k\u1ebft t\u1edbi m\u1ed9t t\u00e0i kho\u1ea3n Facebook kh\u00e1c!";
BkConstString.ERR_LINK_PLAYER_FACEBOOK =
  "T\u00ean \u0111\u0103ng nh\u1eadp " +
  BkConstString.SPEC_CHAR +
  " \u0111\u01b0\u1ee3c \u0111\u0103ng k\u00fd qua Facebook.\n B\u1ea1n kh\u00f4ng th\u1ec3 li\u00ean k\u1ebft \u0111\u01b0\u1ee3c v\u1edbi t\u00ean \u0111\u0103ng nh\u1eadp n\u00e0y";
BkConstString.ERR_LINK_INCORRECT_USERPASS =
  "T\u00ean \u0111\u0103ng nh\u1eadp ho\u1eb7c m\u1eadt kh\u1ea9u t\u00e0i kho\u1ea3n li\u00ean k\u1ebft kh\u00f4ng \u0111\u00fang.\n Vui l\u00f2ng nh\u1eadp l\u1ea1i!";
BkConstString.ERR_RENAME_NULL_OR_EMPTY =
  "B\u1ea1n ch\u01b0a nh\u1eadp t\u00ean \u0111\u0103ng nh\u1eadp";
BkConstString.ERR_RENAME_UNAVAILABLE =
  "B\u1ea1n kh\u00f4ng th\u1ec3 \u0111\u1ed5i t\u00ean \u0111\u01b0\u1ee3c n\u1eefa v\u00ec \u0111\u00e3 \u0111\u1ed5i t\u00ean r\u1ed3i!";
BkConstString.ERR_RENAME_PROHIBITED =
  "T\u00ean \u0111\u0103ng nh\u1eadp kh\u00f4ng \u0111\u01b0\u1ee3c ch\u1ee9a k\u00fd t\u1ef1 \u0111\u1eb7c bi\u1ec7t. Ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a ch\u1eef, s\u1ed1 ho\u1eb7c d\u1ea5u _";
BkConstString.ERR_RENAME_EXISTING =
  "T\u00ean b\u1ea1n ch\u1ecdn \u0111\u00e3 c\u00f3 ng\u01b0\u1eddi \u0111\u0103ng k\u00fd. H\u00e3y ch\u1ecdn m\u1ed9t t\u00ean kh\u00e1c.";
BkConstString.INVITE_FRIEND_ERROR =
  "Kh\u00f4ng th\u1ec3 m\u1eddi b\u1ea1n facebook, h\u00e3y \u0111\u1ea3m b\u1ea3o tr\u00ecnh duy\u1ec7t web c\u1ee7a b\u1ea1n kh\u00f4ng ch\u1eb7n m\u1edf popup.";
BkConstString.STR_WAIT_U_PLAYER_XUONG_CUOC =
  " \u0111\u00e3 \u00f9. H\u00e3y ch\u1edd nh\u00e0 n\u00e0y x\u01b0\u1edbng c\u01b0\u1edbc!";
BkConstString.STR_NHAI_VAO_GA = " Nh\u00e1i v\u00e0o g\u00e0 ";
BkConstString.STR_CHIU_VAO_GA = " Ch\u00edu v\u00e0o g\u00e0 ";
BkConstString.STR_VAO_GA = " V\u00e0o g\u00e0 ";
BkConstString.STR_NOT_SELECT_CARD_DISCARD =
  "C\u1ea7n ch\u1ecdn qu\u00e2n tr\u01b0\u1edbc khi \u0103n.";
BkConstString.STR_TAKE_CARD_NOT_VALID = "";
BkConstString.STR_NOT_SELECT_CARD_EAT =
  "C\u1ea7n ch\u1ecdn qu\u00e2n tr\u01b0\u1edbc khi \u0111\u00e1nh.";
BkConstString.STR_STRING_XUONG_TRONG =
  "B\u1ea1n kh\u00f4ng th\u1ec3 x\u01b0\u1edbng c\u01b0\u1edbc tr\u1ed1ng! xin vui l\u00f2ng nh\u1eadp c\u01b0\u1edbc \u00d9 c\u1ee7a b\u1ea1n";
BkConstString.STR_SETTING_GA_KHONG_LA_CHU_BAN =
  "B\u1ea1n kh\u00f4ng ph\u1ea3i l\u00e0 ch\u1ee7 b\u00e0n. B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i c\u00e0i \u0111\u1eb7t ch\u01a1i g\u00e0.";
BkConstString.STR_SETTING_TIEN_KHONG_LA_CHU_BAN =
  "B\u1ea1n kh\u00f4ng ph\u1ea3i l\u00e0 ch\u1ee7 b\u00e0n. B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i m\u1ee9c ti\u1ec1n c\u01b0\u1ee3c.";
BkConstString.STR_SETTING_LUAT_KHONG_LA_CHU_BAN =
  "B\u1ea1n kh\u00f4ng ph\u1ea3i l\u00e0 ch\u1ee7 b\u00e0n. B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i lu\u1eadt ch\u01a1i.";
BkConstString.STR_SETTING_GA_TRONG_VAN =
  "B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i c\u00e0i \u0111\u1eb7t ch\u01a1i g\u00e0 khi v\u00e1n ch\u01a1i \u0111ang di\u1ec5n ra.";
BkConstString.STR_SETTING_CUOC_TRONG_VAN =
  "B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i ti\u1ec1n c\u01b0\u1ee3c khi v\u00e1n ch\u01a1i \u0111ang di\u1ec5n ra.";
BkConstString.STR_SETTING_LUAT_TRONG_VAN =
  "B\u1ea1n kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i lu\u1eadt ch\u01a1i khi v\u00e1n ch\u01a1i \u0111ang di\u1ec5n ra.";
BkConstString.STR_SETTING_GA_TONG_GA_KHAC_0 =
  "B\u1ea1n kh\u00f4ng th\u1ec3 t\u1eaft ch\u01a1i g\u00e0 khi t\u1ed5ng g\u00e0 l\u1edbn h\u01a1n 0.";
BkConstString.STR_CHOOSE_MO_NOC = "";
BkConstString.STR_CHOOSE_BAI_CAI = "";
BkConstString.STR_CHO_BC_1 = "";
BkConstString.STR_CHO_BC_2 = "";
BkConstString.STR_CHO_BC_3 = "";
STR_WIN_FIRST_MATCH_IN_DAY_BONUS =
  "Th\u1eafng tr\u1eadn \u0111\u1ea7u ti\u00ean \n trong ng\u00e0y";
STR_WIN_3_DIFFERENT_MATCH_IN_DAY_BONUS =
  "Th\u1eafng 3 tr\u1eadn \n trong ng\u00e0y \n";
STR_WIN_ALL_DIFFERENT_MATCH_IN_DAY_BONUS =
  "Th\u1eafng t\u1ea5t c\u1ea3 c\u00e1c tr\u1eadn \n trong ng\u00e0y";
STR_PLAY_1RST_GAME_IN_DAY_BONUS =
  "Ch\u01a1i tr\u1eadn \u0111\u1ea7u ti\u00ean \n trong ng\u00e0y";
STR_PLAY_10TH_GAME_IN_DAY_BONUS = "Ch\u01a1i 10 tr\u1eadn \n trong ng\u00e0y";
STR_PLAY_100TH_GAME_IN_DAY_BONUS = "Ch\u01a1i 100 tr\u1eadn \n trong ng\u00e0y";
STR_PLAYER_NEW_LEVEL_BONUS = "L\u00ean c\u1ea5p";
BkConstString.getGameCoinStr = function () {
  return " " + BkConstString.STR_GAME_COIN.toLocaleLowerCase();
};
BkConstString.insertIntoStringWithParam = function (a, b) {
  for (var d = a, e = 0; e < b.length; e++)
    var f = b[e], d = d.slice(0, f.index) + f.str + d.slice(f.index);
  return d;
};
BkConstString.insertIntoStringWithListString = function (a, b) {
  for (var d = a, e = 0; e < b.length; ) {
    var f = d.indexOf(BkConstString.SPEC_CHAR);
    if (-1 == f) break;
    var g = b[e],
      d = d.slice(0, f) + g + d.slice(f + BkConstString.SPEC_CHAR.length);
    e++;
  }
  return d;
};
function BkLevelImage() {}
BkLevelImage.MAX_FARMER = 5e4;
BkLevelImage.MAX_RICH_FARMER = 10 * BkLevelImage.MAX_FARMER;
BkLevelImage.MAX_LAND_LORD = 100 * BkLevelImage.MAX_FARMER;
BkLevelImage.MAX_GREAT_ARISTOCRATIC_FAMILY = 1e3 * BkLevelImage.MAX_FARMER;
BkLevelImage.MAX_TAP_SU = 1200;
BkLevelImage.MAX_PHONG_TRAO = BkLevelImage.MAX_TAP_SU + 400;
BkLevelImage.MAX_KY_THU = BkLevelImage.MAX_PHONG_TRAO + 400;
BkLevelImage.MAX_KY_SY = BkLevelImage.MAX_KY_THU + 400;
BkLevelImage.MAX_KY_VUONG = BkLevelImage.MAX_KY_SY + 400;
BkLevelImage.getStringFromMoney = function (a) {
  return a < BkLevelImage.MAX_FARMER
    ? "T\u00e1 \u0111i\u1ec1n"
    : a < BkLevelImage.MAX_RICH_FARMER
    ? "Ph\u00fa n\u00f4ng"
    : a < BkLevelImage.MAX_LAND_LORD
    ? "\u0110\u1ecba ch\u1ee7"
    : a < BkLevelImage.MAX_GREAT_ARISTOCRATIC_FAMILY
    ? "\u0110\u1ea1i gia"
    : "V.I.P";
};
BkLevelImage.getStringFromElo = function (a) {
  return a < BkLevelImage.MAX_TAP_SU
    ? "T\u1eadp s\u1ef1"
    : a < BkLevelImage.MAX_PHONG_TRAO
    ? "Phong tr\u00e0o"
    : a < BkLevelImage.MAX_KY_THU
    ? "K\u1ef3 th\u1ee7"
    : a < BkLevelImage.MAX_KY_SY
    ? "K\u1ef3 s\u1ef9"
    : "K\u1ef3 v\u01b0\u01a1ng";
};
BkLevelImage.createLevelStarSprite = function (a) {
  var b = new BkSprite();
  Math.min(Math.floor(a / TITLED_STAR_MAX_NUM), 9);
  for (a = 0; a < TITLED_STAR_MAX_NUM; a++);
  return b;
};
BkLevelImage.createLevelStarHorizontalSprite = function (a) {
  var b = new BkSprite();
  Math.min(Math.floor(a / TITLED_STAR_MAX_NUM), 9);
  for (a = 0; a < TITLED_STAR_MAX_NUM; a++);
  return b;
};
var BkTime = {
  GetCurrentTime: function () {
    return new Date().getTime();
  },
  convertToLocalTime24h: function (a) {
    var b = new Date(a),
      d = b.getDate();
    a = "";
    a = 10 > d ? "0" + d : d.toString();
    var d = b.getFullYear(),
      e = "01 02 03 04 05 06 07 08 09 10 11 12".split(" ")[b.getMonth()],
      f = b.getHours(),
      b = b.getMinutes(),
      g = "",
      h = "",
      g = 10 > f ? "0" + f : f.toString(),
      h = 10 > b ? "0" + b : b.toString();
    return a + "/" + e + "/" + d + " " + g + ":" + h;
  },
  secondsToTimecode: function (a) {
    var b = Math.floor(a / 60),
      d = b % 60,
      e = Math.floor(b / 60);
    a = Math.floor(a % 60);
    var b = Math.floor(e / 24),
      e = e % 24,
      f = "";
    return (f =
      0 < b
        ? 0 < e
          ? b + " ng\u00e0y " + e + " gi\u1edd tr\u01b0\u1edbc"
          : b + " ng\u00e0y tr\u01b0\u1edbc"
        : 0 < e
        ? 0 < d
          ? e + " gi\u1edd " + d + " ph\u00fat tr\u01b0\u1edbc"
          : e + " gi\u1edd tr\u01b0\u1edbc"
        : 0 < d
        ? d + " ph\u00fat tr\u01b0\u1edbc"
        : a + " gi\u00e2y tr\u01b0\u1edbc");
  },
  parseToTimestamp: function (a, b, d) {
    return new Date(b + "/" + a + "/" + d).getTime();
  },
  formatSeconds: function (a) {
    var b = new Date(1970, 0, 1);
    b.setSeconds(a);
    b = b.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1");
    3600 > a && (b = b.substring(3));
    return b;
  },
};
var staticPathNativeInterface = "org/cocos2dx/javascript/NativeInterfaceJava",
  staticPathNativeInterfaceIOS = "NativeInterfaceObjectiveC",
  NativeInterface = {
    isReceiveMemoryWarning: !1,
    isRewardedVideo: !1,
    fbLoginState: 0,
    numberSenedFBFriend: 0,
    isCacheAdmobInterstitial: !1,
    isCacheAdmobRewardedVideo: !1,
    isCacheMPInterstitial: !1,
    isCacheMPRewardedVideo: !1,
    isCacheFBInterstitial: !1,
    isCacheFBRewardedVideo: !1,
    isCacheHEPCMInterStitial: !1,
    isCacheHEPCMRewardedVideo: !1,
    loadImageFromUrl: function (a, b) {
      logMessage("urlImg " + a);
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "loadImageFromUrl",
            "(Ljava/lang/String;Ljava/lang/String;)I",
            a,
            b
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "loadImageFromUrl:andImgName:",
            a,
            b
          );
    },
    isNative: function () {
      return cc.sys.isNative;
    },
    getClientID: function () {
      logMessage("getClientID js code");
      if (isWebPlatform()) return "dfClientID";
      if (isFBInstantGame()) return "facebookID";
      this.getClientNetworkVersion();
      this.getClientAppVersion();
      return cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "getClientID",
            "()Ljava/lang/String;"
          )
        : cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "getClientID"
          )
        : "dfClientID";
    },
    showAdmobBaner: function () {
      isFBInstantGame() ||
        (this.destroyAds(),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showAdmobBaner",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showAdmobBaner"
            ));
    },
    showRewardedVideoAd: function () {
      logMessage("showRewardedVideo admob js ");
      isFBInstantGame() ||
        (this.isCacheAdmobRewardedVideo &&
          (logMessage(
            "isCacheAdmobRewardedVideo -\x3e reset state ! cache -\x3e auto play or show mess load fail"
          ),
          (this.isCacheAdmobRewardedVideo = !1)),
        (this.isRewardedVideo = !1),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showRewardedVideoAd",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showRewardedVideoAd"
            ));
    },
    showInterstitialAd: function (a) {
      isFBInstantGame() ||
        (void 0 == a && (a = 1),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showInterstitialAd",
              "(I)V",
              a
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showInterstitialAd"
            ));
    },
    showFbAdBaner: function () {
      isFBInstantGame() ||
        (this.destroyAds(),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showFbAdBaner",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showFBAdBanner"
            ));
    },
    showFBInterstitialAd: function () {
      isFBInstantGame() ||
        (cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showFBInterstitialAd",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showFBInterstitialAd"
            ));
    },
    autoDestroyBanner: function (a) {
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "autoDestroyBanner",
            "(Ljava/lang/String;)V",
            "" + a
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "autoDestroyBanner:",
            a
          );
    },
    destroyAds: function () {
      isFBInstantGame() ||
        (cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "destroyAds",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "destroyAds"
            ));
    },
    isFinishLoadCache: function (a) {
      var b = Util.getAdsPartner(a);
      a = Util.getAdsType(a);
      logMessage("isFinishLoadCache -\x3e partnerID: " + b + " typeAds: " + a);
      if (b === ads.PARTNER_GOOGGLE) {
        if (
          a === ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
          this.isCacheAdmobRewardedVideo
        )
          return (
            logMessage("done load cache start game GG video"),
            (this.isCacheAdmobRewardedVideo = !1),
            !0
          );
        if (
          a === ads.ADS_TYPE_INTERSTITIAL_ADS &&
          this.isCacheAdmobInterstitial
        )
          return (
            logMessage("done load cache start game GG intersitial"),
            (this.isCacheAdmobInterstitial = !1),
            !0
          );
      }
      if (b === ads.PARTNER_TWITTER) {
        if (
          a === ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
          this.isCacheMPRewardedVideo
        )
          return (
            logMessage("done load cache start game MP video"),
            (this.isCacheMPRewardedVideo = !1),
            !0
          );
        if (a === ads.ADS_TYPE_INTERSTITIAL_ADS && this.isCacheMPInterstitial)
          return (
            logMessage("done load cache start game MP intersitial"),
            (this.isCacheMPInterstitial = !1),
            !0
          );
      }
      if (b === ads.PARTNER_FACEBOOK) {
        if (a === ads.ADS_TYPE_INTERSTITIAL_ADS && this.isCacheFBInterstitial)
          return (
            logMessage("done load cache start game FB intersitial"),
            (this.isCacheFBInterstitial = !1),
            !0
          );
        if (
          a === ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
          this.isCacheFBRewardedVideo
        )
          return (
            logMessage("done load cache start game FB video"),
            (this.isCacheFBRewardedVideo = !1),
            !0
          );
      }
      return !1;
    },
    setStateCacheAutoLoadAds: function () {
      this.isCacheFBInterstitial = this.isCacheMPRewardedVideo = this.isCacheMPInterstitial = this.isCacheAdmobRewardedVideo = this.isCacheAdmobInterstitial = !0;
    },
    loadAllAds: function () {
      isFBInstantGame() ||
        isWebPlatform() ||
        (this.setStateCacheAutoLoadAds(),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "loadAllAds",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "loadAllAds"
            ));
    },
    onRewardedVideoAdFinish: function () {
      isFBInstantGame() ||
        ((this.isRewardedVideo = !0),
        logMessage("onRewardedVideoAdFinish: -\x3e rewarded user"),
        this.sendPacketFullScreenadsRewardRequest(2));
    },
    cacheNextRewardedVideoAd: function (a) {
      logMessage("cacheNextRewardedVideoAd: " + a);
      if (0 > a) logMessage("wrong adsPartner");
      else {
        BkGlobal.crVideoRewardedPartner = a;
        var b = "";
        a == ads.PARTNER_GOOGGLE
          ? ((b = "loadRewardedVideoAd"), (this.isCacheAdmobRewardedVideo = !0))
          : a == ads.PARTNER_FACEBOOK
          ? ((b = "loadFBRewardedVideoAd"), (this.isCacheFBRewardedVideo = !0))
          : a == ads.PARTNER_TWITTER &&
            ((b = "loadMPRewardedVideoAd"), (this.isCacheMPRewardedVideo = !0));
        b = this.getNameFunctionloadFullScreenAdsAndroid(b);
        this.callNativeVoidFunction(b);
      }
    },
    onRewardedVideoAdClose: function () {
      this.onFullScreenAdsClose(ads.ADS_TYPE_REWARDED_VIDEO_ADS);
      this.cacheNextRewardedVideoAdHEPCM(BkGlobal.nextVideoRewardedPartner, !0);
      Util.removeAnim();
      isFBInstantGame() ||
        this.isRewardedVideo ||
        (logMessage("onRewardedVideoAdClose: "),
        NativeInterface.logFirebaseEvent(EVENT_NAME.VIEW_VIDEO_NOT_COMPLETE),
        BkConnectionManager.sendPacketAdsState(
          ads.PARTNER_GOOGGLE,
          ads.ADS_TYPE_REWARDED_VIDEO_ADS,
          ads.STATE_USER_VIEW_ADS_NOT_COMPLELTE
        ),
        BkGlobal.isPushFullScreenAds && 0 < BkGlobal.UserInfo.getMoney()
          ? logMessage(
              "con tien neu xem het cung k nhan dc thuong -\x3e k hien thong bao"
            )
          : showPopupMessageWith(
              "B\u1ea1n vui l\u00f2ng xem h\u1ebft video \u0111\u1ec3 \u0111\u01b0\u1ee3c nh\u1eadn th\u01b0\u1edfng! Xin c\u1ea3m \u01a1n!",
              "",
              null,
              null,
              null
            ));
    },
    sendPacketFullScreenadsRewardRequest: function (a) {
      logMessage("sendPacketFullScreenadsRewardRequest");
      Util.removeAnim();
      if (BkGlobal.isPushFullScreenAds) {
        var b = BkGlobal.UserInfo.getMoney();
        logMessage(
          "BkGlobal.isPushFullScreenAds: " +
            BkGlobal.isPushFullScreenAds +
            " myMoney: " +
            b
        );
        if (0 < b) return;
      }
      b = new BkPacket();
      b.getFullScreenAdsRewardRequest(a);
      BkConnectionManager.send(b);
    },
    getNameFunctionloadFullScreenAdsAndroid: function (a) {
      cc.sys.os == cc.sys.OS_ANDROID && (a += "onUIThread");
      return a;
    },
    cacheNextInterstitialAdHEPCM: function (a, b) {
      this.isCacheHEPCMInterStitial = b;
      this.setAdsIDWithData();
      this.cacheNextInterstitialAd(a);
    },
    cacheNextRewardedVideoAdHEPCM: function (a, b) {
      this.isCacheHEPCMRewardedVideo = b;
      this.setAdsIDWithData();
      this.cacheNextRewardedVideoAd(a);
    },
    cacheNextInterstitialAd: function (a) {
      logMessage("cacheNextInterstitialAd: " + a);
      if (0 > a) logMessage("wrong adsPartner");
      else {
        BkGlobal.crInterStitialPartner = a;
        var b = "";
        a == ads.PARTNER_GOOGGLE
          ? ((b = "loadInterstitialAd"), (this.isCacheAdmobInterstitial = !0))
          : a == ads.PARTNER_FACEBOOK
          ? ((b = "loadFBInterstitialAd"), (this.isCacheFBInterstitial = !0))
          : a == ads.PARTNER_TWITTER &&
            ((b = "loadMPInterstitialAd"), (this.isCacheMPInterstitial = !0));
        b = this.getNameFunctionloadFullScreenAdsAndroid(b);
        this.callNativeVoidFunction(b);
      }
    },
    onInterstitialAdClose: function () {
      logMessage("onInterstitialAdClose:");
      this.onFullScreenAdsClose(ads.ADS_TYPE_INTERSTITIAL_ADS);
      this.cacheNextInterstitialAdHEPCM(BkGlobal.nextInterStitialPartner, !0);
      Util.removeAnim();
      BkConnectionManager.sendPacketAdsState(
        BkGlobal.lastFullScreenPartnerType,
        BkGlobal.lastFullScreenAdsType,
        ads.STATE_USER_VIEW_COMPLELTE
      );
    },
    onFullScreenAdsClose: function (a) {
      logMessage(
        "onFullScreenAdsClose: " + a + " -\x3e resume nhac nen if need"
      );
      resumeNhacNenSound();
    },
    onAdsdidLoadSuccess: function (a) {
      logMessage("onAdsdidLoadSuccess " + a);
      this.isFinishLoadCache(a)
        ? (logMessage("finish load cache start game-\x3e return"),
          (a = Util.getAdsType(a)),
          a == ads.ADS_TYPE_INTERSTITIAL_ADS &&
            this.isCacheHEPCMInterStitial &&
            (this.isCacheHEPCMInterStitial = !1),
          a == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
            this.isCacheHEPCMRewardedVideo &&
            (this.isCacheHEPCMRewardedVideo = !1))
        : Util.logFirebaseEventLoadAdsSucc(a);
    },
    cacheNormalEPCM: function (a, b) {
      if (a == ads.ADS_TYPE_INTERSTITIAL_ADS) {
        if (this.isCacheHEPCMInterStitial)
          return (
            logMessage(
              "load fail hEPCM InterStitial -\x3e reload normal InterStitial"
            ),
            this.cacheNextInterstitialAdHEPCM(b, !1),
            !0
          );
        logMessage("load fail normal InterStitial -\x3e return");
      } else if (a == ads.ADS_TYPE_REWARDED_VIDEO_ADS) {
        if (this.isCacheHEPCMRewardedVideo)
          return (
            logMessage(
              "load fail hEPCM RewardedVideo -\x3e reload normal RewardedVideo"
            ),
            this.cacheNextRewardedVideoAdHEPCM(b, !1),
            !0
          );
        logMessage("load fail normal RewardedVideo -\x3e return");
      }
      return !1;
    },
    onAdsdidFailToLoad: function (a, b) {
      logMessage("onAdsdidFailToLoad JS with type: " + a + " - errcode: " + b);
      var d = Util.getAdsPartner(a),
        e = Util.getAdsType(a);
      if (this.isFinishLoadCache(a))
        logMessage(
          "finish load cache start game typeAds: " + e + " - partnerID: " + d
        ),
          this.cacheNormalEPCM(e, d);
      else {
        var f = this.cacheNormalEPCM(e, d);
        Util.removeAnim();
        f ||
          (logMessage("fail normal EPCM -\x3e reset crCachePartner!"),
          e == ads.ADS_TYPE_INTERSTITIAL_ADS
            ? (BkGlobal.crInterStitialPartner = -1)
            : e == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
              (BkGlobal.crVideoRewardedPartner = -1));
        logMessage("partnerID: " + d + " typeAds: " + e);
        BkConnectionManager.sendPacketAdsState(d, e, ads.STATE_LOAD_ADS_FAIL);
        Util.logFirebaseEventLoadAdsFail(a, b);
        e != ads.ADS_TYPE_BANNER_ADS &&
          (resumeNhacNenSound(),
          BkGlobal.isPushFullScreenAds ||
            showPopupMessageWith(BkConstString.STR_LOAD_ADS_ERROR, ""));
      }
    },
    onLeaveApplication: function () {
      logMessage("onLeaveApplication");
    },
    doLoginFB: function (a) {
      isWebPlatform()
        ? logMessage("isWebPlatform -\x3e implement loginFB for other platform")
        : (Util.showAnim(),
          (this.fbLoginState = a = void 0 === a ? FB_CS.STATE_FB_LINK_USER : a),
          logMessage("this.fbLoginState: " + this.fbLoginState),
          cc.sys.os == cc.sys.OS_ANDROID
            ? jsb.reflection.callStaticMethod(
                staticPathNativeInterface,
                "doLoginFB",
                "()V"
              )
            : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
              jsb.reflection.callStaticMethod(
                staticPathNativeInterfaceIOS,
                "doLoginFB"
              ));
    },
    onLoginFBSuccess: function (a, b) {
      logMessage("onLoginFBSuccess: " + a + " token: " + b);
      Util.removeAnim();
      BkGlobal.fbUserID = a;
      BkGlobal.fbUserToken = b;
      if (this.fbLoginState === FB_CS.STATE_FB_LINK_USER) {
        logMessage("FB_CS.STATE_FB_LINK_USER -\x3e link user");
        var d = new BkPacket();
        d.CreatePacketLinkFacebook(a, b);
        BkConnectionManager.send(d);
      } else
        this.fbLoginState === FB_CS.STATE_FB_INVITE &&
          (logMessage("FB_CS.STATE_FB_INVITE: -\x3e show invite"),
          this.showInviteGameRequestFBPopup());
    },
    showInviteGameRequestFBPopup: function () {
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "showInviteGameRequestFBPopup",
            "()V"
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "showInviteGameRequestFBPopup"
          );
    },
    onSendedFBFriends: function (a, b) {
      logMessage("numSended: " + a + " listSended: " + b);
      this.numberSenedFBFriend += a;
      if (this.numberSenedFBFriend < SETTING.MIN_FRIEND_FB_REWARDED)
        showToastMessage(
          "B\u1ea1n c\u1ea7n m\u1eddi \u0111\u1ee7 " +
            SETTING.MIN_FRIEND_FB_REWARDED +
            " ng\u01b0\u1eddi \u0111\u1ec3 \u0111\u01b0\u1ee3c nh\u1eadn th\u01b0\u1edfng!",
          0.5 * cc.winSize.width,
          0.3 * cc.winSize.height
        );
      else {
        this.numberSenedFBFriend = 0;
        logMessage(
          "send so ng da gui va list ng gui len server de nhan thuong"
        );
        for (var d = [], d = b.split(";"), e = 0; e < d.length; e++)
          logMessage(e + " - " + d[e]);
        logMessage("send packet nhan thuong invite friend");
        e = BkLogicManager.getLogic();
        null != e &&
          (NativeInterface.logFirebaseEvent(EVENT_NAME.INVITE_FRIEND),
          e.sendInvitedListToServer(BkGlobal.fbUserID, d, e.updateprivateKey));
      }
    },
    hasGrantedUserFriend: function () {
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "hasGrantedUserFriend",
          "()I"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "hasGrantedUserFriend"
        );
      logMessage("hasGrantedUserFriend: " + a);
      return a;
    },
    doLoginFBRequestUserFriend: function () {
      this.hasGrantedUserFriend()
        ? logMessage("hasGrantedUserFriend: -\x3e update UI ban be")
        : (Util.showAnim(),
          cc.sys.os == cc.sys.OS_ANDROID
            ? jsb.reflection.callStaticMethod(
                staticPathNativeInterface,
                "doLoginFBRequestUserFriend",
                "()V"
              )
            : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
              jsb.reflection.callStaticMethod(
                staticPathNativeInterfaceIOS,
                "doLoginFBRequestUserFriend"
              ));
    },
    resetAcessTokenFB: function () {
      cc.sys.os != cc.sys.OS_ANDROID &&
        ((cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "resetAcessTokenFB"
          ));
    },
    onLoginFBRequestUserFriendSuccess: function (a, b) {
      logMessage("onLoginFBRequestUserFriendSuccess: " + a + " - " + b);
      BkGlobal.fbUserID = a;
      BkGlobal.fbUserToken = b;
      if (BkGlobal.isConnectedFB)
        this.hasGrantedUserFriend() &&
          ((d = new BkPacket()),
          d.CreatePacketSyncFbFriends(a),
          BkConnectionManager.send(d));
      else {
        var d = new BkPacket();
        d.CreatePacketLinkFacebook(a, b);
        BkConnectionManager.send(d);
      }
    },
    testFunc: function () {
      logMessage("testFunc");
      return "testFunc";
    },
    logFirebaseEvent: function (a, b) {
      cc.sys.os == cc.sys.OS_ANDROID
        ? logMessage("off logFirebaseEvent android")
        : this.isNative() &&
          ((b = void 0 === b ? Util.createBasicJsonDataLogEventFirebase() : b),
          logMessage("eventName " + a + " jsonData: " + b),
          cc.sys.os == cc.sys.OS_ANDROID
            ? jsb.reflection.callStaticMethod(
                staticPathNativeInterface,
                "logFirebaseEvent",
                "(Ljava/lang/String;Ljava/lang/String;)V",
                a,
                b
              )
            : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
              jsb.reflection.callStaticMethod(
                staticPathNativeInterfaceIOS,
                "logFirebaseEventWithName:andData:",
                a,
                b
              ));
    },
    getClientNetworkVersion: function () {
      if (!this.isNative()) return 0;
      logMessage("c.NETWORK_VERSION: " + c.NETWORK_VERSION);
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "setClientNetworkVersion",
            "(Ljava/lang/String;)V",
            "" + c.NETWORK_VERSION
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "setClientNetworkVersion:",
            "" + c.NETWORK_VERSION
          );
    },
    getClientAppVersion: function () {
      c.CLIENT_APP_VERSION = this.getVersionName();
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "setClientAppVersion",
            "(Ljava/lang/String;)V",
            "" + c.CLIENT_APP_VERSION
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "setClientAppVersion:",
            c.CLIENT_APP_VERSION
          );
    },
    getJsonAdsIDData: function () {
      var a = {},
        b = Util.getGGAdmobRewardedVideoAdsID(),
        d = Util.getGGAdmobInterStitialAdsID(),
        e = Util.getFBRewardedVideoAdsID(),
        f = Util.getFBInterStitialAdsID(),
        g = Util.getMPRewardedVideoAdsID(),
        h = Util.getMPInterStitialAdsID();
      this.isCacheHEPCMRewardedVideo &&
        ((b = Util.getGGAdmobRewardedVideoAdsIDHEPCM()),
        (e = Util.getFBRewardedVideoAdsIDHEPCM()),
        (g = Util.getMPRewardedVideoAdsIDHEPCM()));
      this.isCacheHEPCMInterStitial &&
        ((d = Util.getGGAdmobInterStitialAdsIDHEPCM()),
        (f = Util.getFBInterStitialAdsIDHEPCM()),
        (h = Util.getMPInterStitialAdsIDHEPCM()));
      a.ggAppAdsID = Util.getGGAdmobAppID();
      a.ggBannerAdsID = Util.getGGAdmobBannerAdsID();
      a.ggAdsRewardedVideoID = b;
      a.ggInterstitialAdsID = d;
      a.fbBannerAdsID = Util.getFBBannerAdsID();
      a.fbRewardedVideoID = e;
      a.fbInterstitialAdsID = f;
      a.mpBannerAdsID = Util.getMPBannerAdsID();
      a.mpRewardedVideoID = g;
      a.mpInterstitialAdsID = h;
      return JSON.stringify(a);
    },
    setAdsIDWithData: function () {
      if (!isWebPlatform() && !isFBInstantGame()) {
        var a = this.getJsonAdsIDData();
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "setAdsIDWithData",
              "(Ljava/lang/String;)V",
              a
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "setAdsIDWithData:",
              a
            );
      }
    },
    sendMailToSystem: function () {
      var a = SETTING.EMAIL_SUPPORT;
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "sendMailToSystem",
            "(Ljava/lang/String;)V",
            a
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "sendMailToSystem:",
            a
          );
    },
    shareNative: function () {
      this.isNative() &&
        (cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "shareNative",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "shareNative"
            ));
    },
    openURL: function (a) {
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "openURL",
            "(Ljava/lang/String;)V",
            a
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "openURL:",
            a
          );
    },
    openURLMessenger: function (a) {
      cc.sys.os == cc.sys.OS_ANDROID &&
        jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "openURLMessenger",
          "(Ljava/lang/String;)V",
          a
        );
    },
    didBecomeActive: function () {
      logMessage("didBecomeActive JS");
      if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX) {
        var a = BkTime.GetCurrentTime(),
          b = Util.getTimedidEnterBackground();
        logMessage(
          "crTime: " +
            a +
            " - timedidEnterBackground: " +
            b +
            " - detaTime: " +
            (a - b)
        );
        Util.setTimedidEnterBackground(0);
        this.isReceiveMemoryWarning
          ? (logMessage("this.isReceiveMemoryWarning -\x3e restart game"),
            (this.isReceiveMemoryWarning = !1),
            cc.spriteFrameCache.removeSpriteFrames(),
            Util.setIsRestarting(1),
            cc.game.restart())
          : 0 < b &&
            3e5 < a - b &&
            (logMessage(
              "ios didBecomeActive after: 5 minute -\x3e restart game."
            ),
            Util.setIsRestarting(1),
            cc.game.restart());
      }
    },
    didEnterBackground: function () {
      logMessage("didEnterBackground JS");
      Util.setTimedidEnterBackground();
    },
    vibratePhone: function () {
      logMessage("vibratePhone");
      this.isNative() &&
        (Util.getVibrateSetting()
          ? cc.sys.os == cc.sys.OS_ANDROID
            ? jsb.reflection.callStaticMethod(
                staticPathNativeInterface,
                "vibratePhone",
                "()V"
              )
            : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
              jsb.reflection.callStaticMethod(
                staticPathNativeInterfaceIOS,
                "vibratePhone"
              )
          : logMessage("!isVibrateOn -\x3e return"));
    },
    isIphoneX: function () {
      return isFBInstantGame()
        ? !1
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          1 !=
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "isIphoneX"
            )
        ? !1
        : !0;
    },
    getCPID: function () {
      if (!this.isNative()) return -1;
      var a = -1;
      cc.sys.os == cc.sys.OS_ANDROID &&
        (a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "getCPID",
          "()I"
        ));
      logMessage("getCPID: " + a);
      return a;
    },
    networkAvaiable: function () {
      if (!this.isNative()) return !0;
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "networkAvaiable",
          "()I"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "networkAvaiable"
        );
      logMessage("networkAvaiable: " + a);
      return a;
    },
    hideSlashScreenAndroid: function () {
      cc.sys.os == cc.sys.OS_ANDROID &&
        jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "dismissLoader",
          "()V"
        );
    },
    reshowCrBanner: function (a) {
      1 == a
        ? NativeInterface.showAdmobBaner()
        : 2 == a
        ? NativeInterface.showFbAdBaner()
        : 3 == a && NativeInterface.showMPAdBanner();
    },
    getCurrentBannerAdsPartner: function () {
      var a = -1;
      NativeInterface.isShowGGBanner()
        ? (a = ads.PARTNER_GOOGGLE)
        : NativeInterface.isShowFBBanner()
        ? (a = ads.PARTNER_FACEBOOK)
        : NativeInterface.isShowMPBanner() && (a = ads.PARTNER_TWITTER);
      return a;
    },
    getCrBannerShow: function () {
      var a = 0;
      NativeInterface.isShowGGBanner()
        ? (a = 1)
        : NativeInterface.isShowFBBanner()
        ? (a = 2)
        : NativeInterface.isShowMPBanner() && (a = 3);
      return a;
    },
    isShowMPBanner: function () {
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "isShowMPBanner",
          "()I"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "isShowMPBanner"
        );
      logMessage("isShowMPBanner: " + a);
      return a;
    },
    isShowFBBanner: function () {
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "isShowFBBanner",
          "()I"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "isShowFBBanner"
        );
      logMessage("isShowFBBanner: " + a);
      return a;
    },
    isShowGGBanner: function () {
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "isShowGGBanner",
          "()I"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "isShowGGBanner"
        );
      logMessage("isShowGGBanner: " + a);
      return a;
    },
    doRateApp: function (a) {
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "doRateApp",
            "(Ljava/lang/String;)V",
            a
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "doRateApp:",
            a
          );
    },
    onAndroidPurchaseSuccess: function (a, b, d) {
      logMessage(
        "onAndroidPurchaseSuccess: signature: " + a + " - packageName: " + d
      );
      logMessage("purchaseInfo: " + b);
      Util.removeAnim();
      var e = new BkPacket();
      e.createVertifyTransactionGGIAP("android", a, b, d);
      BkConnectionManager.send(e);
    },
    onReceiptDataFromStore: function (a) {
      logMessage("onReceiptDataFromStore: " + a);
      Util.removeAnim();
      var b = new BkPacket();
      b.createVerifyTransactionReceipt(a);
      BkConnectionManager.send(b);
    },
    onPurchasedFail: function (a) {
      a = void 0 === a ? 0 : a;
      logMessage("onPurchasedFail: " + a);
      Util.removeAnim();
      a || showPopupMessageWith(BkConstString.STR_PURCHASE_FAIL);
    },
    getItemStringWithItemID: function (a) {
      if (cc.sys.os == cc.sys.OS_ANDROID)
        switch (a) {
          case 0:
            return "ziga.cotuong.coup.1usd";
          case 1:
            return "ziga.cotuong.coup.5usd";
          case 2:
            return "ziga.cotuong.coup.10usd";
          case 3:
            return "ziga.cotuong.coup.20usd";
        }
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        switch (a) {
          case 0:
            return "com.zigavn.ctcu.ios1.1USD";
          case 1:
            return "com.zigavn.ctcu.ios1.5USD";
          case 2:
            return "com.zigavn.ctcu.ios1.10USD";
          case 3:
            return "com.zigavn.ctcu.ios1.20USD";
        }
    },
    onBuyItem: function (a) {
      Util.showAnim();
      var b = this.getItemStringWithItemID(a);
      logMessage("onBuyItem: " + a + " - " + b);
      cc.sys.os == cc.sys.OS_ANDROID
        ? jsb.reflection.callStaticMethod(
            staticPathNativeInterface,
            "onBuyItem",
            "(Ljava/lang/String;)V",
            b
          )
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          jsb.reflection.callStaticMethod(
            staticPathNativeInterfaceIOS,
            "onBuyItem:",
            b
          );
    },
    destroyBillingProcessor: function () {
      cc.sys.os == cc.sys.OS_ANDROID &&
        jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "destroyBillingProcessor",
          "()V"
        );
    },
    showhideAnim: function (a) {
      a = void 0 === a ? 0 : a;
      logMessage("showhideAnim: " + a);
      a ? Util.showAnim() : Util.removeAnim();
    },
    navigateToMessenger: function () {
      var a = SETTING.URL_MESSENGER_SUPPORT;
      cc.sys.os == cc.sys.OS_ANDROID
        ? NativeInterface.openURLMessenger(a)
        : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
          NativeInterface.openURL(a);
    },
    onNetworkStatusChangeDisconnect: function () {
      logMessage("onNetworkStatusChangeDisconnect");
      BkGlobal.isNetworkConnected &&
        ((BkGlobal.isNetworkConnected = !1),
        logMessage("network change state connected -\x3e disconnect"),
        BkConnectionManager.showIndicatorChangeNetwork());
    },
    onNetworkStatusChangeConnectted: function () {
      logMessage("onNetworkStatusChangeConnectted");
      BkGlobal.isNetworkConnected ||
        ((BkGlobal.isNetworkConnected = !0),
        logMessage("network change state disconnect -\x3e connected"),
        BkConnectionManager.showIndicatorChangeNetwork());
    },
    getVersionName: function () {
      var a;
      if (cc.sys.os == cc.sys.OS_ANDROID)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterface,
          "getVersionName",
          "()Ljava/lang/String;"
        );
      else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        a = jsb.reflection.callStaticMethod(
          staticPathNativeInterfaceIOS,
          "getVersionName"
        );
      logMessage("getVersionName: " + a);
      return a;
    },
    showMPAdBanner: function () {
      isFBInstantGame() ||
        (this.destroyAds(),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showMPAdBanner",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showMPAdBanner"
            ));
    },
    showMPInterstitialAd: function () {
      isFBInstantGame() ||
        (cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showMPInterstitialAd",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showMPInterstitialAd"
            ));
    },
    showMPRewardedVideoAd: function () {
      logMessage("showMPRewardedVideoAd JS");
      isFBInstantGame() ||
        (this.isCacheMPRewardedVideo &&
          (logMessage(
            "isCacheMPRewardedVideo -\x3e resset state ! cache -\x3e auto play or show mess load fail when finish load"
          ),
          (this.isCacheMPRewardedVideo = !1)),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(
              staticPathNativeInterface,
              "showMPRewardedVideoAd",
              "()V"
            )
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(
              staticPathNativeInterfaceIOS,
              "showMPRewardedVideoAd"
            ));
    },
    callNativeVoidFunction: function (a) {
      isFBInstantGame() ||
        (logMessage("callNativeVoidFunction: " + a),
        cc.sys.os == cc.sys.OS_ANDROID
          ? jsb.reflection.callStaticMethod(staticPathNativeInterface, a, "()V")
          : (cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_OSX) ||
            jsb.reflection.callStaticMethod(staticPathNativeInterfaceIOS, a));
    },
    showFBRewardedVideoAd: function () {
      this.isCacheFBRewardedVideo
        ? (logMessage("is caching FB RV -\x3e only set autoplay after loaded"),
          NativeInterface.callNativeVoidFunction("setAutoPlayFBrewardedVideo"),
          (this.isCacheFBRewardedVideo = !1))
        : NativeInterface.callNativeVoidFunction("showFBRewardedVideoAd");
    },
    onReceiveMemoryWarning: function () {
      if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
        logMessage("onReceiveMemoryWarning iOS"),
          (this.isReceiveMemoryWarning = !0),
          NativeInterface.logFirebaseEvent(EVENT_NAME.IOS_MEMORY_WARNING);
    },
  };
getSound = function () {
  return cc.audioEngine;
};
playJoinGameSound = function () {
  logMessage("playJoinGameSound");
  isSoundEnable() && getSound().playMusic(sound_rest.join_game, !1);
};
playLeaveGameSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.leave_game, !1);
};
playDiscardSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.click, !1);
};
playAlertSound = function () {
  isSoundEnable();
};
playLeaveTurnSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.click, !1);
};
playBichatSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.laught, !1);
};
playLaughtSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.laught, !1);
};
playClickSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.click, !1);
};
playDealCardSound = function () {
  isSoundEnable() && getSound().playMusic(sound_rest.deal_card, !1);
};
isSoundEnable = function () {
  return BkGlobal.isLoadedChatEmo ? Util.getSoundSetting() : !1;
};
playChieuTuongSound = function () {
  logMessage("playChieuTuongSound");
  isSoundEnable() && getSound().playMusic(sound_rest.co_gong, !1);
};
playCoAnQuanSound = function () {
  logMessage("playCoAnQuanSound");
  isSoundEnable() && getSound().playMusic(sound_rest.co_an_quan, !1);
};
playCoDiChuyenSound = function () {
  logMessage("playCoDiChuyenSound");
  isSoundEnable() && getSound().playMusic(sound_rest.co_di_chuyen, !1);
};
playCoThangSound = function () {
  logMessage("playCoThangSound");
  isSoundEnable() && getSound().playMusic(sound_rest.co_thang, !1);
};
playCoThuaSound = function () {
  logMessage("playCoThuaSound");
  isSoundEnable() && getSound().playMusic(sound_rest.co_thua, !1);
};
isNhacNenEnable = function () {
  return isWebPlatform() || isFBInstantGame() ? !1 : Util.getNhacNenSetting();
};
playNhacNenSound = function () {
  isNhacNenEnable() && BkBackgroundMusic.playBGSound();
};
stopNhacNenSound = function () {
  if (isWebPlatform()) return !1;
  BkBackgroundMusic.stopBGSound();
};
pauseNhacNenSound = function () {
  if (isWebPlatform()) return !1;
  BkBackgroundMusic.pauseBGSound();
};
resumeNhacNenSound = function () {
  isNhacNenEnable() && BkBackgroundMusic.resumeBGSound();
};
BkBackgroundMusic = {
  audioID: null,
  playBGSound: function () {
    logMessage("playBGSound");
    this.isValidAudioID() &&
      (jsb.AudioEngine.stop(this.audioID),
      (this.audioID = jsb.AudioEngine.INVALID_AUDIO_ID));
    this.audioID = jsb.AudioEngine.play2d(nhac_nen_ziga, !0, 1);
    this.audioID !== jsb.AudioEngine.INVALID_AUDIO_ID && logMessage("play OK");
  },
  stopBGSound: function () {
    logMessage("stopBGSound");
    jsb.AudioEngine.stopAll();
    this.audioID = jsb.AudioEngine.INVALID_AUDIO_ID;
  },
  pauseBGSound: function () {
    logMessage("pauseBGSound");
    this.isValidAudioID()
      ? jsb.AudioEngine.pause(this.audioID)
      : this.stopBGSound();
  },
  resumeBGSound: function () {
    logMessage("resumeBGSound");
    this.isValidAudioID()
      ? jsb.AudioEngine.resume(this.audioID)
      : this.playBGSound();
  },
  isValidAudioID: function () {
    return this.audioID !== jsb.AudioEngine.INVALID_AUDIO_ID &&
      null !== this.audioID
      ? !0
      : !1;
  },
};
function FbService() {
  isWebPlatform() &&
    (plugin.extend("facebook", {
      name: "",
      version: "",
      _userInfo: null,
      _isLoggedIn: !1,
      HttpMethod: { GET: "get", POST: "post", DELETE: "delete" },
      CODE_SUCCEED: 0,
      AppEvent: {
        ACTIVATED_APP: FB.AppEvents.EventNames.ACTIVATED_APP,
        COMPLETED_REGISTRATION: FB.AppEvents.EventNames.COMPLETED_REGISTRATION,
        VIEWED_CONTENT: FB.AppEvents.EventNames.VIEWED_CONTENT,
        SEARCHED: FB.AppEvents.EventNames.SEARCHED,
        RATED: FB.AppEvents.EventNames.RATED,
        COMPLETED_TUTORIAL: FB.AppEvents.EventNames.COMPLETED_TUTORIAL,
        ADDED_TO_CART: FB.AppEvents.EventNames.ADDED_TO_CART,
        ADDED_TO_WISHLIST: FB.AppEvents.EventNames.ADDED_TO_WISHLIST,
        INITIATED_CHECKOUT: FB.AppEvents.EventNames.INITIATED_CHECKOUT,
        ADDED_PAYMENT_INFO: FB.AppEvents.EventNames.ADDED_PAYMENT_INFO,
        PURCHASED: FB.AppEvents.EventNames.PURCHASED,
        ACHIEVED_LEVEL: FB.AppEvents.EventNames.ACHIEVED_LEVEL,
        UNLOCKED_ACHIEVEMENT: FB.AppEvents.EventNames.UNLOCKED_ACHIEVEMENT,
        SPENT_CREDITS: FB.AppEvents.EventNames.SPENT_CREDITS,
      },
      AppEventParam: {
        CURRENCY: FB.AppEvents.ParameterNames.CURRENCY,
        REGISTRATION_METHOD: FB.AppEvents.ParameterNames.REGISTRATION_METHOD,
        CONTENT_TYPE: FB.AppEvents.ParameterNames.CONTENT_TYPE,
        CONTENT_ID: FB.AppEvents.ParameterNames.CONTENT_ID,
        SEARCH_STRING: FB.AppEvents.ParameterNames.SEARCH_STRING,
        SUCCESS: FB.AppEvents.ParameterNames.SUCCESS,
        MAX_RATING_VALUE: FB.AppEvents.ParameterNames.MAX_RATING_VALUE,
        PAYMENT_INFO_AVAILABLE:
          FB.AppEvents.ParameterNames.PAYMENT_INFO_AVAILABLE,
        NUM_ITEMS: FB.AppEvents.ParameterNames.NUM_ITEMS,
        LEVEL: FB.AppEvents.ParameterNames.LEVEL,
        DESCRIPTION: FB.AppEvents.ParameterNames.DESCRIPTION,
      },
      AppEventParamValue: { VALUE_YES: "1", VALUE_NO: "0" },
      _checkLoginStatus: function () {
        var a = this;
        FB.getLoginStatus(function (b) {
          b && "connected" === b.status
            ? ((a._isLoggedIn = !0), (a._userInfo = b.authResponse))
            : ((a._isLoggedIn = !1), (a._userInfo = {}));
        });
      },
      ctor: function (a) {
        this.name = "facebook";
        this.version = "1.0";
        this._userInfo = {};
        this._isLoggedIn = !1;
        FB &&
          (FB.init(a), this._checkLoginStatus(), (plugin.FacebookAgent = this));
      },
      getInstance: function () {
        return this;
      },
      login: function (a, b) {
        var d = this;
        "function" == typeof a && ((b = a), (a = []));
        a.every(function (a) {
          if ("public_profile" != a) return !0;
        }) && a.push("public_profile");
        var e = a.join(",");
        FB.login(
          function (a) {
            if (a.authResponse) {
              d._isLoggedIn = !0;
              d._userInfo = a.authResponse;
              var e = a.authResponse.grantedScopes.split(",");
              "function" === typeof b &&
                b(0, {
                  accessToken: a.authResponse.accessToken,
                  permissions: e,
                });
            } else
              (d._isLoggedIn = !1),
                (d._userInfo = {}),
                "function" === typeof b &&
                  b(a.error_code || 1, {
                    error_message: a.error_message || "Unknown error",
                  });
          },
          { scope: e, return_scopes: !0 }
        );
      },
      isLoggedIn: function () {
        return this._isLoggedIn;
      },
      logout: function (a) {
        var b = this;
        FB.logout(function (d) {
          d.authResponse
            ? ((b._isLoggedIn = !1),
              (b._userInfo = {}),
              "function" === typeof a && a(0, { isLoggedIn: !1 }))
            : "function" === typeof a &&
              a(d.error_code || 1, {
                error_message: d.error_message || "Unknown error",
              });
        });
      },
      _requestPermissions: function (a, b) {
        var d = a.join(","),
          e = this;
        FB.login(
          function (a) {
            if (a.authResponse) {
              var d = a.authResponse.grantedScopes.split(",");
              e._isLoggedIn = !0;
              e._userInfo = a.authResponse;
              "function" === typeof b && b(0, { permissions: d });
            } else
              (e._isLoggedIn = !1),
                (e._userInfo = {}),
                "function" === typeof b &&
                  b(a.error_code || 1, {
                    error_message: a.error_message || "Unknown error",
                  });
          },
          { scope: d, return_scopes: !0 }
        );
      },
      getAccessToken: function () {
        return this._userInfo ? this._userInfo.accessToken : null;
      },
      getUserID: function () {
        return this._userInfo ? this._userInfo.userID : null;
      },
      _share: function (a, b) {
        FB.ui(
          {
            method: "share",
            name: a.title,
            caption: a.caption,
            description: a.text,
            href: a.link,
            picture: a.imageUrl,
          },
          function (a) {
            a
              ? a.post_id
                ? "function" === typeof b &&
                  b(0, { didComplete: !0, post_id: a.post_id })
                : "function" === typeof b &&
                  b(a.error_code || 1, {
                    error_message: a.error_message || "Unknown error",
                  })
              : "function" === typeof b &&
                b(1, { error_message: "Unknown error" });
          }
        );
      },
      dialog: function (a, b) {
        if (a)
          if (this.canPresentDialog(a)) {
            a.name = a.name || a.site;
            delete a.site;
            a.href = a.href || a.link || a.siteUrl;
            delete a.siteUrl;
            delete a.link;
            a.picture =
              a.picture || a.image || a.photo || a.imageUrl || a.imagePath;
            delete a.imageUrl;
            delete a.imagePath;
            delete a.photo;
            delete a.image;
            a.caption = a.title || a.caption;
            delete a.title;
            a.description = a.text || a.description;
            delete a.text;
            var d = a.dialog;
            delete a.dialog;
            if ("shareLink" === d || "feedDialog" == d) a.method = "share";
            else if ("messageLink" == d) (a.method = "send"), (a.link = a.href);
            else if (
              "shareOpenGraph" == d &&
              ((a.method = "share_open_graph"), a.url)
            ) {
              d = {};
              a.preview_property_name
                ? (d[a.preview_property_name] = a.url)
                : (d.object = a.url);
              for (var e in a)
                "method" != e &&
                  "action_type" != e &&
                  "action_properties" != e &&
                  (a[e] && (d[e] = a[e]), delete a[e]);
              a.action_properties = JSON.stringify(d);
            }
            FB.ui(a, function (a) {
              a && "function" === typeof b
                ? a.post_id || a.success
                  ? b(0, { didComplete: !0, post_id: a.post_id || "" })
                  : a.error_code
                  ? b(a.error_code, {
                      error_message: a.error_message || "Unknown error",
                    })
                  : b(0, a)
                : void 0 == a &&
                  "function" === typeof b &&
                  b(1, { error_message: "Unknown error" });
            });
          } else
            "function" === typeof b &&
              b(1, {
                error_message:
                  "The requested dialog: " +
                  a.dialog +
                  " can not be presented on Web",
              });
        else
          "function" === typeof b &&
            b(1, { error_message: "No info parameter provided" });
      },
      canPresentDialog: function (a) {
        return a &&
          a.dialog &&
          ("shareLink" === a.dialog ||
            "feedDialog" === a.dialog ||
            "shareOpenGraph" === a.dialog ||
            "messageLink" === a.dialog)
          ? !0
          : !1;
      },
      api: function (a, b, d, e) {
        "function" === typeof d && ((e = d), (d = {}));
        FB.api(a, b, d, function (a) {
          a.error
            ? "function" === typeof e &&
              e(a.error.code, {
                error_message: a.error.message || "Unknown error",
              })
            : "function" === typeof e && e(0, a);
        });
      },
      _getPermissionList: function (a) {
        FB.api("/me/permissions", function (b) {
          if (b.data) {
            for (var d = [], e = 0; e < b.data.length; e++)
              "granted" == b.data[e].status && d.push(b.data[e].permission);
            "function" == typeof a && a(0, { permissions: d });
          } else b.error || (b.error = {}), "function" == typeof a && a(b.error.code || 1, { error_message: b.error.message || "Unknown error" });
        });
      },
      destroyInstance: function () {},
      canvas: {
        pay: function (a, b) {
          a.method = "pay";
          a.action = "purchaseitem";
          FB.ui(a, function (a) {
            a.error_code
              ? b(a.error_code || 1, {
                  error_message:
                    a.error_message || a.error_msg || "Unknown error",
                })
              : b(0, a);
          });
        },
      },
      appRequest: function (a, b) {
        a
          ? ((a.method = "apprequests"),
            FB.ui(a, function (a) {
              a
                ? a.error_code
                  ? "function" === typeof b &&
                    b(a.error_code, {
                      error_message: a.error_message || "Unknown error",
                    })
                  : "function" === typeof b && b(0, a)
                : "function" === typeof b &&
                  b(1, { error_message: "Unknown error" });
            }))
          : "function" === typeof b &&
            b(1, { error_message: "No info parameter provided" });
      },
      logEvent: function (a, b, d) {
        void 0 != a &&
          (void 0 === b && void 0 === d
            ? FB.AppEvents.logEvent(a, null, null)
            : "number" === typeof b && void 0 === d
            ? FB.AppEvents.logEvent(a, b)
            : "object" === typeof b && void 0 === d
            ? FB.AppEvents.logEvent(a, null, b)
            : FB.AppEvents.logEvent(a, b, d));
      },
      activateApp: function () {
        FB.AppEvents.activateApp();
      },
      logPurchase: function (a, b, d) {
        FB.AppEvents.logPurchase(a, b, d);
      },
    }),
    (FbService.App =
      FbService.App ||
      (window.plugin ? window.plugin.FacebookAgent.getInstance() : null)),
    (FbService.facebookID = ""),
    (FbService.facebookToken = ""),
    FbService.App &&
      FbService.App.isLoggedIn() &&
      ((FbService.facebookID = FbService.App.getUserID()),
      (FbService.facebookToken = FbService.App.getAccessToken())));
}
FbService.processFbLogin = function (a) {
  bk.userIp = "";
  a &&
    zpostRequest("https://zigavn.com/app/ip.php", "", function (a) {
      a && (bk.userIp = a);
    });
  FbService.appLogin(function (a, d, e) {
    cc.username = a;
    cc.password = d;
    FbService.createloginFbState();
  });
};
FbService.appLogin = function (a) {
  logMessage("Call FbService.appLogin");
  FbService.App.isLoggedIn()
    ? ((FbService.facebookID = FbService.App.getUserID()),
      (FbService.facebookToken = FbService.App.getAccessToken()),
      logMessage("FbService.App.isLoggedIn " + FbService.facebookID),
      cc.isFunction(a) && a(FbService.facebookID, FbService.facebookToken))
    : FbService.App.login(["public_profile", "user_friends"], function (b, d) {
        0 == b && a
          ? ((FbService.facebookID = FbService.App.getUserID()),
            (FbService.facebookToken = FbService.App.getAccessToken()),
            cc.isFunction(a) &&
              a(FbService.facebookID, FbService.facebookToken, d))
          : (switchToSceneWithGameState(GS.PREPARE_GAME),
            showPopupMessageEx(
              "\u0110\u1ec3 ch\u01a1i game b\u1eb1ng t\u00e0i kho\u1ea3n Facebook b\u1ea1n c\u1ea7n c\u1ea5p quy\u1ec1n truy c\u1eadp \u1ee9ng d\u1ee5ng. Xin h\u00e3y \u0111\u0103ng nh\u1eadp l\u1ea1i!"
            ));
      });
};
FbService.appInviteRequest = function (a, b) {
  a = FbService.createInviteParam(null);
  FbService.App.appRequest(a, function (a, e) {
    if (null != b) {
      var f = FbService.processResInvitation(e);
      b(f);
    }
    logMessage("appRequest: " + JSON.stringify(e));
  });
};
FbService.appInviteRequestWithLogin = function () {
  var a = function () {
      var a = BkLogicManager.getLogic();
      a && a.processFacebookInvitedList(FbService.facebookID);
    },
    b = BkLogicManager.getLogic();
  b && b.getFaceBookInvitedFriends();
  try {
    FbService.App.isLoggedIn()
      ? ((FbService.facebookID = FbService.App.getUserID()),
        (FbService.facebookToken = FbService.App.getAccessToken()),
        a())
      : FbService.App.login(["public_profile"], function (b, d) {
          0 == b && callback
            ? ((FbService.facebookID = FbService.App.getUserID()),
              (FbService.facebookToken = FbService.App.getAccessToken()),
              a())
            : showPopupMessageEx(
                "\u0110\u1ec3 m\u1eddi b\u1ea1n ch\u01a1i game, xin h\u00e3y c\u1ea5p quy\u1ec1n truy c\u1eadp Facebook. Xin h\u00e3y th\u1eed l\u1ea1i!"
              );
        });
  } catch (d) {
    showPopupMessageWith(
      BkConstString.INVITE_FRIEND_ERROR,
      "M\u1eddi b\u1ea1n facebook l\u1ed7i!"
    );
  }
};
FbService.setCallBack = function (a) {
  this.cbHandle = a;
};
FbService.prepareBeforeInviteFriend = function () {
  try {
    FbService.askPermission();
  } catch (a) {
    showPopupMessageWith(
      BkConstString.INVITE_FRIEND_ERROR,
      "M\u1eddi b\u1ea1n facebook l\u1ed7i!"
    );
  }
};
FbService.createInviteParam = function (a) {
  return null != a
    ? {
        message:
          "C\u1edd t\u01b0\u1edbng c\u1edd \u00fap online mi\u1ec5n ph\u00ed - Ziga",
        title:
          "M\u1eddi b\u1ea1n b\u00e8 c\u00f9ng ch\u01a1i, v\u1edbi m\u1ed7i l\u01b0\u1ee3t c\u00e0i \u0111\u1eb7t b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c th\u01b0\u1edfng",
        exclude_ids: a,
        max_recipients: 50,
        filters: ["app_non_users"],
      }
    : {
        message:
          "C\u1edd t\u01b0\u1edbng c\u1edd \u00fap online mi\u1ec5n ph\u00ed - Ziga",
        title:
          "M\u1eddi b\u1ea1n b\u00e8 c\u00f9ng ch\u01a1i, v\u1edbi m\u1ed7i l\u01b0\u1ee3t c\u00e0i \u0111\u1eb7t b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c th\u01b0\u1edfng",
        filters: ["app_non_users"],
      };
};
FbService.processResInvitation = function (a) {
  if (a && a.to) {
    a = a.to;
    for (var b = [], d = 0; d < a.length; ++d) {
      var e = a[d];
      cc.isString(e) && b.push(e);
    }
    return b;
  }
  return [];
};
FbService.createloginFbState = function () {
  BkConnectionManager.conStatus = CONECTION_STATE.LOGIN_FACEBOOK;
  BkConnectionManager.prepareConnection();
};
FbService.doLoginFbUser = function (a, b, d) {
  null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
  BkGlobal.isLoginFacebook = !0;
  var e = bk.cpid,
    f = new BkPacket();
  isFBInstantGame()
    ? f.CreatePacketLoginFbInstant(
        a,
        b,
        e,
        d,
        bk.userIp,
        BkFbInstant.getPlayerName(),
        BkFbInstant.getPlayerPhoto()
      )
    : f.CreatePacketLoginFacebook(a, b, e, d, bk.userIp);
  BkConnectionManager.send(f);
};
FbService.doRegisterFbUser = function (a, b, d) {
  null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
  BkGlobal.isLoginFacebook = !0;
  var e = bk.cpid,
    f = new BkPacket();
  f.CreatePacketLoginFacebook(
    fb.SUBEVENT_REGISTER_PLAYER,
    a,
    b,
    e,
    d,
    bk.userIp
  );
  BkConnectionManager.send(f);
};
FbService.doFbLinkUser = function (a, b, d) {
  null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
  var e = bk.cpid,
    f = new BkPacket();
  f.CreatePacketLoginFacebook(fb.SUBEVENT_LINK_PLAYER, a, b, e, d, bk.userIp);
  BkConnectionManager.send(f);
};
FbService.processLoginFbResult = function (a) {
  a = a.Buffer.readByte();
  logMessage("processLoginFbResult: " + a);
};
FbService.shareLink = function (a, b, d) {
  if (void 0 != a) {
    var e = "https://zigavn.com";
    cc.isUndefined(cc.game.config.app) ||
      cc.isUndefined(cc.game.config.app.promoShareUrl) ||
      (e = cc.game.config.app.promoShareUrl);
    BkGlobal.currentShareUrl = a;
    a = {
      dialog: "shareLink",
      title:
        "Ch\u01a1i c\u1edd t\u01b0\u1edbng c\u1edd \u00fap mi\u1ec5n ph\u00ed",
      image: a,
      link: e,
      hashtag: "#ziga",
      description: b,
    };
    void 0 != FbService.App &&
      (cc.isFunction(FbService.App.canPresentDialog) &&
      FbService.App.canPresentDialog(a)
        ? FbService.App.dialog(a, function (a, b) {
            d && 4201 == a && (BkGlobal.currentShareUrl = null);
          })
        : ((a.dialog = "feedDialog"),
          FbService.App.dialog(a, function (a, b) {
            logMessage(a);
          })));
  }
};
FbService.shareAppFbLink = function (a) {
  void 0 == a || "" == a
    ? ((a = "https://zigavn.com"),
      cc.isUndefined(cc.game.config.app) ||
        cc.isUndefined(cc.game.config.app.promoShareUrl) ||
        (a = cc.game.config.app.promoShareUrl),
      FbService.shareLink(a))
    : FbService.shareLink("https://www.facebook.com/games/" + a);
};
FbService.askPermission = function (a) {
  a = ["user_friends"];
  FbService.App.isLoggedIn() || a.push("public_profile");
  FbService.App.login(
    a,
    function (a) {
      0 == a
        ? ((FbService.facebookID = FbService.App.getUserID()),
          FbService.getInvitableFriendList())
        : showPopupMessageEx(
            "\u0110\u1ec3 m\u1eddi b\u1ea1n facebook b\u1ea1n c\u1ea7n c\u1ea5p quy\u1ec1n truy c\u1eadp facebook, xin h\u00e3y th\u1eed l\u1ea1i."
          );
    },
    "rerequest"
  );
};
FbService.getInvitableFriendList = function () {
  var a = this;
  if (void 0 != FbService.App) {
    var b = "",
      b =
        void 0 != a.next && "" != a.next
          ? a.next
          : "/me/invitable_friends?fields\x3dname,picture.width(80).height(80)\x26limit\x3d50";
    Util.showAnim();
    FbService.App.api(
      b,
      FbService.App.__proto__.HttpMethod.GET,
      {},
      function (b, e) {
        if (b == FbService.App.__proto__.CODE_SUCCEED)
          if (((a.invitableList = []), 0 == e.data.length))
            showToastMessage(
              "B\u1ea1n kh\u00f4ng c\u00f3 b\u1ea1n n\u00e0o ph\u00f9 h\u1ee3p \u0111\u1ec3 m\u1eddi"
            ),
              Util.removeAnim();
          else {
            void 0 != e.paging.next && "" != e.paging.next
              ? ((a.next = e.paging.next), (a.canLoadMore = !0))
              : (a.canLoadMore = !1);
            var f = BkUserClientSettings.getListFBInvited(FbService.facebookID);
            if (0 < f.length)
              for (var f = JSON.parse(f), g = 0; g < f.length; g++)
                for (var h = f[g], k = e.data.length - 1; 0 <= k; k--)
                  e.data[k].name == h && e.data.splice(k, 1);
            a.invitableList = e.data;
            0 == a.invitableList.length &&
              (a.canLoadMore
                ? FbService.getInvitableFriendList()
                : (showToastMessage(
                    "B\u1ea1n kh\u00f4ng c\u00f3 b\u1ea1n n\u00e0o ph\u00f9 h\u1ee3p \u0111\u1ec3 m\u1eddi"
                  ),
                  Util.removeAnim()));
          }
      }
    );
    return !0;
  }
};
FbService.onGetInvitableListFinished = function () {
  if (null != this.cbHandle) this.cbHandle.onGetInvitableListFinished();
};
FbService.resetToDefaultValue = function (a) {
  this.next = "";
  this.invitableList = [];
  this.canLoadMore = !1;
  this._userInfo = {};
  this._isLoggedIn = !1;
};
BkBuffer = cc.Class.extend({
  Buf: null,
  position: null,
  posRead: null,
  ctor: function () {
    this.Buf = [];
    this.posRead = this.position = 0;
  },
  validNumberParams: function (a) {
    return void 0 == a || null == a
      ? (logMessage(
          "error validNumberParams: Number data send to server invalid! please check!"
        ),
        0)
      : a;
  },
  validStringParams: function (a) {
    if (void 0 == a || null == a)
      throw (
        (logMessage(
          "error validStringParams: String data send to server invalid! please check!"
        ),
        "error validStringParams")
      );
    return a;
  },
  writeByte: function (a) {
    a = this.validNumberParams(a);
    this.Buf[this.position] = a;
    this.position += 1;
  },
  writeShort: function (a) {
    a = this.validNumberParams(a);
    a = ShortToByteArray(a);
    for (var b = a.length - 1; 0 <= b; b--) this.writeByte(a[b]);
  },
  writeInt: function (a) {
    a = this.validNumberParams(a);
    a = IntToByteArray(a);
    for (var b = a.length - 1; 0 <= b; b--) this.writeByte(a[b]);
  },
  writeLong: function (a) {
    a = this.validNumberParams(a);
    a = longToByteArray(a);
    for (var b = a.length - 1; 0 <= b; b--) this.writeByte(a[b]);
  },
  writeString: function (a) {
    a = this.validStringParams(a);
    a = StringToByteArray(a);
    this.writeShort(a.length);
    for (var b = 0; b < a.length; b++) this.writeByte(a[b]);
    return a.length + 2;
  },
  readByte: function () {
    var a = this.Buf[this.posRead];
    this.posRead += 1;
    return a;
  },
  readShort: function () {
    var a = this.getSubArrayFromPosReadWithLength(2);
    this.posRead += 2;
    return shortFromBytes(a);
  },
  readInt: function () {
    var a = this.getSubArrayFromPosReadWithLength(4);
    this.posRead += 4;
    return intFromBytes(a);
  },
  readLong: function () {
    var a = this.getSubArrayFromPosReadWithLength(8);
    this.posRead += 8;
    return longFromBytes(a);
  },
  readString: function () {
    var a = this.readShort(),
      b = this.getSubArrayFromPosReadWithLength(a);
    this.posRead += a;
    return intArrayToString(b);
  },
  ReadString: function () {
    return this.readString();
  },
  toString: function () {
    for (
      var a = "[" + this.getLengthBuffer() + "] |", b = 0;
      b < this.Buf.length;
      b++
    )
      a += this.Buf[b] + "|";
    return a;
  },
  getSubArrayFromPosReadWithLength: function (a) {
    for (var b = [], d = 0; d < a; d++) b.push(this.Buf[d + this.posRead]);
    return b;
  },
  getLengthBuffer: function () {
    return this.Buf.length;
  },
  isReadable: function () {
    return this.posRead < this.getLengthBuffer() ? !0 : !1;
  },
});
longToByteArray = function (a) {
  for (var b = [0, 0, 0, 0, 0, 0, 0, 0], d = 0; d < b.length; d++) {
    var e = a & 255;
    b[d] = e;
    a = (a - e) / 256;
  }
  return b;
};
byteArrayToLong = function (a) {
  for (var b = 0, d = 0; d < a.length; d++) {
    var e = a[d],
      f;
    0 != d ? (e = new Uint8Array([e])[0]) : ((f = (e & 128) >> 7), (e &= 127));
    logMessage("iByte " + e + " bit1 " + f);
    b = 256 * b + e;
    1 == f && (b = -b);
  }
  return b;
};
ShortToByteArray = function (a) {
  for (var b = [0, 0], d = 0; d < b.length; d++) {
    var e = a & 255;
    b[d] = e;
    a = (a - e) / 256;
  }
  return b;
};
IntToByteArray = function (a) {
  for (var b = [0, 0, 0, 0], d = 0; d < b.length; d++) {
    var e = a & 255;
    b[d] = e;
    a = (a - e) / 256;
  }
  return b;
};
StringToByteArray = function (a) {
  return toUTF8Array(a);
};
toUTF8Array = function (a) {
  for (var b = [], d = 0; d < a.length; d++) {
    var e = a.charCodeAt(d);
    128 > e
      ? b.push(e)
      : 2048 > e
      ? b.push(192 | (e >> 6), 128 | (e & 63))
      : 55296 > e || 57344 <= e
      ? b.push(224 | (e >> 12), 128 | ((e >> 6) & 63), 128 | (e & 63))
      : (d++,
        (e = 65536 + (((e & 1023) << 10) | (a.charCodeAt(d) & 1023))),
        b.push(
          240 | (e >> 18),
          128 | ((e >> 12) & 63),
          128 | ((e >> 6) & 63),
          128 | (e & 63)
        ));
  }
  return b;
};
byteArrayToString = function (a) {
  var b, d, e, f, g, h;
  b = "";
  e = a.length;
  for (d = 0; d < e; )
    switch (((f = a[d++]), f >> 4)) {
      case 0:
      case 1:
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
        b += String.fromCharCode(f);
        break;
      case 12:
      case 13:
        g = a[d++];
        b += String.fromCharCode(((f & 31) << 6) | (g & 63));
        break;
      case 14:
        (g = a[d++]),
          (h = a[d++]),
          (b += String.fromCharCode(
            ((f & 15) << 12) | ((g & 63) << 6) | ((h & 63) << 0)
          ));
    }
  return b;
};
intArrayToString = function (a) {
  for (var b = new Uint8Array(a.length), d = 0; d < a.length; d++) {
    var e = new Uint8Array([a[d]])[0];
    b[d] = e;
  }
  a = String.fromCharCode.apply(null, b);
  return decodeURIComponent(escape(a));
};
longFromBytes = function (a) {
  var b = new Int32Array([0])[0],
    b =
      ((a[0] & 255) << 24) |
      ((a[1] & 255) << 16) |
      ((a[2] & 255) << 8) |
      (a[3] & 255),
    b = new Uint32Array([b])[0],
    d = new Int32Array([0])[0],
    d =
      ((a[4] & 255) << 24) |
      ((a[5] & 255) << 16) |
      ((a[6] & 255) << 8) |
      (a[7] & 255),
    d = new Uint32Array([d])[0];
  a = Number(0);
  return (a = Number(4294967296 * b) + Number(d));
};
intFromBytes = function (a) {
  var b = new Int32Array([0])[0];
  return (b =
    ((a[0] & 255) << 24) |
    ((a[1] & 255) << 16) |
    ((a[2] & 255) << 8) |
    (a[3] & 255));
};
shortFromBytes = function (a) {
  var b = new Int16Array([0])[0];
  return (b = ((a[0] & 255) << 8) | (a[1] & 255));
};
var HEADER_SIZE = 7;
BkPacket = cc.Class.extend({
  Header: null,
  Buffer: null,
  Length: null,
  Type: null,
  Index: null,
  isQueueInSwitchScene: !1,
  ctor: function () {
    this.Header = new BkBuffer();
    this.Buffer = new BkBuffer();
  },
  createGetSettingPacket: function (a) {
    this.Type = c.NETWORK_GET_SETTING_REQUEST;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + a;
    this.CreateHeader();
  },
  CreatePacketAutoRegLogin: function (a, b, d) {
    this.Type = c.NETWORK_AUTO_REGISTER_LOGIN;
    var e = this.Buffer.writeString(b);
    logMessage("AUTO LOGIN REGISTER CLIENT ID: " + b);
    this.Buffer.writeInt(a);
    a = this.Buffer.writeString(d);
    this.Length = HEADER_SIZE - 2 + e + 4 + a;
    this.CreateHeader();
  },
  createPacketJoinChanGameRoom: function (a, b) {
    void 0 === b && (b = -1);
    this.Type = c.NETWORK_JOIN_CHAN_GAME;
    this.Buffer.writeByte(a);
    this.Buffer.writeByte(b);
    this.Length = HEADER_SIZE + 2 - 2;
    this.CreateHeader();
  },
  getConentPacketSend: function () {
    var a = new Int8Array(HEADER_SIZE + this.Buffer.position),
      b;
    for (b = 0; b < HEADER_SIZE; b++) a[b] = this.Header.Buf[b];
    for (b = 0; b < this.Buffer.position; b++)
      a[b + HEADER_SIZE] = this.Buffer.Buf[b];
    for (b = 0; b < a.length; b++);
    return a;
  },
  parsePacketWithBuffer: function (a) {
    for (var b = 0, b = 0; b < a.length; b++);
    for (b = 0; b < HEADER_SIZE; b++) this.Header.Buf[b] = a[b];
    for (b = 0; b < a.length - HEADER_SIZE; b++)
      this.Buffer.writeByte(a[b + HEADER_SIZE]);
    this.Length = this.Header.readShort();
    this.Type = this.Header.readByte();
    this.Index = this.Header.readInt();
  },
  toString: function () {
    return (
      "Header: " +
      (this.Header.toString() +
        " [Type :" +
        this.Type +
        "] [Length : " +
        this.Length +
        "] [Index: " +
        this.Index +
        "]") +
      "\nContent: " +
      this.Buffer.toString()
    );
  },
  CreateHeader: function () {
    this.Header.writeShort(this.Length);
    this.Header.writeByte(this.Type);
    null == this.Index && (this.Index = 0);
    this.Header.writeInt(this.Index);
  },
  createLoginPacket: function (a, b, d) {
    logMessage("c.NETWORK_LOG_IN " + c.NETWORK_LOG_IN);
    BkGlobal.clientID = d;
    this.Type = c.NETWORK_LOG_IN;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    d = this.Buffer.writeString(d);
    this.Length = HEADER_SIZE + a + b + d - 2;
    this.Index = 0;
    this.CreateHeader();
  },
  CreatePacketRegister: function (a, b, d, e, f) {
    this.Type = c.NETWORK_REGISTER_USER;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    var g = this.Buffer.writeString(e);
    logMessage("REGISTER CLIENT ID: " + e);
    this.Buffer.writeInt(d);
    d = this.Buffer.writeString(f);
    this.Length = HEADER_SIZE - 2 + a + b + g + 4 + d;
    this.CreateHeader();
  },
  CreatePacketForgetPassword: function (a, b) {
    this.Type = c.NETWORK_FORGOT_PASSWORD;
    var d = this.Buffer.writeString(a),
      e = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + d + e;
    this.CreateHeader();
  },
  createGetHotTablePacket: function (a) {
    this.Type = c.NETWORK_GET_HOT_TABLE;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  createQuickTableJoin: function (a, b, d) {
    this.Type = c.NETWORK_QUICK_TABLE_JOIN;
    this.Buffer.writeByte(b);
    this.Buffer.writeByte(d);
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 3;
    this.Index = 0;
    this.CreateHeader();
  },
  CreatePacketFbInviteFriends: function () {
    this.Type = c.NETWORK_GET_FACEBOOK_INVITE_FRIENDS;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  CreatePacketLoginFacebook: function (a, b, d, e, f) {
    this.Type = c.NETWORK_LOG_IN_FACEBOOK;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    e = this.Buffer.writeString(e);
    this.Buffer.writeInt(d);
    d = this.Buffer.writeString(f);
    this.Length = HEADER_SIZE + a + b + e + 4 + d - 2;
    this.CreateHeader();
  },
  CreatePacketLoginFbInstant: function (a, b, d, e, f, g, h) {
    this.Type = c.NETWORK_LOG_IN_FACEBOOK;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    e = this.Buffer.writeString(e);
    this.Buffer.writeInt(d);
    d = this.Buffer.writeString(f);
    g = this.Buffer.writeString(g);
    h = this.Buffer.writeString(h);
    this.Length = HEADER_SIZE + a + b + e + 4 + d + g + h - 2;
    this.CreateHeader();
  },
  CreatePacketLinkFacebook: function (a, b) {
    this.Type = c.NETWORK_LINK_PLAYER_ACCOUNT;
    this.Buffer.writeByte(fb.SUBEVENT_LINK_PLAYER);
    var d = this.Buffer.writeString(a),
      e = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + 1 + d + e;
    this.CreateHeader();
  },
  CreatePacketSyncFacebookPlayer: function (a, b) {
    this.Type = c.NETWORK_LINK_PLAYER_ACCOUNT;
    this.Buffer.writeByte(fb.SUBEVENT_SYNC_FACEBOOK);
    var d = this.Buffer.writeString(a),
      e = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + 1 + d + e;
    this.CreateHeader();
  },
  CreatePacketSyncFbFriends: function (a) {
    this.Type = c.NETWORK_LINK_PLAYER_ACCOUNT;
    this.Buffer.writeByte(fb.SUBEVENT_SYNC_FB_FRIENDS);
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + 1 + a;
    this.CreateHeader();
  },
  CreatePacketLoginFbChangeName: function (a) {
    this.Type = c.NETWORK_LINK_PLAYER_ACCOUNT;
    this.Buffer.writeByte(fb.SUBEVENT_RENAME);
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + 1 + a;
    this.CreateHeader();
  },
  CreatePacketLoginFbCheckSetup: function () {
    this.Type = c.NETWORK_LINK_PLAYER_ACCOUNT;
    this.Buffer.writeByte(fb.SUBEVENT_CHECK_ACCOUNT_SETUP);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateJoinGame: function (a) {
    this.Type = c.NETWORK_GAME_JOIN;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 1;
    this.CreateHeader();
  },
  CreatTableJoinPacket: function (a, b) {
    this.Type = c.NETWORK_TABLE_JOIN;
    var d = 1;
    this.Buffer.writeByte(a);
    void 0 != b && "" != b && (d += this.Buffer.writeString(b));
    this.Length = HEADER_SIZE + d - 2;
    this.CreateHeader();
  },
  CreateLeaveTableAction: function (a) {
    this.Type = c.NETWORK_TABLE_LEAVE;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE + 1 - 2;
    this.CreateHeader();
  },
  CreateBaCayBetMoneyAction: function (a) {
    this.Type = c.NETWORK_BET_BACAY;
    this.Length = HEADER_SIZE + 2;
    this.Buffer.writeInt(a);
    this.CreateHeader();
  },
  CreateRaiseMoneyAction: function (a) {
    this.Type = c.NETWORK_RAISE;
    this.Length = HEADER_SIZE + 2;
    this.Buffer.writeInt(a);
    this.CreateHeader();
  },
  CreateDiscardAction: function () {
    this.Type = c.NETWORK_DISCARD;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  CreateDiscardCards: function (a) {
    this.Type = c.NETWORK_DISCARD;
    var b;
    for (b = 0; b < a.length; b++) this.Buffer.writeByte(a[b].encode());
    this.Length = HEADER_SIZE - 2 + a.length;
    this.CreateHeader();
  },
  CreateMovePiecePacket: function (a, b, d, e) {
    this.Type = c.NETWORK_MOVE_PIECE;
    this.Buffer.writeByte(a);
    this.Buffer.writeByte(b);
    this.Buffer.writeByte(d);
    this.Buffer.writeByte(e);
    this.Length = HEADER_SIZE - 2 + 4;
    this.CreateHeader();
  },
  CreateChessOfferPacket: function (a) {
    this.Type = c.NETWORK_CHESS_OFFER;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateUpdateObserverStatusPacket: function (a) {
    this.Type = c.NETWORK_UPDATE_OBSERVER_STATUS;
    this.Buffer.writeByte(a ? 1 : 0);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateContinueGamePacket: function (a) {
    this.Type = c.NETWORK_CONTINUE_GAME;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  CreateSetupCoTablePacket: function (a, b) {
    this.Type = c.NETWORK_SETUP_CO_TABLE;
    this.Buffer.writeInt(a);
    this.Buffer.writeByte(b);
    this.Length = HEADER_SIZE - 2 + 5;
    this.CreateHeader();
  },
  CreateGetTableInfo: function () {
    this.Type = c.NETWORK_GET_GAME_TABLE_INFO;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  GetTableInfoResult: function (a) {
    a.tableBetMoney = this.Buffer.readInt();
    a.playerList = this.GetPlayersInfo();
  },
  GetPlayersInfo: function () {
    for (var a = []; this.Buffer.isReadable(); ) {
      var b = new BkPlayerInfoData();
      b.name = this.Buffer.ReadString();
      b.position = this.Buffer.readByte();
      b.status = this.Buffer.readByte();
      b.money = this.Buffer.readInt();
      b.avatarId = this.Buffer.readString();
      b.level = this.Buffer.readInt();
      b.isMyFriend = 1 == this.Buffer.readByte();
      if (
        BkGlobal.currentGameID == GID.CO_TUONG ||
        BkGlobal.currentGameID == GID.CO_UP
      )
        b.isObserver = 1 == this.Buffer.readByte();
      a.push(b);
      logMessage(
        "User Name:" +
          b.name +
          " Pos: " +
          b.position +
          " Status: " +
          b.status +
          " Money: " +
          b.money +
          " avatarId: " +
          b.avatarId +
          " level:" +
          b.level
      );
    }
    return a;
  },
  CreateUpdateUserInfoPacket: function (a, b, d, e, f, g) {
    this.Type = c.NETWORK_UPDATE_PROFILE;
    var h = 0;
    a = this.Buffer.writeString(a);
    h += a;
    this.Buffer.writeByte(b);
    h += 1;
    b = this.Buffer.writeString(d);
    h += b;
    this.Buffer.writeLong(e);
    h += 8;
    e = this.Buffer.writeString(f);
    h += e;
    g = this.Buffer.writeString(g);
    this.Length = HEADER_SIZE - 2 + (h + g);
    this.CreateHeader();
  },
  CreatePacketUpdatePassword: function (a, b) {
    this.Type = c.NETWORK_UPDATE_PASSWORD;
    var d = this.Buffer.writeString(a),
      e = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + d + e;
    this.CreateHeader();
  },
  CreateFriendsListPacket: function () {
    this.Type = c.NETWORK_GET_FRIENDS;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  createPacketWithTypeAndByteData: function (a, b) {
    this.CreatePacketWithTypeAndByteData(a, b);
  },
  CreatePacketWithTypeAndByteData: function (a, b) {
    this.Type = a;
    this.Buffer.writeByte(b);
    this.Length = HEADER_SIZE + 1 - 2;
    this.CreateHeader();
  },
  createPacketWithOnlyType: function (a) {
    this.CreatePacketWithOnlyType(a);
  },
  CreatePacketWithOnlyType: function (a) {
    this.Type = a;
    this.Length = HEADER_SIZE - 2;
    this.CreateHeader();
  },
  CreateSendMailPacket: function (a, b, d) {
    this.Type = c.NETWORK_SEND_MAIL;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    d = this.Buffer.writeString(d);
    this.Length = HEADER_SIZE - 2 + a + b + d;
    this.CreateHeader();
  },
  CreateGetMailPacket: function (a) {
    this.Type = c.NETWORK_GET_MAIL;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + a;
    this.CreateHeader();
  },
  CreateDeleteMailPacket: function (a) {
    this.Type = c.NETWORK_DELETE_MAIL;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + a;
    this.CreateHeader();
  },
  CreateSelectAvatarPacket: function (a) {
    this.Type = c.NETWORK_SELECT_AVATAR;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateGetItemInfoPacket: function (a) {
    this.Type = c.NETWORK_GET_ITEM_INFO;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateBuyItemPacket: function (a) {
    this.Type = c.NETWORK_BUY_ITEM;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  ProcessGetItemInfo: function (a) {
    for (; this.Buffer.isReadable(); ) {
      var b = this.Buffer.readByte(),
        d = this.Buffer.readInt(),
        e = this.Buffer.readInt();
      a.Id = b;
      a.DayToLive = d;
      a.Price = e;
    }
  },
  ProcessGetBoughtItemCost: function (a) {
    a.itemCost = this.Buffer.readInt();
  },
  ProcessBuyItemFailedReason: function (a) {
    a.reason = this.Buffer.readByte();
  },
  CreateGetProfilePacket: function (a, b, d) {
    this.Type = b;
    a = this.Buffer.writeString(a);
    void 0 != d
      ? (this.Buffer.writeByte(d), (this.Length = HEADER_SIZE + a - 1))
      : (this.Length = HEADER_SIZE + a - 2);
    this.CreateHeader();
  },
  CreateInvitePlayerPacket: function (a) {
    this.Type = c.NETWORK_INVITE_PLAYER;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  CreateRequestSearchFriend: function (a) {
    this.Type = c.NETWORK_PLAYER_SEARCH_FRIENDS;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  ProcessSearchFriendReturn: function (a) {
    for (; this.Buffer.isReadable(); ) {
      var b = 1 == this.Buffer.readByte(),
        d = 1 == this.Buffer.readByte(),
        e = this.Buffer.readInt(),
        f = this.Buffer.ReadString(),
        g = this.Buffer.ReadString(),
        h = this.Buffer.readByte();
      if (BkGlobal.UserInfo.getUserName().toLowerCase() != f.toLowerCase()) {
        var k = new BkUserData();
        k.setOnlineStatus(b);
        k.setIsFriend(d);
        k.setLevel(e);
        k.setUserName(f);
        k.setAvatarId(g);
        k.setGameId(h);
        a.push(k);
      }
    }
  },
  CreatePlayWithPacket: function (a) {
    this.Type = c.NETWORK_JOIN_FRIEND_TABLE;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  CreateAcceptFriendRequestPacket: function (a) {
    this.Type = c.NETWORK_FRIEND_REQUEST_ACCEPT;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  CreateRejectFriendRequestPacket: function (a) {
    this.Type = c.NETWORK_FRIEND_REQUEST_REJECT;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  CreateRemoveFriendPacket: function (a) {
    this.Type = c.NETWORK_REMOVE_FRIEND;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  GetJoinFriendTableFailureReturn: function (a) {
    for (var b = 0, d = 0; this.Buffer.isReadable(); )
      (b = this.Buffer.readByte()),
        (d = this.Buffer.readByte()),
        (a.isFriendOnline = b),
        (a.gameId = d);
  },
  GetMailListReturn: function (a, b) {
    for (var d = 1; this.Buffer.isReadable(); ) {
      var e = this.Buffer.readString(),
        f = this.Buffer.readLong(),
        f = BkTime.convertToLocalTime24h(f),
        g = new BkMailInfo();
      if (1 == a) {
        var h = this.Buffer.readString();
        g.setSender(h);
      } else 2 == a && ((h = this.Buffer.readString()), g.setReceiver(h));
      h = this.Buffer.readString();
      1 == a && (d = this.Buffer.readByte());
      g.setMailId(e);
      g.setDate(f);
      g.setTitle(h);
      g.setMailStatus(d);
      b.push(g);
    }
  },
  GetMailReturn: function (a) {
    for (
      var b = 0, d = (b = ""), e = "", f = "", g = "";
      this.Buffer.isReadable();

    )
      (b = this.Buffer.readLong()),
        (b = BkTime.convertToLocalTime24h(b)),
        (d = this.Buffer.readString()),
        (e = this.Buffer.readString()),
        (f = this.Buffer.readString()),
        (g = this.Buffer.readString());
    a.setDate(b);
    a.setSender(d);
    a.setReceiver(e);
    a.setTitle(f);
    a.setContent(g);
  },
  CreateAddFriendPacket: function (a) {
    this.Type = c.NETWORK_FRIEND_REQUEST;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  ProcessRemoveFriendSuccess: function () {
    for (; this.Buffer.isReadable(); ) return this.Buffer.readString();
  },
  CreateLuckyboxPacket: function (a, b) {
    this.Type = c.NETWORK_LUCKY_BOX_REQUEST;
    this.Buffer.writeByte(a);
    var d = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + 1 + d;
    this.CreateHeader();
  },
  ProcessInvitedListReturn: function () {
    var a = [],
      b = this.Buffer.readByte();
    if (-1 == b)
      return (
        showToastMessage(
          "B\u1ea1n \u0111\u00e3 g\u1eedi t\u1ed1i \u0111a s\u1ed1 l\u1eddi m\u1eddi trong ng\u00e0y"
        ),
        Util.removeAnim(),
        null
      );
    for (var d = 0; d < b; d++) a[d] = this.Buffer.readByte();
    return a;
  },
  GetContentProviderInfo: function (a) {
    this.Type = c.NETWORK_GET_CONTENT_PROVIDER_INFO;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  getSMSProviderInfo: function () {
    this.Type = c.NETWORK_SERVER_REQUEST;
    this.Buffer.writeByte(16);
    this.Buffer.writeByte(PAYMENT_TYPE.ADD_MONEY_TYPE_SMS);
    this.Length = HEADER_SIZE - 2 + 2;
    this.CreateHeader();
  },
  CreatePaymentPacket: function (a, b, d) {
    this.Type = c.NETWORK_NAP_THE_CAO;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    this.Buffer.writeByte(d);
    this.Length = HEADER_SIZE + a + b + 1 - 2;
    this.CreateHeader();
  },
  createFBInvitedListPacket: function (a, b, d) {
    this.Type = c.NETWORK_FACEBOOK_INVITE_FRIENDS;
    this.Buffer.writeByte(Util.decodePrivateKey(d));
    a = this.Buffer.writeString(a);
    d = 0;
    if (cc.isArray(b))
      for (var e = 0; e < b.length; e++) d += this.Buffer.writeString(b[e]);
    this.Length = HEADER_SIZE - 2 + 1 + a + d;
    this.CreateHeader();
  },
  creatQuickTableJoinPacket: function (a, b) {
    this.Type = c.NETWORK_QUICK_TABLE_JOIN;
    this.Buffer.writeByte(a);
    this.Buffer.writeByte(b);
    this.Length = HEADER_SIZE + 2 - 2;
    this.CreateHeader();
  },
  createPacketJoinWebGameRoom: function (a) {
    this.Type = c.NETWORK_GAME_JOIN;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 1;
    this.CreateHeader();
  },
  CreateSetupTablepacket: function (a, b, d) {
    this.Type = c.NETWORK_SETUP_TABLE;
    this.Buffer.writeInt(a);
    this.Buffer.writeByte(b);
    "" != d && void 0 != d
      ? ((a = this.Buffer.writeString(d)),
        (this.Length = HEADER_SIZE + 4 + 1 + a - 2))
      : (this.Length = HEADER_SIZE + 4 + 1 - 2);
    this.CreateHeader();
  },
  CreateMakeNewConnection: function (a, b, d, e, f) {
    this.Type = c.NETWORK_MAKE_NEW_CONNECTION;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    this.Buffer.writeByte(d);
    this.Buffer.writeByte(e);
    this.Buffer.writeByte(f);
    this.Length = HEADER_SIZE + b + a + 3 - 2;
    this.CreateHeader();
  },
  CreateReconnect: function (a, b) {
    this.Type = c.NETWORK_RECONNECT;
    var d = this.Buffer.writeString(a),
      e = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE + e + d - 2;
    this.CreateHeader();
  },
  createChatMessage: function (a) {
    a = Util.refactorChatMessage(a);
    this.Type = c.NETWORK_TABLE_CHAT;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  createShowPhomPacket: function (a) {
    this.Type = c.NETWORK_SHOW_PHOM;
    for (var b = 0; b < a.length; b++) {
      var d = a[b];
      this.Buffer.writeByte(d.encode());
      this.Buffer.writeByte(d.phomIndex);
    }
    this.Length = HEADER_SIZE + 2 * a.length - 2;
    this.CreateHeader();
  },
  createShowUPacket: function (a) {
    this.Type = c.NETWORK_SHOW_U;
    for (var b = 0, d = 0; d < a.length; d++) {
      var e = a[d];
      0 != e.phomIndex &&
        (b++,
        this.Buffer.writeByte(e.encode()),
        this.Buffer.writeByte(e.phomIndex));
    }
    this.Length = HEADER_SIZE + 2 * b - 2;
    this.CreateHeader();
  },
  createSendCardPacket: function (a, b, d) {
    this.Type = c.NETWORK_SEND_CARD;
    this.Buffer.writeByte(a.encode());
    this.Buffer.writeByte(b);
    this.Buffer.writeByte(d);
    this.Length = HEADER_SIZE + 3 - 2;
    this.CreateHeader();
  },
  createXetBaiPacket: function (a) {
    this.Type = c.NETWORK_XET_BAI;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 1;
    this.CreateHeader();
  },
  requestSendTokenToPhoneNumberPacket: function (a) {
    this.Type = c.NETWORK_SEND_TOKEN_TO_PHONE;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  createUpdatePhoneNumberPacket: function (a) {
    this.Type = c.NETWORK_UPDATE_PHONE_NUMBER;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE + a - 2;
    this.CreateHeader();
  },
  createGetMaxBetLodeMoney: function () {
    this.Type = c.NETWORK_BET_LOTTE_TICKET;
    this.Buffer.writeByte(LDNS.GET_MAX_BET_MONEY);
    this.Length = HEADER_SIZE + 1;
    this.CreateHeader();
  },
  createBetLotteTicket: function (a, b, d) {
    this.Type = c.NETWORK_BET_LOTTE_TICKET;
    this.Buffer.writeByte(LDNS.PLACE_BET_LOTTE);
    this.Buffer.writeByte(a);
    this.Buffer.writeInt(b);
    this.Buffer.writeInt(d.length);
    for (b = a = 0; b < d.length; b++) a += this.Buffer.writeString(d[b]);
    this.Length = HEADER_SIZE + 1 + 1 + 4 + 4 + a - 2;
    this.CreateHeader();
  },
  getAllGiaiDau: function (a) {
    this.Type = c.NETWORK_BET_FOOTBALL;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 1;
    this.CreateHeader();
  },
  getLastestCuocEvent: function (a) {
    this.Type = c.NETWORK_BET_FOOTBALL;
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 1;
    this.CreateHeader();
  },
  createSendCuocFootball: function (a, b, d) {
    var e = d.length;
    this.Type = c.NETWORK_BET_FOOTBALL;
    this.Buffer.writeByte(a);
    this.Buffer.writeInt(b);
    this.Buffer.writeByte(e);
    for (a = 0; a < e; a++)
      (b = d[a]),
        this.Buffer.writeInt(b.data.matchId),
        this.Buffer.writeInt(b.data.id);
    this.Length = HEADER_SIZE + 1 + 4 + 1 + 8 * e - 2;
    this.CreateHeader();
  },
  createGetAllTranDauPacket: function (a, b) {
    this.Type = c.NETWORK_BET_FOOTBALL;
    this.Buffer.writeByte(a);
    this.Buffer.writeInt(b);
    this.Length = HEADER_SIZE + 1 + 4 - 2;
    this.CreateHeader();
  },
  createGetAllKeoPacket: function (a, b) {
    this.Type = c.NETWORK_BET_FOOTBALL;
    this.Buffer.writeByte(a);
    this.Buffer.writeInt(b);
    this.Length = HEADER_SIZE + 1 + 4 - 2;
    this.CreateHeader();
  },
  CreateBocAction: function () {
    this.CreatePacketWithOnlyType(c.NETWORK_PICK_CARD);
  },
  CreateDuoiAction: function () {
    this.CreatePacketWithOnlyType(c.NETWORK_FORFEIT);
  },
  CreatePacketXuongCuoc: function (a) {
    this.Type = c.NETWORK_XUONG_CUOC;
    this.Length = HEADER_SIZE + 1 + a.length - 2;
    this.Buffer.writeByte(a.length);
    for (var b = 0; b < a.length; b++) this.Buffer.writeByte(a[b]);
    Index = 0;
    this.CreateHeader();
  },
  CreateSetupChanTablePacket: function (a, b, d) {
    this.Type = c.NETWORK_SETUP_CHAN_TABLE;
    var e = 0,
      f = 0;
    a && (e = 1);
    b && (f = 1);
    this.Buffer.writeByte(e);
    this.Buffer.writeByte(f);
    for (a = 0; a < d.length; a++) this.Buffer.writeByte(d[a]);
    this.Length = HEADER_SIZE + 1 + 1 + 4 - 2;
    this.Index = 0;
    this.CreateHeader();
  },
  createVipInviteFriendMoneyRequest: function () {
    this.Type = c.NETWORK_VIP_FUNCTION;
    this.Buffer.writeByte(VC.VIP_INVITE_FRIEND_MONEY);
    this.Length = HEADER_SIZE - 2 + 1;
    this.Index = 0;
    this.CreateHeader();
  },
  vipMoneyBorrowRequest: function (a) {
    this.Type = c.NETWORK_VIP_FUNCTION;
    this.Buffer.writeByte(VC.VIP_BORROW_MONEY);
    this.Buffer.writeInt(a);
    this.Length = HEADER_SIZE - 2 + 5;
    this.Index = 0;
    this.CreateHeader();
  },
  vipMoneyTransferRequest: function (a, b) {
    this.Type = c.NETWORK_VIP_FUNCTION;
    this.Buffer.writeByte(VC.VIP_TRANSFER_MONEY);
    var d = this.Buffer.writeString(a);
    this.Buffer.writeInt(b);
    this.Length = HEADER_SIZE - 2 + 5 + d;
    this.Index = 0;
    this.CreateHeader();
  },
  getFullScreenAdsRewardRequest: function (a) {
    this.Type = c.NETWORK_ADS_FULL_SCR_CONTROL;
    this.Buffer.writeByte(ads.SUB_EVENT_TYPE_ADS_VIEWED_REWARD);
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 2;
    this.Index = 0;
    this.CreateHeader();
  },
  getFullScreenAdsSetting: function (a) {
    this.Type = c.NETWORK_ADS_FULL_SCR_CONTROL;
    this.Buffer.writeByte(ads.SUB_EVENT_TYPE_ADS_SHOW_SETTING);
    this.Buffer.writeByte(a);
    this.Length = HEADER_SIZE - 2 + 2;
    this.CreateHeader();
  },
  createFriendRequestPlay: function (a, b) {
    this.Type = c.NETWORK_PLAY_WITH_FRIEND_REQUEST;
    this.Buffer.writeByte(a);
    var d = this.Buffer.writeString(b);
    this.Length = HEADER_SIZE - 2 + 1 + d;
    this.CreateHeader();
  },
  createFriendInformResponse: function (a, b, d) {
    this.Type = c.NETWORK_PLAY_WITH_FRIEND_INFORM;
    this.Buffer.writeByte(a);
    this.Buffer.writeByte(b);
    a = this.Buffer.writeString(d);
    this.Length = HEADER_SIZE - 2 + 2 + a;
    this.CreateHeader();
  },
  createAdsStatePacket: function (a, b, d) {
    this.Type = c.NETWORK_ADS_FULL_SCR_CONTROL;
    this.Buffer.writeByte(ads.SUB_EVENT_TYPE_CLIENT_STATUS);
    this.Buffer.writeByte(a);
    this.Buffer.writeByte(b);
    this.Buffer.writeByte(d);
    this.Length = HEADER_SIZE - 2 + 4;
    this.CreateHeader();
  },
  createVerifyTransactionReceipt: function (a) {
    this.Type = c.NETWORK_VERIFY_TRANSACTION_RECEIPE;
    a = this.Buffer.writeString(a);
    this.Length = HEADER_SIZE - 2 + a;
    this.CreateHeader();
  },
  createVertifyTransactionGGIAP: function (a, b, d, e) {
    this.Type = c.NETWORK_VERIFY_TRANSACTION_GOOGLEIAP;
    a = this.Buffer.writeString(a);
    b = this.Buffer.writeString(b);
    d = this.Buffer.writeString(d);
    e = this.Buffer.writeString(e);
    this.Length = HEADER_SIZE - 2 + a + b + d + e;
    this.CreateHeader();
  },
});
var WebSocket = WebSocket || window.WebSocket || window.MozWebSocket,
  SOCKET_IS_OPEN = !0,
  SOCKET_IS_CLOSE = !1,
  BkSocket = cc.Class.extend({
    cn: null,
    urlSocket: null,
    isOpen: !1,
    pendingPacket: null,
    _delegate: null,
    connectionWS: null,
    ctor: function (a) {
      this.isOpen = SOCKET_IS_CLOSE;
    },
    init: function (a) {
      this.urlSocket = a;
      this.isOpen = SOCKET_IS_CLOSE;
    },
    initSocket: function () {
      logMessage("initSocket " + this.urlSocket);
      this.connectionWS = new WebSocket(this.urlSocket);
      this.connectionWS.binaryType = "arraybuffer";
      var a = this;
      this.connectionWS.onopen = function (b) {
        logMessage("Send Binary WS was opened -\x3e store serverIPAddress");
        Util.setServerIPAddress(a.urlSocket);
        a.isOpen = SOCKET_IS_OPEN;
        if (a._delegate && a._delegate.onOpen) a._delegate.onOpen(b);
      };
      this.connectionWS.onmessage = function (b) {
        b = new Int8Array(b.data);
        var d = new BkPacket();
        d.parsePacketWithBuffer(b);
        if (a._delegate && a._delegate.onReceive) a._delegate.onReceive(d);
      };
      this.connectionWS.onerror = function (b) {
        logMessage("sendBinary Error was fired");
        if (a._delegate && a._delegate.onError) a._delegate.onError(b);
      };
      this.connectionWS.onclose = function (b) {
        logMessage("_wsiSendBinary websocket instance closed.");
        a.isOpen = SOCKET_IS_CLOSE;
        if (a._delegate && a._delegate.onClose) a._delegate.onClose(b);
      };
    },
    sendPacket: function (a) {
      null != this.connectionWS
        ? this.isOpen
          ? ((this.pendingPacket = null),
            logMessage("Send packet: " + a.toString()),
            this.connectionWS.send(a.getConentPacketSend().buffer))
          : (logMessage("socket is close -\x3e reopen socket"),
            null == this.pendingPacket && (this.pendingPacket = a),
            this.reOpenSocket())
        : (logMessage("socket \x3d null -\x3e inital socket"),
          this.reOpenSocket());
    },
    reOpenSocket: function () {
      logMessage("reOpenSocket");
      if (this._delegate && this._delegate.onRepenSocket)
        this._delegate.onRepenSocket();
    },
    setDelegate: function (a) {
      this._delegate = a;
    },
    closeConnection: function () {
      null != this.connectionWS &&
        (this.connectionWS.close(), (this.connectionWS = null));
      this.setDelegate(null);
      this.isOpen = SOCKET_IS_CLOSE;
    },
  });
var PING_TIMER_DURATION = 8,
  NUMBER_PING = 2,
  RECONNECT_TIMER_DURATION = 5,
  NUMBER_RECONNECT = 2,
  MAKE_NEW_CONNECTION_DURATION = 8,
  NUMBER_REPEAT_MNC = 1,
  MAX_TIME_PROCESSING_IN_QUEUE = 1e4,
  MAX_TIME_PROCESSING_IN_QUEUE_MAU_BINH = 3e4,
  MAX_EVENT_INQUEUE = 30,
  IP = "zigavn.com",
  DEFAULT_SOCKET_URL = "://" + IP + ":18090/";
BkConnectionManager = {
  connection: null,
  lastPacket: null,
  countScheduleMNC: 0,
  countReconnect: 0,
  countPing: 0,
  countClose: 0,
  conStatus: null,
  qPacket: null,
  isProcessing: !1,
  lastTimeProcessing: -1,
  isIDLETimeOut: !1,
  isManualClose: !1,
  onHideListenner: null,
  onShowListenner: null,
  initWithUrl: function (a) {
    this.closeConnection();
    var b = "";
    void 0 != a
      ? (b = a)
      : isWebPlatform()
      ? void 0 != cc.game.config.app &&
        void 0 != cc.game.config.app.gamews &&
        (b = "wss" + cc.game.config.app.gamews)
      : (b = isFBInstantGame()
          ? "wss://zigavn.com/ws/"
          : Util.getServerIPAddress());
    this.isManualClose = !1;
    this.connection = new BkSocket();
    this.connection.init(b);
    this.connection.initSocket();
    this.connection.setDelegate(this);
  },
  removeEventTabChange: function () {
    null != this.onHideListenner &&
      void 0 != this.onHideListenner &&
      (cc.eventManager.removeListener(this.onHideListenner),
      (this.onHideListenner = null),
      logMessage("removeEventTabChange: onHideListenner"));
    null != this.onShowListenner &&
      void 0 != this.onShowListenner &&
      (cc.eventManager.removeListener(this.onShowListenner),
      (this.onShowListenner = null),
      logMessage("removeEventTabChange: onShowListenner"));
  },
  initEventsTabChange: function () {
    logMessage("initEventsTabChange");
    this.removeEventTabChange();
    var a = this;
    this.onHideListenner = cc.eventManager.addCustomListener(
      cc.game.EVENT_HIDE,
      function () {
        a.onTabHide();
      }
    );
    this.onShowListenner = cc.eventManager.addCustomListener(
      cc.game.EVENT_SHOW,
      function () {
        a.onTabShow();
      }
    );
  },
  onTabShow: function () {
    logMessage("onShow");
    var a = BkGlobal.isTabActive;
    BkGlobal.isTabActive = !0;
    a != BkGlobal.isTabActive &&
      (BkConnectionManager.isOpenConnection() ||
      BkGlobal.currentGS != GS.INGAME_GAME
        ? BkConnectionManager.isProcessing
          ? (BkConnectionManager.lastTimeProcessing = BkTime.GetCurrentTime())
          : this.processNextEventInQueue()
        : (logMessage("mat ket noi -\x3e reconnect"),
          BkConnectionManager.scheduleReconnect(),
          BkConnectionManager.onReconnect()));
  },
  onTabHide: function () {
    logMessage("onHide");
    BkGlobal.isTabActive = !1;
  },
  setActiveApp: function () {
    BkGlobal.isTabActive = !0;
  },
  prepareConnection: function () {
    logMessage("... prepare connection");
    this.isOpenConnection() || this.initWithUrl();
  },
  reLogin: function () {
    null == BkGlobal.UserInfo
      ? (logMessage(
          "reLogin: BkGlobal.UserInfo \x3d\x3d null -\x3e reload page or restart game"
        ),
        isWebPlatform()
          ? Util.reloadWebPage()
          : isFBInstantGame()
          ? cc.director.runScene(new ZigaLoadingScene())
          : cc.game.restart())
      : (logMessage(
          "reLogin user: " +
            BkGlobal.UserInfo.userName +
            " password: " +
            BkGlobal.UserInfo.password +
            " clientId: " +
            Util.getClientID()
        ),
        BkLogicManager.getLogic().doLoginGame(
          BkGlobal.UserInfo.userName,
          BkGlobal.UserInfo.password,
          Util.getClientID()
        ));
  },
  onRepenSocket: function () {
    Util.showAnim(!1);
    this.conStatus = CONECTION_STATE.RELOGIN;
    this.initWithUrl();
  },
  onOpen: function (a) {
    logMessage("onOpen callback this.conStatus: " + this.conStatus);
    this.conStatus == CONECTION_STATE.MAKING_NEW_CONNECTION
      ? (logMessage("MAKING_NEW_CONNECTION"),
        this.sendMakeNewConnectionPacket())
      : this.conStatus == CONECTION_STATE.RECONNECTING
      ? (logMessage("RECONNECTING"), this.sendReconnetPacket())
      : this.conStatus == CONECTION_STATE.RELOGIN
      ? this.reLogin()
      : this.conStatus == CONECTION_STATE.AUTO_LOGIN
      ? BkLogicManager.getLogic().sendPacketAutoLogin()
      : this.conStatus == CONECTION_STATE.LOGIN_FACEBOOK
      ? FbService.doLoginFbUser(cc.username, cc.password, Util.getClientID())
      : this.conStatus == CONECTION_STATE.LOGIN_FB_INSTANT
      ? FbService.doLoginFbUser(
          cc.usernameIns,
          cc.passwordIns,
          Util.getClientID()
        )
      : (logMessage("cac th khac"),
        null != this.connection.pendingPacket
          ? this.send(this.connection.pendingPacket)
          : this.reLogin());
  },
  onError: function (a) {
    logMessage("onError callback");
  },
  onClose: function (a) {
    this.closeConnection();
    if (BkLogicManager.getLogic().isLogout)
      (BkLogicManager.getLogic().isLogout = !1),
        Util.removeAnim(),
        Util.reloadWebPage();
    else if (
      (logMessage(
        "onClose callback " +
          this.countClose +
          "- this.conStatus: " +
          this.conStatus
      ),
      this.isIDLETimeOut)
    )
      logMessage(
        "isIDLETimeOut -\x3e wait action click popup renew connection"
      ),
        (this.isIDLETimeOut = !1);
    else if (
      this.conStatus == CONECTION_STATE.RELOGIN ||
      this.conStatus == CONECTION_STATE.LOGIN_FACEBOOK
    )
      this.countClose++, this.processOnClose();
  },
  processOnClose: function () {
    if (3 < this.countClose) {
      logMessage("can't reconnect -\x3e show thong bao");
      this.countClose = 0;
      var a = function () {
        logMessage("onOKClick processOnClose");
        isWebPlatform()
          ? Util.reloadWebPage()
          : isFBInstantGame()
          ? cc.director.runScene(new ZigaLoadingScene())
          : cc.game.restart();
      };
      Util.removeAnim();
      isWebPlatform()
        ? showPopupMessageConfirmEx(
            BkConstString.STR_NETWORK_LOST_CONNECT,
            a,
            !0
          )
        : showPopupMessageWith(
            BkConstString.STR_NETWORK_LOST_CONNECT,
            "",
            null,
            a
          );
    } else
      logMessage("try reconnect -\x3e " + this.countClose),
        Util.showAnim(!1),
        this.initWithUrl();
  },
  getConnection: function () {
    return this.connection;
  },
  send: function (a) {
    Util.isRestartingGame()
      ? logMessage("send packet khi dang restarting game -\x3e reject")
      : (this.prepareForSend(a),
        this.isOpenConnection() && this.connection.sendPacket(a));
  },
  isOpenConnection: function () {
    return null == this.connection ? !1 : this.connection.isOpen;
  },
  prepareForSend: function (a) {
    Util.isAutoSendPacket(a) || this.setActiveApp();
    Util.isUserActionPacket(a) &&
      this.isMakeNewConnectionState(a) &&
      (logMessage("Last packet: " + a.Type),
      (this.lastPacket = a),
      this.scheduleMakeNewConnection());
  },
  isMakeNewConnectionState: function (a) {
    return BkGlobal.currentGS != GS.INGAME_GAME ||
      a.Type == c.NETWORK_TABLE_LEAVE
      ? !0
      : !1;
  },
  doMakeNewConnection: function () {
    logMessage("Making new connection....");
    Util.showAnim(!1);
    this.conStatus = CONECTION_STATE.MAKING_NEW_CONNECTION;
    this.initWithUrl();
  },
  sendMakeNewConnectionPacket: function () {
    var a = -1,
      b = -1,
      d = -1;
    switch (BkGlobal.currentGS) {
      case GS.CHOOSE_TABLE:
        a = BkGlobal.currentGameID;
        b = BkGlobal.currentRoomID;
        break;
      case GS.INGAME_GAME:
        (a = BkGlobal.currentGameID),
          (b = BkGlobal.currentRoomID),
          (d = BkGlobal.currentTableID);
    }
    var e = "";
    null != BkGlobal.UserInfo.userName &&
      void 0 != BkGlobal.UserInfo.userName &&
      (e = BkGlobal.UserInfo.userName);
    logMessage(
      BkGlobal.UserInfo.userName +
        " - " +
        BkGlobal.UserInfo.password +
        " - " +
        a +
        " - " +
        b +
        " - " +
        d
    );
    var f = new BkPacket();
    f.CreateMakeNewConnection(e, BkGlobal.UserInfo.password, a, b, d);
    this.send(f);
  },
  onMakeNewConnection: function () {
    BkConnectionManager.countScheduleMNC++;
    logMessage(
      "new onMakeNewConnection " + BkConnectionManager.countScheduleMNC
    );
    BkConnectionManager.countScheduleMNC >= NUMBER_REPEAT_MNC + 1
      ? (logMessage("finish schedule"),
        (BkConnectionManager.countScheduleMNC = 0),
        BkConnectionManager.renewConnection(
          BkConstString.STR_NETWORK_LOST_CONNECT
        ))
      : BkConnectionManager.doMakeNewConnection();
  },
  scheduleMakeNewConnection: function () {
    logMessage("scheduleMakeNewConnection");
    this.countScheduleMNC = 0;
    this.unScheduleMakeNewConnection(!1);
    if (!this.isOpenConnection()) this.onMakeNewConnection();
    var a = getCurrentScene();
    null != a &&
      a.schedule(
        this.onMakeNewConnection,
        MAKE_NEW_CONNECTION_DURATION,
        NUMBER_REPEAT_MNC
      );
  },
  unScheduleMakeNewConnection: function (a) {
    void 0 == a && (a = !0);
    a && Util.removeAnim();
    a = getCurrentScene();
    null != a && a.unschedule(this.onMakeNewConnection);
  },
  onPing: function () {
    BkConnectionManager.countPing++;
    logMessage("onPing " + BkConnectionManager.countPing);
    2 == BkConnectionManager.countPing &&
      (logMessage("show Anim"), Util.showAnim(!1));
    var a = BkConnectionManager.isOpenConnection();
    BkConnectionManager.countPing != NUMBER_PING + 1 && a
      ? BkGlobal.isTabActive
        ? (logMessage("onPing -\x3e send ping packet - do nothing"),
          (a = new BkPacket()),
          a.CreatePacketWithOnlyType(c.NETWORK_PING_MESSAGE),
          BkConnectionManager.send(a))
        : logMessage("tab inActive -\x3e don't send ping")
      : (logMessage("onFinishPing or isOpenConnection: " + a),
        BkConnectionManager.scheduleReconnect(),
        BkConnectionManager.onReconnect());
  },
  unScheduleIngame: function () {
    this.unSchedulePing();
    this.unScheduleReconnect();
  },
  unSchedulePing: function () {
    logMessage("unSchedulePing");
    Util.removeAnim();
    var a = getCurrentScene();
    null != a && a.unschedule(this.onPing);
  },
  schedulePing: function () {
    BkConnectionManager.countPing = 0;
    this.unSchedulePing();
    this.unScheduleReconnect();
    if (BkGlobal.currentGS == GS.INGAME_GAME) {
      var a = getCurrentScene();
      null != a && a.schedule(this.onPing, PING_TIMER_DURATION, NUMBER_PING);
    }
  },
  stopAllScheduleGame: function () {
    this.unScheduleMakeNewConnection();
    this.unSchedulePing();
    this.conStatus == CONECTION_STATE.RECONNECTING &&
      this.unScheduleReconnect();
  },
  renewConnection: function (a) {
    logMessage("renewConnection");
    Util.removeAnim();
    var b = this;
    this.unScheduleMakeNewConnection();
    this.unSchedulePing();
    this.conStatus == CONECTION_STATE.RECONNECTING &&
      this.unScheduleReconnect();
    logMessage("CONECTION_STATE.RELOGIN");
    this.conStatus = CONECTION_STATE.RELOGIN;
    var d = function () {
      logMessage("onOKClick : renewConnection");
      Util.showAnim(!1);
      b.initWithUrl();
    };
    isWebPlatform()
      ? showPopupMessageConfirmEx(a, d, !0)
      : showPopupMessageWith(a, "", null, d);
  },
  scheduleReconnect: function () {
    BkConnectionManager.countReconnect = 0;
    var a = getCurrentScene();
    null != a &&
      a.schedule(this.onReconnect, RECONNECT_TIMER_DURATION, NUMBER_RECONNECT);
  },
  unScheduleReconnect: function () {
    var a = getCurrentScene();
    null != a && a.unschedule(this.onReconnect);
  },
  onReconnect: function () {
    BkConnectionManager.unSchedulePing();
    BkConnectionManager.countReconnect++;
    Util.showAnim(!1);
    logMessage("onReconnect " + BkConnectionManager.countReconnect);
    BkConnectionManager.countReconnect >= NUMBER_RECONNECT + 1
      ? (logMessage("finish reconnect"),
        (BkConnectionManager.countReconnect = 0),
        BkConnectionManager.renewConnection(
          BkConstString.STR_NETWORK_LOST_CONNECT
        ))
      : (logMessage("onReconnect"),
        BkGlobal.currentGS == GS.INGAME_GAME &&
          this.conStatus != CONECTION_STATE.RELOGIN &&
          BkGlobal.currentGS == GS.INGAME_GAME &&
          (logMessage("Reconnecting...."),
          BkConnectionManager.initWithUrl(),
          (BkConnectionManager.conStatus = CONECTION_STATE.RECONNECTING)));
  },
  sendReconnetPacket: function () {
    logMessage("sendReconnetPacket");
    if (null == BkGlobal.UserInfo)
      logMessage("user null -\x3e can't make new connection");
    else {
      var a = new BkPacket();
      a.CreateReconnect(BkGlobal.UserInfo.userName, BkGlobal.UserInfo.password);
      BkConnectionManager.send(a);
    }
  },
  onReconnectSuccess: function () {
    logMessage("onReconnectSuccess -\x3e send SYNS");
    Util.removeAnim();
    BkConnectionManager.unScheduleReconnect();
    BkLogicManager.getInGameLogic().onReconnectSuccess();
  },
  onNetworkDisconnect: function () {
    this.unScheduleMakeNewConnection();
    this.unSchedulePing();
    BkGlobal.currentGS != GS.INGAME_GAME
      ? this.renewConnection(BkConstString.STR_NETWORK_LOST_CONNECT)
      : this.scheduleReconnect();
  },
  onIdleTimeOut: function () {
    this.unScheduleMakeNewConnection();
    this.unSchedulePing();
    this.isIDLETimeOut = !0;
    this.isOpenConnection()
      ? this.renewConnection(BkConstString.STR_NETWORK_IDLE_TIME_OUT)
      : this.renewConnection(BkConstString.STR_NETWORK_LOST_CONNECT_LONG_TIME);
  },
  onException: function () {
    BkGlobal.currentGS != GS.INGAME_GAME
      ? this.renewConnection(BkConstString.STR_NETWORK_EXCEPTION)
      : this.closeConnection();
  },
  onTerminate: function () {
    this.unScheduleMakeNewConnection();
    this.unSchedulePing();
    this.closeConnection();
    Util.removeClientSession(key.userLoginInfo);
    Util.removeClientSetting(key.userLoginInfo);
    cc.screen.fullScreen() && exitFullScreen();
    var a = function () {
      isFBInstantGame() || isWebPlatform()
        ? Util.reloadWebPage()
        : cc.game.restart();
    };
    showPopupMessageWith(BkConstString.STR_NETWORK_TERMINATED, "", a, a);
  },
  closeConnection: function () {
    this.isManualClose = !0;
    null != this.connection &&
      (this.connection.closeConnection(), (this.connection = null));
  },
  processNetworkLockedClient: function () {
    this.closeConnection();
    Util.removeClientSetting(key.userLoginInfo);
    showPopupMessageWith(BkConstString.STR_LOCKED_CLIENT, "", function () {
      logMessage("onOKClick processNetworkLockedClient");
      openUrl("https://zigavn.com/quy-dinh#10-quy-dinh-ve-xu-ly-vi-pham");
    });
  },
  processConnectionEvent: function (a) {
    this.unSchedulePing();
    switch (a.Type) {
      case c.NETWORK_RECONNECT_SUCCESS:
        this.conStatus = CONECTION_STATE.CONNECTION_NORMAL;
        this.onReconnectSuccess();
        break;
      case c.NETWORK_RECONNECT_FAILURE:
        this.conStatus = CONECTION_STATE.LOST_CONNECTION;
        Util.removeAnim();
        this.renewConnection(BkConstString.STR_NETWORK_LOST_CONNECT);
        break;
      case c.NETWORK_MAKE_NEW_CONNECTION_SUCCESS:
        logMessage("NETWORK_MAKE_NEW_CONNECTION_SUCCESS");
        this.conStatus = CONECTION_STATE.CONNECTION_NORMAL;
        Util.removeAnim();
        null != this.lastPacket &&
          (logMessage("resend last packet with type" + this.lastPacket.Type),
          this.send(this.lastPacket));
        break;
      case c.NETWORK_MAKE_NEW_CONNECTION_FAILED:
        logMessage("NETWORK_MAKE_NEW_CONNECTION_FAILED");
        Util.removeAnim();
        this.renewConnection(BkConstString.STR_NETWORK_LOST_CONNECT);
        break;
      case c.NETWORK_DISCONNECT:
        this.onNetworkDisconnect();
        break;
      case c.NETWORK_EXCEPTION:
        this.onException();
        break;
      case c.NETWORK_SESSION_TERMINATED:
        this.onTerminate();
        break;
      case c.NETWORK_WRITER_IDLE_TIMEOUT:
        this.onIdleTimeOut();
        break;
      case c.NETWORK_LOCKED_CLIENT:
        this.processNetworkLockedClient();
    }
  },
  inviteViewAds: function (a) {
    if (isWebPlatform()) new BkHeartPromotionWd(0).showWithParent();
    else {
      a =
        void 0 === a
          ? GET_ADS_STATE.HEART_REQUEST
          : GET_ADS_STATE.INVITE_VIEW_ADS;
      var b = function () {
          BkGlobal.stateRequestGetSettingAds = a;
          BkConnectionManager.getFullScreenAdsSetting(1);
        },
        d = function () {
          logMessage("onHideClick");
          NativeInterface.logFirebaseEvent(EVENT_NAME.CANCEL_INVITE_VIEW_VIDEO);
          BkConnectionManager.sendPacketAdsState(
            ads.PARTNER_GOOGGLE,
            ads.ADS_TYPE_REWARDED_VIDEO_ADS,
            ads.STATE_USER_CANCEL
          );
        };
      NativeInterface.logFirebaseEvent(EVENT_NAME.INVITE_VIEW_VIDEO);
      isFBInstantGame() && !SHOW_INSTANT_ADS_FLAG
        ? showPopupMessageWith(
            BkConstString.STR_NO_HEART_INVITE_FRIEND,
            "",
            b,
            d
          )
        : showPopupMessageWith(BkConstString.STR_INVITE_VIEW_ADS, "", b, d);
    }
  },
  getFullScreenAdsSetting: function (a) {
    logMessage(
      "getFullScreenAdsSetting adsContinueShowFlg: " +
        BkGlobal.adsContinueShowFlg
    );
    a = void 0 === a ? 0 : a;
    var b = new BkPacket();
    b.getFullScreenAdsSetting(a);
    this.send(b);
  },
  getFullScreenAdsRewardRequest: function (a) {
    var b = new BkPacket();
    b.getFullScreenAdsRewardRequest(a);
    this.send(b);
  },
  sendPacketAdsState: function (a, b, d) {
    var e = new BkPacket();
    e.createAdsStatePacket(a, b, d);
    this.send(e);
  },
  showFullScreenAds: function (a, b) {
    isFBInstantGame() && BKFbAdsManager.showFBInstRewardedVideo();
    logMessage("showFullScreenAds -\x3e cache for next: " + a + " - " + b);
    b == ads.ADS_TYPE_INTERSTITIAL_ADS
      ? ((BkGlobal.nextInterStitialPartner = a),
        0 <= BkGlobal.crInterStitialPartner &&
          (logMessage(
            "cached interstitial ads -\x3e show cache partner: " +
              BkGlobal.crInterStitialPartner
          ),
          (a = BkGlobal.crInterStitialPartner)))
      : b == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
        ((BkGlobal.nextVideoRewardedPartner = a),
        0 <= BkGlobal.crVideoRewardedPartner &&
          (logMessage(
            "cached VideoRewarded ads -\x3e show cache partner: " +
              BkGlobal.crVideoRewardedPartner
          ),
          (a = BkGlobal.crVideoRewardedPartner)));
    logMessage("showFullScreenAds adsPartner:" + a + " adsCategory: " + b);
    BkGlobal.lastFullScreenPartnerType = a;
    BkGlobal.lastFullScreenAdsType = b;
    Util.showAnim();
    a == ads.PARTNER_GOOGGLE
      ? b == ads.ADS_TYPE_INTERSTITIAL_ADS
        ? NativeInterface.showInterstitialAd()
        : b == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
          NativeInterface.showRewardedVideoAd()
      : a == ads.PARTNER_FACEBOOK
      ? b == ads.ADS_TYPE_INTERSTITIAL_ADS
        ? NativeInterface.showFBInterstitialAd()
        : b == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
          NativeInterface.showFBRewardedVideoAd()
      : a == ads.PARTNER_TWITTER &&
        (b == ads.ADS_TYPE_INTERSTITIAL_ADS
          ? NativeInterface.showMPInterstitialAd()
          : b == ads.ADS_TYPE_REWARDED_VIDEO_ADS &&
            NativeInterface.showMPRewardedVideoAd());
    logMessage("show fullscreen ads -\x3e off am thanh");
    pauseNhacNenSound();
  },
  showPopupInviteViewFullScreenAds: function (a, b, d, e) {
    if (a == ads.TYPE_ADS_RES_INSTANT)
      (BkGlobal.isPushFullScreenAds = !1), this.showFullScreenAds(d, e);
    else {
      var f = this;
      showPopupMessageWith(
        b,
        "",
        function () {
          BkGlobal.isPushFullScreenAds = !1;
          f.showFullScreenAds(d, e);
        },
        function () {
          logMessage("onHideClick");
          NativeInterface.logFirebaseEvent(EVENT_NAME.CANCEL_INVITE_VIEW_VIDEO);
          BkConnectionManager.sendPacketAdsState(
            ads.PARTNER_GOOGGLE,
            ads.ADS_TYPE_REWARDED_VIDEO_ADS,
            ads.STATE_USER_CANCEL
          );
        }
      );
    }
  },
  showMessageAdsFullScreenOff: function (a) {
    logMessage("showMessageAdsFullScreenOff: " + a);
    var b = BkConstString.STR_ADS_FULLSCREEN_OFF_DAY;
    0 < a &&
      (b = BkConstString.insertIntoStringWithListString(
        BkConstString.STR_ADS_FULLSCREEN_OFF,
        [a]
      ));
    showPopupMessageWith(b);
  },
  adsViewedRewardCallback: null,
  onAdsFullScreenControl: function (a) {
    var b = a.Buffer.readByte();
    logMessage("NETWORK_ADS_FULL_SCR_CONTROL: " + b);
    if (b == ads.SUB_EVENT_TYPE_ADS_SHOW_SETTING)
      if (0 == a.Buffer.readByte())
        logMessage("off ads fullscreen"),
          (b = -1),
          a.Buffer.isReadable() && (b = a.Buffer.readByte()),
          this.showMessageAdsFullScreenOff(b);
      else {
        var b = a.Buffer.readByte(),
          d = "";
        b == ads.TYPE_ADS_RES_POPUP && (d = a.Buffer.readString());
        var e = a.Buffer.readByte();
        a = a.Buffer.readByte();
        this.showPopupInviteViewFullScreenAds(b, d, e, a);
      }
    else
      b == ads.SUB_EVENT_TYPE_ADS_VIEWED_REWARD &&
        (logMessage("remove anim"),
        Util.removeAnim(),
        (b = a.Buffer.readInt()),
        (a = a.Buffer.readByte()),
        (BkGlobal.adsContinueShowFlg = a),
        logMessage("heartCtn: " + b + " adsContinueShowFlg:" + a),
        BkLogicManager.getLogic().updateHeartUI(b, REASON_ADD_HEART.VIEW_ADS),
        null != this.adsViewedRewardCallback &&
          (this.adsViewedRewardCallback(),
          (this.adsViewedRewardCallback = null)));
  },
  showAdsBanner: function (a, b) {
    if (!isFBInstantGame()) {
      var d = NativeInterface.getCurrentBannerAdsPartner();
      logMessage(
        "show ads banner " +
          b +
          " - crBanerAdspartner: " +
          d +
          " - partner: " +
          a
      );
      d != a &&
        (logMessage(
          "dang k show ads hoac da dang show banner cua partner khac"
        ),
        a == ads.PARTNER_GOOGGLE
          ? NativeInterface.showAdmobBaner()
          : a == ads.PARTNER_FACEBOOK
          ? NativeInterface.showFbAdBaner()
          : a == ads.PARTNER_TWITTER && NativeInterface.showMPAdBanner());
      NativeInterface.logFirebaseEvent(EVENT_NAME.VIEW_ADS_BANNER);
      0 < b && NativeInterface.autoDestroyBanner(b);
    }
  },
  showAdsBannerStartGame: function () {
    isFBInstantGame() ||
      (logMessage("showAdsBannerStartGame: " + BkGlobal.partnerAdsBanner),
      0 > BkGlobal.partnerAdsBanner ||
        (BkGlobal.partnerAdsBanner == ads.PARTNER_GOOGGLE
          ? NativeInterface.showAdmobBaner()
          : BkGlobal.partnerAdsBanner == ads.PARTNER_FACEBOOK
          ? NativeInterface.showFbAdBaner()
          : BkGlobal.partnerAdsBanner == ads.PARTNER_TWITTER &&
            NativeInterface.showMPAdBanner()));
  },
  offAdsBannerFinishGame: function () {
    isFBInstantGame() ||
      (logMessage("offAdsBannerFinishGame: " + BkGlobal.partnerAdsBanner),
      0 > BkGlobal.partnerAdsBanner || NativeInterface.destroyAds());
  },
  onAdsServerPush: function (a) {
    if (!isWebPlatform()) {
      var b = a.Buffer.readByte(),
        d = a.Buffer.readByte(),
        e = 0;
      0 != d && (e = a.Buffer.readByte());
      logMessage(
        "NETWORK_ADS_SERVER_PUSH subEventCode:" +
          b +
          " adsType:" +
          d +
          " partner:" +
          e
      );
      if (b == ads.SUB_EVENT_TYPE_ADS_BANNER)
        if (1 == d)
          if (cc.sys.os == cc.sys.OS_ANDROID) BkGlobal.partnerAdsBanner = e;
          else {
            if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
              (b = -1),
                a.Buffer.isReadable() && (b = a.Buffer.readInt()),
                this.showAdsBanner(e, b);
          }
        else
          0 == d &&
            (NativeInterface.destroyAds(),
            (BkGlobal.partnerAdsBanner = -1),
            logMessage("off ads banner"));
      else
        b == ads.SUB_EVENT_TYPE_ADS_FULL_SCREEN &&
          (0 == d
            ? NativeInterface.destroyAds()
            : isFBInstantGame()
            ? BKFbAdsManager.showFBInstInterstitial()
            : ((BkGlobal.isPushFullScreenAds = !0),
              this.showFullScreenAds(e, d)));
    }
  },
  processAdsEvent: function (a) {
    if (!isWebPlatform())
      switch (a.Type) {
        case c.NETWORK_ADS_FULL_SCR_CONTROL:
          this.onAdsFullScreenControl(a);
          break;
        case c.NETWORK_ADS_SERVER_PUSH:
          this.onAdsServerPush(a);
      }
  },
  showIndicatorChangeNetwork: function () {
    logMessage("showIndicatorChangeNetwork");
  },
  onReceive: function (a) {
    BkGlobal.isNetworkConnected = !0;
    -42 != a.Type && 46 != a.Type && logMessage("onReceive: " + a.toString());
    this.conStatus != CONECTION_STATE.CONNECTION_NORMAL &&
      (this.conStatus = CONECTION_STATE.CONNECTION_NORMAL);
    BkGlobal.isSwitchSceneAnimation
      ? (logMessage(
          "nhan event khi dang chuyen scene-\x3e queue Event -\x3e queueEvent"
        ),
        (a.isQueueInSwitchScene = !0),
        this.queuePackage(a))
      : (this.unScheduleMakeNewConnection(!1),
        BkGlobal.currentGS == GS.INGAME_GAME && this.schedulePing(),
        BkLogicManager.isQueueEvent(a.Type)
          ? this.queuePackage(a)
          : this.processNextPackage(a));
  },
  processNextEventInQueue: function () {
    null == this.qPacket && ((this.qPacket = []), (this.isProcessing = !1));
    logMessage("processNextEventInQueue " + this.qPacket.length);
    if (0 < this.qPacket.length) {
      this.lastTimeProcessing = BkTime.GetCurrentTime();
      this.isProcessing = !0;
      var a = this.qPacket.shift();
      logMessage(
        "process Packet with Type: " +
          a.Type +
          " - time: " +
          this.lastTimeProcessing
      );
      this.processNextPackage(a);
      a.isQueueInSwitchScene &&
        (logMessage("la event dc queue khi chuyen scene"),
        BkLogicManager.isQueueEvent(a.Type)
          ? logMessage(
              "la event dc queue trong ingame -\x3e se dc call next event sau khi xu ly xong event"
            )
          : (logMessage(
              "k phai event dc queue trong ingame -\x3e auto call event"
            ),
            this.processNextEventInQueue()));
    } else this.isProcessing = !1;
    this.isProcessing
      ? this.scheduleAutoProcessPacketInQueue()
      : this.unScheduleAutoProcessPacketInQueue();
  },
  clearQueue: function () {
    null != this.qPacket && ((this.qPacket = []), (this.isProcessing = !1));
  },
  onSceneTransitionDidFinish: function () {
    BkGlobal.isSwitchToCurrentScene || this.processNextEventInQueue();
  },
  forceProcessPacket: function () {
    if (BkGlobal.isTabActive) {
      var a = BkTime.GetCurrentTime() - this.lastTimeProcessing;
      logMessage("deltaTime " + a);
      var b = MAX_TIME_PROCESSING_IN_QUEUE;
      BkGlobal.currentGameID == GID.MAU_BINH &&
        (b = MAX_TIME_PROCESSING_IN_QUEUE_MAU_BINH);
      a > b &&
        (logMessage("tac queue -\x3e auto call process next event"),
        this.processNextEventInQueue());
    } else logMessage("tab inactive -\x3e don't forceProcessPacket");
  },
  queuePackage: function (a) {
    null == this.qPacket && ((this.qPacket = []), (this.isProcessing = !1));
    this.qPacket.push(a);
    logMessage("isProcessing: " + this.isProcessing);
    for (a = 0; a < this.qPacket.length; a++);
    if (BkGlobal.isTabActive)
      BkGlobal.isSwitchSceneAnimation
        ? logMessage("dang chuyen scene -\x3e k processPacket")
        : this.isProcessing
        ? this.forceProcessPacket()
        : this.processNextEventInQueue();
    else if (
      (logMessage("tab in active -\x3e only queue event"),
      this.qPacket.length > MAX_EVENT_INQUEUE)
    ) {
      logMessage(
        "tab in active long time -\x3e show popup \x26 close connection"
      );
      var b = this;
      showPopupMessageWith(
        BkConstString.STR_NETWORK_IDLE_TIME_OUT,
        "",
        function () {
          logMessage("onOKClick queuePackage ");
          isWebPlatform()
            ? (switchToSceneWithGameState(GS.PREPARE_GAME, !1, !1),
              b.closeConnection(),
              Util.reloadWebPage())
            : b.reLogin();
        }
      );
    }
  },
  unScheduleAutoProcessPacketInQueue: function () {
    var a = getCurrentScene();
    null != a && a.unschedule(this.onAutoProcessPacketInQueue);
  },
  scheduleAutoProcessPacketInQueue: function () {
    this.unScheduleAutoProcessPacketInQueue();
    var a = getCurrentScene();
    null != a && a.scheduleOnce(this.onAutoProcessPacketInQueue, 5);
  },
  onAutoProcessPacketInQueue: function () {
    logMessage(
      "warning: check it -\x3e onAutoProcessPacketInQueue: " +
        BkTime.GetCurrentTime()
    );
    BkConnectionManager.processNextEventInQueue();
  },
  processNextPackage: function (a) {
    if (
      BkGlobal.currentGS == GS.INGAME_GAME &&
      Util.isSynchEvent(a.Type) &&
      0 > BkLogicManager.getInGameLogic().updateLastEventIndex(a)
    )
      logMessage("nhan sai goi tin -\x3e reject packet"),
        BkLogicManager.isQueueEvent(a.Type) && this.processNextEventInQueue();
    else
      switch ((logMessage("processNextPackage : [" + a.Type + "]"), a.Type)) {
        case c.NETWORK_RECONNECT_SUCCESS:
        case c.NETWORK_RECONNECT_FAILURE:
        case c.NETWORK_MAKE_NEW_CONNECTION_SUCCESS:
        case c.NETWORK_MAKE_NEW_CONNECTION_FAILED:
        case c.NETWORK_DISCONNECT:
        case c.NETWORK_EXCEPTION:
        case c.NETWORK_SESSION_TERMINATED:
        case c.NETWORK_WRITER_IDLE_TIMEOUT:
        case c.NETWORK_LOCKED_CLIENT:
          this.processConnectionEvent(a);
          break;
        case c.NETWORK_ADS_FULL_SCR_CONTROL:
        case c.NETWORK_ADS_SERVER_PUSH:
          this.processAdsEvent(a);
          break;
        case c.NETWORK_LOG_IN_FACEBOOK:
        case c.NETWORK_LINK_PLAYER_ACCOUNT:
        case c.NETWORK_HOT_TABLE_RETURN:
          BkLogicManager.getLogic().processNetworkEvent(a);
          break;
        case c.NETWORK_DEAL_CARD_RETURN:
        case c.NETWORK_PLAY_WITH_FRIEND_REQUEST:
        case c.NETWORK_PLAY_WITH_FRIEND_INFORM:
        case c.NETWORK_PLAYER_SEARCH_FRIENDS:
        case c.NETWORK_JOIN_WEB_GAME_ROOM:
        case c.NETWORK_GET_GOLD_BOX_REMAIN_TIME:
        case c.NETWORK_GET_GOLD_BOX_REMAIN_TIME_RETURN:
        case c.NETWORK_MOVE_PIECE_RETURN:
        case c.NETWORK_UPDATE_OBSERVER_STATUS:
        case c.NETWORK_CHESS_OFFER_RETURN:
        case c.NETWORK_CONTINUE_GAME_RETURN:
        case c.NETWORK_INFOR_RETURN:
        case c.NETWORK_REAL_TYPE_RETURN:
        case c.NETWORK_SETUP_RULE_RETURN:
        case c.NETWORK_SHOW_U_PUSH:
        case c.NETWORK_SHOW_U_PUSH_RETURN:
        case c.NETWORK_REQUEST_DAILY_TASK_BONUS_RETURN:
        case c.NETWORK_SEND_TOKEN_TO_PHONE:
        case c.NETWORK_VALID_PLAYER_BY_PHONE_CHECK_AND_SEND_TOKEN:
        case c.NETWORK_UPDATE_PHONE_NUMBER:
          if (BkGlobal.currentGS == GS.INGAME_GAME) {
            a.Type == c.NETWORK_TABLE_INFO_RETURN &&
              (BkGlobal.isReceiveSyncEvent = !0);
            if (!BkGlobal.isReceiveSyncEvent) {
              logMessage("chua nhan dc event sysn -\x3e reject packet");
              BkLogicManager.isQueueEvent(a.Type) &&
                this.processNextEventInQueue();
              break;
            }
            BkLogicManager.getInGameLogic().processNetworkEvent(a);
          } else BkLogicManager.getLogic().processNetworkEvent(a);
          break;
        case c.NETWORK_LOG_IN_FAILURE:
        case c.NETWORK_REGISTER_FAILURE:
        case c.NETWORK_FORGOT_PASSWORD:
        case c.NETWORK_FORGOT_PASSWORD_RETURN:
        case c.NETWORK_WRONG_USERNAME_OR_CLIENT_ID:
        case c.NETWORK_REGISTER_EXCEED_MAX:
          this.conStatus = CONECTION_STATE.CLOSED_CONNECTION;
          BkLogicManager.getLogic().processNetworkEvent(a);
          break;
        case c.NETWORK_LOG_IN_SUCCESS:
        case c.NETWORK_AUTO_FIND_TABLE_NOT_FOUND_RETURN:
        case c.NETWORK_TABLE_JOIN_FAILURE:
        case c.NETWORK_GAME_JOIN_SUCCESS:
        case c.NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE_RETURN:
        case c.NETWORK_ROOM_JOIN_SUCCESS:
        case c.NETWORK_ROOM_TABLES_UPDATE:
        case c.NETWORK_PROFILE_RETURN:
        case c.NETWORK_MAIN_PROFILE_RETURN:
        case c.NETWORK_GET_PLAYER_ACHIEVEMENT_RETURN:
        case c.NETWORK_PLAYER_ITEMS_RETURN:
        case c.NETWORK_UPDATE_PASSWORD_FAILED:
        case c.NETWORK_UPDATE_PASSWORD_SUCCESS:
        case c.NETWORK_SELECT_AVATAR_SUCCESS:
        case c.NETWORK_UPDATE_PROFILE_SUCCESS:
        case c.NETWORK_INBOX_MAILS_RETURN:
        case c.NETWORK_OUTBOX_MAILS_RETURN:
        case c.NETWORK_SEND_MAIL_SUCCESS:
        case c.NETWORK_PLAYER_NOT_EXIST:
        case c.NETWORK_MAIL_RETURN:
        case c.NETWORK_GET_ITEM_INFO:
        case c.NETWORK_BUY_ITEM_SUCCESS:
        case c.NETWORK_BUY_ITEM_FAILURE:
        case c.NETWORK_GET_FRIENDS_RETURN:
        case c.NETWORK_ACCEPT_FRIEND_SUCCESS:
        case c.NETWORK_REMOVE_FRIEND_SUCCESS:
        case c.NETWORK_REQUEST_FRIEND_SUCCESS:
        case c.NETWORK_OVERVIEW_OTHER_PROFILE_RETURN:
        case c.NETWORK_LUCKY_BOX_REQUEST_RETURN:
        case c.NETWORK_CONTENT_PROVIDER_INFO_RETURN:
        case c.NETWORK_NAP_THE_CAO_BANNED:
        case c.NETWORK_NAP_THE_CAO_FAILED:
        case c.NETWORK_NAP_THE_CAO_SUCCESS:
        case c.NETWORK_SERVICE_NAP_THE_BUSY:
        case c.NETWORK_FACEBOOK_INVITE_FRIENDS:
        case c.NETWORK_GET_FACEBOOK_INVITE_FRIENDS:
        case c.NETWORK_UPDATE_PRIVATE_KEY:
        case c.NETWORK_GET_DAILY_TASK_LIST_RETURN:
        case c.NETWORK_JOIN_FRIEND_TABLE_FAILURE:
        case c.NETWORK_GET_CHAMPION_LIST_RETURN:
        case c.NETWORK_GET_TOP_PLAYER_RETURN:
        case c.NETWORK_GET_TOP_RICHEST_PLAYER_RETURN:
        case c.NETWORK_GAME_LEAVE_SUCCESS:
        case c.NETWORK_TABLE_STATUS_CHANGE:
        case c.NETWORK_TABLE_SIZE_UPDATE_PUSH:
        case c.NETWORK_TABLE_SETTINGS_UPDATE_PUSH:
        case c.NETWORK_RECEIVE_INVITATION:
        case c.NETWORK_TABLE_JOIN_SUCCESS:
        case c.NETWORK_ADMIN_CHANGED_MONEY_RETURN:
        case c.NETWORK_ADD_MONEY_RETURN:
        case c.NETWORK_KDL:
        case c.NETWORK_SEND_MESSAGE_TO_CLIENT:
        case c.NETWORK_SERVER_REQUEST:
        case c.NETWORK_RATE_APP:
        case c.NETWORK_ON_HAS_ALLOW_KICK_WAND:
        case c.NETWORK_BET_LOTTE_TICKET:
        case c.NETWORK_HEART_CHANGE_RETURN:
        case c.NETWORK_DAILY_TASK_RETURN:
        case c.NETWORK_GET_SETTING_RETURN:
        case c.NETWORK_GET_CONTENT_ADS_INFO:
        case c.NETWORK_VERIFY_TRANSACTION_RECEIPE:
        case c.NETWORK_VERIFY_TRANSACTION_GOOGLEIAP:
        case c.NETWORK_NOTIFY_PAYMENT_BONUS:
        case c.CONTENT_ADS_CACHE_SETTING:
        case c.NETWORK_PLAYER_NEWS_FEED:
          BkLogicManager.getLogic().processNetworkEvent(a);
          break;
        case c.NETWORK_TABLE_INFO_RETURN:
        case c.NETWORK_TABLE_SYN_RETURN:
        case c.NETWORK_BET_MONEY_OPTIONS:
        case c.NETWORK_BET_MONEY_UPDATE:
        case c.NETWORK_SETUP_TABLE_FAILED:
        case c.NETWORK_TABLE_LEAVE_SUCCESS:
        case c.NETWORK_TABLE_LEAVE_FAILURE:
        case c.NETWORK_TABLE_JOIN_PUSH:
        case c.NETWORK_TABLE_LEAVE_PUSH:
        case c.NETWORK_PLAYER_STATUS_RETURN:
        case c.NETWORK_WAITING_PLAYERS_RETURN:
        case c.NETWORK_GET_FRIENDS_TO_INVITE_RETURN:
        case c.NETWORK_TIME_OUT_LEAVE:
        case c.NETWORK_UNABLE_TO_KICK:
        case c.NETWORK_PROTECTED_FROM_UNKICKABLE_WAND:
        case c.NETWORK_KICK_PLAYER_PUSH:
        case c.NETWORK_ERROR_RETURN:
        case c.NETWORK_GET_GOLD_BOX_REWARD_RETURN:
        case c.NETWORK_PLAYER_MONEY_CHANGE_PUSH:
        case c.NETWORK_PLAYER_HAS_BONUS:
        case c.NETWORK_PLAYER_NEW_LEVEL:
        case c.NETWORK_TABLE_CHAT_RETURN:
        case c.NETWORK_ASSIGN_AS_TABLE_OWNER:
        case c.NETWORK_PREPARE_NEW_GAME:
        case c.NETWORK_FINISH_GAME_RETURN:
        case c.NETWORK_DISCARD_PUSH:
        case c.NETWORK_TLMN_THOI_PUSH:
        case c.NETWORK_TLMN_AUTO_WIN_PUSH:
        case c.NETWORK_LEAVE_DURING_GAME:
        case c.NETWORK_DISCARD_SUCCESS:
        case c.NETWORK_BAO_XAM_RETURN:
        case c.NETWORK_PICK_CARD_RETURN:
        case c.NETWORK_BET_BACAY_RETURN:
        case c.NETWORK_RAISE_RETURN:
        case c.NETWORK_SEND_CARD_RETURN:
        case c.NETWORK_TAKE_CARD_PUSH:
        case c.NETWORK_PICK_CARD_PUSH:
        case c.NETWORK_SHOW_PHOM_RETURN:
        case c.NETWORK_TLMN_SLASH:
        case c.NETWORK_FORFEIT_RETURN:
          if (BkGlobal.currentGS != GS.INGAME_GAME) {
            logMessage(
              "Not process event because not correct zone " + BkGlobal.currentGS
            );
            break;
          }
          a.Type == c.NETWORK_TABLE_INFO_RETURN &&
            (BkGlobal.isReceiveSyncEvent = !0);
          if (!BkGlobal.isReceiveSyncEvent) {
            logMessage(
              "chua nhan dc event sysn -\x3e reject packet \x26 processNextEventInQueue"
            );
            BkLogicManager.isQueueEvent(a.Type) &&
              this.processNextEventInQueue();
            break;
          }
          BkLogicManager.getInGameLogic().processNetworkEvent(a);
          break;
        default:
          -42 != a.Type &&
            46 != a.Type &&
            logMessage(
              "BkConnectionManager not process packet with type: " + a.Type
            );
      }
  },
};
BkBaseLogic = cc.Class.extend({
  onLC: null,
  ctor: function () {},
  processOnError: function () {
    logMessage("onerror ");
    cc.screen.fullScreen() &&
      (logMessage("is fullscreen -\x3e exit fullscreen"), exitFullScreen());
    var a = function () {
      cc.loader.releaseAll();
      Util.reloadWebPage();
    };
    isWebPlatform()
      ? showPopupMessageConfirmEx(
          BkConstString.STR_NETWORK_EXCEPTION,
          function () {
            a();
          },
          !0
        )
      : showPopupMessageWith(BkConstString.STR_NETWORK_EXCEPTION, "", a);
  },
  clearQueue: function () {
    BkConnectionManager.clearQueue();
  },
  processNextEventInQueue: function () {
    BkConnectionManager.processNextEventInQueue();
  },
  setOnLoadComplete: function (a) {
    this.onLC = a;
  },
  pushOnLoadComplete: function (a, b) {
    if (null != this.onLC) this.onLC.onLoadComplete(a, b);
    else logMessage("BkBaseLogic not push packet with type \x3d" + b);
  },
  processNetworkEvent: function (a) {
    logMessage("BkBaseLogic -\x3e processNetworkEvent " + a.Type);
    switch (a.Type) {
      case c.ANY:
        break;
      default:
        logMessage("BkBaseLogic not process packet with type: " + a.Type);
    }
  },
  isQueueEvent: function (a) {
    return !1;
  },
});
var IS_VIP_ENABLE = !1;
BkCommonLogic = BkBaseLogic.extend({
  STTCurrentRoom: -1,
  lobbyData: null,
  tableData: null,
  crGame: null,
  oUser: null,
  dropWordWeekIndex: 0,
  updateprivateKey: null,
  inviteFriendLists: null,
  invitePlayWd: null,
  promotionInfo: null,
  lastTableBetMoney: null,
  kickReasonInGame: null,
  isDisableReceiveInvite: !1,
  isDeleteLoginState: !1,
  isInputPass: !1,
  isLogged: !1,
  isLogout: !1,
  hasDailyBonus: !1,
  isDoneLoadRes: !1,
  dailyTaskList: null,
  ctor: function () {
    this._super();
    this.promotionInfo || (this.promotionInfo = new BkPromotionInfo());
  },
  isQueueEvent: function (a) {
    switch (a) {
      case c.NETWORK_SERVER_REQUEST:
        return !0;
    }
    return !1;
  },
  getHotTable: function (a) {
    var b = new BkPacket();
    b.createGetHotTablePacket(a);
    BkConnectionManager.send(b);
  },
  doAutoRegLogin: function () {
    isFBInstantGame()
      ? (BkConnectionManager.conStatus = CONECTION_STATE.LOGIN_FB_INSTANT)
      : (BkConnectionManager.conStatus = CONECTION_STATE.AUTO_LOGIN);
    BkConnectionManager.prepareConnection();
  },
  sendPacketAutoLogin: function () {
    null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
    BkGlobal.isLoginFacebook = !1;
    var a = c.CPID_DEFAULT;
    if (cc.sys.os == cc.sys.OS_ANDROID) {
      var a = c.CPID_ANDROID,
        b = NativeInterface.getCPID();
      0 < b && (a = b);
    } else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
      a = c.CPID_IOS;
    logMessage("sendPacketAutoLogin with cpid: " + a);
    var b = new BkPacket(),
      d = Util.getClientID();
    b.CreatePacketAutoRegLogin(a, d, "");
    BkConnectionManager.send(b);
  },
  doJoinChanGameRoom: function (a, b) {
    Util.showAnim();
    var d = new BkPacket();
    d.createPacketJoinChanGameRoom(a, b);
    BkConnectionManager.send(d);
  },
  processJoinChanGameReturn: function (a) {
    logMessage("onJoinChanGameRoom");
    Util.removeAnim();
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte();
    logMessage("currentRoomID: " + b + " numberRoom: " + d);
    BkGlobal.currentRoomID = b;
    var e,
      f,
      g = [];
    for (e = 0; e < d; e++)
      (f = new BkRoomData()),
        (f.percent = a.Buffer.readByte()),
        (f.roomID = a.Buffer.readByte()),
        logMessage("percent: " + f.percent + " roomID: " + f.roomID),
        g.push(f);
    for (e = 0; e < d; e++)
      if (((f = g[e]), f.roomID == b)) {
        var h = g[0];
        g[0] = f;
        g[e] = h;
      }
    f = a.Buffer.readByte();
    logMessage("maxTable: " + f);
    f = Math.abs(f);
    for (h = []; a.Buffer.isReadable(); ) {
      e = new BkTableData();
      e.tableID = a.Buffer.readByte();
      e.betMoney = a.Buffer.readInt();
      var k = a.Buffer.readByte(),
        m = a.Buffer.readByte();
      e.HasGagop = m & 1;
      e.isBaicMode = 0 == (m & 4) >> 2;
      e.is411 = 1 == (m & 8) >> 3;
      e.numberPlayer = k & 7;
      e.maxNumberPlayer = (k & 56) >> 3;
      e.hasPassword = (k & 64) >> 6;
      e.isInGameProgress = (k & 128) >> 7;
      h.push(e);
    }
    if (-1 == this.STTCurrentRoom || this.STTCurrentRoom >= 3 * d)
      this.STTCurrentRoom = 0;
    else if (
      ((a = Math.floor(this.STTCurrentRoom / 3)),
      logMessage("iSTT: " + a + " STTCurrentRoom: " + this.STTCurrentRoom),
      (k = g[a]),
      logMessage("iSTT roomID: " + k.roomID + " currRoomID: " + b),
      k.roomID != b)
    ) {
      var n, p;
      for (e = 0; e < d; e++)
        if (((m = g[e]), m.roomID == b)) {
          n = e;
          p = m;
          break;
        }
      g[a] = p;
      g[n] = k;
    }
    null == this.lobbyData && (this.lobbyData = new BkLobbyRoomData());
    this.lobbyData.maxTableInRoom = f;
    this.lobbyData.listRoom = g;
    this.lobbyData.devideListRoom();
    this.currentRoomID = b;
    b = [];
    for (e = 0; e < f; e++) b.push(!1);
    for (d = 0; d < h.length; d++) b[h[d].tableID] = !0;
    for (d = 0; d < f; d++)
      b[d] || ((g = new BkTableData()), (g.tableID = d), h.push(g));
    this.lobbyData.listTable = h;
    this.lobbyData.devideListTable();
    BkGlobal.currentGS != GS.CHOOSE_TABLE
      ? ((this.STTCurrentRoom = 0), switchToSceneWithGameState(GS.CHOOSE_TABLE))
      : (logMessage(
          "BkGlobal.currentGS !\x3d GS.CHOOSE_TABLE | currentGS: " +
            BkGlobal.currentGS
        ),
        (f = getCurrentScene()),
        null != f
          ? f instanceof VvLobby
            ? f.showGuiLobby()
            : logMessage(
                "crScene not instanceof  BkLobby -\x3e error recheck!!!!!!!!!!!"
              )
          : logMessage("crScene \x3d\x3d null"));
  },
  getGui: function () {
    return getCurrentScene();
  },
  doleaveGame: function () {
    Util.showAnim();
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GAME_LEAVE);
    BkConnectionManager.send(a);
  },
  doJoinGame: function (a) {
    this.crGame = a;
    var b = new BkPacket();
    b.CreateJoinGame(a);
    BkConnectionManager.send(b);
  },
  ProcessGetRoomByRoomType: function (a) {
    var b = new BkPacket();
    b.CreatePacketWithTypeAndByteData(c.NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE, a);
    BkConnectionManager.send(b);
  },
  ProcessGetRoomData: function (a) {
    var b = a.Buffer.readByte(),
      d;
    if (0 < b) for (d = 0; d < b; d++) a.Buffer.readByte(), a.Buffer.readByte();
    this.ProcessJoinRoom(1);
  },
  ProcessJoinRoom: function (a) {
    var b = new BkPacket();
    b.CreatePacketWithTypeAndByteData(c.NETWORK_ROOM_JOIN, a);
    BkConnectionManager.send(b);
  },
  ProcessOnJoinRoomSuccess: function (a) {
    a.Buffer.readByte();
    a.Buffer.readByte();
    this.ProcessGetListTable();
  },
  ProcessGetListTable: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_TABLES);
    BkConnectionManager.send(a);
  },
  ProcessOnRoomTablesUpdate: function (a) {
    a = a.Buffer.readByte();
    logMessage("goes here" + a);
    this.doRequestJoinTable(1);
  },
  doRequestJoinTable: function (a, b) {
    Util.showAnim();
    a > FAKE_TABLE_ID && (a -= FAKE_TABLE_ID);
    var d = new BkPacket();
    d.CreatTableJoinPacket(a, b);
    BkConnectionManager.send(d);
  },
  ProcessLeaveRoom: function (a) {
    this.isleaveFromIngame = a;
    a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_ROOM_LEAVE);
    BkConnectionManager.send(a);
  },
  doLoginStartGame: function (a, b, d, e) {
    a = new BkPacket();
    d = Util.getClientID(d);
    a.createLoginPacket(
      BkGlobal.UserInfo.userName,
      BkGlobal.UserInfo.password,
      d
    );
    BkConnectionManager.send(a);
  },
  doLoginGame: function (a, b, d) {
    if (void 0 == a || void 0 == b) logMessage("doLoginGame Username is null ");
    else {
      null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
      var e = new BkPacket();
      e.createLoginPacket(a, b, d);
      BkConnectionManager.send(e);
    }
  },
  processHeartCountdownTime: function (a) {
    var b = BkTime.GetCurrentTime() / 1e3;
    logMessage(
      "processHeartCountdownTime convertToLocalTime24h: " +
        BkTime.convertToLocalTime24h(1e3 * b) +
        " countdownTime: " +
        a
    );
    BkGlobal.UserInfo.heartTimeReward = -1 == a ? -1 : b + a;
  },
  onLoginSuccess: function (a) {
    logMessage("LOG_IN_SUCCESS -\x3e clear all queue event");
    BkGlobal.partnerAdsBanner = -1;
    Util.setDefaultNhacNenOff();
    playNhacNenSound();
    BkConnectionManager.clearQueue();
    BkGlobal.isNetworkConnected = !0;
    BkGlobal.isFistLoginInday = Util.isFirstLoginInDay();
    BkGlobal.isNeedLoadSetting = !0;
    processLoginRegistSuccessEx();
    BkConnectionManager.conStatus = CONECTION_STATE.CONNECTION_NORMAL;
    this.isLogged = !0;
    var b = a.Buffer.readString(),
      d = a.Buffer.readString(),
      e = a.Buffer.readString(),
      f = a.Buffer.readInt(),
      g = a.Buffer.readInt(),
      h = a.Buffer.readByte(),
      k = -1,
      m = -1;
    0 <= h ? (k = a.Buffer.readByte()) : (m = a.Buffer.readInt());
    var n = a.Buffer.readInt(),
      p = a.Buffer.readInt(),
      r = a.Buffer.readByte(),
      s = a.Buffer.readByte(),
      u = a.Buffer.readByte();
    null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
    BkGlobal.isReanamable = r;
    BkGlobal.isConnectedFB = s;
    BkGlobal.isFbLinkable = s;
    cc.username = b;
    cc.password = d;
    BkGlobal.UserInfo.setMoney(f);
    BkGlobal.UserInfo.setUserName(b);
    BkGlobal.UserInfo.clientID = Util.getClientID();
    BkGlobal.UserInfo.password = d;
    BkGlobal.UserInfo.setAvatarId(e);
    BkGlobal.UserInfo.setEloCoTuong(n);
    BkGlobal.UserInfo.setEloCoUp(p);
    this.processHeartCountdownTime(g);
    BkGlobal.UserInfo.taskWinGame = h;
    BkGlobal.UserInfo.taskDutyGame = k;
    BkGlobal.UserInfo.taskWaitingTime = m;
    0 <= BkGlobal.UserInfo.taskWaitingTime &&
      (BkGlobal.UserInfo.taskStartTime =
        Math.floor(BkTime.GetCurrentTime() / 1e3) +
        BkGlobal.UserInfo.taskWaitingTime);
    BkLogicManager.setGameLogic(null);
    NativeInterface.logFirebaseEvent(EVENT_NAME.LOGIN);
    0 < BkGlobal.UserInfo.taskDutyGame &&
      Util.storeSetting(
        key_setting.USERINFO_TASK_DUTY_GAME,
        BkGlobal.UserInfo.taskDutyGame
      );
    Util.loadSettingFromLocalStorage();
    logMessage(
      "Login info: dailyBonus false bonusType 0 money " +
        f +
        " name: " +
        b +
        " isReanamable: " +
        r +
        " isConnectedFB: " +
        s
    );
    b = { username: b, password: d, isLoginFacebook: BkGlobal.isLoginFacebook };
    cc.rememberPassword
      ? Util.setClientSetting(key.userLoginInfo, JSON.stringify(b))
      : Util.removeClientSetting(key.userLoginInfo);
    Util.setClientSession(key.userLoginInfo, JSON.stringify(b));
    1 == u
      ? (logMessage("isInGameCheck"),
        (BkGlobal.currentGameID = a.Buffer.readByte()),
        (BkGlobal.currentRoomID = a.Buffer.readByte()),
        (BkGlobal.currentTableID = a.Buffer.readByte()),
        this.readMoreDataInLoginPacket(a),
        logMessage("is ingame process"),
        (BkGlobal.isReceiveSyncEvent = !1),
        switchToSceneWithGameState(GS.INGAME_GAME, !1, !1),
        BkLogicManager.initGameLogic())
      : (isFBInstantGame() &&
          ((a = Util.getLoginCount()),
          cc.isNumber(a) &&
            (3 == a && BkFbInstant.createShortcut(),
            Util.setLoginCount(a + 1))),
        BkGlobal.currentGS != GS.CHOOSE_GAME
          ? switchToSceneWithGameState(GS.CHOOSE_GAME)
          : switchToSceneWithGameState(GS.CHOOSE_GAME, !1, !1));
  },
  readMoreDataInLoginPacket: function (a) {
    var b = 1 == a.Buffer.readByte(),
      d = 1 == a.Buffer.readByte(),
      e = 1 == a.Buffer.readByte();
    BkGlobal.UserInfo.VipLevel = -1;
    IS_VIP_ENABLE &&
      a.Buffer.isReadable() &&
      (BkGlobal.UserInfo.VipLevel = a.Buffer.readByte());
    BkGlobal.isFbRenameable = b;
    BkGlobal.isFbCreateablePass = e;
    BkGlobal.isPhoneNumberUpdatable = d;
    BkUserClientSettings.updateUserSettingLogin(d);
  },
  processAfterLogin: function () {
    this.DoGetMainProfile();
  },
  showWebPromoAds: function () {
    if (isWebPlatform()) {
      var a = cc.game.config.app.promoid,
        b = cc.game.config.app.promoContent,
        d = cc.game.config.app.promoUrl;
      bk.isFbApp && (d = cc.game.config.app.promoUrlFb);
      var e = cc.game.config.app.promoImg,
        a = "promo" + a,
        f = Util.getSetting(a, { timestamp: 0, promoCtn: 0 });
      if (void 0 == d || "" == d) 0 < f.promoCtn && Util.removeClientSetting(a);
      else if (
        void 0 != b &&
        "" != b &&
        void 0 != e &&
        "" != e &&
        !(3 <= f.promoCtn)
      ) {
        var g = f.timestamp,
          h = BkTime.GetCurrentTime(),
          k = Math.floor((h - g) / 1e3);
        86400 > k ||
          (logMessage(
            "lastTimeGetSetting " + g + " deltaTime " + k + " curentTime " + h
          ),
          new BkWebPromotionWd(b, d, e).showWithParent(),
          (f.promoCtn += 1),
          (f.timestamp = BkTime.GetCurrentTime()),
          Util.storeSetting(a, f));
      }
    }
  },
  getDailyTaskList: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_DAILY_TASK_LIST);
    BkConnectionManager.send(a);
  },
  DoGetMainProfile: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_MAIN_PROFILE);
    BkConnectionManager.send(a);
  },
  DoGetProfilePlayer: function (a) {
    logMessage("DoGetProfilePlayer " + a);
    this.oUser = new BkUserData();
    this.oUser.userName = a;
    var b = new BkPacket();
    b.CreateGetProfilePacket(a, c.NETWORK_GET_PROFILE);
    BkConnectionManager.send(b);
  },
  onMainProfileReturn: function (a) {
    var b = 0,
      d = 0,
      e = 0,
      f = 0;
    a.Buffer.isReadable() &&
      ((b = a.Buffer.readByte()),
      (d = a.Buffer.readString()),
      a.Buffer.isReadable() && (e = a.Buffer.readInt()),
      a.Buffer.isReadable() && (f = a.Buffer.readByte()));
    BkGlobal.UserInfo.setNumberOfUnreadMails(b);
    BkGlobal.UserInfo.setnumberOfUnreadEvent(e);
    BkGlobal.UserInfo.setDropWordWeekIndex(f);
    BkGlobal.UserInfo.setAvatarId(d);
    this.dropWordWeekIndex = f;
    this.processUpdateProfileUI();
    logMessage(
      "numberOfUnreadMails: " +
        b +
        " avatarId: " +
        d +
        " numberOfUnreadEvent: " +
        e +
        " dropWordWeekIndex: " +
        f
    );
    this.DoGetProfilePlayer(BkGlobal.UserInfo.getUserName());
  },
  onProfileReturn: function (a) {
    this.oUser.playerMoney = a.Buffer.readInt();
    this.oUser.avatarID = a.Buffer.readString();
    this.oUser.fullname = a.Buffer.readString();
    this.oUser.gender = a.Buffer.readByte();
    this.oUser.email = a.Buffer.readString();
    this.oUser.birthDate = a.Buffer.readLong();
    this.oUser.homeTown = a.Buffer.readString();
    this.oUser.status = a.Buffer.readString();
    this.oUser.userName == BkGlobal.UserInfo.getUserName() &&
      (BkGlobal.UserInfo.setAvatarId(this.oUser.avatarID),
      BkGlobal.UserInfo.setMoney(this.oUser.playerMoney),
      this.DoGetPlayerItem(this.oUser.userName, AT.TYPE_AVATAR));
    logMessage(
      "name " +
        this.oUser.userName +
        " money: " +
        this.oUser.playerMoney +
        "- avID: " +
        this.oUser.avatarID +
        "- fullname: " +
        this.oUser.fullname +
        "- gender: " +
        this.oUser.gender +
        "- email:" +
        this.oUser.email +
        "- bird: " +
        this.oUser.birthDate +
        "- address: " +
        this.oUser.homeTown +
        "- status: " +
        this.oUser.status
    );
    this.pushOnLoadComplete(this.oUser, a.Type);
    this.processUpdateProfileUI();
  },
  onLoadComplete: function (a, b) {
    BkLogicManager.getLogic().setOnLoadComplete(null);
    console.log(b);
    console.log(a);
    switch (b) {
      case c.NETWORK_REGISTER_FAILURE:
        BkGlobal.isAutoCreateAccount = !1;
        break;
      case c.NETWORK_REGISTER_EXCEED_MAX:
        BkGlobal.isAutoCreateAccount = !1;
    }
    Util.removeAnim();
  },
  processUpdateProfileUI: function (a) {
    logMessage("processUpdateProfileUI " + a);
    this.getGui() instanceof BkChooseGame
      ? this.getGui().updateAvatar(BkGlobal.UserInfo, a)
      : logMessage(
          "gui not instanceof BkChooseGame and BkLobby-\x3e don't process update UI user profile"
        );
  },
  DoGetAchievementPlayer: function (a) {
    var b = new BkPacket();
    b.CreateGetProfilePacket(a, c.NETWORK_GET_PLAYER_ACHIEVEMENT_NEW);
    BkConnectionManager.send(b);
  },
  onPlayerAchievementReturn: function (a) {
    void 0 == this.oUser &&
      (logMessage("this.oUser \x3d\x3d undefined"),
      (this.oUser = new BkUserData()));
    for (; a.Buffer.isReadable(); ) {
      logMessage("parse data player achievement " + this.oUser.getUserName());
      this.oUser.gameId = a.Buffer.readByte();
      this.oUser.winCount = a.Buffer.readInt();
      this.oUser.gameCount = a.Buffer.readInt();
      this.oUser.moneyEarn = a.Buffer.readInt();
      this.oUser.bestHand = a.Buffer.readInt();
      this.oUser.newLvPercent = a.Buffer.readInt();
      this.oUser.playerLevel = a.Buffer.readInt();
      var b = a.Buffer.readInt();
      2147483647 != b && (b += 1);
      this.oUser.rank = b;
      this.oUser.winCountRecord = a.Buffer.readInt();
      this.oUser.firstSpecialCountRecord = a.Buffer.readInt();
      this.oUser.secondSpecialCountRecord = a.Buffer.readInt();
      logMessage("this.oUser.winCount " + this.oUser.winCount);
    }
    this.pushOnLoadComplete(this.oUser, a.Type);
  },
  DoGetPlayerItem: function (a, b, d) {
    var e = new BkPacket();
    e.CreateGetProfilePacket(a, c.NETWORK_GET_PLAYER_ITEMS, b);
    BkConnectionManager.send(e);
    void 0 != d && (this.oUser = d);
  },
  onPlayerItemReturn: function (a) {
    for (var b = [], d = a.Buffer.readByte(); a.Buffer.isReadable(); ) {
      var e = new BkItemDetail();
      e.itemType = d;
      e.itemID = a.Buffer.readByte();
      e.RemainingDate = a.Buffer.readLong();
      logMessage("b2: " + e.itemID + " RemainingDate:" + e.RemainingDate);
      b.push(e);
    }
    if (d == AT.TYPE_AVATAR)
      (this.oUser.listAvatar = b),
        this.oUser.addFreeAvatar(),
        this.oUser.userName == BkGlobal.UserInfo.getUserName() &&
          ((BkGlobal.UserInfo.listAvatar = b),
          null == BkGlobal.UserInfo.listVatPham &&
            this.DoGetPlayerItem(this.oUser.userName, AT.TYPE_VATPHAM));
    else if (d == AT.TYPE_VATPHAM)
      (this.oUser.listVatPham = b),
        this.oUser.userName == BkGlobal.UserInfo.getUserName() &&
          ((BkGlobal.UserInfo.listVatPham = b),
          null == BkGlobal.UserInfo.listBaoBoi &&
            this.DoGetPlayerItem(this.oUser.userName, AT.TYPE_BAOBOI));
    else if (
      d == AT.TYPE_BAOBOI &&
      ((this.oUser.listBaoBoi = b),
      this.oUser.userName == BkGlobal.UserInfo.getUserName())
    ) {
      BkGlobal.UserInfo.listBaoBoi = b;
      for (var f = (e = d = 0), g = 0, h = 0; h < b.length; h++) {
        var k = b[h];
        26 == k.itemID && (d = 1);
        33 == k.itemID && (e = 1);
        34 == k.itemID && (f = 1);
        35 == k.itemID && (g = 1);
      }
      BkGlobal.UserInfo.setHasAllowKickWand(d);
      BkGlobal.UserInfo.setHasX2BetMoney(e);
      BkGlobal.UserInfo.setHasX5BetMoney(f);
      BkGlobal.UserInfo.setHasX10BetMoney(g);
    }
    if (this.onLC && this.onLC.onLoadComplete)
      this.onLC.onLoadComplete(b, a.Type);
  },
  doUpdatePassword: function (a, b) {
    var d = new BkPacket();
    d.CreatePacketUpdatePassword(a, b);
    BkConnectionManager.send(d);
  },
  processGetFriendsListReturn: function (a) {
    var b = this.getFriendsListReturn(a);
    this.pushOnLoadComplete(b, a.Type);
  },
  processFriendsListReturnState: function (a) {
    for (; a.Buffer.isReadable(); ) var b = a.Buffer.readString();
    this.pushOnLoadComplete(b, a.Type);
  },
  getFriendsListReturn: function (a) {
    for (
      var b = [], d = 0, e = 0, f = 0, g = "", h = 0, k = 0;
      a.Buffer.isReadable();

    ) {
      var d = 1 == a.Buffer.readByte(),
        e = a.Buffer.readByte(),
        f = a.Buffer.readInt(),
        g = a.Buffer.readString(),
        h = a.Buffer.readString(),
        k = a.Buffer.readByte(),
        m = new BkUserData();
      m.setOnlineStatus(d);
      m.setLevel(f);
      m.setUserName(g);
      m.setAvatarId(h);
      m.setGameId(k);
      m.setIsFriend(!e);
      b.push(m);
    }
    return b;
  },
  processSearchFriendReturn: function (a) {
    var b = [];
    a.ProcessSearchFriendReturn(b);
    this.pushOnLoadComplete(b, a.Type);
  },
  processJoinFriendTableFailure: function (a) {
    var b = { isFriendOnline: -1, gameID: -1 };
    a.GetJoinFriendTableFailureReturn(b);
    0 == b.isFriendOnline || -1 == b.gameId
      ? showToastMessage(
          BkConstString.STR_TABLE_FRIEND_EXIT,
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2,
          null,
          220
        )
      : showToastMessage(
          BkConstString.STR_TABLE_FRIEND_JOIN_ERR,
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2,
          null,
          250
        );
  },
  processLuckyBoxRequestReturn: function (a) {
    var b = { luckyResult: 0, bonus: 0 };
    b.luckyResult = a.Buffer.readByte();
    b.bonus = a.Buffer.readInt();
    0 < b.bonus &&
      (BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + b.bonus),
      this.processUpdateProfileUI(b.bonus));
    this.pushOnLoadComplete(b, a.Type);
  },
  doInviteFriendFacebook: function () {
    isWebPlatform()
      ? FbService.appInviteRequestWithLogin()
      : isFBInstantGame()
      ? BkFbInstant.inviteFriends()
      : (BkLogicManager.getLogic().getFaceBookInvitedFriends(),
        NativeInterface.doLoginFB(FB_CS.STATE_FB_INVITE));
  },
  getFaceBookInvitedFriends: function () {
    var a = new BkPacket();
    a.CreatePacketFbInviteFriends();
    BkConnectionManager.send(a);
  },
  processFacebookInviteFriendBonusReturn: function (a) {
    a = a.Buffer.readInt();
    if (0 < a)
      if (isWebPlatform()) {
        if (BkGlobal.currentGS == GS.INGAME_GAME) {
          var b = BkLogicManager.getInGameLogic().getMyClientState();
          null != b &&
            BkLogicManager.getInGameLogic().increaseCash(
              b,
              a * Util.getFriendCost(),
              ""
            );
        } else
          (b = BkGlobal.UserInfo.getMoney() + a * Util.getFriendCost()),
            BkGlobal.UserInfo.setMoney(b),
            this.processUpdateProfileUI(a * Util.getFriendCost());
        this.processSuccessInvitation(a);
      } else this.updateHeartUI(a, REASON_ADD_HEART.FB_INVITE_FRIEND);
    else
      showToastMessage(
        "B\u1ea1n \u0111\u00e3 nh\u1eadn th\u01b0\u1edfng cho l\u1eddi m\u1eddi n\u00e0y r\u1ed3i"
      );
  },
  processFacebookInvitedListReturn: function (a) {
    null != a.ProcessInvitedListReturn() &&
      FbService.appInviteRequest("", function (a) {
        console.log(a);
        var d = new BkPacket();
        d.sendInvitedListToServer(
          FbService.facebookID,
          a,
          this.updateprivateKey,
          a
        );
        BkConnectionManager.send(d);
      });
  },
  processFacebookInvitedList: function (a) {
    var b = this;
    FbService.appInviteRequest("", function (d) {
      b.sendInvitedListToServer(a, d);
    });
  },
  sendInvitedListToServer: function (a, b) {
    if (void 0 != b && null != b && 0 != b.length) {
      var d = new BkPacket();
      d.createFBInvitedListPacket(a, b, this.updateprivateKey);
      BkConnectionManager.send(d);
    }
  },
  savePrivateKey: function (a) {
    this.updateprivateKey = a.Buffer.readByte();
  },
  processSuccessInvitation: function (a) {
    showToastMessage(
      "B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng th\u00eam " +
        a * Util.getFriendCost() +
        " " +
        BkConstString.getGameCoinStr() +
        " v\u00e0o t\u00e0i kho\u1ea3n",
      cc.winSize.width / 2,
      cc.winSize.height / 2
    );
  },
  showPromotionAtChooseGame: function (a) {
    new BkPromotionWd(a).showWithParent();
  },
  getTaskCompletedCount: function (a) {
    var b = 0;
    if (null == a || 0 == a.length) return 0;
    for (var d = 0; d < a.length; d++) {
      var e = a[d];
      e.targetAmount != e.currentAmount || e.isGetBonus || b++;
    }
    return b;
  },
  showPromotion: function (a) {
    var b = this;
    "" != a &&
      showPopupConfirmWith(
        a,
        "",
        function () {
          if (b.promotionInfo.isShowNapTien)
            new VvPaymentWindow().showWithParent(), logMessage("initPaymentWD");
          else if (b.promotionInfo.isShowFaceBookInviteFB)
            BkLogicManager.getLogic().onClickInviteFBFriend();
          else
            b.promotionInfo.isShowRegisterPhone &&
              (new VvRegisterPhoneNumberWindow().showWithParent(),
              logMessage("initRegisterPhoneNumberWD"));
        },
        null,
        function () {
          b.promotionInfo.isShowNapTien
            ? b.promotionInfo.suggestNapTienCount++
            : b.promotionInfo.isShowFaceBookInviteFB
            ? b.promotionInfo.suggestInviteFriendFBCount++
            : b.promotionInfo.isShowRegisterPhone &&
              b.promotionInfo.suggestRegisterPhoneCount++;
        }
      );
  },
  showPromotionKick: function () {
    var a = BkLogicManager.getInGameLogic().getLeaveGameReason();
    logMessage("showPromotionKick " + a);
    if (a != PLAYER_LEAVE_GAME) {
      var b = this,
        d = function () {
          b.setDisableReceiveInviteState(!1);
        },
        e = function () {
          logMessage("showInviteBuy");
          b.getGui().showInviteBuyPromo(d);
        };
      switch (a) {
        case OWNER_KICK:
        case RUN_OUT_OF_CASH_KICK:
        case LOW_CASH:
          b.setDisableReceiveInviteState(!0);
          BkGlobal.UserInfo.getMoney() >= MIN_MONEY_SALE
            ? (logMessage("STR_INVITE_BUY_UNKICKABLE"),
              showPopupConfirmWith(
                BkConstString.STR_INVITE_BUY_UNKICKABLE,
                "",
                e,
                d,
                d
              ))
            : showPopupMessageWith(BkConstString.STR_IS_KICKED, "", d, d);
          break;
        case TIME_OUT_KICK:
        case UNREADY_TIMEOUT:
          b.setDisableReceiveInviteState(!0),
            showPopupMessageWith(BkConstString.STR_MESS_SERVER_KICK, "", d, d);
      }
      BkLogicManager.getInGameLogic().setLeaveGameReason(PLAYER_LEAVE_GAME);
    }
  },
  processContentProviderInfoReturn: function (a) {
    var b = {};
    b.dauSo15K = a.Buffer.readString();
    b.dauSo10K = a.Buffer.readString();
    b.smsContent = a.Buffer.readString();
    var d = a.Buffer.readByte(),
      e = [],
      f = [],
      g = -1,
      h;
    if (a.Buffer.isReadable()) {
      for (h = 0; h < d; h++) (g = a.Buffer.readByte()), e.push(g);
      d = a.Buffer.readByte();
      for (h = 0; h < d; h++) (g = a.Buffer.readByte()), f.push(g);
      if (a.Buffer.isReadable()) {
        g = [];
        d = a.Buffer.readByte();
        for (h = 0; h < d; h++) {
          var k = {};
          k.serviceNumber = a.Buffer.readString();
          k.content = a.Buffer.readString();
          k.moneyVnd = a.Buffer.readInt();
          k.moneyXu = a.Buffer.readInt();
          g.push(k);
        }
        b.smsInfoList = g;
      } else b.smsInfoList = null;
    }
    b.unavailableSMSTelcos = e;
    b.unavailableTheCaoTelcos = f;
    e = 0;
    if (a.Buffer.isReadable()) {
      f = a.Buffer.readByte();
      g = [];
      for (h = 0; h < f; h++) (d = a.Buffer.readInt()), g.push(d);
      b.listTheCao = g;
      g = [];
      d = [];
      for (h = 0; h < f; h++)
        (k = a.Buffer.readInt()),
          g.push(k),
          (k = a.Buffer.readInt()),
          d.push(k);
      b.BonusTheMobi = a.Buffer.readInt();
      b.listMenhGiaMobi = g;
      b.listMenhGiaKMMobi = d;
      g = [];
      d = [];
      for (h = 0; h < f; h++) {
        var k = a.Buffer.readInt(),
          m = a.Buffer.readInt();
        g.push(k);
        d.push(m);
      }
      b.BonusTheVina = a.Buffer.readInt();
      b.listMenhGiaVina = g;
      b.listMenhGiaKMVina = d;
      g = [];
      d = [];
      for (h = 0; h < f; h++)
        (k = a.Buffer.readInt()),
          (m = a.Buffer.readInt()),
          g.push(k),
          d.push(m);
      b.listMenhGiaVT = g;
      b.listMenhGiaKMVT = d;
      b.BonusTheVT = a.Buffer.readInt();
      b.BonusSMS = a.Buffer.readInt();
      b.BonusIAP = a.Buffer.readInt();
      b.BonusVip = a.Buffer.readInt();
      e = Math.max(
        e,
        b.BonusTheMobi,
        b.BonusTheVina,
        b.BonusTheVT,
        b.BonusSMS,
        b.BonusVip
      );
    }
    BkGlobal.paymentBonusPercent = e;
    this.updatePaymentBonusSticker();
    this.pushOnLoadComplete(b, a.Type);
  },
  setDisableReceiveInviteState: function (a) {
    this.promotionInfo.receiveInviteState = a;
  },
  processQuickJointTable: function (a, b) {
    var d = new BkPacket();
    d.creatQuickTableJoinPacket(a, b);
    BkConnectionManager.send(d);
  },
  getDailyTaskListReturn: function (a) {
    var b = [];
    for (a.Buffer.readByte(); a.Buffer.isReadable(); ) {
      var d = a.Buffer.readByte(),
        e = a.Buffer.readInt(),
        f = a.Buffer.readInt(),
        g = a.Buffer.readInt(),
        h = 1 == a.Buffer.readByte(),
        k = a.Buffer.readString(),
        m = new BkDailyTaskData();
      m.setDailyTaskItem(d, e, f, g, h, k);
      b.push(m);
    }
    return b;
  },
  processGetContentAdsInfo: function (a) {
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte(),
      e = a.Buffer.readByte(),
      f = a.Buffer.readInt(),
      g = -1;
    a.Buffer.isReadable() && (g = a.Buffer.readByte());
    logMessage("nextAdsRewardsTime: " + g);
    var h = {};
    h.isOnads = b;
    h.adsPartner = d;
    h.adsType = e;
    h.numberHeartBonus = f;
    h.nextAdsRewardsTime = g;
    logMessage("obj.nextAdsRewardsTime: " + h.nextAdsRewardsTime);
    this.pushOnLoadComplete(h, a.Type);
  },
  getDailyTaskBonus: function (a) {
    var b = new BkDailyTaskData(),
      d = a.Buffer.readByte(),
      e = a.Buffer.readInt(),
      f = a.Buffer.readByte(),
      g = a.Buffer.readInt(),
      h = a.Buffer.readInt(),
      k = a.Buffer.readInt(),
      m = 1 == a.Buffer.readByte();
    a = a.Buffer.readString();
    b.setBonusDailyTaskItem(d, e, f, g, h, k, m, a);
    return b;
  },
  processGetMailInboxListData: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_INBOX_MAILS);
    BkConnectionManager.send(a);
  },
  processGetMailInboxListReturn: function (a) {
    var b = [];
    a.GetMailListReturn(1, b);
    this.pushOnLoadComplete(b, a.Type);
  },
  processGetMailOutboxListData: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_OUTBOX_MAILS);
    BkConnectionManager.send(a);
  },
  processGetMailOutboxListReturn: function (a) {
    var b = [];
    a.GetMailListReturn(2, b);
    this.pushOnLoadComplete(b, a.Type);
  },
  processSendMailData: function (a, b, d) {
    var e = new BkPacket();
    e.CreateSendMailPacket(a, b, d);
    BkConnectionManager.send(e);
  },
  processSendMailReturn: function (a) {
    this.pushOnLoadComplete(null, a);
  },
  processGetMailData: function (a) {
    var b = new BkPacket();
    b.CreateGetMailPacket(a);
    BkConnectionManager.send(b);
  },
  processGetMailReturn: function (a) {
    var b = new BkMailInfo();
    a.GetMailReturn(b);
    this.pushOnLoadComplete(b, a.Type);
  },
  processDeleteMail: function (a) {
    var b = new BkPacket();
    b.CreateDeleteMailPacket(a);
    BkConnectionManager.send(b);
  },
  processGetItemInfo: function (a) {
    var b = new BkPacket();
    b.CreateGetItemInfoPacket(a);
    BkConnectionManager.send(b);
  },
  processGetItemInfoReturn: function (a) {
    var b = { Id: null, DayToLive: null, Price: null };
    a.ProcessGetItemInfo(b);
    this.pushOnLoadComplete(b, a.Type);
  },
  processBuyItem: function (a) {
    var b = new BkPacket();
    b.CreateBuyItemPacket(a);
    BkConnectionManager.send(b);
  },
  processBuyItemSuccess: function (a) {
    var b = { itemCost: 0 };
    a.ProcessGetBoughtItemCost(b);
    this.pushOnLoadComplete(b.itemCost, a.Type);
  },
  processBuyItemFail: function (a) {
    var b = { reason: null };
    a.ProcessBuyItemFailedReason(b);
    this.pushOnLoadComplete(b.reason, a.Type);
  },
  doJoinWebGameRoom: function (a) {
    Util.showAnim();
    this.crGame = a;
    var b = new BkPacket();
    b.createPacketJoinWebGameRoom(a);
    BkConnectionManager.send(b);
  },
  onJoinWebGameRoom: function (a) {
    logMessage("onJoinWebGameRoom");
    Util.removeAnim();
    BkGlobal.currentGameID = this.crGame;
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte();
    logMessage(
      "currentRoomID: " +
        b +
        " numberRoom: " +
        d +
        " currentGameID: " +
        BkGlobal.currentGameID +
        " crGame: " +
        this.crGame
    );
    BkGlobal.currentRoomID = b;
    var e,
      f,
      g = [];
    for (e = 0; e < d; e++)
      (f = new BkRoomData()),
        (f.percent = a.Buffer.readByte()),
        (f.roomID = a.Buffer.readByte()),
        logMessage("percent: " + f.percent + " roomID: " + f.roomID),
        g.push(f);
    for (e = 0; e < d; e++)
      if (((f = g[e]), f.roomID == b)) {
        var h = g[0];
        g[0] = f;
        g[e] = h;
      }
    f = a.Buffer.readByte();
    logMessage("maxTable: " + f);
    f = Math.abs(f);
    for (h = []; a.Buffer.isReadable(); ) {
      e = new BkTableData();
      e.tableID = a.Buffer.readByte();
      e.betMoney = a.Buffer.readInt();
      var k = a.Buffer.readByte();
      e.numberPlayer = k & 7;
      e.maxNumberPlayer = (k & 56) >> 3;
      e.hasPassword = (k & 64) >> 6;
      e.isInGameProgress = (k & 128) >> 7;
      h.push(e);
    }
    a = [];
    for (e = 0; e < f; e++) a.push(!1);
    for (e = 0; e < h.length; e++) a[h[e].tableID] = !0;
    for (k = e = 0; k < f; k++)
      if (!a[k]) {
        var m = new BkTableData();
        m.tableID = k;
        m.maxNumberPlayer = getMaxPlayer(BkGlobal.currentGameID);
        BkGlobal.isRoomTypeSolo() && (m.maxNumberPlayer = 2);
        h.push(m);
        e++;
      }
    if (-1 == this.STTCurrentRoom || this.STTCurrentRoom >= 3 * d)
      this.STTCurrentRoom = 0;
    else if (
      ((a = Math.floor(this.STTCurrentRoom / 3)),
      logMessage("iSTT: " + a + " STTCurrentRoom: " + this.STTCurrentRoom),
      (k = g[a]),
      logMessage("iSTT roomID: " + k.roomID + " currRoomID: " + b),
      k.roomID != b)
    ) {
      var n, p;
      for (e = 0; e < d; e++)
        if (((m = g[e]), m.roomID == b)) {
          n = e;
          p = m;
          break;
        }
      g[a] = p;
      g[n] = k;
    }
    h.sort(function (a, b) {
      return b.betMoney - a.betMoney;
    });
    null == this.lobbyData && (this.lobbyData = new BkLobbyRoomData());
    this.lobbyData.maxTableInRoom = f;
    this.lobbyData.listRoom = g;
    this.lobbyData.devideListRoom();
    this.lobbyData.listTable = h;
    this.lobbyData.devideListTable();
    logMessage("switchToSceneWithGameState(GS.CHOOSE_TABLE)");
    BkGlobal.currentGS != GS.CHOOSE_TABLE
      ? ((this.STTCurrentRoom = 0), switchToSceneWithGameState(GS.CHOOSE_TABLE))
      : (logMessage(
          "BkGlobal.currentGS !\x3d GS.CHOOSE_TABLE | currentGS: " +
            BkGlobal.currentGS
        ),
        (b = getCurrentScene()),
        null != b
          ? b instanceof VvLobby
            ? b.showGuiLobby()
            : logMessage(
                "crScene not instanceof  BkLobby -\x3e error recheck!!!!!!!!!!!"
              )
          : logMessage("crScene \x3d\x3d null"));
    Util.setClientSetting(key.lastGameChoose, BkGlobal.currentGameID);
  },
  ProcessWhenClickRoomWith: function (a) {
    a.roomID != BkGlobal.currentRoomID
      ? this.doJoinChanGameRoom(
          BkRoomTypeUtils.getRoomTypeById(a.roomID),
          a.roomID
        )
      : this.getGui().showGuiLobby();
  },
  processSelectAvatarPacket: function (a) {
    var b = new BkPacket();
    b.CreateSelectAvatarPacket(a);
    BkConnectionManager.send(b);
  },
  onTableStatusChange: function (a) {
    if (null == this.lobbyData)
      logMessage(
        "onReceive packet before receiving packet get list table -\x3e reject packet"
      );
    else {
      var b = a.Buffer.readByte();
      a = a.Buffer.readByte();
      this.lobbyData.updateGameTableStatus(b, a);
      this.getGui() instanceof VvLobby
        ? this.getGui().UpdateStatusOfTableWith(b, a)
        : logMessage(
            "BkLobby not onEnterTransitionDidFinish -\x3e reject packet"
          );
    }
  },
  onTableSizeUpdatePush: function (a) {
    if (null == this.lobbyData)
      logMessage(
        "onReceive packet before receiving packet get list table -\x3e reject packet"
      );
    else {
      var b = a.Buffer.readByte();
      a = a.Buffer.readByte();
      this.lobbyData.updateNumberPlayersInTable(b, a);
      this.getGui() instanceof VvLobby
        ? this.getGui().UpdateSizeOfTableWith(b, a)
        : logMessage(
            "BkLobby not onEnterTransitionDidFinish -\x3e reject packet"
          );
    }
  },
  onTableSettingUpdatePush: function (a) {
    if (null == this.lobbyData)
      logMessage(
        "onReceive packet before receiving packet get list table -\x3e reject packet"
      );
    else {
      var b = new BkTableData();
      b.tableID = a.Buffer.readByte();
      b.betMoney = a.Buffer.readInt();
      var d = a.Buffer.readByte();
      b.HasGagop = a.Buffer.readByte();
      b.numberPlayer = d & 7;
      b.maxNumberPlayer = (d & 56) >> 3;
      b.hasPassword = (d & 64) >> 6;
      b.isInGameProgress = (d & 128) >> 7;
      logMessage("onTableSettingUpdatePush: " + b.toString());
      this.lobbyData.updateTable(b);
      this.getGui() instanceof VvLobby
        ? this.getGui().UpdateTableWith(b)
        : logMessage(
            "BkLobby not onEnterTransitionDidFinish -\x3e reject packet"
          );
    }
  },
  ProcessTopUToReturn: function (a) {
    var b = a.Buffer,
      d = b.readInt(),
      e = b.readInt(),
      f = b.readInt() + 1,
      g = b.readByte(),
      h = b.readByte(),
      k = [],
      m;
    for (m = 0; m < h; m++) k.push(b.readByte());
    m = CXuongCuocWindow.getStringXuongCuoc(k);
    k = -1;
    IS_VIP_ENABLE && (k = b.readByte());
    logMessage(
      "myVipLV:" +
        k +
        "myLV: " +
        d +
        " myPoint: " +
        e +
        " myPosition: " +
        f +
        " myAvar: " +
        g +
        " cuocCount: " +
        h +
        " myStringCuoc: " +
        m
    );
    h = new BkUserData();
    h.setUserName(BkGlobal.UserInfo.getUserName());
    h.setMoney(BkGlobal.UserInfo.getMoney());
    h.setAvatarId(g);
    h.setLevel(d);
    h.setRank(f);
    h.setmaxUPoint(e);
    h.setCuocU(m);
    h.VipLevel = k;
    for (d = []; b.isReadable(); ) {
      var e = b.readString(),
        f = b.readInt(),
        g = b.readByte(),
        k = b.readInt(),
        n = b.readInt(),
        p = b.readByte(),
        r = b.readByte(),
        s = [];
      for (m = 0; m < r; m++) s.push(b.readByte());
      m = -1;
      IS_VIP_ENABLE && (m = b.readByte());
      s = CXuongCuocWindow.getStringXuongCuoc(s);
      logMessage(
        "playerName: " +
          e +
          " point: " +
          f +
          " avatar: " +
          g +
          " level: " +
          k +
          " money: " +
          n +
          " isFriend: " +
          p +
          " playerCuocCount: " +
          r +
          " playerStringCuoc:" +
          s +
          " VipLevel:" +
          m
      );
      p = new BkUserData();
      p.setUserName(e);
      p.setAvatarId(g);
      p.setLevel(k);
      p.setMoney(n);
      p.setRank(d.length + 1);
      p.setmaxUPoint(f);
      p.setCuocU(s);
      p.VipLevel = m;
      d.push(p);
    }
    d.push(h);
    this.pushOnLoadComplete({ playerList: d }, a.Type);
  },
  processTopRichestChan: function (a) {
    var b = [],
      d = new BkUserData();
    d.rank = a.Buffer.readInt();
    2147483647 != d.rank && (d.rank += 1);
    d.avatarID = a.Buffer.readString();
    d.lvUser = a.Buffer.readInt();
    IS_VIP_ENABLE && (d.VipLevel = a.Buffer.readByte());
    d.setUserName(BkGlobal.UserInfo.getUserName());
    d.setMoney(BkGlobal.UserInfo.getMoney());
    for (var e = 0; a.Buffer.isReadable(); ) {
      e++;
      var f = new BkUserData();
      f.userName = a.Buffer.readString();
      f.playerMoney = a.Buffer.readInt();
      f.avatarID = a.Buffer.readString();
      f.isFriend = 1 == a.Buffer.readByte();
      f.lvUser = a.Buffer.readInt();
      IS_VIP_ENABLE && (f.VipLevel = a.Buffer.readByte());
      f.rank = e;
      b.push(f);
    }
    this.pushOnLoadComplete({ mySelf: d, richestPlayerList: b }, a.Type);
  },
  processTopRichestPlayerReturn: function (a) {
    var b = [],
      d = new BkUserData();
    d.rank = a.Buffer.readInt();
    2147483647 != d.rank && (d.rank += 1);
    d.avatarID = a.Buffer.readString();
    IS_VIP_ENABLE && (d.VipLevel = a.Buffer.readByte());
    d.setUserName(BkGlobal.UserInfo.getUserName());
    d.setMoney(BkGlobal.UserInfo.getMoney());
    for (var e = 0; a.Buffer.isReadable(); ) {
      e++;
      var f = new BkUserData();
      f.userName = a.Buffer.readString();
      f.playerMoney = a.Buffer.readInt();
      f.avatarID = a.Buffer.readString();
      f.isFriend = 1 == a.Buffer.readByte();
      IS_VIP_ENABLE && (f.VipLevel = a.Buffer.readByte());
      f.rank = e;
      b.push(f);
    }
    this.pushOnLoadComplete({ mySelf: d, richestPlayerList: b }, a.Type);
  },
  processTopPlayerReturn: function (a) {
    var b = [],
      d = new BkUserData();
    d.setLevel(a.Buffer.readInt());
    d.setWinCount(a.Buffer.readInt());
    d.rank = a.Buffer.readInt();
    2147483647 != d.rank && (d.rank += 1);
    d.avatarID = a.Buffer.readString();
    IS_VIP_ENABLE && (d.VipLevel = a.Buffer.readByte());
    d.setUserName(BkGlobal.UserInfo.getUserName());
    d.setMoney(BkGlobal.UserInfo.getMoney());
    for (var e = 0; a.Buffer.isReadable(); ) {
      e++;
      var f = new BkUserData();
      f.userName = a.Buffer.readString();
      f.setWinCount(a.Buffer.readInt());
      f.avatarID = a.Buffer.readString();
      f.lvUser = a.Buffer.readInt();
      f.playerMoney = a.Buffer.readInt();
      f.isFriend = 1 == a.Buffer.readByte();
      IS_VIP_ENABLE && (f.VipLevel = a.Buffer.readByte());
      f.rank = e;
      f.logPlayer();
      b.push(f);
    }
    this.pushOnLoadComplete({ mySelf: d, playerList: b }, a.Type);
  },
  processTableJoinFailure: function (a) {
    Util.removeAnim();
    a = a.Buffer.readByte();
    logMessage("NETWORK_TABLE_JOIN_FAILURE with errorType: " + a);
    a == BkJoinTableError.FAILED_NOT_ENOUGH_MONEY
      ? this.promotionInfo.isJoinFromInviteFriend
        ? ((this.promotionInfo.isJoinFromInviteFriend = !1),
          showToastMessage(BkConstString.PLAYER_NOT_ENOUGH_MONEY))
        : null == this.tableData &&
          showToastMessage(
            Util.getStringErrorJoinTableFail(a),
            null,
            null,
            null,
            270
          )
      : showToastMessage(
          Util.getStringErrorJoinTableFail(a),
          null,
          null,
          null,
          270
        );
  },
  setLastTableBetMoney: function (a) {
    this.lastTableBetMoney = a;
  },
  processReceiveInvitation: function (a) {
    if (this.getGui() instanceof VvLobby) {
      var b = a.Buffer.readByte(),
        d = a.Buffer.readByte(),
        e = a.Buffer.readInt();
      a = a.Buffer.readString();
      logMessage(
        "offeredRoomId: " +
          b +
          " offeredTableId: " +
          d +
          " betMoney: " +
          e +
          " invitationPlayer: " +
          a
      );
      this.getGui().showReceiveInvitationMessage(b, d, e, a);
    } else
      logMessage("BkLobby not onEnterTransitionDidFinish -\x3e reject packet");
  },
  ProcessTableJoinSuccess: function (a) {
    logMessage("ProcessTableJoinSuccess: ");
    Util.removeAnim();
    BkGlobal.currentGameID = a.Buffer.readByte();
    BkGlobal.currentRoomID = a.Buffer.readByte();
    BkGlobal.currentTableID = a.Buffer.readByte();
    logMessage(
      "ProcessTableJoinSuccess: BkGlobal.currentGameID: " +
        BkGlobal.currentGameID
    );
    BkGlobal.isReceiveSyncEvent = !1;
    switchToSceneWithGameState(GS.INGAME_GAME);
  },
  updateMyMoney: function (a, b, d) {
    var e = "",
      f = "";
    b == AM.TYPE_ADMIN_ADD
      ? ((f =
          "B\u1ea1n v\u1eeba \u0111\u01b0\u1ee3c Admin c\u1ed9ng " +
          convertStringToMoneyFormat(a) +
          " " +
          BkConstString.STR_GAME_COIN.toLowerCase()),
        (e = "Admin c\u1ed9ng ti\u1ec1n"))
      : b == AM.TYPE_SMS_ADD
      ? ((f =
          "B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng " +
          convertStringToMoneyFormat(a) +
          " tim."),
        (e = ""),
        (b = Util.getRegPhoneBonus()),
        a == b
          ? ((f =
              "\u0110\u0103ng k\u00fd s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\u00e0nh c\u00f4ng. B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng " +
              convertStringToMoneyFormat(a) +
              " tim."),
            (e =
              "\u0110\u0103ng k\u00fd s\u1ed1 \u0111i\u1ec7n tho\u1ea1i th\u00e0nh c\u00f4ng."))
          : (logMessage("send sms success -\x3e get data bonus"),
            (b = new BkPacket()),
            b.GetContentProviderInfo(0),
            BkConnectionManager.send(b)))
      : b == AM.TYPE_NAP_THE &&
        ((f =
          "B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng " +
          convertStringToMoneyFormat(a) +
          " tim."),
        (e = ""));
    void 0 != d && (e = f = d);
    BkGlobal.currentGS == GS.INGAME_GAME
      ? (logMessage("incress money ingame"),
        (d = BkLogicManager.getInGameLogic().getMyClientState()),
        null != d
          ? BkLogicManager.getInGameLogic().increaseCash(d, a, e)
          : BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + a))
      : (BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + a),
        showPopupMessageWith(f),
        this.processUpdateProfileUI(a));
  },
  processOnReceiveKDL: function (a) {
    a = a.Buffer.readByte();
    a = BkConstString.insertIntoStringWithListString(
      BkConstString.STR_SERVER_SHUTTING_DOWN,
      [a]
    );
    showPopupMessageWith(a, "Quan tr\u1ecdng");
  },
  processReceiveMessageToClient: function (a) {
    a = a.Buffer.readString();
    showPopupMessageWith(a);
  },
  processReceiveServerRequestMessage: function (a) {
    var b = a.Buffer.readByte();
    this.isQueueEvent(a.Type) && BkConnectionManager.processNextEventInQueue();
    b == SERVER_REQUEST.RENAMEABLE
      ? showPopupConfirmWith(
          "B\u1ea1n ch\u01b0a \u0111\u1ed5i t\u00ean t\u00e0i kho\u1ea3n, h\u00e3y \u0111\u1ed5i t\u00ean \u0111\u1ec3 b\u1ea1n b\u00e8 t\u00ecm b\u1ea1n d\u1ec5 d\u00e0ng h\u01a1n!",
          "",
          function () {
            new BkRenameWindow().showWithParent();
          }
        )
      : b == SERVER_REQUEST.CANLINKFB &&
        showPopupConfirmWith(
          "B\u1ea1n ch\u01b0a li\u00ean k\u1ebft t\u00e0i kho\u1ea3n Facebook, h\u00e3y li\u00ean k\u1ebft \u0111\u1ec3 ch\u01a1i c\u00f9ng v\u1edbi b\u1ea1n b\u00e8!",
          "",
          function () {
            isWebPlatform() || NativeInterface.doLoginFB();
          }
        );
  },
  getRateAppRewarded: function () {
    var a = Util.isRatedApp();
    logMessage("getRateAppRewarded isRated: " + a);
    a && this.doRateAppWithTypeAction(RATE_APP.REQUEST);
  },
  doRateAppWithTypeAction: function (a) {
    var b = new BkPacket();
    b.createPacketWithTypeAndByteData(c.NETWORK_RATE_APP, a);
    BkConnectionManager.send(b);
  },
  processRateApp: function (a) {
    logMessage("processRateApp");
    var b = a.Buffer.readByte();
    if (b == RATE_APP.APP_PUSH) {
      var b = BkConstString.STR_TITLE_RATE_APP,
        d = BkConstString.STR_CONTENT_RATE_APP,
        e = "";
      a.Buffer.isReadable() &&
        ((d = a.Buffer.readString()), (e = a.Buffer.readString()));
      logMessage("subEventCode RATE_APP.APP_PUSH: " + d + " noteContent: " + e);
      new BkRateAppWindow(b, d, e).showWithParent();
    } else
      b == RATE_APP.SUCCESS
        ? (Util.setIsRatedApp(0),
          logMessage("subEventCode RATE_APP.SUCCESS: " + RATE_APP.SUCCESS),
          (a = a.Buffer.readInt()),
          0 < a && this.updateHeartUI(a, REASON_ADD_HEART.RATE_APP))
        : b == RATE_APP.FAILURE &&
          (Util.setIsRatedApp(0),
          logMessage("subEventCode RATE_APP.FAILURE: " + RATE_APP.FAILURE));
  },
  processPlayWithFriendInform: function (a) {
    var b = a.Buffer.readByte();
    logMessage("NETWORK_PLAY_WITH_FRIEND_INFORM subEventCode: " + b);
    if (0 == b)
      (b = {}),
        (b.gameId = a.Buffer.readByte()),
        (b.inviterPlayer = a.Buffer.readString()),
        (b.elo = a.Buffer.readInt()),
        (b.avatar = a.Buffer.readString()),
        1 > BkGlobal.UserInfo.getMoney()
          ? showPopupMessageWith(
              BkConstString.STR_FR_RES_LOWER_COIN +
                BkConstString.STR_LOWER_COIN_GUIDE
            )
          : this.showConfirmPlayFriend(b);
    else if (1 == b && (Util.removeAnim(), (b = a.Buffer.readByte()), -1 != b))
      if (null != this.onLC) this.onLC.onLoadComplete(b, a.Type);
      else
        b != FrStatus.STATUS_BEGIN_CREATE_TABLE &&
          showPopupMessageWith(Util.getPlayWithFriendsMessage(b));
  },
  doRegisterUser: function (a, b, d) {
    null == BkGlobal.UserInfo && (BkGlobal.UserInfo = new BkUserData());
    BkGlobal.isLoginFacebook = !1;
    BkGlobal.UserInfo.userName = a;
    BkGlobal.UserInfo.password = b;
    BkGlobal.UserInfo.clientID = d;
    var e = new BkPacket();
    e.CreatePacketRegister(a, b, bk.cpid, d, bk.userIp);
    BkConnectionManager.send(e);
  },
  processForgotPass: function (a, b) {
    var d = new BkPacket();
    d.CreatePacketForgetPassword(a, b);
    BkConnectionManager.send(d);
  },
  doLogout: function () {
    this.isLogout = !0;
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_LOG_OUT);
    BkConnectionManager.send(a);
  },
  processRegisterPhoneNumber: function (a) {
    logMessage("processRegisterPhoneNumber");
    this.pushOnLoadComplete(a, a.Type);
  },
  currentLodeBetMoney: 0,
  sendLodePacket: function (a, b, d) {
    this.currentLodeBetMoney = b;
    var e = new BkPacket();
    e.createBetLotteTicket(a, b, d);
    BkConnectionManager.send(e);
  },
  processLodeReturn: function (a) {
    logMessage("processLodeReturn");
    a.Buffer.readByte() == LDNS.PLACE_BET_LOTTE &&
      ((a = a.Buffer.readInt()),
      logMessage("delta " + a),
      0 < a
        ? this.updateMyMoney(a, void 0, "Tr\u00fang l\u00f4")
        : -10 > a
        ? (showToastMessage(
            "\u0110\u1eb7t c\u01b0\u1ee3c th\u00e0nh c\u00f4ng.Ch\u00fac m\u1eebng b\u1ea1n!"
          ),
          this.updateMyMoney(a))
        : ((a = -a),
          0 <= a &&
            a < LDNS.NUMBER_LODE_CODE &&
            showToastMessage(LDNS.LODE_ERR_CODE[a])));
  },
  processBetFootballReturn: function (a) {
    this.pushOnLoadComplete(null, a);
  },
  processLoadBaseRes: function (a) {
    this.isDoneLoadRes = !1;
    null != a && void 0 != a && a();
  },
  onClickInviteFBFriend: function () {
    logMessage("onClickInviteFBFriend");
    null != this.FBInviteWD &&
      (logMessage("this.FBInviteWD !\x3d null -\x3e removeSelf"),
      (this.FBInviteWD = null));
  },
  onClickInviteFBFriendDesktop: function () {
    logMessage("onClickInviteFBFriendDesktop");
    null != this.FBInviteWD &&
      (logMessage("this.FBInviteWD !\x3d null -\x3e removeSelf"),
      (this.FBInviteWD = null));
  },
  onGetInvitableListFinished: function () {
    logMessage("onGetInvitableListFinished");
    null == this.FBInviteWD &&
      (logMessage("init BkFBInviteFriendWD"),
      (this.FBInviteWD = new BkFBInviteFriendWD()),
      bk.isFbApp && cc.screen.fullScreen() && cc.screen.exitFullScreen(),
      this.FBInviteWD.showWithParent(),
      (this.FBInviteWD.visible = !1));
  },
  initPaymentBonusWD: function (a, b, d, e, f, g, h, k) {
    new VvPaymentBonusWindow(a, b, d, e, f, g, h, k).showWithParent();
  },
  initNotifyContentWD: function (a, b, d, e, f, g) {
    new BkNotifyContentWindow(a, b, d, e, f, g).showWithParent();
  },
  showConfirmPlayFriend: function (a) {
    void 0 != this.invitePlayWd && this.invitePlayWd.removeSelf(!0);
    this.invitePlayWd = new BkFriendInviteConfirm(a);
    this.invitePlayWd.showWithParent();
  },
  storePacket: null,
  processNotifyPaymentBonus: function (a) {
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte(),
      e = "";
    if (2 === d || 3 === d) e = a.Buffer.readString();
    var f = -1,
      g = "";
    2 === b &&
      ((f = a.Buffer.readByte()), 2 === f || 3 === f) &&
      (g = a.Buffer.readString());
    if ((5 !== d && 5 !== f) || !isWebPlatform())
      (a = a.Buffer.readString()), this.initNotifyContentWD(a, b, d, e, f, g);
  },
  updatePaymentBonusSticker: function () {
    var a = getCurrentScene();
    a && a.getGameLayer && a.getGameLayer().addPaymentBonusSticker();
  },
  updateGagop: function (a, b) {
    var d = getCurrentScene();
    d instanceof VvLobby && d.getGameLayer().updateGagop(a, b);
  },
  processUpdateLuatUTable: function (a) {
    if (null == this.lobbyData)
      logMessage(
        "onReceive packet before receiving packet get list table -\x3e reject packet"
      );
    else {
      var b = a.Buffer.readByte(),
        d = a.Buffer.readByte();
      a = d & 1;
      var e = 0 == (d & 4) >> 2,
        d = 1 == (d & 8) >> 3;
      this.lobbyData.updateLuatUGa(b, a, e, d);
      var f = this.getGui();
      f instanceof VvLobby && f.getGameLayer().updateLuatUGa(b, a, e, d);
    }
  },
  processUpdatePlayerNameReturn: function (a) {
    var b = a.Buffer.readByte();
    this.pushOnLoadComplete(b, a.Type);
  },
  processNotifyAddMoney: function (a) {
    var b = a.Buffer.readInt();
    a = a.Buffer.readString();
    var d = BkGlobal.UserInfo.getMoney();
    BkGlobal.UserInfo.setMoney(d + b);
    this.processUpdateProfileUI(b);
    showPopupMessageWith(a, "Th\u00f4ng b\u00e1o");
  },
  ProcessOverviewProfile: function (a) {
    var b = new BkUserData();
    b.setAvatarId(a.Buffer.ReadString());
    b.setIsFriend(a.Buffer.readByte());
    b.setFollower(a.Buffer.readInt());
    b.playerAchievements = [];
    var d = a.Buffer.readInt(),
      e = a.Buffer.readInt(),
      f = a.Buffer.readInt(),
      g = a.Buffer.readInt(),
      d = new BkPlayerAchievement(GID.CO_TUONG, d, e, f, g);
    b.playerAchievements.push(d);
    d = a.Buffer.readInt();
    e = a.Buffer.readInt();
    f = a.Buffer.readInt();
    g = a.Buffer.readInt();
    d = new BkPlayerAchievement(GID.CO_UP, d, e, f, g);
    b.playerAchievements.push(d);
    b.setGameId(BkGlobal.currentGameID);
    this.pushOnLoadComplete(b, a.Type);
  },
  processGetSyncFacebookReturn: function (a) {
    logMessage("processGetSyncFacebookReturn");
    a = function () {
      BkConnectionManager.closeConnection();
      cc.game.restart();
    };
    showPopupMessageWith(
      "b\u1ea1n \u0111\u00e3 \u0111\u1ed3ng b\u1ed9 t\u00e0i kho\u1ea3n th\u00e0nh c\u00f4ng!",
      "",
      a,
      a,
      null
    );
  },
  showPopUpNotify: function (a, b) {
    showPopupMessageWith(a, "", null, b, null);
  },
  showChooseAccountWindow: function (a) {
    new BkChooseAccountWindow(a).showWithParent();
  },
  processLinkPlayerAccount: function (a) {
    Util.removeAnim();
    var b = this;
    logMessage("processLinkPlayerAccount");
    var d = a.Buffer.readByte(),
      e = a.Buffer.readByte();
    logMessage("subEvent: " + d + " - codeRtn: " + e);
    if (d == fb.SUBEVENT_SYNC_FB_FRIENDS)
      b.pushOnLoadComplete(fb.SUBEVENT_SYNC_FB_FRIENDS, a.Type);
    else
      switch (e) {
        case fb.SUCCESS:
          d == fb.SUBEVENT_LINK_PLAYER
            ? ((BkGlobal.isFbLinkable = !0),
              (BkGlobal.isConnectedFB = !0),
              this.showPopUpNotify(
                "B\u1ea1n \u0111\u00e3 li\u00ean k\u1ebft t\u00e0i kho\u1ea3n th\u00e0nh c\u00f4ng!",
                function () {
                  logMessage(
                    "close popup dong bo tai khoan -\x3e restart game"
                  );
                  BkConnectionManager.closeConnection();
                  cc.game.restart();
                }
              ),
              NativeInterface.logFirebaseEvent(EVENT_NAME.LINK_FB))
            : d == fb.SUBEVENT_RENAME
            ? this.showPopUpNotify(
                "B\u1ea1n \u0111\u00e3 \u0111\u1ed5i t\u00ean \u0111\u0103ng nh\u1eadp th\u00e0nh c\u00f4ng!",
                function () {
                  logMessage("BkGlobal.tempData: " + BkGlobal.tempData);
                  BkGlobal.UserInfo.setUserName(BkGlobal.tempData);
                  BkGlobal.tempData = null;
                  BkGlobal.isReanamable = !1;
                  b.getGui().updateAvatar(BkGlobal.UserInfo);
                  b.pushOnLoadComplete(fb.CLOSE_WINDOW, a.Type);
                }
              )
            : d == fb.SUBEVENT_SYNC_FACEBOOK &&
              this.processGetSyncFacebookReturn(a);
          break;
        case fb.ERR_AUTH_FACEBOOK:
          this.showPopUpNotify(BkConstString.ERR_AUTH_FACEBOOK);
          NativeInterface.resetAcessTokenFB();
          break;
        case fb.ERR_LINK_FACEBOOK_LINKED:
          d = {};
          d.nameLinked = a.Buffer.readString();
          d.avatarLinked = a.Buffer.readString();
          d.eloCotuongLinked = a.Buffer.readInt();
          d.rankCotuongLinked = a.Buffer.readInt();
          d.eloCoupLinked = a.Buffer.readInt();
          d.rankCoUpLinked = a.Buffer.readInt();
          d.eloCotuong = a.Buffer.readInt();
          d.rankCotuong = a.Buffer.readInt();
          d.eloCoup = a.Buffer.readInt();
          d.rankCoUp = a.Buffer.readInt();
          logMessage(
            "nameLinked: " +
              d.nameLinked +
              " avatarLinked: " +
              d.avatarLinked +
              " eloCotuongLinked: " +
              d.eloCotuongLinked +
              " rankCotuongLinked: " +
              d.rankCotuongLinked +
              " eloCoupLinked: " +
              d.eloCoupLinked +
              " rankCoUpLinked:" +
              d.rankCoUpLinked
          );
          logMessage(
            "eloCotuong: " +
              d.eloCotuong +
              " rankCotuong: " +
              d.rankCotuong +
              " eloCoup: " +
              d.eloCoup +
              " rankCoUp: " +
              d.rankCoUp
          );
          this.showChooseAccountWindow(d);
          break;
        case fb.ERR_LINK_PLAYER_LINKED:
          this.showPopUpNotify(BkConstString.ERR_LINK_PLAYER_LINKED);
          break;
        case fb.ERR_LINK_PLAYER_FACEBOOK:
          d = BkConstString.insertIntoStringWithListString(
            BkConstString.ERR_LINK_PLAYER_FACEBOOK,
            [this.txtUser.getString()]
          );
          this.showPopUpNotify(d);
          break;
        case fb.ERR_LINK_INCORRECT_USERPASS:
          this.showPopUpNotify(BkConstString.ERR_LINK_INCORRECT_USERPASS);
          break;
        case fb.ERR_RENAME_NULL_OR_EMPTY:
          this.showPopUpNotify(BkConstString.ERR_RENAME_NULL_OR_EMPTY);
          break;
        case fb.ERR_RENAME_UNAVAILABLE:
          this.showPopUpNotify(BkConstString.ERR_RENAME_UNAVAILABLE);
          break;
        case fb.ERR_RENAME_EXISTING:
          this.showPopUpNotify(BkConstString.ERR_RENAME_EXISTING);
      }
  },
  sendHeartRequest: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_HEART_REQUEST);
    BkConnectionManager.send(a);
  },
  updateHeartUI: function (a, b) {
    logMessage("updateHeartUI: " + a + " - reason" + b);
    var d = BkGlobal.UserInfo.getMoney() + a;
    BkGlobal.UserInfo.setMoney(d);
    if ((d = getCurrentScene())) {
      var e = null,
        e = d instanceof BkChooseGame ? d.chooseGameLayer : d.getGameLayer();
      e.updateHeart(a, b);
    }
  },
  processHeartChangeReturn: function (a) {
    var b = a.Buffer.readInt();
    a = a.Buffer.readInt();
    logMessage("heartNumber: " + b + " intCountdountTime: " + a);
    this.processHeartCountdownTime(a);
    this.updateHeartUI(b, REASON_ADD_HEART.ONTIME_FREE_HEART);
  },
  processDailyTaskReturn: function (a) {
    NativeInterface.logFirebaseEvent(EVENT_NAME.FINISH_TASK);
    var b = a.Buffer.readInt(),
      d = a.Buffer.readByte(),
      e = -1,
      f = -1;
    0 <= d ? (e = a.Buffer.readByte()) : (f = a.Buffer.readInt());
    logMessage(
      "freeHeart " + b + " result: " + d + " require: " + e + " timeNext: " + f
    );
    BkGlobal.UserInfo.taskWinGame = d;
    BkGlobal.UserInfo.taskDutyGame = e;
    BkGlobal.UserInfo.taskWaitingTime = f;
    0 <= BkGlobal.UserInfo.taskWaitingTime &&
      (BkGlobal.UserInfo.taskStartTime =
        Math.floor(BkTime.GetCurrentTime() / 1e3) +
        BkGlobal.UserInfo.taskWaitingTime);
    this.updateHeartUI(b, REASON_ADD_HEART.DAILY_TASK_FINISH);
    a = getCurrentScene();
    a instanceof BkChooseGame &&
      ((a = a.chooseGameLayer), a.updateDailyTaskSprite());
  },
  processHotTableReturn: function (a) {
    logMessage("processHotTableReturn");
    var b = {};
    b.gameId = a.Buffer.readByte();
    for (b.tableList = []; a.Buffer.isReadable(); ) {
      var d = {};
      d.gameId = b.gameId;
      d.roomId = a.Buffer.readByte();
      d.tableId = a.Buffer.readByte();
      d.firstPlayerName = a.Buffer.readString();
      d.firstPlayerElo = a.Buffer.readInt();
      d.firstavatar = a.Buffer.readString();
      d.lastPlayerName = a.Buffer.readString();
      d.lastPlayerElo = a.Buffer.readInt();
      d.lastavatar = a.Buffer.readString();
      d.remainTime = a.Buffer.readInt();
      b.tableList.push(d);
    }
    this.pushOnLoadComplete(b, a.Type);
  },
  processVertifyTransactionReceipe: function (a) {
    a = a.Buffer.readInt();
    logMessage("processVertifyTransactionReceipe: " + a);
    0 == a
      ? showPopupMessageWith(BkConstString.STR_STORE_PAY_FAIL)
      : this.updateHeartUI(a, REASON_ADD_HEART.IN_APP_PURCHASE);
  },
  processVertifyTransactionGGIAP: function (a) {
    a = a.Buffer.readInt();
    logMessage("processVertifyTransactionGGIAP: " + a);
    -1 != a
      ? this.updateHeartUI(a, REASON_ADD_HEART.IN_APP_PURCHASE)
      : showPopupMessageWith(BkConstString.STR_STORE_PAY_FAIL);
  },
  getSettingRequest: function () {
    var a = new BkPacket(),
      b = Util.getClientID();
    a.createGetSettingPacket(b);
    BkConnectionManager.send(a);
  },
  storeAdsSettingAndroid: function () {
    cc.sys.os == cc.sys.OS_ANDROID &&
      (Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_APP_ADS_ID,
        ADS_ID.AND_GG_ADMOB_APP_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_BANNER_ADS_ID,
        ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID,
        ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_INTERSTITIAL_ADS_ID,
        ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_FB_BANNER_ADS_ID,
        ADS_ID.AND_FB_BANNER_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_FB_INTERSTITIAL_ADS_ID,
        ADS_ID.AND_FB_INTERSTITIAL_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_FB_REWARDED_VIDEO_ADS_ID,
        ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_MP_BANNER_ADS_ID,
        ADS_ID.AND_MP_BANNER_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_MP_REWARDED_VIDEO_ADS_ID,
        ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_MP_INTERSTITIAL_ADS_ID,
        ADS_ID.AND_MP_INTERSTITIAL_ADS_ID
      ),
      Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM,
        ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM
      ),
      Util.storeSetting(
        key_ads_setting.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM,
        ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM
      ),
      Util.storeSetting(
        key_ads_setting.AND_FB_INTERSTITIAL_ADS_ID_HEPCM,
        ADS_ID.AND_FB_INTERSTITIAL_ADS_ID_HEPCM
      ),
      Util.storeSetting(
        key_ads_setting.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM,
        ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM
      ),
      Util.storeSetting(
        key_ads_setting.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM,
        ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM
      ),
      Util.storeSetting(
        key_ads_setting.AND_MP_INTERSTITIAL_ADS_ID_HEPCM,
        ADS_ID.AND_MP_INTERSTITIAL_ADS_ID_HEPCM
      ));
  },
  storeAdsSettingIos: function () {
    if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
      Util.storeSetting(
        key_ads_setting.IOS_GG_ADMOB_APP_ADS_ID,
        ADS_ID.IOS_GG_ADMOB_APP_ADS_ID
      ),
        Util.storeSetting(
          key_ads_setting.IOS_GG_ADMOB_BANNER_ADS_ID,
          ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID,
          ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID,
          ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_FB_BANNER_ADS_ID,
          ADS_ID.IOS_FB_BANNER_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_FB_INTERSTITIAL_ADS_ID,
          ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_FB_REWARDED_VIDEO_ADS_ID,
          ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_MP_BANNER_ADS_ID,
          ADS_ID.IOS_MP_BANNER_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_MP_REWARDED_VIDEO_ADS_ID,
          ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_MP_INTERSTITIAL_ADS_ID,
          ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID
        ),
        Util.storeSetting(
          key_ads_setting.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM,
          ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM
        ),
        Util.storeSetting(
          key_ads_setting.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM,
          ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM
        ),
        Util.storeSetting(
          key_ads_setting.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM,
          ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM
        ),
        Util.storeSetting(
          key_ads_setting.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM,
          ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM
        ),
        Util.storeSetting(
          key_ads_setting.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM,
          ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM
        ),
        Util.storeSetting(
          key_ads_setting.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM,
          ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM
        );
  },
  storeAppSetting: function () {
    Util.storeSetting(key_setting.EMAIL_SUPPORT, SETTING.EMAIL_SUPPORT);
    Util.storeSetting(
      key_setting.URL_MESSENGER_SUPPORT,
      SETTING.URL_MESSENGER_SUPPORT
    );
    Util.storeSetting(
      key_setting.MIN_FRIEND_FB_REWARDED,
      SETTING.MIN_FRIEND_FB_REWARDED
    );
    Util.storeSetting(
      key_setting.USERINFO_TASK_DUTY_GAME,
      BkGlobal.UserInfo.taskDutyGame
    );
    Util.storeSetting(key_setting.URL_HUONG_DAN, SETTING.URL_HUONG_DAN);
    Util.storeSetting(key_setting.URL_POLICY, SETTING.URL_POLICY);
    Util.storeSetting(key_setting.URL_APPLE_STORE, SETTING.URL_APPLE_STORE);
    Util.storeSetting(key_setting.URL_GG_PLAY_STORE, SETTING.URL_GG_PLAY_STORE);
    Util.storeSetting(
      key_setting.URL_DOMAIN_SETTING,
      SETTING.URL_DOMAIN_SETTING
    );
  },
  processGetSettingReturn: function (a) {
    logMessage(
      "done load setting -\x3e set last loading Time de chi load 1 lan trong ngay"
    );
    BkGlobal.isFistLoginInday = !1;
    Util.setLastLoginTime();
    a = a.Buffer.readString();
    a = JSON.parse(a);
    cc.sys.os == cc.sys.OS_ANDROID &&
      ((ADS_ID.AND_GG_ADMOB_APP_ADS_ID = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobAppId",
        ADS_ID.AND_GG_ADMOB_APP_ADS_ID
      )),
      (ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobBannerAdsId",
        ADS_ID.AND_GG_ADMOB_BANNER_ADS_ID
      )),
      (ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobRewardedVideoAdsId",
        ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID
      )),
      (ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobInterstitialAdsId",
        ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.AND_FB_BANNER_ADS_ID = Util.parseJSONfromData(
        a,
        "androidFacebookBannerAdsId",
        ADS_ID.AND_FB_BANNER_ADS_ID
      )),
      (ADS_ID.AND_FB_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
        a,
        "androidFacebookInterstitialAdsId",
        ADS_ID.AND_FB_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
        a,
        "androidFacebookRewardedVideoAdsId",
        ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID
      )),
      (ADS_ID.AND_MP_BANNER_ADS_ID = Util.parseJSONfromData(
        a,
        "androidMoPubBannerAdsId",
        ADS_ID.AND_MP_BANNER_ADS_ID
      )),
      (ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
        a,
        "androidMoPubRewardedVideoAdsId",
        ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID
      )),
      (ADS_ID.AND_MP_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
        a,
        "androidMoPubFullscreenAdsId",
        ADS_ID.AND_MP_INTERSTITIAL_ADS_ID
      )),
      (ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobRewardedVideoAdsIdHEcpm",
        ADS_ID.AND_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM
      )),
      (ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidGoogleAdmobInterstitialAdsIdHEcpm",
        ADS_ID.AND_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM
      )),
      (ADS_ID.AND_FB_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidFacebookInterstitialAdsIdHEcpm",
        ADS_ID.AND_FB_INTERSTITIAL_ADS_ID_HEPCM
      )),
      (ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidFacebookRewardedVideoAdsIdHEcpm",
        ADS_ID.AND_FB_REWARDED_VIDEO_ADS_ID_HEPCM
      )),
      (ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidMoPubRewardedVideoAdsIdHEcpm",
        ADS_ID.AND_MP_REWARDED_VIDEO_ADS_ID_HEPCM
      )),
      (ADS_ID.AND_MP_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
        a,
        "androidMoPubFullscreenAdsIdHEcpm",
        ADS_ID.AND_MP_INTERSTITIAL_ADS_ID_HEPCM
      )));
    if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
      (ADS_ID.IOS_GG_ADMOB_APP_ADS_ID = Util.parseJSONfromData(
        a,
        "iosGoogleAdmobAppId",
        ADS_ID.IOS_GG_ADMOB_APP_ADS_ID
      )),
        (ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID = Util.parseJSONfromData(
          a,
          "iosGoogleAdmobBannerAdsId",
          ADS_ID.IOS_GG_ADMOB_BANNER_ADS_ID
        )),
        (ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
          a,
          "iosGoogleAdmobRewardedVideoAdsId",
          ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID
        )),
        (ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
          a,
          "iosGoogleAdmobInterstitialAdsId",
          ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID
        )),
        (ADS_ID.IOS_FB_BANNER_ADS_ID = Util.parseJSONfromData(
          a,
          "iosFacebookBannerAdsId",
          ADS_ID.IOS_FB_BANNER_ADS_ID
        )),
        (ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
          a,
          "iosFacebookInterstitialAdsId",
          ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID
        )),
        (ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
          a,
          "iosFacebookRewardedVideoAdsId",
          ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID
        )),
        (ADS_ID.IOS_MP_BANNER_ADS_ID = Util.parseJSONfromData(
          a,
          "iosMoPubBannerAdsId",
          ADS_ID.IOS_MP_BANNER_ADS_ID
        )),
        (ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID = Util.parseJSONfromData(
          a,
          "iosMoPubRewardedVideoAdsId",
          ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID
        )),
        (ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID = Util.parseJSONfromData(
          a,
          "iosMoPubFullscreenAdsId",
          ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID
        )),
        (ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosGoogleAdmobRewardedVideoAdsIdHEcpm",
          ADS_ID.IOS_GG_ADMOB_REWARDED_VIDEO_ADS_ID_HEPCM
        )),
        (ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosGoogleAdmobInterstitialAdsIdHEcpm",
          ADS_ID.IOS_GG_ADMOB_INTERSTITIAL_ADS_ID_HEPCM
        )),
        (ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosFacebookInterstitialAdsIdHEcpm",
          ADS_ID.IOS_FB_INTERSTITIAL_ADS_ID_HEPCM
        )),
        (ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosFacebookRewardedVideoAdsIdHEcpm",
          ADS_ID.IOS_FB_REWARDED_VIDEO_ADS_ID_HEPCM
        )),
        (ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosMoPubRewardedVideoAdsIdHEcpm",
          ADS_ID.IOS_MP_REWARDED_VIDEO_ADS_ID_HEPCM
        )),
        (ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM = Util.parseJSONfromData(
          a,
          "iosMoPubFullscreenAdsIdHEcpm",
          ADS_ID.IOS_MP_INTERSTITIAL_ADS_ID_HEPCM
        ));
    SETTING.EMAIL_SUPPORT = Util.parseJSONfromData(
      a,
      "emailSupport",
      SETTING.EMAIL_SUPPORT
    );
    SETTING.URL_MESSENGER_SUPPORT = Util.parseJSONfromData(
      a,
      "fbMessengerSupport",
      SETTING.URL_MESSENGER_SUPPORT
    );
    SETTING.MIN_FRIEND_FB_REWARDED = Util.parseJSONfromData(
      a,
      "minFriendFBReward",
      SETTING.MIN_FRIEND_FB_REWARDED
    );
    BkGlobal.UserInfo.taskDutyGame = Util.parseJSONfromData(
      a,
      "taskWinDuty",
      BkGlobal.UserInfo.taskDutyGame
    );
    SETTING.URL_HUONG_DAN = Util.parseJSONfromData(
      a,
      "urlGameRule",
      SETTING.URL_HUONG_DAN
    );
    SETTING.URL_POLICY = Util.parseJSONfromData(
      a,
      "urlPolicy",
      SETTING.URL_POLICY
    );
    SETTING.URL_APPLE_STORE = Util.parseJSONfromData(
      a,
      "urlIos",
      SETTING.URL_APPLE_STORE
    );
    SETTING.URL_GG_PLAY_STORE = Util.parseJSONfromData(
      a,
      "urlAndroid",
      SETTING.URL_GG_PLAY_STORE
    );
    SETTING.URL_DOMAIN_SETTING = Util.parseJSONfromData(
      a,
      "getdomain",
      SETTING.URL_DOMAIN_SETTING
    );
    isFBInstantGame() ||
      isWebPlatform() ||
      (this.storeAdsSettingAndroid(),
      this.storeAdsSettingIos(),
      this.storeAppSetting(),
      NativeInterface.setAdsIDWithData(),
      Util.sendPacketWithOnlyType(c.CONTENT_ADS_CACHE_SETTING));
  },
  processCacheAdsSettings: function (a) {
    if (!isFBInstantGame() && !isWebPlatform) {
      var b = a.Buffer.readByte();
      a = a.Buffer.readByte();
      this.cacheAdsStartGame(b, a);
    }
  },
  cacheAdsStartGame: function (a, b) {
    logMessage("cacheAdsStartGame: " + a + " - " + b);
    0 <= a && NativeInterface.cacheNextInterstitialAdHEPCM(a, !0);
    0 <= b && NativeInterface.cacheNextRewardedVideoAdHEPCM(b, !0);
  },
  processPlayerNewsFeed: function (a) {
    var b = a.Buffer.readByte();
    a = {};
    a.numberFriendOnline = b;
    b = getCurrentScene();
    if (b instanceof BkChooseGame) b.onUpdatePlayerNewsFees(a);
  },
  processNetworkEvent: function (a) {
    -42 != a.Type &&
      46 != a.Type &&
      logMessage("BkCommonLogic -\x3e processNetworkEvent " + a.Type);
    switch (a.Type) {
      case c.CONTENT_ADS_CACHE_SETTING:
        this.processCacheAdsSettings(a);
        break;
      case c.NETWORK_HOT_TABLE_RETURN:
        this.processHotTableReturn(a);
        break;
      case c.NETWORK_JOIN_CHAN_GAME:
        this.processJoinChanGameReturn(a);
        break;
      case c.ANY:
        break;
      case c.NETWORK_LOG_IN_SUCCESS:
        this.onLoginSuccess(a);
        break;
      case c.NETWORK_LOG_IN_FAILURE:
        logMessage("LOG_IN_FAILURE");
        this.pushOnLoadComplete(null, a.Type);
        processLoginRegistFailEx();
        break;
      case c.NETWORK_REGISTER_FAILURE:
        logMessage("NETWORK_REGISTER_FAILURE");
        NativeInterface.logFirebaseEvent(
          EVENT_NAME.PREPARE_GAME,
          Util.createActionJsonDataLogEventFirebase("NETWORK_REGISTER_FAILURE")
        );
        switchToSceneWithGameState(GS.PREPARE_GAME);
        break;
      case c.NETWORK_FORGOT_PASSWORD:
        this.pushOnLoadComplete(null, a.Type);
        break;
      case c.NETWORK_FORGOT_PASSWORD_RETURN:
        var b = a.Buffer.readString();
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_WRONG_USERNAME_OR_CLIENT_ID:
        this.pushOnLoadComplete(null, a.Type);
        break;
      case c.NETWORK_REGISTER_EXCEED_MAX:
        this.pushOnLoadComplete(null, a.Type);
        break;
      case c.NETWORK_AUTO_FIND_TABLE_NOT_FOUND_RETURN:
        logMessage("NETWORK_AUTO_FIND_TABLE_NOT_FOUND_RETURN");
        showToastMessage(
          BkConstString.STR_AUTO_FIND_TABLE_FOUND,
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2
        );
        break;
      case c.NETWORK_TABLE_JOIN_SUCCESS:
        logMessage("NETWORK_TABLE_JOIN_SUCCESS");
        BkLogicManager.getLogic().ProcessTableJoinSuccess(a);
        break;
      case c.NETWORK_TABLE_JOIN_FAILURE:
        this.processTableJoinFailure(a);
        break;
      case c.NETWORK_GAME_JOIN_SUCCESS:
        logMessage("NETWORK_GAME_JOIN_SUCCESS");
        BkGlobal.currentGameID = this.crGame;
        BkLogicManager.initGameLogic();
        BkLogicManager.getLogic().ProcessGetRoomByRoomType(0);
        break;
      case c.NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE_RETURN:
        logMessage("NETWORK_GET_GAME_ROOMS_BY_ROOM_TYPE_RETURN");
        BkLogicManager.getLogic().ProcessGetRoomData(a);
        break;
      case c.NETWORK_ROOM_JOIN_SUCCESS:
        logMessage("NETWORK_ROOM_JOIN_SUCCESS");
        BkLogicManager.getLogic().ProcessOnJoinRoomSuccess(a);
        break;
      case c.NETWORK_TIME_OUT_LEAVE:
        logMessage("NETWORK_ROOM_JOIN_SUCCESS");
        break;
      case c.NETWORK_ROOM_TABLES_UPDATE:
        logMessage("NETWORK_ROOM_TABLES_UPDATE");
        BkLogicManager.getLogic().ProcessOnRoomTablesUpdate(a);
        break;
      case c.NETWORK_MAIN_PROFILE_RETURN:
        logMessage("NETWORK_MAIN_PROFILE_RETURN");
        this.onMainProfileReturn(a);
        break;
      case c.NETWORK_PROFILE_RETURN:
        logMessage("NETWORK_PROFILE_RETURN");
        this.onProfileReturn(a);
        break;
      case c.NETWORK_GET_PLAYER_ACHIEVEMENT_RETURN:
        logMessage("NETWORK_GET_PLAYER_ACHIEVEMENT_RETURN");
        this.onPlayerAchievementReturn(a);
        break;
      case c.NETWORK_UPDATE_PASSWORD_FAILED:
      case c.NETWORK_UPDATE_PASSWORD_SUCCESS:
        this.pushOnLoadComplete(null, a.Type);
        break;
      case c.NETWORK_SELECT_AVATAR_SUCCESS:
        this.pushOnLoadComplete(null, a.Type);
        this.processUpdateProfileUI();
        break;
      case c.NETWORK_UPDATE_PROFILE_SUCCESS:
        this.pushOnLoadComplete(null, a.Type);
        break;
      case c.NETWORK_GET_CHAMPION_LIST_RETURN:
        logMessage("NETWORK_GET_CHAMPION_LIST_RETURN");
        for (b = []; a.Buffer.isReadable(); ) {
          var d = new BkLeaderBoardData(
            a.Buffer.readByte(),
            a.Buffer.readString()
          );
          logMessage("Type " + d.type + " champion " + d.leaderName);
          void 0 != d.typeName && d.gid != GID.MAU_BINH && b.push(d);
        }
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_TOP_U_TO_RETURN:
        this.ProcessTopUToReturn(a);
        break;
      case c.NETWORK_GET_TOP_PLAYER_RETURN:
        logMessage("NETWORK_GET_TOP_PLAYER_RETURN");
        this.processTopPlayerReturn(a);
        break;
      case c.GET_TOP_RICHEST_CHAN_PLAYER:
        this.processTopRichestChan(a);
        break;
      case c.NETWORK_GET_TOP_RICHEST_PLAYER_RETURN:
        this.processTopRichestPlayerReturn(a);
        logMessage("NETWORK_GET_TOP_RICHEST_PLAYER_RETURN");
        break;
      case c.NETWORK_PLAYER_ITEMS_RETURN:
        logMessage("NETWORK_PLAYER_ITEMS_RETURN");
        this.onPlayerItemReturn(a);
        break;
      case c.NETWORK_GET_FRIENDS_RETURN:
        logMessage("NETWORK_GET_FRIENDS_RETURN");
        this.processGetFriendsListReturn(a);
        break;
      case c.NETWORK_PLAYER_SEARCH_FRIENDS:
        logMessage("NETWORK_PLAYER_SEARCH_FRIENDS");
        this.processSearchFriendReturn(a);
        break;
      case c.NETWORK_ACCEPT_FRIEND_SUCCESS:
      case c.NETWORK_REMOVE_FRIEND_SUCCESS:
      case c.NETWORK_REQUEST_FRIEND_SUCCESS:
        this.processFriendsListReturnState(a);
        logMessage("processFriendsListReturnState");
        break;
      case c.NETWORK_JOIN_FRIEND_TABLE_FAILURE:
        this.processJoinFriendTableFailure(a);
        break;
      case c.NETWORK_OVERVIEW_OTHER_PROFILE_RETURN:
        this.ProcessOverviewProfile(a);
        break;
      case c.NETWORK_LUCKY_BOX_REQUEST_RETURN:
        this.processLuckyBoxRequestReturn(a);
        logMessage("NETWORK_LUCKY_BOX_REQUEST_RETURN");
        break;
      case c.NETWORK_FACEBOOK_INVITE_FRIENDS:
        this.processFacebookInviteFriendBonusReturn(a);
        break;
      case c.NETWORK_GET_FACEBOOK_INVITE_FRIENDS:
        break;
      case c.NETWORK_UPDATE_PRIVATE_KEY:
        this.savePrivateKey(a);
        break;
      case c.NETWORK_GET_DAILY_TASK_LIST_RETURN:
        b = this.getDailyTaskListReturn(a);
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_REQUEST_DAILY_TASK_BONUS_RETURN:
        b = this.getDailyTaskBonus(a);
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_CONTENT_PROVIDER_INFO_RETURN:
        this.processContentProviderInfoReturn(a);
        break;
      case c.NETWORK_NAP_THE_CAO_BANNED:
      case c.NETWORK_NAP_THE_CAO_FAILED:
      case c.NETWORK_SERVICE_NAP_THE_BUSY:
        this.pushOnLoadComplete(a, a.Type);
        break;
      case c.NETWORK_NAP_THE_CAO_SUCCESS:
        for (b = a.Buffer.readInt(); a.Buffer.isReadable(); )
          (d = a.Buffer.readInt()), Util.logPurchase(d, "Thecao");
        if (
          BkGlobal.currentGS == GS.CHOOSE_GAME ||
          BkGlobal.currentGS == GS.CHOOSE_TABLE
        )
          if (
            (BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + b),
            this.getGui().updateAvatar(BkGlobal.UserInfo),
            null == this.onLC)
          ) {
            a =
              "B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng " +
              b +
              BkConstString.getGameCoinStr() +
              " v\u00e0o t\u00e0i kho\u1ea3n.";
            BkDialogWindowManager.showPopupWith(
              a,
              "Th\u00f4ng b\u00e1o",
              null,
              null,
              null,
              TYPE_MESSAGE_BOX,
              null
            );
            break;
          }
        if (
          BkGlobal.currentGS == GS.INGAME_GAME &&
          (logMessage("nap the ingame"),
          (d = BkLogicManager.getInGameLogic().getMyClientState()),
          null != d
            ? BkLogicManager.getInGameLogic().increaseCash(d, b, "")
            : BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + b),
          null == this.onLC)
        ) {
          BkLogicManager.getInGameLogic()
            .getGameLayer()
            .setVisibleCountDownText(!1);
          a =
            "B\u1ea1n \u0111\u01b0\u1ee3c c\u1ed9ng " +
            b +
            BkConstString.getGameCoinStr() +
            " v\u00e0o t\u00e0i kho\u1ea3n.";
          showPopupMessageWith(
            a,
            "Th\u00f4ng b\u00e1o",
            function () {},
            function () {
              BkLogicManager.getInGameLogic()
                .getGameLayer()
                .setVisibleCountDownText(!0);
            }
          );
          break;
        }
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_INBOX_MAILS_RETURN:
        logMessage("NETWORK_INBOX_MAILS_RETURN");
        this.processGetMailInboxListReturn(a);
        break;
      case c.NETWORK_OUTBOX_MAILS_RETURN:
        logMessage("NETWORK_OUTBOX_MAILS_RETURN");
        this.processGetMailOutboxListReturn(a);
        break;
      case c.NETWORK_PLAYER_NOT_EXIST:
      case c.NETWORK_SEND_MAIL_SUCCESS:
        this.processSendMailReturn(a.Type);
        break;
      case c.NETWORK_MAIL_RETURN:
        logMessage("NETWORK_MAIL_RETURN");
        this.processGetMailReturn(a);
        break;
      case c.NETWORK_GET_ITEM_INFO:
        this.processGetItemInfoReturn(a);
        break;
      case c.NETWORK_BUY_ITEM_SUCCESS:
        logMessage("NETWORK_BUY_ITEM_SUCCESS");
        this.processBuyItemSuccess(a);
        break;
      case c.NETWORK_BUY_ITEM_FAILURE:
        logMessage("NETWORK_BUY_ITEM_FAILURE");
        this.processBuyItemFail(a);
        break;
      case c.NETWORK_JOIN_WEB_GAME_ROOM:
        this.onJoinWebGameRoom(a);
        break;
      case c.NETWORK_GAME_LEAVE_SUCCESS:
        Util.removeAnim();
        BkLogicManager.setGameLogic(null);
        a.Buffer.isReadable() &&
          (BkGlobal.UserInfo.taskWinGame = a.Buffer.readInt());
        BkGlobal.currentGameID = -1;
        BkGlobal.currentRoomID = -1;
        BkGlobal.currentTableID = -1;
        switchToSceneWithGameState(GS.CHOOSE_GAME, !0);
        break;
      case c.NETWORK_TABLE_STATUS_CHANGE:
        break;
      case c.NETWORK_TABLE_SIZE_UPDATE_PUSH:
        break;
      case c.NETWORK_TABLE_SETTINGS_UPDATE_PUSH:
        break;
      case c.NETWORK_RECEIVE_INVITATION:
        break;
      case c.NETWORK_ADMIN_CHANGED_MONEY_RETURN:
        b = a.Buffer.readInt();
        a.Buffer.isReadable()
          ? 1 == a.Buffer.readByte() &&
            this.updateMyMoney(b, AM.TYPE_PAY_BET_FOOTBALL_WIN_MONEY)
          : this.updateMyMoney(b, AM.TYPE_ADMIN_ADD);
        break;
      case c.NETWORK_ADD_MONEY_RETURN:
        b = a.Buffer.readInt();
        this.pushOnLoadComplete(b, a.Type);
        for (this.updateMyMoney(b, AM.TYPE_SMS_ADD); a.Buffer.isReadable(); )
          (d = a.Buffer.readInt()),
            (b = a.Buffer.readByte()),
            0 == b
              ? Util.logPurchase(d, "SMS")
              : 1 == b
              ? Util.logPurchase(d, "SMS+")
              : 2 == b && Util.logPurchase(d, "Thecao");
        break;
      case c.NETWORK_KDL:
        this.processOnReceiveKDL(a);
        break;
      case c.NETWORK_SEND_MESSAGE_TO_CLIENT:
        this.processReceiveMessageToClient(a);
        break;
      case c.NETWORK_SERVER_REQUEST:
        this.processReceiveServerRequestMessage(a);
        break;
      case c.NETWORK_RATE_APP:
        this.processRateApp(a);
        break;
      case c.NETWORK_ON_HAS_ALLOW_KICK_WAND:
        BkGlobal.UserInfo.setHasAllowKickWand(!0);
        break;
      case c.NETWORK_LOG_IN_FACEBOOK:
      case c.NETWORK_SETUP_FACEBOOK_ACCOUNT:
      case c.NETWORK_SETUP_CHAN_TABLE:
        this.processUpdateLuatUTable(a);
        logMessage(
          "process NETWORK_SETUP_CHAN_TABLE, type: " +
            c.NETWORK_SETUP_CHAN_TABLE
        );
        break;
      case c.NETWORK_PLAY_WITH_FRIEND_REQUEST:
        b = a.Buffer.readByte();
        this.pushOnLoadComplete(b, a.Type);
        break;
      case c.NETWORK_PLAY_WITH_FRIEND_INFORM:
        this.processPlayWithFriendInform(a);
        break;
      case c.NETWORK_SEND_TOKEN_TO_PHONE:
      case c.NETWORK_UPDATE_PHONE_NUMBER:
        this.processRegisterPhoneNumber(a);
        break;
      case c.NETWORK_BET_LOTTE_TICKET:
        this.processLodeReturn(a);
        break;
      case c.NETWORK_BET_FOOTBALL_RETURN:
        BkGlobal.currentGS == GS.CHOOSE_GAME &&
          this.processBetFootballReturn(a);
        break;
      case c.NETWORK_NOTIFY_PAYMENT_BONUS:
        this.processNotifyPaymentBonus(a);
        break;
      case c.NETWORK_CHANGE_GA_GOP_PUSH:
        this.updateGagop(a.Buffer.readByte(), a.Buffer.readByte());
        break;
      case c.NETWORK_NOTIFY_ADD_MONEY:
        this.processNotifyAddMoney(a);
        break;
      case c.NETWORK_LINK_PLAYER_ACCOUNT:
        (BkGlobal.currentGS != GS.CHOOSE_GAME &&
          BkGlobal.currentGS != GS.CHOOSE_TABLE) ||
          this.processLinkPlayerAccount(a);
        break;
      case c.NETWORK_HEART_CHANGE_RETURN:
        this.processHeartChangeReturn(a);
        break;
      case c.NETWORK_DAILY_TASK_RETURN:
        this.processDailyTaskReturn(a);
        break;
      case c.NETWORK_GET_SETTING_RETURN:
        this.processGetSettingReturn(a);
        break;
      case c.NETWORK_GET_CONTENT_ADS_INFO:
        this.processGetContentAdsInfo(a);
        break;
      case c.NETWORK_VERIFY_TRANSACTION_RECEIPE:
        this.processVertifyTransactionReceipe(a);
        break;
      case c.NETWORK_VERIFY_TRANSACTION_GOOGLEIAP:
        this.processVertifyTransactionGGIAP(a);
        break;
      case c.NETWORK_PLAYER_NEWS_FEED:
        this.processPlayerNewsFeed(a);
        break;
      default:
        logMessage(
          "BkLogic not process packet with type: " +
            a.Type +
            " -\x3e call super process"
        ),
          this._super(a);
    }
  },
});
MIN_TIME_INTERACTION = 3e4;
BkInGameLogic = BkBaseLogic.extend({
  activePlayerPosition: -1,
  PlayerState: [],
  isProcessingGui: !1,
  lastEventIndex: 0,
  gameStatus: 0,
  pass: "",
  userData: null,
  startTimeInviteFriend: 0,
  isContinueGame: !1,
  numberOfPlayingPlayer: 0,
  currentPlayerRank: 0,
  kieuBan: 0,
  maxAllowedPlayer: 0,
  maxPlayer: 0,
  IsShowFBInviteFRInaGame: !0,
  isKicked: !1,
  isSoundEnable: !0,
  isShowChat: !0,
  betMoneyList: [],
  finishedPlayerCount: 0,
  moneyLogic: null,
  cardClickQueue: null,
  isDealingCard: !1,
  lastTableBetMoney: 0,
  lastTimeSendChat: 0,
  ctor: function () {
    this._super();
    this.cardClickQueue = new BkQueue();
    BkConnectionManager.initEventsTabChange();
  },
  isQueueEvent: function (a) {
    switch (a) {
      case c.NETWORK_PLAYER_STATUS_RETURN:
      case c.NETWORK_PREPARE_NEW_GAME:
      case c.NETWORK_LEAVE_DURING_GAME:
      case c.NETWORK_PLAYER_MONEY_CHANGE_PUSH:
      case c.NETWORK_PLAYER_NEW_LEVEL:
      case c.NETWORK_PLAYER_HAS_BONUS:
      case c.NETWORK_TABLE_LEAVE_PUSH:
      case c.NETWORK_TABLE_JOIN_PUSH:
      case c.NETWORK_KICK_PLAYER_PUSH:
      case c.NETWORK_TABLE_JOIN_SUCCESS:
      case c.NETWORK_TABLE_LEAVE_SUCCESS:
      case c.NETWORK_GAME_LEAVE_SUCCESS:
      case c.NETWORK_TIME_OUT_LEAVE:
        return !0;
    }
    return !1;
  },
  getlastTimeClick: function () {
    var a = this.getGameLayer().getCustomGameButtonList(),
      b = MIN_TIME_INTERACTION,
      d = 0;
    if (null != a && 0 < a.length)
      for (var e = 0; e < a.length; e++)
        (d = BkTime.GetCurrentTime() - a[e].lastTimeClick), d < b && (b = d);
    return Math.min(
      b,
      BkTime.GetCurrentTime() - this.getGameLayer().btnReady.lastTimeClick
    );
  },
  getGui: function () {
    return BkGlobal.ingameScene;
  },
  getGameLayer: function () {
    return null == this.getGui()
      ? (logMessage("BkGlobal.ingameScene is null"), null)
      : this.getGui().getGameLayer();
  },
  processCardClickEvent: function (a) {
    a.OnCardMouseClick();
  },
  processNextCardClickEvent: function () {},
  getPlayerDisplayLocation: function (a) {
    var b = this.getMyPos();
    return (a - b + this.maxPlayer) % this.maxPlayer;
  },
  isMyServerPos: function (a) {
    var b = this.getMyClientState();
    return null == b ? !1 : a == b.serverPosition;
  },
  getNextActivePlayerPosition: function () {
    var a = 0;
    do {
      this.activePlayerPosition =
        Math.floor(this.activePlayerPosition + 1) % this.maxPlayer;
      a++;
      var b = this.getPlayer(this.activePlayerPosition);
      if (null != b && !b.isFinishedGame && b.isPlaying && !b.isLeaveTurn())
        return this.activePlayerPosition;
    } while (10 > a);
    return -1;
  },
  backReadyPosition: function (a) {
    var b = 0;
    do {
      b++;
      a = Math.floor((a - 1 + this.maxPlayer) % this.maxPlayer);
      var d = this.getPlayer(a);
      if (null != d && !d.isFinishedGame && d.isPlaying && !d.isLeaveTurn())
        break;
    } while (10 > b);
    return a;
  },
  nextReadyPosition: function (a) {
    var b = 0;
    do {
      b++;
      a = Math.floor((a + 1) % this.maxPlayer);
      var d = this.getPlayer(a);
      if (null != d && !d.isFinishedGame && d.isPlaying && !d.isLeaveTurn())
        return a;
    } while (10 > b);
    return -1;
  },
  logArrayClientState: function () {
    logMessage("is Invalid my clientstate -\x3e getableinfo \x26 sync");
    logMessage("getMyClientState - myName: " + BkGlobal.UserInfo.getUserName());
    logMessage("this.PlayerState.length: " + this.PlayerState.length);
    for (var a = 0; a < this.PlayerState.length; a++) {
      var b = this.PlayerState[a];
      logMessage(
        "player " +
          a +
          " name :" +
          b.getName() +
          " serverPos: " +
          b.serverPosition
      );
    }
  },
  isEnoughMoneyToStartGame: function () {
    var a = this.getMyClientState();
    if (null == a)
      return this.logArrayClientState(), this.networkGetTableInfo(), !0;
    logMessage("isEnoughMoneyToStartGame: " + a.getCurrentCash());
    return a.getCurrentCash() >=
      getMinTableBetMoney(BkGlobal.currentGameID) * this.tableBetMoney
      ? !0
      : !1;
  },
  getNumOfPlayingPlayer: function () {
    for (var a = 0, b = 0; b < this.PlayerState.length; b++) {
      var d = this.PlayerState[b];
      d.isPlaying && !d.isFinishedGame && a++;
    }
    return a;
  },
  processLeaveDurringGame: function (a) {
    var b = a.Buffer.readByte();
    a = a.Buffer.readInt();
    var d = this.getPlayer(b);
    this.baseProcessLeaveDuringGame(d);
    this.processLeaveDurringGameWithData(b, a, d);
    this.isQueueEvent(c.NETWORK_LEAVE_DURING_GAME) &&
      this.processNextEventInQueue();
  },
  processLeaveDurringGameWithData: function (a, b, d) {
    logMessage("must implement this function in custom game logic if need");
    a = this.getLoseMoneyOfPlayerOutGameLeavingDuringGame(b);
    a = Math.max(a, -d.getCurrentCash());
    this.increaseCash(d, a, "Ph\u1ea1t");
    for (a = 0; a < this.PlayerState.length; a++) {
      var e = this.getTableBetMoney(),
        f = this.PlayerState[a];
      f.serverPosition != d.serverPosition &&
        f.isPlaying &&
        this.increaseCash(f, this.getReturnMoneyWhenLeavingDuringGame(e, b));
    }
  },
  getLoseMoneyOfPlayerOutGameLeavingDuringGame: function (a) {
    return -a * (this.numberOfPlayingPlayer - 1);
  },
  getReturnMoneyWhenLeavingDuringGame: function (a, b) {
    return Math.floor(b * (1 - TAX_RATE));
  },
  processPlayerStatusUpdate: function (a) {
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte(),
      e = this.getPlayer(b);
    a = this.isQueueEvent(a.Type);
    if (null == e) logMessage("player \x3d\x3d null -\x3e error");
    else {
      e.status = d;
      this.isMyServerPos(b) &&
        (d == PLAYER_STATE_NOT_READY
          ? this.getGameLayer().showStartGameButton()
          : (this.getGameLayer().removeCountDownText(),
            this.getGameLayer().hideStartGameButton()));
      var f;
      f =
        BkGlobal.currentGameID == GID.CO_TUONG ||
        BkGlobal.currentGameID == GID.CO_UP
          ? e.serverPosition
          : this.getPlayerDisplayLocation(b);
      logMessage(
        "processPlayerStatusUpdate name " +
          e.getName() +
          " displayPos: " +
          f +
          " serverPos: " +
          b +
          " status: " +
          d
      );
      this.getGameLayer().onPlayerStatusUpdate(f, d);
    }
    a && this.processNextEventInQueue();
  },
  isOnlyObservePlayer: function () {
    for (var a = 0, b = 0, d = this.PlayerState.length; b < d; b++) {
      var e = this.PlayerState[b];
      e && !e.isObserver && a++;
    }
    return 0 == a;
  },
  isMeBossTable: function () {
    return (
      null != this.getMyClientState() &&
      this.getMyClientState().status == PLAYER_STATE_TABLE_OWNER
    );
  },
  isMyTurn: function () {
    return this.getMyPos() == this.activePlayerPosition;
  },
  getDeafaultClientState: function () {
    return BkGlobal.currentGameID == GID.CO_TUONG ||
      BkGlobal.currentGameID == GID.CO_UP
      ? new BkChessPlayerClientState()
      : BkGlobal.currentGameID == GID.PHOM
      ? new BkPhomClientState()
      : BkGlobal.currentGameID == GID.MAU_BINH
      ? new BkMauBinhClientState()
      : new BkClientState();
  },
  isInvalidMyClientState: function () {
    return null == this.getMyClientState()
      ? (this.networkGetTableInfo(), !0)
      : !1;
  },
  getMyClientState: function () {
    null == this.getPlayerByName(BkGlobal.UserInfo.getUserName()) &&
      this.logArrayClientState();
    return this.getPlayerByName(BkGlobal.UserInfo.getUserName());
  },
  getPlayerByName: function (a) {
    for (var b = 0; b < this.PlayerState.length; b++) {
      var d = this.PlayerState[b];
      if (d.getName() == a) return d;
    }
    return null;
  },
  getMyPos: function () {
    for (var a, b = 0; b < this.PlayerState.length; b++)
      if (
        ((a = this.PlayerState[b]),
        a.getName() == BkGlobal.UserInfo.getUserName())
      )
        return a.serverPosition;
    return -1;
  },
  SortPlayer: function () {
    for (var a = [], b = 0; b < this.maxPlayer; b++) {
      var d = this.getPlayer(b);
      null != d && a.push(d);
    }
    this.PlayerState = a;
  },
  removePlayer: function (a) {
    logMessage("removePlayer " + a);
    for (var b = 0; b < this.PlayerState.length; b++)
      this.PlayerState[b].serverPosition === a && this.PlayerState.splice(b, 1);
  },
  getPlayer: function (a) {
    for (var b = null, d = 0; d < this.PlayerState.length; d++)
      if (((b = this.PlayerState[d]), b.serverPosition == a)) return b;
    return null;
  },
  isAllPlayerReady: function () {
    for (var a = 0; a < this.PlayerState.length; a++) {
      var b = this.PlayerState[a];
      if (b.status == PLAYER_STATE_NOT_READY)
        return showToastMessage("player" + b.getName() + "is not ready"), !1;
    }
    return !0;
  },
  isNeedInvitePlayers: function () {
    return 2 > this.PlayerState.length;
  },
  isIAmActive: function () {
    return this.getMyPos() == this.activePlayerPosition ? !0 : !1;
  },
  getActivePlayer: function () {
    return this.getPlayer(this.activePlayerPosition);
  },
  getActivePlayerPos: function () {
    return this.activePlayerPosition;
  },
  getPlayerDisplayAt: function (a) {
    for (var b = 0; b < this.PlayerState.length; b++) {
      var d;
      d = this.PlayerState[b];
      if (this.getPlayerDisplayLocation(d.serverPosition) == a) return d;
    }
    return null;
  },
  increaseCash: function (a, b, d) {
    var e = "";
    void 0 != d && (e = d);
    a.increaseCash(b);
    playAlertSound();
    this.getGameLayer().UpdatePlayerMoney(a, b, e);
    logMessage(
      "Player:" +
        a.getName() +
        " amount:" +
        b +
        " reason:" +
        e +
        " MoneyAfter:" +
        a.getCurrentMoney()
    );
  },
  processTableLeaveFailure: function () {
    showToastMessage(
      "Kh\u00f4ng th\u1ec3 r\u1eddi b\u00e0n, h\u00e3y th\u1eed l\u1ea1i",
      200,
      200
    );
  },
  processTableJoinPush: function (a) {
    for (var b = a.GetPlayersInfo(), d, e = 0; e < b.length; e++)
      if (
        (logMessage("processTableJoinPush with pos: " + b[e].position),
        (d = this.getPlayer(b[e].position)),
        null == d)
      )
        (d =
          BkGlobal.currentGameID == GID.CO_TUONG ||
          BkGlobal.currentGameID == GID.CO_UP
            ? new BkChessPlayerClientState()
            : new BkClientState()),
          d.setClientInfo(b[e]),
          this.PlayerState.push(d),
          this.SortPlayer(),
          this.getGameLayer().onTableJoin(
            d,
            this.getPlayerDisplayLocation(d.serverPosition)
          );
      else {
        logMessage(
          "invalid packet table join push with " +
            b[e].position +
            " -\x3e get table info \x26 sync"
        );
        this.networkGetTableInfo();
        return;
      }
    playJoinGameSound();
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  processPlayerMoneyChangePush: function (a) {
    var b = a.Buffer.ReadString(),
      d = a.Buffer.readInt();
    logMessage("playerName: " + b + " change: " + d);
    b = this.getPlayerByName(b);
    null != b && this.increaseCash(b, d);
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  processGoldBoxEvent: function (a) {
    if (a.Type == c.NETWORK_GET_GOLD_BOX_REMAIN_TIME_RETURN) a.Buffer.readInt();
    else if (a.Type == c.NETWORK_GET_GOLD_BOX_REWARD_RETURN)
      if (((a = a.Buffer.readInt()), logMessage("reward: " + a), 0 < a)) {
        var b = this.getMyClientState();
        this.getGameLayer().removeGoldBox();
        this.increaseCash(b, a);
        showToastMessage(
          "B\u1ea1n v\u1eeba nh\u1eadn \u0111\u01b0\u1ee3c " +
            formatNumber(a) +
            BkConstString.getGameCoinStr() +
            " t\u1eeb h\u1ed9p qu\u00e0.",
          WINDOW_WIDTH / 2,
          WINDOW_HEIGHT / 2,
          5,
          300
        );
      } else
        showToastMessage(
          "C\u00f2n " +
            convertSecondToMinSec(-a) +
            " B\u1ea1n m\u1edbi c\u00f3 th\u1ec3 nh\u1eadn qu\u00e0!",
          WINDOW_WIDTH / 2,
          WINDOW_HEIGHT / 2,
          3,
          300
        );
  },
  processWhenPlayerHasBonus: function (a) {
    var b = a.Buffer.readByte(),
      d = this.getMyClientState();
    if (null != d) {
      var e;
      e =
        b == PLAYER_NEW_LEVEL
          ? getNewLevelBonusMoney(d.getUserInfo().getLevel())
          : getBonusByBonusCode(b);
      this.increaseCash(d, e, getBonusReasonByBonusCode(b));
    }
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  processWhenPlayerNewLevel: function (a) {
    var b = a.Buffer.readByte(),
      d = a.Buffer.readInt(),
      e = this.getPlayer(b);
    if (null != e) {
      var f = e.getUserInfo().getLevel(),
        f = d - f;
      e.getUserInfo().setLevel(d);
      if (
        e.getName() == BkGlobal.UserInfo.getUserName() &&
        (BkGlobal.UserInfo.setLevel(d),
        logMessage(
          "currentGameID: " + BkGlobal.currentGameID + " - newLevel: " + d
        ),
        BkGlobal.currentGameID == GID.CO_UP
          ? (BkGlobal.UserInfo.setEloCoUp(d), logMessage("setEloCoUp: " + d))
          : BkGlobal.currentGameID == GID.CO_TUONG &&
            (BkGlobal.UserInfo.setEloCoTuong(d),
            logMessage("setEloCoTuong: " + d)),
        isFBInstantGame())
      ) {
        var g = BkGlobal.currentGameID;
        logMessage("updateLeaderboard: " + d + " GID: " + g);
        BkFbInstant.updateLeaderboard(d, g);
        BkFbInstant.createShareImg(function (a) {
          BkFbInstant.updateChatContext(
            "B\u1ea5m ch\u01a1i ngay \u0111\u1ec3 v\u00e0o game",
            a
          );
        });
      }
      b = this.getGameLayer().getAvatarByServerPos(b);
      this.getGameLayer().showAnimationUpdateMoney(f, "Elo", b);
      this.getGameLayer().onUpdatePlayerLevel(
        e.serverPosition,
        e.getUserInfo()
      );
      b &&
        b.y < cc.winSize.height / 2 &&
        this.getGameLayer().updateEloWLLayer(f);
    }
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  processTableLeaveSuccess: function (a) {
    a.Buffer.isReadable() && a.Buffer.readByte();
    this.ProcessOutGame();
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  setupTable: function (a, b, d) {
    var e = new BkPacket();
    e.CreateSetupTablepacket(a, b, d);
    BkConnectionManager.send(e, !1);
  },
  clearTableData: function () {
    this.maxAllowedPlayer = this.pass = "";
    this.gameStatus = GAME_STATE_NOT_READY;
    for (this.tableBetMoney = 0; 0 < this.PlayerState.length; )
      this.PlayerState.splice(0, 1);
  },
  ProcessKickPlayerAction: function (a) {
    var b = new BkPacket();
    a = this.getPlayerByName(a);
    null != a &&
      (b.CreatePacketWithTypeAndByteData(
        c.NETWORK_KICK_PLAYER,
        a.serverPosition
      ),
      BkConnectionManager.send(b));
  },
  ProcessOutGame: function () {
    logMessage("ProcessOutGame");
    this.resetAllPlayerState();
    this.getGameLayer().clearCurrentGameGui();
    this.clearTableData();
    this.getGameLayer().removeCountDownText();
    logMessage("finish ProcessOutGame");
  },
  getOnHandCard: function (a) {
    return null != a ? a.getOnHandCard() : null;
  },
  updateGameStatus: function (a) {
    this.gameStatus = a;
  },
  getTableBetMoney: function () {
    return this.tableBetMoney;
  },
  getPlayerState: function () {
    return this.PlayerState;
  },
  showCountDownForMe: function () {
    var a = this.getMyClientState();
    null != a &&
      (a.status == PLAYER_STATE_READY ||
        this.isInGameProgress() ||
        this.getGameLayer().showCountDownForMe(TIME_AUTO_READY));
  },
  processAssignAsTableOwner: function (a) {
    null != this.getMyClientState() &&
      ((this.getMyClientState().status = PLAYER_STATE_TABLE_OWNER),
      (this.maxAllowedPlayer = a.Buffer.readByte()),
      logMessage("processAssignAsTableOwner " + this.maxAllowedPlayer),
      a.Buffer.isReadable() && (this.pass = a.Buffer.ReadString()),
      this.getGameLayer().removeCountDownText(),
      this.getGameLayer().showStartGameButton(!1),
      this.getGameLayer().onPlayerStatusUpdate(0, PLAYER_STATE_TABLE_OWNER),
      this.isQueueEvent(a.Type) && this.processNextEventInQueue());
  },
  networkGetTableInfo: function () {
    BkGlobal.isReceiveSyncEvent = !1;
    this.clearQueue();
    var a = new BkPacket();
    a.CreateGetTableInfo();
    BkConnectionManager.send(a);
  },
  readPlayerInfo: function (a) {
    var b = new BkPlayerInfoData();
    b.name = a.Buffer.ReadString();
    b.position = a.Buffer.readByte();
    b.status = a.Buffer.readByte();
    b.money = a.Buffer.readInt();
    b.avatarId = a.Buffer.readString();
    b.level = a.Buffer.readInt();
    b.isMyFriend = 1 == a.Buffer.readByte();
    b.isObserver = 1 == a.Buffer.readByte();
    logMessage(
      "User Name:" +
        b.name +
        " Pos: " +
        b.position +
        " Status: " +
        b.status +
        " Money: " +
        b.money +
        " avatarId: " +
        b.avatarId +
        " level:" +
        b.level
    );
    return b;
  },
  resetListPlayerState: function () {
    if (null != this.PlayerState) {
      for (var a = 0; a < this.PlayerState.length; a++) {
        var b = this.PlayerState[a];
        null != b && b.removeAllCurentCard();
      }
      this.PlayerState = [];
    }
  },
  ProcessGameTableInfo: function (a) {
    logMessage("ProcessGameTableInfo: gameId: " + BkGlobal.currentGameID);
    this.lastEventIndex = 0;
    this.tableBetMoney = a.Buffer.readInt();
    for (var b = [], d; a.Buffer.isReadable(); )
      (d = this.readPlayerInfo(a)), b.push(d);
    this.resetListPlayerState();
    for (d = 0; d < b.length; d++)
      (a =
        BkGlobal.currentGameID == GID.CO_TUONG ||
        BkGlobal.currentGameID == GID.CO_UP
          ? new BkChessPlayerClientState()
          : BkGlobal.currentGameID == GID.PHOM
          ? new BkPhomClientState()
          : BkGlobal.currentGameID == GID.MAU_BINH
          ? new BkMauBinhClientState()
          : new BkClientState()),
        a.setClientInfo(b[d]),
        this.PlayerState.push(a),
        b[d].name == BkGlobal.UserInfo.userName &&
          (BkGlobal.UserInfo.avatarID = b[d].avatarId);
    logMessage("PlayerState before sort: " + this.PlayerState.length);
    this.SortPlayer();
    logMessage(
      "Finished read table info, numOfPlayer: " + this.PlayerState.length
    );
    this.getGameLayer().onTableInfoReturn();
  },
  isInGameProgress: function () {
    return (
      this.gameStatus != GAME_STATE_READY &&
      this.gameStatus != GAME_STATE_FINISH
    );
  },
  netWorkStartGame: function () {
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_DEAL_CARD);
    BkConnectionManager.send(a);
  },
  resetAllPlayerState: function () {
    for (var a = 0; a < this.PlayerState.length; a++) {
      var b = this.PlayerState[a];
      null != b && b.resetPlayerData();
    }
  },
  ProcessPlayerStartGame: function () {
    this.resetAllPlayerState();
    this.netWorkStartGame();
  },
  netWorkReadyGame: function () {
    var a = new BkPacket();
    a.CreatePacketWithTypeAndByteData(
      c.NETWORK_PLAYER_STATUS,
      PLAYER_STATE_READY
    );
    BkConnectionManager.send(a);
  },
  processPlayerReadyAction: function () {
    this.resetAllPlayerState();
    this.netWorkReadyGame();
  },
  processGetWaitingListReturn: function (a) {
    for (var b = []; a.Buffer.isReadable(); ) {
      var d = a.Buffer.readInt(),
        e = a.Buffer.ReadString(),
        f = a.Buffer.readByte(),
        d = new BkBasicUserInfo(e, d, f);
      b.push(d);
    }
    this.getGui().showInviteFriend(b, 1);
  },
  invitePlayer: function (a) {
    var b = new BkPacket();
    b.CreateInvitePlayerPacket(a);
    logMessage("Invite Player" + a);
    BkConnectionManager.send(b);
  },
  processGetFriendsInviteReturn: function (a) {
    for (var b = []; a.Buffer.isReadable(); ) {
      playerMoney = a.Buffer.readInt();
      playerName = a.Buffer.ReadString();
      avatar = a.Buffer.readByte();
      var d = new BkBasicUserInfo(playerName, playerMoney, avatar);
      b.push(d);
    }
    this.getGui().showInviteFriend(b, 2);
  },
  processGetOnlineFriendList: function () {
    Util.showAnim();
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_FRIENDS_TO_INVITE);
    BkConnectionManager.send(a);
  },
  processGetWaitingPlayerList: function () {
    Util.showAnim();
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_WAITING_PLAYERS);
    BkConnectionManager.send(a);
  },
  processShowInviteWindows: function () {
    this.getGui().showInviteWindows(this);
    this.processGetWaitingPlayerList();
  },
  processShowPlayerProfile: function (a) {
    this.getGui().showPlayerOverviewInfo(a);
  },
  processGameTableSyn: function (a) {
    this.getGameLayer().clearCurrentGameGui();
    this.clearQueue();
    this.isSoundEnable = !1;
    this.gameStatus = a.Buffer.readByte();
    for (var b = 0; b < this.PlayerState.length; b++)
      this.PlayerState[b].isPlaying = !1;
    logMessage("Base Logic table Syn: status" + this.gameStatus);
    this.getGameLayer().OnGameTableSyn(a);
  },
  getPunishExitDuringGameMoney: function () {
    logMessage(
      "getPunishExitDuringGameMoney -\x3e must implement this function with other game"
    );
    return 0;
  },
  processLeaveTableRequest: function () {
    if (!this.isDealingCard) {
      var a = this.getMyClientState(),
        b = this;
      if (null != a && a.isPlaying && !a.isFinishedGame) {
        if (this.isInGameProgress()) {
          a =
            "N\u1ebfu b\u1ea1n r\u1eddi b\u00e0n ch\u01a1i b\u1ea1n s\u1ebd b\u1ecb ph\u1ea1t " +
            convertStringToMoneyFormat(
              this.getPunishExitDuringGameMoney(),
              !0
            ) +
            " " +
            BkConstString.STR_GAME_COIN.toLowerCase() +
            ".\nB\u1ea1n c\u00f3 th\u1ef1c s\u1ef1 mu\u1ed1n tho\u00e1t kh\u00f4ng?";
          showPopupConfirmWith(
            a,
            "Tho\u00e1t khi \u0111ang ch\u01a1i",
            function () {
              b.networkOutTable(1);
            }
          );
          return;
        }
      } else if (null != a && a.isPlaying && a.isFinishedGame) {
        this.networkOutTable(1);
        return;
      }
      this.networkOutTable(0);
    }
  },
  processTableLeave: function (a) {
    logMessage("processTableLeavePush pos " + a);
    if (this.isMyServerPos(a))
      logMessage("la minh -\x3e goi tin sai -\x3e reject \x26 reLogin"),
        this.networkGetTableInfo();
    else {
      var b = this.getPlayer(a);
      null != b &&
        (this.clearPlayerCard(b),
        this.getGameLayer().onTableLeavePush(b),
        this.removePlayer(a),
        this.getGameLayer().removePlayerAvatar(
          this.getPlayerDisplayLocation(a)
        ),
        this.isOnlyObservePlayer() &&
          showPopupConfirmWith(
            "Kh\u00f4ng c\u00f2n ng\u01b0\u1eddi ch\u01a1i trong b\u00e0n, b\u1ea1n c\u00f3 mu\u1ed1n chuy\u1ec3n sang xem v\u00e1n kh\u00e1c?",
            "",
            function () {
              var a = new BkPacket();
              a.CreatePacketWithOnlyType(c.NETWORK_JOIN_NEXT_HOT_TABLE);
              BkConnectionManager.send(a);
            },
            function () {
              BkLogicManager.getInGameLogic().processLeaveTableRequest();
            }
          ));
      playLeaveGameSound();
    }
  },
  processTableLeavePush: function (a) {
    logMessage("processTableLeavePush ");
    var b = a.Buffer.readByte();
    this.processTableLeave(b);
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  clearPlayerCard: function (a) {
    null != a &&
      (a.removeOnhandCard(), logMessage("clearPlayerCard:" + a.getName()));
  },
  baseProcessLeaveDuringGame: function (a) {
    this.clearPlayerCard(a);
    a.isPlaying = !1;
    this.getGameLayer().onLeaveDuringGame(a);
    if (!a.isFinishedGame) {
      var b = BkGlobal.currentGameID;
      if (
        b == GID.TLMN ||
        b == GID.TLMN_DEM_LA ||
        b == GID.XAM ||
        b == GID.PHOM
      )
        this.gameStatus = GAME_STATE_FINISH;
      this.isMyServerPos(a.serverPosition) && this.ProcessOutGame();
    }
  },
  processSetupTable: function (a) {
    var b = !1;
    a.Type == c.NETWORK_BET_MONEY_UPDATE
      ? ((a = a.Buffer.readInt()),
        logMessage("NETWORK_BET_MONEY_UPDATE " + a),
        (a >=
          BkGlobal.UserInfo.playerMoney *
            getTableMoneyWarning(BkGlobal.currentGameID) ||
          this.tableBetMoney <= 0.1 * a) &&
          !this.isMeBossTable() &&
          (b = !0),
        (this.tableBetMoney = a),
        (a =
          "Ti\u1ec1n b\u00e0n \u0111\u00e3 \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp th\u00e0nh " +
          convertStringToMoneyFormat(this.tableBetMoney) +
          " " +
          BkConstString.getGameCoinStr()),
        b
          ? BkDialogWindowManager.showPopupWith(
              a,
              "Th\u00f4ng b\u00e1o",
              null,
              null,
              null,
              TYPE_MESSAGE_BOX,
              null
            )
          : BkGlobal.currentGameID == GID.CO_TUONG ||
            BkGlobal.currentGameID == GID.CO_UP
          ? showToastMessage(a, cc.winSize.width / 2, TOAST_MSG_YPOS, 3, 340)
          : showToastMessage(a, 150, cc.winSize.height - 75, 3, 180),
        this.getGameLayer().onUpdateTableMoneyStatus(),
        this.isMeBossTable() ||
          this.getGameLayer().showCountDownForMe(TIME_AUTO_READY - 1))
      : (logMessage("setup table fail"),
        (b = a.Buffer.readByte()),
        (a = a.Buffer.readInt()),
        logMessage("requiredMoney: " + a + " setupTableResult: " + b),
        this.setupTableResultFailed(b, a));
  },
  setupTableResultFailed: function (a, b) {
    logMessage("setupTableResult:" + a);
    2 == a &&
      showToastMessage(
        "B\u1ea1n ch\u1ec9 c\u00f3 th\u1ec3 \u0111\u1eb7t t\u1ed1i \u0111a l\u00e0: " +
          b +
          "$",
        WINDOW_WIDTH / 2,
        WINDOW_HEIGHT / 2 + 100,
        5
      );
    0 == a &&
      showToastMessage(
        "Kh\u00f4ng th\u1ec3 \u0111\u1eb7t ti\u1ec1n cho b\u00e0n, s\u1ed1 ti\u1ec1n nh\u1ecf nh\u1ea5t c\u00f3 th\u1ec3 \u0111\u1eb7t: " +
          b +
          "$",
        WINDOW_WIDTH / 2,
        WINDOW_HEIGHT / 2 + 100,
        5
      );
    1 == a &&
      showToastMessage(
        "Kh\u00f4ng th\u1ec3 \u0111\u1eb7t ti\u1ec1n cho b\u00e0n, s\u1ed1 ti\u1ec1n t\u1ed1i \u0111a c\u00f3 th\u1ec3 \u0111\u1eb7t: " +
          b +
          "$",
        WINDOW_WIDTH / 2,
        WINDOW_HEIGHT / 2 + 100,
        5
      );
  },
  processKickPushReturn: function (a) {
    if (a.Type == c.NETWORK_UNABLE_TO_KICK)
      showToastMessage(
        BkConstString.STR_UNABLE_KICK,
        WINDOW_WIDTH / 2,
        WINDOW_HEIGHT / 2 + 70,
        5,
        300
      );
    else if (a.Type == c.NETWORK_PROTECTED_FROM_UNKICKABLE_WAND)
      showToastMessage(
        BkConstString.STR_PROTECTED_FROM_UNKICKABLE_WAND,
        WINDOW_WIDTH / 2,
        WINDOW_HEIGHT / 2 - 70,
        5,
        300
      );
    else if (a.Type == c.NETWORK_KICK_PLAYER_PUSH)
      this.setLeaveGameReason(OWNER_KICK),
        a.Buffer.isReadable() && this.setLeaveGameReason(a.Buffer.readByte()),
        a.Buffer.isReadable() && this.setLeaveGameReason(a.Buffer.readByte()),
        this.ProcessOutGame();
    else if (a.Type == c.NETWORK_TIME_OUT_LEAVE) {
      var b = "";
      a.Buffer.isReadable() && (b = a.Buffer.readByte());
      logMessage("NETWORK_TIME_OUT_LEAVE: reason: " + b);
      this.ProcessOutGame();
    }
    this.isQueueEvent(a.Type) && this.processNextEventInQueue();
  },
  processErrorReturn: function (a) {
    showToastMessage(
      "processErrorReturn not implement" + a.Type,
      WINDOW_WIDTH / 2,
      WINDOW_HEIGHT / 2
    );
  },
  processPrepareNewGame: function () {
    this.lastEventIndex = 0;
    this.lastTableBetMoney = this.getTableBetMoney();
    this.getlastTimeClick() < MIN_TIME_INTERACTION
      ? (this.isContinueGame = !0)
      : (this.isContinueGame = !1);
    this.gameStatus = GAME_STATE_READY;
    this.getGameLayer().onPrepareNewGame();
    this.isQueueEvent(c.NETWORK_PREPARE_NEW_GAME) &&
      this.processNextEventInQueue();
  },
  processFinishGame: function () {
    this.gameStatus = GAME_STATE_FINISH;
    playAlertSound();
    this.getGameLayer().OnFinishedGame();
  },
  processDealCardReturn: function (a) {
    this.gameStatus = GAME_STATE_PLAYING;
    this.currentPlayerRank = this.numberOfPlayingPlayer = 0;
    this.getGameLayer().onDealCard();
  },
  updateLastEventIndex: function (a) {
    logMessage(
      "INGAME_GAME isSynchEvent -\x3e currentIndex: " +
        this.lastEventIndex +
        " packetIndex: " +
        a.Index
    );
    if (this.lastEventIndex + 1 === a.Index)
      return logMessage("nhan goi tin dung index"), this.lastEventIndex++, 1;
    if (this.lastEventIndex >= a.Index)
      return logMessage("nhan goi tin cu"), -1;
    if (this.lastEventIndex + 1 < a.Index)
      return (
        logMessage(
          "nhan thieu goi tin -\x3e syncEvent tu event: " + this.lastEventIndex
        ),
        this.onReconnectSuccess(),
        -1
      );
  },
  onReconnectSuccess: function () {
    logMessage("onReconnectSuccess ingame logic");
    var a = new BkPacket();
    a.CreatePacketWithTypeAndByteData(c.NETWORK_SYNC, this.lastEventIndex);
    BkConnectionManager.send(a);
  },
  processBetOptionsReturn: function (a) {
    a.Buffer.readByte();
    for (var b = [], d = 0; a.Buffer.isReadable(); )
      (b[d] = a.Buffer.readInt()), d++;
    0 < b.length && (LIST_SETTING_BET_MONEY_BD = b);
  },
  getLeaveGameReason: function () {
    return BkGlobal.leavingGameReason;
  },
  setLeaveGameReason: function (a) {
    BkGlobal.leavingGameReason = a;
  },
  processTableChatReturn: function (a) {
    var b = a.Buffer.readByte();
    a = a.Buffer.ReadString();
    a = Util.refactorChatMessage(a);
    null != this.getPlayer(b) && this.getGui().updateChatBox(a, b);
  },
  networkOutTable: function (a) {
    Util.showAnim();
    var b = new BkPacket();
    b.CreateLeaveTableAction(a);
    BkConnectionManager.send(b);
  },
  processNetworkEvent: function (a) {
    switch (a.Type) {
      case c.ANY:
        break;
      case c.NETWORK_TABLE_INFO_RETURN:
        this.ProcessGameTableInfo(a);
        break;
      case c.NETWORK_TABLE_SYN_RETURN:
        this.processGameTableSyn(a);
        break;
      case c.NETWORK_BET_MONEY_OPTIONS:
        this.processBetOptionsReturn(a);
        break;
      case c.NETWORK_BET_MONEY_UPDATE:
      case c.NETWORK_SETUP_TABLE_FAILED:
        this.processSetupTable(a);
        break;
      case c.NETWORK_DEAL_CARD_RETURN:
        this.processDealCardReturn(a);
        break;
      case c.NETWORK_TABLE_LEAVE_SUCCESS:
        this.processTableLeaveSuccess(a);
        break;
      case c.NETWORK_TABLE_LEAVE_FAILURE:
        this.processTableLeaveFailure();
        break;
      case c.NETWORK_TABLE_JOIN_PUSH:
        this.processTableJoinPush(a);
        break;
      case c.NETWORK_TABLE_LEAVE_PUSH:
        this.processTableLeavePush(a);
        break;
      case c.NETWORK_PLAYER_STATUS_RETURN:
        this.processPlayerStatusUpdate(a);
        break;
      case c.NETWORK_GET_FRIENDS_TO_INVITE_RETURN:
        this.processGetFriendsInviteReturn(a);
        break;
      case c.NETWORK_WAITING_PLAYERS_RETURN:
        this.processGetWaitingListReturn(a);
        break;
      case c.NETWORK_TIME_OUT_LEAVE:
      case c.NETWORK_UNABLE_TO_KICK:
      case c.NETWORK_PROTECTED_FROM_UNKICKABLE_WAND:
      case c.NETWORK_KICK_PLAYER_PUSH:
        this.processKickPushReturn(a);
        break;
      case c.NETWORK_ERROR_RETURN:
        this.processErrorReturn(a);
        break;
      case c.NETWORK_GET_GOLD_BOX_REWARD_RETURN:
      case c.NETWORK_GET_GOLD_BOX_REMAIN_TIME_RETURN:
        this.processGoldBoxEvent(a);
        break;
      case c.NETWORK_PLAYER_MONEY_CHANGE_PUSH:
        this.processPlayerMoneyChangePush(a);
        break;
      case c.NETWORK_PLAYER_HAS_BONUS:
        this.processWhenPlayerHasBonus(a);
        break;
      case c.NETWORK_PLAYER_NEW_LEVEL:
        logMessage("NETWORK_PLAYER_NEW_LEVEL");
        this.processWhenPlayerNewLevel(a);
        break;
      case c.NETWORK_TABLE_CHAT_RETURN:
        this.processTableChatReturn(a);
        break;
      case c.NETWORK_ASSIGN_AS_TABLE_OWNER:
        this.processAssignAsTableOwner(a);
        break;
      case c.NETWORK_RECONNECT_SUCCESS:
        break;
      case c.NETWORK_PREPARE_NEW_GAME:
        logMessage("NETWORK_PREPARE_NEW_GAME");
        this.processPrepareNewGame();
        break;
      case c.NETWORK_FINISH_GAME_RETURN:
        this.processFinishGame();
        break;
      case c.NETWORK_LEAVE_DURING_GAME:
        this.processLeaveDurringGame(a);
        break;
      default:
        this._super(a);
    }
  },
});
BkClientState = cc.Class.extend({
  UserInfo: null,
  serverPosition: null,
  status: null,
  rank: -1,
  onhandCardList: null,
  isLeftTurn: !1,
  cardsCount: 0,
  isPlaying: !1,
  isFinishedGame: !1,
  totalChangedMoney: 0,
  betMoney: 0,
  totalBetMoney: 0,
  isBaoSam: !1,
  isFlip: !1,
  isLeaveRegistered: !1,
  ruleCardSuite: null,
  ctor: function () {
    this.onhandCardList = [];
  },
  removeAllCurentCard: function () {
    this.removeOnhandCard();
  },
  addRuleCardSuite: function (a) {
    null == this.ruleCardSuite && (this.ruleCardSuite = new BkXiToCardSuite());
    this.ruleCardSuite.addCard(a);
  },
  getRuleCardSuite: function () {
    return this.ruleCardSuite;
  },
  setClientInfo: function (a) {
    this.UserInfo = new BkUserData();
    logMessage("setClientInfo of player: " + a.name);
    this.UserInfo.setUserName(a.name);
    this.serverPosition = a.position;
    this.status = a.status;
    this.UserInfo.setMoney(a.money);
    this.UserInfo.setAvatarId(a.avatarId);
    this.UserInfo.setLevel(a.level);
    this.UserInfo.setIsFriend(a.isMyFriend);
  },
  setTotalBetMoney: function (a) {
    this.totalBetMoney = a;
  },
  setBetMoney: function (a) {
    this.betMoney = a;
  },
  getUserInfo: function () {
    return this.UserInfo;
  },
  isColdLose: function () {
    return this.coldLose;
  },
  increaseCash: function (a) {
    var b = this.UserInfo.getMoney();
    this.UserInfo.setMoney(b + a);
    this.UserInfo.getUserName() == BkGlobal.UserInfo.getUserName() &&
      BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + a);
  },
  getCurrentMoney: function () {
    return null == this.UserInfo ? 0 : this.UserInfo.getMoney();
  },
  getName: function () {
    return this.UserInfo.userName;
  },
  leaveTurn: function (a) {
    this.isLeftTurn = a;
  },
  isLeaveTurn: function () {
    return this.isLeftTurn;
  },
  setRank: function (a) {
    this.rank = a;
  },
  setName: function (a) {
    this.UserInfo.setUserName(a);
  },
  getRank: function () {
    return this.rank;
  },
  setColdLose: function (a) {
    this.coldLose = a;
  },
  updateOnhandCard: function (a, b) {
    if (null == this.onhandCardList || this.onhandCardList.length < b + 1)
      return null;
    var d = this.onhandCardList[b];
    d.reloadByID(a);
    d.showBackMask(!1);
    return d;
  },
  addOnhandCard: function (a) {
    null == this.onhandCardList && (this.onhandCardList = []);
    this.onhandCardList.push(a);
  },
  setOnhandCard: function (a) {
    this.onhandCardList = a;
  },
  getOnHandCard: function () {
    return this.onhandCardList;
  },
  getCardsCount: function () {
    return this.cardsCount;
  },
  getCurrentCash: function () {
    return null != this.UserInfo ? this.UserInfo.getMoney() : 0;
  },
  removeOnhandCard: function () {
    if (null != this.onhandCardList)
      for (var a; 0 < this.onhandCardList.length; )
        (a = this.onhandCardList[0]),
          this.onhandCardList.splice(0, 1),
          a.removeFromParent();
  },
  resetPlayerData: function () {
    this.removeOnhandCard();
    this.cardsCount = 0;
    this.isFinishedGame = this.isPlaying = !1;
    this.rank = -1;
    this.isLeftTurn = this.coldLose = !1;
    this.totalChangedMoney = 0;
  },
  setCardsCount: function (a) {
    this.cardsCount = a;
  },
});
BkChessPlayerClientState = BkClientState.extend({
  remainTimeText: null,
  chessColor: -1,
  king: null,
  tablePosition: -1,
  isObserver: null,
  stopTotalCountDown: !1,
  avatarPlayer: null,
  ctor: function () {
    this._super();
  },
  setAvatar: function (a) {
    this.avatarPlayer = a;
  },
  setRemainTime: function (a) {
    null != this.avatarPlayer && this.avatarPlayer.setRemainTime(a);
  },
  setClientInfo: function (a) {
    this._super(a);
    this.isObserver = a.isObserver;
  },
  showTotalCountDownTime: function () {
    null != this.avatarPlayer && this.avatarPlayer.showTotalCountDownTime();
  },
  stopTotalCountDownTime: function () {
    null != this.avatarPlayer && this.avatarPlayer.stopTotalCountDownTime();
  },
  removeRemainTimeText: function () {
    null != this.avatarPlayer && this.avatarPlayer.removeRemainTimeText();
  },
  releaseChessClientState: function () {
    this.removeRemainTimeText();
    this.removeKingSprite();
  },
  setVisibleRemainTimeText: function (a) {
    null != this.avatarPlayer && this.avatarPlayer.setVisibleRemainTimeText(a);
  },
  initRemainTimeText: function (a, b) {
    this.avatarPlayer = a;
    this.avatarPlayer.initRemainTimeText(b);
  },
  removeKingSprite: function () {},
  setVisibleKing: function (a) {},
  initKingSprite: function (a, b) {},
});
BkLogicManager = {
  logic: null,
  gameLogic: null,
  crGID: -1,
  initLogic: function () {
    null == this.logic && (this.logic = new BkCommonLogic());
  },
  setGameLogic: function (a) {
    this.gameLogic = a;
  },
  getLogic: function () {
    null == this.logic && this.initLogic();
    return this.logic;
  },
  getInGameLogic: function () {
    (-1 !== this.crGID && null != this.gameLogic) || this.initGameLogic();
    return this.gameLogic;
  },
  isQueueEvent: function (a) {
    var b = !1,
      d = this.getLogic();
    null != d && d.isQueueEvent(a) && (b = !0);
    d = this.getInGameLogic();
    null != d && d.isQueueEvent(a) && (b = !0);
    return b;
  },
  initGameLogic: function () {
    logMessage("initGameLogic with current gameID " + BkGlobal.currentGameID);
    var a = null;
    this.crGID = BkGlobal.currentGameID;
    switch (BkGlobal.currentGameID) {
      case GID.TLMN:
        a = new BkTLMNInGameLogic();
        break;
      case GID.CO_TUONG:
        a = new BkChessInGameLogic();
        break;
      case GID.CO_UP:
        a = new BkCoUpInGameLogic();
        break;
      case GID.PHOM:
        a = new BkPhomIngameLogic();
        break;
      case GID.BA_CAY:
        a = new BkBaCayInGameLogic();
        break;
      case GID.XAM:
        a = new BkSAMIngameLogic();
        break;
      case GID.TLMN_DEM_LA:
        a = new BkTLMNDemLaInGameLogic();
        break;
      case GID.XITO:
        a = new BkXiToInGameLogic();
        break;
      case GID.POKER:
        a = new BkPokerInGameLogic();
        break;
      case GID.XI_DZACH:
        a = new BkXiDzachInGameLogic();
        break;
      case GID.LIENG:
        a = new BkLiengInGameLogic();
        break;
      case GID.MAU_BINH:
        a = new BkMauBinhInGameLogic();
        break;
      default:
        a = new BkInGameLogic();
    }
    this.setGameLogic(a);
  },
};
BkChessInGameLogic = BkInGameLogic.extend({
  ctor: function () {
    this._super();
    this.maxPlayer = getMaxPlayer(GID.CO_TUONG);
    logMessage("this.maxPlayer: " + this.maxPlayer);
  },
  isQueueEvent: function (a) {
    switch (a) {
      case c.NETWORK_UPDATE_OBSERVER_STATUS:
      case c.NETWORK_DEAL_CARD_RETURN:
      case c.NETWORK_MOVE_PIECE_RETURN:
      case c.NETWORK_INFOR_RETURN:
      case c.NETWORK_FINISH_GAME_RETURN:
      case c.NETWORK_CHESS_OFFER_RETURN:
      case c.NETWORK_CONTINUE_GAME_RETURN:
        return !0;
    }
    return this._super(a);
  },
  clearTableData: function () {
    logMessage("clearTableData - BkChessInGameLogic");
    this.maxAllowedPlayer = this.pass = "";
    this.gameStatus = GAME_STATE_NOT_READY;
    for (this.tableBetMoney = 0; 0 < this.PlayerState.length; )
      this.PlayerState[0].releaseChessClientState(),
        this.PlayerState.splice(0, 1);
  },
  isNeedInvitePlayers: function () {
    if (2 > this.PlayerState.length) return !0;
    for (var a = 0, b = 0, d = this.PlayerState.length; b < d; b++) {
      var e = this.PlayerState[b];
      e && !e.isObserver && a++;
    }
    return 2 > a;
  },
  isAllPlayerReady: function () {
    for (var a = 0, b = this.PlayerState.length; a < b; a++) {
      var d = this.PlayerState[a];
      if (d.status == PLAYER_STATE_NOT_READY && !1 === d.isObserver)
        return showToastMessage("player" + d.getName() + "is not ready"), !1;
    }
    return !0;
  },
  onObserverStatusChange: function (a) {
    this._super(a);
    var b = a.Buffer.readByte();
    a = 1 == a.Buffer.readByte();
    this.getGameLayer().onObserverStatusChange(b, a);
  },
  onDealCard: function (a) {
    var b = a.Buffer.readByte();
    a = a.Buffer.readByte();
    this.getGameLayer().onDealCard(b, a);
  },
  onMove: function (a) {
    var b = a.Buffer.readByte(),
      d = a.Buffer.readByte(),
      e = a.Buffer.readByte(),
      f = a.Buffer.readByte();
    a = a.Buffer.readInt();
    var g = this.getGameLayer();
    if (g && "function" === typeof g.onMove) g.onMove(b, d, e, f, a);
    else this.networkGetTableInfo();
  },
  onInforReturn: function (a) {
    var b = a.Buffer.readByte();
    a = a.Buffer.readByte();
    this.getGameLayer().onInforReturn(b, a);
  },
  onFinishGame: function (a) {
    a = a.Buffer.readByte();
    this.getGameLayer().onFinishGame(a);
  },
  onOfferReturn: function (a) {
    a = a.Buffer.readByte();
    this.getGameLayer().onOfferReturn(a);
  },
  updateObserverStatus: function (a, b) {
    var d = this.getPlayer(a);
    if (null != d) {
      if ((d.isObserver = b))
        d && ((d.tablePosition = -1), (d.status = PLAYER_STATE_NOT_READY));
      else {
        var e = this.findTablePosition();
        d && (d.tablePosition = e);
      }
      this.updateNumberOfReadyPlayer();
    }
  },
  findTablePosition: function () {
    var a = [],
      b;
    for (b = 0; b < this.maxPlayer; b++)
      null != this.PlayerState[b] &&
        0 <= this.PlayerState[b].tablePosition &&
        2 > this.PlayerState[b].tablePosition &&
        (a[this.PlayerState[b].tablePosition] = !0);
    for (b = 0; 2 > b; b++) if (!a[b]) return b;
    return -1;
  },
  updateNumberOfReadyPlayer: function () {
    for (var a = 0, b = 0; b < this.maxPlayer; b++) {
      var d = this.getPlayerByIndex(b);
      d && d.status != PLAYER_STATE_NOT_READY && a++;
    }
    this.numberOfPlayingPlayer = a;
  },
  getPlayerByIndex: function (a) {
    return this.PlayerState[a];
  },
  processLeaveTableRequest: function () {
    var a = this.getMyClientState(),
      b = this;
    a && !a.isObserver && this.gameStatus == GAME_STATE_PLAYING
      ? showPopupConfirmWith(
          "B\u1ea1n s\u1ebd thua v\u00e1n n\u00e0y.\nB\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n tho\u00e1t?",
          "Tho\u00e1t khi \u0111ang ch\u01a1i",
          function () {
            b.networkOutTable(1);
          }
        )
      : this.networkOutTable(0);
  },
  processChessOfferDraw: function (a) {
    var b = new BkPacket();
    b.CreateChessOfferPacket(a);
    BkConnectionManager.send(b);
  },
  processBetMaxMoney: function (a, b) {
    var d = new BkPacket();
    d.CreateSetupCoTablePacket(a, b);
    BkConnectionManager.send(d);
  },
  processUpdateObserverStatus: function (a) {
    var b = new BkPacket();
    b.CreateUpdateObserverStatusPacket(a);
    BkConnectionManager.send(b);
  },
  processContinueGame: function () {
    var a = new BkPacket();
    a.CreateContinueGamePacket();
    BkConnectionManager.send(a);
  },
  processMovePiece: function (a, b, d, e) {
    var f = new BkPacket();
    f.CreateMovePiecePacket(a, b, d, e);
    BkConnectionManager.send(f);
  },
  processNetworkEvent: function (a) {
    switch (a.Type) {
      case c.ANY:
        break;
      case c.NETWORK_UPDATE_OBSERVER_STATUS:
        this.onObserverStatusChange(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_DEAL_CARD_RETURN:
        this.onDealCard(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_MOVE_PIECE_RETURN:
        this.onMove(a);
        break;
      case c.NETWORK_INFOR_RETURN:
        this.onInforReturn(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_FINISH_GAME_RETURN:
        this.onFinishGame(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_CHESS_OFFER_RETURN:
        this.onOfferReturn(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_CONTINUE_GAME_RETURN:
        this.getGameLayer().onContinueGame();
        this.processNextEventInQueue();
        break;
      default:
        this._super(a);
    }
  },
});
BkCoUpInGameLogic = BkChessInGameLogic.extend({
  ctor: function () {
    this._super();
  },
  isQueueEvent: function (a) {
    switch (a) {
      case c.NETWORK_REAL_TYPE_RETURN:
      case c.NETWORK_SETUP_RULE_RETURN:
        return !0;
    }
    return this._super(a);
  },
  onRealTypeReturn: function (a) {
    var b = a.Buffer.readByte();
    a = a.Buffer.readByte();
    this.getGameLayer().onRealTypeReturn(b, a);
  },
  onChessRuleReturn: function (a) {
    a.Buffer.readByte();
  },
  processNetworkEvent: function (a) {
    switch (a.Type) {
      case c.ANY:
        break;
      case c.NETWORK_REAL_TYPE_RETURN:
        this.onRealTypeReturn(a);
        this.processNextEventInQueue();
        break;
      case c.NETWORK_SETUP_RULE_RETURN:
        this.onChessRuleReturn(a);
        this.processNextEventInQueue();
        break;
      default:
        this._super(a);
    }
  },
});
BkLabelTTF = cc.LabelTTF.extend({
  ctor: function (a, b, d, e, f, g, h, k) {
    b = Util.getGameFontName(void 0 === h ? !1 : h, void 0 === k ? !1 : k);
    this._super(a, b, d, e, f, g);
    this.setFontSize(d);
    isWebPlatform() && this.setScale(0.5);
  },
  setFontSize: function (a) {
    isWebPlatform() ? this._super(2 * a) : this._super(a);
  },
  getContentSize: function () {
    var a = this._super();
    return isWebPlatform() ? cc.size(a.width / 2, a.height / 2) : a;
  },
  _getWidth: function () {
    return this.getContentSize().width;
  },
  _getHeight: function () {
    return this.getContentSize().height;
  },
  setScaleM: function (a, b) {
    void 0 === b && (b = a);
    isWebPlatform() || this.setScale(a, b);
  },
});
BTN_YELLOW_TEXT_SHADOW_POS = cc.p(1, -3);
BkButton = ccui.Button.extend({
  _hoverTextureLoaded: null,
  _hoverLoader: null,
  _buttonHoverSpriteFrame: null,
  _hoverFileName: null,
  _hoverTextureAdaptDirty: !0,
  _isSelectted: null,
  lastTimeClick: 0,
  _hoverTexType: ccui.Widget.LOCAL_TEXTURE,
  _hoverCb: null,
  _outCb: null,
  _titleButtonBMF: null,
  _isNewTitle: !1,
  ctor: function (a, b, d, e, f, g) {
    this._super();
    this._isNewTitle = !1;
    void 0 != g && (this._isNewTitle = g);
    this._isNewTitle ||
      (this.setTitleFontName(res_name.GAME_FONT_BOLD),
      this.setTitleFontSize(16),
      this.setName("BkButton"),
      this.setTitleColor(cc.color(240, 240, 255)));
    isWebPlatform() && (this._hoverLoader = new cc.Sprite.LoadManager());
    g = ccui.Widget.LOCAL_TEXTURE;
    f && (g = f);
    a && this.loadTextures(a, b, d, e, g);
    isWebPlatform() && e && this._initMouseHover();
    this._isNewTitle && this._initTitleBMF();
  },
  setBlinking: function (a, b, d) {
    a
      ? null == this.blinkingImage &&
        ((this.blinkingImage = new BkSprite("#" + b)),
        (this.blinkingImage.x = this.blinkingImage.width / 2),
        (this.blinkingImage.y = this.blinkingImage.height / 2),
        void 0 != d
          ? this.addChild(this.blinkingImage, d)
          : this.addChild(this.blinkingImage, -1),
        (a = cc.fadeOut(1)),
        (b = a.reverse()),
        (d = cc.delayTime(0.25)),
        (a = cc.sequence(a, d, b).repeatForever()),
        this.blinkingImage.runAction(a))
      : null != this.blinkingImage &&
        (this.blinkingImage.stopAllActions(),
        this.blinkingImage.removeFromParent(),
        (this.blinkingImage = null));
  },
  setOpacity: function (a) {
    this._super(a);
    this._isNewTitle &&
      null != this._titleButtonBMF &&
      this._titleButtonBMF.setOpacity(a);
  },
  _initTitleBMF: function () {
    this._titleButtonBMF = new cc.LabelBMFont("", res.BITMAP_GAME_FONT);
    this._titleButtonBMF.x = this._getNormalSize().width / 2 + 0.5;
    this._titleButtonBMF.y = this._getNormalSize().height / 2 + 0.5;
    this.addChild(this._titleButtonBMF, 100);
  },
  setTitleText: function (a) {
    this._isNewTitle ? this._titleButtonBMF.setString(a, !0) : this._super(a);
  },
  setTitleFontSize: function (a) {
    this._isNewTitle
      ? 18 != a && this._titleButtonBMF.setScale(a / 18)
      : isWebPlatform()
      ? (this._super(2 * a), this.getTitleRenderer().setScale(0.5))
      : this._super(a);
  },
  _initMouseHover: function () {
    var a = this;
    this._eventHover = this.createHoverEvent(
      function (b) {
        null != a._hoverCb && a._hoverCb();
      },
      function (b) {
        null != a._outCb && a._outCb();
      },
      function (a) {}
    );
    cc.eventManager.addListener(this._eventHover, this);
  },
  setHoverCallback: function (a, b) {
    isWebPlatform() && ((this._hoverCb = a), (this._outCb = b));
  },
  loadTextures: function (a, b, d, e, f) {
    this._super(a, b, d, f);
    isWebPlatform() &&
      void 0 != e &&
      cc.isString(e) &&
      this.loadTextureHover(e, f);
  },
  _initRenderer: function () {
    this._super();
  },
  _adaptRenderers: function () {
    this._super();
    isWebPlatform() &&
      this._hoverTextureAdaptDirty &&
      (this._hoverTextureScaleChangedWithSize(),
      (this._hoverTextureAdaptDirty = !1));
  },
  _onSizeChanged: function () {
    this._super();
    isWebPlatform() && (this._hoverTextureAdaptDirty = !0);
  },
  _hoverTextureScaleChangedWithSize: function () {
    this._buttonScale9Renderer.setContentSize(this._contentSize);
    this._buttonScale9Renderer.setPosition(
      this._contentSize.width / 2,
      this._contentSize.height / 2
    );
  },
  loadTextureHover: function (a, b) {
    if (isWebPlatform() && a) {
      b = b || ccui.Widget.LOCAL_TEXTURE;
      this._hoverFileName = a;
      this._hoverTexType = b;
      var d;
      switch (this._hoverTexType) {
        case ccui.Widget.LOCAL_TEXTURE:
          d = this._createSpriteFrameWithFile(a);
          break;
        case ccui.Widget.PLIST_TEXTURE:
          "#" === a[0] && (a = a.substr(1, a.length - 1)),
            (d = this._createSpriteFrameWithName(a));
      }
      d &&
        (d._textureLoaded
          ? ((this._buttonHoverSpriteFrame = d),
            this._updateChildrenDisplayedRGBA(),
            (this._hoverTextureLoaded = !0),
            this._findLayout(),
            (this._hoverCb = function () {
              this._buttonScale9Renderer.setState(
                ccui.Scale9Sprite.state.NORMAL
              );
              this._hoverTextureLoaded &&
                this._buttonScale9Renderer.setSpriteFrame(
                  this._buttonHoverSpriteFrame
                );
            }),
            (this._outCb = function () {
              this._buttonScale9Renderer.setSpriteFrame(
                this._buttonNormalSpriteFrame
              );
              this._buttonScale9Renderer.setState(
                ccui.Scale9Sprite.state.NORMAL
              );
            }))
          : (this._hoverLoader.clear(),
            this._hoverLoader.once(
              d,
              function () {
                this.loadTextureDisabled(
                  this._hoverFileName,
                  this._hoverTexType
                );
              },
              this
            )));
    }
  },
  setMouseOnHover: function (a, b) {
    isWebPlatform() &&
      ((this.OnMouseMoveListener = this.createHoverEvent(a, b)),
      cc.eventManager.addListener(this.OnMouseMoveListener, this));
  },
  setEnableButton: function (a) {
    this.setBright(a);
    this.setTouchEnabled(a);
    this.setEnableEventButton(a);
  },
  setEnableEventButton: function (a) {
    isWebPlatform() &&
      (a
        ? this._eventHover.setEnabled(!0)
        : ((cc._canvas.style.cursor = "default"),
          this._eventHover.setEnabled(!1)));
  },
  setVisibleButton: function (a) {
    this.setEnableButton(a);
    this.visible = a;
  },
  setIsSelected: function (a) {
    this._isSelectted = a;
    null != this.getTitleText() &&
      (this._isSelectted
        ? this.setTitleColor(cc.color(255, 255, 255))
        : this.setTitleColor(cc.color(251, 234, 180)));
  },
  setScaleM: function (a, b) {
    void 0 === b && (b = a);
    isWebPlatform() || this.setScale(b, b);
  },
});
BkButton.create = function (a, b, d, e) {
  return new BkButton(a, b, d, e);
};
BkButtonWithHint = BkButton.extend({
  arrowGuide: null,
  isUp: !1,
  ctor: function (a, b, d, e, f) {
    this._super(a, b, d, e, f);
  },
  initArrowGuide: function () {
    null == this.arrowGuide &&
      (this.arrowGuide = new BkSprite("#" + res_name.arrow));
    this.arrowGuide.x = this.width / 2;
    this.arrowGuide.y = 50;
    this.arrowGuide.scaleX = 0.5;
    this.arrowGuide.scaleY = 0.6;
    this.arrowGuide.visible = !1;
    this.addChild(this.arrowGuide);
    this.isUp = !1;
  },
  _initMouseHover: function () {
    var a = this;
    this._eventHover = this.createHoverEvent(
      function (b) {
        a._buttonHoverRenderer.setVisible(!0);
        a._buttonNormalRenderer.setVisible(!1);
        null != a._hoverCb && a._hoverCb();
      },
      function (b) {
        a._buttonHoverRenderer.setVisible(!1);
        a._buttonNormalRenderer.setVisible(!0);
        null != a._outCb && a._outCb();
      },
      function (b) {
        a._buttonHoverRenderer.setVisible(!1);
      }
    );
    cc.eventManager.addListener(this._eventHover, this._buttonNormalRenderer);
  },
  showArrowGuide: function (a) {
    a
      ? (null == this.arrowGuide && this.initArrowGuide(),
        (this.arrowGuide.visible = a),
        this.animateArrowGuide(this.arrowGuide.x, this.arrowGuide.y, 0.25))
      : this.stopArrowGuide();
  },
  stopArrowGuide: function () {
    null != this.arrowGuide &&
      (this.arrowGuide.removeFromParent(), (this.arrowGuide = null));
  },
  animateArrowGuide: function (a, b, d) {
    var e = cc.callFunc(function () {
        b = (this.isUp = !this.isUp) ? b - 15 : b + 15;
        this.animateArrowGuide(a, b, d);
      }, this),
      f = cc.moveTo(d, a, b),
      e = cc.sequence(f, e);
    this.arrowGuide.runAction(e);
  },
});
P_ITEM_PADDING_X = 8;
P_BTN_HEIGHT = 38;
P_BTN_TEXT_COLOR = cc.color(255, 239, 131);
P_BTN_TEXT_COLOR_HOVER = cc.color(252, 246, 95);
BkBtnPayment = BkSprite.extend({
  btnSize: null,
  bonusPercent: null,
  gameState: null,
  ctor: function (a, b) {
    var d = Util.getAddBonusPercent(b),
      e = cc.rect(106, P_BTN_HEIGHT, 106, P_BTN_HEIGHT);
    a == GS.CHOOSE_GAME
      ? d > BT.ZERO_PERCENT &&
        (e = cc.rect(146, P_BTN_HEIGHT, 146, P_BTN_HEIGHT))
      : (e =
          d > BT.ZERO_PERCENT
            ? cc.rect(76, P_BTN_HEIGHT, 76, P_BTN_HEIGHT)
            : cc.rect(42, P_BTN_HEIGHT, 42, P_BTN_HEIGHT));
    this._super();
    this.setContentSize(cc.size(e.width, e.height));
    this.btnSize = e;
    this.bonusPercent = d;
    this.gameState = a;
    this.initBtn();
  },
  initBtn: function () {
    var a;
    a = Util.isNeedToChangeIcon()
      ? new cc.Scale9Sprite(res_name.bg_addMoney_chess)
      : new cc.Scale9Sprite(res_name.bg_addMoney);
    a.visible = !1;
    a.width = this.btnSize.width;
    a.height = this.btnSize.height;
    a.visible = !0;
    a.x = this.width / 2;
    a.y = this.height / 2;
    this.addChild(a, -1);
    var b = new BkSprite("#" + res_name.icon_addMoney);
    b.x = b.width / 2 + 12;
    b.y = a.height / 2 + 0.5;
    this.addChild(b);
    var d = new BkLabel(this.bonusPercent + "%", "", 15, !0);
    d.setTextColor(cc.color(250, 24, 2));
    d.enableOutline(cc.color.WHITE, 3);
    if (this.gameState == GS.CHOOSE_GAME) {
      var e = new BkLabel("N\u1ea1p ti\u1ec1n", "", 16);
      e.x = b.x + b.width / 2 + e.getContentSize().width / 2 + P_ITEM_PADDING_X;
      e.y = b.y;
      e.setColor(P_BTN_TEXT_COLOR);
      this.addChild(e);
      d.x =
        e.x + e.getContentSize().width / 2 + d.getContentSize().width / 2 + 5;
      d.y = e.y;
    } else
      (d.x = b.x + b.width / 2 + d.getContentSize().width / 2 + 5), (d.y = b.y);
    this.bonusPercent > BT.ZERO_PERCENT
      ? (e && e.setFontSize(15),
        this.addChild(d),
        BkGlobal.currentGS == GS.CHOOSE_GAME &&
          this.setBlinking(!0, res_name.blinkingPayment))
      : this.setBlinking(!1);
    var f,
      g = this;
    this.setMouseOnHover(
      function () {
        f = Util.isNeedToChangeIcon()
          ? cc.spriteFrameCache.getSpriteFrame(res_name.bg_addMoney_hover_chess)
          : cc.spriteFrameCache.getSpriteFrame(res_name.bg_addMoney_hover);
        a.initWithSpriteFrame(f);
        a.width = g.btnSize.width;
        a.height = g.btnSize.height;
        e && e.setColor(P_BTN_TEXT_COLOR_HOVER);
        b.initWithSpriteFrameName(res_name.icon_addMoney_hover);
      },
      function () {
        f = Util.isNeedToChangeIcon()
          ? cc.spriteFrameCache.getSpriteFrame(res_name.bg_addMoney_chess)
          : cc.spriteFrameCache.getSpriteFrame(res_name.bg_addMoney);
        a.initWithSpriteFrame(f);
        a.width = g.btnSize.width;
        a.height = g.btnSize.height;
        e && e.setColor(P_BTN_TEXT_COLOR);
        b.initWithSpriteFrameName(res_name.icon_addMoney);
      }
    );
  },
  setBlinking: function (a, b) {
    if (a) {
      if (null == this.blinkingImage) {
        this.blinkingImage = new BkSprite("#" + b);
        this.blinkingImage.x = this.blinkingImage.width / 2;
        this.blinkingImage.y = this.blinkingImage.height / 2 + 0.5;
        this.addChild(this.blinkingImage, -1);
        var d = cc.fadeOut(1),
          e = d.reverse(),
          f = cc.delayTime(0.25),
          d = cc.sequence(d, f, e).repeatForever();
        this.blinkingImage.runAction(d);
      }
    } else
      null != this.blinkingImage &&
        (this.blinkingImage.stopAllActions(),
        this.blinkingImage.removeFromParent(),
        (this.blinkingImage = null));
  },
});
var BkBaseScene = cc.Scene.extend({
  _className: "BkBaseScene",
  ctor: function () {
    this._super();
    this.init();
  },
});
WD_ZORDER_WINDOW = -3;
WD_ZORDER_TOP = 2;
WD_ZORDER_BODY = -2;
WD_BODY_MARGIN_TB = WD_BODY_MARGIN_LR = 22;
BkStackWindow = {
  listWD: null,
  initStack: function () {
    null == this.listWD && (this.listWD = new BkStack());
  },
  pushWindow: function (a) {
    this.initStack();
    this.listWD.pushItem(a);
    logMessage("pushWindow length " + this.getLength());
  },
  getTopWindow: function () {
    this.initStack();
    logMessage("getTopWindow length " + this.getLength());
    return this.listWD.getTopIem();
  },
  pop: function () {
    this.initStack();
    logMessage("pop length " + this.getLength());
    return this.listWD.pop();
  },
  isEmpty: function () {
    this.initStack();
    return 0 == this.listWD.getLength();
  },
  getLength: function () {
    this.initStack();
    return this.listWD.getLength();
  },
  clearStack: function () {
    this.listWD = null;
  },
};
BkWindow = BkBaseLayer.extend({
  _windowTitle: null,
  _windowSize: null,
  _wdBodyInnerSize: null,
  _bodyLayer: null,
  _bgWindowLayer: null,
  _maskTop: null,
  _top: null,
  _btnClose: null,
  _bgBody: null,
  _bgBottom: null,
  _parentNode: null,
  _moveWindowListener: null,
  _closedWindowListener: null,
  _isMovingWindow: null,
  _isVisibleOutBG: !1,
  _callbackCloseButtonClick: null,
  _callbackRemoveWindow: null,
  listEditBox: [],
  ctor: function (a, b, d, e) {
    var f = cc.director.getWinSize();
    b.width > 0.9 * f.width && (b.width = 0.9 * f.width);
    b.height > 0.9 * f.height && (b.height = 0.9 * f.height);
    this._windowSize = cc.size(b.width, b.height);
    this.setParentWindow(d);
    this._super();
    logMessage("Call WD : " + a);
    this.init(a, e);
    this.listEditBox = [];
  },
  init: function (a, b) {
    void 0 == b && (b = !1);
    this._isMovingWindow = !1;
    this.setName("BkWindow");
    this._bodyLayer = new cc.Layer();
    var d = cc.rect(250, 12, 250, 6);
    this._top = b
      ? new cc.Scale9Sprite(res_name.Header_Window, d)
      : new cc.Scale9Sprite(res_name.Header_Nosub_Window, d);
    this._top.width = this._windowSize.width;
    this._top.x = this._windowSize.width / 2;
    this._top.y = this._windowSize.height - this._top.height / 2;
    this._bodyLayer.addChild(this._top, WD_ZORDER_TOP);
    this._windowTitle = new BkLabel(a, "Arial", 20, !0);
    this._windowTitle.color = cc.color(255, 255, 255);
    this._windowTitle.x = this._windowSize.width / 2;
    this._windowTitle.y = this._top.y;
    this._windowTitle.enableShadow(cc.color(13, 59, 85), cc.p(2, -2));
    this._bodyLayer.addChild(this._windowTitle, WD_ZORDER_TOP);
    this._btnClose = new BkButton(
      res_name.BtnClose_Window,
      res_name.BtnClose_Window,
      res_name.BtnClose_Window,
      res_name.BtnClose_Window_hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this._btnClose.setScale(GAME_SCALE);
    this._btnClose.x =
      this._windowSize.width - (this._btnClose.width / 2) * GAME_SCALE;
    this._btnClose.y = this._top.y;
    this._btnClose.addTouchEventListener(function (a, b) {
      b == ccui.Widget.TOUCH_ENDED &&
        (logMessage("click btnClose"),
        isWebPlatform() && (cc._canvas.style.cursor = "default"),
        this.removeSelf(),
        null != this._callbackCloseButtonClick &&
          this._callbackCloseButtonClick());
    }, this);
    this._bodyLayer.addChild(this._btnClose, WD_ZORDER_TOP);
    this.initBgBody(b);
    this._bgBottom = new cc.Scale9Sprite(res_name.Bottom_Window, d);
    this._bgBottom.width = this._windowSize.width;
    this._bgBottom.x = this._windowSize.width / 2;
    this._bgBottom.y =
      this._bgBody.y -
      this._windowSize.height / 2 +
      0.5 * this._bgBottom.height;
    this._bodyLayer.addChild(this._bgBottom, WD_ZORDER_BODY);
  },
  initBgBody: function (a) {
    a = a
      ? cc.spriteFrameCache.getSpriteFrame(res_name.Body_Window)
      : cc.spriteFrameCache.getSpriteFrame(res_name.Body_Nosub_Window);
    this._bgBody = new cc.Scale9Sprite(a);
    this._bgBody.width = this._windowSize.width;
    this._bgBody.height = this._windowSize.height - this._top.height;
    this._bgBody.x = this._windowSize.width / 2;
    this._bgBody.y = this._top.y - this._windowSize.height / 2 + 0.5;
    this._bodyLayer.addChild(this._bgBody, WD_ZORDER_BODY);
  },
  setCallbackCloseButtonClick: function (a) {
    this._callbackCloseButtonClick = a;
  },
  setCallbackRemoveWindow: function (a) {
    this._callbackRemoveWindow = a;
  },
  getWindowTitle: function () {
    return this._windowTitle;
  },
  setWindowTitle: function (a) {
    this._windowTitle.setString(a);
  },
  getWindowHeaderHeight: function () {
    return this._top.height;
  },
  getWindowSize: function () {
    return this._windowSize;
  },
  setWindowSize: function (a, b) {
    this._windowSize = cc.size(a, b);
  },
  getBodySize: function () {
    return cc.size(
      this._windowSize.width,
      this._windowSize.height - 2 * this._top.height
    );
  },
  getBodyInnerSize: function () {
    return this._wdBodyInnerSize;
  },
  getBodyItem: function () {
    return this._bodyLayer;
  },
  getParentWindow: function () {
    return this._parentNode;
  },
  setParentWindow: function (a) {
    this._parentNode = a;
  },
  setDefaultWdBodyBg: function () {
    this._wdBodyInnerSize = cc.size(
      this.getBodySize().width - 2 * WD_BODY_MARGIN_LR,
      this.getBodySize().height - WD_BODY_MARGIN_TB
    );
    var a = new cc.DrawNode(),
      b = cc.color(18, 37, 98);
    a.drawRect(
      cc.p(0, 0),
      cc.p(this._wdBodyInnerSize.width, this._wdBodyInnerSize.height),
      b,
      1,
      b
    );
    a.x = WD_BODY_MARGIN_LR;
    a.visible = !1;
    this.addChildBody(a, -1);
  },
  setVisibleTop: function (a) {
    this._top.visible = a;
  },
  setVisibleBottom: function (a) {
    this._bgBottom.visible = a;
  },
  setVisibleBgBody: function (a) {
    this._bgBody.visible = a;
  },
  addChildBody: function (a, b, d) {
    this._bodyLayer.addChild(a, void 0 === b ? 0 : b, void 0 === d ? 0 : d);
  },
  getWindowPos: function () {
    return cc.p(
      this._bodyLayer.x - this._bgWindowLayer.x,
      this._bodyLayer.y - this._bgWindowLayer.y
    );
  },
  setVisibleOutBackgroundWindow: function (a) {
    if ((this._isVisibleOutBG = a)) {
      var b = cc.director.getWinSize();
      this._bgWindowLayer = new BkSprite(res.shadow_co_frame_png);
      this._bgWindowLayer.setOpacity(210);
      this._bgWindowLayer.x = b.width / 2;
      this._bgWindowLayer.y = b.height / 2;
      a = b.width / this._bgWindowLayer.getContentSize().width;
      b = b.height / this._bgWindowLayer.getContentSize().height;
      this._bgWindowLayer.scaleX = a;
      this._bgWindowLayer.scaleY = b;
      isWebPlatform() ||
        ((this._bgWindowLayer.scaleX = 2 * a),
        (this._bgWindowLayer.scaleY = 2 * b));
      var d = this,
        e = !1;
      this._closedWindowListener = this._bgWindowLayer.createTouchEvent(
        function (a, b) {
          e = !1;
          if (d._isMovingWindow) return !1;
          var h = d.convertToNodeSpace(a.getLocation());
          cc.log("location " + h.x + " - " + h.y);
          var k = cc.rect(
            d._bodyLayer.x,
            d._bodyLayer.y,
            d._windowSize.width,
            d._windowSize.height
          );
          if (cc.rectContainsPoint(k, h))
            return logMessage("insize window"), !1;
          logMessage("outzise window -\x3e remove window");
          e = !0;
        },
        null,
        function (a, b) {
          e && d.removeSelf();
        }
      );
      cc.eventManager.addListener(
        this._closedWindowListener,
        this._bgWindowLayer
      );
    } else
      null != this._closedWindowListener &&
        cc.eventManager.removeListener(this._closedWindowListener);
  },
  setMoveableWindow: function (a) {
    if (!a && a) {
      var b = this;
      this._moveWindowListener = cc.EventListener.create({
        event: cc.EventListener.TOUCH_ONE_BY_ONE,
        swallowTouches: !0,
        onTouchBegan: function (a, b) {
          var f = b.getCurrentTarget(),
            g = f.convertToNodeSpace(a.getLocation()),
            f = f.getContentSize(),
            f = cc.rect(0, 0, f.width, f.height);
          return cc.rectContainsPoint(f, g) ? !0 : !1;
        },
        onTouchMoved: function (a, e) {
          var f = e.getCurrentTarget(),
            g = f.convertToNodeSpace(a.getLocation()),
            f = f.getContentSize(),
            f = cc.rect(0, 0, f.width, f.height);
          cc.rectContainsPoint(f, g) &&
            ((b._isMovingWindow = !0),
            (g = a.getDelta()),
            (b.x += g.x),
            (b.y += g.y),
            b.x < -b._windowSize.width / 2 && (b.x = -b._windowSize.width / 2),
            logMessage("[x: " + b.x + "- y: " + b.y + "]"),
            null != b._bgWindowLayer &&
              ((b._bgWindowLayer.x -= g.x), (b._bgWindowLayer.y -= g.y)));
        },
        onTouchEnded: function (a, e) {
          b._isMovingWindow = !1;
        },
      });
      cc.eventManager.addListener(this._moveWindowListener, this._top);
    }
  },
  preprocessBeforeRemoveWindow: function () {
    logMessage("preprocessBeforeRemoveWindow");
    BkStackWindow.pop();
    this.enableAllEditboxInLastWindow();
    this.getParentWindow()
      ? (logMessage("co parent node -\x3e resume event parent node"),
        cc.eventManager.resumeTarget(this.getParentWindow(), !0))
      : this.resumeEventLastWindow();
    isWebPlatform() && (cc._canvas.style.cursor = "default");
    null != this._callbackRemoveWindow &&
      (logMessage("this._callbackRemoveWindow!\x3d null"),
      this._callbackRemoveWindow(),
      (this._callbackRemoveWindow = null));
  },
  removeSelf: function (a) {
    this.removeFromParent(a);
  },
  removeFromParent: function (a) {
    this.preprocessBeforeRemoveWindow();
    this._super(a);
  },
  showWithParent: function (a, b) {
    logMessage("window showWithParent");
    var d = getCurrentScene();
    if (void 0 != d) {
      var e = d.getChildByTag(WD_TAG.HOT_NEWS);
      void 0 != e && null != e && e.removeSelf();
    }
    isWebPlatform() && (cc._canvas.style.cursor = "default");
    e = cc.director.getWinSize();
    this._bodyLayer.x = e.width / 2 - this._windowSize.width / 2;
    this._bodyLayer.y = e.height / 2 - this._windowSize.height / 2;
    this.addChild(this._bodyLayer, WD_ZORDER_WINDOW);
    this._isVisibleOutBG && this.addChild(this._bgWindowLayer, -4);
    e = !0;
    void 0 != a && null != a && (e = a);
    e &&
      (this.getParentWindow()
        ? (logMessage("co parent node -\x3e pause parent node"),
          cc.eventManager.pauseTarget(this.getParentWindow(), !0))
        : this.pauseEventLastWindow());
    void 0 != d &&
      (void 0 != b && null != b
        ? d.addChild(this, TagOfLayer.Popup, b)
        : d.addChild(this, TagOfLayer.Popup));
    this.disableAllEditboxInLastWindow();
    BkStackWindow.pushWindow(this);
  },
  pauseEventLastWindow: function () {
    logMessage("khong co parent node -\x3e pauseEventLastWindow");
    var a = BkStackWindow.getTopWindow();
    null == a
      ? (logMessage("chua show 1 wd nao truoc day -\x3e pause scene"),
        Util.pauseEventCurrentScene())
      : cc.eventManager.pauseTarget(a, !0);
  },
  resumeEventLastWindow: function () {
    logMessage("khong co parent node -\x3e resumeEventLastWindow");
    var a = BkStackWindow.getTopWindow();
    null == a
      ? (logMessage("hien tai chi show crWD -\x3e resume scene"),
        Util.resumeEventCurrentScene())
      : cc.eventManager.resumeTarget(a, !0);
  },
  addEditbox: function (a) {
    this.listEditBox.push(a);
  },
  disableAllEditboxInLastWindow: function () {
    var a = BkStackWindow.getTopWindow();
    if (null != a)
      for (var b, d = 0; d < a.listEditBox.length; d++)
        (b = a.listEditBox[d]), b.setDisabled(!0, !0);
  },
  enableAllEditboxInLastWindow: function () {
    var a = BkStackWindow.getTopWindow();
    if (null != a)
      for (var b, d = 0; d < a.listEditBox.length; d++)
        (b = a.listEditBox[d]), b.setDisabled(!1, !0);
  },
});
BkBaseChessWindow = BkWindow.extend({
  headerChessWD: null,
  ctor: function (a, b, d, e) {
    this._super(a, b, d, e);
    this.setVisibleOutBackgroundWindow(!0);
    this.setVisibleTop(!1);
    this.setVisibleBottom(!1);
    this._btnClose.setVisibleButton(!1);
  },
  initBgBody: function (a) {
    var b = res_name.mini_popupframe,
      d = this._windowSize.width,
      e = GAME_SCALE;
    isWebPlatform() &&
      (a && (b = res_name.info_frame),
      500 > this._windowSize.width
        ? (e = 0.6)
        : 600 > this._windowSize.width && (e = 0.9));
    a = cc.spriteFrameCache.getSpriteFrame(b);
    b = cc.rect(75, 80, 566, 379);
    this._bgBody = new cc.Scale9Sprite(a, b);
    isWebPlatform() || (d = this._bgBody.getContentSize().width);
    this._bgBody.width = d * GAME_SCALE;
    this._bgBody.height = this._windowSize.height;
    this._bgBody.x = this._windowSize.width / 2;
    this._bgBody.y = this._windowSize.height / 2;
    this._bodyLayer.addChild(this._bgBody, WD_ZORDER_BODY);
    d = e;
    1 > d && !isWebPlatform() && (d = 1);
    this.headerChessWD = new BkSprite("#" + res_name.header);
    this.headerChessWD.setScaleX(e);
    this.headerChessWD.setScaleY(d);
    this.headerChessWD.x = this._windowSize.width / 2;
    this.headerChessWD.y =
      this._windowSize.height - this.headerChessWD.getBoundingBox().height / 2;
    this._bodyLayer.addChild(this.headerChessWD, WD_ZORDER_BODY);
  },
  addTitleImage: function (a, b) {
    b = void 0 === b ? 0 : b;
    var d = new BkSprite("#" + a);
    d.setScale(GAME_SCALE);
    d.x = this.headerChessWD.x;
    d.y = this.headerChessWD.y + b * GAME_SCALE;
    this._bodyLayer.addChild(d, WD_ZORDER_BODY);
  },
});
TAB_WD_BUTTON_MARGIN_TOP = 12 * GAME_SCALE_HEIGHT;
TAB_WD_BUTTON_MARGIN_LEFT = 84 * GAME_SCALE_WIDTH;
TAB_WD_BUTTON_MARGIN = 3;
TAB_WD_BODY_MARGIN_LR = 22 * GAME_SCALE_WIDTH;
TAB_WD_BODY_MARGIN_TB = 22 * GAME_SCALE_HEIGHT;
BkTabWindow = BkBaseChessWindow.extend({
  _currentTab: null,
  _bodyContent: null,
  _numberTab: null,
  _arrBtnTab: null,
  _arrBtnText: null,
  _tabEventListener: null,
  _tabEventSelector: null,
  ctor: function (a, b, d, e) {
    logMessage(
      "Create tab windows: " + a + " size: " + b.width + ":" + b.height
    );
    this._super(a, b, null, !0);
    this._numberTab = d;
    this._currentTab = 1;
    this._arrBtnText = e;
    this.iniTab();
    this._windowTitle.setVisible(!1);
  },
  setSelectedForButton: function (a, b) {
    a &&
      (a.setIsSelected(b),
      b
        ? a.loadTextures(
            res_name.btnTab_selected,
            res_name.btnTab_selected,
            res_name.btnTab_selected,
            res_name.btnTab_selected,
            ccui.Widget.PLIST_TEXTURE
          )
        : a.loadTextures(
            res_name.btnTab_deselected,
            res_name.btnTab_deselected,
            res_name.btnTab_deselected,
            res_name.btnTab_deselected_hover,
            ccui.Widget.PLIST_TEXTURE
          ));
  },
  iniTab: function () {
    this._bodyContent = new cc.DrawNode();
    this.addChildBody(this._bodyContent, 0, 0);
    this._arrBtnTab = [];
    for (var a = 0; a < this._numberTab; a++) {
      var b = this.createTabBtn();
      this.initForBtn(b, a + 1);
      this._arrBtnTab.push(b);
    }
    this.configPosButton();
    if (void 0 != this._arrBtnText)
      for (a = 0; a < this._arrBtnText.length; a++)
        (b = this._arrBtnTab[a]),
          b.setTitleText(this._arrBtnText[a]),
          0 == a
            ? this.setSelectedForButton(b, !0)
            : this.setSelectedForButton(b, !1);
    else
      console.log("Error: Must addTabChangeEventListener to callback handle");
  },
  initForBtn: function (a, b) {
    this.setSelectedForButton(a, !0);
    a.setTitleFontSize(18);
    a.x = 0;
    a.y = this._top.y - a.height / 2 + TAB_WD_BUTTON_MARGIN_TOP;
    a.getTitleRenderer().enableShadow(cc.color(13, 59, 85), cc.p(2, -2));
    this.addChildBody(a, WD_ZORDER_TOP);
    var d = this;
    a.setHoverCallback(function () {
      b == d._currentTab &&
        isWebPlatform() &&
        (cc._canvas.style.cursor = "default");
    }, null);
    a.addTouchEventListener(function (a, f) {
      f == ccui.Widget.TOUCH_ENDED &&
        b != d._currentTab &&
        d.configBaseTabUI(b);
    });
  },
  configBaseTabUI: function (a) {
    cc.log("configBaseTabUI " + a);
    this._currentTab = a;
    this.configButtonWithSelectedTab(a);
    this.selectedTab(a);
  },
  configButtonWithSelectedTab: function (a) {
    for (var b = 0; b < this._numberTab; b++)
      this.setSelectedForButton(this._arrBtnTab[b], !1);
    this.setSelectedForButton(this._arrBtnTab[a - 1], !0);
  },
  configPosButton: function (a) {
    a = "undefined" !== typeof a ? a : TAB_WD_BUTTON_MARGIN_LEFT;
    this._arrBtnTab[0].x = a + 0.5;
    for (a = 1; a < this._arrBtnTab.length; a++) {
      var b = this._arrBtnTab[a - 1];
      this._arrBtnTab[a].x = b.x + b.width + TAB_WD_BUTTON_MARGIN;
    }
  },
  getBodyStartY: function () {
    return null == this._arrBtnTab || 0 == this._arrBtnTab.length
      ? this._top.y - TAB_WD_BUTTON_MARGIN_TOP
      : this._arrBtnTab[0].y - this._arrBtnTab[0].height;
  },
  configPosYButton: function (a) {
    a = "undefined" !== typeof a ? a : TAB_WD_BUTTON_MARGIN_TOP;
    for (var b = 0; b < this._arrBtnTab.length; b++)
      this._arrBtnTab[b].y = this._top.y + a;
  },
  selectedTab: function (a) {
    this._tabEventSelector &&
      (this._tabEventListener
        ? this._tabEventSelector.call(this._tabEventListener, this, a)
        : this._tabEventSelector(this, a));
  },
  addTabChangeEventListener: function (a, b, d) {
    void 0 == d && (d = this._currentTab);
    this._tabEventSelector = a;
    this._tabEventListener = b;
    this.configBaseTabUI(d);
  },
  getCurrentTab: function () {
    return this._currentTab;
  },
  setCurrentTab: function (a) {
    this._currentTab = a;
  },
  getCoordinateStart: function () {
    return cc.p(this._bodyContent.x, this._bodyContent.y);
  },
  getBodyTab: function () {
    return this._bodyContent;
  },
  visibleBodyContent: function (a) {
    this._bodyContent.visible = a;
  },
  createTabBtn: function () {
    return new BkButton(
      res_name.btnTab_deselected,
      res_name.btnTab_deselected,
      res_name.btnTab_deselected,
      res_name.btnTab_deselected_hover,
      ccui.Widget.PLIST_TEXTURE
    );
  },
});
var TIME_ONTICK_CDT = 0.1,
  ALARM_TIMER = 15;
BkCountDownTime = cc.ProgressTimer.extend({
  greenSp: null,
  yellowSp: null,
  redSp: null,
  callback: null,
  alarmCallBack: null,
  alarmPercentage: null,
  timeCount: 0,
  numberCount: 300,
  lightSprite: null,
  centerPoint: null,
  wSp: 0,
  hSp: 0,
  BanKinh: 0,
  ctor: function (a) {
    this.greenSp = new BkSprite(a);
    this._super(this.greenSp);
    this.type = cc.ProgressTimer.TYPE_RADIAL;
    this.x = this.greenSp.getWidth() / 2;
    this.y = this.greenSp.getHeight() / 2;
    this.setReverseDirection(!0);
    this.lightSprite = new BkSprite("#" + res_name.pointtime);
    this.lightSprite.x = this.greenSp.getWidth() / 2;
    this.lightSprite.y = this.greenSp.getHeight();
    this.lightSprite.visible = !1;
    this.addChild(this.lightSprite);
    this.wSp = this.greenSp.getWidth();
    this.hSp = this.greenSp.getHeight();
    this.centerPoint = cc.p(this.wSp / 2, this.hSp / 2);
    this.BanKinh = this.wSp / 2 - 0.05 * this.wSp;
    this.retain();
  },
  setCallback: function (a) {
    this.callback = a;
  },
  setAlarmCallBack: function (a) {
    this.alarmCallBack = a;
  },
  showCountDown: function (a) {
    this.alarmPercentage = Math.floor((100 * ALARM_TIMER) / a);
    a < ALARM_TIMER && null != this.alarmCallBack && this.alarmCallBack();
    var b = cc.progressFromTo(a, 100, 0);
    this.timeCount = 0;
    this.numberCount = a / TIME_ONTICK_CDT - 1;
    this.runAction(b.repeat(1));
    this.schedule(this.onTickCDTime, TIME_ONTICK_CDT);
  },
  onTickCDTime: function () {
    this.updaLightSpritePosCircle(this.getPercentage(), this);
    this.alarmPercentage &&
      Math.floor(this.getPercentage()) == this.alarmPercentage &&
      null != this.alarmCallBack &&
      (logMessage("alarmCallBack " + Math.floor(this.getPercentage())),
      this.alarmCallBack(),
      (this.alarmCallBack = null));
    this.timeCount++;
    this.timeCount >= this.numberCount &&
      null != this.callback &&
      this.callback();
  },
  updaLightSpritePosCircle: function (a, b) {
    a = 100 - a;
    if (100 == a) b.removeLightSprite();
    else {
      var d, e;
      if (0 == a) (d = b.centerPoint.x), (e = b.hSp);
      else if (50 == a) (d = b.centerPoint.x), (e = 0);
      else {
        var f;
        d = (2 * Math.PI * a) / 100;
        d = Math.PI / 2 - d;
        e = Math.tan(d);
        f = b.BanKinh / Math.sqrt(e * e + 1);
        25 > a && 0 <= a
          ? (d = b.centerPoint.x + f)
          : 50 <= a && 75 > a
          ? (d = b.centerPoint.x - f)
          : ((d = -d + Math.PI),
            (e = -Math.tan(d)),
            (f = b.BanKinh / Math.sqrt(e * e + 1)),
            (d = 75 <= a ? b.centerPoint.x - f : b.centerPoint.x + f));
        e = e * (d - b.centerPoint.x) + b.centerPoint.y;
      }
      b.lightSprite.visible || (b.lightSprite.visible = b);
      b.lightSprite.x = d;
      b.lightSprite.y = e;
    }
  },
  removeLightSprite: function () {
    null != this.lightSprite &&
      (this.lightSprite.removeFromParent(), (this.lightSprite = null));
  },
  removeCountDown: function () {
    this.unschedule(this.onTickCDTime);
    this.removeLightSprite();
    this.removeFromParent();
    this.release();
  },
});
BkLabel = ccui.Text.extend({
  ctor: function (a, b, d, e, f) {
    b = Util.getGameFontName(void 0 === e ? !1 : e, void 0 === f ? !1 : f);
    this._super(a, b, d);
    this.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
    isWebPlatform() && this.setScale(0.5);
    this.retain();
  },
  getContentSize: function () {
    var a = this._super();
    return isWebPlatform() ? cc.size(a.width / 2, a.height / 2) : a;
  },
  _getWidth: function () {
    return this.getContentSize().width;
  },
  _getHeight: function () {
    return this.getContentSize().height;
  },
  setFontSize: function (a) {
    isWebPlatform() ? this._super(2 * a) : this._super(a);
  },
  removeFromParent: function (a) {
    this._super(a);
    this.release();
  },
  setScaleM: function (a, b) {
    void 0 === b && (b = a);
    isWebPlatform() || this.setScale(a, b);
  },
});
var MAX_NUMBER_COUNT = 10;
BkEditBox = cc.EditBox.extend({
  isAutofocus: !1,
  countFrame: 0,
  _edTxt: null,
  ctor: function (a, b, d, e) {
    this._super(a, b);
    this.setInputMode(cc.EDITBOX_INPUT_MODE_SINGLELINE);
    this.setInputFlag(cc.EDITBOX_INPUT_FLAG_INITIAL_CAPS_WORD);
    this.setPlaceholderFontName("Arial");
    this.stayOnTop(!1);
  },
  setFontSize: function (a) {
    this._super(a);
    this.setPlaceholderFontSize(a);
  },
  setDisabled: function (a, b) {
    var d = !a;
    this.setTouchEnabled(d);
    this.setVisible(d);
    b &&
      (a
        ? ((this.storeString = this.getString()), this.setString(""))
        : this.storeString && this.setString(this.storeString));
  },
  setAutoFocus: function (a) {},
  setTabStopToPrevious: function () {},
  setTabStopToNext: function () {},
  setTabStop: function () {},
  setStylePaddingLeft: function (a) {},
  setStylePaddingBottom: function (a) {},
  setBorder: function (a) {},
  setPaddingLeft: function (a) {},
  setHeight: function (a) {},
  setNumericMode: function () {},
});
BkCheckBox = ccui.CheckBox.extend({
  ctor: function () {
    this._super();
    this.setTouchEnabled(!0);
    this.loadTextures(
      res_name.checkbox_unchecked,
      res_name.checkbox_unchecked_hover,
      res_name.checkbox_checked,
      res_name.checkbox_unchecked_disable,
      res_name.checkbox_checked_disable,
      ccui.Widget.PLIST_TEXTURE
    );
  },
  setEnableCheckBox: function (a) {
    this.setBright(a);
    this.setTouchEnabled(a);
  },
});
DELAYY = DELAYX = 0;
CARD_HEIGHT = 116;
CARD_WIDTH = 84;
TAG_SELECT = 1;
TAG_DESELECT = 2;
TAG_DEAL_CARD = 3;
NHEP = 0;
RO = 1;
CO = 2;
BICH = 3;
CARD_STATUS_TAKEN = 2;
CARD_STATUS_CURRENT = 3;
CARD_STATUS_DISCARD = 4;
YPOS_ONHAND_DOWN = 119;
YPOS_ONHAND_UP = YPOS_ONHAND_DOWN + 15;
BkCard = BkSprite.extend({
  id: -1,
  cardImage: null,
  subTypeImage: null,
  MOVE_ACTION_TAG: 1e3,
  CARD_STATUS_ONHAND_NORMAL: 0,
  CARD_STATUS_ONHAND_UP: 1,
  cardStatus: 0,
  cardUIStatus: 0,
  isSelectable: null,
  isEnableClick: !0,
  handle: null,
  endPointActionMove: null,
  phomIndex: 0,
  playerHasCard: null,
  cbMoveFinish: null,
  type: 0,
  number: 0,
  onHoverListener: null,
  OnClickListener: null,
  onDragDropListener: null,
  queueAnimation: null,
  isQueueAnimation: !1,
  isProcessQueueAnimation: !1,
  currentAnimation: null,
  blackMask: null,
  _cbMouseClick: null,
  ctor: function (a, b) {
    this._super();
    this.number = a;
    this.type = b;
    this.id = this.encode();
    this.init(a, b);
  },
  init: function (a, b) {
    this.cardStatus = this.CARD_STATUS_ONHAND_NORMAL;
    this.initCardImage(a, b);
    this.isAnimation = this.isSelectable = !1;
    this.isEnableClick = !0;
    this.isQueueAnimation = !1;
  },
  setIsQueueAnimation: function (a) {
    this.isQueueAnimation = a;
  },
  reloadByID: function (a) {
    this.number = Math.floor(a / 4);
    this.type = a % 4;
    this.id = a;
    null != this.cardImage && this.cardImage.removeSelf();
    this.cardImage = null;
    this.initCardImage(this.number, this.type);
  },
  initCardImage: function (a, b) {
    0 == b && (b = 4);
    null == this.cardImage &&
      (this.cardImage = new BkSprite(
        res.Cards,
        cc.rect(
          DELAYX * a + CARD_WIDTH * (a - 1),
          DELAYY * b + CARD_HEIGHT * (b - 1),
          CARD_WIDTH,
          CARD_HEIGHT
        )
      ));
    this.cardImage.x = CARD_WIDTH / 2;
    this.cardImage.y = CARD_HEIGHT / 2;
    this.width = CARD_WIDTH;
    this.height = CARD_HEIGHT;
    this.addChild(this.cardImage);
  },
  initSubType: function () {
    this.subTypeImage = this.getSubTypeImage();
    null != this.subTypeImage &&
      ((this.subTypeImage.x = 45),
      (this.subTypeImage.y = 95),
      this.addChild(this.subTypeImage));
  },
  initSubTypeWithGameID: function (a) {
    var b = !1;
    switch (a) {
      case GID.XAM:
      case GID.TLMN_DEM_LA:
      case GID.PHOM:
        b = !0;
    }
    if (1 > this.number || 13 < this.number) b = !1;
    b &&
      ((this.subTypeImage = this.getSubTypeImage()),
      null != this.subTypeImage &&
        ((this.subTypeImage.x = 45),
        (this.subTypeImage.y = 95),
        this.addChild(this.subTypeImage)));
  },
  getSubTypeImage: function () {
    var a = null;
    switch (this.type) {
      case RO:
        a = cc.rect(1, 0, 24, 22);
        break;
      case CO:
        a = cc.rect(25, 0, 24, 22);
        break;
      case BICH:
        a = cc.rect(49, 0, 24, 22);
        break;
      case NHEP:
        a = cc.rect(73, 0, 24, 22);
    }
    return null == a ? null : new BkSprite(res.chat_nho, a);
  },
  initCardBackMask: function () {
    null == this.cardBackMask &&
      ((this.cardBackMask = new BkSprite(
        res.Cards,
        cc.rect(
          14 * DELAYX + 13 * CARD_WIDTH,
          1 * DELAYY + 0 * CARD_HEIGHT,
          CARD_WIDTH,
          CARD_HEIGHT
        )
      )),
      this.addChild(this.cardBackMask, 100));
    this.cardBackMask.x = CARD_WIDTH / 2;
    this.cardBackMask.y = CARD_HEIGHT / 2;
    this.cardBackMask.width = CARD_WIDTH;
    this.cardBackMask.height = CARD_HEIGHT;
    this.cardBackMask.visible = !0;
  },
  setCallBackMoveFinish: function (a) {
    this.cbMoveFinish = a;
  },
  removeCardBackMask: function () {
    null != this.cardBackMask &&
      (this.cardBackMask.removeFromParent(), (this.cardBackMask = null));
  },
  initCardSelectedMask: function () {
    null == this.selectedMask &&
      ((this.selectedMask = new BkSprite("#" + res_name.card_mask)),
      this.addChild(this.selectedMask));
    this.selectedMask.x = CARD_WIDTH / 2 - 1;
    this.selectedMask.y = CARD_HEIGHT / 2;
    this.selectedMask.width = CARD_WIDTH - 2;
    this.selectedMask.height = CARD_HEIGHT;
    this.selectedMask.visible = !0;
  },
  removeBlackMask: function () {
    null != this.blackMask &&
      (this.blackMask.removeFromParent(), (this.blackMask = null));
  },
  isShowBlackMask: function () {
    return null != this.blackMask;
  },
  showBlackMask: function () {
    this.removeBlackMask();
    this.blackMask = new BkSprite("#" + res_name.card_black_mask);
    this.blackMask.x = CARD_WIDTH / 2;
    this.blackMask.y = CARD_HEIGHT / 2;
    this.addChild(this.blackMask);
  },
  hideSelectedMask: function () {
    null != this.selectedMask && (this.selectedMask.visible = !1);
  },
  _initEventListener: function () {
    this.onHoverListener = this.createHoverEvent();
    cc.eventManager.addListener(this.onHoverListener, this);
    this.OnClickListener = this.createTouchEvent(
      function (a, b) {
        var d = b.getCurrentTarget();
        BkLogicManager.getInGameLogic().processCardClickEvent(d);
      },
      function (a, b) {},
      function (a, b) {}
    );
    cc.eventManager.addListener(this.OnClickListener, this);
  },
  initDragDropEventListener: function (a, b, d, e) {
    this.removeEventHoverAndClick();
    var f = 10;
    void 0 != e && 0 <= e && (f = e);
    var g = null;
    this.onHoverListener = this.createHoverEvent();
    cc.eventManager.addListener(this.onHoverListener, this);
    this.onDragDropListener = cc.EventListener.create({
      event: cc.EventListener.TOUCH_ONE_BY_ONE,
      swallowTouches: !0,
      onTouchBegan: function (b, d) {
        var e = d.getCurrentTarget(),
          f = e.convertToNodeSpace(b.getLocation()),
          p = e.getContentSize(),
          p = cc.rect(0, 0, p.width, p.height);
        return cc.rectContainsPoint(p, f)
          ? (void 0 != a && null != a && a(e), (g = cc.p(e.x, e.y)), !0)
          : !1;
      },
      onTouchMoved: function (a, b) {
        var e = b.getCurrentTarget(),
          n = a.getDelta();
        e.x += n.x;
        e.y += n.y;
        (Math.abs(e.x - g.x) > f || Math.abs(e.y - g.y) > f) &&
          void 0 != d &&
          null != d &&
          d(e, !0);
      },
      onTouchEnded: function (a, d) {
        BkTime.GetCurrentTime();
        var e = d.getCurrentTarget();
        Math.abs(e.x - g.x) > f || Math.abs(e.y - g.y) > f
          ? void 0 != b && null != b && b(e, e.x, e.y)
          : e.isEnableClick &&
            ((e.x = g.x),
            (e.y = g.y),
            BkLogicManager.getInGameLogic().processCardClickEvent(e));
      },
    });
    cc.eventManager.addListener(this.onDragDropListener, this);
  },
  isSelected: function () {
    return this.cardStatus == this.CARD_STATUS_ONHAND_UP;
  },
  deSelect: function (a) {
    logMessage("deSelect " + this.toString());
    this.cardOnhandMoveDown(a);
  },
  selectCard: function (a) {
    this.cardOnhandMoveUp(a);
  },
  enableEventHoverAndClick: function () {
    this.removeAllEventListener();
    logMessage("enableEventHoverAndClick:" + this.id);
    this._initEventListener();
  },
  removeEventHoverAndClick: function () {
    cc.eventManager.removeListener(this.OnClickListener);
    cc.eventManager.removeListener(this.onHoverListener);
  },
  removeAllEventListener: function () {
    cc.eventManager.removeListener(this.OnClickListener);
    cc.eventManager.removeListener(this.onHoverListener);
    null != this.onDragDropListener &&
      cc.eventManager.removeListener(this.onDragDropListener);
  },
  setMoveHandle: function (a) {
    this.handle = a;
  },
  setCustomCallbackMouseClick: function (a) {
    this._cbMouseClick = a;
  },
  OnCardMouseClick: function () {
    this.isAnimation
      ? logMessage("return")
      : null != this._cbMouseClick
      ? this._cbMouseClick(this)
      : this.cardStatus == this.CARD_STATUS_ONHAND_NORMAL
      ? this.selectCard(TAG_SELECT)
      : this.deSelect(TAG_DESELECT);
  },
  stopAllActionOfCard: function () {
    this.resetQueueAnimation();
    this.stopAllActions();
    this.cardAnimationFinish();
  },
  stopMoveActionNotCallbackFN: function () {
    this.stopActionByTag(this.MOVE_ACTION_TAG);
    null != this.endPointActionMove &&
      ((this.x = this.endPointActionMove.x),
      (this.y = this.endPointActionMove.y));
  },
  stopMoveAction: function () {
    this.stopMoveActionNotCallbackFN();
    this.cardAnimationFinish();
  },
  cardMoveAndScaleFinish: function () {
    this.isAnimation = !1;
    this.removeFromParent();
  },
  processNextAnimationInQueue: function () {
    null == this.queueAnimation &&
      ((this.queueAnimation = []), (this.isProcessQueueAnimation = !1));
    if (0 < this.queueAnimation.length) {
      this.isProcessQueueAnimation = !0;
      var a = this.queueAnimation.shift();
      this.doAnimationMove(a.durationTime, a.xPos, a.yPos, a.tag);
    } else this.isProcessQueueAnimation = !1;
  },
  resetQueueAnimation: function () {
    this.isQueueAnimation &&
      ((this.queueAnimation = []), (this.isProcessQueueAnimation = !1));
  },
  processQueueAnimation: function (a) {
    null == this.queueAnimation &&
      ((this.queueAnimation = []), (this.isProcessQueueAnimation = !1));
    this.queueAnimation.push(a);
    a = !this.isProcessQueueAnimation;
    1 != this.queueAnimation.length || this.isAnimation || (a = !0);
    a && this.processNextAnimationInQueue();
  },
  move: function (a, b, d, e) {
    this.isQueueAnimation
      ? ((a = new BkAnimationCardData(a, b, d, e)),
        this.processQueueAnimation(a))
      : this.doAnimationMove(a, b, d, e);
  },
  doAnimationMove: function (a, b, d, e) {
    this.isAnimation && (logMessage("stopMoveAction"), this.stopMoveAction());
    var f = cc.callFunc(this.cardAnimationFinish, this);
    this.tag = e;
    var g = cc.moveTo(a, b, d),
      f = cc.sequence(g, f);
    f.tag = this.MOVE_ACTION_TAG;
    this.y != d || this.x != b
      ? ((this.currentAnimation = new BkAnimationCardData(a, b, d, e)),
        (this.endPointActionMove = cc.p(b, d)),
        (this.isAnimation = !0),
        this.runAction(f))
      : (logMessage(
          "x,y not change -\x3e call cardAnimationFinish not run action"
        ),
        this.cardAnimationFinish());
  },
  moveAndScale: function (a, b, d, e, f, g) {
    var h = this,
      k = cc.callFunc(this.cardMoveAndScaleFinish, this, 1.2),
      m = cc.callFunc(
        function () {
          h.isAnimation = !1;
        },
        this,
        1.2
      );
    this.tag = e;
    e = 0.5;
    void 0 != g && (e = g);
    b = cc.moveTo(a, b, d);
    a = cc.scaleTo(a, e);
    a = cc.spawn(b, a);
    k = cc.sequence(a, k);
    void 0 != f && !1 == f && (k = cc.sequence(a, m));
    this.isAnimation = !0;
    this.runAction(k);
  },
  cardAnimationFinish: function () {
    null != this.cbMoveFinish && this.cbMoveFinish(this);
    if (null != this.handle) this.handle.onFinishAnimationMoveCard(this);
    this.isAnimation = !1;
    this.currentAnimation = this.endPointActionMove = null;
    this.isQueueAnimation && this.processNextAnimationInQueue();
  },
  cardOnhandMoveUp: function (a, b) {
    var d = this.x;
    this.isAnimation &&
      null != this.currentAnimation &&
      (d = this.currentAnimation.xPos);
    var e = YPOS_ONHAND_UP;
    void 0 != b && b && (e = this.y + 15);
    void 0 == a && (a = "");
    this.tag = a;
    this.cardStatus = this.CARD_STATUS_ONHAND_UP;
    this.move(0.1, d, e, a);
    this.showBackMask(!1);
    this.showMask(!0);
  },
  cardOnhandMoveDown: function (a, b) {
    void 0 == a && (a = "");
    var d = this.x;
    this.isAnimation &&
      null != this.currentAnimation &&
      (d = this.currentAnimation.xPos);
    var e = YPOS_ONHAND_DOWN;
    void 0 != b && b && (e = this.y - 15);
    this.tag = a;
    this.cardStatus = this.CARD_STATUS_ONHAND_NORMAL;
    this.move(0.1, d, e, a);
    this.showBackMask(!1);
    this.showMask(!1);
  },
  setEnableClick: function (a) {
    this.isEnableClick = a;
  },
  setSelectable: function (a) {
    (this.isSelectable = a)
      ? (this.removeAllEventListener(), this._initEventListener())
      : this.removeAllEventListener();
  },
  showMask: function (a) {
    null == this.selectedMask && this.initCardSelectedMask();
    this.selectedMask.visible = a;
  },
  showBackMask: function (a) {
    a
      ? (null == this.cardBackMask && this.initCardBackMask(),
        (this.cardBackMask.visible = !0))
      : this.removeCardBackMask();
  },
  setSize: function (a, b) {
    this._windowSize = cc.size(a, b);
  },
  encode: function () {
    return 4 * this.number + this.type;
  },
  getNumber: function () {
    return this.number;
  },
  getType: function () {
    return this.type;
  },
  showTakenMask: function () {
    null == this.takenMask &&
      ((this.takenMask = new BkSprite("#" + res_name.EatCard_IMG)),
      this.addChild(this.takenMask));
    this.takenMask.x = this.takenMask.getContentSize().width / 2;
    this.takenMask.y = this.takenMask.getContentSize().height / 2;
    this.takenMask.visible = !0;
  },
  unShowTakenMask: function () {
    null != this.takenMask && (this.takenMask.visible = !1);
  },
  setCardStatus: function (a, b) {
    void 0 == b && (b = !1);
    logMessage("setCardStatus " + a + " isMe " + b);
    this.cardUIStatus = a;
    switch (this.cardUIStatus) {
      case CARD_STATUS_TAKEN:
        b ? this.setScale(1) : this.setScale(PHOM_CARD_SCALE_INGAME);
        this.showTakenMask();
        break;
      case CARD_STATUS_CURRENT:
        b
          ? this.setScale(1)
          : this.setScale(PHOM_CARD_SCALE_INGAME_CURRENT_CARD);
    }
  },
  toString: function () {
    return (
      "[cardID: " +
      this.encode() +
      " - number: " +
      this.number +
      " - type: " +
      this.type +
      " satus: " +
      this.cardStatus +
      " - y:" +
      this.y +
      "]"
    );
  },
  doFlipAnimation: function () {
    var a = cc.rotateBy(0.1, 0, -5),
      b = this,
      d = cc.callFunc(function () {
        b.setRotation(0);
        b.showBackMask(!1);
      }, this);
    this.runAction(cc.sequence(a, d));
  },
});
BkTextField = BkSprite.extend({
  bg: null,
  tf: null,
  ctor: function (a, b, d, e) {
    this._super();
    this.bg = new BkSprite(a);
    this.bg.setPositionCenter();
    this.addChild(this.bg, 0);
    this.tf = new ccui.TextField(b, d, e);
    this.tf.ignoreContentAdaptWithSize(!1);
    this.tf.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.tf.setTextVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.tf.setContentSize(
      this.bg.getContentSize().width - 10,
      this.bg.getContentSize().height - 10
    );
    this.tf.setPosition(this.bg.x, this.bg.y);
    this.addChild(this.tf);
    this.tf.addEventListener(this.textFieldEvent, this);
  },
  textFieldEvent: function (a, b) {
    this.bg.getContentSize();
    switch (b) {
      case ccui.TextField.EVENT_ATTACH_WITH_IME:
        a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
        a.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_TOP);
        break;
      case ccui.TextField.EVENT_DETACH_WITH_IME:
        a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),
          a.setTextVerticalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    }
  },
});
BkCountDownText = BkSprite.extend({
  background: null,
  instructionText: null,
  cdtext: null,
  callBackFinishFunc: null,
  callbackMaubinhFunc: null,
  isAutoStart: !1,
  tCD: null,
  ctor: function (a, b, d, e) {
    this._super();
    a = !1;
    void 0 != b && (a = b);
    e
      ? ((this.background = new BkSprite("#" + res_name.bg_count_down_co)),
        isWebPlatform() && (this.background.y = 15),
        this.addChild(this.background))
      : a &&
        ((this.background = new BkSprite("#" + res_name.BG_Stop_Watch)),
        this.addChild(this.background));
    void 0 == e && (e = !1);
    e
      ? ((this.cdtext = new cc.LabelBMFont("", res.BITMAP_GAME_FONT_CO)),
        (this.cdtext.x = this.background.x),
        (this.cdtext.y = this.background.y - 20),
        this.addChild(this.cdtext))
      : ((this.cdtext = new cc.LabelBMFont("", res.BITMAP_GAME_FONT_TCM)),
        a &&
          (this.cdtext.setScale(0.9), (this.cdtext.y = this.background.y + 3)),
        this.addChild(this.cdtext, 100));
    void 0 != d &&
      !0 == d &&
      ((this.isAutoStart = !0),
      (this.instructionText = new BkSprite("#" + res_name.autoReadyImg)),
      (this.instructionText.y = 15),
      this.addChild(this.instructionText),
      (this.cdtext.x =
        this.instructionText.x +
        this.instructionText.getContentSize().width / 2 -
        60),
      (this.cdtext.y = this.instructionText.y - 2));
    this.setVisible(!1);
  },
  setCallbackForMauBinh: function (a) {
    this.callbackMaubinhFunc = a;
  },
  setCallBackfunction: function (a) {
    this.callBackFinishFunc = a;
  },
  setTextSize: function (a) {
    this.cdtext.setFontSize(a);
  },
  setTextColor: function (a) {
    this.cdtext.setTextColor(a);
  },
  showCountDownText: function (a) {
    this.setVisible(!0);
    this.tCD = a;
    10 > this.tCD
      ? this.cdtext.setString("0" + this._getStringFrom(this.tCD))
      : this.cdtext.setString(this._getStringFrom(this.tCD));
    var b = this;
    this.schedule(function () {
      b.tCD--;
      10 > b.tCD
        ? b.cdtext.setString("0" + b._getStringFrom(b.tCD))
        : b.cdtext.setString(this._getStringFrom(b.tCD));
      1 == b.tCD && null != b.callbackMaubinhFunc && b.callbackMaubinhFunc();
      0 == b.tCD &&
        (null != b.callBackFinishFunc
          ? b.callBackFinishFunc()
          : logMessage("Must set callback function to handle onTimerComplete"));
    }, 1);
  },
  _getStringFrom: function (a) {
    var b = "";
    10 > a ? (b = "") : 100 > a && (b = "");
    return b + a;
  },
  removeCountDown: function () {
    this.unscheduleAllCallbacks();
    this.removeFromParent();
  },
});
BkToolTip = BkSprite.extend({
  fontSize: 16,
  background: null,
  textLabel: null,
  cbRemove: null,
  ctor: function (a) {
    this._super();
    this.background = new cc.Scale9Sprite(a);
    this.addChild(this.background);
    this.textLabel = new BkLabelTTF(
      "",
      "",
      this.fontSize,
      cc.size(360, 0),
      cc.TEXT_ALIGNMENT_CENTER,
      cc.VERTICAL_TEXT_ALIGNMENT_CENTER
    );
    this.textLabel.setFontSize(this.fontSize);
    this.addChild(this.textLabel);
  },
  setTextColor: function (a) {
    this.textLabel.setFontFillColor(a);
  },
  setContentText: function (a) {
    this.textLabel.setString(a);
    var b = 20;
    a = 10;
    if (
      BkGlobal.currentGameID == GID.CO_TUONG ||
      BkGlobal.currentGameID == GID.CO_UP
    )
      (b = 20), (a = 10);
    b = this.textLabel.getContentSize().width + b;
    a = this.textLabel.getContentSize().height + a;
    35 > a && (a = 35);
    45 > b && (b = 45);
    this.background.width = b;
    this.background.height = a;
  },
  show: function (a, b) {
    if (cc.director.getRunningScene()) {
      var d = cc.director.getRunningScene();
      void 0 != a && (this.x = a);
      void 0 != b && (this.y = b);
      d.addChild(this, TagOfLayer.Toast);
    }
  },
  removeSelf: function () {
    this.removeFromParent();
    null != this.cbRemove && this.cbRemove();
  },
  setRemoveCallback: function (a) {
    this.cbRemove = a;
  },
  setAutoHideAfter: function (a) {
    this.scheduleOnce(this.finishAutoHide, a);
  },
  finishAutoHide: function () {
    this.unschedule(this.finishAutoHide);
    this.removeSelf();
  },
  setWidthToolTip: function (a) {
    a *= 2;
    this.textLabel.setContentSize(cc.size(a, 0));
    this.textLabel.setDimensions(cc.size(a, 0));
  },
});
var TYPE_MESSAGE_BOX = 1,
  TYPE_CONFIRM_BOX = 2,
  TYPE_NO_CONFIRM_BOX = 3;
BkDialogWindow = BkBaseChessWindow.extend({
  type: TYPE_MESSAGE_BOX,
  contentMess: null,
  crSize: null,
  btnOK: null,
  btnCancel: null,
  okCallback: null,
  cancelCallback: null,
  MARGIN_TOP: 10,
  isConfirmPopup: !1,
  ctor: function (a, b, d) {
    var e = isWebPlatform() ? cc.size(506, 280) : cc.size(700, 460),
      f = 50,
      g = bkScaleSizeUtil(e, GAME_SCALE);
    logMessage("Windows size after scale: " + g.width + " - " + g.height);
    void 0 != d && (g = d);
    this._super(a, g);
    this.setVisibleOutBackgroundWindow(!0);
    this.type = b;
    this.addTitleImage(res_name.title_wd_thongbao);
    this.crSize = bkScaleSizeUtil(e, GAME_SCALE);
    isWebPlatform()
      ? ((this.contentMess = new cc.LabelTTF(
          "",
          "Tahoma",
          44,
          cc.size(2 * this.crSize.width - 180, 0),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_TOP
        )),
        this.contentMess.setScale(0.5),
        this.contentMess.setFontFillColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        this.contentMess.setDimensions(cc.size(1.4 * e.width, 0)),
        (this.contentMess.y =
          this.getWindowSize().height / 2 +
          this.contentMess.getBoundingBox().height / 4))
      : ((this.contentMess = new cc.LabelTTF(
          "Th\u00f4ng b\u00e1o",
          "Tahoma",
          30,
          cc.size(this.crSize.width - 2 * f, 0),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_TOP
        )),
        (a =
          (0.035 * cc.winSize.height) /
          this.contentMess.getContentSize().height),
        (f = (this.crSize.width - 2 * f) / a),
        this.contentMess.setContentSize(cc.size(f, 0)),
        this.contentMess.setDimensions(cc.size(f, 0)),
        this.contentMess.setScale(a),
        this.contentMess.setFontFillColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        (this.contentMess.y =
          this.getWindowSize().height / 2 +
          this.contentMess.getContentSize().height / 2));
    this.contentMess.x = this.getWindowSize().width / 2;
    this.getBodyItem().addChild(this.contentMess);
    this.btnOK = createBkButtonPlist(
      res_name.btnDongy,
      res_name.btnDongyPress,
      res_name.btnDongy,
      res_name.btnDongy,
      ""
    );
    f = (this.btnOK.getContentSize().width / 2) * GAME_SCALE + 20;
    this.btnOK.setScale(GAME_SCALE);
    this.btnOK.x = this.contentMess.x + f;
    this.btnOK.y = this.btnOK.getContentSize().height * GAME_SCALE * 1.1;
    this.getBodyItem().addChild(this.btnOK);
    this.btnOK.setVisible(!1);
    var h = this;
    this.btnOK.addClickEventListener(function () {
      null != h.okCallback && h.setCallbackRemoveWindow(null);
      h.removeSelf();
      null != h.okCallback && (h.okCallback(), (h.okCallback = null));
    });
    this.btnCancel = createBkButtonPlist(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong,
      ""
    );
    this.btnCancel.setScale(GAME_SCALE);
    this.btnCancel.x = this.contentMess.x - f;
    this.btnCancel.y = this.btnOK.y;
    this.getBodyItem().addChild(this.btnCancel);
    this.btnCancel.setVisible(!1);
    this.btnCancel.addClickEventListener(function () {
      null != h.cancelCallback && h.setCallbackRemoveWindow(null);
      h.removeSelf();
      null != h.cancelCallback &&
        (h.cancelCallback(), (h.cancelCallback = null));
    });
    this.configButton();
  },
  configButton: function () {
    this.type == TYPE_MESSAGE_BOX
      ? (this.btnOK.setVisible(!0), (this.btnOK.x = this.contentMess.x))
      : this.type == TYPE_CONFIRM_BOX &&
        (this.btnOK.setVisible(!0), this.btnCancel.setVisible(!0));
  },
  setTextMessage: function (a) {
    this.contentMess.setString(a);
  },
  show: function () {
    this.showWithParent();
  },
  setOkCallback: function (a) {
    this.okCallback = a;
  },
  setCancelCallback: function (a) {
    this.cancelCallback = a;
  },
  setTextColor: function (a) {
    this.contentMess.setFontFillColor(a);
  },
});
var CHANGE_MONEY_DURATION_ANIMATION = 1.5,
  CHANGE_MONEY_MOVE_TOP_Y = 70;
BkTextFieldChangeMoney = BkSprite.extend({
  player: null,
  delay: null,
  tfMoneyChange: null,
  amountChange: 0,
  ctor: function (a, b) {
    this._super();
    this.amountChange = b;
    this.player = a;
    this.tfMoneyChange =
      0 < this.amountChange
        ? new cc.LabelBMFont("", res.BITMAP_GAME_FONT_TCM)
        : new cc.LabelBMFont("", res.BITMAP_GAME_FONT_TCM_THUA);
    this.tfMoneyChange.textAlign = cc.TEXT_ALIGNMENT_CENTER;
    this.tfMoneyChange.setScale(1);
    this.setVisible(!1);
    this.addChild(this.tfMoneyChange);
    this.tfMoneyChange.retain();
  },
  setContentText: function (a) {
    this.tfMoneyChange.setString(a);
    this.tfMoneyChange.x = this.tfMoneyChange.getContentSize().width / 2;
  },
  doChangeMoney: function (a, b) {
    void 0 === a &&
      (a = this.player.x - this.tfMoneyChange.getContentSize().width / 2);
    void 0 === b && (b = this.player.y);
    this.x = a;
    this.y = b;
    isWebPlatform() &&
      (this.x = a > cc.winSize.width / 2 ? cc.winSize.width - 180 : 150);
    getCurrentScene().addChild(this);
    this.delay = 0;
    0 < this.player.numberHasBonus &&
      (this.delay =
        this.player.numberHasBonus * (CHANGE_MONEY_DURATION_ANIMATION + 0.5));
    var d = cc.callFunc(this.onCompleteFunc, this),
      e = cc.callFunc(this.onStartAnimation, this),
      f = cc.delayTime(0.5),
      g = cc.moveTo(
        CHANGE_MONEY_DURATION_ANIMATION,
        cc.p(
          this.tfMoneyChange.x,
          this.tfMoneyChange.y + CHANGE_MONEY_MOVE_TOP_Y
        )
      );
    cc.fadeTo(CHANGE_MONEY_DURATION_ANIMATION, 0);
    g = cc.spawn(g);
    d = cc.sequence(e, g, f, d);
    0 == this.delay
      ? this.tfMoneyChange.runAction(d)
      : this.tfMoneyChange.runAction(cc.sequence(cc.delayTime(this.delay), d));
    this.player.numberHasBonus++;
  },
  onCompleteFunc: function () {
    this.player.numberHasBonus--;
    this.setVisible(!1);
    this.removeFromParent();
    this.tfMoneyChange.release();
  },
  onStartAnimation: function () {
    this.tfMoneyChange.opacity = 255;
    this.setVisible(!0);
  },
});
var NUMBER_TIMOUT_BUSY_IND = 100;
BkBusyIndicator = cc.Layer.extend({
  bgInd: null,
  Ind: null,
  lbInd: null,
  rotateAngle: 0,
  count: 0,
  isHasTimeOut: !0,
  isShowing: !1,
  timeoutCallback: null,
  ctor: function () {
    this._super();
    var a = cc.winSize;
    this.Ind = new BkSprite("#" + res_name.busy_indicator);
    this.Ind.setScale(GAME_SCALE);
    this.Ind.x = a.width / 2;
    this.Ind.y = a.height / 2;
    this.addChild(this.Ind);
  },
  setIsHasTimeOut: function (a) {
    this.isHasTimeOut = a;
  },
  showIndicator: function () {
    var a = getCurrentScene();
    if (null != a) {
      a.addChild(this, TagOfLayer.AMIN);
      isWebPlatform() && (cc._canvas.style.cursor = "default");
      this.count = this.rotateAngle = 0;
      logMessage("showIndicator -\x3e pause all event");
      this.isShowing = !0;
      cc.eventManager.setEnabled(!1);
      var b = this;
      this.schedule(function () {
        b.count++;
        if (
          b.count == NUMBER_TIMOUT_BUSY_IND &&
          (logMessage("time out"),
          null != this.timeoutCallback && this.timeoutCallback(),
          b.isHasTimeOut)
        ) {
          BkBusyIndicatorManager.removeBusyIndicator();
          return;
        }
        b.Ind.setRotation(this.rotateAngle);
        b.rotateAngle += 30;
      }, 0.07);
    } else logMessage("current Scene null -\x3e don't show");
  },
  removeIndicator: function () {
    logMessage("removeIndicator -\x3e enable all event");
    this.isShowing
      ? ((this.isShowing = !1),
        cc.eventManager.setEnabled(!0),
        this.removeFromParent())
      : logMessage("Indicator not show -\x3e not need remove");
  },
  setTimeoutCallback: function (a) {
    this.timeoutCallback = a;
  },
});
cc.Node.prototype.createMouseScrollEvent = function (a) {
  return cc.EventListener.create({
    event: cc.EventListener.MOUSE,
    swallowTouches: !0,
    onMouseScroll: function (b) {
      var d = b.getCurrentTarget(),
        e = d.convertToNodeSpace(b.getLocation()),
        d = d.getContentSize(),
        d = cc.rect(0, 0, d.width, d.height);
      return cc.rectContainsPoint(d, e)
        ? ((b = cc.sys.isNative ? 6 * b.getScrollY() : -b.getScrollY()),
          (e = -(
            a._contentSize.height - a._innerContainer.getContentSize().height
          )),
          (d = a._innerContainer.getBottomBoundary()),
          (this._scrolledPercent = ((e + d) / e) * 100),
          (this._scrolledPercent =
            0 > this._scrolledPercent + b / 15
              ? 0
              : 100 < this._scrolledPercent + b / 15
              ? 100
              : this._scrolledPercent + b / 15),
          100 >= this._scrolledPercent &&
            0 <= this._scrolledPercent &&
            a.scrollToPercentVertical(this._scrolledPercent, 0.2, !0),
          !0)
        : !1;
    }.bind(this),
  }).clone();
};
var BkScrollView = ccui.ScrollView.extend({
    mouseListener: null,
    ctor: function () {
      this._super();
      this.setTouchEnabled(!0);
      this.setBounceEnabled(!0);
      cc.sys.os == cc.sys.OS_WINDOWS || cc.sys.os == cc.sys.OS_OSX
        ? (this.setScrollBarEnabled(!0),
          this.setScrollBarAutoHideEnabled(!0),
          this.initScroll())
        : this.setScrollBarEnabled(!1);
    },
    initScroll: function () {
      this.mouseListener = this.createMouseScrollEvent(this);
      this.mouseListener.retain();
      cc.eventManager.addListener(this.mouseListener, this);
    },
  }),
  BkListView = ccui.ListView.extend({
    mouseListener: null,
    ctor: function (a) {
      this._super();
      this.setTouchEnabled(!0);
      this.setBounceEnabled(!0);
      a && this.setContentSize(a);
      cc.sys.os == cc.sys.OS_WINDOWS || cc.sys.os == cc.sys.OS_OSX
        ? (this.setScrollBarEnabled(!0),
          this.setScrollBarAutoHideEnabled(!0),
          this.initScroll())
        : this.setScrollBarEnabled(!1);
    },
    initScroll: function () {
      this.mouseListener = this.createMouseScrollEvent(this);
      this.mouseListener.retain();
      cc.eventManager.addListener(this.mouseListener, this);
    },
  });
TITLED_STAR_SIZE = 12;
TITLED_STAR_MAX_NUM = 5;
BkTiledSprite = BkSprite.extend({ ctor: function (a) {} });
BkLabelSprite = cc.Sprite.extend({
  ctor: function (a) {
    this._super();
    this.createListLabel(a);
    this.anchorY = this.anchorX = 0;
  },
  createListLabel: function (a) {
    for (
      var b = 0, d = 0, e = new BkLabel(""), f = a[0], g = 0;
      g < a.length;
      g++
    ) {
      var h,
        k = a[g],
        m = new BkLabel(k.string, "Arial", k.fontSize, k.isBold);
      m.setTextColor(k.color);
      m.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      m.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
      0 == g
        ? ((m.x = m.getContentSize().width / 2),
          (h = m.getContentSize().width),
          (m.y = m.getContentSize().height / 2),
          (d += m.getContentSize().height))
        : f.line != k.line
        ? ((m.x = m.getContentSize().width / 2),
          (h = m.getContentSize().width),
          (m.y = e.y - m.getContentSize().height / 2 - 10),
          (d += m.getContentSize().height))
        : f.line == k.line
        ? ((m.x =
            e.x + e.getContentSize().width / 2 + m.getContentSize().width / 2),
          (h += m.getBoundingBox().width),
          (m.y = e.y))
        : logMessage("Check other case");
      h > b && (b = h);
      this.addChild(m);
      e = m;
      f = k;
    }
    this.width = b;
    this.height = d;
  },
});
BkLabelItem = cc.Class.extend({
  string: null,
  fontSize: null,
  color: null,
  isBold: null,
  line: null,
  x: null,
  y: null,
  ctor: function (a, b, d, e, f, g, h) {
    this.string = a;
    this.fontSize = b;
    this.color = d;
    this.isBold = f;
    this.line = e;
    this.x = g;
    this.y = h;
  },
});
BkSpriteLoader = BkSprite.extend({
  urlImg: "",
  ctor: function (a, b, d) {
    this._super(b, d);
    void 0 != a &&
      20 < a.length &&
      ((this.urlImg = a),
      isWebPlatform() || isFBInstantGame()
        ? this.loadImgFromUrlForWeb()
        : this.loadImgFromUrl());
  },
  loadImgFromUrlForWeb: function () {
    var a = this;
    cc.loader.loadImg(a.urlImg, { isCrossOrigin: !0 }, function (b, d) {
      if (d) {
        var e = new cc.Texture2D();
        e.initWithElement(d);
        e.handleLoadedTexture();
        var f = a.getBoundingBox().height;
        a.initWithTexture(e);
        a.setScale(f / a.getContentSize().height);
      }
    });
  },
  loadImgFromUrl: function () {
    var a = this;
    cc.textureCache.addImageAsync(
      this.urlImg,
      function (b) {
        if (b) {
          var d = a.getBoundingBox().height;
          a.initWithTexture(b);
          a.setScale(d / a.getContentSize().height);
        }
      },
      this
    );
  },
});
var BTN_INGAME_SIZE = 16;
BkBaseIngameLayer = cc.Layer.extend({
  numberAvarPos: 0,
  PlayerAvatar: [],
  background: null,
  btnStartGame: null,
  btnBack: null,
  btnReady: null,
  txtBetMoney: null,
  imgCoin: null,
  countdownText: null,
  countdownTextYoffset: 40,
  goldBox: null,
  settingBetmoneyWindow: null,
  chessScale: 0,
  btnChat: null,
  ctor: function () {
    this._super();
    this.initBaseElement();
  },
  initBaseElement: function () {
    this.removeAllChildren(!0);
    var a = cc.winSize,
      b = new BkSprite(res.ingame_background);
    b.scaleX = a.width / b.width;
    b.scaleY = a.height / b.height;
    b.x = a.width / 2;
    b.y = a.height / 2;
    this.addChild(b, 0);
    this.background = new BkSprite(res.chess_table);
    var b = (1 * a.width) / this.background.getWidth(),
      d = (0.65 * a.height) / this.background.getHeight();
    this.chessScale = b > d ? d : b;
    logMessage(
      "scaleW: " + b + " scaleH: " + d + " chessScale" + this.chessScale
    );
    isWebPlatform()
      ? ((this.chessScale = 1),
        (this.background.y = a.height / 2 - WEB_BOARD_DELTA_Y))
      : isFBInstantGame()
      ? (this.background.y = a.height / 2)
      : (this.background.y = a.height / 2 - BOARD_DELTA_Y * this.chessScale);
    this.background.setScale(this.chessScale);
    this.background.x = a.width / 2;
    this.addChild(this.background, 0);
    this.initTopBar();
    var e = this;
    this.btnReady = createBkButtonPlistNewTitle(
      res_name.start_butt,
      res_name.start_butt_press,
      res_name.start_butt,
      res_name.start_butt_press,
      "",
      a.width / 2,
      a.height / 2
    );
    Util.setBkButtonShadow(this.btnReady);
    this.btnReady.setTitleFontSize(18);
    this.btnReady.x = a.width / 2;
    this.btnReady.y = a.height / 2;
    this.addChild(this.btnReady);
    this.btnReady.setVisibleButton(!1);
    this.btnReady.addClickEventListener(function () {
      1e3 > BkTime.GetCurrentTime() - e.btnReady.lastTimeClick
        ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
        : ((e.btnReady.lastTimeClick = BkTime.GetCurrentTime()), e.onReady());
    });
    isWebPlatform() && this.btnReady.setScale(0.3);
  },
  _getinGameLogo: function () {
    var a = 33,
      b = 0;
    switch (BkGlobal.currentGameID) {
      case GID.XITO:
        b = 1;
        a -= 1;
        break;
      case GID.POKER:
        b = a;
        break;
      case GID.XI_DZACH:
        b = 2 * a;
        break;
      case GID.TLMN_DEM_LA:
        b = 3 * a;
        break;
      case GID.XAM:
        b = 4 * a;
        break;
      case GID.PHOM:
        b = 5 * a;
        break;
      case GID.MAU_BINH:
        b = 6 * a;
        break;
      case GID.LIENG:
        b = 7 * a;
        break;
      case GID.BA_CAY:
        b = 8 * a;
        break;
      case GID.TLMN:
        b = 9 * a;
        break;
      default:
        b = 0;
    }
    return new cc.rect(0, b - 1, 130, a);
  },
  clearCurrentGameGui: function () {
    for (var a = 0; a < this.getLogic().PlayerState.length; a++)
      this.getLogic().PlayerState[a].removeOnhandCard();
  },
  onStartGame: function () {
    this.resetAvatarForNewGame();
    this.clearCurrentGameGui();
    this.getLogic().isNeedInvitePlayers() ||
      (this.getLogic().isEnoughMoneyToStartGame() &&
        this.getLogic().ProcessPlayerStartGame());
  },
  onReady: function () {
    this.resetAvatarForNewGame();
    this.clearCurrentGameGui();
    this.getLogic().isEnoughMoneyToStartGame()
      ? this.getLogic().processPlayerReadyAction()
      : BkConnectionManager.inviteViewAds(GET_ADS_STATE.INVITE_VIEW_ADS);
  },
  resetAvatarForNewGame: function () {
    if (null != this.PlayerAvatar)
      for (var a = 0; a < this.PlayerAvatar.length; a++)
        this.PlayerAvatar[a].reset();
  },
  onTableLeavePush: function (a) {
    a = this.getAvatarByServerPos(a.serverPosition);
    null != a && a.clearAllMask();
  },
  initTopBar: function () {
    var a = this;
    this.btnBack = new BkButton(
      res_name.back,
      res_name.back,
      res_name.back,
      res_name.back_press,
      ccui.Widget.PLIST_TEXTURE
    );
    isWebPlatform() ||
      (this.btnBack = new BkButton(
        res_name.menu_butt,
        res_name.menu_butt_press,
        res_name.menu_butt,
        res_name.menu_butt,
        ccui.Widget.PLIST_TEXTURE
      ));
    var b = 5 * GAME_SCALE,
      d = 0.067 * cc.winSize.height;
    this.btnBack.setScaleM(GAME_SCALE);
    this.btnBack.x = b + (this.btnBack.getContentSize().width * GAME_SCALE) / 2;
    this.btnBack.y = d;
    isWebPlatform() &&
      ((this.btnBack.x =
        10 + (this.btnBack.getContentSize().width * GAME_SCALE) / 2),
      (this.btnBack.y =
        cc.winSize.height -
        WINDOW_MARGIN_TOP * GAME_SCALE -
        this.btnBack.getBoundingBox().height / 2 +
        2));
    this.addChild(this.btnBack);
    this.btnBack.addClickEventListener(function () {
      a.onBackClick();
    });
    this.btnChat = new BkButton(
      res_name.chat_butt,
      res_name.chat_butt_press,
      res_name.chat_butt,
      res_name.chat_butt,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnChat.setScaleM(GAME_SCALE);
    this.btnChat.y = this.btnBack.y;
    this.btnChat.x =
      this.btnBack.x +
      this.btnBack.getBoundingBox().width / 2 +
      this.btnChat.getBoundingBox().width / 2 +
      b;
    isFBInstantGame() &&
      (this.btnChat.x =
        this.btnBack.x +
        (this.btnBack.getContentSize().width / 2) * GAME_SCALE +
        (this.btnChat.getContentSize().width / 2) * GAME_SCALE +
        b);
    isWebPlatform() &&
      ((this.btnChat.x =
        cc.winSize.width -
        WINDOW_MARGIN_RIGHT -
        0.5 * this.btnChat.getContentSize().width),
      (this.btnChat.y =
        WINDOW_MARGIN_BOTTOM + 0.5 * this.btnChat.getContentSize().height));
    this.heartSprite = new BkHeartSprite(!0);
    this.heartSprite.setScale(GAME_SCALE);
    this.heartSprite.x =
      this.btnChat.x +
      this.btnChat.getBoundingBox().width / 2 +
      this.heartSprite.getBoundingBox().width / 2 +
      b;
    this.heartSprite.y =
      this.btnChat.y +
      this.btnChat.getBoundingBox().height / 2 -
      this.heartSprite.getBoundingBox().height / 2;
    isFBInstantGame()
      ? ((this.heartSprite.x =
          this.btnChat.x +
          (this.btnChat.getContentSize().width / 2) * GAME_SCALE +
          (this.heartSprite.getContentSize().width / 2) * GAME_SCALE +
          b),
        (this.heartSprite.y =
          this.btnChat.y +
          (this.btnChat.getContentSize().height / 2) * GAME_SCALE -
          (this.heartSprite.getContentSize().height / 2) * GAME_SCALE))
      : isWebPlatform() &&
        (this.heartSprite.setScale(0.6),
        (this.heartSprite.x =
          this.btnBack.x + this.heartSprite.getBoundingBox().width / 1.2),
        (this.heartSprite.y = this.btnBack.y - 6));
    this.addChild(this.heartSprite);
    isWebPlatform()
      ? ((b = cc.director.getWinSize()),
        cc.screen.fullScreen()
          ? (this.btnFullScreen = new BkButton(
              res_name.btn_scale2,
              res_name.btn_scale2,
              res_name.btn_scale2,
              res_name.btn_scale2_hover,
              ccui.Widget.PLIST_TEXTURE
            ))
          : (this.btnFullScreen = new BkButton(
              res_name.btn_scale,
              res_name.btn_scale,
              res_name.btn_scale,
              res_name.btn_scale_hover,
              ccui.Widget.PLIST_TEXTURE
            )),
        (this.btnFullScreen.x = b.width - 30),
        (this.btnFullScreen.y = b.height - 27),
        this.btnFullScreen.addClickEventListener(function () {
          cc.screen.fullScreen()
            ? (exitFullScreen(),
              a.btnFullScreen.loadTextures(
                res_name.btn_scale,
                res_name.btn_scale,
                res_name.btn_scale,
                res_name.btn_scale_hover,
                ccui.Widget.PLIST_TEXTURE
              ))
            : makeFullScreen(function () {
                cc.screen.fullScreen()
                  ? a.btnFullScreen.loadTextures(
                      res_name.btn_scale2,
                      res_name.btn_scale2,
                      res_name.btn_scale2,
                      res_name.btn_scale2_hover,
                      ccui.Widget.PLIST_TEXTURE
                    )
                  : a.btnFullScreen.loadTextures(
                      res_name.btn_scale,
                      res_name.btn_scale,
                      res_name.btn_scale,
                      res_name.btn_scale_hover,
                      ccui.Widget.PLIST_TEXTURE
                    );
              }, a);
        }),
        this.addChild(this.btnFullScreen),
        (b = Util.getSoundSetting()),
        (b = Util.getResNameIconSound(b)),
        (this.btnSoundSetting = new BkButton(
          b,
          b,
          b,
          b,
          ccui.Widget.PLIST_TEXTURE
        )),
        (this.btnSoundSetting.y = this.btnFullScreen.y),
        this.btnSoundSetting.addClickEventListener(function () {
          var b = !Util.getSoundSetting(),
            d = Util.getResNameIconSound(b);
          Util.setSoundSetting(b);
          a.btnSoundSetting.loadTextures(d, d, d, d, ccui.Widget.PLIST_TEXTURE);
        }),
        this.addChild(this.btnSoundSetting),
        (this.btnSoundSetting.x =
          this.btnFullScreen.x - this.btnFullScreen.width - 10),
        (this.btnScreenShot = new BkButton(
          res_name.btn_camera,
          res_name.btn_camera,
          res_name.btn_camera,
          res_name.btn_camera_hover,
          ccui.Widget.PLIST_TEXTURE
        )),
        (this.btnScreenShot.y = this.btnFullScreen.y),
        this.btnScreenShot.addClickEventListener(function () {
          makeScreenShot();
        }),
        this.addChild(this.btnScreenShot),
        (this.btnScreenShot.x =
          this.btnSoundSetting.x - this.btnSoundSetting.width - 10))
      : (this.addChild(this.btnChat),
        this.btnChat.addClickEventListener(function () {
          a.onChatClick();
        }));
  },
  onChatClick: function () {
    var a = new BkChatLayerMobile();
    getCurrentScene().addChild(a);
  },
  onBackClick: function () {
    this.getLogic().processLeaveTableRequest();
  },
  onSettingClick: function () {},
  getLogic: function () {
    return this.getParent().getLogic();
  },
  disableEventStartGameButton: function () {
    this.btnReady.setEnableButton(!1);
  },
  enableEventStartGameButton: function () {
    this.btnReady.setEnableButton(!0);
  },
  hideStartGameButton: function () {
    this.btnReady.setVisibleButton(!1);
  },
  onDealCard: function () {
    this.clearPlayerReadyMark();
    this.hideStartGameButton();
    this.removeCountDownText();
    this.startGoldBox();
  },
  clearPlayerReadyMark: function () {
    if (null != this.PlayerAvatar)
      for (var a = 0; a < this.PlayerAvatar.length; a++)
        this.PlayerAvatar[a].clearImgReady();
  },
  removePlayerAvatar: function (a) {
    if ((a = this.PlayerAvatar[a]))
      a.setPlayerdata(null), a.setClientState(null);
  },
  onLeaveDuringGame: function (a) {
    a = a.serverPosition;
    this.removePlayerAvatar(this.getLogic().getPlayerDisplayLocation(a));
  },
  OnGameTableSyn: function () {
    this.onUpdateTableMoneyStatus();
    this.hideStartGameButton();
    this.getLogic().isInGameProgress() &&
      (this.clearPlayerReadyMark(), this.removeCountDownText());
    this.getLogic().isInGameProgress() || this.showStartGameButton();
    Util.loadChatRes();
  },
  onUpdatePlayerLevel: function (a, b) {
    var d = this.getLogic().getPlayerDisplayLocation(a);
    null != this.PlayerAvatar && this.PlayerAvatar[d].setPlayerdata(b, !0);
  },
  showStartGameButton: function (a) {
    logMessage("showStartGameButton");
    this.hideStartGameButton();
    if (!this.getLogic().isInGameProgress()) {
      var b = gameLogic.getMyClientState();
      (b && !0 === b.isObserver) ||
        ((b = !0),
        void 0 != a && (b = a),
        this.getLogic().isMeBossTable() ||
          (b && this.getLogic().showCountDownForMe(),
          (a = this.getLogic().getMyClientState()),
          null != a
            ? a.status != PLAYER_STATE_READY &&
              this.btnReady.setVisibleButton(!0)
            : this.btnReady.setVisibleButton(!0)));
    }
  },
  _getLocationPos: function (a) {
    var b = this.getLogic().maxPlayer;
    return _getAvatarLocationPos(a, b, BkGlobal.currentGameID);
  },
  displayPlayerAvatar: function () {
    logMessage("displayPlayerAvatar");
    var a = this.getLogic(),
      b;
    null != this.PlayerAvatar &&
      0 < this.PlayerAvatar.length &&
      (logMessage(this.PlayerAvatar.length), this.clearAllAvatar());
    for (var d = null, e = 0; e < a.maxPlayer; e++)
      (b = a.getPlayerDisplayAt(e)),
        null != b
          ? ((d = new BkPlayer(b.getUserInfo(), b.status)),
            logMessage(d.playerData.getUserName() + " i:" + e))
          : (d = new BkPlayer(null, -1)),
        null != d &&
          (d.setGameTable(a),
          d.setClientState(b),
          this.PlayerAvatar.push(d),
          this.addChild(d),
          (d.x = this._getLocationPos(e).x),
          (d.y = this._getLocationPos(e).y)),
        BkGlobal.isRoomTypeSolo() &&
          (6 != a.maxPlayer ||
            (1 != e && 2 != e && 4 != e && 5 != e) ||
            ((d.visible = !1), d.clearEventListener()),
          4 != a.maxPlayer ||
            (1 != e && 3 != e) ||
            ((d.visible = !1), d.clearEventListener()));
  },
  clearAllAvatar: function () {
    for (var a; 0 < this.PlayerAvatar.length; )
      (a = this.PlayerAvatar[0]),
        a.removeFromParent(),
        this.PlayerAvatar.splice(0, 1);
  },
  showAnimationUpdateMoney: function (a, b, d) {
    0 != a &&
      ((d = new BkTextFieldChangeMoney(d, a)),
      (b += "\n"),
      (b =
        0 < a
          ? b + ("+ " + convertStringToMoneyFormat(a, !0))
          : b + convertStringToMoneyFormat(a, !0)),
      d.setContentText(b),
      d.doChangeMoney());
  },
  UpdatePlayerMoney: function (a, b, d) {
    var e;
    e = this.getLogic().getPlayerDisplayLocation(a.serverPosition);
    void 0 == d && (d = "");
    e = this.PlayerAvatar[e];
    null != e &&
      (e.updateMoney(a.getCurrentCash()),
      this.showAnimationUpdateMoney(b, d, e));
  },
  removeGoldBox: function () {
    null != this.goldBox && this.goldBox.removeSelf();
  },
  showGoldBoxWithRemainTime: function (a) {
    0 <= a &&
      (null != this.goldBox && this.goldBox.removeSelf(),
      (this.goldBox = new BkGoldBoxSprite()),
      (this.goldBox.x = -100),
      (this.goldBox.y = -100),
      this.goldBox.showGoldBoxWith(a),
      (a = this.getLogic().getMyClientState()),
      null != a &&
        (a.isPlaying && !a.isFinishedGame
          ? this.goldBox.startCountDown()
          : this.goldBox.stopCountDown()),
      this.addChild(this.goldBox));
  },
  stopGoldBoxCountDown: function () {
    null != this.goldBox && this.goldBox.stopCountDown();
  },
  startGoldBoxCountDown: function () {
    null != this.goldBox && this.goldBox.startCountDown();
  },
  onPlayerStatusUpdate: function (a, b) {
    var d = this.PlayerAvatar[a];
    null != d &&
      (d.setStatus(b),
      this.getLogic().isInGameProgress() ||
        (logMessage("show start game button update status " + a),
        0 == a && this.showStartGameButton(!1)));
  },
  onTableInfoReturn: function () {
    this.displayPlayerAvatar();
    this.onUpdateTableMoneyStatus();
  },
  onUpdateTableMoneyStatus: function () {},
  ShowCicleCountDownTimeOnActivePlayer: function (a) {
    logMessage(
      "ShowCicleCountDownTimeOnActivePlayer GS: " + this.getLogic().gameStatus
    );
    for (var b = 0; b < this.getLogic().maxPlayer; b++) {
      var d = this.PlayerAvatar[b];
      null != d && d.stopCountDown();
    }
    b = this.getLogic().getActivePlayerPos();
    logMessage("activePlayerPos: " + b);
    b = this.getAvatarByServerPos(b);
    null != b && ((d = 29), void 0 != a && (d = a), b.showCountDownTime(d));
  },
  removeAvatarByServerPos: function (a) {
    for (var b = 0; b < this.PlayerAvatar.length; b++) {
      var d = this.PlayerAvatar[b];
      null != d.clientState &&
        d.clientState.serverPosition == a &&
        (this.PlayerAvatar[b].removeFromParent(),
        this.PlayerAvatar.splice(b, 1));
    }
  },
  getAvatarByServerPos: function (a) {
    for (var b = 0; b < this.PlayerAvatar.length; b++) {
      var d = this.PlayerAvatar[b];
      if (null != d.clientState && d.clientState.serverPosition == a) return d;
    }
    return null;
  },
  getIndexOfAvatarByName: function (a) {
    for (var b = 0; b < this.PlayerAvatar.length; b++)
      if (this.PlayerAvatar[b].getPlayerName() == a) return b;
    return -1;
  },
  removeCountDownText: function () {
    null != this.countdownText &&
      (this.countdownText.removeCountDown(), (this.countdownText = null));
  },
  showCountDownForMe: function (a, b) {
    if (!this.getLogic().isInGameProgress()) {
      this.removeCountDownText();
      var d = !1;
      if (
        BkGlobal.currentGameID == GID.CO_TUONG ||
        BkGlobal.currentGameID == GID.CO_UP
      )
        d = !0;
      var e = this,
        f = this.getLogic().getMyClientState();
      null != f &&
        f.status != PLAYER_STATE_READY &&
        (void 0 != b && !0 == b
          ? ((this.countdownText = new BkCountDownText(30, !1, !0, d)),
            this.countdownText.setCallBackfunction(function () {
              e.removeCountDownText();
              e.onReady();
            }))
          : ((this.countdownText = new BkCountDownText(30, !1, !1, d)),
            this.countdownText.setCallBackfunction(function () {
              e.removeCountDownText();
            })),
        this.addChild(this.countdownText, TagOfLayer.CountDownText),
        this.countdownText.setScale(isWebPlatform() ? 0.5 : GAME_SCALE),
        (this.countdownText.x = cc.winSize.width / 2),
        (this.countdownText.y = this.btnReady.y + this.countdownTextYoffset),
        this.countdownText.showCountDownText(a));
    }
  },
  showCountDownWithBG: function (a, b, d) {
    var e = this;
    this.removeCountDownText();
    this.countdownText = new BkCountDownText(30, !0);
    this.addChild(this.countdownText);
    void 0 == b && (b = cc.winSize.width / 2);
    void 0 == d && (d = 340);
    this.countdownText.x = b;
    this.countdownText.y = d;
    this.countdownText.showCountDownText(a);
    this.countdownText.setCallBackfunction(function () {
      e.removeCountDownText();
    });
    null != this.getLogic().getMyClientState() &&
      this.getLogic().getMyClientState().status != PLAYER_STATE_NOT_READY &&
      BkGlobal.currentGameID == GID.MAU_BINH &&
      ((this.countdownText.y = d + 50),
      this.countdownText.setCallbackForMauBinh(function () {
        e.onAutoSendDiscard();
      }));
  },
  resetAllPlayerAvatar: function () {
    if (null != this.PlayerAvatar && 0 != this.PlayerAvatar.length)
      for (var a = 0; a < this.getLogic().maxPlayer; a++) {
        var b = this.PlayerAvatar[a];
        null != b && b.stopCountDown();
      }
  },
  startGoldBox: function () {
    this.startGoldBoxCountDown();
  },
  stopGoldBox: function () {
    this.stopGoldBoxCountDown();
  },
  OnFinishedGame: function () {
    this.resetAllPlayerAvatar();
    this.stopGoldBox();
  },
  onPrepareNewGame: function () {
    logMessage("onPrepareNewGame base layer");
    this.resetAllPlayerAvatar();
    this.showStartGameButton();
  },
  onTableJoin: function (a, b) {
    logMessage(
      "onTableJoin " +
        this.PlayerAvatar.length +
        " - " +
        this.getLogic().maxPlayer
    );
    if (this.PlayerAvatar.length < this.getLogic().maxPlayer)
      this.displayPlayerAvatar();
    else {
      var d = this.PlayerAvatar[b];
      null == d
        ? this.displayPlayerAvatar()
        : (d.setStatus(a.status),
          d.setPlayerdata(a.getUserInfo()),
          d.setClientState(a));
    }
  },
  getCustomGameButtonList: function () {
    return null;
  },
  showRegExitSplash: function (a) {
    this.btnBack.setBlinking(a, res_name.registerExit, 1);
  },
  onBackAndroidIngameClick: function () {
    logMessage("onBackAndroidIngameClick BkBaseIngameLayer");
    BkLogicManager.getInGameLogic().processLeaveTableRequest();
  },
  onRemoveChatLayer: function () {},
});
BOARD_CELL_HEIGHT = BOARD_CELL_WIDTH = BOARD_HEIGHT_RIVER = 80;
BOARD_DELTA_Y = 30;
WEB_PLAYER_AVAR_MARGIN_TP = 10;
WEB_PLAYER_AVAR_MARGIN_RIGHT = WEB_PLAYER_AVAR_MARGIN_LF = 40;
WEB_BOARD_HEIGHT_RIVER = 65;
WEB_BOARD_CELL_WIDTH = 56.875;
WEB_BOARD_CELL_HEIGHT = 57;
WEB_BOARD_DELTA_Y = 0;
TOAST_MSG_YPOS = 190.5;
TIME_SHOW_SPRITE_CHESS_INGAME = 2;
BkChessBaseIngameLayer = BkBaseIngameLayer.extend({
  padding: 0,
  colWidth: 0,
  rowHeight: 0,
  chessPieces: null,
  pieceSelected: -1,
  colorAllowTouch: -1,
  currentColorPlaying: -1,
  firstPlayPosition: null,
  lastPlayPosition: null,
  isReverse: null,
  isRealReverse: null,
  batdauchoiSprite: null,
  defaultChessTime: null,
  oneTurnChessTime: null,
  btnObserver: null,
  btnBetMax: null,
  btnContinue: null,
  btnSurrender: null,
  btnOfferDraw: null,
  selectedSprite: null,
  lastMoveSpriteStart: null,
  lastMoveSpriteFinish: null,
  hoaSprite: null,
  chieutuongSprite: null,
  moveableShowSprite: null,
  chessRule: null,
  tableBetMoneyText: null,
  tableRedStatus: null,
  firstEmptyAvatar: null,
  secondEmptyAvatar: null,
  canTakenList: null,
  emoChatViewer: null,
  txtChatViewer: null,
  gameStatusLabel: null,
  chatContLayer: null,
  btnShare: null,
  lmColStart: -1,
  lmRowStart: -1,
  lmColFinish: -1,
  lmRowFinish: -1,
  ctor: function () {
    this._super();
    this.initChessTable();
    this.createChessPieces();
    this.initButtons();
    this.initSelectedSprite();
    this.updateTableItem();
  },
  initTopBar: function () {
    this._super();
  },
  initChessTable: function () {
    cc.spriteFrameCache.addSpriteFrames(
      res.chess_common_plist,
      res.chess_common_img
    );
    var a = this;
    this.background.setOnlickListenner(function (b, d) {
      var e = d.getCurrentTarget().convertToNodeSpace(b.getLocation());
      a.touchUpHandle(e.x, e.y);
    });
    isWebPlatform() && this.initTableRedStatus();
  },
  initTableRedStatus: function () {
    this.tableRedStatus = new BkSprite("#" + res_name.ChessRedStatus);
    this.tableRedStatus.x = this.background.x;
    this.tableRedStatus.y = this.background.y;
    this.tableRedStatus.setScale(575 / this.tableRedStatus.width);
    this.tableRedStatus.setVisible(!1);
    this.addChild(this.tableRedStatus);
  },
  touchUpHandle: function (a, b) {
    var d = this.getColIndex(a),
      e = this.getRowIndex(b);
    logMessage("Touch: " + a + "-" + b + " point: " + e + "-" + d);
    if (
      this.getLogic().gameStatus == GAME_STATE_PLAYING &&
      !(
        0 > this.colorAllowTouch ||
        this.currentColorPlaying != this.colorAllowTouch ||
        0 > d ||
        0 > e
      )
    ) {
      for (var f = -1, g = 0; 32 > g; g++)
        if (
          !this.chessPieces[g].isDead &&
          this.chessPieces[g].colIndex == d &&
          this.chessPieces[g].rowIndex == e
        ) {
          f = g;
          break;
        }
      if (0 <= f && this.chessPieces[f].chessColor == this.colorAllowTouch)
        f != this.pieceSelected
          ? (this.unSelectPiece(), this.selectPiece(f))
          : this.unSelectPiece();
      else if (0 <= this.pieceSelected) {
        var f = this.chessPieces[this.pieceSelected].colIndex,
          g = d,
          h = this.chessPieces[this.pieceSelected].rowIndex,
          k = e;
        this.isReverse && ((h = 9 - h), (k = 9 - k), (f = 8 - f), (g = 8 - g));
        this.isMovablePoint(d, e) &&
          this.getLogic().processMovePiece(f, h, g, k);
      }
    }
  },
  isMovablePoint: function (a, b) {
    var d;
    for (d = 0; d < this.moveableShowSprite.length; d++) {
      var e = this.moveableShowSprite[d];
      if (e && 0 < e.x && e.col == a && e.row == b) return !0;
    }
    for (d = 0; d < this.canTakenList.length; d++)
      if (((e = this.canTakenList[d]), e[0] == a && e[1] == b)) return !0;
    return !1;
  },
  createChessPieces: function () {
    this.chessPieces = [];
    for (var a = 0; 32 > a; a++) {
      var b = new BkChessPieceSprite(a);
      this.chessPieces.push(b);
      b.x = -100;
      b.y = -100;
      this.addChild(b, 32);
    }
  },
  initButtons: function () {
    var a = this;
    this.reorderChild(this.btnReady, 36);
    this.btnReady.loadTextures(
      res_name.start_butt,
      res_name.start_butt_press,
      res_name.start_butt,
      res_name.start_butt,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnReady.setTitleText("");
    this.btnReady.setScale(GAME_SCALE);
    isWebPlatform() &&
      ((this.btnSurrender = createBkButtonPlist(
        res_name.Chess_btn_xinthua_normal,
        res_name.Chess_btn_xinthua_pressed,
        res_name.Chess_btn_xinthua_normal,
        res_name.Chess_btn_xinthua_hover
      )),
      this.btnSurrender.setTitleText(""),
      this.btnSurrender.setPosition(-100, -100),
      this.btnSurrender.addClickEventListener(function () {
        var b = a.getLogic(),
          d = b.gameStatus,
          b = b.getMyClientState();
        d == GAME_STATE_PLAYING &&
          b.status != PLAYER_STATE_NOT_READY &&
          a.confirmSurrender();
      }),
      this.addChild(this.btnSurrender),
      (this.btnOfferDraw = createBkButtonPlist(
        res_name.Chess_btn_cauhoa_normal,
        res_name.Chess_btn_cauhoa_pressed,
        res_name.Chess_btn_cauhoa_normal,
        res_name.Chess_btn_cauhoa_hover
      )),
      this.btnOfferDraw.setTitleText(""),
      this.btnOfferDraw.setPosition(-100, -100),
      this.btnOfferDraw.addClickEventListener(function () {
        var b = a.getLogic(),
          d = b.gameStatus,
          b = b.getMyClientState();
        d == GAME_STATE_PLAYING &&
        b.status != PLAYER_STATE_NOT_READY &&
        b.chessColor == a.currentColorPlaying
          ? a.confirmOfferDraw()
          : d == GAME_STATE_PLAYING &&
            b.status != PLAYER_STATE_NOT_READY &&
            ((d = cc.director.getWinSize()),
            showToastMessage(
              "B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1ec1 ngh\u1ecb h\u00f2a khi \u0111\u1ebfn l\u01b0\u1ee3t \u0111i",
              d.width / 2,
              d.height / 2,
              3
            ));
      }),
      this.addChild(this.btnOfferDraw));
    if (isFBInstantGame()) {
      this.btnShare = createBkButtonPlist(
        res_name.setting_fb_butt,
        res_name.setting_fb_butt,
        res_name.setting_fb_butt,
        res_name.setting_fb_butt
      );
      this.btnShare.setScale(GAME_SCALE);
      this.btnShare.setPosition(
        0.9 * cc.winSize.width,
        0.95 * cc.winSize.height
      );
      var b = this.background.getWidth(),
        d = 0.968 * this.background.getHeight(),
        e = this.background.x - b / 2,
        f =
          this.background.y - this.background.getHeight() / 2 + 20 * GAME_SCALE;
      this.btnShare.addClickEventListener(function () {
        1e3 > BkTime.GetCurrentTime() - a.btnShare.lastTimeClick
          ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
          : (BkFbInstant.createShareInGame(
              function (a) {
                a && BkFbInstant.shareIngamePlay(a);
              },
              e,
              f,
              b,
              d
            ),
            (a.btnShare.lastTimeClick = BkTime.GetCurrentTime()));
      });
      this.addChild(this.btnShare);
    }
  },
  onClickBtnSurrender: function () {
    logMessage("onClickBtnSurrender");
    var a = this.getLogic(),
      b = a.gameStatus,
      a = a.getMyClientState();
    b == GAME_STATE_PLAYING &&
      a.status != PLAYER_STATE_NOT_READY &&
      this.confirmSurrender();
  },
  onClickBtnOfferDraw: function () {
    logMessage("onClickBtnOfferDraw");
    var a = this.getLogic(),
      b = a.gameStatus,
      a = a.getMyClientState();
    b == GAME_STATE_PLAYING &&
    a.status != PLAYER_STATE_NOT_READY &&
    a.chessColor == this.currentColorPlaying
      ? this.confirmOfferDraw()
      : b == GAME_STATE_PLAYING &&
        a.status != PLAYER_STATE_NOT_READY &&
        showToastMessage(
          "B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1ec1 ngh\u1ecb h\u00f2a khi \u0111\u1ebfn l\u01b0\u1ee3t \u0111i",
          cc.winSize.width / 2,
          cc.winSize.height / 2,
          3,
          300
        );
  },
  initSelectedSprite: function () {
    this.selectedSprite = getSpriteFromImage("#" + res_name.SelectedPiece);
    this.selectedSprite.setPosition(-100, -100);
    this.selectedSprite.scale = this.chessScale;
    this.addChild(this.selectedSprite);
    this.moveableShowSprite = [];
    for (var a = 0; 20 > a; a++)
      (this.moveableShowSprite[a] = getSpriteFromImage(
        "#" + res_name.MovablePiece
      )),
        this.moveableShowSprite[a].setPosition(-100, -100),
        (this.moveableShowSprite[a].row = -1),
        (this.moveableShowSprite[a].col = -1),
        (this.moveableShowSprite[a].scaleX = this.background.scaleX),
        (this.moveableShowSprite[a].scaleY = this.background.scaleY),
        this.addChild(this.moveableShowSprite[a]);
    var a = "#" + res_name.LastMovePieceStart,
      b = GAME_SCALE;
    isWebPlatform() && ((a = "#" + res_name.LastMovePiece), (b = 0.4));
    this.lastMoveSpriteStart = getSpriteFromImage(a);
    this.lastMoveSpriteStart.setPosition(-100, -100);
    this.lastMoveSpriteStart.scale = b;
    this.addChild(this.lastMoveSpriteStart);
    this.lastMoveSpriteFinish = getSpriteFromImage(
      "#" + res_name.LastMovePiece
    );
    this.lastMoveSpriteFinish.setPosition(-100, -100);
    this.lastMoveSpriteFinish.scale = isWebPlatform() ? 0.95 : this.chessScale;
    this.addChild(this.lastMoveSpriteFinish);
    this.gameStatusLabel = new BkGameStatusLabelSprite(this.getCenterY());
    this.addChild(this.gameStatusLabel, 40);
    this.gameStatusLabel.showWaitingGameStatus(!1);
  },
  initBatdauEffect: function () {
    this.batdauchoiSprite = new BkBatDauEffectSprite();
    this.batdauchoiSprite.setPosition(
      this.background.x + 0.5,
      this.background.y + 0.5
    );
    this.batdauchoiSprite.setVisible(!1);
    this.addChild(this.batdauchoiSprite, 40);
  },
  updateTableItem: function () {
    this.hoaSprite = getSpriteFromImage("#" + res_name.HoaState);
    this.hoaSprite.setPosition(this.background.x, this.background.y);
    this.hoaSprite.setVisible(!1);
    this.addChild(this.hoaSprite, TagOfLayer.CountDownText + 1);
    this.chieutuongSprite = getSpriteFromImage("#" + res_name.ChieuTuongState);
    this.chieutuongSprite.setPosition(this.background.x, this.background.y);
    this.chieutuongSprite.setVisible(!1);
    this.addChild(this.chieutuongSprite, 35);
    this.initBatdauEffect();
    isWebPlatform() ||
      (this.hoaSprite.setScale(GAME_SCALE),
      this.chieutuongSprite.setScale(GAME_SCALE),
      this.batdauchoiSprite.setScale(GAME_SCALE));
  },
  getCenterY: function () {
    return this.background.y;
  },
  changeButtonState: function () {
    logMessage("changeButtonState");
    var a = this.getLogic(),
      b = a.gameStatus;
    if ((a = a.getMyClientState())) {
      var d = a.status,
        e = cc.director.getWinSize(),
        f = this.getCenterY();
      logMessage("gameStatus: " + b);
      switch (b) {
        case GAME_STATE_READY:
          logMessage("gameStatus: GAME_STATE_READY");
          logMessage("playerRole: " + d);
          this.hideSurrenderAndDrawButton();
          d == PLAYER_STATE_TABLE_OWNER
            ? logMessage("playerRole: PLAYER_STATE_TABLE_OWNER")
            : d == PLAYER_STATE_READY
            ? (logMessage("playerRole: PLAYER_STATE_READY"),
              this.hideChessTableButtons())
            : (logMessage("else"),
              this.hideChessTableButtons(),
              a.isObserver ||
                (logMessage("!currentPlayer.isObserver"),
                this.gameStatusLabel.showWaitingGameStatus(!1),
                this.btnReady.setVisibleButton(!0),
                this.btnReady.setPosition(e.width / 2, f)));
          break;
        case GAME_STATE_PLAYING:
          logMessage("gameStatus: GAME_STATE_PLAYING");
          this.hideChessTableButtons();
          this.hideSurrenderAndDrawButton();
          d != PLAYER_STATE_NOT_READY && this.showSurrenderAndDrawButton();
          break;
        case GAME_STATE_FINISH:
          logMessage("gameStatus: GAME_STATE_FINISH");
          0 > a.tablePosition
            ? this.hideChessTableButtons()
            : this.btnReady.setPosition(e.width / 2, f);
          this.hideSurrenderAndDrawButton();
          break;
        default:
          logMessage("default " + b);
      }
    }
  },
  canSitDown: function () {
    var a = this.getLogic();
    if (0 <= a.getMyClientState().tablePosition) return !1;
    for (var b = 0, d = 0; d < a.maxPlayer; d++) {
      var e = a.PlayerState[d];
      e && 0 <= e.tablePosition && b++;
    }
    return 2 > b;
  },
  createContinueButton: function () {
    var a = this;
    this.btnContinue.addClickEventListener(function () {
      a.getLogic().processContinueGame();
    });
  },
  createStandUpButton: function () {
    var a = this;
    this.btnObserver.loadTextures(
      res_name.Chess_btn_dunglen_normal,
      res_name.Chess_btn_dunglen_pressed,
      res_name.Chess_btn_dunglen_normal,
      res_name.Chess_btn_dunglen_hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnObserver.addClickEventListener(function () {
      a.getLogic().processUpdateObserverStatus(!0);
    });
  },
  createSitDownButton: function () {
    var a = this;
    this.btnObserver.loadTextures(
      res_name.Chess_btn_ngoixuong_normal,
      res_name.Chess_btn_ngoixuong_pressed,
      res_name.Chess_btn_ngoixuong_normal,
      res_name.Chess_btn_ngoixuong_hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnObserver.addClickEventListener(function () {
      var b = a.getLogic();
      b.getMyClientState().UserInfo.getMoney() < b.getTableBetMoney()
        ? showToastMessage(
            "B\u1ea1n kh\u00f4ng \u0111\u1ee7 ti\u1ec1n \u0111\u1ec3 ch\u01a1i",
            cc.winSize.width / 2,
            TOAST_MSG_YPOS,
            3,
            200
          )
        : b.processUpdateObserverStatus(!1);
    });
  },
  hideChessTableButtons: function () {
    this.btnReady.setPosition(-100, -100);
  },
  resetChessPieces: function () {
    for (var a = 0; 32 > a; a++)
      (this.chessPieces[a].isReverseColor = this.isReverse),
        this.chessPieces[a].initByListIndex(a);
  },
  removeOtherItemsFromTable: function () {
    this.unSelectPiece();
    this.hideLastMoveSprite();
  },
  hideLastMoveSprite: function () {
    this.lastMoveSpriteStart.setPosition(-100, -100);
    this.lastMoveSpriteFinish.setPosition(-100, -100);
  },
  getColIndex: function (a) {
    for (
      var b = isWebPlatform() ? WEB_CHESS_WIDTH : CHESS_WIDTH,
        d = this.background.x - this.background.getWidth() / 2,
        e = 0;
      9 > e;
      e++
    ) {
      var f = this.getPosX(e);
      if (
        a * this.background.scaleX + d > f - (b * this.background.scaleX) / 2 &&
        a * this.background.scaleX + d < f + (b * this.background.scaleX) / 2
      )
        return e;
    }
    return -1;
  },
  getRowIndex: function (a) {
    for (
      var b = isWebPlatform() ? WEB_CHESS_HEIGHT : CHESS_HEIGHT,
        d = this.background.y - this.background.getHeight() / 2,
        e = 0;
      10 > e;
      e++
    ) {
      var f = this.getPosY(e);
      if (
        a * this.background.scaleY + d > f - (b * this.background.scaleY) / 2 &&
        a * this.background.scaleY + d < f + (b * this.background.scaleY) / 2
      )
        return e;
    }
    return -1;
  },
  hideSurrenderAndDrawButton: function () {
    isWebPlatform() &&
      (this.btnOfferDraw.setPosition(-100, -100),
      this.btnSurrender.setPosition(-100, -100));
  },
  showSurrenderAndDrawButton: function () {
    isWebPlatform() &&
      (this.btnOfferDraw.setPosition(
        108.5,
        cc.winSize.height /
          (BkGlobal.currentGameID == GID.CO_TUONG ? 1.94 : 3.5)
      ),
      this.btnSurrender.setPosition(
        110.5,
        this.btnOfferDraw.y - this.btnSurrender.getContentSize().height / 2 - 20
      ));
  },
  rotateActionChess: null,
  selectPiece: function (a) {
    this.pieceSelected = a;
    this.selectedSprite.setPosition(
      this.getPosX(this.chessPieces[this.pieceSelected].colIndex),
      this.getPosY(this.chessPieces[this.pieceSelected].rowIndex) + 1
    );
    this.rotateActionChess = cc.rotateBy(2, 360).repeatForever();
    this.selectedSprite.runAction(this.rotateActionChess);
    this.showMovablePosition(a);
  },
  unSelectPiece: function () {
    0 > this.pieceSelected ||
      (this.selectedSprite.setPosition(-100, -100),
      this.selectedSprite.stopAction(this.rotateActionChess),
      (this.rotateActionChess = null),
      this.hideMovablePosition(),
      (this.pieceSelected = -1));
  },
  showMovablePosition: function (a) {
    for (var b = Array(9), d = 0; 10 > d; d++) b[d] = Array(10);
    this.rebuildBoard(b);
    d = this.createPiece(a);
    this.canTakenList = [];
    for (var e = 0, f = 0; 90 > f; f++)
      if (this.isMovablePosition(d, a, f, b)) {
        var g = f % 9,
          h = Math.floor(f / 9);
        if (this.isLoMatVua(d, a, g, h, b) || this.isLoiHetCo(0, d, a, g, h, b))
          this.moveableShowSprite[e].setPosition(
            this.getPosX(g),
            this.getPosY(h)
          ),
            (this.moveableShowSprite[e].row = h),
            (this.moveableShowSprite[e].col = g),
            this.moveableShowSprite[e].setVisible(!1);
        else {
          for (var k = !1, m = 16; 32 > m; m++)
            if (
              !this.chessPieces[m].isDead &&
              this.chessPieces[m].colIndex == g &&
              this.chessPieces[m].rowIndex == h
            ) {
              k = !0;
              this.chessPieces[m].showCanBeTakenSprite(!0);
              this.canTakenList.push([g, h]);
              break;
            }
          k ||
            (this.moveableShowSprite[e].setPosition(
              this.getPosX(g),
              this.getPosY(h)
            ),
            (this.moveableShowSprite[e].row = h),
            (this.moveableShowSprite[e].col = g),
            this.moveableShowSprite[e].setVisible(!0));
        }
        e++;
      }
  },
  rebuildBoard: function (a) {
    var b;
    for (b = 0; 9 > b; b++) for (var d = 0; 10 > d; d++) a[b][d] = -1;
    for (b = 0; 32 > b; b++)
      this.chessPieces[b].isDead ||
        (a[this.chessPieces[b].colIndex][this.chessPieces[b].rowIndex] = b);
  },
  createPiece: function (a) {
    var b = new BkChessPiece(a);
    b.chessType = this.chessPieces[a].chessType;
    b.chessColor = this.chessPieces[a].chessColor;
    b.colIndex = this.chessPieces[a].colIndex;
    b.rowIndex = this.chessPieces[a].rowIndex;
    return b;
  },
  hideMovablePosition: function () {
    for (var a = 0; 20 > a; a++)
      this.moveableShowSprite[a].setPosition(-100, -100),
        (this.moveableShowSprite[a].row = -1),
        (this.moveableShowSprite[a].col = -1);
    for (a = 16; 32 > a; a++) this.chessPieces[a].showCanBeTakenSprite(!1);
  },
  isMovablePosition: function (a, b, d, e) {
    return a.canMoveTo(d, e) ? !0 : !1;
  },
  isLoMatVua: function (a, b, d, e, f) {
    var g = f[d][e];
    f[d][e] = b;
    f[a.colIndex][a.rowIndex] = -1;
    var h = a.colIndex,
      k = a.rowIndex;
    a.colIndex = d;
    a.rowIndex = e;
    this.chessPieces[b].colIndex = d;
    this.chessPieces[b].rowIndex = e;
    var m = !0,
      n = this.chessPieces[0].colIndex;
    n != this.chessPieces[16].colIndex && (m = !1);
    for (
      var p = this.chessPieces[0].rowIndex + 1;
      p < this.chessPieces[16].rowIndex;
      p++
    )
      0 <= f[n][p] && (m = !1);
    this.chessPieces[b].colIndex = h;
    this.chessPieces[b].rowIndex = k;
    a.colIndex = h;
    a.rowIndex = k;
    f[a.colIndex][a.rowIndex] = f[d][e];
    f[d][e] = g;
    return m;
  },
  isLoiHetCo: function (a, b, d, e, f, g) {
    var h = !1,
      k = g[e][f];
    0 <= k && (this.chessPieces[k].isDead = !0);
    g[e][f] = d;
    g[b.colIndex][b.rowIndex] = -1;
    var m = b.colIndex,
      n = b.rowIndex;
    b.colIndex = e;
    b.rowIndex = f;
    this.chessPieces[d].colIndex = e;
    this.chessPieces[d].rowIndex = f;
    this.isChieuTuong(1 - a, g) && (h = !0);
    this.chessPieces[d].colIndex = m;
    this.chessPieces[d].rowIndex = n;
    b.colIndex = m;
    b.rowIndex = n;
    g[b.colIndex][b.rowIndex] = g[e][f];
    0 <= k && (this.chessPieces[k].isDead = !1);
    g[e][f] = k;
    return h;
  },
  isChieuTuong: function (a, b) {
    var d = this.getVuaListIndex(1 - a);
    if ((d = this.chessPieces[d]))
      for (var d = this.encode(d.colIndex, d.rowIndex), e = 0; 16 > e; e++) {
        var f = 16 * a + e;
        if (!this.chessPieces[f].isDead && this.createPiece(f).canMoveTo(d, b))
          return !0;
      }
    return !1;
  },
  encode: function (a, b) {
    return 9 * b + a;
  },
  getVuaListIndex: function (a) {
    return 16 * a;
  },
  getPosX: function (a) {
    if (0 > a) return -200;
    var b = isWebPlatform() ? WEB_BOARD_CELL_WIDTH : BOARD_CELL_WIDTH;
    return this.background.x + (a - 4) * b * this.background.scaleX;
  },
  getPosY: function (a) {
    var b = isWebPlatform() ? WEB_BOARD_HEIGHT_RIVER : BOARD_HEIGHT_RIVER,
      d = isWebPlatform() ? WEB_BOARD_CELL_HEIGHT : BOARD_CELL_HEIGHT,
      e = isWebPlatform() ? 2 : 0;
    return 0 > a
      ? -200
      : 4 < a
      ? this.background.y +
        b * this.background.scaleY * 0.5 +
        (a - 5) * d * this.background.scaleY -
        e
      : this.background.y -
        b * this.background.scaleY * 0.5 +
        (a - 4) * d * this.background.scaleY;
  },
  getTakenPiecesIndex: function (a, b) {
    for (var d = 0; 32 > d; d++)
      if (
        !this.chessPieces[d].isDead &&
        this.chessPieces[d].colIndex == a &&
        this.chessPieces[d].rowIndex == b
      )
        return d;
    return -1;
  },
  onObserverStatusChange: function (a, b) {
    var d = this.getLogic(),
      e = d.getPlayer(a),
      f = -1;
    e && (f = e.tablePosition);
    d.updateObserverStatus(a, b);
    var g = this.getAvatarByServerPos(e.serverPosition);
    g && g.setStatus(e.status);
    b || (f = d.getPlayer(a).tablePosition);
    this.reposition(e, f, b);
    this.updateMyPositionToLeftSide();
    d.gameStatus == GAME_STATE_FINISH
      ? this.continueGame()
      : (this.resetChessTable(), this.changeButtonState());
  },
  reposition: function (a, b, d) {
    logMessage("reposition");
    if (a) {
      for (
        var e, f, g = this.getLogic(), h = 0;
        h < this.PlayerAvatar.length;
        h++
      )
        (f = this.PlayerAvatar[h]),
          null != f &&
            f.getPlayerName() == g.getPlayer(a.serverPosition).getName() &&
            ((e = f), e.setPosition(this._getLocationPos(a.tablePosition)));
      d
        ? (e &&
            (e.clearAllMask(), e.clearImgReady(), e.setPosition(-200, -200)),
          0 == b &&
            this.firstEmptyAvatar &&
            (this.firstEmptyAvatar.setPosition(this._getLocationPos(0)),
            this.firstEmptyAvatar.setVisible(!0)),
          1 == b &&
            this.secondEmptyAvatar &&
            (this.secondEmptyAvatar.setPosition(this._getLocationPos(1)),
            this.secondEmptyAvatar.setVisible(!0)))
        : (e
            ? e.setPosition(this._getLocationPos(a.tablePosition))
            : ((e = new BkChessPlayer(a.getUserInfo(), a.status)),
              e.setPosition(this._getLocationPos(a.tablePosition)),
              e.setGameTable(g),
              e.setClientState(a),
              this.PlayerAvatar.push(e),
              this.addChild(e)),
          0 == a.tablePosition &&
            this.firstEmptyAvatar &&
            (this.firstEmptyAvatar.setPosition(-200, -200),
            this.firstEmptyAvatar.setVisible(!1)),
          1 == a.tablePosition &&
            this.secondEmptyAvatar &&
            (this.secondEmptyAvatar.setPosition(-200, -200),
            this.secondEmptyAvatar.setVisible(!1)));
    }
  },
  resetPositionOfChessPieces: function () {
    for (var a = 0; 32 > a; a++) {
      var b = this.chessPieces[a];
      b.isDead
        ? ((b.x = -100), (b.y = -100))
        : (b.setScale(isWebPlatform() ? 0.8 : this.chessScale),
          b.setOpacity(255),
          (b.x = this.getPosX(b.colIndex)),
          (b.y = this.getPosY(b.rowIndex)),
          b.setEnableEventHover(!1));
    }
  },
  onContinueGame: function () {
    this.continueGame();
  },
  onPlayerStatusUpdate: function (a, b) {
    var d = this.getAvatarByServerPos(a);
    if (null != d) {
      d.setStatus(b);
      var d = this.getLogic(),
        e = d.getMyClientState();
      null == e ||
        d.isInGameProgress() ||
        (this.showStartGameButton(!1),
        e.serverPosition == a &&
          (this.changeButtonState(),
          e.status == PLAYER_STATE_READY && this.resetChessTable()));
    }
  },
  resetChessTable: function () {
    this.removeOtherItemsFromTable();
    this.chessPieces[0].showCanBeTakenSprite(!1);
    this.chessPieces[16].showCanBeTakenSprite(!1);
    this.resetChessPieces();
    this.resetPositionOfChessPieces();
  },
  showStartGameButton: function (a) {
    var b = this.getLogic();
    if (!b.isInGameProgress()) {
      var d = b.getMyClientState();
      (d && !0 === d.isObserver) ||
        ((d = !0),
        void 0 != a && (d = a),
        this.getLogic().isMeBossTable()
          ? (this.btnReady.setVisibleButton(!1),
            this.gameStatusLabel.showWaitingGameStatus(!0))
          : (this.gameStatusLabel.showWaitingGameStatus(!1),
            d && b.showCountDownForMe(),
            (a = this.getLogic().getMyClientState()),
            null != a
              ? a.status != PLAYER_STATE_READY &&
                this.btnReady.setVisibleButton(!0)
              : this.btnReady.setVisibleButton(!0)));
    }
  },
  onUpdatePlayerLevel: function (a, b) {
    if (null != this.PlayerAvatar) {
      var d = this.getAvatarByServerPos(a);
      d && d.setPlayerdata(b, !0);
    }
  },
  UpdatePlayerMoney: function (a, b, d) {
    this.getLogic().isMyServerPos(a.serverPosition)
      ? null != this.heartSprite &&
        this.heartSprite.updateData(
          b,
          REASON_ADD_HEART.INGAME_PLAYER_UPDATE_MONEY
        )
      : logMessage("chi show update heart cho minh");
  },
  updateMyPositionToLeftSide: function () {
    var a = this.getLogic(),
      b = a.getMyClientState();
    if (b && 1 == b.tablePosition) {
      for (var d = 0; d < a.maxPlayer; d++) {
        var e = a.getPlayerByIndex(d);
        if (e && 0 == e.tablePosition) {
          e.tablePosition = 1;
          if ((a = this.getAvatarByServerPos(e.serverPosition)))
            this.secondEmptyAvatar &&
              (this.secondEmptyAvatar.setPosition(-200, -200),
              this.secondEmptyAvatar.setVisible(!1)),
              a.setPosition(this._getLocationPos(e.tablePosition));
          break;
        }
      }
      b.tablePosition = 0;
      (a = this.getAvatarByServerPos(b.serverPosition)) &&
        a.setPosition(this._getLocationPos(b.tablePosition));
    }
    b && !0 === b.isObserver
      ? this.removeCountDownText()
      : this.showCountDownForMe(TIME_AUTO_READY);
  },
  showEffectBatdau: function () {
    this.batdauchoiSprite.setVisible(!0);
    this.batdauchoiSprite.showEffect();
  },
  onDealCard: function (a, b) {
    logMessage("onDealCard");
    this.hideStartGameButton();
    var d = this.getLogic(),
      e = d.getMyClientState();
    e && e.status == PLAYER_STATE_NOT_READY && this.continueGame();
    playChieuTuongSound();
    this.showEffectBatdau();
    this.setTimeForAllPlayers();
    this.updateGameStateAtBeginning(a, b);
    d.updateGameStatus(GAME_STATE_PLAYING);
    e.serverPosition == a &&
      showToastMessage(
        "\u0110\u1ebfn l\u01b0\u1ee3t b\u1ea1n",
        cc.winSize.width / 2,
        TOAST_MSG_YPOS,
        2,
        200
      );
    this.startTimer(this.oneTurnChessTime);
    this.changeButtonState();
    this.clearAllMaskOfPlayers();
    this.clearPlayerReadyMark();
    this.removeCountDownText();
    if (e && !1 === e.isObserver) {
      for (d = 0; 32 > d; d++) {
        var f = this.chessPieces[d];
        f.isDead || f.chessColor != e.chessColor || f.setEnableEventHover(!0);
      }
      this.startGoldBox();
      NativeInterface.logFirebaseEvent(EVENT_NAME.PLAY_GAME);
    } else this.stopGoldBox();
    BkConnectionManager.showAdsBannerStartGame();
  },
  clearAllMaskOfPlayers: function () {
    if (null != this.PlayerAvatar)
      for (var a = 0; a < this.PlayerAvatar.length; a++) {
        var b = this.PlayerAvatar[a];
        b && (b.clearImgReady(), b.clearAllMask());
      }
  },
  OnGameTableSyn: function (a) {
    this._super();
    this.defaultChessTime = a.Buffer.readInt();
    this.oneTurnChessTime = a.Buffer.readInt();
    logMessage("OnGameTableSyn: defaultChessTime:" + this.defaultChessTime);
    this.setTimeForAllPlayers();
    this.showViewer();
    this.getLogic().isInGameProgress() &&
      (logMessage(
        "dang trong van choi -\x3e k nhan dc deal card -\x3e recall show banner"
      ),
      BkConnectionManager.showAdsBannerStartGame());
  },
  getNumberViewer: function () {
    for (var a = 0, b = this.getLogic().PlayerState.length, d = 0; d < b; d++) {
      var e = this.getLogic().PlayerState[d];
      e && e.isObserver && a++;
    }
    return a;
  },
  onRemoveChatLayer: function () {
    logMessage("onRemoveChatLayer ChessIngame");
    null != this.chatContLayer && this.chatContLayer.setVisible(!1);
    this.chatLayer = null;
  },
  clearEmotion: function () {
    null != this.emoChatViewer &&
      (this.emoChatViewer.removeFromParent(), (this.emoChatViewer = null));
  },
  updateContentChat: function (a, b) {
    this.initChatContentLayer();
    if (null != this.chatContLayer) {
      var d = b + ": " + a;
      b == BkGlobal.UserInfo.userName && (d = "B\u1ea1n: " + a);
      this.chatContLayer.addItemString(d);
    }
  },
  showViewerChatText: function (a) {
    logMessage("showViewerChatText: " + a);
    var b = this.getPositionViewer();
    null != this.txtChatViewer && this.txtChatViewer.removeSelf();
    this.txtChatViewer = new BkToast(res_name.ChessToast);
    this.txtChatViewer.setContentChatText(a);
    var d = this;
    this.txtChatViewer.setRemoveCallback(function () {
      d.txtChatViewer = null;
    });
    this.txtChatViewer.setAutoHideAfter(3);
    this.txtChatViewer.show(
      b.x - 0.4 * this.txtChatViewer.background.width,
      b.y - 0.05 * cc.winSize.height
    );
  },
  showViewerChat: function (a) {
    if (BkGlobal.isLoadedChatEmo) {
      this.clearEmotion();
      var b = this.getPositionViewer();
      this.emoChatViewer = new BkChatEmoSprite(
        Util.getChatEmoDataWithIndex(a + 1)
      );
      isWebPlatform()
        ? ((b.x += 40), (b.y += 40))
        : this.emoChatViewer.setScale(1.2 * GAME_SCALE);
      this.addChild(this.emoChatViewer, 1e3);
      this.emoChatViewer.x = b.x;
      this.emoChatViewer.y = b.y;
      this.emoChatViewer.showEmo();
    } else logMessage("chat emo not loaded -\x3e reject command!");
  },
  getPositionViewer: function () {
    var a = cc.p(25, this.btnChat.y - 15);
    isWebPlatform() ||
      ((a = 0.88 * cc.winSize.height),
      NativeInterface.isIphoneX() && (a = 0.85 * cc.winSize.height),
      (a = cc.p(0.85 * cc.winSize.width, a)));
    return a;
  },
  showViewer: function () {
    var a = this.getNumberViewer();
    if (0 < a) {
      if (void 0 == this.viewer || null == this.viewer) {
        var b = this.getPositionViewer();
        this.viewer = new BkSprite("#" + res_name.eye);
        this.viewer.x = b.x;
        this.viewer.y = b.y;
        isWebPlatform() || this.viewer.setScale(GAME_SCALE);
        this.addChild(this.viewer);
      }
      if (null == this.txtNumOfView) {
        var b = cc.color(251, 234, 180),
          d = 15;
        isWebPlatform() || (d = 30);
        this.txtNumOfView = new BkLabel(a, "", d, !0);
        this.txtNumOfView.setTextColor(b);
        this.txtNumOfView.x =
          this.viewer.x +
          this.viewer.getContentSize().width / 2 +
          this.txtNumOfView.getContentSize().width / 2 +
          5;
        this.txtNumOfView.y = this.viewer.y;
        isWebPlatform() ||
          (this.txtNumOfView.setScale(GAME_SCALE),
          (this.txtNumOfView.x =
            this.viewer.x +
            this.viewer.getBoundingBox().width / 2 +
            this.txtNumOfView.getBoundingBox().width / 2 +
            5));
        this.addChild(this.txtNumOfView);
      } else this.txtNumOfView.setString(a);
    } else
      null != this.viewer &&
        (this.viewer.removeFromParent(), (this.viewer = null)),
        null != this.txtNumOfView &&
          (this.txtNumOfView.removeFromParent(), (this.txtNumOfView = null));
  },
  startTimer: function (a) {
    logMessage("startTimer: " + a);
    this.cancelTimer();
    for (var b = this.getLogic(), d = 0; d < b.PlayerState.length; d++) {
      var e = b.getPlayerByIndex(d);
      if (
        e &&
        e.status != PLAYER_STATE_NOT_READY &&
        e.chessColor == this.currentColorPlaying
      ) {
        var f = this.getAvatarByServerPos(e.serverPosition);
        f && (e.showTotalCountDownTime(), f.showCountDownTime(a));
      } else
        e &&
          e.status != PLAYER_STATE_NOT_READY &&
          e.chessColor != this.currentColorPlaying &&
          e.stopTotalCountDownTime();
    }
  },
  cancelTimer: function (a) {
    logMessage("cancelTimer");
    null != this.tableRedStatus && this.tableRedStatus.setVisible(!1);
    for (var b = this.getLogic(), d = 0; d < b.maxPlayer; d++) {
      var e = b.getPlayerByIndex(d);
      e &&
        (a && (e.setVisibleKing(!1), e.setVisibleRemainTimeText(!1)),
        e.status != PLAYER_STATE_NOT_READY &&
          ((e = this.getAvatarByServerPos(e.serverPosition)),
          null != e &&
            (e.stopCountDown(),
            e.alarmEndTimeSprite &&
              (e.alarmEndTimeSprite.setOpacity(0),
              e.alarmEndTimeSprite.setVisible(!1)))));
    }
  },
  continueGame: function () {
    for (var a = this.getLogic(), b, d, e = 0; e < a.PlayerState.length; e++)
      (d = a.getPlayerByIndex(e)) &&
        (b = this.getAvatarByServerPos(d.serverPosition)) &&
        0 < d.tablePosition &&
        (b.clearAllMask(),
        b.clearImgReady(),
        b.clearWinSplash(),
        d.setVisibleKing(!1));
    a.gameStatus = GAME_STATE_READY;
    this.changeButtonState();
    this.resetChessTable();
  },
  setTimeForAllPlayers: function () {
    logMessage("setTimeForAllPlayers: " + this.defaultChessTime);
    for (var a = this.getLogic(), b = 0; b < a.maxPlayer; b++) {
      var d = a.PlayerState[b];
      d && d.setRemainTime(this.defaultChessTime);
    }
  },
  resetDataForRotateBoard: function () {
    this.lmRowStart = this.lmColStart = this.lmColFinish = this.lmRowFinish = -1;
  },
  updateGameStateAtBeginning: function (a, b) {
    logMessage(
      "updateGameStateAtBeginning firstPosition: " + a + " - lastPosition: " + b
    );
    null != this.wlLayer &&
      (logMessage("this.wlLayer !\x3d null start game -\x3e remove"),
      this.wlLayer.removeFromParent(),
      (this.wlLayer = null));
    var d = this.getLogic(),
      e = d.getMyClientState();
    this.colorAllowTouch = e && e.status != PLAYER_STATE_NOT_READY ? 0 : -1;
    this.isRealReverse = this.isReverse = e.serverPosition == b;
    this.resetDataForRotateBoard();
    logMessage(
      "this.isReverse: " +
        this.isReverse +
        " -  currentPlayer.serverPosition: " +
        e.serverPosition
    );
    this.firstPlayPosition = a;
    this.lastPlayPosition = b;
    this.setKingColor(a, 0);
    this.setKingColor(b, 1);
    if ((e = d.getPlayer(a))) e.isPlaying = !0;
    if ((d = d.getPlayer(b))) d.isPlaying = !0;
    this.isReverse
      ? ((e.chessColor = 1), (d.chessColor = 0), (this.currentColorPlaying = 1))
      : ((e.chessColor = 0),
        (d.chessColor = 1),
        (this.currentColorPlaying = 0));
    logMessage(
      "firstPlayer.chessColor: " +
        e.chessColor +
        " - firstPlayer.tablePosition: " +
        e.tablePosition
    );
    if (e.chessColor != e.tablePosition) {
      e.tablePosition = e.chessColor;
      d.tablePosition = d.chessColor;
      var f = this.getAvatarByServerPos(a);
      f && f.setPosition(this._getLocationPos(e.tablePosition));
      (e = this.getAvatarByServerPos(b)) &&
        e.setPosition(this._getLocationPos(d.tablePosition));
    }
    this.resetChessPieces();
    this.resetPositionOfChessPieces();
  },
  setKingColor: function (a, b) {
    var d = this.getLogic().getPlayer(a);
    if (d) {
      var e = this.getAvatarByServerPos(a);
      d.initRemainTimeText(e, b);
    }
  },
  onMove: function (a, b, d, e, f) {
    logMessage("onMove");
    this.chessPieces[0].showCanBeTakenSprite(!1);
    this.chessPieces[16].showCanBeTakenSprite(!1);
    var g = this.colorAllowTouch;
    this.colorAllowTouch = -1;
    this.cancelTimer();
    var h,
      k = this.getLogic();
    for (h = 0; h < k.maxPlayer; h++) {
      var m = k.getPlayerByIndex(h);
      if (
        m &&
        m.status != PLAYER_STATE_NOT_READY &&
        m.chessColor == this.currentColorPlaying
      ) {
        m.setRemainTime(f);
        break;
      }
    }
    this.isReverse && ((b = 9 - b), (e = 9 - e), (a = 8 - a), (d = 8 - d));
    f = this.getTakenPiecesIndex(d, e);
    0 <= f && (this.chessPieces[f].isDead = !0);
    for (h = 0; 32 > h; h++)
      if (
        !this.chessPieces[h].isDead &&
        this.chessPieces[h].colIndex == a &&
        this.chessPieces[h].rowIndex == b
      ) {
        this.pieceSelected = h;
        break;
      }
    logMessage(
      "startCol: " +
        a +
        " - startRow: " +
        b +
        " - finishCol: " +
        d +
        " - finishRow: " +
        e
    );
    this.lmColStart = a;
    this.lmRowStart = b;
    this.lmColFinish = d;
    this.lmRowFinish = e;
    this.lastMoveSpriteStart.setPosition(this.getPosX(a), this.getPosY(b));
    this.lastMoveSpriteFinish.setPosition(this.getPosX(d), this.getPosY(e));
    if ((h = this.chessPieces[this.pieceSelected]))
      this.reorderChild(h, 33),
        (h.colIndex = d),
        (h.rowIndex = e),
        (a = cc.callFunc(this.animationFinish, this)),
        (d = cc.moveTo(0.2, this.getPosX(d), this.getPosY(e))),
        (d = cc.sequence(d, a)),
        h.runAction(d);
    this.unSelectPiece();
    d = Array(9);
    for (h = 0; 10 > h; h++) d[h] = Array(10);
    this.rebuildBoard(d);
    this.isChieuTuong(this.currentColorPlaying, d) ||
      (0 > f ? playCoDiChuyenSound() : playCoAnQuanSound());
    0 <= f && 32 > f && this.animateTakePiece(f);
    this.currentColorPlaying = 1 - this.currentColorPlaying;
    this.startTimer(this.oneTurnChessTime);
    this.colorAllowTouch = g;
  },
  animationFinish: function () {
    this.getLogic().processNextEventInQueue();
  },
  animateTakePiece: function (a) {
    if (!(0 > a)) {
      this.chessPieces[a].isDead = !0;
      for (var b = this.getLogic(), d, e = 0; e < b.maxPlayer; e++)
        if (
          (d = b.getPlayerByIndex(e)) &&
          d.status != PLAYER_STATE_NOT_READY &&
          d.chessColor == this.currentColorPlaying
        ) {
          this.moveTakenPiece(
            this.chessPieces[a],
            this._getLocationPos(d.tablePosition).x,
            this._getLocationPos(d.tablePosition).y
          );
          break;
        }
    }
  },
  moveTakenPiece: function (a, b, d) {
    a.setPosition(-100, -100);
  },
  onInforReturn: function (a, b) {
    if (a != CHIEU_HET) {
      var d = this.getLogic().getPlayer(b);
      if (null != d)
        if (a == CHIEU)
          playChieuTuongSound(),
            this.chessPieces[0].chessColor == d.chessColor
              ? this.chessPieces[16].showCanBeTakenSprite(!0)
              : this.chessPieces[0].showCanBeTakenSprite(!0),
            this.chieutuongSprite.setOpacity(255),
            this.chieutuongSprite.setVisible(!0),
            this.chieutuongSprite.runAction(
              cc.fadeOut(TIME_SHOW_SPRITE_CHESS_INGAME)
            );
        else {
          var e = getChessInfoDescription(a);
          a == HET_GIO || a == DAU_HANG
            ? ((e = d.UserInfo.getUserName() + e),
              showToastMessage(e, cc.winSize.width / 2, TOAST_MSG_YPOS, 3, 250))
            : showToastMessage(
                e,
                cc.winSize.width / 2,
                cc.winSize.height / 2,
                3,
                250
              );
        }
    }
  },
  getLosePosition: function (a) {
    for (var b = this.getLogic(), d = 0; d < b.maxPlayer; d++) {
      var e = b.getPlayerByIndex(d);
      if (e && e.status != PLAYER_STATE_NOT_READY && e.serverPosition != a)
        return d;
    }
    return -1;
  },
  wlLayer: null,
  sendPacketGetAds: function () {
    var a = new BkPacket();
    a.createPacketWithTypeAndByteData(
      c.NETWORK_ADS_FULL_SCR_CONTROL,
      ads.SUB_EVENT_TYPE_SHOW_ADS_FINISH_GAME
    );
    BkConnectionManager.send(a);
  },
  removewlLayer: function () {
    logMessage("removewlLayer");
    null != this.wlLayer &&
      (this.wlLayer.removeFromParent(), (this.wlLayer = null));
    this.sendPacketGetAds();
  },
  updateEloWLLayer: function (a) {
    null != this.wlLayer && this.wlLayer.upadteElo(a);
  },
  showWinLoseFinishGame: function (a) {
    if (!isWebPlatform() && 0 <= a) {
      var b = this.getAvatarByServerPos(a);
      a = !0;
      if (
        b &&
        (b.y > cc.winSize.height / 2 && (a = !1), (b = getCurrentScene()))
      ) {
        var d = this.getCenterY(),
          d = cc.p(cc.winSize.width / 2, d);
        this.wlLayer = new BkWinLoseLayer(a, d, this);
        b.addChild(this.wlLayer, TagOfLayer.Toast - 1);
      }
    }
  },
  onFinishGame: function (a) {
    logMessage("onFinishGame");
    var b = this.getLogic();
    0 > a &&
      (this.hoaSprite.setOpacity(255),
      this.hoaSprite.setVisible(!0),
      this.hoaSprite.runAction(cc.sequence(cc.delayTime(3), cc.fadeOut(1))));
    this.showWinLoseFinishGame(a);
    if (0 <= a) {
      this.getAvatarByServerPos(a).showWinSplash();
      var d = this.getLosePosition(a);
      -1 != d && this.getAvatarByServerPos(d).showLoseSplash();
      d = b.getMyClientState();
      if (null == d) return;
      a == d.serverPosition
        ? playCoThangSound()
        : d.status != PLAYER_STATE_NOT_READY && playCoThuaSound();
    }
    b.updateGameStatus(GAME_STATE_FINISH);
    this.stopGoldBox();
    this.cancelTimer(!0);
    this.changeButtonState();
    this.hideLastMoveSprite();
    this.unSelectPiece();
    this.hideMovablePosition();
    BkConnectionManager.offAdsBannerFinishGame();
  },
  updatePlayerMoneyWhenFinishGame: function (a) {
    if (!(0 > a))
      for (var b = this.getLogic(), d = 0; d < b.maxPlayer; d++) {
        var e = b.getPlayerByIndex(d);
        if (e && e.status != PLAYER_STATE_NOT_READY && e.serverPosition != a) {
          var f = Math.min(b.getTableBetMoney(), e.UserInfo.playerMoney),
            d = Math.floor(f * (1 - TAX_RATE));
          b.increaseCash(e, -f);
          a = b.getPlayer(a);
          b.increaseCash(a, d);
          break;
        }
      }
  },
  onOfferReturn: function (a) {
    switch (a) {
      case CHESS_DRAW_REQUEST:
        this.offerDraw();
        break;
      case CHESS_DRAW_ACCEPT:
        this.onDrawAccept();
        break;
      case CHESS_DRAW_REFUSE:
        this.onDrawRefuse();
    }
  },
  confirmOfferDraw: function () {
    var a = this;
    showPopupConfirmWith(
      "B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n\n\u0111\u1ec1 ngh\u1ecb h\u00f2a kh\u00f4ng?",
      "",
      function () {
        a.getLogic().processChessOfferDraw(CHESS_DRAW_REQUEST);
      }
    );
  },
  offerDraw: function () {
    logMessage("offerDraw");
    null != this.chatLayer &&
      (logMessage("remove chatLayer if showing!"),
      this.chatLayer.removeChatLayer());
    var a = this;
    showPopupConfirmWith(
      "\u0110\u1ed1i ph\u01b0\u01a1ng mu\u1ed1n h\u00f2a.\n B\u1ea1n c\u00f3 \u0111\u1ed3ng \u00fd kh\u00f4ng?",
      "",
      function () {
        a.getLogic().processChessOfferDraw(CHESS_DRAW_ACCEPT);
      },
      null,
      function () {
        a.getLogic().processChessOfferDraw(CHESS_DRAW_REFUSE);
      }
    );
  },
  onDrawAccept: function () {
    showToastMessage(
      "Hai \u0111\u1ed1i th\u1ee7 \u0111\u00e3 b\u1eaft tay nhau \u0111\u1ed3ng \u00fd h\u00f2a",
      cc.winSize.width / 2,
      TOAST_MSG_YPOS,
      3,
      300
    );
  },
  onDrawRefuse: function () {
    showToastMessage(
      "\u0110\u1ed1i ph\u01b0\u01a1ng \u0111\u00e3 t\u1eeb ch\u1ed1i h\u00f2a",
      cc.winSize.width / 2,
      cc.winSize.height / 2,
      3,
      200
    );
  },
  confirmSurrender: function () {
    var a = this;
    showPopupConfirmWith(
      "B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n ch\u1ecbu thua ?",
      "",
      function () {
        a.getLogic().processChessOfferDraw(CHESS_SURRENDER);
      }
    );
  },
  onTableInfoReturn: function () {
    this._super();
    this.updateMyPositionToLeftSide();
    this.updateStateButtonBackViewer();
  },
  btnRotateBoard: null,
  updateStateButtonBackViewer: function () {
    if (!isWebPlatform()) {
      var a = this.getLogic().getMyClientState();
      if (null != a && a.isObserver) {
        if (null == this.btnRotateBoard) {
          this.btnRotateBoard = new BkButton(
            res_name.switch_butt,
            res_name.switch_butt_press,
            res_name.switch_butt,
            res_name.switch_butt,
            ccui.Widget.PLIST_TEXTURE
          );
          this.btnRotateBoard.setScaleM(GAME_SCALE);
          this.btnRotateBoard.x =
            this.btnChat.x + (this.btnChat.x - this.btnBack.x);
          this.btnRotateBoard.y = this.btnBack.y;
          this.addChild(this.btnRotateBoard);
          var b = this;
          this.btnRotateBoard.addClickEventListener(function () {
            b.rotateChessBoard();
          });
        }
        this.heartSprite.heartSp.updateSpriteFrame(res_name.heart_ingame);
        this.heartSprite.labelNumberHeart.x =
          this.heartSprite.getContentSize().width / 2;
        this.heartSprite.y = this.getPositionViewer().y;
        this.heartSprite.x =
          this.getPositionViewer().x - this.heartSprite.getBoundingBox().width;
      }
    }
  },
  onClickNhacNenButViewer: function () {
    var a = !Util.getNhacNenSetting(),
      b = this.getResNameNhacNenSpriteIngame(a);
    this.spNhacNen.updateSpriteFrame(b);
    Util.onNhacNenStateChange(a);
  },
  getResNameNhacNenSpriteIngame: function (a) {
    var b = res_name.music_off_view_butt;
    a && (b = res_name.music_on_view_butt);
    return b;
  },
  onTableLeavePush: function (a) {
    logMessage("onTableLeavePush Chess");
    this.getAvatarByServerPos(a.serverPosition) &&
      (this.removeAvatarByServerPos(a.serverPosition),
      0 == a.tablePosition
        ? (this.firstEmptyAvatar.setPosition(this._getLocationPos(0)),
          this.firstEmptyAvatar.setVisible(!0))
        : 1 == a.tablePosition &&
          (this.secondEmptyAvatar.setPosition(this._getLocationPos(1)),
          this.secondEmptyAvatar.setVisible(!0)));
  },
  removePlayerAvatar: function (a) {
    this.changeButtonState();
    this.showViewer();
  },
  onTableJoin: function (a, b) {
    logMessage("onTableJoin chessBaseIngameLayer");
    a &&
      !1 === a.isObserver &&
      (this.displayPlayerAvatar(), this.changeButtonState());
    this.showViewer();
  },
  displayPlayerAvatar: function () {
    logMessage("displayPlayerAvatar BkChessBaseIngameLayer");
    this.firstEmptyAvatar || this.initEmptyAvatars();
    this.hideEmptyAvatars();
    var a = this.getLogic();
    null != this.PlayerAvatar &&
      0 < this.PlayerAvatar.length &&
      (logMessage("this.PlayerAvatar.length " + this.PlayerAvatar.length),
      this.clearAllAvatar());
    var b,
      d = 0,
      e;
    logMessage("init new player");
    for (var f = 0; f < a.PlayerState.length; f++)
      if ((b = a.getPlayerByIndex(f))) {
        if (b && !1 === b.isObserver) {
          logMessage(
            "player: " + b.getName() + " isObserver \x3d\x3d\x3d false"
          );
          -1 == b.tablePosition && (b.tablePosition = a.findTablePosition());
          d++;
          e = b.tablePosition;
          var g = new BkChessPlayer(b.getUserInfo(), b.status);
          g.setPosition(this._getLocationPos(b.tablePosition));
          g.setGameTable(a);
          g.setClientState(b);
          this.PlayerAvatar.push(g);
          a.gameStatus == GAME_STATE_PLAYING &&
            (g.clearImgReady(),
            this.setKingColor(b.serverPosition, b.chessColor));
          this.addChild(g);
        } else b.tablePosition = -1;
        a.gameStatus == GAME_STATE_READY &&
          b.setRemainTime(this.defaultChessTime);
      }
    a.gameStatus == GAME_STATE_PLAYING &&
      this.startTimer(this.oneTurnChessTime);
    if (2 > d) {
      if ((0 == 1 - e && this.firstEmptyAvatar) || 0 == d)
        this.firstEmptyAvatar.setPosition(this._getLocationPos(0)),
          this.firstEmptyAvatar.setVisible(!0);
      if ((1 == 1 - e && this.secondEmptyAvatar) || 0 == d)
        this.secondEmptyAvatar.setPosition(this._getLocationPos(1)),
          this.secondEmptyAvatar.setVisible(!0);
    }
  },
  initEmptyAvatars: function () {
    var a = this.getLogic();
    this.firstEmptyAvatar = new BkChessPlayer(null, -1);
    this.firstEmptyAvatar.setPosition(-200, -200);
    this.firstEmptyAvatar.setGameTable(a);
    this.firstEmptyAvatar.setVisible(!1);
    this.addChild(this.firstEmptyAvatar);
    this.secondEmptyAvatar = new BkChessPlayer(null, -1);
    this.secondEmptyAvatar.setPosition(-200, -200);
    this.secondEmptyAvatar.setGameTable(a);
    this.secondEmptyAvatar.setVisible(!1);
    this.addChild(this.secondEmptyAvatar);
  },
  hideEmptyAvatars: function () {
    this.firstEmptyAvatar.setPosition(-200, -200);
    this.secondEmptyAvatar.setPosition(-200, -200);
    this.firstEmptyAvatar.setVisible(!1);
    this.secondEmptyAvatar.setVisible(!1);
  },
  _getLocationPos: function (a) {
    var b = cc.winSize,
      d = this.firstEmptyAvatar,
      e = d.getContentSize().width * GAME_SCALE;
    isWebPlatform() || isFBInstantGame()
      ? isFBInstantGame()
        ? ((b = 0),
          0 == a
            ? ((yPos = 0.06 * cc.winSize.height),
              (xPos = cc.winSize.width - b * GAME_SCALE - e / 2))
            : ((yPos = 0.93 * cc.winSize.height),
              (xPos = b * GAME_SCALE + e / 2)))
        : ((yPos = 0.79 * cc.winSize.height),
          0 == a
            ? (xPos = WEB_PLAYER_AVAR_MARGIN_LF + e / 2)
            : ((a = d.getWebAvatarWidth()),
              (xPos = b.width - WEB_PLAYER_AVAR_MARGIN_RIGHT + e / 2 - a)))
      : ((b = 0),
        0 == a
          ? ((yPos = 0.06 * cc.winSize.height),
            (xPos = cc.winSize.width - b * GAME_SCALE - e / 2))
          : ((yPos = 0.88 * cc.winSize.height),
            (xPos = b * GAME_SCALE + e / 2),
            NativeInterface.isIphoneX() &&
              (logMessage("isIphoneX -\x3e dat avatar top thap xuong"),
              (yPos = 0.84 * cc.winSize.height))));
    return cc.p(xPos, yPos);
  },
  showCountDownForMe: function (a) {
    var b = this.getLogic().getMyClientState();
    (b && !0 === b.isObserver) ||
      (this._super(a),
      null != this.countdownText &&
        (isWebPlatform()
          ? ((a = this.getCenterY()),
            (this.countdownText.y =
              a + 0.7 * this.btnReady.getBoundingBox().height))
          : ((a = this.getCenterY()),
            (this.countdownText.y =
              a + 0.7 * this.btnReady.getBoundingBox().height),
            logMessage(
              "this.countdownText.getBoundingBox().height: " +
                this.countdownText.getBoundingBox().height
            ))));
  },
  initChatContentLayer: function () {
    if (null == this.chatContLayer) {
      var a = TagOfLayer.Toast - 1,
        b = getCurrentScene();
      this.chatContLayer = new BkChatContentLayer();
      b.addChild(this.chatContLayer, a + 1);
      this.chatContLayer.setVisible(!1);
    }
  },
  chatLayer: null,
  onChatClick: function () {
    if (Util.isResLoading(null)) Util.removeAnim();
    else {
      var a = TagOfLayer.Toast - 1;
      this.chatLayer = new BkChatLayerMobile();
      var b = getCurrentScene();
      b.addChild(this.chatLayer, a);
      null == this.chatContLayer
        ? ((this.chatContLayer = new BkChatContentLayer()),
          b.addChild(this.chatContLayer, a + 1))
        : this.chatContLayer.setVisible(!0);
    }
  },
  MenuLayer: null,
  onBackClick: function () {
    isWebPlatform()
      ? BkLogicManager.getInGameLogic().processLeaveTableRequest()
      : (null == this.MenuLayer &&
          ((this.MenuLayer = new BkIngameMenu(this.btnBack)),
          this.addChild(this.MenuLayer, TagOfLayer.Popup - 1)),
        this.MenuLayer.onStateChangeMenuLayer());
  },
  updateHeart: function (a, b) {
    logMessage(
      "updateHeart ingame: " + a + " money GB: " + BkGlobal.UserInfo.getMoney()
    );
    var d = this.getLogic();
    if (void 0 != d && (d = d.getMyClientState())) {
      var e = d.UserInfo.getMoney();
      d.UserInfo.setMoney(e + a);
      logMessage(
        "money ClientstateIngameMoney: " +
          d.getCurrentCash() +
          " - money GB: " +
          BkGlobal.UserInfo.getMoney()
      );
    }
    null != this.heartSprite && this.heartSprite.updateData(a, b);
  },
  rotateChessBoard: function () {
    this.isReverse = !this.isReverse;
    var a, b, d;
    a = 0;
    for (b = this.chessPieces.length; a < b; a++)
      (d = this.chessPieces[a]),
        d.stopAllActions(),
        (d.colIndex = 8 - d.colIndex),
        (d.rowIndex = 9 - d.rowIndex),
        d.reposition();
    if (-1 != this.lmColStart) {
      a = 8 - this.lmColStart;
      b = 9 - this.lmRowStart;
      d = 8 - this.lmColFinish;
      var e = 9 - this.lmRowFinish;
      this.lmColStart = a;
      this.lmRowStart = b;
      this.lmColFinish = d;
      this.lmRowFinish = e;
      this.lastMoveSpriteStart.setPosition(this.getPosX(a), this.getPosY(b));
      this.lastMoveSpriteFinish.setPosition(this.getPosX(d), this.getPosY(e));
    }
    b = 0;
    d = !1;
    e = this.getLogic().PlayerState;
    for (a = 0; a < e.length; a++) {
      var f = e[a];
      f &&
        !f.isObserver &&
        (logMessage("swap tablePosition"),
        b++,
        (f.tablePosition = 1 - f.tablePosition),
        (f = this.getAvatarByServerPos(f.serverPosition))) &&
        (f.isAvatarBottom()
          ? (f.setPosition(this._getLocationPos(1)), (d = !0))
          : f.setPosition(this._getLocationPos(0)));
    }
    logMessage("countPlayer: " + b);
    this.hideEmptyAvatars();
    1 == b &&
      (d
        ? (logMessage("co 1 ng choi dang o avar top"),
          this.firstEmptyAvatar.setPosition(this._getLocationPos(0)),
          this.firstEmptyAvatar.setVisible(!0))
        : (logMessage("co 1 ng choi dang o avar bottom"),
          this.secondEmptyAvatar.setPosition(this._getLocationPos(1)),
          this.secondEmptyAvatar.setVisible(!0)));
  },
});
BkGameStatusLabelSprite = BkSprite.extend({
  label: null,
  label1: null,
  label2: null,
  label3: null,
  count: 0,
  waittingSprite: null,
  ctor: function (a) {
    this._super("#" + res_name.khu_status_waitting);
    this.waittingSprite = new BkSprite("#" + res_name.amtra);
    this.waittingSprite.y = this.getContentSize().height / 2;
    this.addChild(this.waittingSprite);
    var b = isWebPlatform() ? 20 : 30,
      d = cc.color.BLACK,
      e = this.waittingSprite.y;
    this.label = new BkLabel(
      "\u0110ang t\u00ecm \u0111\u1ed1i th\u1ee7, xin h\u00e3y \u0111\u1ee3i",
      "",
      b
    );
    this.label.x =
      this.label.getContentSize().width / 2 +
      this.waittingSprite.x +
      this.waittingSprite.getContentSize().width / 2;
    this.label.y = e;
    this.label.setTextColor(d);
    this.addChild(this.label);
    var f = this.label.x + this.label.getContentSize().width / 2;
    this.label1 = new BkLabel(".", "", b);
    this.label1.x = f + this.label1.getContentSize().width / 2;
    this.label1.y = e;
    this.label1.setTextColor(d);
    this.addChild(this.label1);
    this.label2 = new BkLabel("..", "", b);
    this.label2.x = f + this.label2.getContentSize().width / 2;
    this.label2.y = e;
    this.label2.setTextColor(d);
    this.addChild(this.label2);
    this.label3 = new BkLabel("...", "", b);
    this.label3.x = f + this.label3.getContentSize().width / 2;
    this.label3.y = e;
    this.label3.setTextColor(d);
    this.addChild(this.label3);
    this.setScale(GAME_SCALE);
    this.x = cc.winSize.width / 2;
    isWebPlatform() && (this.x = cc.winSize.width / 2 + 50);
    this.y = a;
    this.showLabel(0);
  },
  showLabel: function (a) {
    this.hideAllLabel();
    1 == a && this.label1.setVisible(!0);
    2 == a && this.label2.setVisible(!0);
    3 == a && this.label3.setVisible(!0);
  },
  hideAllLabel: function () {
    this.label1.setVisible(!1);
    this.label2.setVisible(!1);
    this.label3.setVisible(!1);
  },
  getWidthSprite: function () {
    return this.label.getContentSize().width;
  },
  showWaitingGameStatus: function (a) {
    this.setVisible(a);
    this.unschedule(this.onTickgameSTT);
    a && ((this.count = 0), this.schedule(this.onTickgameSTT, 0.5));
  },
  onTickgameSTT: function () {
    this.showLabel(this.count - 4 * Math.floor(this.count / 4));
    this.count++;
  },
});
BkBatDauEffectSprite = cc.SpriteBatchNode.extend({
  sprite: null,
  animFrames: null,
  timePerFrameBDEffect: 0.05,
  isShowingEffect: !1,
  ctor: function () {
    cc.spriteFrameCache.addSpriteFrames(
      res.bat_dau_effect_plist,
      res.bat_dau_effect_img
    );
    this.spriteFrameName1 = "frame_0.png";
    this.sprite = new BkSprite("#" + this.spriteFrameName1);
    this._super(res.bat_dau_effect_img);
    this.addChild(this.sprite);
    this.animFrames = [];
    for (var a = "", b = 0; 5 > b; b++)
      (a = "frame_" + b + ".png"),
        (a = cc.spriteFrameCache.getSpriteFrame(a)),
        this.animFrames.push(a);
    this.isShowingEffect = !1;
  },
  showEffect: function () {
    var a = this;
    if (a.isShowingEffect) logMessage("isShowingEffect -\x3e return");
    else {
      var b = cc.callFunc(function () {
        logMessage("show effect finish:");
        a.isShowingEffect = !1;
      }, this);
      this.sprite.setOpacity(255);
      var d = cc.fadeOut(0.5),
        e = new cc.Animation(this.animFrames, this.timePerFrameBDEffect),
        b = cc.sequence(cc.animate(e), cc.delayTime(1), d, b);
      a.isShowingEffect = !0;
      this.sprite.runAction(b);
    }
  },
});
BkWinLoseLayer = cc.Layer.extend({
  bg: null,
  isWin: !1,
  imgWinLose: null,
  lbElo: null,
  igLayer: null,
  ctor: function (a, b, d) {
    this._super();
    this.bg = new BkSprite(res.shadow_co_frame_png);
    this.bg.setScaleX(cc.winSize.width / this.bg.getContentSize().width);
    this.bg.setScaleY(cc.winSize.height / this.bg.getContentSize().height);
    this.bg.x = cc.winSize.width / 2;
    this.bg.y = cc.winSize.height / 2;
    this.addChild(this.bg);
    this.isWin = a;
    this.igLayer = d;
    this.imgWinLose = a
      ? new BkSprite("#" + res_name.win_cuoi_van)
      : new BkSprite("#" + res_name.lose_cuoi_van);
    this.imgWinLose.x = b.x;
    this.imgWinLose.y = b.y;
    this.imgWinLose.setScale(GAME_SCALE);
    this.addChild(this.imgWinLose);
    var e = this;
    this.scheduleOnce(function () {
      e.removeLayer();
    }, 3);
  },
  removeLayer: function () {
    this.igLayer && this.igLayer.removewlLayer();
  },
  upadteElo: function (a) {
    this.lbElo =
      0 < this.isWin
        ? new cc.LabelBMFont("Elo: +" + Math.abs(a), res.BITMAP_GAME_FONT_TCM)
        : new cc.LabelBMFont(
            "Elo: -" + Math.abs(a),
            res.BITMAP_GAME_FONT_TCM_THUA
          );
    this.lbElo.setScale(2 * GAME_SCALE);
    this.lbElo.x = this.imgWinLose.x;
    this.lbElo.y =
      this.imgWinLose.y -
      this.imgWinLose.getBoundingBox().height / 2 -
      this.lbElo.getBoundingBox().height / 2;
    this.addChild(this.lbElo);
  },
});
BkCoTuongGameLayer = BkChessBaseIngameLayer.extend({
  ctor: function () {
    this._super();
  },
  OnGameTableSyn: function (a) {
    logMessage("OnGameTableSyn");
    this._super(a);
    var b = this.getLogic(),
      d = b.getMyClientState();
    if (b.isInGameProgress()) {
      for (var e = 0; a.Buffer.isReadable(); ) {
        this.updateGameStateAtBeginning(
          a.Buffer.readByte(),
          a.Buffer.readByte()
        );
        var e = a.Buffer.readInt(),
          f = b.getPlayer(this.firstPlayPosition);
        f.isPlaying = !0;
        f.setRemainTime(a.Buffer.readInt());
        f = b.getPlayer(this.lastPlayPosition);
        f.isPlaying = !0;
        f.setRemainTime(a.Buffer.readInt());
        this.currentColorPlaying = a.Buffer.readByte();
        this.isReverse &&
          (this.currentColorPlaying = 1 - this.currentColorPlaying);
        var g, h;
        if (this.isReverse)
          for (f = 0, g = this.chessPieces.length; f < g; f++)
            (h = this.chessPieces[(f + 16) % 32]),
              (h.colIndex = 8 - a.Buffer.readByte()),
              (h.rowIndex = 9 - a.Buffer.readByte()),
              (h.isDead = 1 == a.Buffer.readByte()),
              h.reposition(),
              h.isDead ||
                !d ||
                d.isObserver ||
                h.chessColor != d.chessColor ||
                h.setEnableEventHover(!0);
        else
          for (f = 0, g = this.chessPieces.length; f < g; f++)
            (h = this.chessPieces[f]),
              (h.colIndex = a.Buffer.readByte()),
              (h.rowIndex = a.Buffer.readByte()),
              (h.isDead = 1 == a.Buffer.readByte()),
              h.reposition(),
              h.isDead ||
                !d ||
                d.isObserver ||
                h.chessColor != d.chessColor ||
                h.setEnableEventHover(!0);
      }
      this.startTimer(e);
    } else
      d && d.isObserver && this.removeCountDownText(),
        this.cancelTimer(!0),
        this.resetPositionOfChessPieces();
    this.changeButtonState();
  },
});
BkCoUpGameLayer = BkChessBaseIngameLayer.extend({
  boxQuanAnBottom: null,
  boxQuananTop: null,
  ctor: function () {
    this._super();
    this.boxQuanAnBottom = new BkTakenListChessPiece();
    this.boxQuanAnBottom.setScale(GAME_SCALE);
    if (isWebPlatform()) {
      var a =
          this.background.x -
          this.background.getWidth() / 2 -
          0.3 * this.boxQuanAnBottom.getWidth(),
        b = this.background.y - 48;
      this.boxQuanAnBottom.setPosition(a, b);
      this.boxQuananTop = new BkTakenListChessPiece();
      this.boxQuananTop.setScale(GAME_SCALE);
      a =
        this.background.x +
        this.background.getWidth() / 2 +
        0.32 * this.boxQuananTop.getWidth();
    } else
      (a = cc.winSize.width / 2),
        (b =
          this.background.y -
          0.5 * this.background.getHeight() -
          this.boxQuanAnBottom.getBoundingBox().height / 2),
        this.boxQuanAnBottom.setPosition(a, b),
        (this.boxQuananTop = new BkTakenListChessPiece()),
        this.boxQuananTop.setScale(GAME_SCALE),
        (a = cc.winSize.width / 2),
        (b =
          this.background.y +
          0.5 * this.background.getHeight() +
          0.2 * this.boxQuananTop.getHeight());
    this.boxQuananTop.setPosition(a, b);
    this.addChild(this.boxQuananTop, 1);
    this.addChild(this.boxQuanAnBottom, 1);
  },
  OnGameTableSyn: function (a) {
    logMessage("OnGameTableSyn");
    this._super(a);
    var b = this.getLogic(),
      d = b.getMyClientState();
    if (b.isInGameProgress()) {
      var e = 0;
      if (a.Buffer.isReadable()) {
        this.updateGameStateAtBeginning(
          a.Buffer.readByte(),
          a.Buffer.readByte()
        );
        var e = a.Buffer.readInt(),
          f = b.getPlayer(this.firstPlayPosition);
        f.isPlaying = !0;
        f.setRemainTime(a.Buffer.readInt());
        b = b.getPlayer(this.lastPlayPosition);
        b.isPlaying = !0;
        b.setRemainTime(a.Buffer.readInt());
        this.currentColorPlaying = a.Buffer.readByte();
        this.isReverse &&
          (this.currentColorPlaying = 1 - this.currentColorPlaying);
        var g;
        if (this.isReverse)
          for (b = 0, f = this.chessPieces.length; b < f; b++)
            (g = this.chessPieces[(b + 16) % 32]),
              (g.colIndex = 8 - a.Buffer.readByte()),
              (g.rowIndex = 9 - a.Buffer.readByte()),
              (g.isDead = 1 == a.Buffer.readByte()),
              (g.faceState = a.Buffer.readByte()),
              (g.chessType = a.Buffer.readByte()),
              (g.deadFaceType = a.Buffer.readByte()),
              g.reposition(),
              g.setBitmap(),
              g.isDead ||
                !d ||
                d.isObserver ||
                g.chessColor != d.chessColor ||
                g.setEnableEventHover(!0);
        else
          for (b = 0, f = this.chessPieces.length; b < f; b++)
            (g = this.chessPieces[b]),
              (g.colIndex = a.Buffer.readByte()),
              (g.rowIndex = a.Buffer.readByte()),
              (g.isDead = 1 == a.Buffer.readByte()),
              (g.faceState = a.Buffer.readByte()),
              (g.chessType = a.Buffer.readByte()),
              (g.deadFaceType = a.Buffer.readByte()),
              g.reposition(),
              g.setBitmap(),
              g.isDead ||
                !d ||
                d.isObserver ||
                g.chessColor != d.chessColor ||
                g.setEnableEventHover(!0);
        this.updateTakenListWhenSyn();
      }
      this.startTimer(e);
    } else
      d && d.isObserver && this.removeCountDownText(),
        this.cancelTimer(!0),
        this.resetPositionOfChessPieces();
    this.changeButtonState();
  },
  updateTakenListWhenSyn: function () {
    var a,
      b,
      d = this.getLogic().getMyClientState();
    a = 0;
    for (b = this.chessPieces.length; a < b; a++)
      this.chessPieces[a].isDead &&
        (this.chessPieces[a].deadFaceType == FACE_DOWN &&
          (d.isObserver || this.chessPieces[a].chessColor == d.chessColor) &&
          this.chessPieces[a].setPieceFace(FACE_DOWN),
        this.chessPieces[a].chessColor != this.calculateBottonColor()
          ? this.boxQuanAnBottom.pushToChessList(
              this.chessPieces[a],
              !d.isObserver
            )
          : this.boxQuananTop.pushToChessList(this.chessPieces[a], !1));
    this.updatePosForBoxQuanAn(this.boxQuananTop, !0);
    this.updatePosForBoxQuanAn(this.boxQuanAnBottom, !1);
  },
  onRealTypeReturn: function (a, b) {
    this.isRealReverse && (a = (a + 16) % 32);
    this.chessPieces[a].chessType = b;
    this.chessPieces[a].isDead
      ? this.processTakenListRealTypeReturn(a)
      : this.chessPieces[a].faceUp();
  },
  onObserverStatusChange: function (a, b) {
    this._super(a, b);
    this.getLogic().getMyClientState();
  },
  createChessPieces: function () {
    this._super();
    for (var a = 0; 32 > a; a++)
      this.chessPieces[a].chessType != BkChessType.VUA &&
        ((this.chessPieces[a].faceState = FACE_DOWN),
        (this.chessPieces[a].deadFaceType = FACE_DOWN),
        this.chessPieces[a].setBitmap());
  },
  resetChessPieces: function () {
    for (var a = 0; 32 > a; a++)
      this.chessPieces[a].chessType != BkChessType.VUA &&
        ((this.chessPieces[a].faceState = FACE_DOWN),
        (this.chessPieces[a].deadFaceType = FACE_DOWN));
    this._super();
    this.boxQuananTop.reset();
    this.boxQuanAnBottom.reset();
  },
  createPiece: function (a) {
    var b = new BkCoUpPiece(a);
    b.chessType = this.chessPieces[a].chessType;
    b.colIndex = this.chessPieces[a].colIndex;
    b.rowIndex = this.chessPieces[a].rowIndex;
    b.isFaceUp = this.chessPieces[a].faceState == FACE_UP;
    return b;
  },
  animateTakePiece: function (a) {
    0 > a ||
      ((this.chessPieces[a].isDead = !0), this.processTakenListMovePiece(a));
  },
  calculateBottonColor: function () {
    var a = this.getLogic().getMyClientState();
    return a.isObserver ? (this.isReverse ? 1 : 0) : a.chessColor;
  },
  processTakenListMovePiece: function (a) {
    var b = this.getLogic().getMyClientState();
    logMessage("processTakenListMovePiece" + b.getName() + " chessIndex: " + a);
    if (
      b.isObserver ||
      this.chessPieces[a].chessColor == b.chessColor ||
      this.chessPieces[a].faceState != FACE_DOWN
    )
      this.chessPieces[a].chessColor != this.calculateBottonColor()
        ? (this.boxQuanAnBottom.pushToChessList(this.chessPieces[a], !1),
          this.updatePosForBoxQuanAn(this.boxQuanAnBottom, !1))
        : (this.boxQuananTop.pushToChessList(this.chessPieces[a], !1),
          this.updatePosForBoxQuanAn(this.boxQuananTop, !0));
  },
  processTakenListRealTypeReturn: function (a) {
    var b = this.getLogic().getMyClientState();
    logMessage(
      "processTakenListRealTypeReturn" +
        b.getName() +
        " chessIndex: " +
        a +
        " chessType: " +
        this.chessPieces[a].chessType
    );
    b.isObserver ||
      this.chessPieces[a].chessColor == b.chessColor ||
      (this.chessPieces[a].setPieceFace(FACE_UP),
      this.chessPieces[a].setPieceDeadFace(FACE_DOWN),
      this.boxQuanAnBottom.pushToChessList(this.chessPieces[a], !0),
      this.updatePosForBoxQuanAn(this.boxQuanAnBottom, !1));
  },
  updatePosForBoxQuanAn: function (a, b) {
    var d = 0.6 * GAME_SCALE;
    isWebPlatform() || (d = 0.6 * GAME_SCALE);
    0.1 >= d && (d = 0.1);
    var e = a.getOrderChessPieceList(),
      f,
      g,
      h,
      k,
      m = 0,
      n = 1,
      p = 0.95;
    f = 0;
    for (g = a.chessList.length; f < g; f++) {
      if (isWebPlatform()) {
        f / 5 == n && (n++, (m = 0));
        2 < n && (p = 0.68);
        h = CHESS_WIDTH * d * 0.7 * m;
        k = CHESS_HEIGHT * d * p * n;
        var r = a.x - a.getContentSize().width / 2 + CHESS_WIDTH * d * 0.5,
          s = a.y + a.getContentSize().height / 2 + CHESS_HEIGHT * d * 0.5;
        h = r + h;
        k = s - k;
        m++;
      } else
        (r = a.x - a.getWidth() / 2),
          (s = a.y),
          b && (r = a.x + a.getWidth() / 2),
          (k = s),
          (h = r + (f + 1) * CHESS_WIDTH * d * 1),
          b && (h = r - (f + 1) * CHESS_WIDTH * d * 1);
      e[f].setScale(d);
      e[f].setPosition(h, k);
    }
    for (; 0 < a.removeList.length; )
      (d = a.removeList.pop()), this.moveTakenPiece(d, r, s);
  },
  removeOtherItemsFromTable: function () {
    this.takenList = [];
    this._super();
  },
  onPrepareNewGame: function () {
    this.removeOtherItemsFromTable();
    this._super();
  },
});
BkTakenListChessPiece = BkSprite.extend({
  chessList: null,
  countListByIndex: null,
  chessListIndex: null,
  removeList: null,
  SORT_INDEX_CHESS: [3, 4, 5, 1, 2, 6],
  ctor: function () {
    var a = res_name.BoxQuanAn;
    isWebPlatform() || (a = res_name.box_quan_an_trans);
    this._super("#" + a);
    this.reset();
  },
  reset: function () {
    this.removeList = [];
    this.chessList = [];
    this.countListByIndex = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    this.chessListIndex = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
  },
  pushToChessList: function (a, b) {
    var d = a.chessType;
    if (a.deadFaceType == FACE_DOWN || a.faceState == FACE_DOWN)
      d = b ? d + 6 : 0;
    logMessage(
      "Push to Chess list: " +
        d +
        " - " +
        a.faceState +
        " dead Face Type: " +
        a.deadFaceType
    );
    this.countListByIndex[d]++;
    1 == this.countListByIndex[d]
      ? (this.chessList.push(a),
        (this.chessListIndex[d] = this.chessList.length - 1))
      : (this.removeList.push(a),
        this.chessList[this.chessListIndex[d]].increaseCountNumber());
  },
  getOrderChessPieceList: function () {
    var a = [];
    0 < this.countListByIndex[0] &&
      a.push(this.chessList[this.chessListIndex[0]]);
    for (var b = 1; 6 >= b; b++) {
      var d = this.SORT_INDEX_CHESS[b - 1];
      0 < this.countListByIndex[d] &&
        a.push(this.chessList[this.chessListIndex[d]]);
      0 < this.countListByIndex[d + 6] &&
        a.push(this.chessList[this.chessListIndex[d + 6]]);
    }
    return a;
  },
});
WD_PLAYER_INFO_ITEM_X = 10;
WD_PLAYER_INFO_ITEM_Y = 5;
WD_PLAYER_INFO_AVATAR_MARGIN_CENTER = 60;
MAX_XEP_HANG = 2e8;
BkPlayerInfo = BkBaseChessWindow.extend({
  selectedPlayerName: null,
  playerData: null,
  imgBg: null,
  btnKetBan: null,
  isMe: !1,
  ctor: function (a) {
    this.isMe = !0;
    a != BkGlobal.UserInfo.getUserName() && (this.isMe = !1);
    var b = cc.size(610, 620);
    isWebPlatform() ||
      ((b = 845),
      this.isMe || (b = 910),
      (b = cc.size(629 * GAME_SCALE, b * GAME_SCALE)));
    logMessage("sizeWD: " + b.width + " - " + b.height);
    this._super("", b, null);
    this.addTitleImage(res_name.title_wd_thongtin);
    this.selectedPlayerName = a;
    this.setVisibleOutBackgroundWindow(!0);
    isWebPlatform() && this.setMoveableWindow(!0);
    BkLogicManager.getLogic().setOnLoadComplete(this);
    this.processOverViewPlayer(a);
    this.bake();
    NativeInterface.logFirebaseEvent(EVENT_NAME.PLAYER_INFO_WD);
  },
  changeAvatarClick: function () {
    logMessage("changeAvatarClick");
    showPopupMessageWith(
      "\u1ea2nh \u0111\u1ea1i di\u1ec7n s\u1ebd \u0111\u01b0\u1ee3c l\u1ea5y theo t\u00e0i kho\u1ea3n Facebook, b\u1ea1n c\u00f3 mu\u1ed1n thay \u0111\u1ed5i kh\u00f4ng?",
      "",
      function () {
        logMessage("okCallback");
        NativeInterface.doLoginFB(FB_CS.STATE_FB_LINK_USER);
      }
    );
  },
  drawPlayerData: function () {
    var a = ZColor.DEFAULT_TEXT_COLOR,
      b = this.playerData.playerAchievements[0],
      d = this.playerData.playerAchievements[1],
      e = new BkAvartarImg.getAvatarByID(
        this.playerData.getAvatarId(),
        Math.max(b.level, d.level)
      );
    this.addChildBody(e);
    e.setScale(GAME_SCALE);
    var f = this.getWindowSize().width / 2;
    e.x = f;
    e.y = this.getWindowSize().height - 1.2 * e.height;
    isWebPlatform() ||
      (null != this.headerChessWD &&
        (e.y =
          this.headerChessWD.y -
          this.headerChessWD.getBoundingBox().height / 2 -
          0.5 * e.getBoundingBox().height));
    if (
      this.isMe &&
      !BkGlobal.isConnectedFB &&
      (f = getCurrentScene()) &&
      f instanceof BkChooseGame
    ) {
      logMessage(
        "isMe + !isConnectedFB -\x3e suggest lien ket FB -\x3e change ava"
      );
      var g = this,
        f = new BkButton(
          res_name.btn_upd_avatar,
          res_name.btn_upd_avatar_press,
          res_name.btn_upd_avatar,
          res_name.btn_upd_avatar,
          ccui.Widget.PLIST_TEXTURE
        );
      f.setScale(0.8 * GAME_SCALE);
      f.x = e.x + 0.3 * e.getBoundingBox().width;
      f.y = e.y + 0.3 * e.getBoundingBox().height;
      this.addChildBody(f);
      f.addClickEventListener(function () {
        g.changeAvatarClick();
      });
    }
    var h = (f = null),
      k = null,
      m = null,
      n = null,
      f = cc.spriteFrameCache.getSpriteFrame(res_name.name_frame),
      h = cc.rect(50, 20, 166, 15),
      f = new cc.Scale9Sprite(f, h),
      p = this.playerData.getUserName(),
      r = 30,
      s = 38,
      u = 32,
      v = 35,
      t = 38,
      w = GAME_SCALE;
    isWebPlatform()
      ? ((r = 18),
        (s = 30),
        (v = u = 25),
        (t = 28),
        (w = 0.8),
        (e.x = this.getWindowSize().width / 4.5),
        f.setScale(w),
        (f.x = this.getWindowSize().width / 2.5 + f.getBoundingBox().width / 2),
        (f.y = e.y + 0.1 * e.getBoundingBox().height))
      : (f.setScale(w),
        (f.x = this.getWindowSize().width / 2),
        (f.y = e.y - 1.3 * e.getBoundingBox().height));
    this.addChildBody(f);
    h = new BkSprite("#" + res_name.info_popUp);
    h.setScale(GAME_SCALE);
    h.x = f.x;
    h.y = f.y - f.getBoundingBox().height - h.getBoundingBox().height / 2;
    this.addChildBody(h);
    m = new BkSprite("#" + res_name.CT_iconInfoWD);
    m.setScale(GAME_SCALE);
    m.x = h.x - h.getBoundingBox().width / 2 + 0.3 * m.getBoundingBox().width;
    m.y = h.y;
    this.addChildBody(m);
    k = new BkSprite("#" + res_name.info_popUp);
    k.setScale(GAME_SCALE);
    k.x = f.x;
    k.y = h.y - h.getBoundingBox().height - 0.1 * f.getBoundingBox().height;
    this.addChildBody(k);
    n = new BkSprite("#" + res_name.CU_iconInfoWD);
    n.setScale(GAME_SCALE);
    n.x = k.x - k.getBoundingBox().width / 2 + 0.3 * n.getBoundingBox().width;
    n.y = k.y;
    this.addChildBody(n);
    p = new BkLabel(p, "", r + 2);
    p.y = f.y;
    p.x = f.x;
    p.setTextColor(a);
    p.setScaleM(w);
    this.addChildBody(p);
    if (
      null != f &&
      ((p.y = f.y),
      (p.x = f.x),
      (a = p.getBoundingBox().width / w),
      (r = f.getBoundingBox().width / w),
      a > r)
    ) {
      var x = a + 0.15 * r;
      logMessage(
        "scale wid BG " + a + " maxwidLBName: " + r + " mybgWid: " + x
      );
      f.width = x;
      isWebPlatform() &&
        ((f.x = this.getWindowSize().width / 2.8 + x / 2 - 20 * w),
        (p.x = f.x));
    }
    this.playerData.getUserName() == BkGlobal.UserInfo.getUserName() &&
      BkGlobal.currentGS != GS.INGAME_GAME &&
      BkGlobal.isReanamable &&
      ((a = createBkButtonPlist(
        res_name.change_name,
        res_name.change_name,
        res_name.change_name,
        res_name.change_name
      )),
      (a.x =
        p.x +
        p.getBoundingBox().width / 2 +
        a.getBoundingBox().width / 2 +
        22 * GAME_SCALE +
        5),
      (a.y = p.y),
      (w = GAME_SCALE),
      isWebPlatform() && (w = 0.5),
      a.setScale(w),
      this.addChildBody(a),
      a.addClickEventListener(function () {
        var a = new BkRenameWindow();
        a.setParentWindow(y);
        a.showWithParent();
      }),
      null != f &&
        ((a.x =
          f.x + f.getBoundingBox().width / 2 - 0.3 * a.getBoundingBox().width),
        (a.y = f.y)));
    a = 20;
    r = w = ZColor.TEXT_COLOR_LABEL_POPUP;
    isWebPlatform() || ((a = 35), (r = w = ZColor.TEXT_COLOR_LABEL_POPUP));
    w = [
      new BkLabelItem("Ng\u01b0\u1eddi theo d\u00f5i: ", a, w, 1, !1),
      new BkLabelItem(this.playerData.getFollower(), a, r, 1, !1),
    ];
    this.lblFollower = new BkLabelSprite(w);
    this.lblFollower.x =
      this.getWindowSize().width / 2 +
      20 * GAME_SCALE -
      this.lblFollower.getContentSize().width / 2;
    this.lblFollower.y = p.y - p.getContentSize().height / 2 - 44 + 0.5;
    this.addChildBody(this.lblFollower);
    isWebPlatform() ||
      null == k ||
      (this.lblFollower.setScale(GAME_SCALE),
      (this.lblFollower.y =
        k.y -
        k.getBoundingBox().height / 2 -
        this.lblFollower.getBoundingBox().height),
      (this.lblFollower.x = k.x - this.lblFollower.getBoundingBox().width / 2));
    p = ZColor.TEXT_COLOR_NAME_BAN_BE;
    a = cc.color(174, 18, 29);
    w = new BkLabel("Elo: " + b.level, "", s, !0);
    w.setScale(GAME_SCALE);
    s = 0.85 * w.getBoundingBox().height;
    isFBInstantGame() && (s = 0.85 * w.getContentSize().height * GAME_SCALE);
    r = ZColor.TEXT_COLOR_NAME_BAN_BE;
    w = b.rank;
    1e4 <= w && (w = "xxx");
    w = [
      new BkLabelItem("Elo: ", v, ZColor.TEXT_COLOR_NAME_BAN_BE, 1, !0),
      new BkLabelItem(b.level, t, r, 1, !0),
      new BkLabelItem("  H\u1ea1ng: ", v, ZColor.TEXT_COLOR_NAME_BAN_BE, 1, !0),
      new BkLabelItem(w, t, r, 1, !0),
    ];
    lbELCT = new BkLabelSprite(w);
    lbELCT.setScale(GAME_SCALE);
    lbELCT.x = m.x + m.getBoundingBox().width / 2 + 10 * GAME_SCALE;
    lbELCT.y = m.y + s - lbELCT.getBoundingBox().height / 2;
    this.addChildBody(lbELCT);
    w = [
      new BkLabelItem("Th\u1eafng: ", u, p, 1, !0),
      new BkLabelItem(b.winCount, u, a, 1, !0),
      new BkLabelItem("   Thua: ", u, p, 1, !0),
      new BkLabelItem(b.loseCount, u, a, 1, !0),
    ];
    lbTTHCT = new BkLabelSprite(w);
    lbTTHCT.setScale(GAME_SCALE);
    lbTTHCT.x = m.x + m.getBoundingBox().width / 2 + 10 * GAME_SCALE;
    lbTTHCT.y = m.y - s;
    this.addChildBody(lbTTHCT);
    b = s;
    w = d.rank;
    1e4 <= w && (w = "xxx");
    w = [
      new BkLabelItem("Elo: ", v, ZColor.TEXT_COLOR_NAME_BAN_BE, 1, !0),
      new BkLabelItem(d.level, t, r, 1, !0),
      new BkLabelItem("  H\u1ea1ng: ", v, ZColor.TEXT_COLOR_NAME_BAN_BE, 1, !0),
      new BkLabelItem(w, t, r, 1, !0),
    ];
    lbELCU = new BkLabelSprite(w);
    lbELCU.setScale(GAME_SCALE);
    lbELCU.x = n.x + n.getBoundingBox().width / 2 + 10 * GAME_SCALE;
    lbELCU.y = n.y + s - lbELCU.getBoundingBox().height / 2;
    this.addChildBody(lbELCU);
    w = [
      new BkLabelItem("Th\u1eafng: ", u, p, 1, !0),
      new BkLabelItem(d.winCount, u, a, 1, !0),
      new BkLabelItem("   Thua: ", u, p, 1, !0),
      new BkLabelItem(d.loseCount, u, a, 1, !0),
    ];
    lbTTHCU = new BkLabelSprite(w);
    lbTTHCU.setScale(GAME_SCALE);
    lbTTHCU.x = n.x + n.getBoundingBox().width / 2 + 10 * GAME_SCALE;
    lbTTHCU.y = n.y - b;
    this.addChildBody(lbTTHCU);
    var y = this,
      b = this.getBodySize().width / 2;
    this.playerData.getUserName() != BkGlobal.UserInfo.getUserName() &&
      (this.playerData.getIsFriend()
        ? (this.btnKetBan = new BkButton(
            res_name.btnHuyTheoDoi,
            res_name.btnHuyTheoDoiPress,
            res_name.btnHuyTheoDoi,
            res_name.btnHuyTheoDoi,
            ccui.Widget.PLIST_TEXTURE
          ))
        : (this.btnKetBan = new BkButton(
            res_name.btnTheodoi,
            res_name.btnTheodoiPress,
            res_name.btnTheodoi,
            res_name.btnTheodoi,
            ccui.Widget.PLIST_TEXTURE
          )),
      (d = 0.5 * this.getWindowSize().width),
      (b = 0.2 * this.getWindowSize().width),
      this.btnKetBan.setScale(GAME_SCALE),
      (this.btnKetBan.x = d - b),
      (this.btnKetBan.y = this.btnKetBan.getContentSize().height / 2),
      this.addChildBody(this.btnKetBan),
      this.btnKetBan.addClickEventListener(function () {
        y.playerData.getIsFriend() ? y.doRemoveFriend() : y.doKetBan();
        BkLogicManager.getLogic().setOnLoadComplete(y);
      }),
      (b = d + b));
    d = new BkButton(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong,
      ccui.Widget.PLIST_TEXTURE
    );
    d.setScale(GAME_SCALE);
    d.x = b;
    d.y = d.getContentSize().height / 2;
    this.addChildBody(d);
    d.addClickEventListener(function () {
      y.removeSelf();
    });
    isWebPlatform()
      ? ((h.x = this.getWindowSize().width / 2),
        (h.y =
          e.y -
          e.getBoundingBox().height / 0.95 -
          h.getBoundingBox().height / 2),
        (m.x =
          h.x - h.getBoundingBox().width / 2 + 0.3 * m.getBoundingBox().width),
        (m.y = h.y),
        (lbELCT.x = m.x + m.getBoundingBox().width / 2 + 10 * GAME_SCALE),
        (lbELCT.y = m.y + 5),
        (lbTTHCT.x = m.x + m.getBoundingBox().width / 2 + 10 * GAME_SCALE),
        (lbTTHCT.y = m.y - 30),
        (k.x = h.x),
        (k.y =
          h.y - h.getBoundingBox().height - 0.3 * f.getBoundingBox().height),
        (n.x =
          k.x - k.getBoundingBox().width / 2 + 0.3 * n.getBoundingBox().width),
        (n.y = k.y),
        (lbELCU.x = n.x + n.getBoundingBox().width / 2 + 10 * GAME_SCALE),
        (lbELCU.y = n.y + 5),
        (lbTTHCU.y = n.y - 30),
        (lbTTHCU.x = n.x + n.getBoundingBox().width / 2 + 10 * GAME_SCALE),
        (d.y += 30),
        this.btnKetBan && (this.btnKetBan.y = d.y))
      : ((e = 1.2),
        this.isMe || (e = 2),
        (d.y = d.getBoundingBox().height * e),
        null != this.btnKetBan && (this.btnKetBan.y = d.y));
    this.btnKetBan &&
      !isWebPlatform() &&
      ((e = ZColor.TEXT_COLOR_LABEL_POPUP),
      logMessage("add notify promote friend"),
      (d = new BkLabel(
        "Ch\u00fa \u00fd: B\u1ea1n c\u00f3 th\u1ec3 xem ho\u1eb7c ch\u01a1i c\u00f9ng ng\u01b0\u1eddi b\u1ea1n theo d\u00f5i trong ph\u1ea7n b\u1ea1n b\u00e8.",
        "",
        18,
        !1,
        !0
      )),
      d.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),
      d.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),
      d.setTextColor(e),
      (d.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE),
      (d.x = 0.5 * this.getWindowSize().width),
      isWebPlatform() || d.setScale(GAME_SCALE),
      (d.y =
        this.btnKetBan.y -
        0.5 * this.btnKetBan.getBoundingBox().height -
        0.5 * d.getBoundingBox().height),
      this.addChildBody(d));
  },
  updateLabelTheoDoi: function (a) {
    var b = 0,
      d = 0;
    null != this.lblFollower &&
      ((b = this.lblFollower.x),
      (d = this.lblFollower.y),
      this.lblFollower.removeFromParent());
    var e = 20,
      f = ZColor.DEFAULT_TEXT_COLOR,
      g = ZColor.HIGHLIGHT_TEXT_COLOR;
    isWebPlatform() || ((e = 35), (g = f = ZColor.TEXT_COLOR_LABEL_POPUP));
    a = this.playerData.getFollower() + a;
    this.playerData.setFollower(a);
    e = [
      new BkLabelItem("Ng\u01b0\u1eddi theo d\u00f5i: ", e, f, 1, !1),
      new BkLabelItem(a, e, g, 1, !1),
    ];
    this.lblFollower = new BkLabelSprite(e);
    this.lblFollower.x = b;
    this.lblFollower.y = d;
    this.addChildBody(this.lblFollower);
    isWebPlatform() || this.lblFollower.setScale(GAME_SCALE);
  },
  onLoadComplete: function (a, b) {
    BkLogicManager.getLogic().setOnLoadComplete(null);
    Util.removeAnim();
    switch (b) {
      case c.NETWORK_REQUEST_FRIEND_SUCCESS:
        showToastMessage(
          "B\u1ea1n \u0111\u00e3 b\u1eaft \u0111\u1ea7u theo d\u00f5i: " +
            this.selectedPlayerName,
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2
        );
        this.removeSelf();
        break;
      case c.NETWORK_REMOVE_FRIEND_SUCCESS:
        showToastMessage(
          "\u0110\u00e3 x\u00f3a " +
            a +
            " kh\u1ecfi danh s\u00e1ch theo d\u00f5i.",
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2,
          null,
          200
        );
        this.playerData.setIsFriend(!1);
        null != this.btnKetBan &&
          (isWebPlatform()
            ? this.btnKetBan.setTitleText("Theo d\u00f5i")
            : this.btnKetBan.loadTextures(
                res_name.btnTheodoi,
                res_name.btnTheodoiPress,
                res_name.btnTheodoi,
                res_name.btnTheodoi,
                ccui.Widget.PLIST_TEXTURE
              ));
        if (this.getParentWindow()) {
          var d = this.getParentWindow();
          d instanceof BkFriendsWindow &&
            (logMessage("xoa ban tu friend wd -\x3e refresh list"),
            d.loadFriendsList());
        }
        this.updateLabelTheoDoi(-1);
        break;
      case c.NETWORK_OVERVIEW_OTHER_PROFILE_RETURN:
        (this.playerData = a),
          this.playerData.setUserName(this.selectedPlayerName),
          this.drawPlayerData();
    }
  },
  processOverViewPlayer: function (a) {
    Util.showAnim();
    var b = new BkPacket();
    b.CreateGetProfilePacket(a, c.NETWORK_GET_OVERVIEW_OTHER_PROFILE);
    BkConnectionManager.send(b);
    this.playerData = new BkUserData();
  },
  doKetBan: function () {
    var a = new BkPacket();
    a.CreateAddFriendPacket(this.playerData.getUserName());
    BkConnectionManager.send(a);
  },
  doRemoveFriend: function () {
    var a = new BkPacket();
    a.CreateRemoveFriendPacket(this.playerData.getUserName());
    BkConnectionManager.send(a);
  },
  onExit: function () {
    this._super();
    BkLogicManager.getLogic().setOnLoadComplete(null);
  },
});
BkInviteOtherPlayer = BkWindow.extend({
  _friendListGrid: null,
  _tabList: ["Ph\u00f2ng ch\u1edd", "B\u1ea1n b\u00e8"],
  _friendList: null,
  _friendUIItemList: null,
  _logic: null,
  _isLoadedData: !1,
  ctor: function (a) {
    this._super("", cc.size(750 * GAME_SCALE, 900 * GAME_SCALE), null);
    this._logic = a;
    this.initFr();
    this.initHeader();
  },
  setWindowBG: function () {
    this._wdBodyInnerSize = cc.size(
      this.getBodySize().width - 2 * WD_BODY_MARGIN_LR + 4,
      this.getBodySize().height
    );
    var a = new BkSprite("#" + res_name.darkbg_popupmoiban);
    a.scaleX = this.getBodyInnerSize().width / a.width;
    a.scaleY = this.getBodySize().height / a.height;
    a.x = this.getWindowSize().width / 2;
    a.y = this.getWindowSize().height / 2;
    this.addChildBody(a);
  },
  initHeader: function () {},
  initFr: function () {
    this.setMoveableWindow(!0);
  },
  invitePlayer: function (a) {
    this._logic.invitePlayer(a);
  },
  selectedTabEvent: function (a, b) {
    1 == b
      ? this._isLoadedData && this._logic.processGetWaitingPlayerList()
      : this._logic.processGetOnlineFriendList();
  },
  cleanGUI: function () {
    null != this._friendListGrid &&
      (this._friendListGrid.removeFromParent(),
      this.btnInvite.removeFromParent(),
      this.btnClose.removeFromParent());
  },
  updateUI: function () {
    1 == this.getCurrentTab()
      ? this.drawFriendsList(this._friendList, this.getCurrentTab())
      : 2 == this.getCurrentTab() &&
        this.drawFriendsList(this._invitationList, this.getCurrentTab());
  },
  drawFriendsList: function (a, b) {
    Util.removeAnim();
    this._isLoadedData = !0;
    this.cleanGUI();
    this._friendListGrid = new BkSprite();
    this._friendUIItemList = [];
    this.addChildBody(this._friendListGrid, 1);
    var d = this.getBodySize().height + this.getWindowHeaderHeight(),
      e = this.getBodySize().width - 2 * WD_BODY_MARGIN_LR;
    if (null != a && 0 < a.length) {
      var f = new BkSprite(res.Tranperent_IMG);
      this._friendListGrid.addChild(f);
      var g = new BkLabel("Ch\u1ecdn t\u1ea5t c\u1ea3", "Arial", 14);
      g.setTextColor(BkColor.SELECT_BOX_COLOR);
      g.x = g.getContentSize().width / 2;
      g.y = g.getContentSize().height / 2;
      f.addChild(g);
      var h = new BkCheckBox();
      h.x = g.x + g.getContentSize().width / 2 + h.width;
      h.y = g.y;
      f.addChild(h);
      f.setContentSize(cc.size(h.width + g.getContentSize().width, h.height));
      f.x = e - f.getContentSize().width / 2 - 40;
      var k = this;
      h.setSelected(!0);
      f.setMouseOnHover();
      f.setOnlickListenner(function () {
        h.setSelected(!h.isSelected());
        k.checkAllList(k, h.isSelected());
      });
      h.addEventListener(function () {
        k.checkAllList(k, h.isSelected());
      });
      for (
        var g = function () {
            for (var a = !0, b = 0; b < k._friendUIItemList.length; b++)
              if (!k._friendUIItemList[b].isSelected()) {
                a = !1;
                break;
              }
            h.setSelected(a);
          },
          m = 0;
        m < a.length && !(5 <= m);
        m++
      ) {
        var n = new BkIngameInviteFriendItem(a[m], d, this, !1, e);
        n.setOncallbackOncheckChange(g);
        n.updateSelectedState(!0);
        d = n.y;
        this._friendListGrid.addChild(n);
        this._friendUIItemList.push(n);
      }
      this._friendListGrid.x = 40;
      this._friendListGrid.y = 15;
      f.y = d - f.height / 2 - 15;
      this.btnInvite = createBkButtonPlist(
        res_name.btn_moi_normal,
        res_name.btn_moi_pressed,
        res_name.btn_moi_pressed,
        res_name.btn_moi_hover
      );
      this.btnInvite.setScale(GAME_SCALE);
      this.btnInvite.addTouchEventListener(function (a, b) {
        if (b == ccui.Widget.TOUCH_ENDED) {
          var d = 0;
          if (null != k._friendUIItemList) {
            for (var e = 0; e < k._friendUIItemList.length; e++) {
              var f = k._friendUIItemList[e];
              f.isSelected() && (d++, k.invitePlayer(f.getPlayerName()));
            }
            0 == d
              ? showToastMessage(
                  "B\u1ea1n ph\u1ea3i ch\u1ecdn ng\u01b0\u1eddi ch\u01a1i \u0111\u1ec3 m\u1eddi."
                )
              : (showToastMessage(
                  "\u0110\u00e3 g\u1eedi l\u1eddi m\u1eddi th\u00e0nh c\u00f4ng.",
                  480,
                  getYposforToast(BkGlobal.currentGameID),
                  null,
                  190
                ),
                k.removeSelf());
          }
        }
      }, this);
      this.btnInvite.x = (this.getBodySize().width / 4) * 3;
      this.btnInvite.y = d - 50;
      this.btnInvite.y = 1.25 * this._bgBottom.y;
      this.addChildBody(this.btnInvite);
      this.btnClose = createBkButtonPlist(
        res_name.btn_dong_normal,
        res_name.btn_dong_pressed,
        res_name.btn_dong_pressed,
        res_name.btn_dong_hover
      );
      this.btnClose.setScale(GAME_SCALE);
      this.btnClose.addTouchEventListener(function (a, b) {
        b == ccui.Widget.TOUCH_ENDED && k.removeSelf();
      }, this);
      this.btnClose.x = this.getBodySize().width / 4;
      this.btnClose.y = this.btnInvite.y;
      this.addChildBody(this.btnClose);
    } else
      (d = new BkLabel("", "Arial", 16)),
        1 == b
          ? d.setString(
              "Kh\u00f4ng t\u00ecm th\u1ea5y ng\u01b0\u1eddi ch\u01a1i."
            )
          : 2 == b &&
            d.setString(
              "B\u1ea1n b\u00e8 c\u1ee7a b\u1ea1n \u0111ang b\u1eadn."
            ),
        d.setPosition(0, 0),
        this._friendListGrid.addChild(d),
        (this._friendListGrid.x = this.getBodySize().width / 2),
        (this._friendListGrid.y = this.getBodySize().height / 2);
  },
  checkAllList: function (a, b) {
    if (null != a._friendUIItemList)
      for (var d = 0; d < a._friendUIItemList.length; d++)
        a._friendUIItemList[d].updateSelectedState(b);
  },
});
BkSettingWindow = BkWindow.extend({
  playerData: null,
  rdGroupSound: null,
  rdGroupChat: null,
  rdGroupNumOfPlayer: null,
  rdGroupTablePass: null,
  rdGroupTablePass: null,
  ctor: function () {
    var a = cc.size(460, 341);
    Util.isGameCo() && (a = cc.size(350, 260));
    this._super("C\u00e0i \u0110\u1eb7t", a, null);
    this.initWindow();
    Util.logEvent(EVENT_SWITCH_SCREEN, KEY_SCREEN_NAME, "ConfigScene");
  },
  initWindow: function () {
    this.setDefaultWdBodyBg();
    var a = this,
      b = cc.winSize,
      d = new BkLabel("\u00c2m thanh", "Tahoma", 15);
    d.setTextColor(cc.color(255, 255, 255));
    d.x = d.getContentSize().width / 2 + 2 * WD_BODY_MARGIN_LR;
    d.y =
      this.getBodySize().height -
      d.getContentSize().height / 2 -
      2 * WD_BODY_MARGIN_TB;
    this.addChildBody(d);
    var e = new BkRadioButtonData(0, 1, ""),
      f = new BkRadioButton(e.description);
    f.setData(e);
    f.x = d.x + 70;
    f.y = d.y - 12;
    this.addChildBody(f);
    var g = new BkSprite("#" + res_name.icon_sound_on);
    g.x = f.x + 35;
    g.y = f.y + 12;
    this.addChildBody(g);
    var h = new BkRadioButtonData(1, 0, ""),
      e = new BkRadioButton(h.description);
    e.setData(h);
    e.x = g.x + 50;
    e.y = f.y;
    this.addChildBody(e);
    h = new BkSprite("#" + res_name.icon_sound_off);
    h.x = e.x + 35;
    h.y = g.y;
    this.addChildBody(h);
    this.rdGroupSound = new BkRadioButtonGroup();
    f.setGroup(this.rdGroupSound);
    e.setGroup(this.rdGroupSound);
    1 == BkGlobal.UserSetting.soundEnable
      ? (this.rdGroupSound.setRadioSelected(f),
        (BkLogicManager.getInGameLogic().isSoundEnable = !0))
      : (this.rdGroupSound.setRadioSelected(e),
        (BkLogicManager.getInGameLogic().isSoundEnable = !1));
    g = new BkLabel("Hi\u1ec3n th\u1ecb chat", "Tahoma", 15);
    g.setTextColor(cc.color(255, 255, 255));
    g.x = d.x + 7;
    g.y = d.y - 35;
    this.addChildBody(g);
    d = new BkRadioButtonData(2, 1, "B\u1eadt");
    h = new BkRadioButton(d.description);
    h.setData(d);
    h.x = f.x;
    h.y = g.y - 12;
    this.addChildBody(h);
    var d = new BkRadioButtonData(3, 0, "T\u1eaft"),
      k = new BkRadioButton(d.description);
    k.setData(d);
    k.x = e.x;
    k.y = h.y;
    this.addChildBody(k);
    this.rdGroupChat = new BkRadioButtonGroup();
    h.setGroup(this.rdGroupChat);
    k.setGroup(this.rdGroupChat);
    1 == BkGlobal.UserSetting.isChatEnable
      ? this.rdGroupChat.setRadioSelected(h)
      : this.rdGroupChat.setRadioSelected(k);
    if (
      BkGlobal.currentGameID != GID.CO_TUONG &&
      BkGlobal.currentGameID != GID.CO_UP
    ) {
      d = getMaxPlayer(BkGlobal.currentGameID);
      0 == BkLogicManager.getInGameLogic().maxAllowedPlayer &&
        (BkLogicManager.getInGameLogic().maxAllowedPlayer = d);
      if (0 < d) {
        var m = new BkLabel("S\u1ed1 ng\u01b0\u1eddi ch\u01a1i", "Tahoma", 15);
        m.setTextColor(cc.color(255, 255, 255));
        m.x = g.x;
        m.y = g.y - 35;
        this.addChildBody(m);
        var k = new BkRadioButtonData(4, 2, "2"),
          n = new BkRadioButton(k.description);
        n.setData(k);
        n.x = h.x;
        n.y = m.y - 8;
        this.addChildBody(n);
        k = new BkRadioButtonData(5, 3, "3");
        h = new BkRadioButton(k.description);
        h.setData(k);
        h.x = n.x + 85;
        h.y = n.y;
        this.addChildBody(h);
        var p = new BkRadioButtonData(6, 4, "4"),
          k = new BkRadioButton(p.description);
        k.setData(p);
        k.x = h.x + 85;
        k.y = n.y;
        this.addChildBody(k);
        this.rdGroupNumOfPlayer = new BkRadioButtonGroup();
        n.setGroup(this.rdGroupNumOfPlayer);
        h.setGroup(this.rdGroupNumOfPlayer);
        k.setGroup(this.rdGroupNumOfPlayer);
        if (4 < d) {
          h.x = n.x + 60;
          k.x = h.x + 60;
          var r = new BkRadioButtonData(7, 5, "5"),
            s = new BkRadioButton(r.description);
          s.setData(r);
          s.x = k.x + 60;
          s.y = n.y;
          this.addChildBody(s);
          d = new BkRadioButtonData(8, 6, "6");
          r = new BkRadioButton(d.description);
          r.setData(d);
          r.x = s.x + 60;
          r.y = n.y;
          this.addChildBody(r);
          s.setGroup(this.rdGroupNumOfPlayer);
          r.setGroup(this.rdGroupNumOfPlayer);
        }
        switch (BkLogicManager.getInGameLogic().maxAllowedPlayer) {
          case 2:
            this.rdGroupNumOfPlayer.setRadioSelected(n);
            break;
          case 3:
            this.rdGroupNumOfPlayer.setRadioSelected(h);
            break;
          case 4:
            this.rdGroupNumOfPlayer.setRadioSelected(k);
            break;
          case 5:
            this.rdGroupNumOfPlayer.setRadioSelected(s);
            break;
          case 6:
            this.rdGroupNumOfPlayer.setRadioSelected(r);
            break;
          default:
            this.rdGroupNumOfPlayer.setRadioSelected(k);
        }
      }
      s = new BkLabel("M\u1eadt kh\u1ea9u b\u00e0n", "Tahoma", 15);
      s.setTextColor(cc.color(255, 255, 255));
      s.x = g.x;
      s.y = m.y - 35;
      this.addChildBody(s);
      r = new BkRadioButtonData(9, 1, "C\u00f3");
      m = new BkRadioButton(r.description);
      m.setData(r);
      m.x = f.x;
      m.y = s.y - 8;
      this.addChildBody(m);
      this.tablePass = createEditBox(cc.size(180, 35), res_name.edit_text);
      this.tablePass.setFontColor(BkColor.TEXT_INPUT_COLOR);
      this.tablePass.setPlaceholderFontColor(
        BkColor.TEXT_INPUT_PLACEHOLDER_COLOR
      );
      this.tablePass.setMaxLength(20);
      this.tablePass.x = m.x + 150;
      this.tablePass.y = m.y + 8 + 0.5;
      this.tablePass.setTabStop();
      this.addChildBody(this.tablePass);
      r = new BkRadioButtonData(10, 0, "Kh\u00f4ng");
      d = new BkRadioButton(r.description);
      d.setData(r);
      d.x = m.x;
      d.y = s.y - 43;
      this.addChildBody(d);
      this.rdGroupTablePass = new BkRadioButtonGroup();
      m.setGroup(this.rdGroupTablePass);
      d.setGroup(this.rdGroupTablePass);
      "" == BkLogicManager.getInGameLogic().pass
        ? (this.tablePass.setPlaceHolder("Nh\u1eadp m\u1eadt kh\u1ea9u..."),
          this.tablePass.setPlaceholderFontColor(
            BkColor.TEXT_INPUT_PLACEHOLDER_COLOR
          ),
          this.rdGroupTablePass.setRadioSelected(d),
          this.tablePass.setDisabled(!0))
        : (this.tablePass.setString(BkLogicManager.getInGameLogic().pass),
          this.rdGroupTablePass.setRadioSelected(m),
          this.tablePass.setDisabled(!1));
      this.rdGroupTablePass.setOnSelectedCallback(function () {
        1 == a.rdGroupTablePass.getRadioButtonSelected().getValue()
          ? (a.tablePass.setDisabled(!1), a.tablePass.setAutoFocus(!0))
          : a.tablePass.setDisabled(!0);
      });
      if (
        BkLogicManager.getInGameLogic().isInGameProgress() ||
        BkGlobal.isRoomTypeSolo() ||
        !BkLogicManager.getInGameLogic().isMeBossTable()
      )
        if (
          (BkGlobal.isRoomTypeSolo() &&
            this.rdGroupNumOfPlayer.setRadioSelected(n),
          this.rdGroupNumOfPlayer.setEnableRadioGroup(!1),
          BkLogicManager.getInGameLogic().isInGameProgress() ||
            !BkLogicManager.getInGameLogic().isMeBossTable())
        )
          this.rdGroupTablePass.setEnableRadioGroup(!1),
            this.tablePass.setDisabled(!0);
    }
    BkGlobal.currentGameID == GID.CO_UP &&
      BkLogicManager.getInGameLogic().isMeBossTable() &&
      BkLogicManager.getInGameLogic().gameStatus != GAME_STATE_PLAYING &&
      ((m = new BkLabel("L\u1eadt qu\u00e2n \u0103n", "Tahoma", 15)),
      m.setTextColor(cc.color(255, 255, 255)),
      (m.x = m.getContentSize().width / 2 + 2 * WD_BODY_MARGIN_LR),
      (m.y = g.y - 35),
      this.addChildBody(m),
      (g = new BkRadioButtonData(0, 1, "C\u00f3")),
      (n = new BkRadioButton(g.description)),
      n.setData(g),
      (n.x = f.x),
      (n.y = m.y - 12),
      this.addChildBody(n),
      (f = new BkRadioButtonData(1, 0, "Kh\u00f4ng")),
      (g = new BkRadioButton(f.description)),
      g.setData(f),
      (g.x = e.x),
      (g.y = n.y),
      this.addChildBody(g),
      (this.rdGroupShowTakePiece = new BkRadioButtonGroup()),
      n.setGroup(this.rdGroupShowTakePiece),
      g.setGroup(this.rdGroupShowTakePiece),
      1 == Util.getClientSetting(key.showTakenPiece)
        ? this.rdGroupShowTakePiece.setRadioSelected(n)
        : this.rdGroupShowTakePiece.setRadioSelected(g));
    e = new cc.DrawNode();
    e.drawRect(
      cc.p(0, 0),
      cc.p(this._wdBodyInnerSize.width, 50),
      BkColor.BG_PANEL_COLOR,
      0,
      BkColor.BG_BODY_BORDER_COLOR
    );
    e.x = WD_BODY_MARGIN_LR;
    e.y = 0;
    e = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Inactive,
      res_name.BtnDialog_Hover,
      "Thi\u1ebft l\u1eadp",
      b.width / 2,
      b.height / 2
    );
    e.x = this.getBodySize().width / 2 - 50;
    e.y = WD_BODY_MARGIN_TB + 5;
    this.addChildBody(e);
    e.addClickEventListener(function () {
      var b = a.rdGroupChat.getRadioButtonSelected(),
        d = a.rdGroupSound.getRadioButtonSelected();
      null != b
        ? (BkGlobal.UserSetting.isChatEnable = b.getValue())
        : logMessage("chatRadioSelected \x3d\x3d null -\x3e check loi");
      null != d
        ? (BkGlobal.UserSetting.soundEnable = d.getValue())
        : logMessage("soundRadioSelected \x3d\x3d null -\x3e check loi");
      BkUserClientSettings.updateSetting(BkGlobal.UserSetting);
      getCurrentScene().updateUpDownChatBoxState(
        BkGlobal.UserSetting.isChatEnable
      );
      1 == BkGlobal.UserSetting.soundEnable
        ? (BkLogicManager.getInGameLogic().isSoundEnable = !0)
        : (BkLogicManager.getInGameLogic().isSoundEnable = !1);
      if (
        BkGlobal.currentGameID != GID.CO_TUONG &&
        BkGlobal.currentGameID != GID.CO_UP
      )
        if (
          ((b = a.rdGroupNumOfPlayer.getRadioButtonSelected().getValue()),
          b >= BkLogicManager.getInGameLogic().PlayerState.length)
        ) {
          BkLogicManager.getInGameLogic().maxAllowedPlayer = b;
          a.tablePass.getString();
          if (1 == a.rdGroupTablePass.getRadioButtonSelected().getValue())
            if ("" != a.tablePass.getString())
              BkLogicManager.getInGameLogic().pass = a.tablePass.getString();
            else {
              showToastMessage(
                "M\u1eadt kh\u1ea9u b\u00e0n kh\u00f4ng h\u1ee3p l\u1ec7",
                WINDOW_WIDTH / 2,
                WINDOW_HEIGHT / 3 + 5,
                null,
                200
              );
              return;
            }
          else BkLogicManager.getInGameLogic().pass = "";
          d = BkLogicManager.getInGameLogic().tableBetMoney;
          BkLogicManager.getInGameLogic().setupTable(
            d,
            b,
            BkLogicManager.getInGameLogic().pass
          );
        } else {
          showToastMessage(BkConstString.STR_MAX_PLAYER_INVALID);
          return;
        }
      BkGlobal.currentGameID == GID.CO_UP &&
        BkLogicManager.getInGameLogic().isMeBossTable() &&
        ((d = BkLogicManager.getInGameLogic().tableBetMoney),
        a.rdGroupShowTakePiece &&
          BkLogicManager.getInGameLogic().processBetMaxMoney(
            d,
            a.rdGroupShowTakePiece.getRadioButtonSelected().getValue()
          ));
      a.removeSelf();
    });
    b = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Inactive,
      res_name.BtnDialog_Hover,
      "B\u1ecf qua",
      b.width / 2,
      b.height / 2
    );
    b.x = e.x + e.width / 2 + 50;
    b.y = e.y;
    this.addChildBody(b);
    b.addClickEventListener(function () {
      a.removeSelf();
    });
  },
});
var CHAT_BOX_WIDTH = 0,
  CHAT_BOX_HEIGHT = 0,
  NUMBER_ITEM_CHAT_PER_LINE = 6,
  NUMBER_LINE_CHAT_EMO = 2,
  HEIGHT_EMO = 0,
  CHAT_BOX_START_X = 0,
  CHAT_BOX_START_Y = 0;
BkChatEmoLayer = cc.Layer.extend({
  background: null,
  bgBlack: null,
  isRemoveChat: !1,
  closedChatListener: null,
  igLayer: null,
  spriteFrameCache: cc.spriteFrameCache,
  ctor: function () {
    this._super();
    CHAT_BOX_HEIGHT = 0.2 * cc.winSize.height;
    HEIGHT_EMO = 0.07 * cc.winSize.height;
    this.editChatBoxHeight();
    var a = cc.winSize.width,
      b = cc.winSize.height;
    CHAT_BOX_START_Y = CHAT_BOX_START_X = 0;
    isWebPlatform()
      ? ((CHAT_BOX_WIDTH = 200),
        (NUMBER_ITEM_CHAT_PER_LINE = 3),
        (NUMBER_LINE_CHAT_EMO = 4),
        (CHAT_BOX_HEIGHT = 0.5 * WINDOW_HEIGHT),
        (HEIGHT_EMO = CHAT_BOX_HEIGHT / NUMBER_LINE_CHAT_EMO / 1.5),
        (CHAT_BOX_START_Y = 60),
        (CHAT_BOX_START_X = a - CHAT_BOX_WIDTH))
      : ((CHAT_BOX_WIDTH = cc.winSize.width),
        (NUMBER_ITEM_CHAT_PER_LINE = 6),
        (NUMBER_LINE_CHAT_EMO = 2));
    this.initBlackBG();
    this.initBGChat(a, b);
    this.initListEmoItem();
    this.igLayer = this.getIngameLayer();
    this.pauseEventIngameLayer();
  },
  initListEmoItem: function () {
    this.spriteFrameCache.addSpriteFrames(
      res.chat_emo_static_plist,
      res.icon_chat_emo_static
    );
    for (
      var a = NUMBER_LINE_CHAT_EMO * NUMBER_ITEM_CHAT_PER_LINE, b = 1;
      b <= a;
      b++
    ) {
      var d = "expression" + b + ".png",
        e = !1;
      b == NUMBER_ITEM_CHAT_PER_LINE && (isWebPlatform() || (e = !0));
      d = new BkEmoItem(this.spriteFrameCache.getSpriteFrame(d), b, this, e);
      this.addChild(d);
    }
  },
  initBGChat: function (a, b) {
    var d = res_name.BoxQuanAn;
    isWebPlatform() || (d = res_name.khungchat);
    this.background = new BkSprite("#" + d);
    this.background.setScaleX(
      isWebPlatform() ? 1 : a / this.background.getContentSize().width
    );
    this.background.setScaleY(
      CHAT_BOX_HEIGHT / this.background.getContentSize().height
    );
    this.background.y = CHAT_BOX_HEIGHT / 2 - b / 2 + CHAT_BOX_START_Y;
    this.addChild(this.background);
  },
  initBlackBG: function () {
    var a = cc.winSize.width,
      b = cc.winSize.height;
    this.bgBlack = new BkSprite(res.shadow_co_frame_png);
    this.bgBlack.setScaleX(a / this.bgBlack.getContentSize().width);
    this.bgBlack.setScaleY(b / this.bgBlack.getContentSize().height);
    this.bgBlack.setVisible(!0);
    this.bgBlack.x = CHAT_BOX_WIDTH / 2 - cc.winSize.width / 2;
    this.bgBlack.y = 0;
    this.addChild(this.bgBlack);
    this.addEventCloseChatClickOutSize();
  },
  editChatBoxHeight: function () {},
  isRemoveChatlayerPosition: function (a) {
    var b = cc.rect(
      0,
      CHAT_BOX_HEIGHT,
      CHAT_BOX_WIDTH,
      0.8 * cc.winSize.height - CHAT_BOX_HEIGHT
    );
    return cc.rectContainsPoint(b, a) ? !0 : !1;
  },
  addEventCloseChatClickOutSize: function () {
    var a = this;
    a.isRemoveChat = !1;
    this.closedChatListener = this.bgBlack.createTouchEvent(
      function (b, d) {
        var e = b.getLocation();
        if (a.isRemoveChatlayerPosition(e)) a.isRemoveChat = !0;
        else return !0;
      },
      null,
      function (b, d) {
        a.isRemoveChat && a.removeChatLayer();
      }
    );
    cc.eventManager.addListener(this.closedChatListener, this.bgBlack);
  },
  removeEventCloseChat: function () {
    cc.eventManager.removeListener(this.closedChatListener);
  },
  removeChatLayer: function () {
    this.removeEventCloseChat();
    this.removeFromParent();
    this.resumEventIngameLayer();
    this.getIngameLayer().onRemoveChatLayer();
  },
  getIngameLayer: function () {
    var a = getCurrentScene();
    return a instanceof BkIngame ? a.getGameLayer() : null;
  },
  pauseEventIngameLayer: function () {
    null != this.igLayer && cc.eventManager.pauseTarget(this.igLayer, !0);
  },
  resumEventIngameLayer: function () {
    null != this.igLayer && cc.eventManager.resumeTarget(this.igLayer, !0);
  },
  showMoreEmoItem: function () {
    logMessage("showMoreEmoItem");
    this.removeChatLayer();
    var a = TagOfLayer.Toast - 1,
      b = new BkFullEmoLayer();
    getCurrentScene().addChild(b, a);
  },
});
BkFullEmoLayer = BkChatEmoLayer.extend({
  ctor: function () {
    this._super();
  },
  initBGChat: function (a, b) {
    var d = cc.spriteFrameCache.getSpriteFrame(res_name.khungchat),
      e = cc.rect(250, 77, 250, 78);
    this.background = new cc.Scale9Sprite(d, e);
    this.background.width = a;
    this.background.height = CHAT_BOX_HEIGHT;
    this.background.x = a / 2;
    this.background.y = CHAT_BOX_HEIGHT / 2;
    this.addChild(this.background);
    this.bgBlack.x = cc.winSize.width / 2;
    this.bgBlack.y = cc.winSize.height / 2;
  },
  initBlackBG: function () {
    CHAT_BOX_HEIGHT = 0.38 * cc.winSize.height;
    NUMBER_LINE_CHAT_EMO = 4;
    this._super();
  },
  initListEmoItem: function () {
    this.spriteFrameCache.addSpriteFrames(
      res.chat_emo_static_plist,
      res.icon_chat_emo_static
    );
    for (
      var a = NUMBER_LINE_CHAT_EMO * NUMBER_ITEM_CHAT_PER_LINE, b = 1;
      b <= a;
      b++
    ) {
      var d = new BkEmoItem(
        this.spriteFrameCache.getSpriteFrame("expression" + b + ".png"),
        b,
        this,
        !1
      );
      this.addChild(d);
    }
  },
});
BkEmoItem = BkSprite.extend({
  parentNode: null,
  idEmo: null,
  emoSp: null,
  atHoverPos: !1,
  isMoreItem: !1,
  ctor: function (a, b, d, e) {
    this._super();
    this.idEmo = b;
    this.parentNode = d;
    this.isMoreItem = e;
    var f = this;
    this.emoSp = new BkSprite(a);
    this.isMoreItem &&
      (this.emoSp = new BkSprite("#" + res_name.more_item_chat));
    this.emoSp.setScale(HEIGHT_EMO / this.emoSp.getContentSize().height);
    this.addChild(this.emoSp);
    this.emoSp.setOnlickListenner(function () {
      f.onClickItem(b);
    });
    this.configPos(b);
  },
  configPos: function (a) {
    var b = Math.floor((a - 1) / NUMBER_ITEM_CHAT_PER_LINE);
    a = (a - 1) % NUMBER_ITEM_CHAT_PER_LINE;
    var d = this.emoSp.getBoundingBox().width,
      e = HEIGHT_EMO,
      f =
        (CHAT_BOX_WIDTH - NUMBER_ITEM_CHAT_PER_LINE * d) /
        (NUMBER_ITEM_CHAT_PER_LINE + 1),
      g =
        (CHAT_BOX_HEIGHT - NUMBER_LINE_CHAT_EMO * e) /
        (NUMBER_LINE_CHAT_EMO + 1),
      h = 0.5 * -CHAT_BOX_WIDTH + 0.5 * d + f,
      k = this.parentNode.background.y - CHAT_BOX_HEIGHT / 2 + 0.5 * e + g;
    isWebPlatform() ||
      ((g = 0.05 * CHAT_BOX_HEIGHT),
      (h = 0.5 * d + f),
      (k = this.parentNode.background.y - (CHAT_BOX_HEIGHT / 2 - 0.5 * e - g)));
    this.emoSp.x = h + a * (d + f);
    this.emoSp.y = k + b * (e + g);
  },
  onClickItem: function (a) {
    this.isMoreItem
      ? this.parentNode.showMoreEmoItem()
      : this.createTableChatMessage(Util.getSmileText(a - 1));
  },
  createTableChatMessage: function (a) {
    BkLogicManager.getInGameLogic().lastTimeSendChat = BkTime.GetCurrentTime();
    var b = new BkPacket();
    b.createChatMessage(a);
    BkConnectionManager.send(b);
    this.parentNode.removeChatLayer();
  },
});
BkQuickTextItem = BkSprite.extend({
  idQtext: null,
  parentNode: null,
  ctor: function (a, b) {
    this._super();
    this.idQtext = a;
    this.parentNode = b;
    var d = new cc.SpriteBatchNode("Chess_toast.png");
    this.background = new cc.Scale9Sprite();
    this.background.updateWithBatchNode(
      d,
      cc.rect(0, 0, 37, 38),
      !1,
      cc.rect(12, 12, 12, 12)
    );
    this.addChild(this.background);
    this.textLabel = new BkLabel(this.getTextMessage(), "", 30);
    this.textLabel.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.textLabel.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    var e = GAME_SCALE;
    this.textLabel.setScale(GAME_SCALE);
    this.textLabel.setTextColor(cc.color.WHITE);
    var f = 0.004 * cc.winSize.height,
      d = 0.45 * cc.winSize.width;
    this.textLabel.boundingWidth = d / e;
    this.addChild(this.textLabel);
    e = this.textLabel.getBoundingBox().height + 2 * f;
    f = 0.045 * cc.winSize.height;
    e < f && (e = f);
    this.background.width = d;
    this.background.height = e;
    var g = this,
      f = new BkSprite(res_name.ChessToast);
    f.width = d;
    f.height = e;
    f.setVisible(!1);
    this.addChild(f);
    f.setOnlickListenner(function () {
      g.parentNode.sendChatMessage(g.getTextMessage());
    });
    this.configPos();
  },
  getTextMessage: function () {
    switch (this.idQtext) {
      case 1:
        return "Thua \u0111i b\u00e1c.";
      case 2:
        return "N\u01b0\u1edbc \u0111\u00f3 r\u1ea5t cao.";
      case 3:
        return "Nhanh \u0111i l\u00e2u v\u1eady.";
      case 4:
        return "L\u00e0m v\u00e1n n\u1eefa nh\u00e9.";
      case 5:
        return "Ch\u01a1i hay ngh\u1ec9 \u0111\u00e2y?";
      case 6:
        return "Xin \u0111\u01b0\u1ee3c ch\u1ec9 gi\u00e1o.";
      case 7:
        return "M\u1edf qu\u00e2n \u0111\u1ecf th\u1ebf.";
      case 8:
        return "C\u00e1c h\u1ea1 qu\u00e1 khen.";
    }
    return "Xin ch\u00e0o!";
  },
  configPos: function () {
    var a = 0.73 * cc.winSize.width,
      b = 0.27 * cc.winSize.width,
      d =
        this.parentNode.txtChat.y -
        0.5 * this.parentNode.txtChat.getBoundingBox().height,
      e = 1.1 * this.background.height,
      f = Math.floor((this.idQtext + 1) / 2);
    this.x = 1 == this.idQtext % 2 ? a : b;
    this.y = d - f * e;
  },
});
BkChatLayerMobile = BkChatEmoLayer.extend({
  txtChat: null,
  ctor: function () {
    logMessage("BkChatLayerMobile");
    this._super();
    this.initChatTextBox();
    this.initQuickChatTextItem();
  },
  initQuickChatTextItem: function () {
    for (var a = 1; 9 > a; a++) {
      var b = new BkQuickTextItem(a, this);
      this.addChild(b);
    }
  },
  editChatBoxHeight: function () {
    CHAT_BOX_HEIGHT = 0.5 * cc.winSize.height;
  },
  initBGChat: function (a, b) {
    var d = cc.spriteFrameCache.getSpriteFrame(res_name.khungchat),
      e = cc.rect(250, 77, 250, 78);
    this.background = new cc.Scale9Sprite(d, e);
    this.background.width = a;
    this.background.height = CHAT_BOX_HEIGHT;
    this.background.x = a / 2;
    this.background.y = CHAT_BOX_HEIGHT / 2;
    this.addChild(this.background);
    this.bgBlack.x = cc.winSize.width / 2;
    this.bgBlack.y = cc.winSize.height / 2;
  },
  initChatTextBox: function () {
    var a = cc.size(CHAT_BOX_WIDTH, CHAT_BOX_HEIGHT),
      b = 0.7 * a.width,
      a = 0.1 * a.height,
      d = res_name.changename;
    this.txtChat = new cc.EditBox(cc.size(b, a), new cc.Scale9Sprite(d));
    this.txtChat.x = 0.55 * b;
    this.txtChat.y = CHAT_BOX_HEIGHT - a;
    isFBInstantGame() && this.txtChat.setFontSize(60);
    this.addChild(this.txtChat);
    a = new BkButton(
      res_name.btn_no_text,
      res_name.btn_no_text_press,
      res_name.btn_no_text,
      res_name.btn_no_text,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(0.8 * GAME_SCALE);
    a.x =
      this.txtChat.x + 0.5 * b + a.getContentSize().width * GAME_SCALE * 0.55;
    a.y = this.txtChat.y;
    logMessage("btnAction.x: " + a.x + " btnAction.y: " + a.y);
    a.setTitleText("G\u1eedi");
    a.setTitleFontName(Util.getBtnFontName());
    a.setTitleFontSize(31);
    a.setTitleColor(cc.color(71, 44, 27));
    a.getTitleRenderer().y += 0.1 * a.getBoundingBox().height;
    this.addChild(a);
    var e = this;
    a.addClickEventListener(function () {
      e.sendChatMessage(e.txtChat.getString());
    });
  },
  sendChatMessage: function (a) {
    a = a.replace(/\n/g, "");
    logMessage("sendChatMessage: " + a);
    BkLogicManager.getInGameLogic().lastTimeSendChat = BkTime.GetCurrentTime();
    var b = new BkPacket();
    b.createChatMessage(a);
    BkConnectionManager.send(b);
    this.removeChatLayer();
  },
});
BkChatContentLayer = cc.Layer.extend({
  ctor: function () {
    this._super();
    this.initContentChat();
  },
  initContentChat: function () {
    var a = 100 * GAME_SCALE,
      b = cc.winSize.height,
      d = cc.winSize.width,
      e = 0.2 * b - a;
    this.listView = new BkListView();
    this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);
    this.listView.setTouchEnabled(!0);
    this.listView.setBounceEnabled(!0);
    var f = 0.95 * d;
    this.listView.setContentSize(cc.size(f, e));
    this.listView.x = (d - f) / 2;
    this.listView.y = b - e - a;
    this.addChild(this.listView);
    this.listView.setItemModel(this.getItemModel());
  },
  getMaxWidItem: function () {
    return this.listView.getContentSize().width;
  },
  getItemModel: function () {
    var a = bkFontSizeUtil(40, GAME_SCALE);
    isFBInstantGame() &&
      FBInstant.getPlatform().toLowerCase().includes("web") &&
      (a = 15);
    a = new BkLabel(
      "aaaaaaaaaaaaaaaaaaaaaaaa",
      "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
      a
    );
    a.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
    a.setScale(1);
    a.setTextColor(cc.color.WHITE);
    var b = this.getMaxWidItem();
    a.boundingWidth = b / 1;
    return a;
  },
  addItemString: function (a) {
    var b = this.getItemModel().clone();
    b.setString(a);
    a = (cc.winSize.width - this.getMaxWidItem()) / 2;
    b.x = a + b.getBoundingBox().width / 2;
    this.listView.pushBackCustomItem(b);
    this.listView.jumpToBottom();
  },
});
CHAT_MSG_DISPLAY_DOWN = 0;
CHAT_MSG_DISPLAY_UP = 1;
CHAT_MSG_ROW_HEIGH = 15;
CHAT_QUICK_TEXT_ROW_HEIGH = 22;
CHAT_OPEN_WIDTH = 205;
CHAT_OPEN_HEIGH = 160;
CHAT_BG_COLOR = cc.color(11, 10, 47, 100);
CHAT_POPUP_BG_COLOR = cc.color(132, 97, 68, 255);
CHAT_BG_COLOR_BORDER = cc.color(1, 14, 78, 50);
CHAT_PLACE_HOLDER_TEXT = " Nh\u1eadp n\u1ed9i dung chat ...";
var BkChatBoxLayer = cc.Layer.extend({
  chatOpenBg: null,
  chatMiniSprite: null,
  inputMsg: null,
  chatView: null,
  btnChatUpDown: null,
  quickTextSprite: null,
  quickTextHover: null,
  quickEmoSprite: null,
  quickEmoHover: null,
  btnChatSmileState: null,
  btnChatTxtState: null,
  btnChatSetting: null,
  chatBoxDisplayMode: CHAT_MSG_DISPLAY_DOWN,
  displayChatState: null,
  chatXPosByGame: 0,
  chatYPosByGame: 0,
  isGameCo: !1,
  chatQuickChatText: "Thua \u0111i b\u00e1c.;N\u01b0\u1edbc \u0111\u00f3 r\u1ea5t cao.;Nhanh \u0111i l\u00e2u v\u1eady.;L\u00e0m v\u00e1n n\u1eefa nh\u00e9.;Ch\u01a1i hay ngh\u1ec9 \u0111\u00e2y?;Xin \u0111\u01b0\u1ee3c ch\u1ec9 gi\u00e1o.;M\u1edf qu\u00e2n \u0111\u1ecf th\u1ebf.;C\u00e1c h\u1ea1 qu\u00e1 khen.;K\u1ebft b\u1ea1n \u0111i, mai ch\u01a1i ti\u1ebfp!".split(
    ";"
  ),
  ctor: function (a, b) {
    this._super();
    a && (this.chatBoxDisplayMode = a);
    b && (this.isGameCo = b);
    this.drawChat(this.isGameCo);
    this.initQuickChatText();
    this.initQuickEmoSprite(this.isGameCo);
    this.updateChatItemPos();
  },
  drawChat: function (a) {
    var b = this;
    a = "#" + res_name.chat_bg_mini;
    this.chatMiniSprite = new BkSprite(a);
    this.addChild(this.chatMiniSprite, -1);
    this.btnChatTxt = new BkButton(
      res_name.Btn_Chat_Text,
      res_name.Btn_Chat_Text,
      res_name.Btn_Chat_Text,
      res_name.Btn_Chat_Text_Hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnChatTxt.x = this.btnChatTxt.width / 2 + 8;
    this.btnChatTxt.y = this.chatMiniSprite.height / 2 - 0.5;
    this.btnChatTxt.addTouchEventListener(function (a, e) {
      switch (e) {
        case ccui.Widget.TOUCH_BEGAN:
          return b.onClickBtnChatText(), !0;
      }
    }, this);
    this.chatMiniSprite.addChild(this.btnChatTxt, WD_ZORDER_TOP);
    this.btnChatSmile = new BkButton(
      res_name.Btn_Chat_Smile,
      res_name.Btn_Chat_Smile,
      res_name.Btn_Chat_Smile,
      res_name.Btn_Chat_Smile_Hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnChatSmile.x = Math.floor(
      this.btnChatTxt.x + this.btnChatTxt.width + this.btnChatSmile.width / 2
    );
    this.btnChatSmile.y = this.btnChatTxt.y;
    this.btnChatSmile.addTouchEventListener(function (a, e) {
      switch (e) {
        case ccui.Widget.TOUCH_BEGAN:
          return b.onClickBtnChatSmile(), !0;
      }
    }, this);
    this.chatMiniSprite.addChild(this.btnChatSmile, WD_ZORDER_TOP);
    this.btnChatUpDown = new BkButton(
      res_name.Chess_Btn_Chat_Up,
      res_name.Chess_Btn_Chat_Up,
      res_name.Chess_Btn_Chat_Up,
      res_name.Btn_Chat_Up_Hover,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnChatUpDown.addTouchEventListener(function (a, e) {
      switch (e) {
        case ccui.Widget.TOUCH_BEGAN:
          b.onClickBtnUpDown();
      }
    }, this);
    this.addChild(this.btnChatUpDown, WD_ZORDER_TOP);
    a = this.btnChatTxt.width + this.btnChatSmile.width;
    a =
      this.chatMiniSprite.getContentSize().width + (this.isGameCo ? 4 : 0) - a;
    this.inputMsg = createEditBox(cc.size(a, this.chatMiniSprite.height));
    this.inputMsg.setPlaceHolder(CHAT_PLACE_HOLDER_TEXT);
    this.inputMsg.setInputFlag(cc.EDITBOX_INPUT_FLAG_SENSITIVE);
    this.inputMsg.setMaxLength(250);
    this.inputMsg.setPlaceholderFontSize(14);
    this.inputMsg.setFontColor(cc.color(255, 255, 255));
    this.inputMsg.setTabStop();
    this.inputMsg.setFontSize(14);
    this.inputMsg.attr({
      fontName: res_name.GAME_FONT,
      alignment: cc.TEXT_ALIGNMENT_LEFT,
      x: this.btnChatTxt.width + this.btnChatSmile.width + 25,
      y: this.inputMsg.height / 2,
      anchorX: 0,
      anchorY: 0.5,
    });
    this.chatMiniSprite.addChild(this.inputMsg);
    cc.eventManager.addListener(
      {
        event: cc.EventListener.KEYBOARD,
        onKeyReleased: function (a, e) {
          if (a == cc.KEY.enter)
            b.onInputSendMsgEvent(e, b.inputMsg.getString());
        },
      },
      this.inputMsg
    );
    this.chatOpenBg = new cc.DrawNode();
    this.chatOpenBg.drawRect(
      cc.p(this.chatXPosByGame, this.chatYPosByGame),
      cc.p(CHAT_OPEN_WIDTH, CHAT_OPEN_HEIGH),
      CHAT_BG_COLOR,
      1,
      CHAT_BG_COLOR_BORDER
    );
    this.chatOpenBg.setContentSize(CHAT_OPEN_WIDTH, CHAT_OPEN_HEIGH);
    this.chatOpenBg.anchorY = 0.5;
    this.chatOpenBg.x = -this.chatMiniSprite.width / 2;
    this.chatOpenBg.y = this.chatMiniSprite.height - this.chatYPosByGame;
    this.addChild(this.chatOpenBg, -1);
    this.chatView = new BkWebChatContentLayer(CHAT_OPEN_WIDTH, CHAT_OPEN_HEIGH);
    this.chatView.x = -CHAT_OPEN_WIDTH / 2;
    this.chatView.y = -CHAT_OPEN_HEIGH / 2 + this.chatMiniSprite.height;
    this.addChild(this.chatView, -1);
    this.chatView.setVisible(!0);
    this.switchChatUpDown();
  },
  updateChatItemPos: function () {
    this.btnChatTxt.x = this.chatMiniSprite.width - this.btnChatTxt.width - 24;
    this.btnChatTxt.y = this.btnChatTxt.y;
    this.btnChatSmile.x =
      this.chatMiniSprite.width - this.btnChatSmile.width / 2 - 8;
    this.btnChatSmile.y += 0.5;
    this.inputMsg.x = 0;
    this.inputMsg.y += 0.5;
  },
  onInputSendMsgEvent: function (a, b) {
    logMessage("Enter key");
    this.createTableChatMessage(b);
    this.inputMsg.setString("");
    this.inputMsg.setAutoFocus(!0);
  },
  updateReceiveMsg: function (a, b) {
    this.renderChat(a, b);
  },
  renderChat: function (a, b, d) {
    null != this.chatView &&
      ((d = Util.getFormatString(b, 15) + ": " + a),
      b == BkGlobal.UserInfo.userName && (d = "B\u1ea1n: " + a),
      this.chatView.addItemString(d));
  },
  switchChatUpDown: function (a) {
    void 0 != a && (this.chatBoxDisplayMode = a);
    a = res_name.Chess_Btn_Chat_Up;
    var b = res_name.Chess_Btn_Chat_Down;
    this.chatBoxDisplayMode == CHAT_MSG_DISPLAY_UP
      ? ((this.x = cc.winSize.width - this.chatOpenBg.width / 2 - 2),
        (this.y = this.chatOpenBg.height / 2 + 2),
        (this.chatMiniSprite.x = this.chatXPosByGame),
        (this.chatMiniSprite.y =
          this.chatMiniSprite.height / 2 -
          CHAT_OPEN_HEIGH / 2 +
          this.chatYPosByGame),
        this.btnChatUpDown.loadTextures(b, b, b, b, ccui.Widget.PLIST_TEXTURE),
        (this.btnChatUpDown.x =
          this.chatOpenBg.getContentSize().width / 2 -
          this.btnChatUpDown.getContentSize().width / 2),
        (this.btnChatUpDown.y = -32),
        this.chatOpenBg.setVisible(!0),
        this.chatView.setVisible(!0))
      : ((this.x = cc.winSize.width - this.chatOpenBg.width / 2 - 2),
        (this.y = 2),
        (this.chatMiniSprite.y =
          this.chatMiniSprite.height / 2 + this.chatYPosByGame),
        (this.chatMiniSprite.x = this.chatXPosByGame),
        this.btnChatUpDown.loadTextures(a, a, a, a, ccui.Widget.PLIST_TEXTURE),
        (this.btnChatUpDown.x =
          this.chatOpenBg.getContentSize().width / 2 -
          this.btnChatUpDown.getContentSize().width / 2),
        (this.btnChatUpDown.y = 46),
        this.chatOpenBg.setVisible(!1),
        this.chatView.setVisible(!1));
    this.chatMiniSprite.setVisible(!0);
  },
  onClickBtnChatText: function (a, b) {
    this.setChatDownState();
    this.createQuickChatList();
  },
  onClickBtnChatSmile: function () {
    this.setChatDownState();
    this.createQuickEmoList();
  },
  onClickBtnUpDown: function () {
    this.removeQuickChatItem();
    this.removeQuickEmoList();
    var a = 0;
    this.chatBoxDisplayMode == CHAT_MSG_DISPLAY_UP
      ? (this.switchChatUpDown(CHAT_MSG_DISPLAY_DOWN), (a = 0))
      : (this.switchChatUpDown(CHAT_MSG_DISPLAY_UP), (a = 1));
    Util.setChatSetting(a);
  },
  createTableChatMessage: function (a) {
    BkLogicManager.getInGameLogic().lastTimeSendChat = BkTime.GetCurrentTime();
    var b = new BkPacket();
    b.createChatMessage(a);
    BkConnectionManager.send(b);
  },
  initQuickChatText: function () {
    this.quickTextSprite = new BkSprite();
    this.addChild(this.quickTextSprite, WD_ZORDER_TOP);
    this.initQuickChatMouseEvent();
  },
  createQuickChatList: function () {
    this.removeQuickChatItem();
    if (this.btnChatTxtState)
      (this.btnChatTxtState = !1), this.restoreUpDownState();
    else {
      var a = 220,
        b = new cc.DrawNode();
      b.drawRect(
        cc.p(0, 0),
        cc.p(CHAT_OPEN_WIDTH, a),
        CHAT_BG_COLOR,
        0,
        CHAT_BG_COLOR_BORDER
      );
      b.x = -this.chatMiniSprite.width;
      b.y = CHAT_QUICK_TEXT_ROW_HEIGH / 2;
      this.quickTextSprite.addChild(b, -1);
      var d = new cc.DrawNode();
      d.drawRect(
        cc.p(0, 0),
        cc.p(20, this.chatMiniSprite.height),
        cc.color(0, 0, 0, 0),
        0,
        cc.color(0, 0, 0, 0)
      );
      d.x = b.x;
      d.y = -this.chatMiniSprite.height;
      this.quickTextSprite.addChild(d, -1);
      for (b = 0; b < this.chatQuickChatText.length; b++)
        (d = new BkWebQuickTextItem(this.chatQuickChatText[b], this)),
          (d.x = 0),
          (d.y = a),
          (a -= CHAT_QUICK_TEXT_ROW_HEIGH),
          this.quickTextSprite.addChild(d);
      this.quickTextSprite.setVisible(!0);
      this.quickTextSprite.setContentSize(
        cc.size(this.chatMiniSprite.width, a)
      );
      this.quickTextSprite.x = this.quickTextSprite.width + this.chatXPosByGame;
      this.quickTextSprite.y = this.chatMiniSprite.height - 1;
      cc.eventManager.addListener(this.quickTextHover, this.quickTextSprite);
      this.btnChatTxtState = !0;
      this.btnChatSmileState = !1;
    }
  },
  removeQuickChatItem: function () {
    this.removeQuickEmoList();
    0 < this.quickTextSprite.getChildren().length &&
      (this.quickTextSprite.setVisible(!1),
      cc.eventManager.removeListener(this.quickTextHover),
      this.quickTextSprite.removeAllChildren(),
      logMessage("removeQuickChatItem"));
  },
  initQuickChatMouseEvent: function () {
    var a = this;
    this.quickTextHover = cc.EventListener.create({
      event: cc.EventListener.MOUSE,
      onMouseMove: function (b) {
        var d = b.getLocation();
        b = b.getCurrentTarget();
        cc.rectContainsPoint(b.getBoundingBoxToWorld(), d) ||
          (a.removeQuickChatItem(), a.restoreUpDownState());
      },
    });
  },
  initQuickEmoSprite: function (a) {
    a = this.chatOpenBg.height;
    this.quickEmoSprite = new BkQuickEmotionsSprite(this);
    this.addChild(this.quickEmoSprite, WD_ZORDER_TOP);
    this.quickEmoSprite.setContentSize(cc.size(this.chatOpenBg.width, a));
    this.quickEmoSprite.x = this.chatXPosByGame;
    this.quickEmoSprite.y = this.quickEmoSprite.height / 2 + 32;
    var b = this;
    this.quickEmoHover = cc.EventListener.create({
      event: cc.EventListener.MOUSE,
      onMouseMove: function (a) {
        var e = a.getLocation();
        a = a.getCurrentTarget();
        cc.rectContainsPoint(a.getBoundingBoxToWorld(), e) ||
          (b.removeQuickEmoList(), b.restoreUpDownState());
      },
    });
  },
  createQuickEmoList: function () {
    this.removeQuickChatItem();
    this.btnChatSmileState
      ? ((this.btnChatSmileState = !1), this.restoreUpDownState())
      : (this.quickEmoSprite.createQuickEmoList(),
        this.quickEmoSprite.setVisible(!0),
        (this.btnChatSmileState = !0),
        (this.btnChatTxtState = !1),
        cc.eventManager.addListener(this.quickEmoHover, this.quickEmoSprite));
  },
  removeQuickEmoList: function () {
    0 < this.quickEmoSprite.getChildren().length &&
      (this.quickEmoSprite.removeAllEmo(),
      cc.eventManager.removeListener(this.quickEmoHover),
      logMessage("removeQuickEmoList"));
  },
  clearInputChat: function () {
    this.inputMsg.setString("");
    this.inputMsg.setPlaceHolder("");
  },
  setChatDownState: function () {
    this.chatBoxDisplayMode == CHAT_MSG_DISPLAY_UP &&
      ((this.displayChatState = this.chatBoxDisplayMode),
      this.switchChatUpDown(CHAT_MSG_DISPLAY_DOWN));
  },
  restoreUpDownState: function () {
    cc._canvas.style.cursor = "default";
    this.btnChatSmileState = this.btnChatTxtState = !1;
    this.displayChatState == CHAT_MSG_DISPLAY_UP &&
      ((this.displayChatState = null),
      this.switchChatUpDown(CHAT_MSG_DISPLAY_UP));
  },
  onExit: function () {
    this._super();
  },
});
BkWebQuickTextItem = BkSprite.extend({
  parentNode: null,
  ctor: function (a, b) {
    this._super();
    this.parentNode = b;
    this.setContentSize(
      this.parentNode.chatMiniSprite.width,
      CHAT_QUICK_TEXT_ROW_HEIGH / 2
    );
    var d = this,
      e = new cc.DrawNode();
    e.drawRect(
      cc.p(0, -10),
      cc.p(this.parentNode.chatMiniSprite.width, 10),
      cc.color(5, 61, 118, 140),
      1,
      cc.color(5, 61, 118, 140)
    );
    e.x = -this.parentNode.chatMiniSprite.width / 2;
    this.addChild(e, -1);
    e.visible = !1;
    var f = new BkLabel(a, "Tahoma", "15");
    f.setTextColor(cc.color(214, 216, 221));
    this.addChild(f);
    this.setMouseOnHover(
      function (a) {
        e.setVisible(!0);
      },
      function (a) {
        e.setVisible(!1);
      }
    );
    cc.eventManager.addListener(
      {
        event: cc.EventListener.TOUCH_ONE_BY_ONE,
        swallowTouches: !0,
        onTouchBegan: function (b, f) {
          if (e.isVisible()) d.onClickChatTextItem(a);
          return !1;
        },
      },
      e
    );
  },
  onClickChatTextItem: function (a) {
    this.parentNode.createTableChatMessage(a);
    this.parentNode.removeQuickChatItem();
    this.parentNode.restoreUpDownState();
  },
});
BkWebChatContentLayer = cc.Layer.extend({
  displayFlag: !1,
  ctor: function (a, b) {
    this._super();
    this.initContentChat(a, b);
  },
  initContentChat: function (a, b) {
    this.listView = new BkListView();
    this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);
    this.listView.setBounceEnabled(!0);
    this.listView.setScrollBarEnabled(!0);
    this.listView.setScrollBarAutoHideEnabled(!1);
    this.listView.setContentSize(cc.size(a, b));
    this.addChild(this.listView);
    this.listView.setItemModel(this.getItemModel());
  },
  onEnter: function () {
    cc.Node.prototype.onEnter.call(this);
    this.listView.forceDoLayout();
    this.listView.jumpToTop();
  },
  getMaxWidItem: function () {
    return this.listView.getContentSize().width - 5;
  },
  getItemModel: function () {
    return new Deafault_item_chat_lv(this.getMaxWidItem());
  },
  addItemString: function (a) {
    this.displayFlag = this.displayFlag ? !1 : !0;
    var b = new Deafault_item_chat_lv(this.getMaxWidItem(), this.displayFlag);
    b.setText(a);
    b.x = this.getMaxWidItem() / 2;
    this.listView.pushBackCustomItem(b);
    this.listView.jumpToBottom();
  },
});
Deafault_item_chat_lv = ccui.Layout.extend({
  default_Label: null,
  mW: 0,
  ctor: function (a, b) {
    this.mW = a;
    this._super();
    this.default_Label = new cc.LabelTTF("", "", 14);
    this.default_Label.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.default_Label.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
    var d = cc.color(236, 240, 241);
    this.default_Label.setFontFillColor(d);
    this.default_Label.setContentSize(cc.size(a, 0));
    this.default_Label.setDimensions(cc.size(a, 0));
    this.default_Label.x = a / 2;
    this.setTouchEnabled(!0);
    this.setContentSize(this.default_Label.getContentSize());
    this.width = a;
    this.addChild(this.default_Label);
  },
  setText: function (a) {
    this.default_Label.setString(a);
    a = this.default_Label.getBoundingBox().height;
    logMessage(
      "textHei: " + a + " - " + this.default_Label.getContentSize().height
    );
    a = cc.size(this.mW, this.default_Label.getContentSize().height);
    this.setContentSize(a);
    this.default_Label.x = this.mW / 2;
    this.default_Label.y = this.default_Label.getContentSize().height / 2;
  },
});
CHAT_SMILE_TEXT_LENGTH = 24;
CHAT_SMILE_BG_VIEW_SIZE = 115;
BkQuickEmotionsSprite = BkSprite.extend({
  parentNode: null,
  spriteFrameCache: cc.spriteFrameCache,
  detailEmo: null,
  isShowingDetail: null,
  staticEmo: null,
  lblChatDescription: null,
  chatSetting: null,
  ctor: function (a) {
    this._super();
    this.parentNode = a;
    this.chatSetting = new BkChatSettingByGame(
      12,
      10,
      15,
      4,
      30,
      260,
      20,
      res.chat_emo_static_plist,
      res.icon_chat_emo_static
    );
  },
  createQuickEmoList: function () {
    this.removeAllEmo();
    var a = "";
    this.spriteFrameCache.addSpriteFrames(
      this.chatSetting.spriteSheetPlist,
      this.chatSetting.spriteSheetImg
    );
    var b = new cc.DrawNode();
    b.drawRect(
      cc.p(0, 0),
      cc.p(CHAT_OPEN_WIDTH, this.chatSetting.bgHeight),
      CHAT_BG_COLOR,
      2,
      CHAT_BG_COLOR_BORDER
    );
    b.x = 0;
    b.y = 0;
    this.addChild(b, -1);
    a = new cc.DrawNode();
    a.drawRect(
      cc.p(0, 0),
      cc.p(CHAT_SMILE_BG_VIEW_SIZE, CHAT_SMILE_BG_VIEW_SIZE),
      cc.color(CHAT_BG_COLOR.r, CHAT_BG_COLOR.g, CHAT_BG_COLOR.b, 100),
      2,
      cc.color(CHAT_BG_COLOR.r, CHAT_BG_COLOR.g, CHAT_BG_COLOR.b, 110)
    );
    a.x = b.x;
    a.y = this.chatSetting.bgHeight + CHAT_SMILE_BG_VIEW_SIZE;
    for (b = 1; b <= CHAT_SMILE_TEXT_LENGTH; b++)
      (a = "expression" + b + ".png"),
        (a = new BkEmotionsItem(
          this.spriteFrameCache.getSpriteFrame(a),
          b,
          this
        )),
        this.addChild(a);
    b = new cc.DrawNode();
    b.drawRect(
      cc.p(0, 0),
      cc.p(
        this.parentNode.chatMiniSprite.width,
        this.parentNode.chatMiniSprite.height
      ),
      cc.color(0, 0, 0, 0),
      0,
      cc.color(0, 0, 0, 0)
    );
    b.y = -this.parentNode.chatMiniSprite.height;
    this.addChild(b, -1);
    this.showStaticEmo(1);
  },
  removeAllEmo: function () {
    this.setVisible(!1);
    this.removeAllChildren();
  },
  onShowDetailEmoIco: function (a) {
    this.isShowingDetail ||
      ((this.isShowingDetail = !0),
      this.removeDetailEmo(),
      (this.detailEmo = new BkChatEmoSprite(Util.getChatEmoDataWithIndex(a))),
      this.addChild(this.detailEmo),
      (this.detailEmo.x = this.staticEmo.x),
      (this.detailEmo.y = this.staticEmo.y),
      this.detailEmo.showEmoForever());
  },
  removeDetailEmoIco: function () {
    this.isShowingDetail = !1;
  },
  showStaticEmo: function (a) {
    this.removeDetailEmo();
    this.lblChatDescription && this.lblChatDescription.removeFromParent();
    a = Util.getChatEmoDataWithIndex(a);
    cc.spriteFrameCache.addSpriteFrames(a.iconPlist, a.iconTexture);
    this.staticEmo = new BkSprite("#" + a.iconName + "_1.png");
    this.addChild(this.staticEmo);
    this.staticEmo.x = CHAT_SMILE_BG_VIEW_SIZE / 2;
    this.staticEmo.y = this.chatSetting.bgHeight + CHAT_SMILE_BG_VIEW_SIZE / 2;
  },
  restoreUpDownStateP: function () {
    this.parentNode.restoreUpDownState();
  },
  removeBkQuickEmotionsSpriteP: function () {
    this.parentNode.removeQuickEmoList();
  },
  removeDetailEmo: function () {
    null != this.staticEmo && this.staticEmo.removeFromParent();
    this.detailEmo && this.detailEmo.removeEmo();
  },
  onExit: function () {
    this.spriteFrameCache.removeSpriteFramesFromFile(
      this.chatSetting.spriteSheetPlist
    );
    this._super();
  },
});
BkEmotionsItem = BkSprite.extend({
  parentNode: null,
  idEmo: null,
  bgHover: null,
  emoSp: null,
  atHoverPos: !1,
  chatSetting: null,
  ctor: function (a, b, d) {
    this._super();
    this.idEmo = b;
    this.parentNode = d;
    this.chatSetting = this.parentNode.chatSetting;
    this.x = this.chatSetting.emoSpace;
    var e = this;
    this.bgHover = new cc.DrawNode();
    this.bgHover.drawRect(
      cc.p(-this.chatSetting.bgHoverSize, -this.chatSetting.bgHoverSize),
      cc.p(this.chatSetting.bgHoverSize, this.chatSetting.bgHoverSize),
      cc.color(255, 255, 255, 30),
      1,
      cc.color(255, 255, 255, 30)
    );
    this.addChild(this.bgHover, -1);
    this.bgHover.visible = !1;
    var f = function () {
      e.parentNode.onShowDetailEmoIco(e.idEmo);
      logMessage("self.idEmo:" + e.idEmo);
    };
    this.emoSp = new BkSprite(a);
    this.addChild(this.emoSp);
    this.emoSp.setMouseOnHover(
      function (a) {
        e.atHoverPos ||
          ((e.atHoverPos = !0),
          e.bgHover.setVisible(!0),
          e.parentNode.showStaticEmo(e.idEmo),
          e.scheduleOnce(f, 0.8, "viewAniEmo"));
      },
      function (a) {
        e.bgHover.setVisible(!1);
        e.parentNode.removeDetailEmoIco();
        e.unschedule(f);
        e.atHoverPos = !1;
      }
    );
    this.emoSp.setOnlickListenner(function () {
      e.onClickItem(b);
    });
    this.configPos(b);
  },
  configPos: function (a) {
    var b = Math.floor((a - 1) / this.chatSetting.numberPerLine);
    this.emoSp.x =
      2 * this.chatSetting.emoMarginRl +
      ((a - 1) % this.chatSetting.numberPerLine) *
        (this.chatSetting.emoSmileSize + this.chatSetting.emoSpace);
    this.emoSp.y =
      2 * this.chatSetting.emoMarginTb +
      b * (this.chatSetting.emoSmileSize + this.chatSetting.emoMarginTb);
    this.bgHover.x = this.emoSp.x;
    this.bgHover.y = this.emoSp.y;
  },
  onClickItem: function (a) {
    this.createTableChatMessage(Util.getSmileText(a - 1));
    this.parentNode &&
      (this.parentNode.setVisible(!1),
      this.parentNode.removeBkQuickEmotionsSpriteP(),
      this.parentNode.restoreUpDownStateP());
  },
  createTableChatMessage: function (a) {
    BkLogicManager.getInGameLogic().lastTimeSendChat = BkTime.GetCurrentTime();
    var b = new BkPacket();
    b.createChatMessage(a);
    BkConnectionManager.send(b);
  },
});
BkChatSettingByGame = cc.Class.extend({
  emoMarginTb: null,
  emoMarginRl: null,
  emoSpace: null,
  numberPerLine: null,
  emoSmileSize: null,
  bgHeight: null,
  bgHoverSize: null,
  spriteSheetPlist: null,
  spriteSheetImg: null,
  ctor: function (a, b, d, e, f, g, h, k, m) {
    this.emoMarginTb = a;
    this.emoMarginRl = b;
    this.emoSpace = d;
    this.numberPerLine = e;
    this.emoSmileSize = f;
    this.bgHeight = g;
    this.bgHoverSize = h;
    this.spriteSheetPlist = k;
    this.spriteSheetImg = m;
  },
});
FRIEND_ITEM_HEIGHT_SPRITE = 34;
FRIEND_ITEM_SCALE_BUTTON = 0.8;
FRIEND_ITEM_PADDING_Y = FRIEND_ITEM_PADDING_X = 20;
TEXT_OFFSET_NAME_LEVEL = TEXT_OFFSET_WITH_AVATAR = 10;
SELECT_OFFSET = 50;
AVATAR_FRIEND_WINDOW_HEIGHT = AVATAR_FRIEND_WINDOW_WIDTH = 34;
BkIngameInviteFriendItem = BkSprite.extend({
  parentNode: null,
  playerData: null,
  typeItem: null,
  bgHover: null,
  checkItem: null,
  _eventHover: null,
  checkChangeCallback: null,
  itemWidth: 300,
  ctor: function (a, b, d, e, f) {
    this._super();
    this.itemWidth = f;
    this.playerData = a;
    this.parentNode = d;
    this.initItem(b, e);
    this.initMouseAction();
  },
  initItem: function (a, b) {
    if (b) {
      var d = new cc.DrawNode();
      d.drawSegment(
        cc.p(-15, FRIEND_ITEM_HEIGHT_SPRITE / 2),
        cc.p(
          this.parentNode.getBodySize().width - 65,
          FRIEND_ITEM_HEIGHT_SPRITE / 2
        ),
        0.5,
        BkColor.GRID_ROW_BORDER_COLOR
      );
      this.addChild(d);
    }
    d = new cc.DrawNode();
    d.drawSegment(
      cc.p(-15, -FRIEND_ITEM_HEIGHT_SPRITE / 2),
      cc.p(
        this.parentNode.getBodySize().width - 65,
        -FRIEND_ITEM_HEIGHT_SPRITE / 2
      ),
      0.5,
      BkColor.GRID_ROW_BORDER_COLOR
    );
    this.addChild(d);
    this.bgHover = new cc.DrawNode();
    this.bgHover.drawRect(
      cc.p(-15, -FRIEND_ITEM_HEIGHT_SPRITE / 2),
      cc.p(
        this.parentNode.getBodySize().width - 65,
        FRIEND_ITEM_HEIGHT_SPRITE / 2
      ),
      BkColor.GRID_ITEM_HOVER_COLOR,
      0,
      BkColor.GRID_ITEM_HOVER_COLOR
    );
    this.bgHover.visible = !1;
    this.addChild(this.bgHover);
    var e = BkAvartarImg.getAvatarByIDWidthBg(this.playerData.getAvatarId());
    e.setScale(0.4);
    e.x = 5;
    e.y = 0;
    this.addChild(e, WD_ZORDER_TOP);
    d = new BkLabel(
      Util.getFormatString(this.playerData.getUserName(), 16),
      "Arial",
      16
    );
    d.setTextColor(BkColor.GRID_ITEM_TEXT_HEADER);
    d.x = e.x + 20 + d.getContentSize().width / 2;
    d.y = 0;
    this.addChild(d);
    this.checkItem = new BkCheckBox();
    this.checkItem.x = this.itemWidth - 40;
    this.checkItem.y = d.y;
    var f = this;
    this.checkItem.addEventListener(function () {
      f.checkItem.setSelected(!f.checkItem.isSelected());
    });
    this.addChild(this.checkItem);
    e = new BkLabel(
      convertStringToMoneyFormat(this.playerData.getMoney()) +
        BkConstString.getGameCoinStr(),
      "Arial",
      15
    );
    e.setTextColor(BkColor.GRID_ITEM_TEXT_COLOR);
    e.x = this.checkItem.x - 50;
    e.y = d.y;
    this.addChild(e);
    this.configPos(a);
  },
  configPos: function (a) {
    this.x = 0;
    this.y = a - FRIEND_ITEM_HEIGHT_SPRITE;
  },
  initMouseAction: function () {
    var a = this;
    this._eventHover = this.createHoverEvent(
      function (b) {
        a.bgHover.setVisible(!0);
      },
      function (b) {
        a.bgHover.setVisible(!1);
      },
      function (b) {
        if (a.bgHover.isVisible())
          a.onClickFriendItem(a.playerData.getUserName());
      }
    );
    cc.eventManager.addListener(this._eventHover, this);
  },
  setOncallbackOncheckChange: function (a) {
    this.checkChangeCallback = a;
  },
  onClickFriendItem: function (a) {
    null != this.checkItem &&
      (this.checkItem.setSelected(!this.checkItem.isSelected()),
      null != this.checkChangeCallback && this.checkChangeCallback());
  },
  updateSelectedState: function (a) {
    this.checkItem.setSelected(a);
  },
  isSelected: function () {
    return this.checkItem.isSelected();
  },
  getPlayerName: function () {
    return this.playerData.getUserName();
  },
});
BkGoldBoxSprite = BkSprite.extend({
  sBox: null,
  tfTime: null,
  remainTime: 0,
  isEnableStroke: !1,
  ctor: function () {
    this._super();
    this.sBG = new BkSprite("#" + res_name.btn_big_normal);
    this.sBG.opacity = 0;
    this.sBG.x += this.sBG.width / 4;
    this.addChild(this.sBG);
    this.sBox = new BkSprite("#" + res_name.Img_Gold_Box);
    this.addChild(this.sBox);
    this.tfTime = new BkLabelTTF(
      "00:00",
      "",
      14,
      cc.size(0, 0),
      cc.TEXT_ALIGNMENT_CENTER,
      cc.VERTICAL_TEXT_ALIGNMENT_TOP
    );
    this.tfTime.y += 0.5;
    this.tfTime.x = this.sBox.x + this.sBox.width + 1;
    this.addChild(this.tfTime);
    this.setMouseOnHover();
    var a = this,
      b = function (b, e) {
        if (0 < a.remainTime)
          showToastMessage(
            "C\u00f2n " +
              convertSecondToMinSec(a.remainTime) +
              " B\u1ea1n m\u1edbi c\u00f3 th\u1ec3 nh\u1eadn qu\u00e0!",
            cc.winSize.width - 90,
            cc.winSize.height - 110,
            3,
            140
          );
        else {
          var f = new BkPacket();
          f.CreatePacketWithOnlyType(c.NETWORK_GET_GOLD_BOX_REWARD);
          BkConnectionManager.send(f);
        }
      };
    this.sBox.setOnlickListenner(b);
    this.sBG.setOnlickListenner(b);
    this.setVisible(!1);
  },
  showGoldBoxWith: function (a) {
    this.remainTime = a;
    1 > this.remainTime ? this.showFinishCountDown() : this.showCountDown();
  },
  onTickFinish: function () {
    this.tfTime._strokeEnabled
      ? this.tfTime.disableStroke()
      : this.tfTime.enableStroke(cc.color(255, 0, 0), 2);
  },
  showFinishCountDown: function () {
    this.tfTime.setString(convertSecondToMinSec(0));
    this.unschedule(this.onTick);
    this.schedule(this.onTickFinish, 0.5);
  },
  showCountDown: function () {
    this.tfTime.setString(convertSecondToMinSec(this.remainTime));
    this.schedule(this.onTick, 1);
  },
  onTick: function () {
    this.remainTime--;
    0 < this.remainTime
      ? this.tfTime.setString(convertSecondToMinSec(this.remainTime))
      : this.showFinishCountDown();
  },
  removeSelf: function () {
    this.sBox.removeSelf();
    this.unscheduleAllCallbacks();
    this._super();
  },
  startCountDown: function () {
    this.stopCountDown();
    this.schedule(this.onTick, 1);
  },
  stopCountDown: function () {
    this.unschedule(this.onTick);
  },
});
DAILY_TASK_HEIGHT_SPRITE = 90;
DAILY_TASK_SCALE_BUTTON = 0.9;
DAILY_TASK_PADDING_X = 80;
DAILY_TASK_PADDING_Y = 20;
DAILY_TASK_TEXT_COLOR = cc.color(255, 178, 102);
BkDailyTaskItem = BkSprite.extend({
  sph: cc.spriteFrameCache,
  parentNode: null,
  selectedTask: null,
  ctor: function (a, b, d, e) {
    this._super();
    this.selectedTask = a;
    this.parentNode = e;
    this.sph.addSpriteFrames(res.tien_thuong_plist, res.tien_thuong_img);
    this.initItem(b, d);
  },
  initItem: function (a) {
    var b = new BkSprite("#" + res_name.task_bg_item);
    b.x = b.getWidth() / 2;
    b.y = b.getHeight() / 2 + 14;
    this.addChild(b);
    var d = this.sph.getSpriteFrame(res_name.daily_task_close);
    this.selectedTask.isGetBonus &&
      (d = this.sph.getSpriteFrame(res_name.daily_task_open));
    d = new BkSprite(d);
    d.x = d.width / 2 + 10;
    d.y = d.height + 5;
    this.addChild(d);
    d = new BkLabel(this.selectedTask.taskName, "Tahoma", 16);
    d.setTextColor(cc.color(251, 254, 0));
    d.x = DAILY_TASK_PADDING_X + d.getContentSize().width / 2;
    d.y = DAILY_TASK_HEIGHT_SPRITE - 15;
    this.addChild(d);
    d = new BkLabel(
      "M\u1ee9c th\u01b0\u1edfng: " +
        convertStringToMoneyFormat(this.selectedTask.bonusMoney) +
        BkConstString.getGameCoinStr(),
      "Tahoma",
      14
    );
    d.x = DAILY_TASK_PADDING_X + d.getContentSize().width / 2;
    d.y = DAILY_TASK_HEIGHT_SPRITE - 35;
    this.addChild(d);
    d = new BkLabel(
      "\u0110\u00e3 th\u1ef1c hi\u1ec7n: " +
        convertStringToMoneyFormat(this.selectedTask.currentAmount) +
        " / " +
        convertStringToMoneyFormat(this.selectedTask.targetAmount),
      "Tahoma",
      14
    );
    d.x = DAILY_TASK_PADDING_X + d.getContentSize().width / 2;
    d.y = DAILY_TASK_HEIGHT_SPRITE - 55;
    this.addChild(d);
    d = new BkLabel("Ch\u01b0a xong", "Tahoma", 15);
    d.setTextColor(cc.color(255, 255, 255));
    d.x = b.getWidth() - d.getContentSize().width / 2 - 20;
    d.y = DAILY_TASK_HEIGHT_SPRITE / 2 + 10;
    this.addChild(d);
    var e = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Inactive,
      res_name.BtnDialog_Hover
    );
    e.setTitleText("Ch\u01b0a xong");
    e.setEnableButton(!1);
    e.setVisible(!1);
    this.selectedTask.currentAmount == this.selectedTask.targetAmount &&
      (this.selectedTask.isGetBonus
        ? (d.setString("\u0110\u00e3 ho\u00e0n th\u00e0nh"),
          (d.x = b.getWidth() - d.getContentSize().width / 2 - 20))
        : (d.setVisible(!1),
          e.setEnableButton(!0),
          e.setVisible(!0),
          e.setTitleText("Nh\u1eadn"),
          e.addTouchEventListener(function (a, b) {
            if (b == ccui.Widget.TOUCH_ENDED) this.onClickGetTaskResult();
          }, this)));
    e.setScale(DAILY_TASK_SCALE_BUTTON);
    e.x = b.getWidth() - e.width / 2 - 15;
    e.y = DAILY_TASK_HEIGHT_SPRITE / 2 + e.height / 2 - 7;
    this.addChild(e);
    this.configPos(a);
  },
  configPos: function (a) {
    this.x = 0;
    this.y = a - DAILY_TASK_HEIGHT_SPRITE;
  },
  onClickGetTaskResult: function () {
    this.initHandleonLoadComplete();
    var a = new BkPacket();
    a.CreatePacketWithTypeAndByteData(
      c.NETWORK_REQUEST_DAILY_TASK_BONUS,
      this.selectedTask.id
    );
    BkConnectionManager.send(a);
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this.parentNode);
  },
  onExit: function () {
    this.sph.removeSpriteFramesFromFile(res.tien_thuong_plist);
    this._super();
  },
});
FRIEND_ITEM_HEIGHT_SPRITE = 44;
FRIEND_ITEM_PADDING_X = 18;
FRIEND_ITEM_PADDING_Y = 22;
FRIEND_ITEM_BTN_P_RIGHT = 20;
TEXT_OFFSET_WITH_AVATAR = 10;
TEXT_OFFSET_MONEY_LEVEL = 270;
AVATAR_FRIEND_WINDOW_HEIGHT = AVATAR_FRIEND_WINDOW_WIDTH = 34;
FRIEND_ITEM_TEXT_COLOR = cc.color(255, 178, 102);
FRIEND_ITEM_HOVER_COLOR = cc.color(225, 178, 102, 100);
BkFriendItem = ccui.Widget.extend({
  parentNode: null,
  playerData: null,
  typeItem: null,
  btnSendMsg: null,
  btnDenied: null,
  btnAddFriend: null,
  btnPlayWith: null,
  isClickButton: null,
  itempBg: null,
  ctor: function (a, b, d) {
    this._super();
    logMessage("Player data: " + a.getUserName());
    this.setName("BkFriendItem");
    this.playerData = a;
    this.typeItem = b;
    this.parentNode = d;
    this.initBg();
    this.initItem(10);
  },
  drawFriend: function () {},
  initBg: function () {
    var a = this;
    this.itempBg = createBkButtonPlist(
      res_name.infoFrameBanBeOn,
      res_name.infoFrameBanBeOn,
      res_name.infoFrameBanBeOn,
      res_name.infoFrameBanBeOn,
      ""
    );
    this.itempBg.addClickEventListener(function () {
      logMessage("Friend item clicked: ");
      a.parentNode.friendItemUIClickedCB(a.playerData);
    });
    var b = 8;
    isWebPlatform() && (b = 7);
    this.setContentSize(
      cc.size(
        1.08 * this.itempBg.getContentSize().width,
        this.parentNode.getWindowSize().height / b
      )
    );
    this.setScale(GAME_SCALE);
    this.setPosition(
      0.5 * this.getContentSize().width,
      0.5 * this.getContentSize().height
    );
    this.itempBg.setPosition(
      0.5 * this.getContentSize().width,
      0.5 * this.getContentSize().height
    );
    this.addChild(this.itempBg);
  },
  initItem: function (a) {
    var b = null,
      b = this.playerData.getLevel(),
      b = BkAvartarImg.getAvatarByID(this.playerData.getAvatarId(), b),
      d = 0.5;
    isWebPlatform() || (d = 0.6);
    b.setScale(d);
    b.x = 0.02 * this.getContentSize().width + b.getBoundingBox().width / 2;
    b.y = this.getContentSize().height / 2;
    this.addChild(b, WD_ZORDER_TOP);
    isWebPlatform() || (b.y = 0.6 * this.getContentSize().height);
    var d = 20,
      e = 18;
    isWebPlatform() || ((d = 30), (e = 15));
    e = Util.trimName(this.playerData.getUserName(), e);
    d = new BkLabel(e, "Arial", d, !0);
    d.setTextColor(ZColor.DEFAULT_TEXT_COLOR);
    d.x =
      b.x +
      b.getBoundingBox().width / 2 +
      d.getContentSize().width / 2 +
      12 * GAME_SCALE;
    d.y = b.y + TEXT_OFFSET_WITH_AVATAR * GAME_SCALE;
    this.addChild(d);
    e = 16;
    isWebPlatform() || (e = 26);
    var e = new BkLabel("", "Tahoma", e),
      f = null,
      g = cc.color(178, 176, 177);
    this.playerData.isOnline()
      ? (this.isAllowPlayWithCheck(this.playerData.getGameId())
          ? e.setString(
              "\u0110ang ch\u01a1i " +
                Util.getGameLabel(this.playerData.getGameId())
            )
          : e.setString("Online"),
        (g = cc.color(27, 197, 2)),
        (f = new BkSprite("#" + res_name.icon_online)))
      : (e.setString("Offline"),
        (f = new BkSprite("#" + res_name.icon_offline)));
    f.x = b.x + b.getBoundingBox().width / 2 + 10 * GAME_SCALE;
    f.y = d.y - FRIEND_ITEM_PADDING_Y * GAME_SCALE;
    e.setTextColor(g);
    e.x = f.x + f.getBoundingBox().width + e.getContentSize().width / 2;
    e.y = f.y - 1 * GAME_SCALE;
    this.addChild(f);
    this.addChild(e);
    g = null;
    1 == this.typeItem &&
      ((g = new BkLabel(
        BkLevelImage.getStringFromElo(this.playerData.getLevel()),
        "Arial",
        20
      )),
      (g.x =
        b.x +
        TEXT_OFFSET_MONEY_LEVEL * GAME_SCALE +
        g.getContentSize().width / 2),
      (g.y = b.y),
      this.addChild(g));
    f.setVisible(!1);
    null != g && g.setVisible(!1);
    d.y = 0.6 * this.getContentSize().height;
    f = null;
    f = this.playerData.isOnline()
      ? new BkSprite("#" + res_name.online)
      : new BkSprite("#" + res_name.offline);
    f.y = 0.4 * this.getContentSize().height;
    f.x = d.x - 0.5 * d.getContentSize().width + 0.5 * f.getContentSize().width;
    this.addChild(f, 100);
    e.y = f.y;
    e.x = f.x + f.getContentSize().width / 2 + e.getContentSize().width / 2;
    d.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE);
    e.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE);
    this.initButonForItem(b.y, this.playerData.getUserName());
    this.configPos(a);
  },
  initButonForItem: function (a) {
    var b = this,
      d = null,
      e = null,
      d = createBkButtonPlist(
        res_name.btnMoiChoi,
        res_name.btnMoiChoiPress,
        res_name.btnMoiChoi,
        res_name.btnMoiChoi
      ),
      e = createBkButtonPlist(
        res_name.btnVaoXem,
        res_name.btnVaoXemPress,
        res_name.btnVaoXem,
        res_name.btnVaoXem
      ),
      f = null,
      g = null;
    1 == this.typeItem
      ? ((f = createBkButtonPlist(
          res_name.btnIconXoaBanFriendWD,
          res_name.btnIconXoaBanFriendWDPress,
          res_name.btnIconXoaBanFriendWD,
          res_name.btnIconXoaBanFriendWD
        )),
        (f.x =
          this.getContentSize().width -
          f.getContentSize().width -
          FRIEND_ITEM_BTN_P_RIGHT),
        (f.y = a),
        f.addTouchEventListener(function () {
          b.onClickRemoveFriend();
        }, this),
        this.addChild(f),
        (d.x = this.getContentSize().width - d.width - FRIEND_ITEM_BTN_P_RIGHT),
        (d.y = f.y))
      : 2 == this.typeItem &&
        ((g = createBkButtonPlist(
          res_name.btnIconTheoDoiFriendWD,
          res_name.btnIconTheoDoiFriendWDPress,
          res_name.btnIconTheoDoiFriendWD,
          res_name.btnIconTheoDoiFriendWD
        )),
        (g.x = this.getContentSize().width - g.width - FRIEND_ITEM_BTN_P_RIGHT),
        (g.y = a),
        g.addTouchEventListener(function (a, d) {
          switch (d) {
            case ccui.Widget.TOUCH_BEGAN:
              logMessage("btnAddFriend");
              b.onClickCreateAddFriendPacket();
              break;
            case ccui.Widget.TOUCH_ENDED:
              g.removeFromParent();
          }
        }, this),
        this.addChild(g),
        this.parentNode.isInFriendList(this.playerData.getUserName()) &&
          (logMessage("isInFriendList: " + this.playerData.getUserName()),
          this.playerData.setIsFriend(!0),
          g.setVisibleButton(!1)),
        (d.x = this.getContentSize().width - d.width - FRIEND_ITEM_BTN_P_RIGHT),
        (d.y = a));
    a = 0;
    null != f &&
      ((f.y = this.getContentSize().height / 2),
      (f.x =
        this.itempBg.getContentSize().width + 0.08 * f.getContentSize().width),
      (a = f.x - 1 * f.getContentSize().width - 0));
    null != g &&
      ((g.y = this.getContentSize().height / 2),
      (g.x =
        this.itempBg.getContentSize().width + 0.08 * g.getContentSize().width),
      (a = g.x - 1 * g.getContentSize().width - 0));
    d.y = this.getContentSize().height / 2;
    d.x = a - d.getContentSize().width / 2;
    e.x = d.x;
    e.y = d.y;
    this.playerData.isOnline() &&
      (d.addClickEventListener(function () {
        if (b.isAllowPlayWithCheck(b.playerData.getGameId()))
          b.onClickViewFriendTable();
        else b.onClickPlayWith(b.playerData.getUserName());
      }),
      this.addChild(d),
      this.addChild(e),
      e.addClickEventListener(function () {
        b.onClickViewFriendTable();
      }),
      b.isAllowPlayWithCheck(b.playerData.getGameId())
        ? (d.setVisibleButton(!1), e.setVisibleButton(!0))
        : (d.setVisibleButton(!0), e.setVisibleButton(!1)));
  },
  configPos: function (a) {
    this.x = 40;
    this.y = a - FRIEND_ITEM_HEIGHT_SPRITE;
  },
  onClickViewFriendTable: function () {
    var a = new BkPacket();
    a.CreatePlayWithPacket(this.playerData.getUserName());
    BkConnectionManager.send(a);
    BkLogicManager.getLogic().promotionInfo.isJoinFromInviteFriend = !0;
  },
  onClickPlayWith: function (a) {
    this.parentNode.onClickPlayWith(a);
  },
  onClickRemoveFriend: function () {
    this.parentNode.initHandleonLoadComplete();
    var a = new BkPacket();
    a.CreateRemoveFriendPacket(this.playerData.getUserName());
    BkConnectionManager.send(a);
    this.parentNode.setSelectedFriend(this.playerData, !0);
  },
  onClickCreateAddFriendPacket: function () {
    this.parentNode.initHandleonLoadComplete();
    var a = new BkPacket();
    a.CreateAddFriendPacket(this.playerData.getUserName());
    BkConnectionManager.send(a);
    this.parentNode.setSelectedFriend(this.playerData);
  },
  visibleSearchPanel: function (a) {
    this.parentNode._searchFrPanel &&
      (this.parentNode._searchFrPanel.visible = a);
  },
  isAllowPlayWithCheck: function (a) {
    return a == GID.CO_TUONG || a == GID.CO_UP;
  },
});
var MAX_INSTANT_LIST_ITEM = 4;
BkHotTableWindow = BkTabWindow.extend({
  _tabList: ["Xem c\u1edd t\u01b0\u1edbng", "Xem c\u1edd \u00fap"],
  _hotTableList: null,
  _hotGameView: null,
  _tableListView: null,
  btnCloseHotTB: null,
  ctor: function () {
    isWebPlatform();
    this._super(
      "",
      isWebPlatform()
        ? cc.size(600, 620)
        : cc.size(650 * GAME_SCALE, 1150 * GAME_SCALE),
      this._tabList.length,
      this._tabList
    );
    isWebPlatform()
      ? (this.headerChessWD.setVisible(!1),
        this._btnClose.setVisibleButton(!0),
        (this._btnClose.x += 15))
      : this.addTitleImage(res_name.title_wd_banHot);
    Util.logEvent(EVENT_SWITCH_SCREEN, KEY_SCREEN_NAME, "HotTableScene");
    var a = Util.getSetting(key.lastHotTab),
      b = 1;
    cc.isNumber(a) && (b = a);
    this.initHotGameWindow(b);
    NativeInterface.logFirebaseEvent(EVENT_NAME.HOT_TABLE);
  },
  iniTab: function () {
    this._bodyContent = new cc.DrawNode();
    this.addChildBody(this._bodyContent, 0, 0);
    this._arrBtnTab = [];
    var a = new BkButton(
      res_name.banhot_CT,
      res_name.banhot_CT_Press,
      res_name.banhot_CT,
      res_name.banhot_CT,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    this.initForBtn(a, 1);
    this._arrBtnTab.push(a);
    a = new BkButton(
      res_name.banhot_CU_deselect,
      res_name.banhot_CU_deselect_Press,
      res_name.banhot_CU_deselect,
      res_name.banhot_CU_deselect,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    this.initForBtn(a, 2);
    this._arrBtnTab.push(a);
    this.configPosButton();
    if (void 0 != this._arrBtnText)
      for (a = 0; a < this._arrBtnText.length; a++) {
        var b = this._arrBtnTab[a];
        0 == a
          ? this.setSelectedForButton(b, !0)
          : this.setSelectedForButton(b, !1);
      }
    else
      console.log("Error: Must addTabChangeEventListener to callback handle");
  },
  configPosButton: function () {
    var a = this._arrBtnTab[0],
      b = this._arrBtnTab[1];
    a.x = 0.3 * this.getWindowSize().width;
    a.y = 0.89 * this.getWindowSize().height;
    b.x = 0.7 * this.getWindowSize().width;
    b.y = a.y;
    isWebPlatform() &&
      ((a.x = 0.34 * this.getWindowSize().width),
      (a.y += 30),
      (b.x = 0.65 * this.getWindowSize().width),
      (b.y = a.y));
  },
  configButtonWithSelectedTab: function (a) {
    var b = this._arrBtnTab[0],
      d = this._arrBtnTab[1];
    1 == a
      ? (b.loadTextures(
          res_name.banhot_CT,
          res_name.banhot_CT_Press,
          res_name.banhot_CT,
          res_name.banhot_CT,
          ccui.Widget.PLIST_TEXTURE
        ),
        d.loadTextures(
          res_name.banhot_CU_deselect,
          res_name.banhot_CU_deselect_Press,
          res_name.banhot_CU_deselect,
          res_name.banhot_CU_deselect,
          ccui.Widget.PLIST_TEXTURE
        ))
      : (b.loadTextures(
          res_name.banhot_CT_deselect,
          res_name.banhot_CT_deselect_Press,
          res_name.banhot_CT_deselect,
          res_name.banhot_CT_deselect,
          ccui.Widget.PLIST_TEXTURE
        ),
        d.loadTextures(
          res_name.banhot_CU,
          res_name.banhot_CU_Press,
          res_name.banhot_CU,
          res_name.banhot_CU,
          ccui.Widget.PLIST_TEXTURE
        ));
  },
  initHotGameWindow: function (a) {
    this.setMoveableWindow(!1);
    this.setVisibleOutBackgroundWindow(!0);
    this.addTabChangeEventListener(this.selectedTabEvent, this, a);
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this);
  },
  updateDataForInstantGame: function (a) {
    var b = {};
    b.gameId = a.gameId;
    b.tableList = [];
    var d = MAX_INSTANT_LIST_ITEM;
    a.tableList.length < d && (d = a.tableList.length);
    for (var e = 0; e < d; e++) b.tableList.push(a.tableList[e]);
    return b;
  },
  onLoadComplete: function (a, b) {
    logMessage("Hot Table Load completed");
    switch (b) {
      case c.NETWORK_HOT_TABLE_RETURN:
        (this._hotTableList = a), this.drawScreen();
    }
    Util.removeAnim();
  },
  drawScreen: function () {
    logMessage(
      "Game Id: " +
        this._hotTableList.gameId +
        "Num of hot table: " +
        this._hotTableList.tableList.length
    );
    null != this._tableListView &&
      (this._tableListView.removeFromParent(), (this._tableListView = null));
    this._tableListView = new BkSprite();
    var a = 570 * GAME_SCALE,
      b = 460 * GAME_SCALE,
      d = 8;
    isWebPlatform() ||
      ((a = 590 * GAME_SCALE),
      (b = 0.7 * this.getWindowSize().height),
      (d = 0));
    this._tableListView.setContentSize(a, b);
    if (0 == this._hotTableList.tableList.length)
      (a = new BkLabel("", "Arial", 30)),
        a.setScaleM(GAME_SCALE),
        a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        a.setString(
          "Hi\u1ec7n t\u1ea1i h\u1ec7 th\u1ed1ng kh\u00f4ng c\u00f3 b\u00e0n hot."
        ),
        (a.y = this._tableListView.getContentSize().height / 2),
        (a.x = this._tableListView.getContentSize().width / 2),
        this._tableListView.addChild(a, 0);
    else {
      this.listView = new BkListView();
      this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);
      this.listView.setTouchEnabled(!0);
      this.listView.setBounceEnabled(!0);
      this.listView.setContentSize(cc.size(a, b));
      this.listView.setPosition(0, 0);
      this.listView.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL);
      this.listView.setClippingType(ccui.Layout.CLIPPING_SCISSOR);
      for (a = 0; a < this._hotTableList.tableList.length; a++)
        (b = this.createHotTableUI(this._hotTableList.tableList[a])),
          this.listView.pushBackCustomItem(b);
      this._tableListView.addChild(this.listView);
    }
    this._tableListView.x = 0.505 * this.getWindowSize().width - d;
    d = this._arrBtnTab[0];
    this._tableListView.y =
      d.y -
      0.53 * d.getBoundingBox().height -
      this._tableListView.getContentSize().height / 2;
    this.addChildBody(this._tableListView, 0, 0);
    if (!isWebPlatform() && null == this.btnCloseHotTB) {
      this.btnCloseHotTB = new BkButton(
        res_name.btnDong,
        res_name.btnDongPress,
        res_name.btnDong,
        res_name.btnDong,
        ccui.Widget.PLIST_TEXTURE
      );
      this.btnCloseHotTB.setScale(GAME_SCALE);
      this.btnCloseHotTB.x = this.getWindowSize().width / 2;
      this.btnCloseHotTB.y = 1.1 * this.btnCloseHotTB.getBoundingBox().height;
      this.addChildBody(this.btnCloseHotTB);
      var e = this;
      this.btnCloseHotTB.addClickEventListener(function () {
        e.removeSelf();
      });
    }
  },
  logDataTable: function () {
    for (var a = this._hotTableList.tableList.length, b = 0; b < a; b++) {
      var d = this._hotTableList.tableList[b];
      logMessage(b + " : " + d.firstPlayerName + " - " + d.firstPlayerElo);
    }
  },
  createHotTableUI: function (a) {
    null == a
      ? logMessage("Data is null")
      : logMessage("Data: " + a.firstPlayerName);
    var b = new BKHotTableItem(a, this),
      d = this;
    b.addClickItemEvent(function () {
      d.hotTableClicked(a);
    });
    var e = new ccui.Layout();
    e.setContentSize(b.getContentSize());
    var f = 0.45;
    isWebPlatform() && (f = 0.5);
    b.setPosition(
      this.getWindowSize().width * f,
      0.5 * b.getContentSize().height
    );
    e.addChild(b);
    return e;
  },
  hotTableClicked: function (a) {
    logMessage("clicked to table" + a.firstPlayerName);
    var b = new BkPacket();
    b.createQuickTableJoin(a.gameId, a.roomId, a.tableId);
    BkConnectionManager.send(b);
  },
  loadHotTableList: function (a) {
    logMessage("Load hot game");
    this.initHandleonLoadComplete();
    var b = new BkPacket();
    b.createGetHotTablePacket(a);
    BkConnectionManager.send(b);
    Util.showAnim();
  },
  selectedTabEvent: function (a, b) {
    Util.storeSetting(key.lastHotTab, b);
    this.loadHotTableListByTab(b);
  },
  loadHotTableListByTab: function (a) {
    1 == a
      ? this.loadHotTableList(GID.CO_TUONG)
      : this.loadHotTableList(GID.CO_UP);
  },
});
FRIEND_MAX_ROW_NUM = 10;
STATUS_FRIEND_WAITING = 2;
STATUS_BEGIN_CREATE_TABLE = 4;
BkFriendsWindow = BkTabWindow.extend({
  _searchFrPanel: null,
  _friendListGrid: null,
  _tabList: ["\u0110ang theo d\u00f5i", "T\u00ecm b\u1ea1n"],
  _friendList: null,
  _invitationList: null,
  _selectedFriend: null,
  _isRemovedFriend: null,
  _isLoadedFriendList: !1,
  _inputName: null,
  _currentSearchFrName: "",
  refreshButton: null,
  selectGameWd: null,
  btnBanBeFB: null,
  btnMoiBanFB: null,
  isFirstLoadFriend: !0,
  ctor: function () {
    this.isFirstLoadFriend = !0;
    this._super(
      "",
      isWebPlatform()
        ? cc.size(600, 620)
        : cc.size(620 * GAME_SCALE, 1100 * GAME_SCALE),
      this._tabList.length,
      this._tabList
    );
    isWebPlatform()
      ? (this.headerChessWD.setVisible(!1),
        this._btnClose.setVisibleButton(!0),
        (this._btnClose.x += 15))
      : this.addTitleImage(res_name.title_wd_banbe);
    this.initFr();
    Util.logEvent(EVENT_SWITCH_SCREEN, KEY_SCREEN_NAME, "FriendScene");
    this.addTabChangeEventListener(this.selectedTabEvent, this, 1);
    NativeInterface.logFirebaseEvent(EVENT_NAME.FRIEND_WD);
  },
  iniTab: function () {
    this._arrBtnTab = [];
    var a = new BkButton(
      res_name.btnBanBe,
      res_name.btnBanbeSelectPress,
      res_name.btnBanBe,
      res_name.btnBanBe,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    this.initForBtn(a, 1);
    this._arrBtnTab.push(a);
    a = new BkButton(
      res_name.btnTimBanDeselect,
      res_name.btnTimBanDeselectPress,
      res_name.btnTimBanDeselect,
      res_name.btnTimBanDeselect,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    this.initForBtn(a, 2);
    this._arrBtnTab.push(a);
    this.configPosButton();
    if (void 0 != this._arrBtnText)
      for (a = 0; a < this._arrBtnText.length; a++) {
        var b = this._arrBtnTab[a];
        0 == a
          ? this.setSelectedForButton(b, !0)
          : this.setSelectedForButton(b, !1);
      }
    else
      console.log("Error: Must addTabChangeEventListener to callback handle");
  },
  configPosButton: function () {
    var a = this._arrBtnTab[0],
      b = this._arrBtnTab[1];
    a.x = 0.3 * this.getWindowSize().width;
    a.y = 0.9 * this.getWindowSize().height;
    b.x = 0.7 * this.getWindowSize().width;
    b.y = a.y;
    isWebPlatform() && ((a.y += 20), (b.y = a.y));
  },
  configButtonWithSelectedTab: function (a) {
    var b = this._arrBtnTab[0],
      d = this._arrBtnTab[1];
    1 == a
      ? (b.loadTextures(
          res_name.btnBanBe,
          res_name.btnBanbeSelectPress,
          res_name.btnBanBe,
          res_name.btnBanBe,
          ccui.Widget.PLIST_TEXTURE
        ),
        d.loadTextures(
          res_name.btnTimBanDeselect,
          res_name.btnTimBanDeselectPress,
          res_name.btnTimBanDeselect,
          res_name.btnTimBanDeselect,
          ccui.Widget.PLIST_TEXTURE
        ))
      : (b.loadTextures(
          res_name.btnBanBeDeselect,
          res_name.btnBanBeDeselectPress,
          res_name.btnBanBeDeselect,
          res_name.btnBanBeDeselect,
          ccui.Widget.PLIST_TEXTURE
        ),
        d.loadTextures(
          res_name.btnTimBan,
          res_name.btnTimBanSelectPress,
          res_name.btnTimBan,
          res_name.btnTimBan,
          ccui.Widget.PLIST_TEXTURE
        ));
  },
  initFr: function () {
    this.setVisibleOutBackgroundWindow(!0);
    this.refreshButton = new BkButton(
      res_name.btnRefresh,
      res_name.btnRefreshPress,
      res_name.btnRefresh,
      res_name.btnRefresh,
      ccui.Widget.PLIST_TEXTURE
    );
    this.refreshButton.setScale(GAME_SCALE);
    this.refreshButton.x = 0.9 * this.getWindowSize().width;
    this.refreshButton.y = 0.83 * this.getWindowSize().height;
    var a = this._arrBtnTab[1],
      b = new BkSprite("#" + res_name.btnTimBan);
    this.refreshButton.y =
      a.y -
      b.getContentSize().height * GAME_SCALE * 0.5 -
      this.refreshButton.getBoundingBox().height / 2;
    this.refreshButton.addTouchEventListener(function (a, b) {
      2e3 > BkTime.GetCurrentTime() - this.refreshButton.lastTimeClick
        ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
        : ((this.refreshButton.lastTimeClick = BkTime.GetCurrentTime()),
          this.loadFriendsList());
    }, this);
    isWebPlatform() &&
      ((this.refreshButton.x = this.getWindowSize().width / 2),
      (this.refreshButton.y = 0.94 * this.getWindowSize().height));
    this.addChildBody(this.refreshButton, WD_ZORDER_TOP);
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this);
  },
  onLoadComplete: function (a, b) {
    switch (b) {
      case c.NETWORK_GET_FRIENDS_RETURN:
        this._isLoadedFriendList = !0;
        this._friendList = a;
        if (
          this.isFirstLoadFriend &&
          ((this.isFirstLoadFriend = !1), 0 == this._friendList.length)
        ) {
          logMessage("friendlist trong -\x3e default show tab 2");
          Util.removeAnim();
          this.configBaseTabUI(2);
          return;
        }
        this.drawUIWithFriendsListReturn();
        break;
      case c.NETWORK_PLAYER_SEARCH_FRIENDS:
        this.drawSearchResultByName(a);
        break;
      case c.NETWORK_ACCEPT_FRIEND_SUCCESS:
        showToastMessage(
          "B\u1ea1n v\u00e0 " +
            this._selectedFriend.getUserName() +
            " \u0111\u00e3 tr\u1edf th\u00e0nh b\u1ea1n b\u00e8.",
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2
        );
        this.updateFriendList(!0);
        break;
      case c.NETWORK_REMOVE_FRIEND_SUCCESS:
        showToastMessage(
          "\u0110\u00e3 x\u00f3a " +
            a +
            " kh\u1ecfi danh s\u00e1ch theo d\u00f5i.",
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2
        );
        this._isRemovedFriend
          ? this.removeFriendList()
          : this.updateFriendList(!1);
        break;
      case c.NETWORK_REQUEST_FRIEND_SUCCESS:
        this.updateFriendList(!0);
        showToastMessage(
          "B\u1ea1n \u0111\u00e3 b\u1eaft \u0111\u1ea7u theo d\u00f5i: " + a,
          cc.director.getWinSize().width / 2,
          cc.director.getWinSize().height / 2
        );
        break;
      case c.NETWORK_PLAY_WITH_FRIEND_REQUEST:
        this.updateInvitePlayStatus(a);
        break;
      case c.NETWORK_PLAY_WITH_FRIEND_INFORM:
        this.updateInvitePlayStatus(a);
        break;
      case c.NETWORK_LINK_PLAYER_ACCOUNT:
        this.updateFacebokLinkPlayerAccHasRantUserFriend(a);
    }
    Util.removeAnim();
  },
  updateFacebokLinkPlayerAccHasRantUserFriend: function () {
    logMessage("updateFacebokLinkPlayerAccHasRantUserFriend");
    null != this.btnBanBeFB && this.btnBanBeFB.setVisibleButton(!1);
    null != this.btnMoiBanFB &&
      (this.btnMoiBanFB.x = 0.5 * this.getWindowSize().width);
    this.loadFriendsList();
  },
  drawUIWithFriendsListReturn: function () {
    this.cleanGUI();
    this.cleanSearchGUI();
    1 == this.getCurrentTab() &&
      this.drawFriendsList(this._friendList, this.getCurrentTab());
  },
  loadFriendsList: function () {
    logMessage("loadFriendsList");
    this.initHandleonLoadComplete();
    var a = new BkPacket();
    a.CreateFriendsListPacket();
    BkConnectionManager.send(a);
    Util.showAnim();
  },
  selectedTabEvent: function (a, b) {
    logMessage("selectedTabEvent: " + b);
    this.drawUIWithTab(b);
  },
  drawUIWithTab: function (a) {
    this.cleanGUI();
    this.cleanSearchGUI();
    1 == a
      ? (isWebPlatform()
          ? (this.refreshButton.setVisibleButton(!1), this.loadFriendsList())
          : (this.refreshButton.setVisibleButton(!0),
            this._isLoadedFriendList
              ? this.drawFriendsList(this._friendList, this.getCurrentTab())
              : this.loadFriendsList()),
        this.setVisileGuidleTimBanLayer(!1))
      : 2 == a &&
        (this.refreshButton.setVisibleButton(!1),
        this.initSearchFriendTab(!0),
        this.initButtonMoiBanFB(),
        this.initGuileLayer());
    this._top.getBoundingBox();
    this._arrBtnTab[0].getBoundingBox();
  },
  guidleTimBanLayer: null,
  initGuidleTimBanLayer: function () {
    if (null == this.guidleTimBanLayer) {
      this.guidleTimBanLayer = new BkSprite();
      this.guidleTimBanLayer.setContentSize(630 * GAME_SCALE, 740 * GAME_SCALE);
      this.guidleTimBanLayer.x = this.getWindowSize().width / 2;
      this.guidleTimBanLayer.y =
        this.guidleTimBanLayer.getContentSize().height / 2 +
        0.12 * this.getWindowSize().height;
      this.addChildBody(this.guidleTimBanLayer);
      var a = 18;
      isWebPlatform() || (a = 30);
      var b = ZColor.TEXT_COLOR_LABEL_POPUP,
        d = 0.04 * this.guidleTimBanLayer.getContentSize().width,
        e = new BkLabel(
          "Gi\u1edbi thi\u1ec7u v\u1ec1 ch\u1ee9c n\u0103ng b\u1ea1n b\u00e8: ",
          "",
          a
        );
      e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
      e.setTextColor(b);
      e.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE;
      isWebPlatform() || e.setScale(GAME_SCALE);
      e.x = d + 0.5 * e.getBoundingBox().width;
      e.y = 0.9 * this.guidleTimBanLayer.getContentSize().height;
      this.guidleTimBanLayer.addChild(e);
      var f = 0.8 * e.getBoundingBox().height,
        g = 0.4 * e.getBoundingBox().height,
        h = new BkLabel(
          "1. T\u00ecm b\u1ea1n v\u00e0 k\u1ebft b\u1ea1n theo t\u00ean.",
          "",
          a
        );
      h.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      h.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
      h.setTextColor(b);
      h.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE;
      isWebPlatform() || h.setScale(GAME_SCALE);
      h.x = d + 0.5 * h.getBoundingBox().width;
      h.y =
        e.y -
        0.5 * e.getBoundingBox().height -
        0.5 * h.getBoundingBox().height -
        f;
      this.guidleTimBanLayer.addChild(h);
      e = new BkLabel(
        "2. M\u1eddi b\u1ea1n ch\u01a1i ho\u1eb7c v\u00e0o xem khi b\u1ea1n b\u00e8 online.",
        "",
        a
      );
      e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
      e.setTextColor(b);
      e.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE;
      isWebPlatform() || e.setScale(GAME_SCALE);
      e.x = d + 0.5 * e.getBoundingBox().width;
      e.y =
        h.y -
        0.5 * h.getBoundingBox().height -
        0.5 * e.getBoundingBox().height -
        g;
      this.guidleTimBanLayer.addChild(e);
      h = new BkLabel(
        "3. T\u1ef1 \u0111\u1ed9ng th\u00eam b\u1ea1n b\u00e8 Facebook th\u00e0nh b\u1ea1n trong game.",
        "",
        a
      );
      h.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      h.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
      h.setTextColor(b);
      h.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE;
      isWebPlatform() || h.setScale(GAME_SCALE);
      h.x = d + 0.5 * h.getBoundingBox().width;
      h.y =
        e.y -
        0.5 * e.getBoundingBox().height -
        0.5 * h.getBoundingBox().height -
        g;
      this.guidleTimBanLayer.addChild(h);
      a = new BkLabel(
        'Ch\u00fa \u00fd: \u0111\u1ec3 xem h\u01b0\u1edbng d\u1eabn chi ti\u1ebft vui l\u00f2ng click button "H\u01b0\u1edbng d\u1eabn"',
        "",
        a,
        !1,
        !0
      );
      a.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT);
      a.setTextColor(b);
      a.boundingWidth = (0.95 * this.getWindowSize().width) / GAME_SCALE;
      isWebPlatform() || a.setScale(GAME_SCALE);
      a.x = d + 0.5 * a.getBoundingBox().width;
      a.y =
        h.y -
        0.5 * h.getBoundingBox().height -
        0.5 * a.getBoundingBox().height -
        g;
      this.guidleTimBanLayer.addChild(a);
      b = new BkButton(
        res_name.btn_no_text,
        res_name.btn_no_text_press,
        res_name.btn_no_text,
        res_name.btn_no_text,
        ccui.Widget.PLIST_TEXTURE
      );
      b.setTitleText("H\u01b0\u1edbng d\u1eabn");
      b.setTitleFontName(Util.getBtnFontName());
      b.setTitleFontSize(31);
      b.setTitleColor(cc.color(71, 44, 27));
      b.getTitleRenderer().y += 0.1 * b.getBoundingBox().height;
      b.setScale(GAME_SCALE);
      b.x = 0.5 * this.guidleTimBanLayer.getContentSize().width;
      b.y = a.y - a.getBoundingBox().height - 0.5 * b.getBoundingBox().height;
      this.guidleTimBanLayer.addChild(b);
      var k = this;
      b.addClickEventListener(function () {
        k.onClickHuongDanChiTiet();
      });
    }
  },
  onClickHuongDanChiTiet: function () {
    logMessage("onClickHuongDanChiTiet");
    Util.openWebview(
      SETTING.URL_DOMAIN_SETTING + "huong-dan-ban-be",
      "H\u01b0\u1edbng d\u1eabn chi ti\u1ebft"
    );
  },
  setVisileGuidleTimBanLayer: function (a) {
    null != this.guidleTimBanLayer && this.guidleTimBanLayer.setVisible(a);
  },
  initGuileLayer: function () {
    isWebPlatform() ||
      isFBInstantGame() ||
      (this.initGuidleTimBanLayer(), this.setVisileGuidleTimBanLayer(!0));
  },
  initSearchFriendTab: function (a) {
    this.cleanSearchGUI();
    this._searchFrPanel = new BkSprite();
    this.addChildBody(this._searchFrPanel, 0, 0);
    a = new cc.DrawNode();
    var b = cc.color(64, 54, 37);
    a.drawRect(cc.p(0, 0), cc.p(595, 1), b, 1, b);
    a.x = 0;
    a.y = 0;
    a = 16;
    var d = 18,
      b = 0.6;
    isWebPlatform() || ((d = a = 30), (b = GAME_SCALE));
    a = new BkLabel("T\u00ean ng\u01b0\u1eddi ch\u01a1i:", "Arial", a);
    a.x = a.getContentSize().width / 2 + 80;
    a.y = a.getContentSize().height / 2 + 12;
    this._searchFrPanel.addChild(a);
    var e = res_name.changename,
      f = cc.size(205, 30);
    isWebPlatform() || (f = cc.size(205, 46));
    this._inputName = createEditBox(f, e);
    this._inputName.x =
      a.x +
      a.getContentSize().width / 2 +
      this._inputName.getContentSize().width / 2 +
      5;
    this._inputName.y = a.y - 0.5;
    this._inputName.setFontSize(d);
    "" != this._currentSearchFrName &&
      this._inputName.setString(this._currentSearchFrName);
    d = ZColor.TEXT_COLOR_NAME_AVATAR;
    this._inputName.setFontColor(ZColor.TEXT_COLOR_NAME_AVATAR);
    this._inputName.setMaxLength(20);
    this._searchFrPanel.addChild(this._inputName);
    this._inputName.setFocus();
    this._inputName.setTabStop();
    var g = this;
    cc.eventManager.addListener(
      {
        event: cc.EventListener.KEYBOARD,
        onKeyReleased: function (a, b) {
          a == cc.KEY.enter && g.doSearchFriend(g._inputName.getString());
        },
      },
      this._inputName
    );
    e = createBkButtonPlist(
      res_name.btnTimKiem,
      res_name.btnTimKiemPress,
      res_name.btnTimKiem,
      res_name.btnTimKiem
    );
    e.setScale(GAME_SCALE);
    a.setScale(b);
    this._inputName.setScale(GAME_SCALE);
    a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    e.x =
      this._inputName.x +
      this._inputName.getContentSize().width / 2 +
      e.getContentSize().width / 2 +
      15;
    e.y = this._inputName.y;
    e.addTouchEventListener(function (a, b) {
      b == ccui.Widget.TOUCH_ENDED &&
        this.doSearchFriend(this._inputName.getString());
    }, this);
    this._searchFrPanel.addChild(e);
    this._searchFrPanel.x = 22;
    this._searchFrPanel.y = this.getWindowSize().height / 1.2;
    f =
      e.getBoundingBox().width +
      a.getBoundingBox().width +
      this._inputName.getBoundingBox().width;
    b = 5 * GAME_SCALE;
    f = (this.getWindowSize().width - f - 2 * b) / 2;
    this._searchFrPanel.x = f;
    a.x = a.getBoundingBox().width / 2;
    this._inputName.x =
      a.x +
      a.getBoundingBox().width / 2 +
      this._inputName.getBoundingBox().width / 2 +
      b;
    e.x =
      this._inputName.x +
      this._inputName.getBoundingBox().width / 2 +
      e.getBoundingBox().width / 2 +
      b;
    this._searchFrPanel.y = 0.81 * this.getWindowSize().height;
    isWebPlatform() &&
      (a.setVisible(!1),
      this._inputName.setPlaceHolder("Nh\u1eadp t\u00ean ng\u01b0\u1eddi"),
      this._inputName.setPlaceholderFontColor(d),
      (this._inputName.x =
        a.x +
        a.getContentSize().width / 2 +
        this._inputName.getContentSize().width / 2 -
        40),
      (e.x =
        this._inputName.x +
        this._inputName.getContentSize().width / 2 +
        e.getContentSize().width / 2 +
        15));
  },
  drawFriendsList: function (a, b) {
    this._friendListGrid = new BkSprite();
    var d = 480,
      e = 0.9;
    2 == b && ((d = 420), (e = 0.8));
    var f = 0.62 * cc.winSize.width;
    isWebPlatform() ||
      ((f = 0.95 * this.getWindowSize().width),
      (d = 760 * GAME_SCALE),
      1 == b && ((d = 780 * GAME_SCALE), (e = 0.82)));
    this._friendListGrid.setContentSize(f, d);
    if (null != a && 0 < a.length) {
      a.sort(this.sortOnPriority);
      this.listView = new BkListView();
      this.listView.setDirection(ccui.ScrollView.DIR_VERTICAL);
      this.listView.setTouchEnabled(!0);
      this.listView.setBounceEnabled(!0);
      this.listView.setContentSize(
        cc.size(
          this._friendListGrid.getContentSize().width,
          this._friendListGrid.getContentSize().height
        )
      );
      this.listView.setPosition(0, 0);
      this.listView.setGravity(ccui.ListView.GRAVITY_CENTER_VERTICAL);
      for (d = 0; d < a.length; d++)
        (f = this.createFriendItem(a[d], this)),
          this.listView.pushBackCustomItem(f);
      this._friendListGrid.addChild(this.listView);
    } else
      (d = 30),
        isWebPlatform() && (d = 20),
        (d = new BkLabel("", "Arial", d)),
        1 == b
          ? d.setString(
              "B\u1ea1n hi\u1ec7n t\u1ea1i ch\u01b0a c\u00f3 b\u1ea1n b\u00e8 n\u00e0o."
            )
          : 2 == b &&
            d.setString(
              "Kh\u00f4ng c\u00f3 k\u1ebft qu\u1ea3, xin h\u00e3y th\u1eed l\u1ea1i."
            ),
        (d.y = this._friendListGrid.getContentSize().height / 1.5),
        (d.x = this._friendListGrid.getContentSize().width / 2),
        this._friendListGrid.addChild(d),
        d.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        d.setScaleM(GAME_SCALE),
        (d.y = this._friendListGrid.getContentSize().height / 2);
    this._friendListGrid.x = this.getWindowSize().width / 2;
    this._friendListGrid.y =
      this.getWindowSize().height * e -
      this._friendListGrid.getContentSize().height / 2;
    this.initButtonMoiBanFB();
    this.addChildBody(this._friendListGrid, 0, 0);
  },
  initButtonMoiBanFB: function () {
    var a = this;
    if (
      !isWebPlatform() &&
      (logMessage("init btn Moiban"),
      null == this.btnMoiBanFB &&
        ((this.btnMoiBanFB = createBkButtonPlist(
          res_name.btn_moi_ban_FB,
          res_name.btn_moi_ban_FB_press,
          res_name.btn_moi_ban_FB,
          res_name.btn_moi_ban_FB
        )),
        this.btnMoiBanFB.setScale(GAME_SCALE),
        (this.btnMoiBanFB.x = this.getWindowSize().width / 2),
        (this.btnMoiBanFB.y = 0.06 * this.getWindowSize().height),
        this.addChildBody(this.btnMoiBanFB),
        this.btnMoiBanFB.addClickEventListener(function () {
          a.onClickBtnMoiBanFacebook();
        })),
      this.btnMoiBanFB.setVisibleButton(!0),
      !isFBInstantGame() && !NativeInterface.hasGrantedUserFriend())
    ) {
      var b = 0.2 * this.getWindowSize().width;
      null == this.btnBanBeFB &&
        ((this.btnBanBeFB = createBkButtonPlist(
          res_name.btnFriendFB,
          res_name.btnFriendFBPress,
          res_name.btnFriendFB,
          res_name.btnFriendFB
        )),
        this.btnBanBeFB.setScale(GAME_SCALE),
        (this.btnBanBeFB.x = this.getWindowSize().width / 2 + b),
        (this.btnBanBeFB.y = 0.06 * this.getWindowSize().height),
        this.addChildBody(this.btnBanBeFB),
        this.btnBanBeFB.addClickEventListener(function () {
          a.initHandleonLoadComplete();
          NativeInterface.doLoginFBRequestUserFriend();
        }));
      this.btnBanBeFB.setVisibleButton(!0);
      this.btnMoiBanFB.x = this.getWindowSize().width / 2 - b;
    }
  },
  onClickBtnMoiBanFacebook: function () {
    logMessage("onClickBtnMoiBanFacebook");
    var a =
      "B\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c 1" +
      BkConstString.getGameCoinStr() +
      " cho " +
      SETTING.MIN_FRIEND_FB_REWARDED +
      " l\u1eddi m\u1eddi b\u1ea1n Facebook.";
    showPopupMessageWith(a, "", function () {
      BkLogicManager.getLogic().doInviteFriendFacebook();
    });
  },
  showPromotionInfo: function (a, b, d) {
    if (isWebPlatform()) {
      var e = new BkLabel(
        "H\u00e3y m\u1eddi th\u00eam b\u1ea1n tr\u00ean Facebook \u0111\u1ec3 ch\u01a1i c\u00f9ng!",
        "Arial",
        20
      );
      e.x = b;
      e.y = d - 120;
      e.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
      a.addChild(e);
      d = createBkButtonPlist(
        res_name.btn_moi_ban_FB,
        res_name.btn_moi_ban_FB_press,
        res_name.btn_moi_ban_FB,
        res_name.btn_moi_ban_FB
      );
      d.setPosition(b, e.y - 40);
      d.addClickEventListener(function () {
        FbService.appInviteRequestWithLogin();
      });
      a.addChild(d);
    }
  },
  createFriendItem: function (a, b) {
    var d = new BkFriendItem(a, b.getCurrentTab(), b),
      e = new ccui.Layout();
    e.setContentSize(d.getContentSize());
    d.setPosition(
      0.5 * this.getWindowSize().width,
      0.5 * d.getContentSize().height
    );
    e.addChild(d);
    e.playerName = a.getUserName();
    return e;
  },
  createFriendItemUICB: function (a, b) {
    return null == a ? null : new BkFriendItem(a, b.getCurrentTab(), b);
  },
  friendItemUIClickedCB: function (a) {
    void 0 != a &&
      (this.setSelectedFriend(a),
      (a = new BkPlayerInfo(a.getUserName())),
      a.setParentWindow(this),
      a.showWithParent());
  },
  doSearchFriend: function (a) {
    this.setVisileGuidleTimBanLayer(!1);
    if (2e3 > BkTime.GetCurrentTime() - this.refreshButton.lastTimeClick)
      logMessage("click 2 lan trong 1 sec -\x3e don't process action");
    else if (
      ((this.refreshButton.lastTimeClick = BkTime.GetCurrentTime()),
      (a = a.replace(/\s/g, "")),
      (a = a.replace(/\n/g, "")),
      isUserNameValidate(a))
    ) {
      this._currentSearchFrName = a;
      this.initHandleonLoadComplete();
      var b = new BkPacket();
      b.CreateRequestSearchFriend(a);
      BkConnectionManager.send(b);
      Util.showAnim();
    } else
      showToastMessage(
        "Vui l\u00f2ng nh\u1eadp \u00edt nh\u1ea5t 4 k\u00fd t\u1ef1 v\u00e0 ch\u1ec9 ch\u1ee9a ch\u1eef c\u00e1i , s\u1ed1 ho\u1eb7c d\u1ea5u _",
        null,
        null,
        null,
        300
      );
  },
  onClickPlayWith: function (a) {
    if (1 > BkGlobal.UserInfo.getMoney())
      showPopupMessageWith(
        BkConstString.STR_FR_INVITE_LOWER_COIN +
          BkConstString.STR_LOWER_COIN_GUIDE
      );
    else {
      this.initHandleonLoadComplete();
      null != this.selectGameWd && this.selectGameWd.removeSelf();
      this.selectGameWd = new BkSelectGameForFriend(a);
      this.selectGameWd.setParentWindow(this);
      this.selectGameWd.showWithParent();
      var b = this;
      b.setVisible(!1);
      this.selectGameWd.setCallbackRemoveWindow(function () {
        b.setVisible(!0);
        1 == b.getCurrentTab() && b.loadFriendsList();
      });
    }
  },
  updateInvitePlayStatus: function (a) {
    this.selectGameWd && this.selectGameWd.updateInviteStatus(a);
  },
  drawSearchResultByName: function (a) {
    this.initSearchFriendTab();
    this.cleanGUI();
    this.drawFriendsList(a, this.getCurrentTab());
  },
  cleanGUI: function () {
    logMessage("cleanGUI");
    null != this._friendListGrid &&
      (this._friendListGrid.removeSelf(), (this._friendListGrid = null));
  },
  cleanSearchGUI: function () {
    logMessage("cleanSearchGUI");
    null != this._searchFrPanel &&
      (this._searchFrPanel.removeFromParent(), (this._searchFrPanel = null));
  },
  sortOnPriority: function (a, b) {
    var d = a.getUserName().toLowerCase(),
      e = b.getUserName().toLowerCase();
    return a.isOnline() || b.isOnline() ? 0 : d.localeCompare(e);
  },
  isInFriendList: function (a) {
    if (null != this._friendList)
      for (var b = 0; b < this._friendList.length; b++) {
        var d = this._friendList[b];
        if (null != d && d.getUserName().toLowerCase() == a.toLowerCase())
          return !0;
      }
    return !1;
  },
  setSelectedFriend: function (a, b) {
    this._selectedFriend = a;
    this._isRemovedFriend = b;
  },
  updateFriendList: function (a) {
    if (a) {
      a = this._friendList.slice();
      for (var b = !1, d = 0; d < a.length; d++) {
        var e = this._friendList[d];
        this._selectedFriend.getUserName().toLowerCase() ==
          e.getUserName().toLowerCase() && (b = !0);
      }
      b || this._friendList.push(this._selectedFriend);
    }
  },
  removeAddedFriendList: function () {
    for (var a = this._friendList.slice(), b = 0; b < a.length; b++)
      if (
        this._selectedFriend.getUserName().toLowerCase() ==
        a[b].getUserName().toLowerCase()
      ) {
        this._friendList.splice(b, 1);
        break;
      }
    this.drawUIWithFriendsListReturn();
  },
  removeFriendList: function () {
    for (var a = this._friendList.slice(), b = 0; b < a.length; b++)
      if (
        this._selectedFriend.getUserName().toLowerCase() ==
        a[b].getUserName().toLowerCase()
      ) {
        this._friendList.splice(b, 1);
        break;
      }
    this.drawUIWithFriendsListReturn();
  },
  onExit: function () {
    this._super();
    BkLogicManager.getLogic().setOnLoadComplete(null);
  },
});
BkMailItem = BkSprite.extend({
  tabWdNode: null,
  mailInfo: null,
  typeItem: null,
  _eventHover: null,
  mailIcon: null,
  background: null,
  bgHover: null,
  ctor: function (a, b, d, e, f) {
    this._super();
    this.mailInfo = a;
    this.typeItem = d;
    this.tabWdNode = e;
    this.initItem(b, f);
    this.initMouseAction();
  },
  initItem: function (a, b) {
    this.background = new cc.DrawNode();
    this.background.drawRect(
      cc.p(-20.5, -18),
      cc.p(this.tabWdNode.getBodySize().width - 65.5, 18),
      BkColor.GRID_ITEM_COLOR,
      0,
      BkColor.GRID_ITEM_COLOR
    );
    this.addChild(this.background);
    this.bgHover = new cc.DrawNode();
    this.bgHover.drawRect(
      cc.p(-20.5, -18),
      cc.p(this.tabWdNode.getBodySize().width - 65.5, 18),
      BkColor.GRID_ITEM_HOVER_COLOR,
      0,
      BkColor.GRID_ITEM_HOVER_COLOR
    );
    this.bgHover.visible = !1;
    this.addChild(this.bgHover);
    var d = this.mailInfo.getMailStatus();
    this.mailIcon = this.getMailIcon(d);
    this.mailIcon.setScale(0.8);
    this.mailIcon.x = 0 == d ? 0.5 : 0;
    this.mailIcon.y = 0 == d ? 2.5 : 0;
    this.addChild(this.mailIcon);
    d = "";
    d = 2 === this.typeItem ? "T\u1edbi: " : "T\u1eeb: ";
    d = new BkLabel(d, "", 16);
    d.setTextColor(BkColor.MAIL_ITEM_HEADER_COLOR);
    d.x = 20 + d.getContentSize().width / 2;
    d.y = this.mailIcon.y + 0.5;
    this.addChild(d);
    var e = "",
      e =
        2 === this.typeItem
          ? this.mailInfo.getReceiver()
          : this.mailInfo.getSender(),
      f = createFixedWidthLabel(e, 70, 14, "");
    f.setTextColor(BkColor.GRID_ITEM_TEXT_COLOR);
    f.x = d.x + d.getContentSize().width / 2 + f.getContentSize().width / 2;
    f.y = d.y;
    this.addChild(f);
    e = createFixedWidthLabel(this.mailInfo.getTitle(), 320, 14, "");
    e.setTextColor(BkColor.GRID_ITEM_TEXT_COLOR);
    e.x = d.x + 120 + e.getContentSize().width / 2 + 0.5;
    e.y = f.y + 0.5;
    this.addChild(e);
    d = new BkLabel(this.mailInfo.getDate(), "", 14);
    d.setTextColor(BkColor.GRID_ITEM_TEXT_COLOR);
    d.x = 570;
    d.y = e.y;
    this.addChild(d);
    b ||
      ((d = new cc.DrawNode()),
      d.drawSegment(
        cc.p(-21, -19),
        cc.p(this.tabWdNode.getBodySize().width - 65, -19),
        0.5,
        BkColor.BG_BODY_BORDER_COLOR
      ),
      this.addChild(d));
    this.configPos(a);
  },
  getMailIcon: function (a) {
    return 1 == this.typeItem && 0 != a && 1 == a
      ? getSpriteFromImage("#" + res_name.MailReadIcon)
      : getSpriteFromImage("#" + res_name.MailUnreadIcon);
  },
  configPos: function (a) {
    this.x = 0;
    this.y = a - 37.7;
  },
  initMouseAction: function () {
    var a = this;
    this._eventHover = this.createHoverEvent(
      function () {
        a.bgHover.setVisible(!0);
      },
      function () {
        a.bgHover.setVisible(!1);
      },
      function () {
        if (a.bgHover.isVisible()) a.onClickMailItem(a.mailInfo.getMailId());
      }
    );
    cc.eventManager.addListener(this._eventHover, this);
  },
  onClickMailItem: function (a) {
    0 == this.mailInfo.getMailStatus() &&
      (BkGlobal.UserInfo.setNumberOfUnreadMails(
        BkGlobal.UserInfo.getNumberOfUnreadMails() - 1
      ),
      this.mailIcon.setSpriteFrame(res_name.MailReadIcon));
    a = new BkMailDetailsWindow(a, this.typeItem, this.tabWdNode, this);
    a.setParentWindow(this.tabWdNode);
    a.showWithParent();
  },
});
COIN_X = [0, 0, 0, -15, -15, -15, -2, -1, 0];
COIN_Y = [4, 2, 0, 8, 6, 4, 20, 18, 16];
TOTAL_COIN_OFFSET_X = 0;
TOTAL_COIN_OFFSET_Y = 19;
BkPhingSprite = BkSprite.extend({
  imgCoinArr: null,
  lblMoney: null,
  money: 0,
  callbackFunc: null,
  type: 0,
  moneyBg: null,
  BASE_COIN_RATE: 100,
  MAX_COIN_IN_COLUMN: 3,
  COIN_COLUMN: 3,
  ctor: function (a, b) {
    this._super();
    IsNumeric(a) ? (this.money = a) : (this.money = 0);
    this.type = 0;
    null != b && (this.type = b);
    this.initCoin();
    this.initMoneyBg(b);
    this.lblMoney = new BkLabel("", "", 16);
    this.lblMoney.setTextColor(cc.color(255, 255, 0));
    this.addChild(this.lblMoney, 1);
    this.setMoney(a);
  },
  getCoin: function (a) {
    for (var b = 0; a >= this.MAX_COIN_IN_COLUMN + 1; )
      b++, (a /= this.MAX_COIN_IN_COLUMN + 1);
    b = Math.min(b, 14);
    return new BkSprite(res.Coins, cc.rect(28 * b, 0, 28, 28));
  },
  removeCoin: function () {
    if (null != this.imgCoinArr)
      for (; 0 < this.imgCoinArr.length; )
        this.imgCoinArr.pop().removeFromParent();
    this.imgCoinArr = null;
  },
  initPokerNormalBetCoin: function () {
    this.removeCoin();
    this.imgCoinArr = [];
    var a = this.getCoin(this.money / this.BASE_COIN_RATE);
    a.scaleX = 0.7;
    a.scaleY = 0.7;
    a.y = 20;
    this.imgCoinArr.push(a);
    this.addChild(a, 2);
  },
  initXitoNormalBetCoin: function () {
    this.removeCoin();
    this.imgCoinArr = [];
    var a = this.getCoin(this.money / this.BASE_COIN_RATE);
    a.scaleX = 0.7;
    a.scaleY = 0.7;
    a.x = -15;
    a.y = 0;
    this.imgCoinArr.push(a);
    this.addChild(a, 2);
  },
  buildAColumnChip: function (a, b) {
    for (var d = 0, e = b; e >= this.MAX_COIN_IN_COLUMN + 1; )
      d++, (e = Math.floor(e / (this.MAX_COIN_IN_COLUMN + 1)));
    for (var d = Math.min(d, 14), f = 0; f < this.MAX_COIN_IN_COLUMN; f++);
    return Math.pow(this.MAX_COIN_IN_COLUMN + 1, d) * e;
  },
  initPokerTotalBetCoin: function () {
    this.removeCoin();
    this.imgCoinArr = [];
    for (
      var a = this.money / this.BASE_COIN_RATE, b = 0;
      b < this.COIN_COLUMN;
      b++
    )
      a -= this.buildAColumnChip(b * this.MAX_COIN_IN_COLUMN, a);
    for (b = this.imgCoinArr.length - 1; 0 <= b; b--)
      this.addChild(this.imgCoinArr[b], 2);
  },
  initCoin: function () {
    switch (this.type) {
      case 0:
        this.initPokerNormalBetCoin();
        break;
      case 1:
        this.initPokerTotalBetCoin();
        break;
      case 2:
        this.initXitoNormalBetCoin();
    }
  },
  updatePhingType: function (a) {
    this.type = a;
    this.initCoin();
    this.initMoneyBg();
  },
  initMoneyBg: function (a) {
    null != this.moneyBg &&
      (this.moneyBg.removeFromParent(), (this.moneyBg = null));
    0 == this.type
      ? (this.moneyBg = new BkSprite("#" + res_name.bet_money_bg0))
      : 1 == this.type &&
        (this.moneyBg = new BkSprite("#" + res_name.bet_money_bg1));
    null != this.moneyBg && this.addChild(this.moneyBg);
  },
  setMoney: function (a) {
    this.money = a;
    this.initCoin();
    0 == a
      ? (this.visible = !1)
      : ((this.visible = !0),
        this.lblMoney.setString(convertStringToMoneyFormat(a)),
        2 == this.type &&
          (this.lblMoney.x = this.lblMoney.getContentSize().width / 2));
  },
  getWidth: function () {
    if (null == this.lblMoney) return 0;
    var a = this.lblMoney.getContentSize().width;
    null != this.imgCoinArr && (a += Math.abs(this.imgCoinArr[0].x));
    return a;
  },
  addMoney: function (a) {
    this.setMoney(this.money + a);
  },
  getMoney: function () {
    return this.money;
  },
  setCallbackMoveFinish: function (a) {
    this.callbackFunc = a;
  },
  move: function (a, b, d) {
    var e = cc.callFunc(this.animationFinish, this);
    a = cc.moveTo(a, b, d);
    e = cc.sequence(a, e);
    this.runAction(e);
  },
  animationFinish: function () {
    null != this.callbackFunc && this.callbackFunc(this);
    this.removeSelf();
  },
});
BkDiemSprite = BkSprite.extend({
  bgSprite: null,
  lbDiem: null,
  ctor: function (a) {
    this._super();
    this.bgSprite = new BkSprite("#" + res_name.result_normal_bg);
    var b = 165;
    10 > a.length && (b = 110);
    this.bgSprite.setScaleX(b / 87);
    this.bgSprite.setScaleY(35 / 29);
    this.bgSprite.x = 0;
    this.addChild(this.bgSprite);
    this.lbDiem = new cc.LabelBMFont(a, res.BITMAP_GAME_FONT);
    this.lbDiem.x = this.bgSprite.x;
    this.lbDiem.y = this.bgSprite.y + 2;
    this.addChild(this.lbDiem);
  },
});
BkNumberCBSprite = BkSprite.extend({
  ldNumber: -1,
  ldCheckbox: null,
  lbText: null,
  transBG: null,
  changeCB: null,
  ctor: function (a) {
    this._super(res.Tranperent_IMG);
    this.ldNumber = a;
    this.ldCheckbox = new BkCheckBox();
    var b = this;
    this.ldCheckbox.addEventListener(function (a, d) {
      logMessage("onCheckChange");
      b.ldCheckbox.isSelected()
        ? b.lbText.setColor(cc.color(255, 255, 0))
        : b.lbText.setColor(cc.color(255, 255, 255));
      null != b.changeCB && b.changeCB(b);
    }, this);
    this.ldCheckbox.x = 0;
    this.ldCheckbox.y = 0;
    var d = "" + a;
    10 > a && (d = "0" + a);
    this.lbText = new BkLabel(d, "", 16);
    this.lbText.x = this.ldCheckbox.x + 20;
    this.lbText.y = this.ldCheckbox.y;
    this.addChild(this.ldCheckbox);
    this.addChild(this.lbText);
    this.setContentSize(
      cc.size(
        this.ldCheckbox.width + this.lbText.width / 2,
        this.ldCheckbox.height
      )
    );
    this.transBG = new BkSprite("#" + res_name.btn_ready_normal);
    this.transBG.opacity = 0;
    a =
      (this.ldCheckbox.width + this.lbText.width) /
      this.transBG.getContentSize().width;
    d = this.ldCheckbox.height / this.transBG.getContentSize().height;
    this.transBG.setScale(a, d);
    this.transBG.x = (this.ldCheckbox.width + this.lbText.width - 20) / 2;
    this.addChild(this.transBG, 1);
    this.transBG.setMouseOnHover();
    this.transBG.setOnlickListenner(function () {
      logMessage("OnlickListenner " + b.ldNumber);
      b.ldCheckbox.isSelected()
        ? b.lbText.setColor(cc.color(255, 255, 255))
        : b.lbText.setColor(cc.color(255, 255, 0));
      b.ldCheckbox.setSelected(!b.ldCheckbox.isSelected());
      null != b.changeCB && b.changeCB(b);
    });
  },
  isSelected: function () {
    return this.ldCheckbox.isSelected();
  },
  setCheckboxOnChangeCallback: function (a) {
    this.changeCB = a;
  },
});
DAILY_TASK_BEGIN_ITEM_Y = 1.14;
BkDailyTaskWindow = BkWindow.extend({
  dailyTaskSprite: null,
  taskList: null,
  ctor: function (a) {
    this._super("Nhi\u1ec7m v\u1ee5 h\u1eb1ng ng\u00e0y", cc.size(550, 360), a);
    this.setMoveableWindow(!0);
    this.setVisibleOutBackgroundWindow(!0);
    this.initWd();
  },
  initWd: function () {
    this.setDefaultWdBodyBg();
    this.getDailyTaskList();
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this);
  },
  onLoadComplete: function (a, b) {
    BkLogicManager.getLogic().setOnLoadComplete(null);
    switch (b) {
      case c.NETWORK_GET_DAILY_TASK_LIST_RETURN:
        this.taskList = a;
        this.drawDailyTaskList(a);
        break;
      case c.NETWORK_REQUEST_DAILY_TASK_BONUS_RETURN:
        null != this.taskList && this.drawDailyTaskBonusList(this.taskList, a);
    }
    Util.removeAnim();
  },
  getDailyTaskList: function () {
    Util.showAnim();
    this.initHandleonLoadComplete();
    BkLogicManager.getLogic().getDailyTaskList();
  },
  drawDailyTaskList: function (a) {
    null != this.dailyTaskSprite &&
      (this.dailyTaskSprite.removeSelf(), (this.dailyTaskSprite = null));
    this.dailyTaskSprite = new BkSprite();
    this.addChildBody(this.dailyTaskSprite);
    if (0 < a.length) {
      this.dailyTaskSprite.x = 20;
      this.dailyTaskSprite.y = 0;
      for (
        var b = this.getBodySize().height / DAILY_TASK_BEGIN_ITEM_Y, d = 0;
        d < a.length;
        d++
      ) {
        var e = new BkDailyTaskItem(a[d], b, d == a.length - 1, this);
        e.x = 10;
        b = e.y;
        this.dailyTaskSprite.addChild(e);
      }
    } else
      (a = new BkLabel(
        "B\u1ea1n kh\u00f4ng c\u00f2n nhi\u1ec7m v\u1ee5 n\u00e0o c\u1ea7n l\u00e0m.",
        "Tahoma",
        18
      )),
        (a.x = this.getBodySize().width / 2),
        (a.y = this.getBodySize().height / 2),
        this.dailyTaskSprite.addChild(a);
  },
  drawDailyTaskBonusList: function (a, b) {
    null != this.dailyTaskSprite &&
      (this.dailyTaskSprite.removeSelf(), (this.dailyTaskSprite = null));
    this.dailyTaskSprite = new BkSprite();
    this.addChildBody(this.dailyTaskSprite);
    this.dailyTaskSprite.x = 20;
    this.dailyTaskSprite.y = 0;
    for (
      var d = this.getBodySize().height / DAILY_TASK_BEGIN_ITEM_Y, e = 0;
      e < a.length;
      e++
    ) {
      var f = a[e],
        g = e == a.length - 1;
      f.id == b.id &&
        (showPopupMessageWith(
          "Ch\u00fac m\u1eebng b\u1ea1n \u0111\u00e3 ho\u00e0n th\u00e0nh nhi\u1ec7m v\u1ee5.\nB\u1ea1n v\u1eeba \u0111\u01b0\u1ee3c th\u01b0\u1edfng " +
            f.bonusMoney +
            BkConstString.getGameCoinStr(),
          "Th\u01b0\u1edfng h\u1eb1ng ng\u00e0y",
          null,
          null,
          this
        ),
        BkGlobal.UserInfo.setMoney(BkGlobal.UserInfo.getMoney() + f.bonusMoney),
        BkLogicManager.getLogic().processUpdateProfileUI(),
        (f = b),
        f.copyNextItem(),
        (a[e] = f));
      f = new BkDailyTaskItem(f, d, g, this);
      f.x = 10;
      d = f.y;
      f.x = 10;
      this.dailyTaskSprite.addChild(f);
    }
  },
  removeSelf: function () {
    this._super();
    BkLogicManager.getLogic().getDailyTaskList();
    BkLogicManager.getLogic().setOnLoadComplete(
      getCurrentScene().chooseGameLayer
    );
  },
});
FB_SETUP_BEGIN_ITEM_Y = 1.15;
FB_SETUP_PADDING = 50;
FB_SETUP_PADDING_INPUT = 290;
FB_SETUP_LINK_USER = 0;
FB_SETUP_RENAME = 1;
BkFbUserSetupWindow = BkWindow.extend({
  fbLinkUserSprite: null,
  setupType: null,
  txtUser: null,
  txtPassword: null,
  userName: null,
  facebookId: null,
  accessToken: null,
  ctor: function (a, b, d, e) {
    this.setupType = a;
    a = "\u0110\u1ed5i t\u00ean \u0111\u0103ng nh\u1eadp";
    this.setupType == FB_SETUP_LINK_USER &&
      (a = "Li\u00ean k\u1ebft t\u00e0i kho\u1ea3n");
    this._super(a, cc.size(530, 301));
    this.setMoveableWindow(!0);
    this.setVisibleOutBackgroundWindow(!0);
    this.initWd();
    this.setupType == FB_SETUP_LINK_USER &&
      null != this.userName &&
      null != this.accessToken &&
      this.setCallbackRemoveWindow(this.onCloseWindows);
  },
  initWd: function () {
    this.setDefaultWdBodyBg();
    null != this.fbLinkUserSprite &&
      (this.fbLinkUserSprite.removeSelf(), (this.fbLinkUserSprite = null));
    this.fbLinkUserSprite = new BkSprite();
    this.addChildBody(this.fbLinkUserSprite, 0, 0);
    this.setupType == FB_SETUP_RENAME
      ? this.drawRenameUser()
      : this.setupType == FB_SETUP_LINK_USER && this.drawLinkUser();
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this);
  },
  onCloseWindows: function () {
    this.setupType == FB_SETUP_LINK_USER &&
      null != this.facebookId &&
      null != this.accessToken &&
      BkFacebookMgr.doRegisterFbUser(
        this.facebookId,
        this.accessToken,
        cc.bkClientId
      );
  },
  onLoadComplete: function (a, b) {
    Util.removeAnim();
    BkLogicManager.getLogic().setOnLoadComplete(null);
    switch (a) {
      case fb.SUCCESS:
        if (b == fb.SUBEVENT_LINK_PLAYER)
          this.showPopUpNotify(
            "B\u1ea1n \u0111\u00e3 li\u00ean k\u1ebft t\u00e0i kho\u1ea3n th\u00e0nh c\u00f4ng!",
            !0
          ),
            (BkGlobal.isFbLinkable = !1),
            logMessage("after link fb success -\x3e update user info"),
            void 0 != this.txtUser &&
              (postUserTracker(
                2,
                BkGlobal.UserInfo.getUserName(),
                bk.cpid,
                cc.bkClientId,
                BkFacebookMgr.facebookID,
                "FB_LINK_PLAYER: " + this.txtUser.getString()
              ),
              BkGlobal.UserInfo.setUserName(this.txtUser.getString())),
            BkLogicManager.getLogic().setOnLoadComplete(this.getParentWindow()),
            BkLogicManager.getLogic().DoGetProfilePlayer(
              this.txtUser.getString()
            );
        else if (b == fb.SUBEVENT_RENAME) {
          BkGlobal.isFbRenameable = !1;
          var d = Util.getClientSetting(key.userLoginInfo, !0);
          void 0 != d.username &&
            ((d.username = this.txtUser.getString()),
            Util.setClientSetting(key.userLoginInfo, JSON.stringify(d)));
          this.showPopUpNotify(
            "B\u1ea1n \u0111\u00e3 \u0111\u1ed5i t\u00ean \u0111\u0103ng nh\u1eadp th\u00e0nh c\u00f4ng!",
            !0
          );
          postUserTracker(
            2,
            BkGlobal.UserInfo.getUserName(),
            bk.cpid,
            cc.bkClientId,
            BkFacebookMgr.facebookID,
            "FB_RENAME: " + this.txtUser.getString()
          );
        }
        void 0 != this.txtUser &&
          (BkGlobal.UserInfo.setUserName(this.txtUser.getString()),
          getCurrentScene().updateAvatar(BkGlobal.UserInfo));
        break;
      case fb.ERR_AUTH_FACEBOOK:
        this.showPopUpNotify(BkConstString.ERR_AUTH_FACEBOOK);
        break;
      case fb.ERR_LINK_FACEBOOK_LINKED:
        this.showPopUpNotify(BkConstString.ERR_LINK_FACEBOOK_LINKED);
        break;
      case fb.ERR_LINK_PLAYER_LINKED:
        this.showPopUpNotify(BkConstString.ERR_LINK_PLAYER_LINKED);
        break;
      case fb.ERR_LINK_PLAYER_FACEBOOK:
        d = BkConstString.insertIntoStringWithListString(
          BkConstString.ERR_LINK_PLAYER_FACEBOOK,
          [this.txtUser.getString()]
        );
        this.showPopUpNotify(d);
        break;
      case fb.ERR_LINK_INCORRECT_USERPASS:
        this.showPopUpNotify(BkConstString.ERR_LINK_INCORRECT_USERPASS);
        break;
      case fb.ERR_RENAME_NULL_OR_EMPTY:
        this.showPopUpNotify(BkConstString.ERR_RENAME_NULL_OR_EMPTY);
        break;
      case fb.ERR_RENAME_UNAVAILABLE:
        this.showPopUpNotify(BkConstString.ERR_RENAME_UNAVAILABLE);
        break;
      case fb.ERR_RENAME_EXISTING:
        this.showPopUpNotify(BkConstString.ERR_RENAME_EXISTING);
        break;
      case fb.CLOSE_WINDOW:
        this.removeSelf();
    }
  },
  drawLinkUser: function () {
    var a = new BkLabel(
      "H\u00e3y nh\u1eadp t\u00e0i kho\u1ea3n b\u1ea1n mu\u1ed1n li\u00ean k\u1ebft",
      "",
      15
    );
    a.x = this.getBodySize().width / 2;
    a.y = this.getBodySize().height - a.height / 2 - FB_SETUP_PADDING;
    this.fbLinkUserSprite.addChild(a);
    var b = new BkLabel("T\u00ean \u0111\u0103ng nh\u1eadp: ", "Tahoma", 14);
    b.x = b.width / 2 + FB_SETUP_PADDING;
    b.y =
      a.y - a.getContentSize().height / 2 - b.getContentSize().height / 2 - 20;
    this.fbLinkUserSprite.addChild(b);
    this.txtUser = createEditBox(WD_PASS_INPUT_SIZE, res_name.edit_text);
    this.txtUser.setMaxLength(20);
    this.txtUser.setPaddingLeft("2px");
    this.txtUser.x = FB_SETUP_PADDING_INPUT;
    this.txtUser.y = b.y;
    this.txtUser.setPlaceholderFontColor(BkColor.TEXT_INPUT_PLACEHOLDER_COLOR);
    this.txtUser.setFontColor(BkColor.TEXT_INPUT_COLOR);
    this.txtUser.setAutoFocus(!0);
    null != this.userName &&
      void 0 != this.userName &&
      this.txtUser.setString(this.userName);
    this.fbLinkUserSprite.addChild(this.txtUser);
    a = new BkLabel("M\u1eadt kh\u1ea9u: ", "Tahoma", 14);
    a.x = a.width / 2 + FB_SETUP_PADDING;
    a.y =
      this.txtUser.y -
      this.txtUser.height / 2 -
      a.getContentSize().height / 2 -
      15;
    this.fbLinkUserSprite.addChild(a);
    this.txtPassword = createEditBox(WD_PASS_INPUT_SIZE, res_name.edit_text);
    this.txtPassword.setMaxLength(20);
    this.txtPassword.setPaddingLeft("2px");
    this.txtPassword.setInputFlag(cc.EDITBOX_INPUT_FLAG_PASSWORD);
    this.txtPassword.x = FB_SETUP_PADDING_INPUT;
    this.txtPassword.y = a.y;
    this.txtPassword.setPlaceholderFontColor(
      BkColor.TEXT_INPUT_PLACEHOLDER_COLOR
    );
    this.txtPassword.setFontColor(BkColor.TEXT_INPUT_COLOR);
    this.fbLinkUserSprite.addChild(this.txtPassword);
    a = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Hover
    );
    a.setTitleText("C\u1eadp nh\u1eadt");
    a.x = 8 * WD_BODY_MARGIN_LR + a.width / 2;
    a.y = this.txtPassword.y - this.txtPassword.height / 2 - a.height / 2 - 15;
    this.fbLinkUserSprite.addChild(a);
    var d = this;
    a.addTouchEventListener(function (a, b) {
      b == ccui.Widget.TOUCH_ENDED &&
        this.validateLinkUserLogin(
          this.txtUser.getString(),
          this.txtPassword.getString()
        ) &&
        this.requestLinkWFbUser(
          this.txtUser.getString(),
          this.txtPassword.getString(),
          this.facebookId,
          this.accessToken
        );
    }, this);
    b = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Hover
    );
    b.setTitleText("Th\u00f4i");
    b.x = a.x + a.width + b.width / 2;
    b.y = a.y;
    this.fbLinkUserSprite.addChild(b);
    b.addTouchEventListener(function (a, b) {
      b == ccui.Widget.TOUCH_ENDED &&
        (null != this.facebookId &&
          null != this.accessToken &&
          BkFacebookMgr.doRegisterFbUser(
            this.facebookId,
            this.accessToken,
            cc.bkClientId
          ),
        d.removeSelf());
    }, this);
    b = new BkLabel(
      "Ch\u00fa \u00fd: T\u00e0i kho\u1ea3n hi\u1ec7n th\u1eddi s\u1ebd b\u1ecb x\u00f3a sau khi li\u00ean k\u1ebft.",
      "",
      15
    );
    b.setTextColor(BkColor.HEADER_CONTENT_COLOR);
    b.x = b.getContentSize().width / 2 + FB_SETUP_PADDING;
    b.y = a.y - a.height / 2 - b.getContentSize().height / 2 - 10;
    this.fbLinkUserSprite.addChild(b);
  },
  drawRenameUser: function () {
    var a = new BkLabel(
      "T\u00ean \u0111\u0103ng nh\u1eadp hi\u1ec7n th\u1eddi c\u1ee7a b\u1ea1n l\u00e0: " +
        BkGlobal.UserInfo.getUserName(),
      "",
      15
    );
    a.x = this.getBodySize().width / 2;
    a.y =
      this.getBodySize().height -
      a.getContentSize().height / 2 -
      FB_SETUP_PADDING;
    this.fbLinkUserSprite.addChild(a);
    var b = new BkLabel("T\u00ean \u0111\u0103ng nh\u1eadp: ", "Tahoma", 14);
    b.x = b.width / 2 + FB_SETUP_PADDING;
    b.y =
      a.y -
      a.getContentSize().height / 2 -
      b.getContentSize().height / 2 -
      FB_SETUP_PADDING;
    this.fbLinkUserSprite.addChild(b);
    this.txtUser = createEditBox(WD_PASS_INPUT_SIZE, res_name.edit_text);
    this.txtUser.setMaxLength(20);
    this.txtUser.x = 275;
    this.txtUser.y = b.y - 0.5;
    this.txtUser.setPlaceHolder(
      "Nh\u1eadp t\u00ean \u0111\u0103ng nh\u1eadp m\u1edbi"
    );
    this.txtUser.setPlaceholderFontColor(BkColor.TEXT_INPUT_PLACEHOLDER_COLOR);
    this.txtUser.setFontColor(BkColor.TEXT_INPUT_COLOR);
    isWebPlatform() &&
      (this.txtUser.setAutoFocus(!0), this.txtUser.setPaddingLeft("2px"));
    this.fbLinkUserSprite.addChild(this.txtUser);
    this.addEditbox(this.txtUser);
    a = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Hover
    );
    a.setTitleText("C\u1eadp nh\u1eadt");
    a.x = 7 * WD_BODY_MARGIN_LR + a.width / 2;
    a.y = this.txtUser.y - this.txtUser.height / 2 - a.height / 2 - 15;
    this.fbLinkUserSprite.addChild(a);
    var d = this;
    a.addTouchEventListener(function (a, b) {
      var g = this.getWindowPos(),
        h = g.x + this.getWindowSize().width / 2,
        g = g.y + this.getWindowSize().height - 65;
      if (b == ccui.Widget.TOUCH_ENDED) {
        var k = this.txtUser.getString();
        if ("" == k)
          return (
            showToastMessage(BkConstString.STR_MUST_INPUT_NAME, h, g, 2, 370),
            !1
          );
        var m = isValidUsername(k);
        if ("" != m) return showToastMessage(m, h, g, 2, 370), !1;
        d.requestRenameUser(k);
      }
    }, this);
    b = createBkButtonPlist(
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Pressed,
      res_name.BtnDialog_Normal,
      res_name.BtnDialog_Hover
    );
    b.setTitleText("Th\u00f4i");
    b.x = a.x + a.width + b.width / 2;
    b.y = a.y;
    this.fbLinkUserSprite.addChild(b);
    b.addTouchEventListener(function (a, b) {
      b == ccui.Widget.TOUCH_ENDED && d.removeSelf();
    }, this);
    b = new BkLabel(
      "Ch\u00fa \u00fd: B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1ed5i t\u00ean duy nh\u1ea5t m\u1ed9t l\u1ea7n.",
      "",
      15
    );
    b.setTextColor(BkColor.HEADER_CONTENT_COLOR);
    b.x = this.getBodySize().width / 2;
    b.y =
      a.y - a.height / 2 - b.getContentSize().height / 2 - WD_BODY_MARGIN_TB;
    this.fbLinkUserSprite.addChild(b);
  },
  showPopUpNotify: function (a, b) {
    this.txtUser.visible = !1;
    this.txtPassword && (this.txtPassword.visible = !1);
    var d = this,
      e = function () {
        b
          ? d.removeSelf()
          : ((d.txtUser.visible = !0),
            d.txtPassword && (d.txtPassword.visible = !0));
      };
    showPopupMessageWith(a, "", e, e, this);
  },
  requestLinkWFbUser: function (a, b, d, e) {
    Util.showAnim();
    logMessage(
      "User: " + a + " pass: " + b + " fbId: " + d + " accessToken: " + e
    );
    this.initHandleonLoadComplete();
    var f = new BkPacket();
    null != d && null != e
      ? f.CreatePacketLoginFbLinkLogin(a, b, d, e)
      : f.CreatePacketLoginFbLinkSetup(a, b);
    BkConnectionManager.send(f);
  },
  requestRenameUser: function (a) {
    Util.showAnim();
    this.initHandleonLoadComplete();
    var b = new BkPacket();
    b.CreatePacketLoginFbChangeName(a);
    BkConnectionManager.send(b);
    BkGlobal.tempData = a;
    logMessage("requestRenameUser " + a);
  },
  validateLinkUserLogin: function (a, b, d) {
    var e = this.getWindowPos(),
      f = e.x + this.getWindowSize().width / 2,
      e = e.y + this.getWindowSize().height - 65;
    if ("" == a || "" == b)
      return (
        showToastMessage(
          "B\u1ea1n ph\u1ea3i nh\u1eadp t\u00ean t\u00e0i kho\u1ea3n v\u00e0 m\u1eadt kh\u1ea9u \u0111\u0103ng nh\u1eadp",
          f,
          e,
          2,
          370
        ),
        !1
      );
    if (2 > a.length || 20 < a.length)
      return (
        showToastMessage(
          BkConstString.STR_INVALID_NAME + BkConstString.STR_VALID_LENGTH_NAME,
          this.x,
          this.y,
          2,
          200
        ),
        !1
      );
    var g = isValidUsername(a);
    if ("" != g) return showToastMessage(g, f, e, 2, 370), !1;
    if (isEasyPassword(b))
      return (
        showPopupConfirmWith(
          "V\u00ec m\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n qu\u00e1 \u0111\u01a1n gi\u1ea3n n\u00ean kh\u00f4ng th\u1ec3 li\u00ean k\u1ebft t\u00e0i kho\u1ea3n, h\u00e3y v\u00e0o di \u0111\u1ed9ng v\u00e0 \u0111\u1ed5i m\u1eadt kh\u1ea9u sau \u0111\u00f3 quay l\u1ea1i \u0111\u00e2y \u0111\u1ec3 \u0111\u0103ng nh\u1eadp. B\u1ea1n c\u00f3 mu\u1ed1n xem h\u01b0\u1edbng d\u1eabn kh\u00f4ng?",
          null,
          function () {
            d && d();
            cc.sys.openURL(cc.game.config.app.pwdHelp);
          },
          d,
          d,
          this
        ),
        sendGA(BKGA.CHECK_LOGIN_REGIST, "ErrorSimplePass-Link", a),
        !1
      );
    g = isValidPassword(b);
    return "" != g ? (showToastMessage(g, f, e, 2, 370), !1) : !0;
  },
});
var TEXT_MARGIN_TOP_BUTTOM = 23,
  DEFAULT_TIME_COUNT_DOWN = 15,
  BET_OPTION_Y = -20.5,
  AVAR_OPACITY = 100;
BkPlayer = BkSprite.extend({
  numberHasBonus: 0,
  playerData: null,
  lbName: null,
  greenSprite: null,
  cdSprite: null,
  avatarSprite: null,
  lvSprite: null,
  status: 2,
  gameTable: null,
  clientState: null,
  bgSprite: null,
  bgSpriteXito: null,
  imgRank: null,
  ImgSanSang: null,
  imgColdLose: null,
  imgWin: null,
  imgAutoWin: null,
  spriteBatch: null,
  toolTip: null,
  spriteFrameCache: cc.spriteFrameCache,
  imgWinLose: null,
  imgFold: null,
  imgRaise: null,
  imgCheck: null,
  imgAllIn: null,
  lblResult: null,
  cardBg: null,
  betMoney: null,
  maskNotReady: null,
  ctor: function (a, b, d) {
    void 0 != a && ((this.playerData = a), (this.status = b));
    null != d && void 0 != d ? this._super(d) : this._super();
    this._initPlayerSprite();
    this.initEventListener();
  },
  _initPlayerSprite: function () {
    this.bgSprite = new BkSprite("#bgPlayer.png");
    this.addChild(this.bgSprite);
    this.bgSprite.x = this.getContentSize().width / 2;
    this.bgSprite.y = this.getContentSize().height / 2;
    this.avatarSprite = new BkSprite("#bginvitedFR.png");
    this.addChild(this.avatarSprite);
    this.avatarSprite.x = this.getContentSize().width / 2;
    this.avatarSprite.y = this.getContentSize().height / 2;
    this.greenSprite = new BkSprite("#" + res_name.xito_cd_bg);
    this.greenSprite.x = this.getContentSize().width / 2;
    this.greenSprite.y = this.getContentSize().height / 2;
    this.greenSprite.setVisible(!1);
    this.addChild(this.greenSprite);
    this.lbName = new BkLabel("", "", bkFontSizeUtil(16, GAME_SCALE));
    this.lbName.setTextColor(BkColor.DEFAULT_TEXT_COLOR);
    this.lbName.x = this.greenSprite.x;
    this.lbName.y =
      this.greenSprite.getContentSize().height / 2 +
      this.lbName.getContentSize().height / 2 -
      TEXT_MARGIN_TOP_BUTTOM;
    this.addChild(this.lbName, 100);
    this.lvSprite = new BkSprite();
    this.lvSprite.x = -32;
    this.lvSprite.y = 10 * GAME_SCALE;
    this.addChild(this.lvSprite);
    this._configViewPlayer();
  },
  showXitoWinner: function (a) {
    this.spWinnerXitoBg = new BkSprite("#" + res_name.xito_win_bg_border);
    this.spWinnerXitoBg.x =
      1 == a || 2 == a || 3 == a
        ? (this.bgSprite.getWidth() - this.spWinnerXitoBg.getWidth()) / 2
        : (-1 * (this.bgSprite.getWidth() - this.spWinnerXitoBg.getWidth())) /
          2;
    this.addChild(this.spWinnerXitoBg);
  },
  clearResult: function () {
    null != this.spWinnerXitoBg &&
      (this.spWinnerXitoBg.removeSelf(), (this.spWinnerXitoBg = null));
    null != this.lblResult &&
      (this.lblResult.removeFromParent(), (this.lblResult = null));
  },
  show3CayBetMoney: function (a, b) {
    null == this.betMoney &&
      ((this.betMoney = new BkPhingSprite()),
      this.betMoney.updatePhingType(2),
      this.addChild(this.betMoney));
    this.betMoney.setMoney(a);
    this.betMoney.x =
      1 == b || 2 == b || 3 == b ? -71 - this.betMoney.getWidth() / 2 : 80;
    this.betMoney.y = -40;
  },
  clearBetMoney: function () {
    null != this.betMoney &&
      (this.betMoney.removeFromParent(), (this.betMoney = null));
  },
  initEventListener: function () {
    this.bgSprite.setMouseOnHover(function (a) {});
    var a = this;
    this.bgSprite.setOnlickListenner(function (b, d) {
      1e3 > BkTime.GetCurrentTime() - a.bgSprite.lastTimeClick ||
        ((a.bgSprite.lastTimeClick = BkTime.GetCurrentTime()),
        null != a.playerData &&
          null != a.gameTable &&
          a.gameTable.processShowPlayerProfile(a.getPlayerName()));
    });
  },
  setIsVisible: function (a) {
    this.isVisible = a;
  },
  setStatus: function (a) {
    this.status = a;
    this._configViewPlayer();
  },
  setGameTable: function (a) {
    this.gameTable = a;
  },
  setClientState: function (a) {
    this.clientState = a;
  },
  setPlayerdata: function (a, b) {
    this.playerData = a;
    void 0 != b ? this._configViewPlayer(b) : this._configViewPlayer();
  },
  getPlayerName: function () {
    return null == this.playerData ? null : this.playerData.getUserName();
  },
  reset: function () {
    this.clearAllMask();
    this._configViewPlayer();
  },
  _configViewPlayer: function (a) {
    this.showBossTableFlag();
    if (null != this.playerData) {
      this.lbName.setString(Util.trimName(this.playerData.userName, 12));
      this.avatarSprite.setVisible(!0);
      this.lbName.setVisible(!0);
      null == this.bgSpriteXito && this.bgSprite.setVisible(!0);
      this.lvSprite.setVisible(!0);
      if (void 0 == a || !0 != a)
        this.status != PLAYER_STATE_READY &&
        this.status != PLAYER_STATE_TABLE_OWNER
          ? this.showMaskNotReady()
          : this.clearImgMaskNotReady();
      this.setLevelSprite(this.playerData.getLevel());
    } else
      null != this.greenSprite && this.greenSprite.setVisible(!1),
        this.lbName.setVisible(!1),
        this.bgSprite.setVisible(!1),
        this.lvSprite.setVisible(!1),
        null != this.bgSpriteXito &&
          (this.bgSpriteXito.setVisible(!1), (this.bgSpriteXito = null)),
        this.showImgReady(),
        this.clearAllMask(),
        this.clearImgReady(),
        this.clearBetMoney();
  },
  clearAllMask: function () {
    this.clearWinLose();
    this.ClearRank();
    this.clearColdLose();
    this.clearAutoWin();
    this.clearBoLuotMark();
    this.clearAlert1Card();
    this.clearBaoSam();
    this.clearAnSam();
    this.clearWinSplash();
    this.clearBetOption();
    this.clearAllPhomSplash();
    this.clearScore();
    this.clearLoseSplash();
    this.clearResult();
  },
  showBossTableFlag: function () {},
  initCountDown: function () {
    var a = this,
      b = getCurrentScene(),
      d = cc.p(
        this.getContentSize().width / 2,
        this.getContentSize().height / 2
      );
    null != this.greenSprite &&
      (d = b.convertToWorldSpace(this.greenSprite.getPosition()));
    this.cdSprite = new BkCountDownTime("#greenFrame.png");
    this.cdSprite.x = d.x;
    this.cdSprite.y = d.y;
    this.cdSprite.setCallback(function () {
      logMessage("finish cb");
      a.stopCountDown();
    });
    b.addChild(this.cdSprite);
  },
  showCountDownTime: function (a) {
    void 0 == a && (a = DEFAULT_TIME_COUNT_DOWN);
    null != this.cdSprite &&
      (this.cdSprite.removeFromParent(), (this.cdSprite = null));
    this.initCountDown();
    this.cdSprite.showCountDown(a);
    null != this.greenSprite && this.greenSprite.setVisible(!0);
  },
  onFinishCountDown: function () {},
  stopCountDown: function () {
    null != this.cdSprite &&
      (this.cdSprite.removeCountDown(), (this.cdSprite = null));
    null != this.greenSprite && this.greenSprite.setVisible(!1);
  },
  setBoLuotStatus: function (a) {
    null == this.imgBoLuot &&
      ((this.imgBoLuot = new BkSprite("#imgBoluot.png")),
      (this.imgBoLuot.x = 0),
      (this.imgBoLuot.y = -5),
      this.addChild(this.imgBoLuot, this.avatarSprite.getLocalZOrder() + 1));
    this.imgBoLuot.visible = a;
  },
  updateMoney: function (a) {
    null != this.playerData && 0 <= a && this.playerData.setMoney(a);
  },
  clearWinLose: function () {
    null != this.imgWinLose &&
      (this.imgWinLose.removeFromParent(), (this.imgWinLose = null));
  },
  showWinLose: function (a) {
    this.clearWinLose();
    this.imgWinLose = a
      ? new BkSprite("#Thang.png")
      : new BkSprite("#Thua.png");
    this.imgWinLose.visible = !0;
    this.addChild(this.imgWinLose, this.avatarSprite.getLocalZOrder() + 1);
  },
  showLoseSplash: function () {
    null == this.imgLose &&
      ((this.imgLose = new BkSprite("#Thua.png")),
      (this.imgLose.x = 0),
      (this.imgLose.y = 0),
      this.addChild(this.imgLose, this.avatarSprite.getLocalZOrder() + 1));
  },
  clearLoseSplash: function () {
    null != this.imgLose &&
      (this.imgLose.removeFromParent(), (this.imgLose = null));
  },
  showWinSplash: function () {
    null == this.imgWin &&
      ((this.imgWin = new BkSprite("#Thang.png")),
      (this.imgWin.x = 0),
      (this.imgWin.y = 0),
      this.addChild(this.imgWin, this.avatarSprite.getLocalZOrder() + 1));
  },
  clearWinSplash: function () {
    null != this.imgWin &&
      (this.imgWin.removeFromParent(), (this.imgWin = null));
  },
  showFold: function () {
    this.clearBetOption();
    this.imgFold = new BkSprite("#" + res_name.round_bet_fold);
    this.imgFold.y = BET_OPTION_Y;
    this.addChild(this.imgFold, this.avatarSprite.getLocalZOrder() + 1);
  },
  showRaise: function () {
    this.clearBetOption();
    this.imgRaise = new BkSprite("#" + res_name.round_bet_raise);
    this.imgRaise.y = BET_OPTION_Y;
    this.addChild(this.imgRaise, this.avatarSprite.getLocalZOrder() + 1);
  },
  showCheck: function () {
    this.clearBetOption();
    this.imgCheck = new BkSprite("#" + res_name.round_bet_check);
    this.imgCheck.y = BET_OPTION_Y;
    this.addChild(this.imgCheck, this.avatarSprite.getLocalZOrder() + 1);
  },
  clearCardBg: function (a) {
    null != this.cardBg &&
      (this.cardBg.removeFromParent(), (this.cardBg = null));
  },
  showBetBg: function (a, b) {
    null == this.cardBg &&
      (null != this.bgSpriteXito && this.bgSpriteXito.removeFromParent(),
      (this.bgSpriteXito =
        0 == a || 4 == a || 5 == a
          ? new BkSprite("#" + res_name.xito_bg_r)
          : new BkSprite("#" + res_name.xito_bg_l)),
      this.addChild(this.bgSpriteXito, this.bgSprite.getLocalZOrder() - 1),
      this.bgSprite.setOpacity(0),
      this.bgSprite.setVisible(!1),
      (this.cardBg = new BkSprite9()),
      this.cardBg.init(
        new BkSprite(res.black_bg_l),
        new BkSprite(res.black_bg_r),
        new BkSprite(res.black_bg_c)
      ),
      0 == a || 4 == a || 5 == a
        ? ((this.cardBg.x = 1), this.cardBg.scaleRight(246, b))
        : ((this.cardBg.x = -1), this.cardBg.scaleLeft(246, b)),
      this.addChild(this.cardBg, -3));
  },
  showAllIn: function () {
    this.clearBetOption();
    this.imgAllIn = new BkSprite("#" + res_name.round_bet_all_in);
    this.imgAllIn.y = BET_OPTION_Y;
    this.addChild(this.imgAllIn, this.avatarSprite.getLocalZOrder() + 1);
  },
  clearBetOptionForNewRound: function () {
    this.clearCheck();
    this.clearRaise();
  },
  clearBetOption: function () {
    this.clearAllIn();
    this.clearCheck();
    this.clearFold();
    this.clearRaise();
  },
  clearCheck: function () {
    null != this.imgCheck &&
      (this.imgCheck.removeFromParent(), (this.imgCheck = null));
  },
  clearRaise: function () {
    null != this.imgRaise &&
      (this.imgRaise.removeFromParent(), (this.imgRaise = null));
  },
  clearFold: function () {
    null != this.imgFold &&
      (this.imgFold.removeFromParent(), (this.imgFold = null));
  },
  clearAllIn: function () {
    null != this.imgAllIn &&
      (this.imgAllIn.removeFromParent(), (this.imgAllIn = null));
  },
  showRank: function (a, b) {
    this.ClearRank();
    if (2 == b)
      switch (a) {
        case 0:
          this.imgRank = new BkSprite("#Nhat.png");
          break;
        case 1:
          this.imgRank = new BkSprite("#Bet.png");
      }
    else if (3 == b)
      switch (a) {
        case 0:
          this.imgRank = new BkSprite("#Nhat.png");
          break;
        case 1:
          this.imgRank = new BkSprite("#Nhi.png");
          break;
        case 2:
          this.imgRank = new BkSprite("#Bet.png");
      }
    else
      switch (a) {
        case 0:
          this.imgRank = new BkSprite("#Nhat.png");
          break;
        case 1:
          this.imgRank = new BkSprite("#Nhi.png");
          break;
        case 2:
          this.imgRank = new BkSprite("#Ba.png");
          break;
        case 3:
          this.imgRank = new BkSprite("#Bet.png");
      }
    null != this.imgRank &&
      ((this.imgRank.x = 0),
      (this.imgRank.y = 0),
      (this.imgRank.visible = !0),
      this.addChild(this.imgRank, this.avatarSprite.getLocalZOrder() + 1));
  },
  ClearRank: function () {
    null != this.imgRank &&
      (this.imgRank.removeFromParent(), (this.imgRank = null));
  },
  clearBoLuotMark: function () {
    null != this.imgBoLuot &&
      (this.imgBoLuot.removeFromParent(), (this.imgBoLuot = null));
  },
  clearColdLose: function () {
    null != this.imgColdLose &&
      (this.imgColdLose.removeFromParent(), (this.imgColdLose = null));
  },
  clearImgReady: function () {
    null != this.ImgSanSang &&
      (this.ImgSanSang.removeFromParent(), (this.ImgSanSang = null));
  },
  showImgReady: function () {
    null == this.ImgSanSang &&
      ((this.ImgSanSang = new BkSprite("#Ready.png")),
      (this.ImgSanSang.x = 0),
      (this.ImgSanSang.y = 0),
      this.addChild(this.ImgSanSang, this.avatarSprite.getLocalZOrder() + 1));
  },
  clearImgMaskNotReady: function () {
    this.bgSprite.opacity = 255;
    this.avatarSprite.opacity = 255;
  },
  showMaskNotReady: function () {
    this.bgSprite.opacity = AVAR_OPACITY;
    this.avatarSprite.opacity = AVAR_OPACITY;
  },
  showColdLose: function () {
    null == this.imgColdLose &&
      ((this.imgColdLose = new BkSprite("#cong.png")),
      (this.imgColdLose.x = 0),
      (this.imgColdLose.y = 0),
      this.addChild(this.imgColdLose, this.avatarSprite.getLocalZOrder() + 1));
    this.imgColdLose.visible = !0;
  },
  showAutoWin: function () {
    null == this.imgAutoWin &&
      ((this.imgAutoWin = new BkSprite("#AutoWin.png")),
      (this.imgAutoWin.x = 0),
      (this.imgAutoWin.y = 0),
      this.addChild(this.imgAutoWin, this.avatarSprite.getLocalZOrder() + 1));
    this.imgAutoWin.visible = !0;
  },
  showMauBinh: function () {
    null == this.imgAutoWin &&
      ((this.imgAutoWin = new BkSprite("#maubinh.png")),
      (this.imgAutoWin.x = 0),
      (this.imgAutoWin.y = 0),
      this.addChild(this.imgAutoWin, this.avatarSprite.getLocalZOrder() + 1));
    this.imgAutoWin.visible = !0;
  },
  showSap3Chi: function () {
    null == this.imgLose &&
      ((this.imgLose = new BkSprite("#" + res_name.text_sap3chi)),
      (this.imgLose.x = 0),
      (this.imgLose.y = 0),
      this.addChild(this.imgLose, this.avatarSprite.getLocalZOrder() + 1));
  },
  clearAutoWin: function () {
    null != this.imgAutoWin &&
      (this.imgAutoWin.removeFromParent(), (this.imgAutoWin = null));
  },
  baoSam: function (a) {
    null == this.imgBaoSam &&
      ((this.imgBaoSam = a
        ? new BkSprite("#BaoSam.jpg")
        : new BkSprite("#KoBaoSam.jpg")),
      (this.imgBaoSam.x = 0),
      (this.imgBaoSam.y = 0),
      this.addChild(this.imgBaoSam, this.avatarSprite.getLocalZOrder() + 1));
    this.imgBaoSam.visible = !0;
  },
  clearBaoSam: function () {
    null != this.imgBaoSam &&
      (this.imgBaoSam.removeFromParent(), (this.imgBaoSam = null));
  },
  alert1Card: function (a) {
    a
      ? (null == this.imgAlert1Card &&
          ((this.imgAlert1Card = new BkSprite("#Alert1Card.jpg")),
          this.addChild(
            this.imgAlert1Card,
            this.avatarSprite.getLocalZOrder() + 1
          ),
          (this.imgAlert1Card.x = 0),
          (this.imgAlert1Card.y = 20)),
        (this.imgAlert1Card.visible = !0))
      : this.clearAlert1Card();
  },
  clearAlert1Card: function () {
    null != this.imgAlert1Card &&
      (this.imgAlert1Card.removeFromParent(), (this.imgAlert1Card = null));
  },
  anSam: function (a) {
    this.clearAnSam();
    null == this.imgAnSam &&
      ((this.imgAnSam = a
        ? new BkSprite("#AnSam.jpg")
        : new BkSprite("#DenSam.jpg")),
      this.addChild(this.imgAnSam, this.avatarSprite.getLocalZOrder() + 1),
      (this.imgAnSam.x = 0),
      (this.imgAnSam.y = 0));
    this.imgAnSam.visible = !0;
  },
  showMom: function () {
    null == this.imgChay &&
      ((this.imgChay = new BkSprite("#Chay.png")),
      this.addChild(this.imgChay, this.avatarSprite.getLocalZOrder() + 1),
      (this.imgChay.x = 0),
      (this.imgChay.y = 0));
    this.imgChay.visible = !0;
  },
  showSplashU: function () {
    null == this.imgU &&
      ((this.imgU = new BkSprite("#U.png")),
      this.addChild(this.imgU, this.avatarSprite.getLocalZOrder() + 1),
      (this.imgU.x = 0),
      (this.imgU.y = 0));
    this.imgU.visible = !0;
  },
  showUDen: function () {
    null == this.imgDenLang &&
      ((this.imgDenLang = new BkSprite("#Uden.png")),
      this.addChild(this.imgDenLang, this.avatarSprite.getLocalZOrder() + 1),
      (this.imgDenLang.x = 0),
      (this.imgDenLang.y = 0));
    this.imgDenLang.visible = !0;
  },
  clearAllPhomSplash: function () {
    null != this.imgDenLang &&
      (this.imgDenLang.removeFromParent(), (this.imgDenLang = null));
    null != this.imgU && (this.imgU.removeFromParent(), (this.imgU = null));
    null != this.imgChay &&
      (this.imgChay.removeFromParent(), (this.imgChay = null));
  },
  clearAnSam: function () {
    null != this.imgAnSam &&
      (this.imgAnSam.removeFromParent(), (this.imgAnSam = null));
  },
  clearScore: function () {
    null != this.txtscore &&
      (this.txtscore.removeFromParent(), (this.txtscore = null));
  },
  alertDiscardSuccess: function (a) {
    null == this.txtscore &&
      ((this.txtscore = new BkLabel("", "", 17)),
      this.addChild(this.txtscore, this.avatarSprite.getLocalZOrder() + 1),
      (this.txtscore.x = 0),
      (this.txtscore.y = 65));
    a
      ? this.txtscore.setString("Xong")
      : this.txtscore.setString("\u0110ang x\u1ebfp");
  },
  clearEventListener: function () {
    cc.eventManager.removeListener(this.OnMouseMoveListener);
    cc.eventManager.removeListener(this.bgSprite.OnMouseMoveListener);
    cc.eventManager.removeListener(this.bgSprite.OnClickListener);
  },
  setLevelSprite: function (a) {
    this.clearLevelSprite();
    this.lvSprite.addChild(BkLevelImage.createLevelStarSprite(a));
    null != this.playerData &&
      (this.status != PLAYER_STATE_READY &&
      this.status != PLAYER_STATE_TABLE_OWNER
        ? this.lvSprite.setOpacity(AVAR_OPACITY)
        : this.lvSprite.setOpacity(255));
  },
  clearLevelSprite: function () {
    null != this.lvSprite && this.lvSprite.removeAllChildren();
  },
  clearEmotion: function () {
    null != this.spriteBatch &&
      (this.spriteBatch.removeFromParent(), (this.spriteBatch = null));
  },
  showEmotionWithIndex: function (a) {
    BkGlobal.isLoadedChatEmo
      ? (this.clearEmotion(),
        (this.spriteBatch = new BkChatEmoSprite(
          Util.getChatEmoDataWithIndex(a + 1)
        )),
        this.spriteBatch.setScale(1.4),
        this.addChild(this.spriteBatch, 1e3),
        (this.spriteBatch.x = this.avatarSprite.x),
        (this.spriteBatch.y = this.avatarSprite.y),
        this.spriteBatch.showEmo())
      : logMessage("chat emo not loaded -\x3e reject command!");
  },
  showChatWithContent: function (a, b, d) {
    null != this.toolTip && this.toolTip.finishAutoHide();
    this.toolTip = new BkToolTip(res_name.ToastBG_png);
    this.toolTip.setWidthToolTip(0);
    this.toolTip.setContentText(a);
    150 < +this.toolTip.textLabel.getContentSize().width &&
      (this.toolTip.setWidthToolTip(150), this.toolTip.setContentText(a));
    this.toolTip.setTextColor(cc.color(255, 255, 255));
    var e = this;
    this.toolTip.setRemoveCallback(function () {
      e.toolTip = null;
    });
    this.toolTip.setAutoHideAfter(3);
    this.toolTip.show(b, d);
  },
});
BkChessPlayer = BkPlayer.extend({
  alarmEndTimeSprite: null,
  bgAvarBound: null,
  bgName: null,
  bgElo: null,
  lbElo: null,
  iconCTCU: null,
  bgTime: null,
  iconTime: null,
  remainTimeText: null,
  rankSprite: null,
  marginLeft: 0,
  dYBGName: 0.65,
  ctor: function (a, b) {
    this._super(a, b, "#" + res_name.khu_vuc_avatar);
    this.setScale(GAME_SCALE);
  },
  removeFromParent: function (a) {
    this._super(a);
  },
  _initPlayerSprite: function () {
    this.getContentSize();
    this.getContentSize();
    this.bgSprite = new BkSprite("#" + res_name.avt_frame_bg);
    this.addChild(this.bgSprite);
    this.bgAvarBound = new BkSprite("#" + res_name.avt_frame);
    this.addChild(this.bgAvarBound);
    this.rankSprite = Util.getRankSprite(-1);
    isWebPlatform() && this.rankSprite.setScale(0.8);
    this.rankSprite.x = this.rankSprite.getContentSize().width / 2;
    this.rankSprite.y = this.rankSprite.getContentSize().height / 2;
    this.addChild(this.rankSprite, 1e3);
    this.bgSprite.x = this.rankSprite.getContentSize().width / 2;
    this.bgSprite.y =
      this.getContentSize().height - this.bgSprite.getContentSize().height / 2;
    this.bgAvarBound.x = this.bgSprite.x;
    this.bgAvarBound.y = this.bgSprite.y;
    this.avatarSprite = new BkSprite("#" + res_name.avt_frame_bg);
    this.addChild(this.avatarSprite);
    this.avatarSprite.x = this.bgSprite.x;
    this.avatarSprite.y = this.bgSprite.y;
    this.dYBGName = 0.65;
    this.bgName = new BkSprite("#" + res_name.name_frame);
    this.bgName.x =
      this.getContentSize().width - this.bgName.getContentSize().width / 2;
    this.bgName.y =
      this.getContentSize().height * this.dYBGName + this.getDeltaYAvatarName();
    isWebPlatform() &&
      (this.bgName.setScale(c.AVATAR_WEB_SCALE),
      (this.bgName.x = this.rankSprite.x),
      (this.bgName.y =
        this.rankSprite.y -
        0.5 * this.rankSprite.getBoundingBox().height -
        this.bgName.getBoundingBox().height));
    this.addChild(this.bgName);
    this.marginLeft = 0.01 * this.getContentSize().width;
    var a = cc.color(251, 234, 180),
      b = c.TEXT_FONT_SIZE_AVAR,
      d = 0;
    isWebPlatform() && ((b = c.FONT_SIZE_WEB_AVATAR), (d = 0));
    this.lbName = new BkLabel("You", "", b);
    isWebPlatform()
      ? (this.lbName.x = this.bgName.x)
      : (this.lbName.x =
          this.bgName.x -
          0.5 * this.bgName.getBoundingBox().width +
          this.lbName.getContentSize().width / 2 +
          this.marginLeft);
    this.lbName.y = this.bgName.y + d;
    this.lbName.setTextColor(a);
    this.addChild(this.lbName, 100);
    this.bgElo = new BkSprite("#" + res_name.small_info_frame);
    isWebPlatform() || this.bgElo.setScaleX(1.1);
    this.bgElo.x =
      this.bgName.x -
      this.bgName.getBoundingBox().width / 2 +
      this.bgElo.getContentSize().width / 2;
    this.bgElo.y =
      this.getContentSize().height * (1 - this.dYBGName) +
      this.getDeltaYAvatarName();
    isWebPlatform() &&
      (this.bgElo.setScale(c.AVATAR_WEB_SCALE),
      (this.bgElo.x = this.bgName.x),
      (this.bgElo.y =
        this.bgName.y -
        this.bgName.getContentSize().height / 2 -
        this.bgName.getBoundingBox().height / 2));
    this.addChild(this.bgElo);
    d = res_name.elo_CU;
    d = this.getNameEloIcon();
    this.iconCTCU = new BkSprite("#" + d);
    isWebPlatform() && this.iconCTCU.setScale(c.AVATAR_WEB_SCALE);
    this.iconCTCU.x =
      this.bgElo.x -
      0.5 * this.bgElo.getBoundingBox().width +
      this.iconCTCU.getBoundingBox().width / 2;
    this.iconCTCU.y = this.bgElo.y;
    this.addChild(this.iconCTCU);
    this.lbElo = new BkLabel("1000", "", b);
    this.lbElo.setTextColor(a);
    this.addChild(this.lbElo);
    this.lbElo.setVisible(!1);
    this.lvSprite = new BkSprite();
    this.lvSprite.x = this.avatarSprite.x;
    this.lvSprite.y =
      this.bgSprite.y - this.bgSprite.getHeight() / 2 + 10 * GAME_SCALE;
    this._configViewPlayer();
  },
  getDeltaYAvatarName: function () {
    return new BkChessAvatar().getDeltaYAvatarName();
  },
  getNameEloIcon: function () {
    var a = res_name.elo_CU;
    BkGlobal.currentGameID == GID.CO_TUONG &&
      ((a = res_name.elo_icon),
      this.isAvatarBottom() && (a = res_name.elo_icon1));
    return a;
  },
  showNameArea: function (a) {
    null != this.bgName &&
      (this.bgName.setVisible(a), this.lbName.setVisible(a));
  },
  showEloArea: function (a) {
    this.bgElo.setVisible(a);
    this.iconCTCU.setVisible(a);
    this.lbElo.setVisible(a);
  },
  showTimeArea: function (a) {
    logMessage("showTimeArea: " + a);
    null != this.bgTime &&
      (this.bgTime.setVisible(a),
      this.iconTime.setVisible(a),
      a || this.unschedule(this.onTickRemainTime),
      isFBInstantGame() && this.isAvatarBottom()
        ? (this.remainTimeText.y = a
            ? Math.abs(this.remainTimeText.y)
            : -1 * Math.abs(this.remainTimeText.y))
        : this.remainTimeText.setVisible(a));
  },
  showAvarBG: function (a) {
    this.bgSprite.setVisible(a);
    this.bgAvarBound.setVisible(a);
  },
  showRankSprite: function (a) {
    this.rankSprite.setVisible(a);
  },
  showAllAvar: function (a) {
    this.showNameArea(a);
    this.showEloArea(a);
    this.showAvarBG(a);
    this.showRankSprite(a);
  },
  initCountDown: function () {
    logMessage("initCountDown BkChessPlayer");
    var a = this;
    this.cdSprite = new BkCountDownTime("#" + res_name.cdtime);
    var b = this.bgSprite.getContentSize().height;
    isWebPlatform() && (b = 0.7 * this.getContentSize().height);
    this.cdSprite.setScale(b / this.cdSprite.getContentSize().height);
    this.cdSprite.x = this.bgSprite.x;
    this.cdSprite.y = this.bgSprite.y;
    this.cdSprite.setCallback(function () {
      a.stopCountDown();
    });
    this.addChild(this.cdSprite);
    this.configAlarm();
  },
  configAlarm: function () {
    var a = getCurrentScene();
    if (
      null != a &&
      a instanceof BkIngame &&
      a.gameLayer &&
      (a = a.gameLayer.getLogic().getMyClientState()) &&
      !a.isObserver &&
      a.UserInfo.userName == this.playerData.userName
    ) {
      var b = this;
      this.cdSprite.setAlarmCallBack(function () {
        if (isWebPlatform()) {
          var a = b.getParent();
          if (a && a.tableRedStatus) {
            var e = new cc.FadeTo(0.75, 255),
              f = new cc.FadeTo(0.75, 0);
            a.tableRedStatus.setVisible(!0);
            a.tableRedStatus.runAction(cc.sequence(e, f)).repeatForever();
          }
        } else b.showTimeArea(!1), b.showNameArea(!1), b.initCountDownTextForAlarm(), NativeInterface.vibratePhone();
      });
    }
  },
  getGameLogic: function () {
    var a = getCurrentScene();
    return null != a && a instanceof BkIngame && a.gameLayer
      ? a.gameLayer.getLogic()
      : null;
  },
  stopCountDown: function () {
    this._super();
    var a = !0,
      b = this.getGameLogic();
    null != b && (a = b.isInGameProgress());
    this.showTimeArea(a);
    this.showNameArea(!0);
    this.removeCountDownTextAlarm();
  },
  cdtAlarm: null,
  countAlarm: 0,
  removeCountDownTextAlarm: function () {
    null != this.cdtAlarm &&
      (this.cdtAlarm.removeFromParent(),
      (this.cdtAlarm = null),
      this.unschedule(this.onTickCountDownAlarm));
  },
  onTickCountDownAlarm: function () {
    this.countAlarm--;
    0 >= this.countAlarm
      ? this.removeCountDownTextAlarm()
      : this.cdtAlarm.setString(this.countAlarm);
  },
  initCountDownTextForAlarm: function () {
    this.removeCountDownTextAlarm();
    this.countAlarm = ALARM_TIMER - 1;
    this.cdtAlarm = new cc.LabelBMFont(
      this.countAlarm,
      res.BITMAP_GAME_FONT_CO_ALARM
    );
    var a =
        this.bgSprite.x -
        0.8 * this.bgSprite.getContentSize().width -
        this.cdtAlarm.getContentSize().width / 2,
      b = 0.2 * this.getContentSize().height;
    isWebPlatform() &&
      (this.cdtAlarm.setScale(0.4),
      (a = this.bgSprite.x),
      (b =
        this.bgSprite.y -
        0.8 * this.bgSprite.getContentSize().height -
        this.cdtAlarm.getBoundingBox().height / 2));
    this.cdtAlarm.x = a;
    this.cdtAlarm.y = b;
    this.addChild(this.cdtAlarm);
    this.schedule(this.onTickCountDownAlarm, 1);
  },
  _configViewPlayer: function (a) {
    this._super(a);
    this.getContentSize();
    this.getContentSize();
    if (null != this.playerData) {
      this.showAllAvar(!0);
      var b = 0;
      isWebPlatform() && (b = 0);
      var d = Util.trimName(this.playerData.userName, 10);
      this.lbName.setString(d);
      isWebPlatform() ||
        (this.lbName.x =
          this.bgName.x -
          0.5 * this.bgName.getBoundingBox().width +
          this.lbName.getContentSize().width / 2 +
          this.marginLeft);
      this.lbName.y = this.bgName.y + b;
      null != this.avatarSprite && this.avatarSprite.removeFromParent();
      this.avatarSprite = new BkSprite();
      var d = this.playerData.getAvatarId(),
        d = new BkSpriteLoader(d, "#" + res_name.default_Avatar),
        e = 0.85 * this.bgSprite.getContentSize().height;
      d.setScale(e / d.getContentSize().height);
      d = BkAvartarImg.createClipNodeCircle(d, e);
      this.avatarSprite.addChild(d);
      this.addChild(this.avatarSprite);
      this.avatarSprite.x = this.bgSprite.x;
      this.avatarSprite.y = this.bgSprite.y;
      d = this.playerData.getLevel();
      this.lbElo.setString(d);
      this.lbElo.x =
        this.iconCTCU.x +
        this.iconCTCU.getBoundingBox().width / 2 +
        this.lbElo.getContentSize().width / 2 +
        2;
      this.lbElo.y = this.bgElo.y + b;
      this.lbElo.setVisible(!0);
      Util.updateRankSprite(this.rankSprite, this.playerData.getLevel());
      this.updatePos();
      void 0 !== a && !0 === a
        ? logMessage("isNewLevel -\x3e dont cleaer all mask")
        : this.status == PLAYER_STATE_READY
        ? this.showImgReady()
        : this.clearImgReady();
    } else
      this.showAllAvar(!1),
        null != this.avatarSprite && this.avatarSprite.removeFromParent(),
        (this.avatarSprite = new BkSprite("#" + res_name.wait_player)),
        (this.avatarSprite.x = this.bgSprite.x),
        (this.avatarSprite.y = this.bgSprite.y),
        this.addChild(this.avatarSprite);
  },
  showImgReady: function () {
    null == this.ImgSanSang &&
      ((this.ImgSanSang = new BkSprite("#" + res_name.sansang)),
      (this.ImgSanSang.x = 0),
      (this.ImgSanSang.y = 0),
      this.addChild(this.ImgSanSang, this.rankSprite.getLocalZOrder() + 1));
    this.clearAllMask();
    this.updatePosImgSanSang();
  },
  updatePosImgSanSang: function () {
    null != this.ImgSanSang &&
      ((this.ImgSanSang.x = this.bgSprite.x),
      (this.ImgSanSang.y = this.bgSprite.y));
  },
  showMaskNotReady: function () {
    this._super();
    this.opacity = AVAR_OPACITY;
    this.clearImgReady();
  },
  clearWinSplash: function () {
    this._super();
    this.unschedule(this.clearWinSplash);
  },
  showWinSplash: function () {
    null == this.imgWin &&
      ((this.imgWin = new BkSprite("#" + res_name.Thang)),
      this.imgWin.setScaleWithHeight(1.2 * this.getContentSize().height),
      (this.imgWin.x = this.bgSprite.x),
      (this.imgWin.y = this.bgSprite.y),
      this.addChild(this.imgWin, this.rankSprite.getLocalZOrder() + 1));
    this.scheduleOnce(this.clearWinSplash, 5);
  },
  showLoseSplash: function () {
    null == this.imgLose &&
      ((this.imgLose = new BkSprite("#" + res_name.Thua)),
      this.imgLose.setScaleWithHeight(1.2 * this.getContentSize().height),
      (this.imgLose.x = this.bgSprite.x),
      (this.imgLose.y = this.bgSprite.y),
      this.addChild(this.imgLose, this.rankSprite.getLocalZOrder() + 1));
    this.scheduleOnce(this.clearLoseSplash, 5);
  },
  clearLoseSplash: function () {
    this._super();
    this.unschedule(this.clearLoseSplash);
  },
  clearImgMaskNotReady: function () {
    this._super();
    this.opacity = 255;
    this.showImgReady();
  },
  initEventListener: function () {
    isWebPlatform() && this.bgSprite.setMouseOnHover(function (a) {});
    var a = this;
    this.bgSprite.setOnlickListenner(function (b, d) {
      var e = BkTime.GetCurrentTime() - a.bgSprite.lastTimeClick;
      logMessage("deltaTime " + e);
      1e3 > e ||
        ((a.bgSprite.lastTimeClick = BkTime.GetCurrentTime()),
        null != a.playerData &&
          null != a.gameTable &&
          a.gameTable.processShowPlayerProfile(a.getPlayerName()));
    });
  },
  stopTotalCountDown: !1,
  chessColor: 0,
  remainTime: 0,
  isUsedHourglassGif: !1,
  initBGRemainTime: function () {
    if (null == this.bgTime) {
      this.bgTime = new BkSprite("#" + res_name.small_info_frame);
      this.addChild(this.bgTime);
      var a = "#" + res_name.hourglass;
      isWebPlatform() &&
        ((a = "#" + res_name.tuong_den),
        0 == this.chessColor && (a = "#" + res_name.tuong_do));
      this.iconTime = new BkSprite(a);
      a = this.iconTime.getContentSize();
      this.isUsedHourglassGif &&
        ((this.iconTime = new BkHourGlass()),
        (a = this.iconTime.getFrameSizehourglass()));
      isWebPlatform()
        ? (this.bgTime.setScale(0.6),
          (this.bgTime.x = this.bgName.x),
          (this.bgTime.y =
            this.bgName.y -
            this.bgName.getContentSize().height / 2 -
            this.bgTime.getBoundingBox().height / 2),
          this.iconTime.setScale(1),
          (this.iconTime.x =
            this.bgTime.x -
            0.5 * this.bgTime.getBoundingBox().width -
            a.width / 2))
        : ((this.bgTime.x =
            this.getContentSize().width -
            this.bgTime.getContentSize().width / 2),
          (this.bgTime.y =
            this.getContentSize().height * (1 - this.dYBGName) +
            this.getDeltaYAvatarName()),
          this.bgTime.setScaleX(1.1),
          (this.iconTime.x =
            this.bgTime.x -
            0.5 * this.bgTime.getBoundingBox().width +
            a.width / 2 +
            0.2 * a.width));
      this.iconTime.y = this.bgTime.y;
      this.addChild(this.iconTime);
    }
  },
  initRemainTimeText: function (a) {
    var b = c.TEXT_FONT_SIZE_AVAR;
    isWebPlatform() && (b = c.FONT_SIZE_WEB_AVATAR);
    var d = 0;
    this.chessColor = a;
    this.initBGRemainTime();
    this.removeRemainTimeText();
    isWebPlatform()
      ? ((this.remainTimeText = new BkLabel("00:00", "", b)),
        this.remainTimeText.setTextColor(cc.color(250, 192, 34)),
        (a = 0),
        (d = 2))
      : isFBInstantGame()
      ? ((this.remainTimeText = new BkLabel("00:00", "", b)),
        this.remainTimeText.setTextColor(cc.color(250, 192, 34)),
        (a = 0.02 * -this.getContentSize().height))
      : ((this.remainTimeText = new cc.LabelBMFont(
          "00:00",
          res.BITMAP_GAME_FONT_CD_INGAME
        )),
        (a = 0.03 * -this.getContentSize().height));
    this.remainTimeText.x =
      this.iconTime.x +
      this.iconTime.getContentSize().width / 2 +
      this.remainTimeText.getContentSize().width / 2 +
      d;
    this.remainTimeText.y = this.bgTime.y + a;
    this.setVisibleRemainTimeText(!1);
    this.addChild(this.remainTimeText);
    this.setRemainTime(this.remainTime);
    this.updateRemaintimePos();
  },
  removeRemainTimeText: function () {
    null != this.remainTimeText &&
      (this.remainTimeText.removeFromParent(), (this.remainTimeText = null));
  },
  setVisibleRemainTimeText: function (a) {
    null != this.remainTimeText && this.showCDTimeTotal(a);
  },
  setRemainTime: function (a) {
    this.remainTime = a;
    null != this.remainTimeText &&
      this.remainTimeText.getParent() &&
      (this.setVisibleRemainTimeText(!0),
      this.remainTimeText.setString(convertSecondToMinSec(this.remainTime)));
  },
  showTotalCountDownTime: function () {
    this.remainTime &&
      ((this.stopTotalCountDown = !1),
      this.remainTimeText.setString(convertSecondToMinSec(this.remainTime)),
      this.schedule(this.onTickRemainTime, 1),
      this.isUsedHourglassGif && this.iconTime.showActionHourglass());
  },
  onTickRemainTime: function () {
    0 < this.remainTime && !this.stopTotalCountDown
      ? (this.remainTime--,
        this.remainTimeText &&
          this.remainTimeText.setString(convertSecondToMinSec(this.remainTime)))
      : this.unschedule(this.onTickRemainTime);
  },
  stopTotalCountDownTime: function () {
    this.stopTotalCountDown = !0;
    this.unschedule(this.onTickRemainTime);
    this.isUsedHourglassGif && this.iconTime.stopActionHourglass();
  },
  setClientState: function (a) {
    this._super(a);
    a.setAvatar(this);
    logMessage(
      "this.clientState.tablePosition: " + this.clientState.tablePosition
    );
    this._configViewPlayer();
  },
  isBottomAvar: !1,
  isAvatarBottom: function () {
    return this.isBottomAvar;
  },
  updatePos: function () {
    this.updatePositionAvatar();
    this.updateRemaintimePos();
    this.updatePosImgSanSang();
  },
  updateRemaintimePos: function () {
    this.isAvatarBottom()
      ? this.updateRemaintimePosBottom()
      : this.updateRemaintimePositionTop();
  },
  updatePositionAvatar: function () {
    this.isAvatarBottom()
      ? this.updatePositionAvatarBottom()
      : this.updatePositionAvatarTop();
  },
  updatePositionAvatarTop: function () {
    this.rankSprite.x = this.rankSprite.getContentSize().width / 2;
    this.bgSprite.x = this.rankSprite.x;
    this.bgAvarBound.x = this.bgSprite.x;
    isWebPlatform() ||
      ((this.bgName.x =
        this.getContentSize().width - this.bgName.getBoundingBox().width / 2),
      (this.lbName.x =
        this.bgName.x -
        0.5 * this.bgName.getBoundingBox().width +
        this.lbName.getContentSize().width / 2 +
        this.marginLeft),
      (this.bgElo.x =
        this.bgName.x -
        this.bgName.getBoundingBox().width / 2 +
        this.bgElo.getBoundingBox().width / 2),
      (this.iconCTCU.x =
        this.bgElo.x -
        0.5 * this.bgElo.getBoundingBox().width +
        this.iconCTCU.getBoundingBox().width / 2 +
        0.015 * this.getContentSize().width),
      (this.lbElo.x =
        this.iconCTCU.x +
        this.iconCTCU.getBoundingBox().width / 2 +
        this.lbElo.getContentSize().width / 2),
      (this.avatarSprite.x = this.bgSprite.x));
    this.updateIconELo();
  },
  updatePositionAvatarBottom: function () {
    logMessage("la avatar ben duoi-\x3e update position");
    this.rankSprite.x =
      this.getContentSize().width - this.rankSprite.getContentSize().width / 2;
    this.bgSprite.x = this.rankSprite.x;
    this.bgAvarBound.x = this.bgSprite.x;
    isWebPlatform() ||
      ((this.bgName.x = this.bgName.getBoundingBox().width / 2),
      (this.lbName.x =
        this.bgName.x -
        (0.5 * -this.bgName.getBoundingBox().width +
          this.lbName.getContentSize().width / 2 +
          this.marginLeft)),
      (this.bgElo.x =
        this.bgName.x +
        this.bgName.getBoundingBox().width / 2 -
        this.bgElo.getBoundingBox().width / 2),
      (this.iconCTCU.x =
        this.bgElo.x -
        (0.5 * -this.bgElo.getBoundingBox().width +
          this.iconCTCU.getBoundingBox().width / 2 +
          0.015 * this.getContentSize().width)),
      (this.lbElo.x =
        this.iconCTCU.x -
        (+this.iconCTCU.getBoundingBox().width / 2 +
          this.lbElo.getContentSize().width / 2)),
      (this.avatarSprite.x = this.bgSprite.x));
    this.updateIconELo();
  },
  updateIconELo: function () {
    var a = this.getNameEloIcon(),
      a = cc.spriteFrameCache.getSpriteFrame(a);
    this.iconCTCU.setSpriteFrame(a);
  },
  updateRemaintimePositionTop: function () {
    if (null != this.bgTime) {
      var a =
          this.bgName.x -
          this.bgName.getBoundingBox().width / 2 +
          this.bgElo.getBoundingBox().width / 2,
        b = this.iconTime.getContentSize(),
        d = -4;
      this.isUsedHourglassGif &&
        ((b = this.iconTime.getFrameSizehourglass()),
        (d = -0.05 * this.getContentSize().width));
      isWebPlatform()
        ? ((this.bgTime.x = this.bgName.x),
          (this.iconTime.x =
            this.bgTime.x - 0.5 * this.bgTime.getBoundingBox().width),
          (this.remainTimeText.x =
            this.iconTime.x +
            0.5 * b.width +
            this.remainTimeText.getContentSize().width / 2 +
            5))
        : ((this.bgTime.x = a),
          (this.iconTime.x =
            this.bgTime.x -
            0.5 * this.bgTime.getBoundingBox().width +
            b.width / 2 +
            d +
            0.2 * b.width),
          (this.remainTimeText.x =
            this.iconTime.x +
            0.5 * b.width +
            this.remainTimeText.getContentSize().width / 2));
    }
  },
  updateRemaintimePosBottom: function () {
    if (null != this.bgTime) {
      var a =
        this.bgName.x +
        this.bgName.getBoundingBox().width / 2 -
        this.bgElo.getBoundingBox().width / 2;
      this.bgTime.getBoundingBox();
      var b = this.iconTime.getContentSize(),
        d = -4;
      this.isUsedHourglassGif &&
        ((b = this.iconTime.getFrameSizehourglass()),
        (d = -0.05 * this.getContentSize().width));
      this.bgTime.x = a;
      this.iconTime.x =
        this.bgTime.x -
        (0.5 * -this.bgTime.getBoundingBox().width +
          b.width / 2 +
          d +
          0.2 * b.width);
      this.remainTimeText.x =
        this.iconTime.x -
        (0.5 * +b.width + this.remainTimeText.getContentSize().width / 2);
    }
  },
  setPosition: function (a, b) {
    var d, e;
    void 0 === b ? ((d = a.x), (e = a.y)) : ((d = a), (e = b));
    this._super(d, e);
    e < cc.winSize.height / 2
      ? 0 < e && (this.isBottomAvar = !0)
      : (this.isBottomAvar = !1);
    this.updatePos();
    this.cdSprite &&
      ((this.cdSprite.x = this.bgSprite.x),
      (this.cdSprite.y = this.bgSprite.y));
  },
  showCDTimeTotal: function (a) {
    this.showTimeArea(a);
    this.showEloArea(!a);
  },
  getWebAvatarWidth: function () {
    return null == this.bgName
      ? this.getBoundingBox().width
      : this.bgName.getBoundingBox().width;
  },
  chatToast: null,
  showChatWithContent: function (a, b, d) {
    null != this.chatToast && this.chatToast.removeSelf();
    this.chatToast = new BkToast(res_name.ChessToast);
    this.chatToast.setContentChatText(a);
    var e = this;
    this.chatToast.setRemoveCallback(function () {
      e.chatToast = null;
    });
    this.chatToast.setAutoHideAfter(3);
    b = this.x;
    a = -this.bgSprite.getContentSize().height * GAME_SCALE;
    this.isAvatarBottom() &&
      (a = this.bgSprite.getContentSize().height * GAME_SCALE);
    d = this.y + a;
    this.chatToast.show(b, d);
  },
});
TYPE_VALUE = [0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 6, 6, 6];
COL_VALUE = [4, 3, 5, 2, 6, 0, 8, 1, 7, 1, 7, 0, 2, 4, 6, 8];
ROW_VALUE = [0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 3, 3, 3, 3, 3];
LO_MAT_VUA = 0;
LOI_HET_CO = 1;
CHIEU = 2;
CHIEU_HET = 3;
LAP_3_LAN = 4;
HET_GIO = 5;
DAU_HANG = 6;
TAG_AN_QUAN = 0;
BkChessType = { VUA: 0, SI: 1, TUONG: 2, XE: 3, PHAO: 4, MA: 5, TOT: 6 };
var MARGINLRTB = 0,
  CHESS_WIDTH = 90,
  CHESS_HEIGHT = 103,
  WEB_CHESS_WIDTH = 60,
  WEB_CHESS_HEIGHT = 60,
  TYPE_BITMAP = [4, 3, 2, 0, 6, 1, 5],
  FACE_UP = 1,
  FACE_DOWN = 0,
  MAX_TAKEN_PIECE_SHOW = 8;
function getChessInfoDescription(a) {
  switch (a) {
    case LO_MAT_VUA:
      return "L\u1ed7i l\u1ed9 m\u1eb7t t\u01b0\u1edbng";
    case LOI_HET_CO:
      return "L\u1ed7i m\u1ea5t t\u01b0\u1edbng";
    case CHIEU:
      return "Chi\u1ebfu t\u01b0\u1edbng";
    case LAP_3_LAN:
      return "L\u1ed7i \u0111i l\u1eb7p 3 l\u1ea7n";
    case HET_GIO:
      return " h\u1ebft th\u1eddi gian";
    case DAU_HANG:
      return " \u0111\u1ea7u h\u00e0ng";
    case CHIEU_HET:
      return "Chi\u1ebfu h\u1ebft";
    default:
      return "L\u1ed7i kh\u00f4ng x\u00e1c \u0111\u1ecbnh";
  }
}
BkChessPiece = cc.Class.extend({
  rowIndex: null,
  colIndex: null,
  chessColor: 0,
  chessType: 0,
  isDead: null,
  ctor: function (a) {
    this.chessType = TYPE_VALUE[a % 16];
    this.color = a / 16;
    16 > a
      ? ((this.colIndex = COL_VALUE[a % 16]),
        (this.rowIndex = ROW_VALUE[a % 16]))
      : ((this.colIndex = 8 - COL_VALUE[a % 16]),
        (this.rowIndex = 9 - ROW_VALUE[a % 16]));
    this.isDead = !1;
  },
  getRowIndex: function (a) {
    return Math.floor(a / 9);
  },
  getColIndex: function (a) {
    return a % 9;
  },
  outOfBoard: function (a) {
    return 0 > a || 89 < a;
  },
  isInsideCastle: function (a, b, d) {
    for (
      var e = [0, 0, 0, 1, 1, 1, 2, 2, 2, 9, 9, 9, 8, 8, 8, 7, 7, 7],
        f = [3, 4, 5, 3, 4, 5, 3, 4, 5, 3, 4, 5, 3, 4, 5, 3, 4, 5],
        g = 0;
      9 > g;
      g++
    )
      if (a == f[g + 9 * d] && b == e[g + 9 * d]) return !0;
    return !1;
  },
  isInsideRiver: function (a, b) {
    return 0 == b ? 4 >= a : 5 <= a;
  },
  isAcceptablePosition: function (a, b) {
    return this.chessType == BkChessType.VUA || this.chessType == BkChessType.SI
      ? this.isInsideCastle(a, b, this.chessColor)
      : this.chessType == BkChessType.TUONG
      ? this.isInsideRiver(b, this.chessColor)
      : !0;
  },
  isVuaValidMove: function (a, b, d, e) {
    return a == d ? 1 == Math.abs(b - e) : b == e ? 1 == Math.abs(a - d) : !1;
  },
  isSiValidMove: function (a, b, d, e) {
    return 1 == Math.abs((a - d) * (b - e));
  },
  isTuongValidMove: function (a, b, d, e, f) {
    return 2 == Math.abs(b - e) &&
      2 == Math.abs(a - d) &&
      0 > f[(a + d) / 2][(b + e) / 2]
      ? !0
      : !1;
  },
  isXeValidMove: function (a, b, d, e, f) {
    var g = 0,
      h = 0,
      g = 0;
    if (a == d) {
      g = Math.min(b, e) + 1;
      for (h = Math.max(b, e) - 1; g <= h; g++) if (0 <= f[a][g]) return !1;
      return !0;
    }
    if (b == e) {
      g = Math.min(a, d) + 1;
      for (h = Math.max(a, d) - 1; g <= h; g++) if (0 <= f[g][b]) return !1;
      return !0;
    }
    return !1;
  },
  isPhaoValidMove: function (a, b, d, e, f) {
    if (0 > f[d][e]) return this.isXeValidMove(a, b, d, e, f);
    var g = 0,
      h = (g = 0),
      k = 0;
    if (a == d) {
      g = Math.min(b, e) + 1;
      for (h = Math.max(b, e) - 1; g <= h; g++) 0 <= f[a][g] && k++;
      return 1 == k;
    }
    if (b == e) {
      g = Math.min(a, d) + 1;
      h = Math.max(a, d) - 1;
      for (k = 0; g <= h; g++) 0 <= f[g][b] && k++;
      return 1 == k;
    }
    return !1;
  },
  isMaValidMove: function (a, b, d, e, f) {
    for (
      var g = [-1, 1, 2, 2, 1, -1, -2, -2],
        h = [2, 2, 1, -1, -2, -2, -1, 1],
        k = [0, 0, 1, 1, 0, 0, -1, -1],
        m = [1, 1, 0, 0, -1, -1, 0, 0],
        n = 0;
      n < g.length;
      n++
    )
      if (d - a == g[n] && e - b == h[n]) {
        if (0 > f[a + k[n]][b + m[n]]) return !0;
        break;
      }
    return !1;
  },
  isTotValidMove: function (a, b, d, e, f) {
    if (0 == f) {
      if ((a == d && b + 1 == e) || (5 <= b && b == e && 1 == Math.abs(a - d)))
        return !0;
    } else if (
      (a == d && b - 1 == e) ||
      (4 >= b && b == e && 1 == Math.abs(a - d))
    )
      return !0;
    return !1;
  },
  canMoveTo: function (a, b) {
    if (this.outOfBoard(a)) return !1;
    var d = this.getColIndex(a),
      e = this.getRowIndex(a);
    if (
      (d == this.colIndex && e == this.rowIndex) ||
      !this.isAcceptablePosition(d, e)
    )
      return !1;
    var f = !1;
    0 <= b[d][e] && (f = Math.floor(b[d][e] / 16) == this.chessColor);
    if (f) return !1;
    switch (this.chessType) {
      case BkChessType.VUA:
        return this.isVuaValidMove(this.colIndex, this.rowIndex, d, e);
      case BkChessType.SI:
        return this.isSiValidMove(this.colIndex, this.rowIndex, d, e);
      case BkChessType.TUONG:
        return this.isTuongValidMove(this.colIndex, this.rowIndex, d, e, b);
      case BkChessType.XE:
        return this.isXeValidMove(this.colIndex, this.rowIndex, d, e, b);
      case BkChessType.PHAO:
        return this.isPhaoValidMove(this.colIndex, this.rowIndex, d, e, b);
      case BkChessType.MA:
        return this.isMaValidMove(this.colIndex, this.rowIndex, d, e, b);
      case BkChessType.TOT:
        return this.isTotValidMove(
          this.colIndex,
          this.rowIndex,
          d,
          e,
          this.chessColor
        );
    }
    return !1;
  },
});
BkCoUpPiece = BkChessPiece.extend({
  isFaceUp: null,
  realType: null,
  ctor: function (a) {
    this._super(a);
    this.isFaceUp = this.chessType == BkChessType.VUA;
  },
  isAcceptablePosition: function (a, b) {
    return this.isFaceUp && this.chessType != BkChessType.VUA
      ? !0
      : this._super(a, b);
  },
});
BkChessPieceSprite = BkSprite.extend({
  index: null,
  chessType: null,
  chessColor: null,
  rowIndex: null,
  colIndex: null,
  isDead: null,
  deadFaceType: FACE_UP,
  faceState: FACE_UP,
  isReverseColor: !1,
  currentTiledRow: null,
  currentTiledCol: null,
  canBeTakenSprite: null,
  isSelected: !1,
  isAnimation: !1,
  isMoveAnimationScheduled: !1,
  deadFaceDownMask: null,
  bgChessNumText: null,
  ctor: function (a) {
    this._super(res.all_chess);
    this.index = a;
    this.initByListIndex(a);
    this.initEventHover();
    0 == a || 16 == a
      ? ((this.canBeTakenSprite = new BkSprite("#" + res_name.CanTakenPiece)),
        (this.canBeTakenSprite.x = this.width / 2 - 1),
        (this.canBeTakenSprite.y = this.height / 2 + 3))
      : ((this.canBeTakenSprite = new BkSprite("#" + res_name.CanTakenPiece)),
        (this.canBeTakenSprite.x = this.width / 2),
        (this.canBeTakenSprite.y = this.height / 2));
    this.canBeTakenSprite.setVisible(!1);
    this.addChild(this.canBeTakenSprite, 33);
    var b,
      d = 30;
    isWebPlatform()
      ? ((a = WEB_CHESS_WIDTH), (b = WEB_CHESS_HEIGHT), (d = 26))
      : ((a = CHESS_WIDTH), (b = CHESS_HEIGHT));
    this.bgChessNumText = new BkSprite("#" + res_name.sl_quanan);
    this.bgChessNumText.x = 0.7 * a;
    this.bgChessNumText.y = 0.25 * b;
    this.bgChessNumText.setScale(
      ((28 / 65) * a) / this.bgChessNumText.getContentSize().width
    );
    this.bgChessNumText.setVisible(!1);
    this.addChild(this.bgChessNumText);
    this.chessNumText = new BkLabel("0", "", d, !0);
    this.chessNumText.x = this.bgChessNumText.x;
    this.chessNumText.y = this.bgChessNumText.y;
    this.chessNumText.setVisible(!1);
    this.addChild(this.chessNumText, 34);
    this.deadFaceDownMask = new BkSprite(res.all_chess);
    isWebPlatform()
      ? this.deadFaceDownMask.setTextureRect(
          cc.rect(
            8 * WEB_CHESS_WIDTH,
            WEB_CHESS_HEIGHT,
            WEB_CHESS_WIDTH,
            WEB_CHESS_HEIGHT - 1
          )
        )
      : this.deadFaceDownMask.setTextureRect(
          cc.rect(
            8 * CHESS_WIDTH + 9 * MARGINLRTB,
            CHESS_HEIGHT + 2 * MARGINLRTB,
            CHESS_WIDTH,
            CHESS_HEIGHT
          )
        );
    this.deadFaceDownMask.setVisible(!1);
    this.deadFaceDownMask.x = this.width / 2;
    this.deadFaceDownMask.y = this.height / 2;
    this.addChild(this.deadFaceDownMask);
  },
  initByListIndex: function (a) {
    this.chessType = TYPE_VALUE[a % 16];
    this.chessColor = Math.floor(a / 16);
    this.chessNumberCount = 1;
    16 > a
      ? ((this.colIndex = COL_VALUE[a % 16]),
        (this.rowIndex = ROW_VALUE[a % 16]))
      : ((this.colIndex = 8 - COL_VALUE[a % 16]),
        (this.rowIndex = 9 - ROW_VALUE[a % 16]));
    this.isDead = !1;
    this.setBitmap();
  },
  initEventHover: function () {
    this._eventHoverListener = this.createHoverEvent();
    cc.eventManager.addListener(this._eventHoverListener, this);
  },
  setEnableEventHover: function (a) {
    a
      ? this._eventHoverListener.setEnabled(!0)
      : this._eventHoverListener.setEnabled(!1);
  },
  getRectChessWithIndex: function (a) {
    var b,
      d,
      e = MARGINLRTB;
    isWebPlatform()
      ? ((b = WEB_CHESS_WIDTH), (d = WEB_CHESS_HEIGHT), (e = 0))
      : ((b = CHESS_WIDTH), (d = CHESS_HEIGHT), (e = MARGINLRTB));
    var f = this.chessColor;
    this.isReverseColor && (f = 0 == this.chessColor ? 1 : 0);
    return isWebPlatform()
      ? cc.rect(a * b + (a + 1) * e, f * d, b, d)
      : cc.rect(a * b + (a + 1) * e, f * d + (f + 1) * e, b, d);
  },
  setBitmap: function () {
    this.faceState == FACE_DOWN && this.chessType != BkChessType.VUA
      ? this.setTextureRect(this.getRectChessWithIndex(7))
      : this.setTextureRect(
          this.getRectChessWithIndex(TYPE_BITMAP[this.chessType])
        );
    null != this.deadFaceDownMask &&
      void 0 != this.deadFaceDownMask &&
      this.deadFaceDownMask.setVisible(
        this.deadFaceType == FACE_DOWN &&
          this.isDead &&
          this.faceState == FACE_UP
      );
    null != this.chessNumText &&
      void 0 != this.chessNumText &&
      (1 < this.chessNumberCount
        ? (this.bgChessNumText.setVisible(!0),
          this.chessNumText.setVisible(!0),
          this.chessNumText.setString(this.chessNumberCount))
        : (this.bgChessNumText.setVisible(!1),
          this.chessNumText.setVisible(!1)));
  },
  showCanBeTakenSprite: function (a) {
    this.canBeTakenSprite.setVisible(a);
    if (a && (0 == this.index || 16 == this.index)) {
      a = new cc.FadeTo(0.5, 100);
      var b = new cc.FadeTo(0.5, 255);
      this.canBeTakenSprite.runAction(cc.sequence(a, b)).repeatForever();
    }
  },
  getGameLayer: function () {
    return BkGlobal.ingameScene.getGameLayer();
  },
  reposition: function () {
    var a = this.getGameLayer();
    this.isDead
      ? this.setPosition(-100, -100)
      : this.setPosition(a.getPosX(this.colIndex), a.getPosY(this.rowIndex));
  },
  moveTo: function (a, b) {
    this.colIndex = a;
    this.rowIndex = b;
    var d = this.getGameLayer();
    this.move(0.2, d.getPosX(a), d.getPosY(b));
  },
  move: function (a, b, d) {
    if (this.isAnimation && !1 == this.isMoveAnimationScheduled)
      return (
        this.schedule(function h() {
          this.move(a, b, d);
          this.isMoveAnimationScheduled = !0;
          this.unschedule(h);
        }, 0.1),
        !0
      );
    var e = cc.callFunc(this.chessAnimationFinish, this),
      f = cc.moveTo(a, cc.p(b, d), 0),
      e = cc.sequence(f, e);
    if (this.y != d || this.x != b) this.runAction(e), (this.isAnimation = !0);
  },
  chessAnimationFinish: function () {
    this.isAnimation = !1;
    this.setLocalZOrder(this.index);
  },
  faceUp: function () {
    this.deadFaceType = this.faceState = FACE_UP;
    this.setBitmap();
  },
  setPieceDeadFace: function (a) {
    logMessage("set deadFaceType: " + a + " chess: " + this.chessType);
    this.deadFaceType = a;
    this.setBitmap();
  },
  setPieceFace: function (a) {
    this.faceState = a;
    this.setBitmap();
  },
  increaseCountNumber: function () {
    this.chessNumberCount++;
    this.setBitmap();
  },
});
BkAnimation = cc.Layer.extend({
  ctor: function () {
    this._super();
    this.setVisible(!0);
    this.obj = new BkSprite("#" + res_name.blinking);
    this.addChild(this.obj);
  },
  scaleTo: function (a, b, d, e, f) {
    d = cc.scaleTo(b, d, e);
    b = cc.scaleTo(b, 1, 1);
    f = cc.delayTime(f);
    f = cc.sequence(d, f, b).repeatForever();
    a.runAction(f);
  },
  moveBy: function (a, b, d, e, f) {
    var g = cc.moveBy(b, d, e);
    b = cc.moveBy(b, -d, e);
    f = cc.delayTime(f);
    f = cc.sequence(g, f, b).repeatForever();
    a.runAction(f);
  },
  blink: function (a) {
    var b = cc.blink(5, 10),
      b = cc.sequence(b).repeatForever();
    a.runAction(b);
  },
  highlightAnimation: function (a) {
    var b = cc.scaleTo(0.13, 1.2, 1.2),
      d = cc.scaleTo(0.13, 1, 1);
    cc.moveBy(0.13, 10, 0);
    cc.moveBy(0.13, -10, 0);
    cc.moveBy(0.13, -10, 0);
    cc.moveBy(0.13, 10, 0);
    var e = cc.blink(1, 2),
      f = cc.delayTime(2.5),
      b = cc.sequence(b, d, b, d, f, e, f).repeatForever();
    a.runAction(b);
  },
  gameIconEffect: function (a) {
    var b = cc.scaleTo(0.13, 0.8, 0.8),
      d = cc.scaleTo(0.13, 1, 1),
      e = cc.delayTime(5),
      b = cc.sequence(b, d, b, d, e).repeatForever();
    a.runAction(b);
  },
});
BkStarAnimation = cc.Layer.extend({
  showStarEffect: function () {
    var a = cc.delayTime(0.8);
    this.runAction(
      cc.sequence(
        cc.callFunc(this.starEffect, this, 1),
        a,
        cc.callFunc(this.starEffect, this, 2),
        a,
        cc.callFunc(this.starEffect, this, 3),
        a,
        cc.callFunc(this.starEffect, this, 4)
      )
    );
  },
  fadeout: function (a) {
    var b = new cc.fadeOut(2),
      d = new cc.fadeIn(0),
      b = cc.sequence(b, d);
    a.runAction(b);
  },
  getStarbyID: function (a) {
    if (1 == a)
      return (
        null == this.star1 &&
          ((this.star1 = new BkSprite("#" + res_name.star)),
          this.star1.setScale(0.7, 0.7),
          this.addChild(this.star1)),
        this.star1
      );
    if (2 == a)
      return (
        null == this.star2 &&
          ((this.star2 = new BkSprite("#" + res_name.star)),
          this.star2.setScale(0.8, 0.8),
          (this.star2.x += 10),
          this.addChild(this.star2)),
        this.star2
      );
    if (3 == a)
      return (
        null == this.star3 &&
          ((this.star3 = new BkSprite("#" + res_name.star)),
          this.star3.setScale(0.5, 0.5),
          (this.star3.x += 20),
          this.addChild(this.star3)),
        this.star3
      );
    if (4 == a)
      return (
        null == this.star4 &&
          ((this.star4 = new BkSprite("#" + res_name.star)),
          (this.star4.x += 30),
          this.addChild(this.star4)),
        this.star4
      );
  },
  starEffect: function (a, b) {
    var d = new cc.moveBy(2, 0, 50),
      e = cc.fadeOut(2),
      f = cc.fadeIn(0),
      e = cc.sequence(e, f),
      d = cc.spawn(d, e);
    this.getStarbyID(b)
      .runAction(
        cc.sequence(d, cc.callFunc(this.onfinish, this.getStarbyID(b)))
      )
      .repeatForever();
  },
  onfinish: function (a) {
    a.y -= 50;
  },
});
BkConfirmPopup = BkDialogWindow.extend({
  ctor: function (a, b, d) {
    this._super(a, b, d);
  },
  removeSelf: function () {
    logMessage("removeSelf BkConfirmPopup");
    BkDialogWindowManager.confirmPopup = null;
    this._super();
  },
});
BkNotifyContentWindow = BkBaseChessWindow.extend({
  func1: -1,
  func2: -1,
  strWeb1: "",
  strWeb2: "",
  contentMess: null,
  ctor: function (a, b, d, e, f, g) {
    this.func1 = d;
    this.func2 = f;
    this.strWeb1 = e;
    this.strWeb2 = g;
    var h = isWebPlatform() ? cc.size(586, 360) : cc.size(700, 460);
    g = 50;
    e = 31;
    var k = bkScaleSizeUtil(h, GAME_SCALE);
    this._super("", k);
    this.addTitleImage(res_name.title_wd_thongbao);
    this.crSize = bkScaleSizeUtil(h, GAME_SCALE);
    isWebPlatform()
      ? ((e = 18),
        (this.contentMess = new cc.LabelTTF(
          a,
          "Tahoma",
          44,
          cc.size(2 * this.crSize.width - 40, 0),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_TOP
        )),
        this.contentMess.setDimensions(cc.size(1.4 * h.width, 0)),
        this.contentMess.setScale(0.5),
        this.contentMess.setFontFillColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        (this.contentMess.y =
          this.getWindowSize().height / 2 +
          this.contentMess.getBoundingBox().height / 4))
      : ((this.contentMess = new BkLabelTTF(
          "thong bao",
          "Tahoma",
          30,
          cc.size(this.crSize.width - 2 * g, 0),
          cc.TEXT_ALIGNMENT_CENTER,
          cc.VERTICAL_TEXT_ALIGNMENT_TOP
        )),
        (h =
          (0.035 * cc.winSize.height) /
          this.contentMess.getContentSize().height),
        (g = (this.crSize.width - 2 * g) / h),
        this.contentMess.setContentSize(cc.size(g, 0)),
        this.contentMess.setDimensions(cc.size(g, 0)),
        this.contentMess.setScale(h),
        this.contentMess.setFontFillColor(ZColor.TEXT_COLOR_LABEL_POPUP),
        (this.contentMess.y =
          this.getWindowSize().height / 2 +
          this.contentMess.getContentSize().height / 2));
    this.contentMess.x = this.getWindowSize().width / 2;
    this.getBodyItem().addChild(this.contentMess);
    this.contentMess.setString(a);
    var m = this;
    a = new BkButton(
      res_name.btn_no_text,
      res_name.btn_no_text_press,
      res_name.btn_no_text,
      res_name.btn_no_text,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setTitleText(this.getTextBtn(d));
    a.setTitleFontName(Util.getBtnFontName());
    a.setTitleFontSize(e);
    a.setTitleColor(cc.color(71, 44, 27));
    isWebPlatform() ||
      (a.getTitleRenderer().y += 0.1 * a.getBoundingBox().height);
    a.setScale(GAME_SCALE);
    a.x = this.getWindowSize().width / 2;
    a.y = a.getBoundingBox().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      m.onClickBtn1();
    });
    2 == b &&
      ((b = (a.getContentSize().width / 2) * GAME_SCALE + 20),
      (a.x -= b),
      (d = new BkButton(
        res_name.btn_no_text,
        res_name.btn_no_text_press,
        res_name.btn_no_text,
        res_name.btn_no_text,
        ccui.Widget.PLIST_TEXTURE
      )),
      d.setTitleText(this.getTextBtn(f)),
      d.setTitleFontName(Util.getBtnFontName()),
      d.setTitleFontSize(e),
      d.setTitleColor(cc.color(71, 44, 27)),
      isWebPlatform() ||
        (d.getTitleRenderer().y += 0.1 * a.getBoundingBox().height),
      d.setScale(GAME_SCALE),
      (d.x = this.getWindowSize().width / 2 + b),
      (d.y = a.y),
      this.addChildBody(d),
      d.addClickEventListener(function () {
        m.onClickBtn2();
      }));
  },
  getTextBtn: function (a) {
    return 0 === a
      ? "\u0110\u00f3ng"
      : 1 === a
      ? "\u0110\u1ed3ng \u00fd"
      : 2 == a
      ? "Xem chi ti\u1ebft"
      : 3 === a
      ? "C\u1eadp nh\u1eadt"
      : 4 == a
      ? "B\u1ea1n b\u00e8"
      : 5 === a
      ? "Nh\u1eadn tim"
      : 6 === a
      ? "M\u1eddi b\u1ea1n FB"
      : "\u0110\u1ed3ng \u00fd";
  },
  onClickBtn2: function () {
    this.processClickButton(this.func2, this.strWeb2);
  },
  onClickBtn1: function () {
    this.processClickButton(this.func1, this.strWeb1);
  },
  processClickButton: function (a, b) {
    this.removeSelf();
    logMessage("processClickButton: " + a + " webURL: " + b);
    if (1 !== a)
      if (2 === a) Util.openWebview(b, "Th\u00f4ng b\u00e1o");
      else if (3 === a)
        isWebPlatform() ? cc.sys.openURL(b) : NativeInterface.openURL(b);
      else {
        var d = getCurrentScene(),
          e = null;
        d &&
          (e =
            d instanceof BkChooseGame ? d.chooseGameLayer : d.getGameLayer());
        4 === a
          ? ((d = new BkFriendsWindow()),
            d.setParentWindow(e),
            d.showWithParent())
          : 5 === a
          ? ((d = new BkAddHeartWindow()),
            d.setParentWindow(this),
            d.setParentWindow(e),
            d.showWithParent())
          : 6 === a && BkLogicManager.getLogic().doInviteFriendFacebook();
      }
  },
});
BkToast = BkSprite.extend({
  background: null,
  nameBG: "",
  textLabel: null,
  cbRemove: null,
  isChatToast: !1,
  ctor: function (a) {
    this._super();
    this.nameBG = a;
  },
  initBG: function () {
    var a = new cc.SpriteBatchNode(res_name.ChessToast);
    this.background = new cc.Scale9Sprite();
    this.background.updateWithBatchNode(
      a,
      cc.rect(0, 0, 37, 38),
      !1,
      cc.rect(12, 12, 12, 12)
    );
    this.addChild(this.background);
  },
  setContentTextWeb: function (a, b) {
    var d = bkFontSizeUtil(
      isFBInstantGame() &&
        !FBInstant.getPlatform().toLowerCase().includes("web")
        ? 40
        : 18,
      GAME_SCALE
    );
    this.textLabel = new BkLabelTTF(
      a,
      "",
      d,
      cc.size(360, 0),
      cc.TEXT_ALIGNMENT_CENTER,
      cc.VERTICAL_TEXT_ALIGNMENT_CENTER
    );
    b *= 2;
    this.textLabel.setContentSize(cc.size(b, 0));
    this.textLabel.setDimensions(cc.size(b, 0));
    this.textLabel.setString(a);
    this.addChild(this.textLabel);
    var d = this.textLabel.getContentSize().width + 20,
      e = this.textLabel.getContentSize().height + 10;
    35 > e && (e = 35);
    45 > d && (d = 45);
    this.background.width = d;
    this.background.height = e;
  },
  setContentText: function (a, b) {
    this.initBG();
    b = void 0 == b ? 180 : b;
    if (isWebPlatform() || isFBInstantGame()) this.setContentTextWeb(a, b);
    else {
      this.textLabel = new BkLabel(
        a,
        "",
        bkFontSizeUtil(isWebPlatform() ? 18 : 40, GAME_SCALE)
      );
      this.textLabel.setTextVerticalAlignment(
        cc.VERTICAL_TEXT_ALIGNMENT_CENTER
      );
      this.textLabel.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
      var d = isWebPlatform() ? 0.025 : 0.035,
        e = (cc.winSize.height * d) / this.textLabel.getContentSize().height;
      this.textLabel.setScaleM(e);
      this.textLabel.setTextColor(cc.color.WHITE);
      var f = 0.03 * cc.winSize.width,
        d = 0.004 * cc.winSize.height,
        g = 0.8 * cc.winSize.width;
      this.isChatToast && (g = 0.5 * cc.winSize.width);
      var h = this.textLabel.getBoundingBox().width;
      h + 2 * f < g && (g = h + 2 * f);
      this.textLabel.boundingWidth = g / e;
      this.addChild(this.textLabel);
      e = g;
      d = this.textLabel.getBoundingBox().height + 2 * d;
      this.background.width = e;
      this.background.height = d;
    }
  },
  show: function (a, b) {
    if (cc.director.getRunningScene()) {
      var d = cc.director.getRunningScene();
      void 0 != a && (this.x = a);
      void 0 != b && (this.y = b);
      d.addChild(this, TagOfLayer.Toast);
    }
  },
  removeSelf: function () {
    this.removeFromParent();
    null != this.cbRemove && this.cbRemove();
  },
  setRemoveCallback: function (a) {
    this.cbRemove = a;
  },
  setAutoHideAfter: function (a) {
    void 0 === a && (a = 5);
    this.scheduleOnce(this.removeSelf, a);
  },
  setContentChatText: function (a) {
    this.initBG();
    isFBInstantGame() && FBInstant.getPlatform().toLowerCase().includes("web")
      ? (this.textLabel = new BkLabel(a, "", 15))
      : (this.textLabel = new BkLabel(a, "", 35));
    this.textLabel.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.textLabel.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    var b = GAME_SCALE;
    isFBInstantGame() && (b = 1);
    this.textLabel.setScale(b);
    this.textLabel.setTextColor(cc.color.WHITE);
    var d = 0.03 * cc.winSize.width;
    a = 0.004 * cc.winSize.height;
    var e = 0.5 * cc.winSize.width,
      f = this.textLabel.getBoundingBox().width;
    f + 2 * d < e && (e = f + 2 * d);
    this.textLabel.boundingWidth = e / b;
    this.addChild(this.textLabel);
    b = e;
    d = this.textLabel.getBoundingBox().height + 2 * a;
    isFBInstantGame() &&
      (d = this.textLabel.getBoundingBox().height * Math.ceil(f / e) + 2 * a);
    this.background.width = b;
    this.background.height = d;
  },
});
BkWebview = BkBaseLayer.extend({
  background: null,
  wv: null,
  urlWeb: "",
  btnClose: null,
  ctor: function (a, b) {
    this._super();
    var d = cc.winSize;
    this.background = new BkSprite(res.webview_frame);
    this.background.scaleX = d.width / this.background.getContentSize().width;
    this.background.scaleY = d.height / this.background.getContentSize().height;
    this.background.x = d.width / 2;
    this.background.y = d.height / 2;
    this.addChild(this.background);
    this.urlWeb = a;
    this.wv = new ccui.WebView(this.urlWeb);
    this.wv.setContentSize(0.9 * cc.winSize.width, 0.86 * cc.winSize.height);
    this.wv.setPosition(0.5 * cc.winSize.width, 0.455 * cc.winSize.height);
    this.wv.setScalesPageToFit(!0);
    this.addChild(this.wv);
    if (void 0 != b) {
      logMessage("title " + b);
      var e = new BkLabel(b, "", 50);
      e.setTextColor(cc.color(251, 234, 180));
      var f = (58 * Math.PI) / 360;
      e.enableShadow(cc.color(0, 0, 0, 191), cc.size(3, 3), f);
      e.x = d.width / 2;
      e.y = 0.93 * d.height;
      this.addChild(e);
    }
    if (cc.sys.isNative) {
      var g = NativeInterface.getCrBannerShow();
      NativeInterface.destroyAds();
    }
    this.btnClose = new BkButton(
      res_name.close_butt,
      res_name.close_butt_press,
      res_name.close_butt,
      res_name.close_butt,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnClose.setScale(GAME_SCALE);
    this.btnClose.x = d.width - this.btnClose.getBoundingBox().width / 2;
    this.btnClose.y = d.height - this.btnClose.getBoundingBox().height / 2;
    isFBInstantGame() &&
      ((this.btnClose.x =
        0.92 * d.width - this.btnClose.getBoundingBox().width / 2),
      (this.btnClose.y =
        0.93 * d.height - this.btnClose.getBoundingBox().height / 2));
    this.addChild(this.btnClose);
    var h = this;
    this.btnClose.addClickEventListener(function () {
      cc.sys.isNative && NativeInterface.reshowCrBanner(g);
      h.removeFromParent();
    });
  },
});
var CHANGE_HEART_DURATION_ANIMATION = 1.5,
  CHANGE_HEART_MOVE_TOP_Y = 70;
BkTextfieldChangeHeart = BkSprite.extend({
  delay: null,
  tfMoneyChange: null,
  amountChange: 0,
  heartSp: null,
  ctor: function (a, b) {
    this._super();
    this.heartSp = a;
    this.amountChange = b;
    this.tfMoneyChange =
      0 < this.amountChange
        ? new cc.LabelBMFont("", res.BITMAP_GAME_FONT_CO_HEART_PLUS)
        : new cc.LabelBMFont("", res.BITMAP_GAME_FONT_CO_HEART_MINUS);
    this.tfMoneyChange.textAlign = cc.TEXT_ALIGNMENT_CENTER;
    this.setVisible(!1);
    this.addChild(this.tfMoneyChange);
    this.tfMoneyChange.retain();
  },
  setContentText: function (a) {
    this.tfMoneyChange.setString(a);
    this.tfMoneyChange.x = this.tfMoneyChange.getContentSize().width / 2;
  },
  doChangeMoney: function () {
    this.x = this.heartSp.x - 0.1 * this.heartSp.getBoundingBox().width;
    this.y = this.heartSp.y + this.heartSp.getBoundingBox().height / 2;
    getCurrentScene().addChild(this);
    this.delay = 0;
    0 < this.heartSp.numberHasBonus &&
      (this.delay =
        this.heartSp.numberHasBonus * (CHANGE_HEART_DURATION_ANIMATION + 0.5));
    var a = cc.callFunc(this.onCompleteFunc, this),
      b = cc.callFunc(this.onStartAnimation, this),
      d = cc.delayTime(0.5);
    isWebPlatform() &&
      (this.tfMoneyChange.setScale(0.6), (CHANGE_HEART_MOVE_TOP_Y = -35));
    var e = cc.moveTo(
      CHANGE_HEART_DURATION_ANIMATION,
      cc.p(this.tfMoneyChange.x, this.tfMoneyChange.y + CHANGE_HEART_MOVE_TOP_Y)
    );
    cc.fadeTo(CHANGE_HEART_DURATION_ANIMATION, 0);
    e = cc.spawn(e);
    a = cc.sequence(b, e, d, a);
    0 === this.delay
      ? this.tfMoneyChange.runAction(a)
      : this.tfMoneyChange.runAction(cc.sequence(cc.delayTime(this.delay), a));
    this.heartSp.numberHasBonus++;
  },
  onCompleteFunc: function () {
    this.heartSp.numberHasBonus--;
    this.setVisible(!1);
    this.removeFromParent();
    this.tfMoneyChange.release();
  },
  onStartAnimation: function () {
    this.tfMoneyChange.opacity = 255;
    this.setVisible(!0);
  },
});
BkLogoutConfirmPopup = BkDialogWindow.extend({
  ctor: function (a, b) {
    this.MARGIN_TOP = 20;
    this._super(a, b, bkScaleSizeUtil(DEFAULT_SIZE_DW, GAME_SCALE));
    this.setVisibleOutBackgroundWindow(!0);
    var d = new BkSprite(res.Tranperent_IMG);
    BkLogicManager.getLogic().isDeleteLoginState = !1;
    BkGlobal.isLoginFacebook || this.addChildBody(d);
    var e = new BkLabelTTF(
      "X\u00f3a th\u00f4ng tin \u0111\u0103ng nh\u1eadp",
      "",
      16
    );
    e.setFontFillColor(cc.color(225, 227, 26));
    e.x = e.width / 4 + 20;
    e.y = e.height / 4;
    d.addChild(e);
    this.notReceive = new BkCheckBox();
    this.notReceive.x = e.x - e.width / 4 - this.notReceive.width / 2 - 45;
    this.notReceive.y = e.y;
    d.addChild(this.notReceive);
    var f = this;
    this.notReceive.addEventListener(function () {
      logMessage("check isDeleteLoginState");
      BkLogicManager.getLogic().isDeleteLoginState = f.notReceive.isSelected();
    }, this);
    d.setContentSize(
      cc.size(this.notReceive.width + e.width / 2, this.notReceive.height)
    );
    d.x = this.getBodySize().width / 2;
    d.y = this.getBodySize().height / 2 - 10;
    d.setMouseOnHover();
    d.setOnlickListenner(function () {
      logMessage("checkBoxClickArea");
      f.notReceive.setSelected(!f.notReceive.isSelected());
      BkLogicManager.getLogic().isDeleteLoginState = f.notReceive.isSelected();
    });
    this.setTextMessage(
      "C\u1ea3m \u01a1n b\u1ea1n \u0111\u00e3 tham gia C\u1edd T\u01b0\u1edbng - C\u1edd \u00dap.\n B\u1ea1n c\u00f3 mu\u1ed1n tho\u00e1t kh\u00f4ng?"
    );
  },
  isDeleteLoginState: function () {
    return null == this.notReceive ? !1 : this.notReceive.isSelected();
  },
});
BkChooseAccountWindow = BkBaseChessWindow.extend({
  nameLinked: "",
  idAccLK: 1,
  ctor: function (a) {
    var b = cc.size(610, 680);
    isWebPlatform() || (b = cc.size(600 * GAME_SCALE, 770 * GAME_SCALE));
    this._super("", b);
    this.nameLinked = a.nameLinked;
    this.setVisibleOutBackgroundWindow(!0);
    this.idAccLK = 1;
    b = a.eloCotuongLinked;
    b < a.eloCoupLinked && (b = a.eloCoupLinked);
    b < a.eloCotuong && ((b = a.eloCotuong), (this.idAccLK = 2));
    b < a.eloCoup && ((b = a.eloCoup), (this.idAccLK = 2));
    logMessage("maxElo: " + b + " this.idAccLK: " + this.idAccLK);
    this.initItem(a);
    this.addTitleImage(res_name.title_wd_dongbo);
  },
  initItem: function (a) {
    var b = this.getWindowSize().width / 5;
    this.getWindowSize();
    var d = GAME_SCALE,
      e = 30,
      f = ZColor.TEXT_COLOR_NAME_BAN_BE,
      g = 0.75;
    isWebPlatform() && ((e = 16), (g = d = 0.6));
    var h = this,
      k = null,
      m = null,
      n = null,
      p = 0.01 * -this.getWindowSize().width,
      k = new BkSprite("#" + res_name.DBTK_smallFrame);
    k.setScaleX(GAME_SCALE);
    k.setScaleY(1 * GAME_SCALE);
    k.x = 0.25 * this.getWindowSize().width + p;
    k.y = 0.17 * this.getWindowSize().height + k.getBoundingBox().height / 2;
    this.addChildBody(k);
    k.setOnlickListenner(function () {
      n.x = k.x;
      n.y = k.y;
      h.idAccLK = 1;
    });
    m = new BkSprite("#" + res_name.DBTK_smallFrame);
    m.setScaleX(GAME_SCALE);
    m.setScaleY(1 * GAME_SCALE);
    m.x = 0.75 * this.getWindowSize().width - p;
    m.y = k.y;
    this.addChildBody(m);
    m.setOnlickListenner(function () {
      n.x = m.x;
      n.y = m.y;
      h.idAccLK = 2;
    });
    var p = cc.spriteFrameCache.getSpriteFrame(res_name.DBTK_Rect_LienKet),
      r = cc.rect(91, 99, 91, 99),
      n = new cc.Scale9Sprite(p, r);
    n.setScaleX(GAME_SCALE);
    n.setScaleY(1 * GAME_SCALE);
    1 == this.idAccLK ? ((n.x = k.x), (n.y = k.y)) : ((n.x = m.x), (n.y = m.y));
    this.addChildBody(n);
    var s = new BkAvartarImg.getAvatarByID(
      a.avatarLinked,
      Math.max(a.eloCotuongLinked, a.eloCoupLinked)
    );
    this.addChildBody(s);
    s.setScale(g * GAME_SCALE);
    s.x = k.x;
    s.y = k.y + k.getBoundingBox().height / 2 - 0.8 * s.getBoundingBox().height;
    var u = 16;
    isWebPlatform() ||
      ((s.x = s.getBoundingBox().width / 2 + b - 80), (u = 13));
    var v = new BkLabel(Util.trimName(a.nameLinked, u), "", e, !0);
    v.setTextColor(f);
    v.x = k.x;
    v.y = s.y - 0.87 * s.getBoundingBox().height - v.getBoundingBox().height;
    isWebPlatform()
      ? (v.y =
          s.y - 0.45 * s.getBoundingBox().height - v.getBoundingBox().height)
      : v.setScale(GAME_SCALE);
    this.addChildBody(v, 1, 0);
    var t = res_name.CT_iconInfoWD,
      r = res_name.CU_iconInfoWD,
      w = this.createEloSprite(a.eloCotuongLinked, t, a.rankCotuongLinked);
    w.setScale(GAME_SCALE);
    var x = w.getContentSize().height * d * 0.1;
    w.x = k.x;
    w.y =
      v.y -
      v.getBoundingBox().height / 2 -
      (w.getContentSize().height * GAME_SCALE) / 2 -
      x;
    this.addChildBody(w);
    isWebPlatform() &&
      ((w.x += 35),
      (w.y =
        v.y - v.getContentSize().height / 2 - w.getBoundingBox().height / 2));
    b = this.createEloSprite(a.eloCoupLinked, r, a.rankCoUpLinked);
    b.setScale(GAME_SCALE);
    b.x = w.x;
    b.y = w.y - w.getBoundingBox().height / 2 - b.getBoundingBox().height;
    this.addChildBody(b);
    var y = null,
      p = null;
    logMessage(
      "eloSpriteCT1.getContentSize().height *GAME_SCALE: " +
        w.getContentSize().height * GAME_SCALE +
        " deltaY: " +
        x
    );
    p = new BkSprite("#" + res_name.DBTK_line);
    p.setScale(d);
    p.x = k.x;
    p.y = w.y - (w.getContentSize().height * GAME_SCALE) / 2 - 2 * x;
    this.addChildBody(p);
    b.x = w.x;
    b.y = p.y - (b.getContentSize().height * GAME_SCALE) / 2 - 2 * x;
    x = new BkAvartarImg.getAvatarByID(
      BkGlobal.UserInfo.getAvatarId(),
      Math.max(
        BkGlobal.UserInfo.getEloCoTuong(),
        BkGlobal.UserInfo.getEloCoUp()
      )
    );
    this.addChildBody(x);
    x.setScale(g * GAME_SCALE);
    x.x = m.x;
    x.y = s.y;
    g = new BkLabel(
      Util.trimName(BkGlobal.UserInfo.getUserName(), u),
      "",
      e,
      !0
    );
    isWebPlatform() || g.setScale(GAME_SCALE);
    g.setTextColor(f);
    g.x = m.x;
    g.y = v.y;
    this.addChildBody(g, 1, 0);
    f = this.createEloSprite(
      BkGlobal.UserInfo.getEloCoTuong(),
      t,
      a.rankCotuong
    );
    f.setScale(GAME_SCALE);
    f.x = m.x;
    f.y = w.y;
    isWebPlatform() && (f.x += 35);
    this.addChildBody(f);
    a = this.createEloSprite(BkGlobal.UserInfo.getEloCoUp(), r, a.rankCoUp);
    a.setScale(GAME_SCALE);
    a.x = f.x;
    a.y = b.y;
    this.addChildBody(a);
    y = new BkSprite("#" + res_name.DBTK_line);
    y.setScale(d);
    y.x = m.x;
    y.y = p.y;
    this.addChildBody(y);
    a = createBkButtonPlist(
      res_name.btnCapNhat,
      res_name.btnCapNhatPress,
      res_name.btnCapNhat,
      res_name.btnCapNhat
    );
    a.setScale(GAME_SCALE);
    a.x = this.getWindowSize().width / 2;
    a.y = 0.1 * this.getWindowSize().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      var a = h.nameLinked;
      1 != h.idAccLK && (a = BkGlobal.UserInfo.userName);
      logMessage("nameLink" + a);
      h.sendPacketSyncAcc(a);
    });
    e = new BkLabel(
      "H\u00e3y ch\u1ecdn t\u00e0i kho\u1ea3n m\u00e0 b\u1ea1n mu\u1ed1n gi\u1eef l\u1ea1i \u0111\u1ec3 \u0111\u1ed3ng b\u1ed9 v\u1edbi Facebook. T\u00e0i kho\u1ea3n c\u00f2n l\u1ea1i s\u1ebd \u0111\u01b0\u1ee3c x\u00f3a v\u0129nh vi\u1ec5n kh\u1ecfi h\u1ec7 th\u1ed1ng.",
      "",
      e
    );
    e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    e.setScale(d);
    e.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    e.boundingWidth = (0.9 * this.getWindowSize().width) / d;
    e.x = this.getWindowSize().width / 2;
    e.y =
      k.y + 0.57 * k.getBoundingBox().height + e.getBoundingBox().height / 2;
    this.addChildBody(e);
  },
  createEloSprite: function (a, b, d) {
    var e = new BkSprite();
    e.setContentSize(cc.size(280, 78));
    b = new BkSprite("#" + b);
    var f = 195 * 0.554,
      g = 143 * 0.554;
    logMessage("widIcon: " + f + " scaleIcon: 0.554 heiIcon: " + g);
    b.setScale(0.554);
    b.x = 0.45 * f;
    b.y = e.getContentSize().height / 2;
    e.addChild(b);
    var h = 0.25 * g,
      k = 0.05 * f,
      m = 28;
    isWebPlatform() && ((m = 16), (k -= 12), (h = 0.15 * g));
    a = [
      new BkLabelItem("Elo: ", m, ZColor.TEXT_COLOR_NAME_BAN_BE, 1, !0),
      new BkLabelItem(a, m, cc.color(174, 18, 29), 1, !0),
    ];
    a = new BkLabelSprite(a);
    a.x = b.x + 0.5 * f + k;
    a.y = b.y + h - 0.5 * a.getContentSize().height;
    e.addChild(a);
    2e7 > d
      ? ((a = [
          new BkLabelItem(
            "H\u1ea1ng: ",
            m,
            ZColor.TEXT_COLOR_NAME_BAN_BE,
            1,
            !0
          ),
          new BkLabelItem(d, m, cc.color(174, 18, 29), 1, !0),
        ]),
        (d = new BkLabelSprite(a)),
        (d.x = b.x + 0.5 * f + k),
        (d.y = b.y - h - 0.5 * d.getContentSize().height))
      : ((d = new BkLabel("Ch\u01b0a x.h\u1ea1ng", "", m, !0)),
        (d.x = b.x + 0.5 * f + 0.5 * d.getContentSize().width + k),
        (d.y = b.y - h),
        d.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE));
    e.addChild(d);
    return e;
  },
  sendPacketSyncAcc: function (a) {
    var b = new BkPacket();
    b.CreatePacketSyncFacebookPlayer(BkGlobal.fbUserID, a);
    BkConnectionManager.send(b);
  },
});
BkRenameWindow = BkBaseChessWindow.extend({
  txtUser: null,
  ctor: function () {
    var a = isWebPlatform()
      ? cc.size(506, 380)
      : cc.size(620 * GAME_SCALE, 450 * GAME_SCALE);
    this._super("", a);
    this.setVisibleOutBackgroundWindow(!0);
    this.addTitleImage(res_name.title_wd_doiten, 3);
    this.initWd();
  },
  initWd: function () {
    var a = cc.winSize,
      b = 0.75 * this._windowSize.height;
    isWebPlatform() && (b = 0.78 * this._windowSize.height);
    var d = this._windowSize.width / 2,
      a = 0.04 * a.height;
    isWebPlatform() || (a = 0.02 * this._windowSize.height);
    var e = 16,
      f = 20,
      g = 18;
    isWebPlatform() || ((e = 30), (f = 35), (g = 28));
    var h = new BkLabel(
      "T\u00ean hi\u1ec7n t\u1ea1i c\u1ee7a b\u1ea1n l\u00e0: ",
      "",
      e
    );
    h.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    h.setScale(GAME_SCALE);
    h.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    h.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    h.x = d;
    h.y = b;
    isWebPlatform();
    this.addChildBody(h, 1, 0);
    b = ZColor.TEXT_COLOR_LABEL_POPUP;
    isWebPlatform() || (b = ZColor.TEXT_COLOR_LABEL_POPUP);
    f = new BkLabel(BkGlobal.UserInfo.getUserName(), "", f, !0);
    f.setTextColor(b);
    f.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    f.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    f.x = d;
    f.y = h.y - f.getContentSize().height / 2 - a;
    isWebPlatform() ||
      (f.setScale(GAME_SCALE),
      (f.y =
        h.y -
        h.getBoundingBox().height / 2 -
        f.getBoundingBox().height / 2 -
        a));
    isWebPlatform();
    this.addChildBody(f, 1, 0);
    var h = 0.7 * this._windowSize.width,
      k = 0.1 * this._windowSize.height;
    isWebPlatform() || (k = 0.15 * this._windowSize.height);
    var m = res_name.changename;
    this.txtUser = createEditBox(cc.size(h, k), m);
    this.txtUser.setMaxLength(20);
    this.txtUser.x = d;
    this.txtUser.y = f.y - f.getBoundingBox().height / 2 - a;
    isWebPlatform() ||
      (this.txtUser.y =
        f.y -
        f.getContentSize().height / 2 -
        this.txtUser.getContentSize().height / 2 -
        a);
    this.txtUser.setPlaceHolder("Nh\u1eadp t\u00ean m\u1edbi");
    f = ZColor.TEXT_COLOR_NAME_AVATAR;
    this.txtUser.setPlaceholderFontColor(ZColor.TEXT_COLOR_PLACEHOLDER_MOBI);
    this.txtUser.setFontColor(f);
    isFBInstantGame() && this.txtUser.setFontSize(e);
    this.addChildBody(this.txtUser, 1, 0);
    this.addEditbox(this.txtUser);
    var e = 0.25 * this._windowSize.width,
      n = this,
      g = new BkLabel(
        "Ch\u00fa \u00fd: B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1ed5i t\u00ean duy nh\u1ea5t m\u1ed9t l\u1ea7n",
        "",
        g,
        !1,
        !0
      );
    g.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    g.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    g.setTextColor(b);
    g.x = d;
    g.y = this.txtUser.y - this.txtUser.getBoundingBox().height / 2 - 2.4 * a;
    isWebPlatform() ||
      (g.setScale(GAME_SCALE),
      (g.y =
        this.txtUser.y -
        this.txtUser.getBoundingBox().height / 2 -
        g.getBoundingBox().height / 2 -
        2 * a));
    this.addChildBody(g, 1, 0);
    b = createBkButtonPlist(
      res_name.btnCapNhat,
      res_name.btnCapNhatPress,
      res_name.btnCapNhat,
      res_name.btnCapNhat
    );
    b.x = d - e;
    b.y = g.y - g.getBoundingBox().height / 2 - 2.2 * a;
    isWebPlatform() ||
      (b.setScale(GAME_SCALE),
      (b.y =
        g.y -
        g.getBoundingBox().height / 2 -
        b.getBoundingBox().height / 2 -
        3 * a));
    this.addChildBody(b, 1, 0);
    var p = cc.winSize.width / 2,
      r = cc.winSize.height / 2 - 30;
    b.addClickEventListener(function () {
      n.getWindowPos();
      var a = n.txtUser.getString();
      if ("" == a)
        return (
          showToastMessage(BkConstString.STR_MUST_INPUT_NAME, p, r, 2, 370), !1
        );
      var b = isValidUsername(a);
      if ("" != b) return showToastMessage(b, p, r, 2, 370), !1;
      n.requestRenameUser(a);
    });
    a = createBkButtonPlist(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong
    );
    a.x = d + e;
    a.y = b.y;
    this.addChildBody(a, 1, 0);
    a.addClickEventListener(function () {
      n.removeSelf();
    });
    isWebPlatform() ||
      (a.setScale(GAME_SCALE), a.setVisibleButton(!1), (b.x = d));
  },
  requestRenameUser: function (a) {
    logMessage("requestRenameUser " + a);
    Util.showAnim();
    this.initHandleonLoadComplete();
    BkGlobal.tempData = a;
    var b = new BkPacket();
    b.CreatePacketLoginFbChangeName(a);
    BkConnectionManager.send(b);
  },
  initHandleonLoadComplete: function () {
    BkLogicManager.getLogic().setOnLoadComplete(this);
  },
  onLoadComplete: function (a, b) {
    Util.removeAnim();
    BkLogicManager.getLogic().setOnLoadComplete(null);
    switch (a) {
      case fb.CLOSE_WINDOW:
        this.removeSelf();
    }
  },
});
BkSelectGameForFriend = BkBaseChessWindow.extend({
  playerName: null,
  btnCoTuong: null,
  btnCoUp: null,
  lblStatus: null,
  btnCancel: null,
  ctor: function (a) {
    this._super(
      "",
      isWebPlatform()
        ? cc.size(550, 400)
        : cc.size(650 * GAME_SCALE, 450 * GAME_SCALE),
      null
    );
    this.playerName = a;
    this.initGame();
    this.addTitleImage(res_name.title_wd_moichoi, 3);
  },
  initGame: function () {
    var a = this;
    isWebPlatform()
      ? ((this.btnCoTuong = createBkButtonPlist(
          res_name.CT_butt,
          res_name.CT_butt_press,
          res_name.CT_butt,
          res_name.CT_butt,
          ""
        )),
        (this.btnCoTuong.x = this.btnCoTuong.getContentSize().width / 2.1),
        (this.btnCoTuong.y = this.getWindowSize().height / 2.5),
        this.btnCoTuong.setScale(0.5))
      : ((this.btnCoTuong = createBkButtonPlist(
          res_name.banhot_CT,
          res_name.banhot_CT_deselect,
          res_name.banhot_CT_deselect,
          res_name.banhot_CT,
          ""
        )),
        (this.btnCoTuong.x = 0.3 * this.getWindowSize().width),
        (this.btnCoTuong.y = 0.5 * this.getWindowSize().height),
        this.btnCoTuong.setScale(GAME_SCALE));
    this.addChildBody(this.btnCoTuong, 1);
    this.btnCoTuong.addClickEventListener(function () {
      a.onClickPlayWith(GID.CO_TUONG);
    });
    isWebPlatform()
      ? ((this.btnCoUp = createBkButtonPlist(
          res_name.CU_butt,
          res_name.CU_butt_press,
          res_name.CU_butt,
          res_name.CU_butt,
          ""
        )),
        (this.btnCoUp.x = this.getWindowSize().width / 1.4),
        this.btnCoUp.setScale(0.5))
      : ((this.btnCoUp = createBkButtonPlist(
          res_name.banhot_CU,
          res_name.banhot_CU_deselect,
          res_name.banhot_CU_deselect,
          res_name.banhot_CU,
          ""
        )),
        (this.btnCoUp.x = 0.7 * this.getWindowSize().width),
        this.btnCoUp.setScale(GAME_SCALE));
    this.btnCoUp.y = this.btnCoTuong.y;
    this.addChildBody(this.btnCoUp);
    this.btnCoUp.addClickEventListener(function () {
      a.onClickPlayWith(GID.CO_UP);
    });
    var b = 22,
      d = ZColor.TEXT_COLOR_LABEL_POPUP;
    isWebPlatform() || (b = 30);
    this.lblStatus = new BkLabel(
      "H\u00e3y ch\u1ecdn game \u0111\u1ec3 m\u1eddi " +
        this.playerName +
        " ch\u01a1i!",
      "",
      b
    );
    this.lblStatus.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.lblStatus.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.lblStatus.setTextColor(d);
    b = 1;
    isWebPlatform() || (b = GAME_SCALE);
    this.lblStatus.setScaleM(b);
    this.lblStatus.x = this.getWindowSize().width / 2;
    this.lblStatus.y = this.getWindowSize().height / 1.3;
    this.addChildBody(this.lblStatus);
    isWebPlatform() || (this.lblStatus.y = 0.75 * this.getWindowSize().height);
    this.btnCancel = createBkButtonPlist(
      res_name.btnHuy,
      res_name.btnHuyPress,
      res_name.btnHuy,
      res_name.btnHuy
    );
    this.btnCancel.setScaleM(GAME_SCALE);
    this.btnCancel.setVisibleButton(!1);
    this.btnCancel.x = this.getWindowSize().width / 2;
    this.btnCancel.y = 60 - this.btnCancel.getContentSize().height / 2;
    isWebPlatform() ||
      (this.btnCancel.y = this.btnCancel.getBoundingBox().height);
    this.addChildBody(this.btnCancel);
    this.btnCancel.addClickEventListener(function () {
      a.removeSelf();
    });
  },
  onClickPlayWith: function (a) {
    var b = new BkPacket();
    b.createFriendRequestPlay(a, this.playerName);
    BkConnectionManager.send(b);
    BkLogicManager.getLogic().promotionInfo.isJoinFromInviteFriend = !0;
  },
  count: 0,
  messageString: "",
  marginLeft: 0,
  lblStatus1: null,
  lblStatus2: null,
  lblStatus3: null,
  initLbForSchedule: function (a) {
    a = 22;
    var b = cc.color(27, 197, 2);
    isWebPlatform() || ((a = 30), (b = ZColor.TEXT_COLOR_LABEL_POPUP));
    var d = 1;
    isWebPlatform() || (d = GAME_SCALE);
    this.lblStatus.x = this.getWindowSize().width / 2;
    var e = this.lblStatus.x + this.lblStatus.getContentSize().width / 2;
    isWebPlatform() ||
      (e = this.lblStatus.x + this.lblStatus.getBoundingBox().width / 2);
    this.lblStatus1 = new BkLabel(".", "", a);
    this.lblStatus1.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.lblStatus1.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.lblStatus1.setTextColor(b);
    this.lblStatus1.setScaleM(d);
    this.lblStatus1.x = e + this.lblStatus1.getContentSize().width / 2;
    isWebPlatform() ||
      (this.lblStatus1.x = e + this.lblStatus1.getBoundingBox().width / 2);
    this.lblStatus1.y = this.lblStatus.y;
    this.addChildBody(this.lblStatus1);
    this.lblStatus2 = new BkLabel("..", "", a);
    this.lblStatus2.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.lblStatus2.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.lblStatus2.setTextColor(b);
    this.lblStatus2.setScaleM(d);
    this.lblStatus2.x = e + this.lblStatus2.getContentSize().width / 2;
    isWebPlatform() ||
      (this.lblStatus2.x = e + this.lblStatus2.getBoundingBox().width / 2);
    this.lblStatus2.y = this.lblStatus.y;
    this.addChildBody(this.lblStatus2);
    this.lblStatus3 = new BkLabel("...", "", a);
    this.lblStatus3.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.lblStatus3.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.lblStatus3.setTextColor(b);
    this.lblStatus3.setScaleM(d);
    this.lblStatus3.x = e + this.lblStatus3.getContentSize().width / 2;
    isWebPlatform() ||
      (this.lblStatus3.x = e + this.lblStatus3.getBoundingBox().width / 2);
    this.lblStatus3.y = this.lblStatus.y;
    this.addChildBody(this.lblStatus3);
  },
  showLabelStatus: function (a) {
    this.hideAllLabel();
    1 == a && null != this.lblStatus1 && this.lblStatus1.setVisible(!0);
    2 == a && null != this.lblStatus2 && this.lblStatus2.setVisible(!0);
    3 == a && null != this.lblStatus3 && this.lblStatus3.setVisible(!0);
  },
  hideAllLabel: function () {
    null != this.lblStatus1 && this.lblStatus1.setVisible(!1);
    null != this.lblStatus2 && this.lblStatus2.setVisible(!1);
    null != this.lblStatus3 && this.lblStatus3.setVisible(!1);
  },
  initScheduleUpdateString: function (a) {
    this.messageString = a;
    this.marginLeft =
      (this.getWindowSize().width - this.lblStatus.getBoundingBox().width) / 2;
    this.count = 0;
    this.schedule(this.onTickWaitting, 0.5);
    this.initLbForSchedule(a);
    this.showLabelStatus(0);
  },
  onTickWaitting: function () {
    this.showLabelStatus(this.count - 4 * Math.floor(this.count / 4));
    this.count++;
  },
  updateInviteStatus: function (a) {
    this.btnCancel.setVisibleButton(!1);
    var b = this,
      d = Util.getPlayWithFriendsMessage(a);
    a == FrStatus.STATUS_FRIEND_WAITING ||
    a == FrStatus.STATUS_BEGIN_CREATE_TABLE
      ? (this.lblStatus.setString(d),
        this.initScheduleUpdateString(d),
        this.btnCancel.setVisibleButton(!0),
        this.btnCoTuong.setEnableButton(!1),
        this.btnCoUp.setEnableButton(!1))
      : (logMessage("statusMsg: " + d),
        showPopupMessageWith(d, "", null, function () {
          b.removeSelf();
        }));
  },
  removeSelf: function () {
    this._super();
    null != this.getParentWindow() &&
      (this.getParentWindow().selectGameWd = null);
  },
});
BkFriendInviteConfirm = BkBaseChessWindow.extend({
  inviteObj: null,
  lblStatus: null,
  btnCancel: null,
  ctor: function (a) {
    this._super(
      "",
      isWebPlatform()
        ? cc.size(520, 400)
        : cc.size(600 * GAME_SCALE, 480 * GAME_SCALE),
      null
    );
    this.inviteObj = a;
    this.initGame();
    this._btnClose.setVisibleButton(!1);
    this.setVisibleOutBackgroundWindow(!1);
    this.addTitleImage(res_name.title_wd_moichoi, 3);
  },
  initGame: function () {
    var a = this,
      b = new BkAvartarImg.getAvatarByID(
        this.inviteObj.avatar,
        this.inviteObj.elo
      );
    this.addChildBody(b);
    b.setScale(GAME_SCALE);
    b.x = this.getWindowSize().width / 2;
    b.y = this.getWindowSize().height - 1.2 * b.getBoundingBox().height;
    b = 20;
    isWebPlatform() || (b = 30);
    var d =
      this.inviteObj.inviterPlayer +
      " m\u1eddi b\u1ea1n ch\u01a1i " +
      Util.getGameLabel(this.inviteObj.gameId) +
      ".\nB\u1ea1n c\u00f3 mu\u1ed1n ch\u01a1i kh\u00f4ng?";
    isWebPlatform() ||
      (d =
        this.inviteObj.inviterPlayer +
        " m\u1eddi b\u1ea1n ch\u01a1i " +
        Util.getGameLabel(this.inviteObj.gameId) +
        ". B\u1ea1n c\u00f3 mu\u1ed1n ch\u01a1i kh\u00f4ng?");
    this.lblStatus = new BkLabel(d, "", b);
    this.lblStatus.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    this.lblStatus.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    this.lblStatus.setScaleM(GAME_SCALE);
    this.lblStatus.x = this.getWindowSize().width / 2;
    this.lblStatus.y = this.getWindowSize().height / 3.2;
    this.lblStatus.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE);
    isWebPlatform() ||
      (this.lblStatus.setScale(GAME_SCALE),
      (this.lblStatus.boundingWidth =
        (0.85 * this.getWindowSize().width) / GAME_SCALE),
      (b = new BkSprite("#" + res_name.infoFrameBanBeOn)),
      b.setScale(GAME_SCALE),
      (b.x = this.getWindowSize().width / 2),
      (b.y = 0.37 * this.getWindowSize().height),
      this.addChildBody(b),
      (this.lblStatus.y = b.y));
    this.addChildBody(this.lblStatus);
    this.btnOk = createBkButtonPlist(
      res_name.btnChoiNgay,
      res_name.btnChoiNgayPress,
      res_name.btnChoiNgay,
      res_name.btnChoiNgay
    );
    this.btnOk.setScaleM(GAME_SCALE);
    this.btnOk.x = this.getWindowSize().width / 4;
    this.btnOk.y = 80 - this.btnOk.getContentSize().height / 2;
    isWebPlatform() ||
      ((this.btnOk.x = 0.3 * this.getWindowSize().width),
      (this.btnOk.y = 0.15 * this.getWindowSize().height));
    this.addChildBody(this.btnOk);
    this.btnOk.addClickEventListener(function () {
      a.onclickPlayFriendResponse(1);
      a.removeSelf();
    });
    this.btnCancel = createBkButtonPlist(
      res_name.btnTuChoi,
      res_name.btnTuChoiPress,
      res_name.btnTuChoi,
      res_name.btnTuChoi
    );
    this.btnCancel.setScaleM(GAME_SCALE);
    this.btnCancel.x = this.getWindowSize().width / 1.5;
    isWebPlatform() || (this.btnCancel.x = 0.7 * this.getWindowSize().width);
    this.btnCancel.y = this.btnOk.y;
    this.addChildBody(this.btnCancel);
    this.btnCancel.addClickEventListener(function () {
      a.onclickPlayFriendResponse(0);
      a.removeSelf();
    });
  },
  onclickPlayFriendResponse: function (a) {
    if (void 0 != this.inviteObj) {
      var b = new BkPacket();
      b.createFriendInformResponse(
        a,
        this.inviteObj.gameId,
        this.inviteObj.inviterPlayer
      );
      BkConnectionManager.send(b);
    }
  },
  removeSelf: function () {
    this._super();
    var a = BkLogicManager.getLogic();
    null != a && (a.invitePlayWd = null);
  },
});
BkBonusHeartWindow = BkBaseChessWindow.extend({
  heartNumber: -1,
  heartSprite: null,
  bg: null,
  reasonAddHeart: -1,
  ctor: function (a, b, d) {
    this.heartNumber = a;
    this.heartSprite = b;
    this.reasonAddHeart = d;
    var e = cc.size(580, 420);
    isWebPlatform() || (e = cc.size(700 * GAME_SCALE, 450 * GAME_SCALE));
    this._super("", e);
    this.setVisibleOutBackgroundWindow(!0);
    this.addTitleImage(res_name.title_wd_bonus);
    this.bg = new BkSprite();
    this.bg.x = e.width / 2;
    this.bg.y = e.height / 2;
    this.addChildBody(this.bg);
    this._btnClose.y = this.bg.y + 0.22 * this.bg.getContentSize().height;
    this._btnClose.x = this.bg.x + 0.33 * this.bg.getContentSize().width;
    b = 30;
    d = GAME_SCALE;
    isWebPlatform() && ((b = 22), (d = 0.6));
    var f = new BkSprite("#" + res_name.chucmung);
    f.setScale(d);
    f.x = e.width / 2;
    f.y = 0.75 * e.height;
    this.addChildBody(f);
    e = new BkButton(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong,
      ccui.Widget.PLIST_TEXTURE
    );
    e.x = this.bg.x;
    isWebPlatform() || e.setScale(GAME_SCALE);
    e.y = 0.15 * this.getWindowSize().height;
    this.addChildBody(e);
    var g = this;
    e.addClickEventListener(function () {
      g.removeSelf();
    });
    var h = new BkSprite("#" + res_name.effect_heart),
      f = cc.p(
        f.x,
        f.y - f.getContentSize().height / 2 - h.getContentSize().height / 2
      );
    f.x = this.bg.x;
    f.y = this.bg.y + 0.1 * this.bg.getContentSize().height;
    h.setScale(GAME_SCALE);
    h.x = f.x;
    h.y = f.y;
    this.addChildBody(h);
    a = a = new cc.LabelBMFont("+" + a, res.BITMAP_GAME_FONT_CO_HEART_PLUS);
    a.setScale(d);
    a.x = h.x;
    a.y = h.y;
    this.addChildBody(a);
    a = new BkLabel(this.getStringReason(), "", b, !1, !0);
    isWebPlatform() || a.setScale(GAME_SCALE);
    a.x = h.x;
    a.y =
      e.y + 0.6 * e.getBoundingBox().height + 0.5 * a.getBoundingBox().height;
    a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    this.addChildBody(a);
  },
  getStringReason: function () {
    var a = "";
    switch (this.reasonAddHeart) {
      case REASON_ADD_HEART.VIEW_ADS:
        a = "xem qu\u1ea3ng c\u00e1o!";
        break;
      case REASON_ADD_HEART.INGAME_PLAYER_UPDATE_MONEY:
        a = "";
        break;
      case REASON_ADD_HEART.DAILY_TASK_FINISH:
        a = "ho\u00e0n th\u00e0nh nhi\u1ec7m v\u1ee5 h\u00e0ng ng\u00e0y!";
        break;
      case REASON_ADD_HEART.ONTIME_FREE_HEART:
        a = "\u0111\u1ebfn th\u1eddi gian nh\u1eadn mi\u1ec5n ph\u00ed!";
        break;
      case REASON_ADD_HEART.IN_APP_PURCHASE:
        a = "mua t\u1eeb c\u1eeda h\u00e0ng!";
        break;
      case REASON_ADD_HEART.FB_INVITE_FRIEND:
        a = "m\u1eddi b\u1ea1n Facebook!";
        break;
      case REASON_ADD_HEART.ADMIN_ADD:
      case REASON_ADD_HEART.RATE_APP:
        a = "b\u00ecnh ch\u1ecdn 5* cho C\u1edd Ziga!";
    }
    logMessage("getStringReason: " + this.reasonAddHeart + " - " + a);
    "" != a && (a = "Do: " + a);
    return a;
  },
  removeSelf: function () {
    this._super();
    this.heartSprite.bnHeartWD = null;
    this.doAnimationAddHeart();
  },
  animationHeartSp: null,
  animationHeartSp1: null,
  animationHeartSp2: null,
  doAnimationAddHeart: function () {
    this.animationHeartSp = new BkSprite("#" + res_name.heart_no_plus);
    this.animationHeartSp.x = cc.winSize.width / 2;
    this.animationHeartSp.y = cc.winSize.height / 2;
    getCurrentScene().addChild(this.animationHeartSp, TagOfLayer.Popup);
    var a = cc.moveTo(0.3, this.heartSprite.x, this.heartSprite.y),
      b = cc.scaleTo(0.3, 0.2),
      d = cc.fadeOut(0.3),
      a = cc.spawn(a, b, d),
      e = this,
      b = cc.callFunc(function () {
        logMessage("callback");
        e.heartSprite.onUpdateHeartSprite(this.heartNumber);
        e.animationHeartSp.removeFromParent();
      }, this),
      b = cc.sequence(a, b);
    this.animationHeartSp.runAction(b);
    this.animationHeartSp1 = new BkSprite("#" + res_name.heart_no_plus);
    this.animationHeartSp1.x = cc.winSize.width / 2 + 0.05 * cc.winSize.width;
    this.animationHeartSp1.y = cc.winSize.height / 2;
    getCurrentScene().addChild(this.animationHeartSp1, TagOfLayer.Popup);
    b = a.clone();
    b = cc.sequence(
      cc.delayTime(0.075),
      b,
      cc.callFunc(function () {
        e.animationHeartSp1.removeFromParent();
      })
    );
    this.animationHeartSp1.runAction(b);
    this.animationHeartSp2 = new BkSprite("#" + res_name.heart_no_plus);
    this.animationHeartSp2.x = cc.winSize.width / 2 + 0.05 * cc.winSize.width;
    this.animationHeartSp2.y = cc.winSize.height / 2;
    getCurrentScene().addChild(this.animationHeartSp2, TagOfLayer.Popup);
    a = a.clone();
    a = cc.sequence(
      cc.delayTime(0.15),
      a,
      cc.callFunc(function () {
        e.animationHeartSp2.removeFromParent();
      })
    );
    this.animationHeartSp2.runAction(a);
  },
});
BkHeartPromotionWd = BkBaseChessWindow.extend({
  bg: null,
  ctor: function (a) {
    var b = cc.size(580, 525);
    this._super("", b);
    this.addTitleImage(res_name.title_wd_thongbao);
    this.bg = new BkSprite(res.app_store_search);
    this.bg.x = b.width / 2;
    this.bg.y = this.bg.getContentSize().height / 2 + 80;
    this.addChildBody(this.bg);
    var d = "";
    0 == a &&
      (d =
        "B\u1ea1n kh\u00f4ng \u0111\u1ee7 " +
        BkConstString.STR_GAME_COIN.toLowerCase() +
        " \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i.\n");
    a = new BkLabel(
      d +
        "Xin h\u00e3y t\u1ea3i b\u1ea3n Di \u0110\u1ed9ng \u0111\u1ec3 nh\u1eadn \u0111\u01b0\u1ee3c nhi\u1ec1u \u01b0u \u0111\u00e3i h\u01a1n!",
      "",
      20
    );
    a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    a.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    a.x = this.bg.x;
    a.y = b.height / 1.15 - a.getContentSize().height / 2;
    this.addChildBody(a);
    var e = this;
    a = new BkButton(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    a.x = b.width / 2;
    a.y = 1.5 * a.getContentSize().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      e.removeSelf();
    });
  },
  onClickBtnMoiBanFacebook: function () {
    var a =
      "B\u1ea1n s\u1ebd nh\u1eadn \u0111\u01b0\u1ee3c 1" +
      BkConstString.getGameCoinStr() +
      " cho " +
      SETTING.MIN_FRIEND_FB_REWARDED +
      " l\u1eddi m\u1eddi b\u1ea1n Facebook.";
    showPopupMessageWith(a, "", function () {
      BkLogicManager.getLogic().doInviteFriendFacebook();
    });
  },
});
var BkWebPromotionWd = BkBaseChessWindow.extend({
  bg: null,
  ctor: function (a, b, d) {
    var e = cc.size(580, 525);
    this._super("", e);
    this.addTitleImage(res_name.title_wd_thongbao);
    this.bg = new BkSpriteLoader(d, res.Tranperent_IMG);
    this.bg.x = e.width / 2;
    this.bg.y = this.bg.getContentSize().height / 2 + 100;
    this.addChildBody(this.bg);
    a = new BkLabel(a, "", 20);
    a.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    a.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    a.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    a.setTextAreaSize(cc.size(1.5 * this.getWindowSize().width, 0));
    a.x = this.bg.x;
    a.y = e.height / 1.15 - a.getContentSize().height / 2;
    this.addChildBody(a);
    var f = this;
    a = new BkButton(
      res_name.btnDong,
      res_name.btnDongPress,
      res_name.btnDong,
      res_name.btnDong,
      ccui.Widget.PLIST_TEXTURE
    );
    a.setScale(GAME_SCALE);
    a.x = 0.3 * e.width;
    a.y = 1.5 * a.getContentSize().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      f.removeSelf();
    });
    this.btnMoiBanFB = new BkButton(
      res_name.btnDongy,
      res_name.btnDongyPress,
      res_name.btnDongy,
      res_name.btnDongyPress,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnMoiBanFB.setScale(GAME_SCALE);
    this.btnMoiBanFB.x = 0.7 * e.width;
    this.btnMoiBanFB.y = a.y;
    this.addChildBody(this.btnMoiBanFB);
    this.btnMoiBanFB.addClickEventListener(function () {
      if (bk.isFbApp) {
        var a = cc.game.config.app.promoUrlFb;
        void 0 != a && "" != a && window.open(a, "_blank");
      } else window.open(b, "_blank");
    });
  },
});
BkAddHeartWindow = BkBaseChessWindow.extend({
  listBtn: [],
  isOnads: 0,
  adsPartner: 0,
  adsType: 0,
  numberHeartBonus: 0,
  nextAdsRewardsTime: -1,
  mLayer: null,
  ctor: function () {
    var a = "";
    isWebPlatform() && (a = "");
    var b = cc.size(460, 460);
    isWebPlatform() || (b = cc.size(629 * GAME_SCALE, 1100 * GAME_SCALE));
    this._super(a, b, null);
    NativeInterface.logFirebaseEvent(EVENT_NAME.ADD_HEART_WD);
    isWebPlatform() || this.addTitleImage(res_name.title_wd_nhantim);
    this.setVisibleOutBackgroundWindow(!0);
    var d = this,
      a = new BkButton(
        res_name.btnDong,
        res_name.btnDongPress,
        res_name.btnDong,
        res_name.btnDong,
        ccui.Widget.PLIST_TEXTURE
      );
    a.setScale(GAME_SCALE);
    a.x = this.getWindowSize().width / 2;
    a.y = 0.08 * this.getWindowSize().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      d.removeSelf();
    });
    this.mLayer = new BkBaseLayer();
    this.addChildBody(this.mLayer);
    this.sendPacketGetAdsInfo();
  },
  sendPacketGetAdsInfo: function () {
    this.listBtn = [];
    BkLogicManager.getLogic().setOnLoadComplete(this);
    Util.showAnim();
    var a = new BkPacket();
    a.CreatePacketWithOnlyType(c.NETWORK_GET_CONTENT_ADS_INFO);
    BkConnectionManager.send(a);
  },
  drawUI: function (a) {
    this.mLayer.removeAllChildren();
    this.initLayer();
    this.bake();
  },
  initLayer: function () {
    this.initItemWithIndex(1);
    this.initItemWithIndex(2);
    this.initItemWithIndex(3);
    this.initItemWithIndex(4);
    this.initItemWithIndex(5);
  },
  initItemWithIndex: function (a) {
    var b = this,
      d = new BkSprite("#" + res_name.info_popUp);
    d.setScale(GAME_SCALE);
    var e = this.getWindowSize().height - 1 * d.getBoundingBox().height,
      f = d.getBoundingBox().height;
    d.x = this.getWindowSize().width / 2;
    d.y = e - (a - 1) * f;
    this.mLayer.addChild(d);
    e = new BkSprite("#" + res_name.heart_no_plus);
    e.setScale(GAME_SCALE);
    e.x = d.x - d.getBoundingBox().width / 2 + e.getBoundingBox().width;
    e.y = d.y;
    this.mLayer.addChild(e);
    f = this.getNumberHeartWithIndex(a);
    f = new cc.LabelBMFont(" x" + f, res.BITMAP_GAME_FONT_CO_HEART_PLUS);
    f.setScale(GAME_SCALE);
    f.x = e.x + e.getBoundingBox().width / 2 + f.getBoundingBox().width / 2;
    f.y = e.y - 0.1 * e.getBoundingBox().height;
    this.mLayer.addChild(f);
    e = new BkButton(
      res_name.btn_no_text,
      res_name.btn_no_text_press,
      res_name.btn_no_text,
      res_name.btn_no_text,
      ccui.Widget.PLIST_TEXTURE
    );
    0 != a &&
      (e.setTitleText(this.getTilteText(a)),
      e.setTitleFontName(Util.getBtnFontName()),
      e.setTitleFontSize(31),
      e.setTitleColor(cc.color(71, 44, 27)),
      (e.getTitleRenderer().y += 0.1 * e.getBoundingBox().height));
    this.listBtn.push(e);
    e.setScale(GAME_SCALE);
    e.x = d.x + d.getBoundingBox().width / 2 - e.getBoundingBox().width / 2;
    e.y = d.y;
    this.mLayer.addChild(e);
    e.addClickEventListener(function () {
      b.onActionClick(a);
    });
  },
  onActionClick: function (a) {
    var b = this;
    logMessage("onActionClick: " + a);
    if (1 < a) NativeInterface.onBuyItem(a - 2);
    else
      (BkConnectionManager.adsViewedRewardCallback = function () {
        b.sendPacketGetAdsInfo();
      }),
        (BkGlobal.isPushFullScreenAds = !1),
        NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_VIEW_ADS_ADD_HEART_WD),
        this.isOnads
          ? BkConnectionManager.showFullScreenAds(this.adsPartner, this.adsType)
          : BkConnectionManager.getFullScreenAdsSetting(1);
  },
  getNumberHeartWithIndex: function (a) {
    switch (a) {
      case 1:
        return this.numberHeartBonus;
      case 2:
        return "400";
      case 3:
        return "2K2";
      case 4:
        return "5K";
      case 5:
        return "10K";
    }
  },
  getTilteText: function (a) {
    switch (a) {
      case 1:
        return "Xem Video";
      case 2:
        return "22.000 VN\u0110";
      case 3:
        return "109.000 VN\u0110";
      case 4:
        return "219.000 VN\u0110";
      case 5:
        return "449.000 VN\u0110";
    }
  },
  removeSelf: function (a) {
    this._super(a);
    NativeInterface.destroyBillingProcessor();
    BkConnectionManager.adsViewedRewardCallback = null;
  },
  onLoadComplete: function (a, b) {
    BkLogicManager.getLogic().setOnLoadComplete(null);
    Util.removeAnim();
    switch (b) {
      case c.NETWORK_GET_CONTENT_ADS_INFO:
        logMessage(
          "isOnads: " +
            a.isOnads +
            " - o.adsPartner: " +
            a.adsPartner +
            " - o.adsType: " +
            a.adsType +
            " - o.numberHeartBonus: " +
            a.numberHeartBonus +
            " - o.nextAdsRewardsTime: " +
            a.nextAdsRewardsTime
        ),
          (this.isOnads = a.isOnads),
          (this.adsPartner = a.adsPartner),
          (this.adsType = a.adsType),
          (this.numberHeartBonus = a.numberHeartBonus),
          (this.nextAdsRewardsTime = a.nextAdsRewardsTime),
          this.drawUI(a);
    }
  },
});
BkRateAppWindow = BkBaseChessWindow.extend({
  contentInvite: "",
  contentRewarded: "",
  contentTitle: "",
  countClose: 0,
  ctor: function (a, b, d) {
    d = void 0 === d ? "" : d;
    var e = "";
    isWebPlatform() && (e = "");
    var f = cc.size(460, 460);
    isWebPlatform() ||
      ((f = 530),
      void 0 != d && "" != d && (f = 600),
      (f = cc.size(600 * GAME_SCALE, f * GAME_SCALE)));
    this._super(e, f, null);
    isWebPlatform() || this.addTitleImage(res_name.title_wd_thongbao);
    this.contentTitle = a;
    this.contentInvite = b;
    this.contentRewarded = d;
    this.drawUI();
    this.countClose = 0;
  },
  drawUI: function () {
    var a = new BkSprite("#" + res_name.Icon_app_120);
    a.setScale(GAME_SCALE);
    a.x = this.getWindowSize().width / 2;
    a.y = this.getWindowSize().height - 0.9 * a.getBoundingBox().height;
    isWebPlatform() ||
      (null != this.headerChessWD &&
        (a.y =
          this.headerChessWD.y -
          0.5 * this.headerChessWD.getBoundingBox().height -
          0.5 * a.getBoundingBox().height));
    this.addChildBody(a);
    var b = 0.9 * this.getWindowSize().width,
      d = new BkLabel(this.contentTitle, "", 33, !0);
    d.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    d.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    d.setScale(GAME_SCALE);
    d.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    d.boundingWidth = b / GAME_SCALE;
    d.x = a.x;
    d.y =
      a.y - 0.7 * a.getBoundingBox().height - 0.5 * d.getBoundingBox().height;
    this.addChildBody(d);
    var e = new BkLabel(this.contentInvite, "", 30);
    e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
    e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
    var f = (0.045 * cc.winSize.height) / e.getContentSize().height,
      f = GAME_SCALE;
    e.setScale(f);
    e.setTextColor(ZColor.TEXT_COLOR_LABEL_POPUP);
    e.boundingWidth = b / f;
    e.x = a.x;
    e.y =
      d.y - 0.7 * d.getBoundingBox().height - 0.5 * e.getBoundingBox().height;
    this.addChildBody(e);
    d = e.y - e.getBoundingBox().height / 2;
    d = this.createSprite5Star(d);
    if ("" != this.contentInvite) {
      logMessage(" init mess rewarded");
      e = new BkLabel(this.contentRewarded, "", 28, !1, !0);
      e.setTextVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
      e.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
      e.setScale(f);
      var g = cc.color(102, 0, 0);
      e.setTextColor(g);
      e.boundingWidth = b / f;
      e.x = a.x;
      e.y = d.posY - d.heiObj - 0.5 * e.getBoundingBox().height;
      this.addChildBody(e);
    }
    var h = this,
      a = new BkButton(
        res_name.btn_no_text,
        res_name.btn_no_text_press,
        res_name.btn_no_text,
        res_name.btn_no_text,
        ccui.Widget.PLIST_TEXTURE
      );
    a.setTitleText("B\u00ecnh ch\u1ecdn");
    a.setTitleFontName(res_font_path.GAME_FONT_BTN);
    a.setTitleFontSize(32);
    a.setTitleColor(cc.color(71, 44, 27));
    a.getTitleRenderer().y += 0.1 * a.getBoundingBox().height;
    a.setScale(GAME_SCALE);
    a.x = 0.7 * this.getWindowSize().width;
    a.y = 0.14 * this.getWindowSize().height;
    this.addChildBody(a);
    a.addClickEventListener(function () {
      h.onRateApp();
    });
    b = new BkButton(
      res_name.btn_no_text,
      res_name.btn_no_text_press,
      res_name.btn_no_text,
      res_name.btn_no_text,
      ccui.Widget.PLIST_TEXTURE
    );
    b.setTitleText("\u0110\u00f3ng");
    b.setTitleFontName(res_font_path.GAME_FONT_BTN);
    b.setTitleFontSize(32);
    b.setTitleColor(cc.color(71, 44, 27));
    b.getTitleRenderer().y += 0.1 * b.getBoundingBox().height;
    b.setScale(GAME_SCALE);
    b.x = this.getWindowSize().width - a.x;
    b.y = a.y;
    this.addChildBody(b);
    b.addClickEventListener(function () {
      h.removeSelf();
    });
  },
  createSprite5Star: function (a) {
    var b = 1.5 * GAME_SCALE,
      d = new BkSprite("#" + res_name.star_1);
    d.setScale(b);
    d.x = this.getWindowSize().width / 2;
    d.y = a - d.getBoundingBox().height;
    this.addChildBody(d);
    a = new BkSprite("#" + res_name.star_1);
    a.setScale(b);
    a.x = d.x - d.getBoundingBox().width;
    a.y = d.y;
    this.addChildBody(a);
    var e = new BkSprite("#" + res_name.star_1);
    e.setScale(b);
    e.x = a.x - d.getBoundingBox().width;
    e.y = d.y;
    this.addChildBody(e);
    a = new BkSprite("#" + res_name.star_1);
    a.setScale(b);
    a.x = d.x + d.getBoundingBox().width;
    a.y = d.y;
    this.addChildBody(a);
    e = new BkSprite("#" + res_name.star_1);
    e.setScale(b);
    e.x = a.x + d.getBoundingBox().width;
    e.y = d.y;
    this.addChildBody(e);
    b = {};
    b.posY = d.y;
    b.heiObj = d.getBoundingBox().height;
    return b;
  },
  onRateApp: function () {
    var a = "";
    if (cc.sys.os == cc.sys.OS_ANDROID) a = SETTING.URL_GG_PLAY_STORE;
    else if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_OSX)
      a = SETTING.URL_APPLE_STORE;
    logMessage("onRateApp: " + a);
    Util.setIsRatedApp(1);
    NativeInterface.doRateApp(a);
    this.countClose++;
    this.removeSelf();
  },
  onCloseClick: function () {
    this.countClose++;
    var a = this;
    showPopupConfirmWith(
      BkConstString.STR_INVITE_SUGGEST,
      "",
      function () {
        NativeInterface.navigateToMessenger();
        a.removeSelf();
      },
      null,
      function () {}
    );
  },
  removeSelf: function () {
    if (0 < this.countClose) {
      var a = Util.isRatedApp();
      logMessage("isR: " + a);
      a ||
        BkLogicManager.getLogic().doRateAppWithTypeAction(
          RATE_APP.CLIENT_CANCEL
        );
      this._super();
    } else this.onCloseClick();
  },
});
var CHAT_ICON_WH = 165,
  MAX_NUMBER_IMG_IN_ACTION = 10,
  TIME_PER_FRAME = 0.2;
BkChatEmoSprite = cc.SpriteBatchNode.extend({
  sprite: null,
  animFrames: null,
  numberImage: 0,
  numberRepeat: 0,
  ctor: function (a) {
    var b = a.iconTexture,
      d = a.iconName,
      e = a.nunberImage;
    cc.spriteFrameCache.addSpriteFrames(a.iconPlist, b);
    this.sprite = new BkSprite("#" + d + "_1.png");
    this._super(b);
    this.addChild(this.sprite);
    this.animFrames = [];
    this.numberImage = e;
    this.numberRepeat = Math.floor(MAX_NUMBER_IMG_IN_ACTION / e);
    2 > this.numberRepeat && 10 > this.numberImage && (this.numberRepeat = 2);
    0 == this.numberRepeat && (this.numberRepeat = 2);
    b = "";
    for (a = 1; a < e + 1; a++)
      (b = d + "_" + a + ".png"),
        (b = cc.spriteFrameCache.getSpriteFrame(b)),
        this.animFrames.push(b);
  },
  showEmo: function () {
    var a = new cc.Animation(this.animFrames, TIME_PER_FRAME);
    this.sprite.runAction(cc.animate(a).repeat(this.numberRepeat));
    var b = this;
    this.scheduleOnce(function () {
      b.getParent().clearEmotion();
    }, TIME_PER_FRAME * this.numberImage * this.numberRepeat);
  },
  showEmoForever: function () {
    var a = new cc.Animation(this.animFrames, TIME_PER_FRAME);
    this.sprite.runAction(cc.animate(a).repeatForever());
  },
  removeEmo: function () {
    this.removeFromParent();
  },
});
BkHeartSprite = BkSprite.extend({
  labelNumberHeart: null,
  labelCountDownTime: null,
  timeTickCount: -1,
  timeCount: -1,
  heartSp: null,
  isIngame: !1,
  numberHasBonus: 0,
  bnHeartWD: null,
  isInitCountDount: !1,
  ctor: function (a) {
    this.isIngame = a = void 0 === a ? !1 : a;
    this._super("#" + res_name.khu_vuc_heart);
    var b = EVENT_NAME.BTN_HEART_MAIN_SCREEN;
    a && (b = EVENT_NAME.BTN_HEART_INGAME);
    this.setOnlickListenner(function () {
      isWebPlatform() || isFBInstantGame()
        ? isFBInstantGame()
          ? BKFbAdsManager.showFBInstRewardedVideo()
          : new BkHeartPromotionWd(1).showWithParent()
        : ((BkGlobal.stateRequestGetSettingAds = GET_ADS_STATE.HEART_REQUEST),
          BkConnectionManager.getFullScreenAdsSetting());
      NativeInterface.logFirebaseEvent(b);
    });
    var d = res_name.heart,
      e = 30;
    !isWebPlatform() && a
      ? ((d = res_name.buy_butt), (e = 33))
      : this.setMouseOnHover();
    this.heartSp = new BkSprite("#" + d);
    this.heartSp.x = 0.56 * this.getContentSize().width;
    this.heartSp.y =
      this.getContentSize().height - this.heartSp.getContentSize().height / 2;
    this.addChild(this.heartSp);
    d = this.getStringNumberHeart();
    this.labelNumberHeart = new BkLabel(d, "", e, !0);
    this.labelNumberHeart.setTextColor(ZColor.TEXT_COLOR_NAME_AVATAR);
    this.labelNumberHeart.x = this.getContentSize().width / 2;
    a &&
      (this.labelNumberHeart.setTextColor(ZColor.TEXT_COLOR_NAME_BAN_BE),
      (this.labelNumberHeart.x = this.heartSp.x),
      isWebPlatform() &&
        (this.labelNumberHeart.x = this.getContentSize().width / 2));
    this.labelNumberHeart.y = this.heartSp.y;
    this.addChild(this.labelNumberHeart);
    a ||
      ((a = new BkSprite("#" + res_name.small_info_frame)),
      (a.x = this.getContentSize().width / 2),
      (a.y = 0.25 * this.getContentSize().height),
      (this.labelCountDownTime = new BkLabel("MAX", "", e)),
      this.labelCountDownTime.setTextColor(cc.color(251, 234, 180)),
      this.labelCountDownTime.setTextColor(cc.color.BLACK),
      (this.labelCountDownTime.y =
        this.heartSp.y -
        this.heartSp.getContentSize().height / 2 -
        0.4 * this.labelCountDownTime.getContentSize().height),
      (this.labelCountDownTime.x = a.x),
      this.addChild(this.labelCountDownTime),
      this.initDataForHeartSprite(),
      this.autoSendHeartRequest());
  },
  animateHeartSprite: function () {
    var a = this,
      b = 0.9 * this.getScale(),
      d = 1.1 * this.getScale();
    this.setScale(b);
    var d = cc.scaleTo(0.3, d),
      e = cc.callFunc(function () {
        a.setScale(b);
      }, this),
      d = cc
        .sequence(d, e, d.clone(), e.clone(), d.clone(), cc.delayTime(1))
        .repeatForever();
    this.runAction(d);
  },
  getStringNumberHeart: function () {
    var a = BkGlobal.UserInfo.getMoney();
    if (1e3 <= a) {
      var b = Math.floor(a / 1e3),
        a = Math.floor((a - 1e3 * b) / 100);
      return 0 < a ? b + "K" + a : b + "K";
    }
    return a;
  },
  initDataForHeartSprite: function () {
    if (-1 == BkGlobal.UserInfo.heartTimeReward) this.timeTickCount = -1;
    else {
      var a = BkTime.GetCurrentTime() / 1e3;
      this.timeTickCount = BkGlobal.UserInfo.heartTimeReward - a;
    }
    this.timeCount = this.timeTickCount;
    this.labelCountDownTime.setString(this.getStringCountDown());
    -1 != BkGlobal.UserInfo.heartTimeReward &&
      (this.removeCDHeart(),
      (this.isInitCountDount = !0),
      this.initCountDownTimeHeart());
  },
  autoSendHeartRequest: function () {
    -1 != BkGlobal.UserInfo.heartTimeReward &&
      BkTime.GetCurrentTime() / 1e3 >= BkGlobal.UserInfo.heartTimeReward &&
      BkLogicManager.getLogic().sendHeartRequest();
  },
  onTimeCountFinish: function () {
    logMessage("onTimeCountFinish -\x3e auto send heart request");
    this.removeCDHeart();
    BkLogicManager.getLogic().sendHeartRequest();
  },
  onTickCDHeart: function () {
    this.timeTickCount--;
    this.labelCountDownTime.setString(this.getStringCountDown());
    if (0 >= this.timeTickCount) this.onTimeCountFinish();
  },
  removeCDHeart: function () {
    this.isInitCountDount &&
      (this.unschedule(this.onTickCDHeart), (this.isInitCountDount = !1));
  },
  initCountDownTimeHeart: function () {
    this.schedule(this.onTickCDHeart, 1, this.timeCount);
  },
  getStringCountDown: function () {
    if (-1 == BkGlobal.UserInfo.heartTimeReward) return "";
    0 > this.timeTickCount && (this.timeTickCount = 0);
    return BkTime.formatSeconds(this.timeTickCount);
  },
  removeHeartWD: function () {
    null != this.bnHeartWD && this.bnHeartWD.removeSelf();
  },
  updateData: function (a, b) {
    b = void 0 === b ? -1 : b;
    logMessage("heartNumber: " + a + " - reason: " + b);
    if (0 >= a) this.onUpdateHeartSprite(a);
    else if (this.isIngame) this.onUpdateHeartSprite(a);
    else
      this.removeHeartWD(),
        (this.bnHeartWD = new BkBonusHeartWindow(a, this, b)),
        this.bnHeartWD.showWithParent();
  },
  onUpdateHeartSprite: function (a) {
    this.labelNumberHeart.setString(this.getStringNumberHeart());
    this.isIngame || this.initDataForHeartSprite();
    this.showAnimationUpdateHeart(a);
  },
  showAnimationUpdateHeart: function (a) {
    if (0 != a) {
      var b = new BkTextfieldChangeHeart(this, a);
      b.setScale(GAME_SCALE);
      var d = "",
        d =
          0 < a
            ? d + ("+" + convertStringToMoneyFormat(a, !0))
            : d + convertStringToMoneyFormat(a, !0);
      b.setContentText(d);
      b.doChangeMoney();
    }
  },
});
BkDailyTaskSprite = BkSprite.extend({
  countDownLabel: null,
  timeCount: 0,
  lbNVTT: null,
  spTrack: null,
  isInitCD: !1,
  tooltip: null,
  ctor: function () {
    this._super("#" + res_name.task);
    var a = this;
    this.drawUI();
    this.setOnlickListenner(function () {
      a.onClickDailyTaskSprite();
    });
    isWebPlatform() &&
      (this.initTaskTooltip(
        "Th\u1eafng " + BkGlobal.UserInfo.taskDutyGame + " v\u00e1n c\u1edd!"
      ),
      this.setMouseOnHover(
        function () {
          a.tooltip && a.tooltip.setVisible(!0);
        },
        function () {
          a.tooltip && a.tooltip.setVisible(!1);
        }
      ));
  },
  drawUI: function () {
    this.isInitCD && ((this.isInitCD = !1), this.unschedule(this.onTickCD));
    0 < this.getChildren().length && this.removeAllChildren(!0);
    this.removeAllChildren();
    var a = c.TEXT_FONT_SIZE_AVAR;
    isWebPlatform() && (a = 16);
    if (0 <= BkGlobal.UserInfo.taskWinGame) {
      0 > BkGlobal.UserInfo.taskDutyGame &&
        (logMessage("qua ngay dung lai last setting TaskDutyGame"),
        (BkGlobal.UserInfo.taskDutyGame = Util.getTaskDutyGame()));
      var b = new BkLabel("nhi\u1ec7m v\u1ee5", "", a);
      b.setTextColor(cc.color.BLACK);
      b.y = 0.63 * this.getContentSize().height + b.getContentSize().height / 2;
      b.x = 0.5 * this.getContentSize().width;
      var d = 0.7;
      if (isWebPlatform()) d = 1;
      else {
        var e = new BkSprite("#" + res_name.text_nhiemVu);
        e.x = b.x;
        e.y = 1 * this.getContentSize().height;
        this.addChild(e);
      }
      this.spTrack = new BkSprite("#" + res_name.task_thanh_tientrinh);
      this.spTrack.y =
        0.5 * this.getContentSize().height -
        0.5 * this.spTrack.getContentSize().height;
      this.spTrack.x = b.x;
      this.addChild(this.spTrack);
      var e = this.spTrack.x - this.spTrack.getContentSize().width * d * 0.36,
        f =
          (new BkSprite("#" + res_name.task_tientrinh).getContentSize().width *
            d *
            5 +
            12 -
            2 * (BkGlobal.UserInfo.taskDutyGame + 1)) /
          BkGlobal.UserInfo.taskDutyGame,
        b = this.spTrack.y + 1,
        g = BkGlobal.UserInfo.taskWinGame;
      g > BkGlobal.UserInfo.taskDutyGame &&
        (g = BkGlobal.UserInfo.taskDutyGame);
      for (var h = 0; h < g; h++) {
        var k = new BkSprite("#" + res_name.task_tientrinh);
        k.setScaleX(f / k.getContentSize().width);
        k.setScaleY(d);
        k.y = b;
        k.x = e + 0.5 * f + h * (f + 2);
        this.addChild(k);
      }
      a = new BkLabel(
        BkGlobal.UserInfo.taskWinGame + "/" + BkGlobal.UserInfo.taskDutyGame,
        "",
        a,
        !0
      );
      a.setTextColor(cc.color(251, 234, 180));
      a.y =
        b +
        this.spTrack.getContentSize().height * d * 0.5 +
        a.getContentSize().height / 2;
      a.x = this.spTrack.x;
      this.addChild(a);
      isWebPlatform()
        ? (a.y =
            this.spTrack.getContentSize().height / 2 -
            a.getContentSize().height / 2)
        : this.spTrack.setScale(d);
    } else
      (a = 28),
        (this.lbNVTT = new BkLabel("NV ti\u1ebfp theo", "", a)),
        this.lbNVTT.setTextColor(cc.color.BLACK),
        (this.lbNVTT.y =
          0.63 * this.getContentSize().height +
          this.lbNVTT.getContentSize().height / 2),
        (this.lbNVTT.x = 0.5 * this.getContentSize().width),
        isWebPlatform()
          ? ((a = 16),
            (this.spTrack = new BkSprite("#" + res_name.task_thanh_tientrinh)),
            (this.spTrack.y =
              0.5 * this.getContentSize().height -
              0.5 * this.spTrack.getContentSize().height),
            (this.spTrack.x = 0.5 * this.getContentSize().width),
            this.addChild(this.spTrack),
            this.spTrack.getContentSize())
          : ((d = new BkSprite("#" + res_name.text_NVTiepTheo)),
            (d.x = this.lbNVTT.x),
            (d.y = 1 * this.getContentSize().height),
            this.addChild(d)),
        (this.countDownLabel = new BkLabel("13 gi\u1edd 48 ph\u00fat", "", a)),
        this.countDownLabel.setTextColor(cc.color.BLACK),
        this.countDownLabel.setTextColor(ZColor.TEXT_COLOR_NAME_AVATAR),
        (this.countDownLabel.y = 0.5 * this.getContentSize().height),
        (this.countDownLabel.x = this.lbNVTT.x),
        isWebPlatform() &&
          (this.countDownLabel.setTextColor(cc.color.WHITE),
          (this.countDownLabel.y = this.spTrack.y)),
        this.addChild(this.countDownLabel),
        this.initCountDown();
  },
  onTickCD: function () {
    this.timeCount--;
    this.countDownLabel.setString(this.getStringCountDownHourMin());
    if (0 >= this.timeCount) this.onTimeCountFinish();
  },
  initCountDown: function () {
    var a =
      BkGlobal.UserInfo.taskStartTime -
      Math.floor(BkTime.GetCurrentTime() / 1e3);
    this.timeCount = a;
    this.countDownLabel.setString(this.getStringCountDownHourMin());
    this.schedule(this.onTickCD, 1, a);
  },
  onTimeCountFinish: function () {
    logMessage("hight light btn");
    this.unschedule(this.onTickCD);
  },
  getStringCountDownHourMin: function () {
    return BkTime.formatSeconds(this.timeCount);
  },
  guidleSp: null,
  lbGuidleSP: null,
  initGuidleTask: function () {
    if (!isWebPlatform() && null == this.guidleSp) {
      this.guidleSp = new BkSprite("#" + res_name.task_khung_noidung);
      this.guidleSp.x = 0.5 * this.getContentSize().width;
      this.guidleSp.y = 0.5 * -this.guidleSp.getContentSize().height;
      this.addChild(this.guidleSp);
      this.lbGuidleSP = new BkLabel(
        "Th\u1eafng " + BkGlobal.UserInfo.taskDutyGame + " v\u00e1n c\u1edd!",
        "",
        c.TEXT_FONT_SIZE_AVAR
      );
      this.lbGuidleSP.boundingWidth =
        0.9 * this.guidleSp.getContentSize().width;
      this.lbGuidleSP.setTextColor(cc.color(251, 234, 180));
      this.lbGuidleSP.setTextVerticalAlignment(
        cc.VERTICAL_TEXT_ALIGNMENT_CENTER
      );
      this.lbGuidleSP.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
      this.lbGuidleSP.x = this.guidleSp.x;
      this.lbGuidleSP.y = this.guidleSp.y;
      this.addChild(this.lbGuidleSP);
      var a = cc.fadeOut(1),
        b = cc.callFunc(this.removeGuidle, this),
        b = cc.sequence(cc.delayTime(3), a, b),
        a = a.clone();
      this.lbGuidleSP.runAction(cc.sequence(cc.delayTime(3), a));
      this.guidleSp.runAction(b);
    }
  },
  initTaskTooltip: function (a) {
    isWebPlatform() &&
      null == this.tooltip &&
      ((this.tooltip = new BkSprite("#" + res_name.task_khung_noidung)),
      (this.tooltip.x = 0.5 * this.getContentSize().width),
      (this.tooltip.y = 0.5 * -this.tooltip.getContentSize().height - 5),
      this.tooltip.setVisible(!1),
      this.addChild(this.tooltip),
      (this.lbGuidleSP = new BkLabel(a, "", 16)),
      (this.lbGuidleSP.boundingWidth = this.tooltip.getContentSize().width),
      this.lbGuidleSP.setTextColor(cc.color(251, 234, 180)),
      this.lbGuidleSP.setTextVerticalAlignment(
        cc.VERTICAL_TEXT_ALIGNMENT_CENTER
      ),
      this.lbGuidleSP.setTextHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER),
      (this.lbGuidleSP.x = this.tooltip.getContentSize().width / 2),
      (this.lbGuidleSP.y = this.tooltip.getContentSize().height / 2 - 2),
      this.tooltip.addChild(this.lbGuidleSP));
  },
  removeGuidle: function () {
    this.guidleSp.removeFromParent();
    this.lbGuidleSP.removeFromParent();
    this.lbGuidleSP = this.guidleSp = null;
  },
  onClickDailyTaskSprite: function () {
    logMessage(
      "onClickDailyTaskSprite " +
        BkGlobal.UserInfo.taskWinGame +
        " - " +
        BkGlobal.UserInfo.taskDutyGame
    );
    if (0 <= BkGlobal.UserInfo.taskWinGame)
      if (BkGlobal.UserInfo.taskWinGame >= BkGlobal.UserInfo.taskDutyGame) {
        logMessage("send packet reward");
        var a = new BkPacket();
        a.CreatePacketWithOnlyType(c.NETWORK_DAILY_TASK_REQUEST);
        BkConnectionManager.send(a);
      } else
        0 <= BkGlobal.UserInfo.taskWinGame &&
          (logMessage(" ban phia hoan thanh nhiem vu de nhan thuong"),
          this.initGuidleTask());
    else
      logMessage("ban da hoan thanh nhiem vu hom nay roi"),
        showToastMessage(
          "B\u1ea1n \u0111\u00e3 ho\u00e0n th\u00e0nh nhi\u1ec7m v\u1ee5 c\u1ee7a ng\u00e0y h\u00f4m nay!",
          cc.winSize.width / 2,
          this.y - this.getBoundingBox().height
        );
  },
  updateData: function () {
    this.drawUI();
  },
});
BkSettingSprite = BkSprite.extend({
  spLKFB: null,
  spVibrate: null,
  iconVibrate: null,
  lbVibrate: null,
  spSound: null,
  iconSound: null,
  lbSound: null,
  spNhacNen: null,
  iconNhacNen: null,
  lbNhacNen: null,
  spMail: null,
  spGuidle: null,
  spPolicy: null,
  myPr: null,
  ctor: function (a) {
    var b = isWebPlatform()
      ? res_name.setting_frame_top
      : res_name.setting_frame;
    isWebPlatform() || BkGlobal.isConnectedFB || (b = res_name.setting_frame_2);
    this._super("#" + b);
    this.myPr = a;
    var d = this,
      e = 0.04 * this.getContentSize().height,
      b = 0.035 * this.getContentSize().height;
    a = cc.color(251, 234, 180);
    var f = 0;
    if (isWebPlatform())
      (this.spLKFB = new BkSprite("#" + res_name.khu_vuc_item_setting)),
        (this.spLKFB.x = this.getContentSize().width / 2),
        (this.spLKFB.y =
          this.getContentSize().height -
          this.spLKFB.getContentSize().height / 2 -
          e),
        (g = 0.15 * this.spLKFB.getContentSize().width),
        (f = new BkSprite("#" + res_name.setting_fb_butt)),
        (f.x = g),
        (f.y = this.spLKFB.getContentSize().height / 2),
        this.spLKFB.addChild(f),
        (h = new BkLabel("Ph\u00f3ng to", "", 25)),
        (h.x =
          f.x +
          f.getContentSize().width / 2 +
          h.getContentSize().width / 2 +
          10),
        (h.y = f.y),
        h.setTextColor(a),
        this.spLKFB.addChild(h),
        this.addChild(this.spLKFB),
        this.spLKFB.setOnlickListenner(function () {
          cc.screen.fullScreen()
            ? exitFullScreen()
            : makeFullScreen(function () {
                cc.screen.fullScreen()
                  ? h.setString("Thu nh\u1ecf")
                  : h.setString("Ph\u00f3ng to");
              }, d);
        }),
        (f = this.spLKFB.y - b);
    else {
      this.spLKFB = new BkSprite("#" + res_name.khu_vuc_item_setting);
      this.spLKFB.x = this.getContentSize().width / 2;
      this.spLKFB.y =
        this.getContentSize().height -
        this.spLKFB.getContentSize().height / 2 -
        e;
      var g = 0.15 * this.spLKFB.getContentSize().width,
        f = new BkSprite("#" + res_name.setting_fb_butt);
      f.x = g;
      f.y = this.spLKFB.getContentSize().height / 2;
      this.spLKFB.addChild(f);
      var h = new BkLabel("Li\u00ean k\u1ebft Facebook", "", 25);
      h.x =
        f.x + f.getContentSize().width / 2 + h.getContentSize().width / 2 + 10;
      h.y = f.y;
      h.setTextColor(a);
      this.spLKFB.addChild(h);
      this.addChild(this.spLKFB);
      this.spLKFB.setOnlickListenner(function () {
        logMessage("lkfb click");
        d.onHideSetting();
        logMessage("BkGlobal.isConnectedFB: " + BkGlobal.isConnectedFB);
        BkGlobal.isConnectedFB
          ? (logMessage("da link fb roi"),
            showPopupMessageWith(
              "T\u00e0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\u00e3 \u0111\u01b0\u1ee3c li\u00ean k\u1ebft Facebook r\u1ed3i!",
              "",
              null
            ))
          : NativeInterface.doLoginFB(FB_CS.STATE_FB_LINK_USER);
      });
      f = new BkSprite("#" + res_name.setting_line);
      f.x = this.getContentSize().width / 2;
      f.y = this.spLKFB.y - this.spLKFB.getContentSize().height / 2 - b;
      this.addChild(f);
      BkGlobal.isConnectedFB &&
        (this.spLKFB.setVisible(!1),
        this.spLKFB.setOnlickListenner(null),
        f.setVisible(!1),
        (f.y = this.getContentSize().height - e / 2));
      this.spVibrate = new BkSprite("#" + res_name.khu_vuc_item_setting);
      this.spVibrate.x = this.getContentSize().width / 2;
      this.spVibrate.y =
        f.y - 2 * b - this.spVibrate.getContentSize().height / 2;
      e = Util.getVibrateSetting();
      logMessage("isVibrateOn: " + e);
      this.iconVibrate = new BkSprite(this.getResNameIconVibrate(e));
      this.iconVibrate.x = g;
      this.iconVibrate.y = this.spVibrate.getContentSize().height / 2;
      this.spVibrate.addChild(this.iconVibrate);
      this.lbVibrate = new BkLabel(this.getTextVibrate(e), "", 25);
      this.lbVibrate.x =
        this.iconVibrate.x +
        this.iconVibrate.getContentSize().width / 2 +
        this.lbVibrate.getContentSize().width / 2 +
        10;
      this.lbVibrate.y =
        this.iconVibrate.y + 0.1 * this.iconVibrate.getContentSize().height;
      this.lbVibrate.setTextColor(a);
      this.spVibrate.addChild(this.lbVibrate);
      this.addChild(this.spVibrate);
      this.spVibrate.setOnlickListenner(function () {
        d.onVibrateClick();
      });
      this.spSound = new BkSprite("#" + res_name.khu_vuc_item_setting);
      this.spSound.x = this.getContentSize().width / 2;
      this.spSound.y =
        this.spVibrate.y -
        this.spVibrate.getContentSize().height / 2 -
        this.spSound.getContentSize().height / 2 -
        1.5 * b;
      e = Util.getSoundSetting();
      logMessage("isSoundOn: " + e);
      this.iconSound = new BkSprite(Util.getResNameIconSound(e));
      this.iconSound.x = g;
      this.iconSound.y = this.spSound.getContentSize().height / 2;
      this.spSound.addChild(this.iconSound);
      this.lbSound = new BkLabel(this.getTextSound(e), "", 25);
      this.lbSound.x =
        this.iconSound.x +
        this.iconSound.getContentSize().width / 2 +
        this.lbSound.getContentSize().width / 2 +
        10;
      this.lbSound.y =
        this.iconSound.y + 0.1 * this.iconSound.getContentSize().height;
      this.lbSound.setTextColor(a);
      this.spSound.addChild(this.lbSound);
      this.addChild(this.spSound);
      this.spSound.setOnlickListenner(function () {
        d.onSoundClick();
      });
      this.spNhacNen = new BkSprite("#" + res_name.khu_vuc_item_setting);
      this.spNhacNen.x = this.getContentSize().width / 2;
      this.spNhacNen.y =
        this.spSound.y -
        this.spSound.getContentSize().height / 2 -
        this.spNhacNen.getContentSize().height / 2 -
        1.5 * b;
      e = Util.getNhacNenSetting();
      logMessage("isNhacNenOn: " + e);
      this.iconNhacNen = new BkSprite(Util.getResNameIconNhacNen(e));
      this.iconNhacNen.x = g;
      this.iconNhacNen.y = this.spNhacNen.getContentSize().height / 2;
      this.spNhacNen.addChild(this.iconNhacNen);
      this.lbNhacNen = new BkLabel(this.getTextNhacNen(e), "", 25);
      this.lbNhacNen.x =
        this.iconNhacNen.x +
        this.iconNhacNen.getContentSize().width / 2 +
        this.lbNhacNen.getContentSize().width / 2 +
        10;
      this.lbNhacNen.y =
        this.iconNhacNen.y + 0.1 * this.iconNhacNen.getContentSize().height;
      this.lbNhacNen.setTextColor(a);
      this.spNhacNen.addChild(this.lbNhacNen);
      this.addChild(this.spNhacNen);
      this.spNhacNen.setOnlickListenner(function () {
        d.onNhacNenClick();
      });
      e = new BkSprite("#" + res_name.setting_line);
      e.x = this.getContentSize().width / 2;
      e.y = this.spNhacNen.y - this.spNhacNen.getContentSize().height / 2 - b;
      this.addChild(e);
      f = e.y;
    }
    this.spMail = new BkSprite("#" + res_name.khu_vuc_item_setting);
    this.spMail.x = this.getContentSize().width / 2;
    this.spMail.y = f - 1.1 * b - this.spMail.getContentSize().height / 2;
    e = new BkSprite("#" + res_name.mail_butt);
    e.x = g;
    e.y = this.spMail.getContentSize().height / 2;
    this.spMail.addChild(e);
    g = new BkLabel("Th\u01b0 g\u00f3p \u00fd", "", 25);
    g.x =
      e.x + e.getContentSize().width / 2 + g.getContentSize().width / 2 + 10;
    g.y = e.y;
    g.setTextColor(a);
    this.spMail.addChild(g);
    this.addChild(this.spMail);
    this.spMail.setOnlickListenner(function () {
      d.onEmailClick();
    });
    g = new BkSprite("#" + res_name.setting_line);
    g.x = this.getContentSize().width / 2;
    g.y = this.spMail.y - this.spMail.getContentSize().height / 2 - 1.1 * b;
    this.addChild(g);
    this.spGuidle = new BkSprite("#" + res_name.khu_vuc_item_setting);
    this.spGuidle.x = this.getContentSize().width / 2;
    this.spGuidle.y = g.y - b - this.spGuidle.getContentSize().height / 2;
    g = new BkLabel(
      "H\u01b0\u1edbng d\u1eabn v\u00e0 lu\u1eadt ch\u01a1i",
      "",
      25
    );
    g.x = this.spGuidle.getContentSize().width / 2;
    g.y = this.spGuidle.getContentSize().height / 2;
    g.setTextColor(a);
    this.spGuidle.addChild(g);
    this.addChild(this.spGuidle);
    this.spGuidle.setOnlickListenner(function () {
      d.onGuildleClick();
    });
    this.spPolicy = new BkSprite("#" + res_name.khu_vuc_item_setting);
    this.spPolicy.x = this.getContentSize().width / 2;
    this.spPolicy.y =
      this.spGuidle.y -
      0.5 * b -
      this.spGuidle.getContentSize().height / 2 -
      this.spPolicy.getContentSize().height / 2;
    b = new BkLabel("Ch\u00ednh s\u00e1ch", "", 25);
    b.x = this.spPolicy.getContentSize().width / 2;
    b.y = this.spPolicy.getContentSize().height / 2;
    b.setTextColor(a);
    this.spPolicy.addChild(b);
    this.addChild(this.spPolicy);
    this.spPolicy.setOnlickListenner(function () {
      d.onPolicyClick();
    });
  },
  onPolicyClick: function () {
    logMessage("onPolicyClick -\x3e openWebview Policy");
    Util.openWebview(
      SETTING.URL_DOMAIN_SETTING + "quy-dinh",
      "Ch\u00ednh s\u00e1ch"
    );
    this.onHideSetting();
  },
  onGuildleClick: function () {
    logMessage("onGuildleClick  -\x3e openWebview guildle");
    Util.openWebview(
      SETTING.URL_DOMAIN_SETTING + "huong-dan-chung",
      "H\u01b0\u1edbng d\u1eabn v\u00e0 lu\u1eadt ch\u01a1i"
    );
    this.onHideSetting();
  },
  onEmailClick: function () {
    logMessage("onEmailClick -\x3e send mail native");
    isWebPlatform() ||
      (NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_MESSENGER),
      NativeInterface.navigateToMessenger(),
      this.onHideSetting());
  },
  onNhacNenClick: function () {
    logMessage("onNhacNenClick");
    var a = !Util.getNhacNenSetting(),
      b = Util.getResNameIconNhacNen(a),
      b = b.substr(1, b.length - 1),
      b = cc.spriteFrameCache.getSpriteFrame(b);
    this.iconNhacNen.setSpriteFrame(b);
    this.lbNhacNen.setString(this.getTextNhacNen(a));
    Util.onNhacNenStateChange(a);
  },
  onSoundClick: function () {
    logMessage("onSoundClick");
    var a = !Util.getSoundSetting(),
      b = Util.getResNameIconSound(a),
      b = b.substr(1, b.length - 1),
      b = cc.spriteFrameCache.getSpriteFrame(b);
    this.iconSound.setSpriteFrame(b);
    this.lbSound.setString(this.getTextSound(a));
    Util.setSoundSetting(a);
  },
  onVibrateClick: function () {
    logMessage("onVibrateClick");
    var a = !Util.getVibrateSetting(),
      b = this.getResNameIconVibrate(a),
      b = b.substr(1, b.length - 1),
      b = cc.spriteFrameCache.getSpriteFrame(b);
    this.iconVibrate.setSpriteFrame(b);
    this.lbVibrate.setString(this.getTextVibrate(a));
    Util.setVibrateSetting(a);
  },
  getResNameIconVibrate: function (a) {
    return a
      ? "#" + res_name.vibration_butt_on
      : "#" + res_name.vibration_butt_off;
  },
  getTextNhacNen: function (a) {
    return a ? "B\u1eadt nh\u1ea1c n\u1ec1n" : "T\u1eaft nh\u1ea1c n\u1ec1n";
  },
  getTextVibrate: function (a) {
    return a ? "B\u1eadt rung" : "T\u1eaft rung";
  },
  getTextSound: function (a) {
    return a ? "B\u1eadt ti\u1ebfng" : "T\u1eaft ti\u1ebfng";
  },
  onHideSetting: function () {
    this.myPr && this.myPr.hideSettingLayer();
  },
  addClickEvent: function () {
    this.setOnlickListenner(function () {});
  },
});
BkSettingLayer = BkBaseLayer.extend({
  settingSprite: null,
  bgSettingLayer: null,
  clickEvetBG: null,
  crState: 0,
  stBtn: null,
  ctor: function (a) {
    this._super();
    this.bgSettingLayer = new BkSprite(res.main_screen_background);
    this.bgSettingLayer.scaleX =
      cc.winSize.width / this.bgSettingLayer.getContentSize().width;
    this.bgSettingLayer.scaleY =
      cc.winSize.height / this.bgSettingLayer.getContentSize().height;
    this.bgSettingLayer.setOpacity(0);
    this.bgSettingLayer.x = cc.winSize.width / 2;
    this.bgSettingLayer.y = cc.winSize.height / 2;
    this.addChild(this.bgSettingLayer);
    this.stBtn = a;
  },
  initSettingSprite: function () {
    this.removeSettingSprite();
    this.settingSprite = new BkSettingSprite(this);
    this.settingSprite.setScale(GAME_SCALE);
    var a = this.stBtn.x,
      b =
        this.stBtn.y +
        this.stBtn.getBoundingBox().height / 2 +
        this.settingSprite.getBoundingBox().height / 2;
    isWebPlatform() &&
      ((a = cc.winSize.width - this.settingSprite.getContentSize().width / 2),
      (b =
        this.stBtn.y -
        this.stBtn.getBoundingBox().height / 2 -
        this.settingSprite.getBoundingBox().height / 2));
    this.settingSprite.x = a;
    this.settingSprite.y = b;
    this.addChild(this.settingSprite);
  },
  removeSettingSprite: function () {
    null != this.settingSprite &&
      (this.settingSprite.removeFromParent(), (this.settingSprite = null));
  },
  addClickEventBG: function () {
    var a = this,
      b = !1;
    this.clickEvetBG = this.bgSettingLayer.createTouchEvent(
      function (d, e) {
        b = !1;
        var f = d.getLocation(),
          g = a.settingSprite.x - a.settingSprite.getBoundingBox().width / 2,
          h = a.settingSprite.y - a.settingSprite.getBoundingBox().height / 2,
          g = a.convertToWorldSpace(cc.p(g, h)),
          h = a.settingSprite.getBoundingBox().width,
          k = a.settingSprite.getBoundingBox().height,
          g = cc.rect(g.x, g.y, h, k);
        return cc.rectContainsPoint(g, f) ? !1 : (b = !0);
      },
      null,
      function (d, e) {
        b && a.hideSettingLayer();
      }
    );
    cc.eventManager.addListener(this.clickEvetBG, this.bgSettingLayer);
  },
  removeClickEventBG: function () {
    null != this.clickEvetBG &&
      cc.eventManager.removeListener(this.clickEvetBG);
  },
  hideSettingLayer: function () {
    this.setVisible(!1);
    this.removeSettingSprite();
    this.removeClickEventBG();
    this.crState = 0;
  },
  showSettingLayer: function () {
    this.crState = 1;
    this.initSettingSprite();
    this.addClickEventBG();
    this.setVisible(!0);
    this.settingSprite.addClickEvent();
  },
  onStateChangeSettingLayer: function () {
    0 == this.crState ? this.showSettingLayer() : this.hideSettingLayer();
  },
});
BkChessAvatar = BkSprite.extend({
  lbName: null,
  lbEloCT: null,
  lbEloCU: null,
  btnEditName: null,
  rankPlayer: null,
  ctor: function () {
    this._super("#" + res_name.khu_vuc_avatar);
    var a = new BkSprite("#" + res_name.avt_frame_bg);
    this.addChild(a);
    var b = new BkSprite("#" + res_name.avt_frame);
    this.addChild(b);
    var d = BkGlobal.UserInfo.getAvatarId(),
      d = new BkSpriteLoader(d, "#" + res_name.default_Avatar),
      e = 0.84 * a.getContentSize().height;
    d.setScale(e / d.getContentSize().height);
    d = BkAvartarImg.createClipNodeCircle(d, e);
    this.addChild(d);
    e = BkGlobal.UserInfo.getEloCoTuong();
    e < BkGlobal.UserInfo.getEloCoUp() && (e = BkGlobal.UserInfo.getEloCoUp());
    this.rankPlayer = Util.getRankSprite(e);
    this.rankPlayer.x = this.rankPlayer.getContentSize().width / 2;
    this.rankPlayer.y = this.rankPlayer.getContentSize().height / 2;
    this.addChild(this.rankPlayer);
    a.x = this.rankPlayer.x;
    a.y = this.getContentSize().height - a.getContentSize().height / 2;
    b.x = a.x;
    b.y = a.y;
    d.x = a.x;
    d.y = a.y;
    var f = this;
    isWebPlatform() && a.setMouseOnHover();
    a.setOnlickListenner(function () {
      Util.isResLoading(f.onClickAvatar) ||
        (1e3 > BkTime.GetCurrentTime() - a.lastTimeClick
          ? logMessage("click 2 lan trong 1 sec -\x3e don't process action")
          : ((a.lastTimeClick = BkTime.GetCurrentTime()), f.onClickAvatar()));
    });
    var g = this.getDeltaYAvatarName(),
      b = new BkSprite("#" + res_name.name_frame);
    b.x = this.getContentSize().width - b.getContentSize().width / 2;
    b.y = 0.65 * this.getContentSize().height + g;
    this.addChild(b);
    var h = 0.05 * this.getContentSize().width,
      d = cc.color(251, 234, 180),
      k = Util.trimName(BkGlobal.UserInfo.userName, 10),
      e = c.TEXT_FONT_SIZE_AVAR,
      m = 0.01 * this.getContentSize().height;
    this.lbName = new BkLabel(k, "", e);
    this.lbName.x =
      b.x -
      0.5 * b.getContentSize().width +
      this.lbName.getContentSize().width / 2 +
      h;
    this.lbName.y = b.y + 0;
    this.lbName.setTextColor(d);
    this.addChild(this.lbName);
    h = new BkSprite("#" + res_name.small_info_frame);
    h.x = this.getContentSize().width - h.getContentSize().width / 2;
    h.y = 0.35 * this.getContentSize().height + g;
    this.addChild(h);
    g = new BkSprite("#" + res_name.elo_CU);
    g.x = h.x - 0.5 * h.getContentSize().width + g.getContentSize().width / 2;
    g.y = h.y - m;
    this.addChild(g);
    this.lbEloCU = new BkLabel(BkGlobal.UserInfo.eloCoUp, "", e);
    this.lbEloCU.x =
      g.x +
      g.getContentSize().width / 2 +
      this.lbEloCU.getContentSize().width / 2;
    this.lbEloCU.y = h.y + 0;
    this.lbEloCU.setTextColor(d);
    this.addChild(this.lbEloCU);
    g = new BkSprite("#" + res_name.small_info_frame);
    g.x = b.x - b.getContentSize().width / 2 + g.getContentSize().width / 2;
    g.y = h.y;
    this.addChild(g);
    k = new BkSprite("#" + res_name.elo_CT);
    k.x = g.x - 0.5 * g.getContentSize().width + k.getContentSize().width / 2;
    k.y = g.y - m;
    this.addChild(k);
    this.lbEloCT = new BkLabel(BkGlobal.UserInfo.eloCoTuong, "", e);
    this.lbEloCT.x =
      k.x +
      k.getContentSize().width / 2 +
      this.lbEloCT.getContentSize().width / 2;
    this.lbEloCT.y = h.y + 0;
    this.lbEloCT.setTextColor(d);
    this.addChild(this.lbEloCT);
    BkGlobal.isReanamable &&
      ((this.btnEditName = createBkButtonPlist(
        res_name.change_name,
        res_name.change_name,
        res_name.change_name,
        res_name.change_name
      )),
      (this.btnEditName.x =
        b.x +
        b.getContentSize().width / 2 -
        0.3 * this.btnEditName.getContentSize().width),
      (this.btnEditName.y = b.y),
      this.addChild(this.btnEditName),
      this.btnEditName.addClickEventListener(function () {
        logMessage("btnEditProfile click show setup rename");
        Util.isResLoading(f.onClickPen) ||
          (NativeInterface.logFirebaseEvent(EVENT_NAME.BTN_EDIT_NAME_PROFILE),
          f.onClickPen());
      }));
  },
  onClickPen: function () {
    var a = Util.getCurrentLayer(),
      b = new BkRenameWindow();
    b.setParentWindow(a);
    b.showWithParent();
  },
  onClickAvatar: function () {
    var a = Util.getCurrentLayer(),
      b = new BkPlayerInfo(BkGlobal.UserInfo.userName);
    b.setParentWindow(a);
    b.showWithParent();
  },
  updateAvatar: function () {
    logMessage("updateAvatar BkChessAvatar");
    null != this.lbName &&
      this.lbName.setString(Util.trimName(BkGlobal.UserInfo.userName, 10));
    null != this.btnEditName &&
      (BkGlobal.isReanamable
        ? this.btnEditName.setVisible(!0)
        : this.btnEditName.setVisible(!1));
  },
  getDeltaYAvatarName: function () {
    return 0.1 * this.getContentSize().height;
  },
});
BkIngameMenu = BkBaseLayer.extend({
  menuSprite: null,
  bgMenuLayer: null,
  clickEvetBG: null,
  crState: 0,
  menuBtn: null,
  btnThoat: null,
  btnCauHoa: null,
  btnXinThua: null,
  btnBatNhac: null,
  btnBatSound: null,
  ctor: function (a) {
    this._super();
    this.bgMenuLayer = new BkSprite(res.main_screen_background);
    this.bgMenuLayer.scaleX =
      cc.winSize.width / this.bgMenuLayer.getContentSize().width;
    this.bgMenuLayer.scaleY =
      cc.winSize.height / this.bgMenuLayer.getContentSize().height;
    this.bgMenuLayer.setOpacity(0);
    this.bgMenuLayer.x = cc.winSize.width / 2;
    this.bgMenuLayer.y = cc.winSize.height / 2;
    this.addChild(this.bgMenuLayer);
    this.menuBtn = a;
  },
  isViewer: function () {
    var a = BkLogicManager.getInGameLogic().getMyClientState();
    return a && a.isObserver ? !0 : !1;
  },
  initMenuButton: function () {
    this.removeMenuSprite();
    var a = this.isViewer(),
      b = res_name.menu_frame;
    a && (b = res_name.menu_frame_ig_small);
    this.menuSprite = new BkSprite("#" + b);
    this.menuSprite.setScale(GAME_SCALE);
    this.menuSprite.x =
      this.menuBtn.x -
      this.menuBtn.getBoundingBox().width / 2 +
      this.menuSprite.getBoundingBox().width / 2;
    this.menuSprite.y =
      this.menuBtn.y +
      this.menuBtn.getBoundingBox().height / 2 +
      this.menuSprite.getBoundingBox().height / 2;
    this.addChild(this.menuSprite);
    var d = this,
      b = 0,
      e = 0.5 * this.menuSprite.getContentSize().width,
      f = 0.55 * this.menuSprite.getContentSize().height,
      g = 0,
      h = 0;
    isFBInstantGame() && (h = 24);
    a
      ? ((b = 0.3 * this.menuSprite.getContentSize().width - h), (g = e - b))
      : ((b = 0.18 * this.menuSprite.getContentSize().width), (g = e - 2 * b));
    this.btnThoat = new BkButton(
      res_name.out_butt,
      res_name.out_butt_press,
      res_name.out_butt,
      res_name.out_butt,
      ccui.Widget.PLIST_TEXTURE
    );
    this.btnThoat.x = g;
    this.btnThoat.y = f;
    this.menuSprite.addChild(this.btnThoat);
    this.btnThoat.addClickEventListener(function () {
      BkLogicManager.getInGameLogic().processLeaveTableRequest();
    });
    a ||
      ((this.btnCauHoa = new BkButton(
        res_name.cauhoa_butt,
        res_name.cauhoa_butt_press,
        res_name.cauhoa_butt_disable,
        res_name.cauhoa_butt,
        ccui.Widget.PLIST_TEXTURE
      )),
      (this.btnCauHoa.x = g + b + h),
      (this.btnCauHoa.y = f),
      this.menuSprite.addChild(this.btnCauHoa),
      (this.btnXinThua = new BkButton(
        res_name.xinthua_butt,
        res_name.xinthua_butt_press,
        res_name.xinthua_butt_disable,
        res_name.xinthua_butt,
        ccui.Widget.PLIST_TEXTURE
      )),
      (this.btnXinThua.x = g + 2 * b + 2 * h),
      (this.btnXinThua.y = f),
      this.menuSprite.addChild(this.btnXinThua),
      this.btnCauHoa.addClickEventListener(function () {
        d.onClickBtnOfferDraw();
      }),
      this.btnXinThua.addClickEventListener(function () {
        d.onClickBtnSurrender();
      }),
      this.setEnableBtnCauHoaXinThua());
    isFBInstantGame() ||
      ((e = Util.getNhacNenSetting()),
      (this.btnBatNhac = new BkSprite("#" + this.getNameResNhacNenSetting(e))),
      (this.btnBatNhac.x = g + 3 * b),
      a && (this.btnBatNhac.x = g + b),
      (this.btnBatNhac.y = f),
      this.menuSprite.addChild(this.btnBatNhac),
      this.btnBatNhac.setOnlickListenner(function () {
        d.onClickNhacNenBut();
      }));
    e = Util.getSoundSetting();
    this.btnBatSound = new BkSprite("#" + this.getNameResSoundSetting(e));
    this.btnBatSound.x = g + 4 * b;
    a && (this.btnBatSound.x = g + 2 * b);
    this.btnBatSound.y = f;
    this.menuSprite.addChild(this.btnBatSound);
    this.btnBatSound.setOnlickListenner(function () {
      d.onClickSoundBut();
    });
  },
  getNameResSoundSetting: function (a) {
    var b = res_name.sound_off_ig_butt;
    a && (b = res_name.sound_on_ig_butt);
    return b;
  },
  onClickSoundBut: function () {
    logMessage("onClickSoundBut");
    var a = !Util.getSoundSetting(),
      b = this.getNameResSoundSetting(a),
      b = cc.spriteFrameCache.getSpriteFrame(b);
    this.btnBatSound.setSpriteFrame(b);
    Util.setSoundSetting(a);
  },
  getNameResNhacNenSetting: function (a) {
    var b = res_name.music_off_ig_butt;
    a && (b = res_name.music_on_ig_butt);
    return b;
  },
  onClickNhacNenBut: function () {
    var a = !Util.getNhacNenSetting(),
      b = this.getNameResNhacNenSetting(a),
      b = cc.spriteFrameCache.getSpriteFrame(b);
    this.btnBatNhac.setSpriteFrame(b);
    Util.onNhacNenStateChange(a);
  },
  setEnableBtnCauHoaXinThua: function () {
    BkLogicManager.getInGameLogic().isInGameProgress()
      ? (logMessage("trong van choi -\x3e khong disable"),
        this.setEnableCauHoaButton(!0),
        this.setEnableXinthuaButton(!0))
      : (this.setEnableCauHoaButton(!1), this.setEnableXinthuaButton(!1));
  },
  setEnableCauHoaButton: function (a) {
    this.btnCauHoa.setEnableButton(a);
  },
  setEnableXinthuaButton: function (a) {
    this.btnXinThua.setEnableButton(a);
  },
  onClickBtnSurrender: function () {
    this.onStateChangeMenuLayer();
    var a = this.getParent();
    if (a && a instanceof BkChessBaseIngameLayer) a.onClickBtnSurrender();
  },
  onClickBtnOfferDraw: function () {
    this.onStateChangeMenuLayer();
    var a = this.getParent();
    if (a && a instanceof BkChessBaseIngameLayer) a.onClickBtnOfferDraw();
  },
  addClickEventBG: function () {
    var a = this,
      b = !1;
    this.clickEvetBG = this.bgMenuLayer.createTouchEvent(
      function (d, e) {
        b = !1;
        var f = d.getLocation(),
          g = a.menuSprite.x - a.menuSprite.getBoundingBox().width / 2,
          h = a.menuSprite.y - a.menuSprite.getBoundingBox().height / 2,
          g = a.convertToWorldSpace(cc.p(g, h)),
          h = a.menuSprite.getBoundingBox().width,
          k = a.menuSprite.getBoundingBox().height,
          g = cc.rect(g.x, g.y, h, k);
        return cc.rectContainsPoint(g, f) ? !1 : (b = !0);
      },
      null,
      function (d, e) {
        b && a.hideMenuLayer();
      }
    );
    cc.eventManager.addListener(this.clickEvetBG, this.bgMenuLayer);
  },
  removeClickEventBG: function () {
    null != this.clickEvetBG &&
      cc.eventManager.removeListener(this.clickEvetBG);
  },
  removeMenuSprite: function () {
    null != this.menuSprite &&
      (this.menuSprite.removeFromParent(), (this.menuSprite = null));
  },
  hideMenuLayer: function () {
    this.setVisible(!1);
    this.removeMenuSprite();
    this.removeClickEventBG();
    this.crState = 0;
  },
  showMenuLayer: function () {
    this.crState = 1;
    this.initMenuButton();
    this.addClickEventBG();
    this.setVisible(!0);
  },
  onStateChangeMenuLayer: function () {
    0 == this.crState ? this.showMenuLayer() : this.hideMenuLayer();
  },
});
BkHourGlass = cc.SpriteBatchNode.extend({
  sprite: null,
  animFrames: null,
  spriteFrameName1: null,
  ctor: function () {
    cc.spriteFrameCache.addSpriteFrames(
      res.hour_glass_plist_sps,
      res.hour_glass_png_sps
    );
    this.spriteFrameName1 = "frame_00.png";
    this.sprite = new BkSprite("#" + this.spriteFrameName1);
    this._super(res.hour_glass_png_sps);
    this.addChild(this.sprite);
    this.animFrames = [];
    for (var a = "", b = 0; 33 > b; b++)
      (a = 10 > b ? "frame_0" + b + ".png" : "frame_" + b + ".png"),
        (a = cc.spriteFrameCache.getSpriteFrame(a)),
        this.animFrames.push(a);
  },
  foreverAction: null,
  showActionHourglass: function () {
    var a = new cc.Animation(this.animFrames, 0.04);
    this.foreverAction = cc.animate(a).repeatForever();
    this.sprite.runAction(this.foreverAction);
  },
  stopActionHourglass: function () {
    null != this.foreverAction && this.sprite.stopAction(this.foreverAction);
    var a = cc.spriteFrameCache.getSpriteFrame(this.spriteFrameName1);
    this.sprite.setSpriteFrame(a);
  },
  removeHourglass: function () {
    this.removeFromParent();
  },
  getFrameSizehourglass: function () {
    return this.sprite.getContentSize();
  },
});
BkChessRankSprite = BkSprite.extend({
  elo: 0,
  deSprite: null,
  starSprite: null,
  ctor: function (a) {
    this._super("#" + res_name.khu_vuc_rank);
    this.elo = a;
    var b = Util.getResourceNameDeSprite(a);
    a = Util.getResourceNameStarSprite(a);
    this.deSprite = new BkSprite("#" + b);
    this.deSprite.x = this.getContentSize().width / 2;
    this.deSprite.y = this.deSprite.getContentSize().height / 2;
    this.addChild(this.deSprite);
    this.starSprite = new BkSprite("#" + a);
    this.starSprite.x = this.getContentSize().width / 2;
    this.starSprite.y = this.starSprite.getContentSize().height / 2;
    this.addChild(this.starSprite);
  },
  updateSprite: function (a) {
    var b = Util.getEloRankType(this.elo),
      d = Util.getStarRankType(this.elo),
      e = Util.getEloRankType(a),
      f = Util.getStarRankType(a);
    this.elo = a;
    b != e &&
      ((b = Util.getResourceNameDeSprite(a)),
      (b = cc.spriteFrameCache.getSpriteFrame(b)),
      this.deSprite.setSpriteFrame(b));
    d != f &&
      ((a = Util.getResourceNameStarSprite(a)),
      (a = cc.spriteFrameCache.getSpriteFrame(a)),
      this.starSprite.setSpriteFrame(a));
  },
});
var MyBK = MyBK || {},
  _initGlobalVar = function () {
    MyBK.MyGlobal = {};
    MyBK.MyGlobal.Connection = BkConnectionManager;
    MyBK.MyGlobal.GlobalVar = BkGlobal;
  };
cc.containerStgFrame = null;
cc.game.onStart = function () {
  !cc.sys.isNative &&
    document.getElementById("bkLoading") &&
    document.body.removeChild(document.getElementById("bkLoading"));
  cc.view.enableRetina(cc.sys.os === cc.sys.OS_IOS ? !0 : !1);
  cc.view.adjustViewPort(!0);
  var a, b;
  isWebPlatform()
    ? ((WINDOW_WIDTH = 960),
      (WINDOW_HEIGHT = 625),
      (a = WINDOW_WIDTH),
      (b = WINDOW_HEIGHT),
      (cc.loader.resPath = "res/w"),
      logMessage("Web platform " + a + "-" + b))
    : ((a = cc.view.getFrameSize().width),
      (b = cc.view.getFrameSize().height),
      logMessage("Mobile platform " + a + "-" + b),
      (cc.loader.resPath = "res/m"));
  var d = a / WINDOW_WIDTH,
    e = b / WINDOW_HEIGHT;
  GAME_SCALE = 1 < d || 1 < e ? (d > e ? e : d) : d < e ? e : d;
  logMessage(
    "GAME_SCALE: " + GAME_SCALE + " isWebPlatform: " + isWebPlatform()
  );
  isWebPlatform()
    ? ((cc.containerStgFrame = cc.ContainerStrategy.extend({
        apply: function (d, e) {
          var h = cc.container.style;
          this._setupContainer(d, a, b);
          h.marginLeft = "auto";
          h.marginRight = "auto";
          h.marginTop = "0px";
          h.marginBottom = "0px";
          h.paddingLeft = "0px";
          h.paddingRight = "0px";
        },
      })),
      cc.view.setDesignResolutionSize(
        a,
        b,
        new cc.ResolutionPolicy(
          new cc.containerStgFrame(),
          cc.ContentStrategy.SHOW_ALL
        )
      ))
    : (cc.view.setDesignResolutionSize(a, b, cc.ResolutionPolicy.SHOW_ALL),
      g_resources.push(nhac_nen_ziga));
  cc.view.resizeWithBrowserSize(!1);
  cc.view.enableAutoFullScreen(!1);
  FbService();
  cc.LoaderScene.preload(
    g_resources,
    function () {
      _initGlobalVar();
      isWebPlatform()
        ? (onStartingGame(),
          (window.onerror = function (a, b, d, e, m) {
            void 0 != d &&
              (logTracker(a, b, m),
              showPopupMessageConfirmEx(
                BkConstString.STR_NETWORK_EXCEPTION,
                function () {
                  cc.loader.releaseAll();
                  Util.reloadWebPage();
                },
                !0
              ));
          }))
        : cc.director.runScene(new ZigaLoadingScene());
    },
    this
  );
  logMessage("cc._renderType :" + cc._renderType);
};
cc.game.run();
