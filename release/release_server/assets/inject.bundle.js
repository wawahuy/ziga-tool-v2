(()=>{"use strict";var e={6158:(e,t,n)=>{var o=n(7294),r=n(3935);var i,a=n(7187);function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.VUA=0]="VUA",e[e.SI=1]="SI",e[e.TUONG=2]="TUONG",e[e.XE=3]="XE",e[e.PHAO=4]="PHAO",e[e.MA=5]="MA",e[e.TOT=6]="TOT"}(i||(i={}));var l,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"snapshotBasePieceMove",this.gameLayer.onMove),u(this,"snapshotBaseSelectPiece",this.gameLayer.selectPiece),u(this,"snapshotBaseTouchUpHandle",this.gameLayer.touchUpHandle),u(this,"snapshotBaseDealCard",this.gameLayer.onDealCard),u(this,"snapshotBaseFinishGame",this.gameLayer.onFinishGame)}var t,n;return t=e,(n=[{key:"move",value:function(e,t,n,o){this.isChessBlack&&(t=9-t,o=9-o,e=8-e,n=8-n),this.logic.processMovePiece(e,t,n,o)}},{key:"getLocationPiece",value:function(e){return this.gameLayer._getLocationPos(e)}},{key:"pointToIndex",value:function(e){var t=this.gameLayer.getRowIndex(e.y);return{x:this.gameLayer.getColIndex(e.x),y:t}}},{key:"indexToPoint",value:function(e){return{x:this.gameLayer.getPosX(e.col),y:this.gameLayer.getPosY(e.row)}}},{key:"addChild",value:function(e){this.gameLayer.addChild(e)}},{key:"removeChild",value:function(e){this.gameLayer.removeChild(e)}},{key:"injectPieceMoveListener",value:function(e){var t=this;this.gameLayer.onMove=function(){for(var n,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var a,c=r[0],u=r[1],l=r[2],s=r[3],f=r[4];e(c,u,l,s,f)&&(a=t.snapshotBasePieceMove).call.apply(a,[t.gameLayer].concat(r)),(n=console).log.apply(n,["Inject move"].concat(r))}}},{key:"injectSelectListener",value:function(e){var t=this;this.gameLayer.selectPiece=function(){for(var n,o,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];e(i[0])&&(o=t.snapshotBaseSelectPiece).call.apply(o,[t.gameLayer].concat(i)),(n=console).log.apply(n,["Inject select"].concat(i))}}},{key:"injectTouchUpListener",value:function(e){var t=this;this.gameLayer.touchUpHandle=function(n,o){e({x:n,y:o})&&t.snapshotBaseTouchUpHandle.call(t.gameLayer,n,o),console.log("Touch",n,o)}}},{key:"injectStartGameListener",value:function(e){var t=this;this.gameLayer.onDealCard=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var i;e.apply(void 0,o)&&(i=t.snapshotBaseDealCard).call.apply(i,[t.gameLayer].concat(o)),console.log("Start game")}}},{key:"injectFinishGameListener",value:function(e){var t=this;this.gameLayer.onFinishGame=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var i;e.apply(void 0,o)&&(i=t.snapshotBaseFinishGame).call.apply(i,[t.gameLayer].concat(o)),console.log("Finish game")}}},{key:"size",get:function(){return cc.director._winSizeInPoints}},{key:"scene",get:function(){return cc.director._scenesStack[0]}},{key:"gameLayer",get:function(){return this.scene.getGameLayer()}},{key:"logic",get:function(){return this.scene.getLogic()}},{key:"listPieces",get:function(){return this.gameLayer.chessPieces}},{key:"pieceSelected",get:function(){var e=this.gameLayer.pieceSelected;return-1==e?null:this.listPieces[e]}},{key:"myClientState",get:function(){return this.logic.getMyClientState()}},{key:"isChessBlack",get:function(){return this.gameLayer.isReverse}}])&&c(t.prototype,n),e}(),f=n(9370);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(l||(l={}));var E,S,O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=g(t);if(n){var r=g(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return v(this,e)});function r(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),b(y(e=o.call(this)),"ws",void 0),e.ws=new WebSocket("ws://localhost:14342/ws"),e.ws.onopen=e.onOpen.bind(y(e)),e.ws.onerror=e.onError.bind(y(e)),e.ws.onclose=e.onClose.bind(y(e)),e.ws.onmessage=e.onData.bind(y(e)),e.on("message",(function(e){var t=e.type==l.ERROR?"error":e.type==l.SUCCESS?"success":"warn";e.autoHide?f.ZP[t](e.message):f.ZP[t](e.message,0)})),e}return d(r,null,[{key:"instance",value:function(){return r._instance||(r._instance=new r),r._instance}}]),d(r,[{key:"onOpen",value:function(){console.log("socket is opened")}},{key:"onError",value:function(){console.log("socket is error")}},{key:"onClose",value:function(){f.ZP.error("Bạn bị mất kết nối đến app vui lòng khởi động lại ziga",0)}},{key:"onData",value:function(e){try{var t=e.data,n=JSON.parse(t);console.log(n),this.emit(n.name,n.data)}catch(e){console.log(e)}}},{key:"send",value:function(e){var t=JSON.stringify(e);console.log(e),this.ws.send(t)}},{key:"openCotuong",value:function(){this.send({name:"opencotuong"})}},{key:"startCotuong",value:function(e){this.send({name:"startcotuong",data:e})}},{key:"closeCotuong",value:function(){this.send({name:"closecotuong"})}},{key:"moveCotuong",value:function(e){this.send({name:"movecotuong",data:e})}},{key:"setDepth",value:function(e){this.send({name:"setdepth",data:e})}},{key:"cancelFindMove",value:function(){this.send({name:"cancelfindmove",data:{}})}},{key:"auth",value:function(e){this.send({name:"auth",data:e})}}]),r}(a.EventEmitter);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}b(O,"_instance",void 0),function(e){e[e.NETWORK_TABLE_JOIN_SUCCESS=9]="NETWORK_TABLE_JOIN_SUCCESS",e[e.NETWORK_GAME_JOIN_SUCCESS=70]="NETWORK_GAME_JOIN_SUCCESS",e[e.NETWORK_GAME_LEAVE_SUCCESS=72]="NETWORK_GAME_LEAVE_SUCCESS"}(E||(E={})),function(e){e[e.CO_TUONG=19]="CO_TUONG",e[e.CO_UP=20]="CO_UP"}(S||(S={}));var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(o);if(r){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),T(P(e=i.call(this)),"snapshootBaseOpen",BkConnectionManager.onOpen),T(P(e),"spapshootBaseMessage",BkConnectionManager.connection.connectionWS.onmessage),e.injectMessageListener(),e}return t=a,(n=[{key:"injectMessageListener",value:function(){var e=this;BkConnectionManager.connection.connectionWS.onmessage=function(t){var n=new BkPacket;n.parsePacketWithBuffer(new Int8Array(t.data));var o=n.Type,r=n.Header,i=n.Buffer;switch(e.emit("message",o,r,i),o){case E.NETWORK_TABLE_JOIN_SUCCESS:e.emit("join",null==i?void 0:i.Buf[0]);break;case E.NETWORK_GAME_LEAVE_SUCCESS:e.emit("leave")}e.spapshootBaseMessage(t)}}}])&&_(t.prototype,n),a}(a.EventEmitter),M=n(6486);function N(e){return cc.hexToColor(e)}function L(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const D=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(t="node")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this.node=n,this.node=new cc.DrawNode}var t,n;return t=e,(n=[{key:"setZOrder",value:function(e){this.node.setZOrder(e)}},{key:"setLineWidth",value:function(e){this.node.setLineWidth(e)}},{key:"drawLine",value:function(e,t,n,o,r,i){this.node.drawSegment(cc.p(e,t),cc.p(n,o),r,i)}},{key:"drawCircle",value:function(e,t,n,o,r){this.node.drawCircle(cc.p(e,t),n,.785,90,!1,o,r)}},{key:"drawSolidCircle",value:function(e,t,n,o){this.drawCircle(e,t,n,1,o);var r=this.node._buffer[this.node._buffer.length-1];r.isFill=!0,r.fillColor=o}},{key:"drawCubicLine",value:function(e,t,n,o,r,i,a,c,u,l){this.node.drawCubicBezier(cc.p(e,t),cc.p(n,o),cc.p(r,i),cc.p(a,c),90,u,l)}},{key:"add",value:function(e){this.node.retain(),this.node.removeFromParent(),e.addChild(this.node),this.node.release()}},{key:"remove",value:function(e){e.removeChild(this.node)}}])&&L(t.prototype,n),e}();function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const A=function(){function e(){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(t="node")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this.node=n,this.node=new BkLabel("","Arial",16)}var t,n;return t=e,(n=[{key:"setText",value:function(e){this.node.setText(e)}},{key:"setPosition",value:function(e,t){this.node.setPosition(e,t)}},{key:"setZOrder",value:function(e){this.node.setZOrder(e)}},{key:"setColor",value:function(e){this.node.setColor(e)}},{key:"add",value:function(e){this.node.retain(),this.node.removeFromParent(),e.addChild(this.node),this.node.release()}},{key:"remove",value:function(e){e.removeChild(this.node)}}])&&x(t.prototype,n),e}();function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=["#E52B50","#000000","#003153","#4B0082","#FF6600","#808000","#800000"],Z=function(){function e(t,n,o,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;R(this,e),U(this,"node",void 0),U(this,"nodeDepth",void 0),U(this,"nodeLine",void 0),U(this,"_node",[]),U(this,"_depth",0),U(this,"_move",{});var c=this.getColor(),u=new D;u.drawCircle(o,r,30,a,c),this._node.push(u),o+=o>t?-30:o<t?30:0,r+=r>n?-30:r<n?30:0;var l=new D,s=0,f=0,h=0,m=0,d=M.random(0,1)?-1:1;t-o==0?(s=t+d*M.random(10,100),f=n,h=o+d*M.random(10,100),m=r):n-r==0?(f=n+d*M.random(10,100),s=t,m=r+d*M.random(10,100),h=o):(s=M.random(t,t+d*(o-t)*.25),f=M.random(n,n+d*(r-n)*.25),h=M.random(t,o-d*(o-t)*.25),m=M.random(n,r-d*(r-n)*.25)),l.drawCubicLine(t,n,s,f,h,m,o,r,a,c),l.setZOrder(1e3),this.nodeLine=l,this._node.push(l);var p=new D;p.drawSolidCircle(o,r,-1==i?16:12,c),p.setZOrder(9999),this._node.push(p),this.nodeDepth=new A,this.nodeDepth.setText(-1==i?"Max":i.toString()),this.nodeDepth.setPosition(o,r),this.nodeDepth.setColor(N("#FFFFFF")),this.nodeDepth.setZOrder(1e4),this._node.push(this.nodeDepth),this._depth=i}var t,n;return t=e,(n=[{key:"add",value:function(e){this._node.map((function(t){return t.add(e)}))}},{key:"remove",value:function(e){this._node.map((function(t){return t.remove(e)}))}},{key:"getColor",value:function(){var t=N(F[e.globalPosColor]);return++e.globalPosColor>=F.length&&(e.globalPosColor=0),t}},{key:"isEquals",value:function(e,t,n,o){return M.isEqual({ax:e,ay:t,bx:n,by:o},this._move)}},{key:"setUserData",value:function(e,t,n,o){this._move={ax:e,ay:t,bx:n,by:o}}},{key:"setDepth",value:function(e){this._depth=e,this.nodeDepth.setText(e.toString())}}])&&B(t.prototype,n),e}();U(Z,"globalPosColor",0);const W=Z;function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q,X;O.instance(),function(e){e[e.FIND_BEST_MOVE=0]="FIND_BEST_MOVE",e[e.AUTO=1]="AUTO",e[e.DEPTH=2]="DEPTH"}(q||(q={})),function(e){e.SHOW_MENU="showmenu",e.HIDE_MENU="hidemenu",e.SHOW_OPTION_PIECE="showOptionPiece",e.HIDE_OPTION_PIECE="hideOptionPiece",e.REMOVE_ALL_DRAW="removeAllDraw",e.DRAW_MENU="drawMenu",e.FIND_MOVE_START="findMoveStart",e.FIND_MOVE_END="findMoveEnd",e.MESS_NO_SELECT="messNoSelect"}(X||(X={}));var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(o);if(r){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return z(this,e)});function a(){var e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),$(K(t=i.call(this)),"menu",{}),$(K(t),"gameInject",void 0),$(K(t),"socketInject",void 0),$(K(t),"socketMain",void 0),$(K(t),"elementCanvas",void 0),$(K(t),"pieceSelected",void 0),$(K(t),"ponder",!1),$(K(t),"ponderTarget",void 0),$(K(t),"cancelSelect",!1),$(K(t),"nodeDraw",[]),$(K(t),"setDepth",(function(e){t.socketMain.setDepth(e)})),t.elementCanvas=null===(e=document.getElementById("Cocos2dGameContainer"))||void 0===e?void 0:e.getElementsByTagName("canvas")[0],t.socketMain=O.instance(),t.socketInject=new I,t.socketInject.on("join",t.joinListener.bind(K(t))),t.socketInject.on("leave",t.outListener.bind(K(t))),t.socketMain.on("infomove",t.onEngineInfoMove.bind(K(t))),t.socketMain.on("bestmove",t.onEngineBestMove.bind(K(t))),t.socketMain.on("startfindmove",t.onEngineStartFindMove.bind(K(t))),t}return t=a,(n=[{key:"initMenu",value:function(){this.menu[q.AUTO]="1"==localStorage.getItem("yuh_"+q.AUTO),this.menu[q.FIND_BEST_MOVE]="1"==localStorage.getItem("yuh_"+q.FIND_BEST_MOVE),this.menu[q.DEPTH]=localStorage.getItem("yuh_"+q.DEPTH)||15,this.emit(X.DRAW_MENU,this.menu),this.setDepth(this.menu[q.DEPTH])}},{key:"joinListener",value:function(e){var t=this;e==S.CO_TUONG&&(console.log("open cot uong"),setTimeout((function(){t.ponder=!1,t.gameInject=new s,t.gameInject.injectSelectListener(t.selectListener.bind(t)),t.gameInject.injectTouchUpListener(t.touchUpListener.bind(t)),t.gameInject.injectPieceMoveListener(t.pieceMoveListener.bind(t)),t.gameInject.injectStartGameListener(t.startListener.bind(t)),t.initMenu(),t.emit(X.SHOW_MENU),t.socketMain.openCotuong()}),1e3))}},{key:"outListener",value:function(){console.log("out cot uong"),this.socketMain.closeCotuong(),this.emit(X.HIDE_MENU)}},{key:"startListener",value:function(){var e=this;return setTimeout((function(){e.socketMain.startCotuong(e.gameInject.isChessBlack)}),1e3),!0}},{key:"selectListener",value:function(e){var t;if(this.cancelSelect)return this.emit(X.MESS_NO_SELECT),!1;var n=null===(t=this.gameInject)||void 0===t?void 0:t.listPieces;if(n){var o=n[e];this.pieceSelected=o,this.emit(X.SHOW_OPTION_PIECE,o)}return!0}},{key:"touchUpListener",value:function(e){return!this.ponder||!this.gameInject||(this.ponderTarget=this.gameInject.pointToIndex(e),!1)}},{key:"pieceMoveListener",value:function(e,t,n,o){var r=this;return this.emit(X.REMOVE_ALL_DRAW),console.log("test move",e,t,n,o),this.nodeDraw.map((function(e){return e.remove(r.gameInject)})),this.nodeDraw=[],setTimeout((function(){r.socketMain.moveCotuong([e,t,n,o])})),!0}},{key:"onEngineInfoMove",value:function(e){if(this.menu[q.FIND_BEST_MOVE]){var t=this.gameInject.indexToPoint({col:e.move.ax,row:e.move.ay}),n=this.gameInject.indexToPoint({col:e.move.bx,row:e.move.by}),o=this.nodeDraw.find((function(t){return t instanceof W&&t.isEquals(e.move.ax,e.move.ay,e.move.bx,e.move.by)}));if(o)o.setDepth(e.depth),console.log("re set depth",e.depth,o);else{var r=new W(t.x,t.y,n.x,n.y,e.depth);r.setUserData(e.move.ax,e.move.ay,e.move.bx,e.move.by),r.add(this.gameInject),this.nodeDraw.push(r),console.log("set new nodedraw",e)}}}},{key:"onEngineBestMove",value:function(e){var t=this;this.cancelSelect=!1;var n=this.nodeDraw.find((function(t){return t instanceof W&&t.isEquals(e.move.ax,e.move.ay,e.move.bx,e.move.by)}));n&&n.remove(this.gameInject);var o=this.gameInject.indexToPoint({col:e.move.ax,row:e.move.ay}),r=this.gameInject.indexToPoint({col:e.move.bx,row:e.move.by}),i=new W(o.x,o.y,r.x,r.y,e.depth,9);i.setUserData(e.move.ax,e.move.ay,e.move.bx,e.move.by),i.add(this.gameInject),this.nodeDraw.push(i),this.emit(X.FIND_MOVE_END),setTimeout((function(){t.menu[q.AUTO]&&t.gameInject.move(e.move.ax,e.move.ay,e.move.bx,e.move.by)}),200)}},{key:"onEngineStartFindMove",value:function(){this.cancelSelect=!0,this.emit(X.FIND_MOVE_START)}},{key:"computeRealY",value:function(e){var t;return((null===(t=this.gameInject)||void 0===t?void 0:t.size.height)||0)-e}},{key:"enablePonder",value:function(){return!!this.pieceSelected&&(this.ponder=!0,!0)}},{key:"disablePonder",value:function(){return!this.pieceSelected&&(this.ponder=!1,!0)}},{key:"hocSetMenu",value:function(e){var t=this;return function(n){switch(t.menu[e]=n,e){case q.AUTO:case q.FIND_BEST_MOVE:localStorage.setItem("yuh_"+e,n?"1":"0");break;case q.DEPTH:t.menu[e]=n,t.setDepth(n),localStorage.setItem("yuh_"+e,n)}t.emit(X.DRAW_MENU,t.menu)}}},{key:"cacelFindMove",value:function(){this.socketMain.cancelFindMove()}}])&&V(t.prototype,n),a}(a.EventEmitter),Q=n(404),ee=n(2028),te=n(5454),ne=n(909),oe=n(4549);const re="item";function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function le(){var e,t,n,r,i=(0,o.useRef)(),a=(0,o.useRef)(),c=ce((0,o.useState)({}),2),u=c[0],l=c[1],s=ce((0,o.useState)(),2),h=s[0],m=s[1],d=ce((0,o.useState)(),2),p=d[0],v=d[1],y=ce((0,o.useState)(!1),2),g=y[0],b=y[1],E=ce((0,o.useState)(!1),2),S=E[0],O=E[1];(0,o.useEffect)((function(){i.current=new Y,i.current.on(X.SHOW_MENU,(function(){b(!0)})),i.current.on(X.HIDE_MENU,(function(){b(!1)})),i.current.on(X.SHOW_OPTION_PIECE,(function(e){})),i.current.on(X.REMOVE_ALL_DRAW,(function(){m(null),v(!1)})),i.current.on(X.DRAW_MENU,(function(e){l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))})),i.current.on(X.FIND_MOVE_START,(function(){var e;a.current&&(null===(e=a.current)||void 0===e||e.call(a)),a.current=f.ZP.loading("Tìm nước đi...",0),O(!0)})),i.current.on(X.FIND_MOVE_END,(function(){var e;null===(e=a.current)||void 0===e||e.call(a),O(!1)})),i.current.on(X.MESS_NO_SELECT,(function(){f.ZP.error("Đang tìm nước đi!")}))}),[]);var k=function(e){var t,n;v(e),e?null===(t=i.current)||void 0===t||t.enablePonder():null===(n=i.current)||void 0===n||n.disablePonder()};return g&&o.createElement("div",{className:"injectCnt"},h&&o.createElement("div",{style:{position:"absolute",top:((null===(e=i.current)||void 0===e?void 0:e.computeRealY(h.y))||0+h.height/2)+"px",left:h.x+h.width/4+"px"}},p?o.createElement(Q.Z,{size:"small",shape:"circle",icon:o.createElement(oe.Z,null),onClick:function(){return k(!1)}}):o.createElement(Q.Z,{size:"small",shape:"circle",icon:o.createElement(ne.Z,null),onClick:function(){return k(!0)}})),o.createElement("section",{className:"injectMenu"},o.createElement(ee.Z,{className:re,unCheckedChildren:"Đã tắt Auto",checkedChildren:"Đã bật Auto",checked:u[q.AUTO],onChange:null===(t=i.current)||void 0===t?void 0:t.hocSetMenu(q.AUTO)}),o.createElement(ee.Z,{className:re,unCheckedChildren:"Đã hiện all move",checkedChildren:"Đã ẩn all move",checked:u[q.FIND_BEST_MOVE],onChange:null===(n=i.current)||void 0===n?void 0:n.hocSetMenu(q.FIND_BEST_MOVE)}),o.createElement(te.Z,{className:re,value:u[q.DEPTH],min:1,max:25,tipFormatter:function(e){return"Depth: "+e},onChange:null===(r=i.current)||void 0===r?void 0:r.hocSetMenu(q.DEPTH)}),S&&o.createElement(Q.Z,{onClick:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.cacelFindMove()},className:"cntCancel"},"Hủy tìm moves")))||o.createElement(o.Fragment,null)}var se=n(1606),fe=n(371),he=n(9181),me=n(3852),de=n(2603),pe=n(9148),ve=n(9420),ye=n(2497);const ge={containerLogin:"containerLogin",containerLogo:"containerLogo",containerInput:"containerInput",keyInput:"keyInput",checkbox:"checkbox","ant-checkbox-inner":"ant-checkbox-inner","ant-checkbox-checked":"ant-checkbox-checked",cntSubmit:"cntSubmit",btnBuy:"btnBuy",popupBuy:"popupBuy","ant-popover-inner":"ant-popover-inner",sp:"sp","ant-popover-title":"ant-popover-title","ant-popover-inner-content":"ant-popover-inner-content",listBuy:"listBuy","ant-list-item":"ant-list-item","ant-list-item-meta-title":"ant-list-item-meta-title"},be=n.p+"logo-white.png";function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Oe=["  1d  -   10k"," 10d  -   80k"," 30d  -  190k","365d  - 1000k"],ke="yuh_token",_e="yuh_token_checked",we=n(8130);function Ce(e){return o.createElement("div",{className:"ant-message styleCoutdown"},o.createElement("div",{className:"ant-message-notice-content"},o.createElement("div",{className:"ant-message-custom-content ant-message-error"},o.createElement("span",null,o.createElement(we.ZP,{date:e.date})))))}function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var je=o.createContext({});const Te=je;function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,r=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(o=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Ne,Le=(Ne=function(e){var t=Ee((0,o.useState)("true"===localStorage.getItem(_e)),2),n=t[0],r=t[1],i=Ee((0,o.useState)(localStorage.getItem(ke)||""),2),a=i[0],c=i[1],u=Ee((0,o.useState)(!1),2),l=u[0],s=u[1];return o.createElement("div",{className:ge.containerLogin},o.createElement("div",{className:ge.containerLogo},o.createElement("a",{href:"https://giayuh.com"},o.createElement("img",{src:be}))),o.createElement("div",{className:ge.containerInput},o.createElement("div",null,o.createElement(se.Z,{allowClear:!0,className:ge.keyInput,defaultValue:a,onChange:function(e){return c(e.target.value)},size:"large",placeholder:"nhập token tại đây",prefix:o.createElement(de.Z,null)})," ",o.createElement("br",null),o.createElement(fe.Z,{className:ge.checkbox,checked:n,onChange:function(e){return r(e.target.checked)}},"ghi nhớ token"),o.createElement("div",{className:ge.cntSubmit},o.createElement(Q.Z,{className:ge.btnConnect,loading:l,onClick:function(){s(!0),a&&n&&localStorage.setItem(ke,a),localStorage.setItem(_e,n?"true":"false");var t=O.instance();t.once("auth",(function(t){var n,o;t.auth?f.ZP.success("Xác thực thành công!"):f.ZP.error(t.message),s(!1),null==e||null===(n=e.setTimeRemaining)||void 0===n||n.call(e,t.timeRemaining||null),null==e||null===(o=e.setAuth)||void 0===o||o.call(e,t.auth||!1)})),t.auth(a)},type:"primary",shape:"round",icon:o.createElement(pe.Z,null),size:"large"},"Kết nối"),o.createElement(he.Z,{overlayClassName:ge.popupBuy,content:o.createElement(o.Fragment,null,o.createElement("div",{className:"sp"},"Vui lòng liên hệ qua zalo ",o.createElement("b",null,"(+84) 942 100 614")," để được hổ trợ."),o.createElement("div",{className:"sp"},"Liên hệ hỗ trợ dùng thử 2h."),o.createElement("div",{className:"sp"},"Version test mua (x2 time)"),o.createElement("div",{className:"sp"},"Thông tin gói (vnđ):"),o.createElement(me.ZP,{className:ge.listBuy,bordered:!1,itemLayout:"horizontal",dataSource:Oe,renderItem:function(e){return o.createElement(me.ZP.Item,null,o.createElement(me.ZP.Item.Meta,{avatar:o.createElement(ve.Z,null),title:e}))}})),title:"Mua token",trigger:"click"},o.createElement(Q.Z,{className:ge.btnBuy,type:"primary",shape:"round",icon:o.createElement(ye.Z,null),size:"large"},"Mua token"))))))},function(e){return o.createElement(je.Consumer,null,(function(t){return o.createElement(Ne,Pe({},e,{setTimeRemaining:null==t?void 0:t.setTimeRemaining,setAuth:null==t?void 0:t.setAuth}))}))});function De(){var e=Ie((0,o.useState)(!1),2),t=e[0],n=e[1],r=Ie((0,o.useState)(),2),i=r[0],a=r[1];return o.createElement(Te.Provider,{value:{setAuth:n,setTimeRemaining:a}},!t&&o.createElement("section",{className:"inject"},o.createElement(Le,null)),t&&o.createElement(o.Fragment,null,o.createElement(le,null),o.createElement(Ce,{date:Date.now()+(i||0)})))}var xe=document.createElement("div"),Ae=document.getElementById("Cocos2dGameContainer");null==Ae||Ae.setAttribute("id","Cocos2dGameContainerC"),null==Ae||Ae.appendChild(xe),r.render(o.createElement(De,null),xe)}},t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={655:0},t=[[6158,216]],o=e=>{},r=(r,i)=>{for(var a,c,[u,l,s,f]=i,h=0,m=[];h<u.length;h++)c=u[h],n.o(e,c)&&e[c]&&m.push(e[c][0]),e[c]=0;for(a in l)n.o(l,a)&&(n.m[a]=l[a]);for(s&&s(n),r&&r(i);m.length;)m.shift()();return f&&t.push.apply(t,f),o()},i=self.webpackChunkinject_script=self.webpackChunkinject_script||[];function a(){for(var o,r=0;r<t.length;r++){for(var i=t[r],a=!0,c=1;c<i.length;c++){var u=i[c];0!==e[u]&&(a=!1)}a&&(t.splice(r--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),o}i.forEach(r.bind(null,0)),i.push=r.bind(null,i.push.bind(i));var c=n.x;n.x=()=>(n.x=c||(e=>{}),(o=a)())})(),n.x()})();